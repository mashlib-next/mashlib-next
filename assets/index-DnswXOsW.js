import{generateKeyPair as To,decodeJwt as Ao,createRemoteJWKSet as Do,jwtVerify as _o,calculateJwkThumbprint as So,exportJWK as Ps,SignJWT as Io}from"https://esm.sh/jose@5";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const n of s.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function dr(a){"@babel/helpers - typeof";return dr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dr(a)}function Fo(a,e){if(dr(a)!="object"||!a)return a;var t=a[Symbol.toPrimitive];if(t!==void 0){var r=t.call(a,e);if(dr(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(a)}function Bo(a){var e=Fo(a,"string");return dr(e)=="symbol"?e:e+""}function re(a,e,t){return(e=Bo(e))in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}const zt={Literal:1,Collection:3,Graph:4,NamedNode:5,BlankNode:6,Variable:7};let We=class{constructor(e){re(this,"termType",void 0),re(this,"classOrder",void 0),re(this,"value",void 0),this.value=e}substitute(e){return this}compareTerm(e){return this.classOrder<e.classOrder?-1:this.classOrder>e.classOrder?1:this.value<e.value?-1:this.value>e.value?1:0}equals(e){return e?this.termType===e.termType&&this.value===e.value:!1}hashString(){return this.toCanonical()}sameTerm(e){return this.equals(e)}toCanonical(){return this.toNT()}toNT(){return this.toString()}toNQ(){return this.toNT()}toString(){throw new Error("Node.toString() is abstract - see the subclasses instead")}};re(We,"fromValue",void 0);re(We,"toJS",void 0);const Fn="NamedNode",Bn="BlankNode",Xn="Literal",cn="Variable",_n="DefaultGraph",dn="Collection",$s="Empty",gr="Graph",Vi="text/html",La="application/ld+json",qs="text/n3",Lo="application/n3",ka="application/nquads",Ra="application/n-quads",ko="application/n-triples",hr="application/rdf+xml",Ro="application/sparql-update",Oo="application/sparql-update-single-match",Tn="text/turtle",Uo="application/x-turtle",Oa="application/xhtml+xml";let Wt=class Un extends We{static getId(e){if(e){if(typeof e!="string")throw new Error("Bad id argument to new blank node: "+e);if(e.includes("#")){let t=e.split("#");return t[t.length-1]}return e}return"n"+Un.nextId++}constructor(e){super(Un.getId(e)),re(this,"termType",Bn),re(this,"classOrder",zt.BlankNode),re(this,"isBlank",1),re(this,"isVar",1)}get id(){return this.value}set id(e){this.value=e}compareTerm(e){return this.classOrder<e.classOrder?-1:this.classOrder>e.classOrder?1:this.id<e.id?-1:this.id>e.id?1:0}copy(e){var t=new Un;return e.copyTo(this,t),t}toCanonical(){return Un.NTAnonymousNodePrefix+this.value}toString(){return Un.NTAnonymousNodePrefix+this.id}};re(Wt,"nextId",0);re(Wt,"NTAnonymousNodePrefix","_:");function Cn(a){return typeof a=="string"?a:a.value}function Mo(a){return typeof a=="object"&&a!==null&&"subject"in a}function Zr(a){return typeof a=="object"&&a!==null&&"statements"in a}function Ya(a){return Qt(a)&&a.termType===dn}function Po(a){return a&&Object.prototype.hasOwnProperty.call(a,"termType")&&(a.termType===Fn||a.termType===cn||a.termType===Bn||a.termType===dn||a.termType===Xn||a.termType===gr)}function $o(a){return a&&Object.prototype.hasOwnProperty.call(a,"termType")&&(a.termType===Fn||a.termType===cn||a.termType===Bn||a.termType===dn||a.termType===Xn||a.termType===gr)}function qo(a){return Qt(a)&&(a.termType===Fn||a.termType===Bn||a.termType===cn)}function Ho(a){return Qt(a)&&a.termType===cn}function Qt(a){return typeof a=="object"&&a!==null&&"termType"in a}function Hs(a){return a.termType===Xn}function Mn(a){return typeof a=="object"&&a!==null&&"subject"in a&&"predicate"in a&&"object"in a}function Gi(a){return Qt(a)&&a.termType==="NamedNode"}function jo(a){return Qt(a)&&"termType"in a&&a.termType==="BlankNode"}function Vo(a){return Qt(a)&&(a.termType===Fn||a.termType===cn||a.termType===Bn||a.termType===_n)}let ft=class Pn extends We{constructor(e){if(super(Cn(e)),re(this,"termType",Fn),re(this,"classOrder",zt.NamedNode),!this.value)throw new Error("Missing IRI for NamedNode");if(!this.value.includes(":"))throw new Error('NamedNode IRI "'+e+'" must be absolute.');if(this.value.includes(" ")){var t='Error: NamedNode IRI "'+e+'" must not contain unencoded spaces.';throw new Error(t)}}dir(){var e=this.value.split("#")[0],t=e.slice(0,-1).lastIndexOf("/"),r=e.indexOf("//");return r>=0&&t<r+2||t<0?null:new Pn(e.slice(0,t+1))}site(){var e=this.value.split("#")[0],t=e.indexOf("//");if(t<0)throw new Error("This URI does not have a web site part (origin)");var r=e.indexOf("/",t+2);return r<0?new Pn(e.slice(0)+"/"):new Pn(e.slice(0,r+1))}doc(){return this.value.indexOf("#")<0?this:new Pn(this.value.split("#")[0])}toString(){return"<"+this.value+">"}id(){return this.value.split("#")[1]}get uri(){return this.value}set uri(e){this.value=e}static fromValue(e){return typeof e>"u"||e===null||Qt(e)?e:new Pn(e)}};const nn={boolean:new ft("http://www.w3.org/2001/XMLSchema#boolean"),dateTime:new ft("http://www.w3.org/2001/XMLSchema#dateTime"),decimal:new ft("http://www.w3.org/2001/XMLSchema#decimal"),double:new ft("http://www.w3.org/2001/XMLSchema#double"),integer:new ft("http://www.w3.org/2001/XMLSchema#integer"),langString:new ft("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),string:new ft("http://www.w3.org/2001/XMLSchema#string")};let Xt=class Gt extends We{constructor(e,t,r){super(e),re(this,"termType",Xn),re(this,"classOrder",zt.Literal),re(this,"datatype",nn.string),re(this,"isVar",0),re(this,"language",""),t?(this.language=t,this.datatype=nn.langString):r?this.datatype=ft.fromValue(r):this.datatype=nn.string}copy(){return new Gt(this.value,this.lang,this.datatype)}equals(e){return e?this.termType===e.termType&&this.value===e.value&&this.language===e.language&&(!this.datatype&&!e.datatype||this.datatype&&this.datatype.equals(e.datatype)):!1}get lang(){return this.language}set lang(e){this.language=e||""}toNT(){return Gt.toNT(this)}static toNT(e){if(typeof e.value=="number")return""+e.value;if(typeof e.value!="string")throw new Error("Value of RDF literal is not string or number: "+e.value);var t=e.value;return t=t.replace(/\\/g,"\\\\"),t=t.replace(/\"/g,'\\"'),t=t.replace(/\n/g,"\\n"),t=t.replace(/\r/g,"\\r"),t='"'+t+'"',e.language?t+="@"+e.language:e.datatype.equals(nn.string)||(t+="^^"+e.datatype.toCanonical()),t}toString(){return""+this.value}static fromBoolean(e){let t=e?"1":"0";return new Gt(t,null,nn.boolean)}static fromDate(e){if(!(e instanceof Date))throw new TypeError("Invalid argument to Literal.fromDate()");let t=function(i){return(""+(100+i)).slice(1,3)},r=""+e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"Z";return new Gt(r,null,nn.dateTime)}static fromNumber(e){if(typeof e!="number")throw new TypeError("Invalid argument to Literal.fromNumber()");let t;const r=e.toString();return r.indexOf("e")<0&&Math.abs(e)<=Number.MAX_SAFE_INTEGER?t=Number.isInteger(e)?nn.integer:nn.decimal:t=nn.double,new Gt(r,null,t)}static fromValue(e){if(Hs(e))return e;switch(typeof e){case"object":if(e instanceof Date)return Gt.fromDate(e);case"boolean":return Gt.fromBoolean(e);case"number":return Gt.fromNumber(e);case"string":return new Gt(e)}throw new Error("Can't make literal from "+e+" of type "+typeof e)}};function js(a){return typeof a>"u"||a===null||Qt(a)?a:Array.isArray(a)?new Mt(a):Xt.fromValue(a)}class Mt extends We{constructor(e){super((Wt.nextId++).toString()),re(this,"termType",dn),re(this,"classOrder",zt.Collection),re(this,"closed",!1),re(this,"compareTerm",Wt.prototype.compareTerm),re(this,"elements",[]),re(this,"isVar",0),e&&e.length>0&&e.forEach(t=>{this.elements.push(js(t))})}get id(){return this.value}set id(e){this.value=e}append(e){return this.elements.push(e)}close(){return this.closed=!0,this.closed}shift(){return this.elements.shift()}substitute(e){const t=this.elements.map(r=>r.substitute(e));return new Mt(t)}toNT(){return Mt.toNT(this)}static toNT(e){return Wt.NTAnonymousNodePrefix+e.id}toString(){return"("+this.elements.join(" ")+")"}unshift(e){return this.elements.unshift(e)}}re(Mt,"termType",dn);const fr="chrome:theSession";new ft(fr);let Qa=class extends We{constructor(){super(""),re(this,"value",""),re(this,"termType",_n),re(this,"uri",fr)}toCanonical(){return this.value}toString(){return"DefaultGraph"}};function Xi(a){return!!a&&a.termType===_n}const Go=new Qa;class Ut{constructor(e,t,r,i){re(this,"subject",void 0),re(this,"predicate",void 0),re(this,"object",void 0),re(this,"graph",void 0),this.subject=We.fromValue(e),this.predicate=We.fromValue(t),this.object=We.fromValue(r),this.graph=i==null?Go:We.fromValue(i)}get why(){return this.graph}set why(e){this.graph=e}equals(e){return e.subject.equals(this.subject)&&e.predicate.equals(this.predicate)&&e.object.equals(this.object)&&e.graph.equals(this.graph)}substitute(e){return new Ut(this.subject.substitute(e),this.predicate.substitute(e),this.object.substitute(e),Xi(this.graph)?this.graph:this.graph.substitute(e))}toCanonical(){let e=[this.subject.toCanonical(),this.predicate.toCanonical(),this.object.toCanonical()];return this.graph&&this.graph.termType!==_n&&e.push(this.graph.toCanonical()),e.join(" ")+" ."}toNT(){return[this.subject.toNT(),this.predicate.toNT(),this.object.toNT()].join(" ")+" ."}toNQ(){return[this.subject.toNT(),this.predicate.toNT(),this.object.toNT(),Xi(this.graph)?"":this.graph.toNT()].join(" ")+" ."}toString(){return this.toNT()}}var Vs=Vs||console.log;function bn(a){var e;return e=a.indexOf("#"),e<0?a:a.slice(0,e)}function Xo(a){var e=/[^\/]*\/\/([^\/]*)\//.exec(a);return e?e[1]:""}function xt(a,e){var t,r,i,s,n,l,o=e.indexOf("#");if(o>0&&(e=e.slice(0,o)),a.length===0)return e;if(a.indexOf("#")===0)return e+a;if(s=a.indexOf(":"),s>=0||(t=e.indexOf(":"),e.length===0))return a;if(t<0)return Vs("Invalid base: "+e+" in join with given: "+a),a;if(r=e.slice(0,+t+1||9e9),a.indexOf("//")===0)return r+a;if(e.indexOf("//",t)===t+1){if(i=e.indexOf("/",t+3),i<0)return e.length-t-3>0?e+"/"+a:r+a}else if(i=e.indexOf("/",t+1),i<0)return e.length-t-1>0?e+"/"+a:r+a;if(a.indexOf("/")===0)return e.slice(0,i)+a;if(l=e.slice(i),n=l.lastIndexOf("/"),n<0)return r+a;for(n>=0&&n<l.length-1&&(l=l.slice(0,+n+1||9e9)),l+=a;l.match(/[^\/]*\/\.\.\//);)l=l.replace(/[^\/]*\/\.\.\//,"");return l=l.replace(/\.\//g,""),l=l.replace(/\/\.$/,"/"),e.slice(0,i)+l}function zi(a){const e=a.indexOf(":");return e<0?null:a.slice(0,e)}function ga(a,e){var t,r,i,s,n,l,o,c,h,p,m,w,y,N=new RegExp("^[-_a-zA-Z0-9.]+:(//[^/]*)?/[^/]*$");if(!a)return e;if(a===e)return"";for(r=c=0,n=e.length;c<n&&e[r]===a[r];r=++c);if(a.slice(0,r).match(N)&&(i=e.indexOf("//"),i<0&&(i=-2),s=e.indexOf("/",i+2),e[s+1]!=="/"&&a[s+1]!=="/"&&e.slice(0,s)===a.slice(0,s)))return e.slice(s);if(e[r]==="#"&&a.length===r)return e.slice(r);for(;r>0&&e[r-1]!=="/";)r--;if(r<3||a.indexOf("//",r-2)>0||e.indexOf("//",r-2)>0||a.indexOf(":",r)>0)return e;for(o=0,m=a.slice(r),h=0,l=m.length;h<l;h++)t=m[h],t==="/"&&o++;if(o===0&&r<e.length&&e[r]==="#")return"./"+e.slice(r);if(o===0&&r===e.length)return"./";if(y="",o>0)for(p=1,w=o;w>=1?p<=w:p>=w;w>=1?++p:--p)y+="../";return y+e.slice(r)}let Sn=class Gs extends We{constructor(e=""){super(e),re(this,"termType",cn),re(this,"base","varid:"),re(this,"classOrder",zt.Variable),re(this,"isVar",1),re(this,"uri",void 0),this.base="varid:",this.uri=xt(e,this.base)}equals(e){return e?this.termType===e.termType&&this.value===e.value:!1}hashString(){return this.toString()}substitute(e){var t;return(t=e[this.toNT()])!=null?t:this}toString(){return Gs.toString(this)}static toString(e){return e.uri.slice(0,e.base.length)===e.base?`?${e.uri.slice(e.base.length)}`:`?${e.uri}`}},bt=(function(a){return a.collections="COLLECTIONS",a.defaultGraphType="DEFAULT_GRAPH_TYPE",a.equalsMethod="EQUALS_METHOD",a.id="ID",a.identity="IDENTITY",a.reversibleId="REVERSIBLE_ID",a.variableType="VARIABLE_TYPE",a})({});const Wi=new Qa,Rt={supports:{[bt.collections]:!1,[bt.defaultGraphType]:!1,[bt.equalsMethod]:!0,[bt.identity]:!1,[bt.id]:!0,[bt.reversibleId]:!1,[bt.variableType]:!0},blankNode(a){return new Wt(a)},defaultGraph:()=>Wi,equals(a,e){return a===e||!a||!e?!0:Mn(a)||Mn(e)?Mn(a)&&Mn(e)?this.equals(a.subject,e.subject)&&this.equals(a.predicate,e.predicate)&&this.equals(a.object,e.object)&&this.equals(a.graph,e.graph):!1:Qt(a)&&Qt(e)?this.id(a)===this.id(e):!1},id(a){if(!a)return"undefined";if(Mn(a))return this.quadToNQ(a);switch(a.termType){case _n:return"defaultGraph";case cn:return Sn.toString(a);default:const e=this.termToNQ(a);if(e)return e;throw new Error(`Can't id term with type '${a.termType}'`)}},isQuad(a){return a instanceof Ut},literal(a,e){if(typeof a!="string"&&!e)return Xt.fromValue(a);const t=typeof a=="string"?a:""+a;return typeof e=="string"?e.indexOf(":")===-1?new Xt(t,e):new Xt(t,null,this.namedNode(e)):new Xt(t,null,e)},namedNode(a){return new ft(a)},quad(a,e,t,r){return new Ut(a,e,t,r||Wi)},triple(a,e,t,r){return this.quad(a,e,t,r)},quadToNQ(a){return`${this.termToNQ(a.subject)} ${this.termToNQ(a.predicate)} ${this.termToNQ(a.object)} ${this.termToNQ(a.graph)} .`},termToNQ(a){switch(a.termType){case Bn:return"_:"+a.value;case _n:return"";case $s:return"<http://www.w3.org/1999/02/22-rdf-syntax-ns#nil>";case Xn:return Xt.toNT(a);case gr:case Fn:return"<"+a.value+">";case dn:return"("+a.elements.map(e=>this.termToNQ(e)).join(" ")+")";default:throw new Error(`Can't serialize nonstandard term type (was '${a.termType}')`)}},toNQ(a){return this.isQuad(a)?this.quadToNQ(a):this.termToNQ(a)},variable(a){return new Sn(a)}},Vt={debug(a){},warn(a){},info(a){},error(a){},success(a){},msg(a){}};function be(a,e){const t=e||{namedNode:r=>new ft(r)};return function(r){return t.namedNode(a+(r||""))}}var kr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xs(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Xr={exports:{}},zo=Xr.exports,Yi;function Wo(){return Yi||(Yi=1,(function(a){(function(e,t){a.exports?a.exports=t():e.ttl2jsonld=t()})(zo,function(){function e(i,s){function n(){this.constructor=i}n.prototype=s.prototype,i.prototype=new n}function t(i,s,n,l){this.message=i,this.expected=s,this.found=n,this.location=l,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,t)}e(t,Error),t.buildMessage=function(i,s){var n={literal:function(w){return'"'+o(w.text)+'"'},class:function(w){var y="",N;for(N=0;N<w.parts.length;N++)y+=w.parts[N]instanceof Array?c(w.parts[N][0])+"-"+c(w.parts[N][1]):c(w.parts[N]);return"["+(w.inverted?"^":"")+y+"]"},any:function(w){return"any character"},end:function(w){return"end of input"},other:function(w){return w.description}};function l(w){return w.charCodeAt(0).toString(16).toUpperCase()}function o(w){return w.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(y){return"\\x0"+l(y)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(y){return"\\x"+l(y)})}function c(w){return w.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(y){return"\\x0"+l(y)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(y){return"\\x"+l(y)})}function h(w){return n[w.type](w)}function p(w){var y=new Array(w.length),N,D;for(N=0;N<w.length;N++)y[N]=h(w[N]);if(y.sort(),y.length>0){for(N=1,D=1;N<y.length;N++)y[N-1]!==y[N]&&(y[D]=y[N],D++);y.length=D}switch(y.length){case 1:return y[0];case 2:return y[0]+" or "+y[1];default:return y.slice(0,-1).join(", ")+", or "+y[y.length-1]}}function m(w){return w?'"'+o(w)+'"':"end of input"}return"Expected "+p(i)+" but "+m(s)+" found."};function r(i,s){s=s!==void 0?s:{};var n={},l={turtleDoc:Li},o=Li,c=function(u){var v=Ue.toJSON();return v["@graph"]=[],u.filter(E=>Array.isArray(E)).forEach(E=>{E.forEach(A=>{v["@graph"].push(A)})}),v["@graph"].length===1&&(Object.assign(v,v["@graph"][0]),delete v["@graph"]),v},h="\uFEFF",p=Te("\uFEFF",!1),m=".",w=Te(".",!1),y=function(u){return u},N="#",D=Te("#",!1),L=/^[^\n]/,R=je([`
`],!0,!1),Q=`
`,J=Te(`
`,!1),x=function(u){return u.join("")},G="@prefix",M=Te("@prefix",!1),X=function(u,v){return Ue.addPrefix(u===""?"0":u,v),{}},k="@base",H=Te("@base",!1),$=function(u){return Ue.addBase(u),{}},q=/^[Bb]/,ee=je(["B","b"],!1,!1),Z=/^[Aa]/,_=je(["A","a"],!1,!1),V=/^[Ss]/,K=je(["S","s"],!1,!1),ae=/^[Ee]/,ie=je(["E","e"],!1,!1),ue=/^[Pp]/,ne=je(["P","p"],!1,!1),ge=/^[Rr]/,Le=je(["R","r"],!1,!1),pe=/^[Ff]/,Ce=je(["F","f"],!1,!1),Me=/^[Ii]/,Je=je(["I","i"],!1,!1),Ae=/^[Xx]/,qe=je(["X","x"],!1,!1),dt=function(u,v){var E={};return typeof u=="string"&&u!=="[]"?E["@id"]=u:typeof u=="object"&&Object.assign(E,u),v&&Object.assign(E,v),[E]},at=function(u,v){var E={};return u&&Object.assign(E,u),v&&Object.assign(E,v),[E]},De=";",ke=Te(";",!1),_e=function(u,v,E,A){var S={};return S[E]=A,S},wt=function(u,v,E){return E},Ve=function(u,v,E){var A={};return E.unshift(xo(u,v)),E.forEach(S=>{S&&Object.keys(S).forEach(U=>{S[U].forEach(P=>{U==="@type"&&P["@id"]!==void 0&&(P=P["@id"]),A[U]===void 0?A[U]=P:Array.isArray(A[U])?A[U].push(P):A[U]=[A[U],P]})})}),A},se=",",Ie=Te(",",!1),st=function(u,v){return v},Tt=function(u,v){return v.unshift(u),v},Oe="a",Re=Te("a",!1),Dt=function(){return"@type"},Zt=function(u){return ma(u,!0)},Et=function(u){return ma(u,!1)},fn=function(u){return u==="[]"?{}:{"@id":u}},b=function(u){return{"@id":u}},f="[",g=Te("[",!1),I="]",j=Te("]",!1),W="(",te=Te("(",!1),xe=")",Ge=Te(")",!1),Pe=function(u){return{"@list":u}},He=function(u,v){return{"@value":u,"@language":v}},Fe="^^",yr=Te("^^",!1),zn=function(u,v){if(v==="http://www.w3.org/2001/XMLSchema#boolean"&&u==="true")return!0;if(v==="http://www.w3.org/2001/XMLSchema#boolean"&&u==="false")return!1;if(v==="http://www.w3.org/2001/XMLSchema#integer")return parseInt(u);if(v==="http://www.w3.org/2001/XMLSchema#double")return parseFloat(u);const E=Ue.resolve(v,!0);if(E){const A=v.split(":")[0];if(E==="http://www.w3.org/2001/XMLSchema#boolean"&&u==="true")return Ue.decrement(A),!0;if(E==="http://www.w3.org/2001/XMLSchema#boolean"&&u==="false")return Ue.decrement(A),!1;if(E==="http://www.w3.org/2001/XMLSchema#integer")return Ue.decrement(A),parseInt(u);if(E==="http://www.w3.org/2001/XMLSchema#double")return Ue.decrement(A),parseFloat(u)}return{"@value":u,"@type":v}},Wn="true",C=Te("true",!1),T=function(){return!0},O="false",Y=Te("false",!1),le=function(){return!1},Ee=function(u){return u+":"},Xe="<",pt=Te("<",!1),Ct=/^[^\0- <>"{}|\^`\\]/,Bt=je([["\0"," "],"<",">",'"',"{","}","|","^","`","\\"],!0,!1),Lt=">",Kt=Te(">",!1),en=function(u){const v=u.map(A=>65536<=A.codePointAt(0)&&A.codePointAt(0)<=983039?"a":A.length===1?A:A.length===6?String.fromCharCode("0x"+A.substring(2)):A.length===10?String.fromCodePoint("0x"+A.substring(2)):A).join("");if(v.match(/^[^\u0000-\u0020<>"{}|^`\\]*$/)){var E=u.join("");try{return Ue.resolve(E)}catch{la("Invalid IRIREF "+E)}}else la("Invalid IRIREF "+u.join("")+" / "+v)},ht=":",tt=Te(":",!1),tn=function(u){return u=u||"0",Ue.hasPrefix(u)===!1&&la("undefined prefix "+u),u},pn=function(u){return u||""},lt=function(u,v){return Ue.increment(u),Ue.resolve(u+":"+v)},Yn="_:",un=Te("_:",!1),Ze=/^[0-9]/,it=je([["0","9"]],!1,!1),Vl="@",Gl=Te("@",!1),ii=/^[a-zA-Z]/,si=je([["a","z"],["A","Z"]],!1,!1),aa="-",ia=Te("-",!1),wr=/^[a-zA-Z0-9]/,Er=je([["a","z"],["A","Z"],["0","9"]],!1,!1),li=function(u,v){return"-"+v.join("")},Xl=function(u,v){return u.join("")+v.join("")},Cr=/^[+\-]/,Nr=je(["+","-"],!1,!1),zl=function(u){return u.match(/^[0+][0-9]+$/)?{"@value":u,"@type":"http://www.w3.org/2001/XMLSchema#integer"}:parseInt(u)},Wl=function(u){return{"@value":u,"@type":"http://www.w3.org/2001/XMLSchema#decimal"}},Yl=function(u){return{"@value":u,"@type":"http://www.w3.org/2001/XMLSchema#double"}},Ql=/^[eE]/,Jl=je(["e","E"],!1,!1),br='"',xr=Te('"',!1),ui=/^[^"\\\n\r]/,oi=je(['"',"\\",`
`,"\r"],!0,!1),Tr="'",Ar=Te("'",!1),ci=/^[^'\\\n\r]/,di=je(["'","\\",`
`,"\r"],!0,!1),Dr="'''",hi=Te("'''",!1),Pt=/^[^'\\]/,$t=je(["'","\\"],!0,!1),_r="''",fi=Te("''",!1),pi=function(u,v){return"''"+v.join("")},mi=function(u,v){return"'"+v.join("")},gi=function(u,v){return u.join("")+v.join("")},Sr='"""',vi=Te('"""',!1),qt=/^[^"\\]/,Ht=je(['"',"\\"],!0,!1),Ir='""',yi=Te('""',!1),wi=function(u,v){return'""'+v.join("")},Ei=function(u,v){return'"'+v.join("")},Ci="\\U",Zl=Te("\\U",!1),Kl=function(u){return String.fromCodePoint(parseInt(u.join(""),16))},Ni="\\u",eu=Te("\\u",!1),tu=function(u){return String.fromCharCode(parseInt(u.join(""),16))},bi="\\t",nu=Te("\\t",!1),ru=function(){return"	"},xi="\\b",au=Te("\\b",!1),iu=function(){return"\b"},Ti="\\n",su=Te("\\n",!1),lu=function(){return`
`},Ai="\\r",uu=Te("\\r",!1),ou=function(){return"\r"},Di="\\f",cu=Te("\\f",!1),du=function(){return"\f"},_i='\\"',hu=Te('\\"',!1),fu=function(){return'"'},Si="\\'",pu=Te("\\'",!1),mu=function(){return"'"},Ii="\\\\",gu=Te("\\\\",!1),vu=function(){return"\\"},yu=/^[ \t\r\n]/,wu=je([" ","	","\r",`
`],!1,!1),Eu=function(){return"[]"},Cu=/^[\uD800-\uDBFF]/,Nu=je([["\uD800","\uDBFF"]],!1,!1),bu=/^[\uDC00-\uDFFF]/,xu=je([["\uDC00","\uDFFF"]],!1,!1),Tu=function(u,v){return u+v},Au=/^[A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Du=je([["A","Z"],["a","z"],["À","Ö"],["Ø","ö"],["ø","˿"],["Ͱ","ͽ"],["Ϳ","῿"],["‌","‍"],["⁰","↏"],["Ⰰ","⿯"],["、","퟿"],["豈","﷏"],["ﷰ","�"]],!1,!1),_u="_",Su=Te("_",!1),Iu="·",Fu=Te("·",!1),Bu=/^[\u0300-\u036F]/,Lu=je([["̀","ͯ"]],!1,!1),ku=/^[\u203F-\u2040]/,Ru=je([["‿","⁀"]],!1,!1),Fi=function(u,v,E,A){return E.join("")+A.join("")},Ou=function(u,v,E){return u+v.join("")+E.join("")},Uu="%",Mu=Te("%",!1),Pu=/^[0-9A-Fa-f]/,$u=je([["0","9"],["A","F"],["a","f"]],!1,!1),qu="\\",Hu=Te("\\",!1),ju=/^[_~.!$&'()*+,;=\/?#@%\-]/,Vu=je(["_","~",".","!","$","&","'","(",")","*","+",",",";","=","/","?","#","@","%","-"],!1,!1),d=0,oe=0,Fr=[{line:1,column:1}],jt=0,sa=[],Br;if("startRule"in s){if(!(s.startRule in l))throw new Error(`Can't start parsing from rule "`+s.startRule+'".');o=l[s.startRule]}function la(u,v){throw v=v!==void 0?v:ua(oe,d),Xu(u,v)}function Te(u,v){return{type:"literal",text:u,ignoreCase:v}}function je(u,v,E){return{type:"class",parts:u,inverted:v,ignoreCase:E}}function Gu(){return{type:"end"}}function Bi(u){var v=Fr[u],E;if(v)return v;for(E=u-1;!Fr[E];)E--;for(v=Fr[E],v={line:v.line,column:v.column};E<u;)i.charCodeAt(E)===10?(v.line++,v.column=1):v.column++,E++;return Fr[u]=v,v}function ua(u,v){var E=Bi(u),A=Bi(v);return{start:{offset:u,line:E.line,column:E.column},end:{offset:v,line:A.line,column:A.column}}}function z(u){d<jt||(d>jt&&(jt=d,sa=[]),sa.push(u))}function Xu(u,v){return new t(u,null,null,v)}function zu(u,v,E){return new t(t.buildMessage(u,v),u,v,E)}function Li(){var u,v,E,A,S;for(u=d,v=[],E=ki();E!==n;)v.push(E),E=ki();if(v!==n){for(E=[],A=Ri();A!==n;)E.push(A),A=Ri();if(E!==n){for(A=[],S=ce();S!==n;)A.push(S),S=ce();A!==n?(oe=u,v=c(E),u=v):(d=u,u=n)}else d=u,u=n}else d=u,u=n;return u}function ki(){var u;return i.charCodeAt(d)===65279?(u=h,d++):(u=n,z(p)),u}function Ri(){var u,v,E,A;if(u=Yu(),u===n)if(u=d,v=eo(),v!==n){for(E=[],A=ce();A!==n;)E.push(A),A=ce();E!==n?(i.charCodeAt(d)===46?(A=m,d++):(A=n,z(w)),A!==n?(oe=u,v=y(v),u=v):(d=u,u=n)):(d=u,u=n)}else d=u,u=n;return u}function Wu(){var u,v,E,A;if(u=d,i.charCodeAt(d)===35?(v=N,d++):(v=n,z(D)),v!==n){for(E=[],L.test(i.charAt(d))?(A=i.charAt(d),d++):(A=n,z(R));A!==n;)E.push(A),L.test(i.charAt(d))?(A=i.charAt(d),d++):(A=n,z(R));E!==n?(i.charCodeAt(d)===10?(A=Q,d++):(A=n,z(J)),A!==n?(oe=u,v=x(E),u=v):(d=u,u=n)):(d=u,u=n)}else d=u,u=n;return u}function ce(){var u;return u=wo(),u===n&&(u=Wu()),u}function Yu(){var u;return u=Qu(),u===n&&(u=Ju(),u===n&&(u=Ku(),u===n&&(u=Zu()))),u}function Qu(){var u,v,E,A,S,U,P,F,he;for(u=d,v=[],E=ce();E!==n;)v.push(E),E=ce();if(v!==n)if(i.substr(d,7)===G?(E=G,d+=7):(E=n,z(M)),E!==n){for(A=[],S=ce();S!==n;)A.push(S),S=ce();if(A!==n)if(S=$i(),S!==n){for(U=[],P=ce();P!==n;)U.push(P),P=ce();if(U!==n)if(P=Jn(),P!==n){for(F=[],he=ce();he!==n;)F.push(he),he=ce();F!==n?(i.charCodeAt(d)===46?(he=m,d++):(he=n,z(w)),he!==n?(oe=u,v=X(S,P),u=v):(d=u,u=n)):(d=u,u=n)}else d=u,u=n;else d=u,u=n}else d=u,u=n;else d=u,u=n}else d=u,u=n;else d=u,u=n;return u}function Ju(){var u,v,E,A,S,U,P;for(u=d,v=[],E=ce();E!==n;)v.push(E),E=ce();if(v!==n)if(i.substr(d,5)===k?(E=k,d+=5):(E=n,z(H)),E!==n){for(A=[],S=ce();S!==n;)A.push(S),S=ce();if(A!==n)if(S=Jn(),S!==n){for(U=[],P=ce();P!==n;)U.push(P),P=ce();U!==n?(i.charCodeAt(d)===46?(P=m,d++):(P=n,z(w)),P!==n?(oe=u,v=$(S),u=v):(d=u,u=n)):(d=u,u=n)}else d=u,u=n;else d=u,u=n}else d=u,u=n;else d=u,u=n;return u}function Zu(){var u,v,E,A,S,U,P,F;for(u=d,v=[],E=ce();E!==n;)v.push(E),E=ce();if(v!==n)if(q.test(i.charAt(d))?(E=i.charAt(d),d++):(E=n,z(ee)),E!==n)if(Z.test(i.charAt(d))?(A=i.charAt(d),d++):(A=n,z(_)),A!==n)if(V.test(i.charAt(d))?(S=i.charAt(d),d++):(S=n,z(K)),S!==n)if(ae.test(i.charAt(d))?(U=i.charAt(d),d++):(U=n,z(ie)),U!==n){for(P=[],F=ce();F!==n;)P.push(F),F=ce();P!==n?(F=Jn(),F!==n?(oe=u,v=$(F),u=v):(d=u,u=n)):(d=u,u=n)}else d=u,u=n;else d=u,u=n;else d=u,u=n;else d=u,u=n;else d=u,u=n;return u}function Ku(){var u,v,E,A,S,U,P,F,he,$e,gn,vn;for(u=d,v=[],E=ce();E!==n;)v.push(E),E=ce();if(v!==n)if(ue.test(i.charAt(d))?(E=i.charAt(d),d++):(E=n,z(ne)),E!==n)if(ge.test(i.charAt(d))?(A=i.charAt(d),d++):(A=n,z(Le)),A!==n)if(ae.test(i.charAt(d))?(S=i.charAt(d),d++):(S=n,z(ie)),S!==n)if(pe.test(i.charAt(d))?(U=i.charAt(d),d++):(U=n,z(Ce)),U!==n)if(Me.test(i.charAt(d))?(P=i.charAt(d),d++):(P=n,z(Je)),P!==n)if(Ae.test(i.charAt(d))?(F=i.charAt(d),d++):(F=n,z(qe)),F!==n){for(he=[],$e=ce();$e!==n;)he.push($e),$e=ce();if(he!==n)if($e=$i(),$e!==n){for(gn=[],vn=ce();vn!==n;)gn.push(vn),vn=ce();gn!==n?(vn=Jn(),vn!==n?(oe=u,v=X($e,vn),u=v):(d=u,u=n)):(d=u,u=n)}else d=u,u=n;else d=u,u=n}else d=u,u=n;else d=u,u=n;else d=u,u=n;else d=u,u=n;else d=u,u=n;else d=u,u=n;else d=u,u=n;return u}function eo(){var u,v,E;return u=d,v=to(),v!==n?(E=oa(),E!==n?(oe=u,v=dt(v,E),u=v):(d=u,u=n)):(d=u,u=n),u===n&&(u=d,v=Oi(),v!==n?(E=oa(),E===n&&(E=null),E!==n?(oe=u,v=at(v,E),u=v):(d=u,u=n)):(d=u,u=n)),u}function oa(){var u,v,E,A,S,U,P,F,he,$e;if(u=d,v=da(),v!==n)if(E=ca(),E!==n){for(A=[],S=d,U=[],P=ce();P!==n;)U.push(P),P=ce();for(U!==n?(i.charCodeAt(d)===59?(P=De,d++):(P=n,z(ke)),P!==n?(F=d,he=da(),he!==n?($e=ca(),$e!==n?(oe=F,he=_e(v,E,he,$e),F=he):(d=F,F=n)):(d=F,F=n),F===n&&(F=null),F!==n?(oe=S,U=wt(v,E,F),S=U):(d=S,S=n)):(d=S,S=n)):(d=S,S=n);S!==n;){for(A.push(S),S=d,U=[],P=ce();P!==n;)U.push(P),P=ce();U!==n?(i.charCodeAt(d)===59?(P=De,d++):(P=n,z(ke)),P!==n?(F=d,he=da(),he!==n?($e=ca(),$e!==n?(oe=F,he=_e(v,E,he,$e),F=he):(d=F,F=n)):(d=F,F=n),F===n&&(F=null),F!==n?(oe=S,U=wt(v,E,F),S=U):(d=S,S=n)):(d=S,S=n)):(d=S,S=n)}A!==n?(oe=u,v=Ve(v,E,A),u=v):(d=u,u=n)}else d=u,u=n;else d=u,u=n;return u}function ca(){var u,v,E,A,S,U,P;if(u=d,v=Qn(),v!==n){for(E=[],A=d,S=[],U=ce();U!==n;)S.push(U),U=ce();for(S!==n?(i.charCodeAt(d)===44?(U=se,d++):(U=n,z(Ie)),U!==n?(P=Qn(),P!==n?(oe=A,S=st(v,P),A=S):(d=A,A=n)):(d=A,A=n)):(d=A,A=n);A!==n;){for(E.push(A),A=d,S=[],U=ce();U!==n;)S.push(U),U=ce();S!==n?(i.charCodeAt(d)===44?(U=se,d++):(U=n,z(Ie)),U!==n?(P=Qn(),P!==n?(oe=A,S=st(v,P),A=S):(d=A,A=n)):(d=A,A=n)):(d=A,A=n)}E!==n?(oe=u,v=Tt(v,E),u=v):(d=u,u=n)}else d=u,u=n;return u}function da(){var u,v,E;if(u=d,v=no(),v!==n&&(oe=u,v=y(v)),u=v,u===n){for(u=d,v=[],E=ce();E!==n;)v.push(E),E=ce();v!==n?(i.charCodeAt(d)===97?(E=Oe,d++):(E=n,z(Re)),E!==n?(oe=u,v=Dt(),u=v):(d=u,u=n)):(d=u,u=n)}return u}function to(){var u,v;return u=d,v=Ui(),v!==n&&(oe=u,v=Zt(v)),u=v,u===n&&(u=Mi(),u===n&&(u=Lr())),u}function no(){var u,v,E;for(u=d,v=[],E=ce();E!==n;)v.push(E),E=ce();return v!==n?(E=Lr(),E!==n?(oe=u,v=y(E),u=v):(d=u,u=n)):(d=u,u=n),u}function Qn(){var u,v;return u=ro(),u===n&&(u=d,v=Ui(),v!==n&&(oe=u,v=Et(v)),u=v,u===n&&(u=d,v=Mi(),v!==n&&(oe=u,v=fn(v)),u=v,u===n&&(u=d,v=Oi(),v!==n&&(oe=u,v=y(v)),u=v,u===n&&(u=d,v=Lr(),v!==n&&(oe=u,v=b(v)),u=v)))),u}function ro(){var u;return u=io(),u===n&&(u=ao(),u===n&&(u=so())),u}function Oi(){var u,v,E,A,S,U;for(u=d,v=[],E=ce();E!==n;)v.push(E),E=ce();if(v!==n)if(i.charCodeAt(d)===91?(E=f,d++):(E=n,z(g)),E!==n)if(A=oa(),A!==n){for(S=[],U=ce();U!==n;)S.push(U),U=ce();S!==n?(i.charCodeAt(d)===93?(U=I,d++):(U=n,z(j)),U!==n?(oe=u,v=y(A),u=v):(d=u,u=n)):(d=u,u=n)}else d=u,u=n;else d=u,u=n;else d=u,u=n;return u}function Ui(){var u,v,E,A,S,U;for(u=d,v=[],E=ce();E!==n;)v.push(E),E=ce();if(v!==n)if(i.charCodeAt(d)===40?(E=W,d++):(E=n,z(te)),E!==n){for(A=[],S=Qn();S!==n;)A.push(S),S=Qn();if(A!==n){for(S=[],U=ce();U!==n;)S.push(U),U=ce();S!==n?(i.charCodeAt(d)===41?(U=xe,d++):(U=n,z(Ge)),U!==n?(oe=u,v=Pe(A),u=v):(d=u,u=n)):(d=u,u=n)}else d=u,u=n}else d=u,u=n;else d=u,u=n;return u}function ao(){var u,v,E;for(u=d,v=[],E=ce();E!==n;)v.push(E),E=ce();return v!==n?(E=po(),E===n&&(E=fo(),E===n&&(E=ho())),E!==n?(oe=u,v=y(E),u=v):(d=u,u=n)):(d=u,u=n),u}function io(){var u,v,E,A,S,U,P;for(u=d,v=[],E=ce();E!==n;)v.push(E),E=ce();if(v!==n)if(E=ha(),E!==n){for(A=[],S=ce();S!==n;)A.push(S),S=ce();A!==n?(S=co(),S!==n?(oe=u,v=He(E,S),u=v):(d=u,u=n)):(d=u,u=n)}else d=u,u=n;else d=u,u=n;if(u===n){for(u=d,v=[],E=ce();E!==n;)v.push(E),E=ce();if(v!==n)if(E=ha(),E!==n){for(A=[],S=ce();S!==n;)A.push(S),S=ce();if(A!==n)if(i.substr(d,2)===Fe?(S=Fe,d+=2):(S=n,z(yr)),S!==n){for(U=[],P=ce();P!==n;)U.push(P),P=ce();U!==n?(P=Lr(),P!==n?(oe=u,v=zn(E,P),u=v):(d=u,u=n)):(d=u,u=n)}else d=u,u=n;else d=u,u=n}else d=u,u=n;else d=u,u=n;if(u===n){for(u=d,v=[],E=ce();E!==n;)v.push(E),E=ce();v!==n?(E=ha(),E!==n?(oe=u,v=y(E),u=v):(d=u,u=n)):(d=u,u=n)}}return u}function so(){var u,v,E;for(u=d,v=[],E=ce();E!==n;)v.push(E),E=ce();if(v!==n?(i.substr(d,4)===Wn?(E=Wn,d+=4):(E=n,z(C)),E!==n?(oe=u,v=T(),u=v):(d=u,u=n)):(d=u,u=n),u===n){for(u=d,v=[],E=ce();E!==n;)v.push(E),E=ce();v!==n?(i.substr(d,5)===O?(E=O,d+=5):(E=n,z(Y)),E!==n?(oe=u,v=le(),u=v):(d=u,u=n)):(d=u,u=n)}return u}function ha(){var u,v,E;for(u=d,v=[],E=ce();E!==n;)v.push(E),E=ce();return v!==n?(E=vo(),E===n&&(E=yo(),E===n&&(E=go(),E===n&&(E=mo()))),E!==n?(oe=u,v=y(E),u=v):(d=u,u=n)):(d=u,u=n),u}function Lr(){var u,v,E;for(u=d,v=[],E=ce();E!==n;)v.push(E),E=ce();if(v!==n?(E=Jn(),E!==n?(oe=u,v=y(E),u=v):(d=u,u=n)):(d=u,u=n),u===n){for(u=d,v=[],E=ce();E!==n;)v.push(E),E=ce();v!==n?(E=lo(),E!==n?(oe=u,v=y(E),u=v):(d=u,u=n)):(d=u,u=n)}return u}function lo(){var u,v;return u=uo(),u===n&&(u=d,v=Pi(),v!==n&&(oe=u,v=Ee(v)),u=v),u}function Mi(){var u,v,E;for(u=d,v=[],E=ce();E!==n;)v.push(E),E=ce();if(v!==n?(E=oo(),E!==n?(oe=u,v=y(E),u=v):(d=u,u=n)):(d=u,u=n),u===n){for(u=d,v=[],E=ce();E!==n;)v.push(E),E=ce();v!==n?(E=Eo(),E!==n?(oe=u,v=y(E),u=v):(d=u,u=n)):(d=u,u=n)}return u}function Jn(){var u,v,E,A;if(u=d,i.charCodeAt(d)===60?(v=Xe,d++):(v=n,z(pt)),v!==n){for(E=[],Ct.test(i.charAt(d))?(A=i.charAt(d),d++):(A=n,z(Bt)),A===n&&(A=ze());A!==n;)E.push(A),Ct.test(i.charAt(d))?(A=i.charAt(d),d++):(A=n,z(Bt)),A===n&&(A=ze());E!==n?(i.charCodeAt(d)===62?(A=Lt,d++):(A=n,z(Kt)),A!==n?(oe=u,v=en(E),u=v):(d=u,u=n)):(d=u,u=n)}else d=u,u=n;return u}function Pi(){var u,v,E;return u=d,v=Hi(),v===n&&(v=null),v!==n?(i.charCodeAt(d)===58?(E=ht,d++):(E=n,z(tt)),E!==n?(oe=u,v=tn(v),u=v):(d=u,u=n)):(d=u,u=n),u}function $i(){var u,v,E;return u=d,v=Hi(),v===n&&(v=null),v!==n?(i.charCodeAt(d)===58?(E=ht,d++):(E=n,z(tt)),E!==n?(oe=u,v=pn(v),u=v):(d=u,u=n)):(d=u,u=n),u}function uo(){var u,v,E;return u=d,v=Pi(),v!==n?(E=Co(),E!==n?(oe=u,v=lt(v,E),u=v):(d=u,u=n)):(d=u,u=n),u}function oo(){var u,v,E,A,S,U,P,F,he,$e;if(u=d,v=d,i.substr(d,2)===Yn?(E=Yn,d+=2):(E=n,z(un)),E!==n)if(A=pa(),A===n&&(Ze.test(i.charAt(d))?(A=i.charAt(d),d++):(A=n,z(it))),A!==n){for(S=[],U=ut();U!==n;)S.push(U),U=ut();if(S!==n){if(U=[],P=d,F=[],i.charCodeAt(d)===46?(he=m,d++):(he=n,z(w)),he!==n)for(;he!==n;)F.push(he),i.charCodeAt(d)===46?(he=m,d++):(he=n,z(w));else F=n;if(F!==n){if(he=[],$e=ut(),$e!==n)for(;$e!==n;)he.push($e),$e=ut();else he=n;he!==n?(F=[F,he],P=F):(d=P,P=n)}else d=P,P=n;for(;P!==n;){if(U.push(P),P=d,F=[],i.charCodeAt(d)===46?(he=m,d++):(he=n,z(w)),he!==n)for(;he!==n;)F.push(he),i.charCodeAt(d)===46?(he=m,d++):(he=n,z(w));else F=n;if(F!==n){if(he=[],$e=ut(),$e!==n)for(;$e!==n;)he.push($e),$e=ut();else he=n;he!==n?(F=[F,he],P=F):(d=P,P=n)}else d=P,P=n}U!==n?(E=[E,A,S,U],v=E):(d=v,v=n)}else d=v,v=n}else d=v,v=n;else d=v,v=n;return v!==n?u=i.substring(u,d):u=v,u}function co(){var u,v,E,A,S,U,P,F;if(u=d,i.charCodeAt(d)===64?(v=Vl,d++):(v=n,z(Gl)),v!==n){if(E=[],ii.test(i.charAt(d))?(A=i.charAt(d),d++):(A=n,z(si)),A!==n)for(;A!==n;)E.push(A),ii.test(i.charAt(d))?(A=i.charAt(d),d++):(A=n,z(si));else E=n;if(E!==n){if(A=[],S=d,i.charCodeAt(d)===45?(U=aa,d++):(U=n,z(ia)),U!==n){if(P=[],wr.test(i.charAt(d))?(F=i.charAt(d),d++):(F=n,z(Er)),F!==n)for(;F!==n;)P.push(F),wr.test(i.charAt(d))?(F=i.charAt(d),d++):(F=n,z(Er));else P=n;P!==n?(oe=S,U=li(E,P),S=U):(d=S,S=n)}else d=S,S=n;for(;S!==n;)if(A.push(S),S=d,i.charCodeAt(d)===45?(U=aa,d++):(U=n,z(ia)),U!==n){if(P=[],wr.test(i.charAt(d))?(F=i.charAt(d),d++):(F=n,z(Er)),F!==n)for(;F!==n;)P.push(F),wr.test(i.charAt(d))?(F=i.charAt(d),d++):(F=n,z(Er));else P=n;P!==n?(oe=S,U=li(E,P),S=U):(d=S,S=n)}else d=S,S=n;A!==n?(oe=u,v=Xl(E,A),u=v):(d=u,u=n)}else d=u,u=n}else d=u,u=n;return u}function ho(){var u,v,E,A,S,U;if(u=d,v=d,E=d,Cr.test(i.charAt(d))?(A=i.charAt(d),d++):(A=n,z(Nr)),A===n&&(A=null),A!==n){if(S=[],Ze.test(i.charAt(d))?(U=i.charAt(d),d++):(U=n,z(it)),U!==n)for(;U!==n;)S.push(U),Ze.test(i.charAt(d))?(U=i.charAt(d),d++):(U=n,z(it));else S=n;S!==n?(A=[A,S],E=A):(d=E,E=n)}else d=E,E=n;return E!==n?v=i.substring(v,d):v=E,v!==n&&(oe=u,v=zl(v)),u=v,u}function fo(){var u,v,E,A,S,U,P,F;if(u=d,v=d,E=d,Cr.test(i.charAt(d))?(A=i.charAt(d),d++):(A=n,z(Nr)),A===n&&(A=null),A!==n){for(S=[],Ze.test(i.charAt(d))?(U=i.charAt(d),d++):(U=n,z(it));U!==n;)S.push(U),Ze.test(i.charAt(d))?(U=i.charAt(d),d++):(U=n,z(it));if(S!==n)if(i.charCodeAt(d)===46?(U=m,d++):(U=n,z(w)),U!==n){if(P=[],Ze.test(i.charAt(d))?(F=i.charAt(d),d++):(F=n,z(it)),F!==n)for(;F!==n;)P.push(F),Ze.test(i.charAt(d))?(F=i.charAt(d),d++):(F=n,z(it));else P=n;P!==n?(A=[A,S,U,P],E=A):(d=E,E=n)}else d=E,E=n;else d=E,E=n}else d=E,E=n;return E!==n?v=i.substring(v,d):v=E,v!==n&&(oe=u,v=Wl(v)),u=v,u}function po(){var u,v,E,A,S,U,P,F,he;if(u=d,v=d,E=d,Cr.test(i.charAt(d))?(A=i.charAt(d),d++):(A=n,z(Nr)),A===n&&(A=null),A!==n){if(S=d,U=[],Ze.test(i.charAt(d))?(P=i.charAt(d),d++):(P=n,z(it)),P!==n)for(;P!==n;)U.push(P),Ze.test(i.charAt(d))?(P=i.charAt(d),d++):(P=n,z(it));else U=n;if(U!==n)if(i.charCodeAt(d)===46?(P=m,d++):(P=n,z(w)),P!==n){for(F=[],Ze.test(i.charAt(d))?(he=i.charAt(d),d++):(he=n,z(it));he!==n;)F.push(he),Ze.test(i.charAt(d))?(he=i.charAt(d),d++):(he=n,z(it));F!==n?(he=fa(),he!==n?(U=[U,P,F,he],S=U):(d=S,S=n)):(d=S,S=n)}else d=S,S=n;else d=S,S=n;if(S===n){if(S=d,i.charCodeAt(d)===46?(U=m,d++):(U=n,z(w)),U!==n){if(P=[],Ze.test(i.charAt(d))?(F=i.charAt(d),d++):(F=n,z(it)),F!==n)for(;F!==n;)P.push(F),Ze.test(i.charAt(d))?(F=i.charAt(d),d++):(F=n,z(it));else P=n;P!==n?(F=fa(),F!==n?(U=[U,P,F],S=U):(d=S,S=n)):(d=S,S=n)}else d=S,S=n;if(S===n){if(S=d,U=[],Ze.test(i.charAt(d))?(P=i.charAt(d),d++):(P=n,z(it)),P!==n)for(;P!==n;)U.push(P),Ze.test(i.charAt(d))?(P=i.charAt(d),d++):(P=n,z(it));else U=n;U!==n?(P=fa(),P!==n?(U=[U,P],S=U):(d=S,S=n)):(d=S,S=n)}}S!==n?(A=[A,S],E=A):(d=E,E=n)}else d=E,E=n;return E!==n?v=i.substring(v,d):v=E,v!==n&&(oe=u,v=Yl(v)),u=v,u}function fa(){var u,v,E,A,S,U;if(u=d,v=d,Ql.test(i.charAt(d))?(E=i.charAt(d),d++):(E=n,z(Jl)),E!==n)if(Cr.test(i.charAt(d))?(A=i.charAt(d),d++):(A=n,z(Nr)),A===n&&(A=null),A!==n){if(S=[],Ze.test(i.charAt(d))?(U=i.charAt(d),d++):(U=n,z(it)),U!==n)for(;U!==n;)S.push(U),Ze.test(i.charAt(d))?(U=i.charAt(d),d++):(U=n,z(it));else S=n;S!==n?(E=[E,A,S],v=E):(d=v,v=n)}else d=v,v=n;else d=v,v=n;return v!==n?u=i.substring(u,d):u=v,u}function mo(){var u,v,E,A;if(u=d,i.charCodeAt(d)===34?(v=br,d++):(v=n,z(xr)),v!==n){for(E=[],ui.test(i.charAt(d))?(A=i.charAt(d),d++):(A=n,z(oi)),A===n&&(A=Qe(),A===n&&(A=ze()));A!==n;)E.push(A),ui.test(i.charAt(d))?(A=i.charAt(d),d++):(A=n,z(oi)),A===n&&(A=Qe(),A===n&&(A=ze()));E!==n?(i.charCodeAt(d)===34?(A=br,d++):(A=n,z(xr)),A!==n?(oe=u,v=x(E),u=v):(d=u,u=n)):(d=u,u=n)}else d=u,u=n;return u}function go(){var u,v,E,A;if(u=d,i.charCodeAt(d)===39?(v=Tr,d++):(v=n,z(Ar)),v!==n){for(E=[],ci.test(i.charAt(d))?(A=i.charAt(d),d++):(A=n,z(di)),A===n&&(A=Qe(),A===n&&(A=ze()));A!==n;)E.push(A),ci.test(i.charAt(d))?(A=i.charAt(d),d++):(A=n,z(di)),A===n&&(A=Qe(),A===n&&(A=ze()));E!==n?(i.charCodeAt(d)===39?(A=Tr,d++):(A=n,z(Ar)),A!==n?(oe=u,v=x(E),u=v):(d=u,u=n)):(d=u,u=n)}else d=u,u=n;return u}function vo(){var u,v,E,A,S,U,P,F;if(u=d,i.substr(d,3)===Dr?(v=Dr,d+=3):(v=n,z(hi)),v!==n){for(E=[],Pt.test(i.charAt(d))?(A=i.charAt(d),d++):(A=n,z($t)),A===n&&(A=Qe(),A===n&&(A=ze()));A!==n;)E.push(A),Pt.test(i.charAt(d))?(A=i.charAt(d),d++):(A=n,z($t)),A===n&&(A=Qe(),A===n&&(A=ze()));if(E!==n){if(A=[],S=d,i.substr(d,2)===_r?(U=_r,d+=2):(U=n,z(fi)),U!==n){if(P=[],Pt.test(i.charAt(d))?(F=i.charAt(d),d++):(F=n,z($t)),F===n&&(F=Qe(),F===n&&(F=ze())),F!==n)for(;F!==n;)P.push(F),Pt.test(i.charAt(d))?(F=i.charAt(d),d++):(F=n,z($t)),F===n&&(F=Qe(),F===n&&(F=ze()));else P=n;P!==n?(oe=S,U=pi(E,P),S=U):(d=S,S=n)}else d=S,S=n;if(S===n)if(S=d,i.charCodeAt(d)===39?(U=Tr,d++):(U=n,z(Ar)),U!==n){if(P=[],Pt.test(i.charAt(d))?(F=i.charAt(d),d++):(F=n,z($t)),F===n&&(F=Qe(),F===n&&(F=ze())),F!==n)for(;F!==n;)P.push(F),Pt.test(i.charAt(d))?(F=i.charAt(d),d++):(F=n,z($t)),F===n&&(F=Qe(),F===n&&(F=ze()));else P=n;P!==n?(oe=S,U=mi(E,P),S=U):(d=S,S=n)}else d=S,S=n;for(;S!==n;){if(A.push(S),S=d,i.substr(d,2)===_r?(U=_r,d+=2):(U=n,z(fi)),U!==n){if(P=[],Pt.test(i.charAt(d))?(F=i.charAt(d),d++):(F=n,z($t)),F===n&&(F=Qe(),F===n&&(F=ze())),F!==n)for(;F!==n;)P.push(F),Pt.test(i.charAt(d))?(F=i.charAt(d),d++):(F=n,z($t)),F===n&&(F=Qe(),F===n&&(F=ze()));else P=n;P!==n?(oe=S,U=pi(E,P),S=U):(d=S,S=n)}else d=S,S=n;if(S===n)if(S=d,i.charCodeAt(d)===39?(U=Tr,d++):(U=n,z(Ar)),U!==n){if(P=[],Pt.test(i.charAt(d))?(F=i.charAt(d),d++):(F=n,z($t)),F===n&&(F=Qe(),F===n&&(F=ze())),F!==n)for(;F!==n;)P.push(F),Pt.test(i.charAt(d))?(F=i.charAt(d),d++):(F=n,z($t)),F===n&&(F=Qe(),F===n&&(F=ze()));else P=n;P!==n?(oe=S,U=mi(E,P),S=U):(d=S,S=n)}else d=S,S=n}A!==n?(i.substr(d,3)===Dr?(S=Dr,d+=3):(S=n,z(hi)),S!==n?(oe=u,v=gi(E,A),u=v):(d=u,u=n)):(d=u,u=n)}else d=u,u=n}else d=u,u=n;return u}function yo(){var u,v,E,A,S,U,P,F;if(u=d,i.substr(d,3)===Sr?(v=Sr,d+=3):(v=n,z(vi)),v!==n){for(E=[],qt.test(i.charAt(d))?(A=i.charAt(d),d++):(A=n,z(Ht)),A===n&&(A=Qe(),A===n&&(A=ze()));A!==n;)E.push(A),qt.test(i.charAt(d))?(A=i.charAt(d),d++):(A=n,z(Ht)),A===n&&(A=Qe(),A===n&&(A=ze()));if(E!==n){if(A=[],S=d,i.substr(d,2)===Ir?(U=Ir,d+=2):(U=n,z(yi)),U!==n){if(P=[],qt.test(i.charAt(d))?(F=i.charAt(d),d++):(F=n,z(Ht)),F===n&&(F=Qe(),F===n&&(F=ze())),F!==n)for(;F!==n;)P.push(F),qt.test(i.charAt(d))?(F=i.charAt(d),d++):(F=n,z(Ht)),F===n&&(F=Qe(),F===n&&(F=ze()));else P=n;P!==n?(oe=S,U=wi(E,P),S=U):(d=S,S=n)}else d=S,S=n;if(S===n)if(S=d,i.charCodeAt(d)===34?(U=br,d++):(U=n,z(xr)),U!==n){if(P=[],qt.test(i.charAt(d))?(F=i.charAt(d),d++):(F=n,z(Ht)),F===n&&(F=Qe(),F===n&&(F=ze())),F!==n)for(;F!==n;)P.push(F),qt.test(i.charAt(d))?(F=i.charAt(d),d++):(F=n,z(Ht)),F===n&&(F=Qe(),F===n&&(F=ze()));else P=n;P!==n?(oe=S,U=Ei(E,P),S=U):(d=S,S=n)}else d=S,S=n;for(;S!==n;){if(A.push(S),S=d,i.substr(d,2)===Ir?(U=Ir,d+=2):(U=n,z(yi)),U!==n){if(P=[],qt.test(i.charAt(d))?(F=i.charAt(d),d++):(F=n,z(Ht)),F===n&&(F=Qe(),F===n&&(F=ze())),F!==n)for(;F!==n;)P.push(F),qt.test(i.charAt(d))?(F=i.charAt(d),d++):(F=n,z(Ht)),F===n&&(F=Qe(),F===n&&(F=ze()));else P=n;P!==n?(oe=S,U=wi(E,P),S=U):(d=S,S=n)}else d=S,S=n;if(S===n)if(S=d,i.charCodeAt(d)===34?(U=br,d++):(U=n,z(xr)),U!==n){if(P=[],qt.test(i.charAt(d))?(F=i.charAt(d),d++):(F=n,z(Ht)),F===n&&(F=Qe(),F===n&&(F=ze())),F!==n)for(;F!==n;)P.push(F),qt.test(i.charAt(d))?(F=i.charAt(d),d++):(F=n,z(Ht)),F===n&&(F=Qe(),F===n&&(F=ze()));else P=n;P!==n?(oe=S,U=Ei(E,P),S=U):(d=S,S=n)}else d=S,S=n}A!==n?(i.substr(d,3)===Sr?(S=Sr,d+=3):(S=n,z(vi)),S!==n?(oe=u,v=gi(E,A),u=v):(d=u,u=n)):(d=u,u=n)}else d=u,u=n}else d=u,u=n;return u}function ze(){var u,v,E,A,S,U,P,F,he,$e,gn;return u=d,i.substr(d,2)===Ci?(v=Ci,d+=2):(v=n,z(Zl)),v!==n?(E=d,A=Nt(),A!==n?(S=Nt(),S!==n?(U=Nt(),U!==n?(P=Nt(),P!==n?(F=Nt(),F!==n?(he=Nt(),he!==n?($e=Nt(),$e!==n?(gn=Nt(),gn!==n?(A=[A,S,U,P,F,he,$e,gn],E=A):(d=E,E=n)):(d=E,E=n)):(d=E,E=n)):(d=E,E=n)):(d=E,E=n)):(d=E,E=n)):(d=E,E=n)):(d=E,E=n),E!==n?(oe=u,v=Kl(E),u=v):(d=u,u=n)):(d=u,u=n),u===n&&(u=d,i.substr(d,2)===Ni?(v=Ni,d+=2):(v=n,z(eu)),v!==n?(E=d,A=Nt(),A!==n?(S=Nt(),S!==n?(U=Nt(),U!==n?(P=Nt(),P!==n?(A=[A,S,U,P],E=A):(d=E,E=n)):(d=E,E=n)):(d=E,E=n)):(d=E,E=n),E!==n?(oe=u,v=tu(E),u=v):(d=u,u=n)):(d=u,u=n)),u}function Qe(){var u,v;return u=d,i.substr(d,2)===bi?(v=bi,d+=2):(v=n,z(nu)),v!==n&&(oe=u,v=ru()),u=v,u===n&&(u=d,i.substr(d,2)===xi?(v=xi,d+=2):(v=n,z(au)),v!==n&&(oe=u,v=iu()),u=v,u===n&&(u=d,i.substr(d,2)===Ti?(v=Ti,d+=2):(v=n,z(su)),v!==n&&(oe=u,v=lu()),u=v,u===n&&(u=d,i.substr(d,2)===Ai?(v=Ai,d+=2):(v=n,z(uu)),v!==n&&(oe=u,v=ou()),u=v,u===n&&(u=d,i.substr(d,2)===Di?(v=Di,d+=2):(v=n,z(cu)),v!==n&&(oe=u,v=du()),u=v,u===n&&(u=d,i.substr(d,2)===_i?(v=_i,d+=2):(v=n,z(hu)),v!==n&&(oe=u,v=fu()),u=v,u===n&&(u=d,i.substr(d,2)===Si?(v=Si,d+=2):(v=n,z(pu)),v!==n&&(oe=u,v=mu()),u=v,u===n&&(u=d,i.substr(d,2)===Ii?(v=Ii,d+=2):(v=n,z(gu)),v!==n&&(oe=u,v=vu()),u=v))))))),u}function wo(){var u;return yu.test(i.charAt(d))?(u=i.charAt(d),d++):(u=n,z(wu)),u}function Eo(){var u,v,E,A;if(u=d,i.charCodeAt(d)===91?(v=f,d++):(v=n,z(g)),v!==n){for(E=[],A=ce();A!==n;)E.push(A),A=ce();E!==n?(i.charCodeAt(d)===93?(A=I,d++):(A=n,z(j)),A!==n?(oe=u,v=Eu(),u=v):(d=u,u=n)):(d=u,u=n)}else d=u,u=n;return u}function qi(){var u,v,E;return u=d,Cu.test(i.charAt(d))?(v=i.charAt(d),d++):(v=n,z(Nu)),v!==n?(bu.test(i.charAt(d))?(E=i.charAt(d),d++):(E=n,z(xu)),E!==n?(oe=u,v=Tu(v,E),u=v):(d=u,u=n)):(d=u,u=n),u===n&&(Au.test(i.charAt(d))?(u=i.charAt(d),d++):(u=n,z(Du))),u}function pa(){var u;return u=qi(),u===n&&(i.charCodeAt(d)===95?(u=_u,d++):(u=n,z(Su))),u}function ut(){var u;return u=pa(),u===n&&(i.charCodeAt(d)===45?(u=aa,d++):(u=n,z(ia)),u===n&&(Ze.test(i.charAt(d))?(u=i.charAt(d),d++):(u=n,z(it)),u===n&&(i.charCodeAt(d)===183?(u=Iu,d++):(u=n,z(Fu)),u===n&&(Bu.test(i.charAt(d))?(u=i.charAt(d),d++):(u=n,z(Lu)),u===n&&(ku.test(i.charAt(d))?(u=i.charAt(d),d++):(u=n,z(Ru))))))),u}function Hi(){var u,v,E,A,S,U,P,F,he;if(u=d,v=d,E=qi(),E!==n){for(A=[],S=ut();S!==n;)A.push(S),S=ut();if(A!==n){if(S=[],U=d,P=[],i.charCodeAt(d)===46?(F=m,d++):(F=n,z(w)),F!==n)for(;F!==n;)P.push(F),i.charCodeAt(d)===46?(F=m,d++):(F=n,z(w));else P=n;if(P!==n){if(F=[],he=ut(),he!==n)for(;he!==n;)F.push(he),he=ut();else F=n;F!==n?(P=[P,F],U=P):(d=U,U=n)}else d=U,U=n;for(;U!==n;){if(S.push(U),U=d,P=[],i.charCodeAt(d)===46?(F=m,d++):(F=n,z(w)),F!==n)for(;F!==n;)P.push(F),i.charCodeAt(d)===46?(F=m,d++):(F=n,z(w));else P=n;if(P!==n){if(F=[],he=ut(),he!==n)for(;he!==n;)F.push(he),he=ut();else F=n;F!==n?(P=[P,F],U=P):(d=U,U=n)}else d=U,U=n}S!==n?(E=[E,A,S],v=E):(d=v,v=n)}else d=v,v=n}else d=v,v=n;return v!==n?u=i.substring(u,d):u=v,u}function Co(){var u,v,E,A,S,U,P,F;if(u=d,v=pa(),v===n&&(i.charCodeAt(d)===58?(v=ht,d++):(v=n,z(tt)),v===n&&(Ze.test(i.charAt(d))?(v=i.charAt(d),d++):(v=n,z(it)),v===n&&(v=mn()))),v!==n){for(E=[],A=ut(),A===n&&(i.charCodeAt(d)===58?(A=ht,d++):(A=n,z(tt)),A===n&&(A=mn()));A!==n;)E.push(A),A=ut(),A===n&&(i.charCodeAt(d)===58?(A=ht,d++):(A=n,z(tt)),A===n&&(A=mn()));if(E!==n){if(A=[],S=d,U=[],i.charCodeAt(d)===46?(P=m,d++):(P=n,z(w)),P!==n)for(;P!==n;)U.push(P),i.charCodeAt(d)===46?(P=m,d++):(P=n,z(w));else U=n;if(U!==n){if(P=[],F=ut(),F===n&&(i.charCodeAt(d)===58?(F=ht,d++):(F=n,z(tt)),F===n&&(F=mn())),F!==n)for(;F!==n;)P.push(F),F=ut(),F===n&&(i.charCodeAt(d)===58?(F=ht,d++):(F=n,z(tt)),F===n&&(F=mn()));else P=n;P!==n?(oe=S,U=Fi(v,E,U,P),S=U):(d=S,S=n)}else d=S,S=n;for(;S!==n;){if(A.push(S),S=d,U=[],i.charCodeAt(d)===46?(P=m,d++):(P=n,z(w)),P!==n)for(;P!==n;)U.push(P),i.charCodeAt(d)===46?(P=m,d++):(P=n,z(w));else U=n;if(U!==n){if(P=[],F=ut(),F===n&&(i.charCodeAt(d)===58?(F=ht,d++):(F=n,z(tt)),F===n&&(F=mn())),F!==n)for(;F!==n;)P.push(F),F=ut(),F===n&&(i.charCodeAt(d)===58?(F=ht,d++):(F=n,z(tt)),F===n&&(F=mn()));else P=n;P!==n?(oe=S,U=Fi(v,E,U,P),S=U):(d=S,S=n)}else d=S,S=n}A!==n?(oe=u,v=Ou(v,E,A),u=v):(d=u,u=n)}else d=u,u=n}else d=u,u=n;return u}function mn(){var u;return u=No(),u===n&&(u=bo()),u}function No(){var u,v,E,A,S;return u=d,v=d,i.charCodeAt(d)===37?(E=Uu,d++):(E=n,z(Mu)),E!==n?(A=Nt(),A!==n?(S=Nt(),S!==n?(E=[E,A,S],v=E):(d=v,v=n)):(d=v,v=n)):(d=v,v=n),v!==n?u=i.substring(u,d):u=v,u}function Nt(){var u;return Pu.test(i.charAt(d))?(u=i.charAt(d),d++):(u=n,z($u)),u}function bo(){var u,v,E;return u=d,i.charCodeAt(d)===92?(v=qu,d++):(v=n,z(Hu)),v!==n?(ju.test(i.charAt(d))?(E=i.charAt(d),d++):(E=n,z(Vu)),E!==n?(oe=u,v=y(E),u=v):(d=u,u=n)):(d=u,u=n),u}var ji=function(u){return u.match(/^[a-z](.*?):(.+?)/g)};function xo(u,v){var E={};return E[u]=v,E}var Ue={base:[],data:{},addBase:function(u){if(Ue.base.length===0){Ue.base.push(u);return}const v=Ue.base[Ue.base.length-1];v!==u&&Ue.base.push(new URL(u,v).toString())},addPrefix:function(u,v){const E=Ue.data[u];E===void 0?Ue.data[u]=[{uri:v,count:0}]:E[E.length-1].uri!==v&&E.push({uri:v,count:0})},hasPrefix:function(u){return this.data[u]!==void 0},resolve:function(u,v){const E=Object.keys(Ue.data).find(S=>u.indexOf(S+":")===0);if(E!==void 0){const S=Ue.data[E];if(S.length===1&&v!==!0&&ji(S[0].uri))return u;const U=S[S.length-1].uri;return u.replace(E+":",U)}else{var A=Ue.base.length===0?s.baseIRI:Ue.base[Ue.base.length-1];return!A||u.match(/^(http:|https:|urn:|file:)/)?u:u.indexOf("//")===0&&A?A.split("//")[0]+u:new URL(u,A).toString()}},increment:function(u){const v=Ue.data[u];v!==void 0&&v[v.length-1].count++},decrement:function(u){const v=Ue.data[u];v!==void 0&&v[v.length-1].count--},toJSON:function(){const u={};return Ue.base.length>0&&(u["@context"]===void 0&&(u["@context"]={}),u["@context"]["@base"]=Ue.base[0]),Object.keys(Ue.data).forEach(v=>{const E=Ue.data[v][0];E.uri==="http://www.w3.org/2001/XMLSchema#"&&E.count<1||ji(E.uri)&&(u["@context"]===void 0&&(u["@context"]={}),u["@context"][v]=E.uri)}),u}};function ma(u,v){if(u["@list"]===void 0||!v&&!u["@list"].find(S=>S["@list"]!==void 0))return u;if(u["@list"].length===0)return{"@id":"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"};var E={},A=null;return u["@list"].forEach(S=>{A===null?A=E:(A["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"]={},A=A["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"]),A["http://www.w3.org/1999/02/22-rdf-syntax-ns#first"]=ma(S,!0),A["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"]={"@id":"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}),E}if(Br=o(),Br!==n&&d===i.length)return Br;throw Br!==n&&d<i.length&&z(Gu()),zu(sa,jt<i.length?i.charAt(jt):null,jt<i.length?ua(jt,jt+1):ua(jt,jt))}return{SyntaxError:t,parse:r}})})(Xr)),Xr.exports}var Yo=Wo(),va,Qi;function Qo(){if(Qi)return va;Qi=1;const a={acl:"http://www.w3.org/ns/auth/acl#",arg:"http://www.w3.org/ns/pim/arg#",as:"https://www.w3.org/ns/activitystreams#",bookmark:"http://www.w3.org/2002/01/bookmark#",cal:"http://www.w3.org/2002/12/cal/ical#",cco:"http://www.ontologyrepository.com/CommonCoreOntologies/",cert:"http://www.w3.org/ns/auth/cert#",contact:"http://www.w3.org/2000/10/swap/pim/contact#",dc:"http://purl.org/dc/elements/1.1/",dct:"http://purl.org/dc/terms/",doap:"http://usefulinc.com/ns/doap#",foaf:"http://xmlns.com/foaf/0.1/",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",gpx:"http://www.w3.org/ns/pim/gpx#",gr:"http://purl.org/goodrelations/v1#",http:"http://www.w3.org/2007/ont/http#",httph:"http://www.w3.org/2007/ont/httph#",icalTZ:"http://www.w3.org/2002/12/cal/icaltzd#",ldp:"http://www.w3.org/ns/ldp#",link:"http://www.w3.org/2007/ont/link#",log:"http://www.w3.org/2000/10/swap/log#",meeting:"http://www.w3.org/ns/pim/meeting#",mo:"http://purl.org/ontology/mo/",org:"http://www.w3.org/ns/org#",owl:"http://www.w3.org/2002/07/owl#",pad:"http://www.w3.org/ns/pim/pad#",patch:"http://www.w3.org/ns/pim/patch#",prov:"http://www.w3.org/ns/prov#",pto:"http://www.productontology.org/id/",qu:"http://www.w3.org/2000/10/swap/pim/qif#",trip:"http://www.w3.org/ns/pim/trip#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",rss:"http://purl.org/rss/1.0/",sched:"http://www.w3.org/ns/pim/schedule#",schema:"http://schema.org/",sioc:"http://rdfs.org/sioc/ns#",skos:"http://www.w3.org/2004/02/skos/core#",solid:"http://www.w3.org/ns/solid/terms#",space:"http://www.w3.org/ns/pim/space#",stat:"http://www.w3.org/ns/posix/stat#",tab:"http://www.w3.org/2007/ont/link#",tabont:"http://www.w3.org/2007/ont/link#",ui:"http://www.w3.org/ns/ui#",vann:"http://purl.org/vocab/vann/",vcard:"http://www.w3.org/2006/vcard/ns#",wf:"http://www.w3.org/2005/01/wf/flow#",xsd:"http://www.w3.org/2001/XMLSchema#"};function e(t={namedNode:r=>r}){const r={};for(const i in a){const s=a[i];r[i]=function(n=""){return t.namedNode(s+n)}}return r}return va=e,va}var Jo=Qo();const Ji=Xs(Jo);var Zn={},rn={},yn={},Zi;function ta(){if(Zi)return yn;Zi=1;function a(s,n,l){if(l===void 0&&(l=Array.prototype),s&&typeof l.find=="function")return l.find.call(s,n);for(var o=0;o<s.length;o++)if(Object.prototype.hasOwnProperty.call(s,o)){var c=s[o];if(n.call(void 0,c,o,s))return c}}function e(s,n){return n===void 0&&(n=Object),n&&typeof n.freeze=="function"?n.freeze(s):s}function t(s,n){if(s===null||typeof s!="object")throw new TypeError("target is not an object");for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(s[l]=n[l]);return s}var r=e({HTML:"text/html",isHTML:function(s){return s===r.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),i=e({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(s){return s===i.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return yn.assign=t,yn.find=a,yn.freeze=e,yn.MIME_TYPE=r,yn.NAMESPACE=i,yn}var Ki;function zs(){if(Ki)return rn;Ki=1;var a=ta(),e=a.find,t=a.NAMESPACE;function r(C){return C!==""}function i(C){return C?C.split(/[\t\n\f\r ]+/).filter(r):[]}function s(C,T){return C.hasOwnProperty(T)||(C[T]=!0),C}function n(C){if(!C)return[];var T=i(C);return Object.keys(T.reduce(s,{}))}function l(C){return function(T){return C&&C.indexOf(T)!==-1}}function o(C,T){for(var O in C)Object.prototype.hasOwnProperty.call(C,O)&&(T[O]=C[O])}function c(C,T){var O=C.prototype;if(!(O instanceof T)){let Y=function(){};Y.prototype=T.prototype,Y=new Y,o(O,Y),C.prototype=O=Y}O.constructor!=C&&(typeof C!="function"&&console.error("unknown Class:"+C),O.constructor=C)}var h={},p=h.ELEMENT_NODE=1,m=h.ATTRIBUTE_NODE=2,w=h.TEXT_NODE=3,y=h.CDATA_SECTION_NODE=4,N=h.ENTITY_REFERENCE_NODE=5,D=h.ENTITY_NODE=6,L=h.PROCESSING_INSTRUCTION_NODE=7,R=h.COMMENT_NODE=8,Q=h.DOCUMENT_NODE=9,J=h.DOCUMENT_TYPE_NODE=10,x=h.DOCUMENT_FRAGMENT_NODE=11,G=h.NOTATION_NODE=12,M={},X={};M.INDEX_SIZE_ERR=(X[1]="Index size error",1),M.DOMSTRING_SIZE_ERR=(X[2]="DOMString size error",2);var k=M.HIERARCHY_REQUEST_ERR=(X[3]="Hierarchy request error",3);M.WRONG_DOCUMENT_ERR=(X[4]="Wrong document",4),M.INVALID_CHARACTER_ERR=(X[5]="Invalid character",5),M.NO_DATA_ALLOWED_ERR=(X[6]="No data allowed",6),M.NO_MODIFICATION_ALLOWED_ERR=(X[7]="No modification allowed",7);var H=M.NOT_FOUND_ERR=(X[8]="Not found",8);M.NOT_SUPPORTED_ERR=(X[9]="Not supported",9);var $=M.INUSE_ATTRIBUTE_ERR=(X[10]="Attribute in use",10);M.INVALID_STATE_ERR=(X[11]="Invalid state",11),M.SYNTAX_ERR=(X[12]="Syntax error",12),M.INVALID_MODIFICATION_ERR=(X[13]="Invalid modification",13),M.NAMESPACE_ERR=(X[14]="Invalid namespace",14),M.INVALID_ACCESS_ERR=(X[15]="Invalid access",15);function q(C,T){if(T instanceof Error)var O=T;else O=this,Error.call(this,X[C]),this.message=X[C],Error.captureStackTrace&&Error.captureStackTrace(this,q);return O.code=C,T&&(this.message=this.message+": "+T),O}q.prototype=Error.prototype,o(M,q);function ee(){}ee.prototype={length:0,item:function(C){return C>=0&&C<this.length?this[C]:null},toString:function(C,T){for(var O=[],Y=0;Y<this.length;Y++)Fe(this[Y],O,C,T);return O.join("")},filter:function(C){return Array.prototype.filter.call(this,C)},indexOf:function(C){return Array.prototype.indexOf.call(this,C)}};function Z(C,T){this._node=C,this._refresh=T,_(this)}function _(C){var T=C._node._inc||C._node.ownerDocument._inc;if(C._inc!==T){var O=C._refresh(C._node);if(Wn(C,"length",O.length),!C.$$length||O.length<C.$$length)for(var Y=O.length;Y in C;Y++)Object.prototype.hasOwnProperty.call(C,Y)&&delete C[Y];o(O,C),C._inc=T}}Z.prototype.item=function(C){return _(this),this[C]||null},c(Z,ee);function V(){}function K(C,T){for(var O=C.length;O--;)if(C[O]===T)return O}function ae(C,T,O,Y){if(Y?T[K(T,Y)]=O:T[T.length++]=O,C){O.ownerElement=C;var le=C.ownerDocument;le&&(Y&&Me(le,C,Y),Ce(le,C,O))}}function ie(C,T,O){var Y=K(T,O);if(Y>=0){for(var le=T.length-1;Y<le;)T[Y]=T[++Y];if(T.length=le,C){var Ee=C.ownerDocument;Ee&&(Me(Ee,C,O),O.ownerElement=null)}}else throw new q(H,new Error(C.tagName+"@"+O))}V.prototype={length:0,item:ee.prototype.item,getNamedItem:function(C){for(var T=this.length;T--;){var O=this[T];if(O.nodeName==C)return O}},setNamedItem:function(C){var T=C.ownerElement;if(T&&T!=this._ownerElement)throw new q($);var O=this.getNamedItem(C.nodeName);return ae(this._ownerElement,this,C,O),O},setNamedItemNS:function(C){var T=C.ownerElement,O;if(T&&T!=this._ownerElement)throw new q($);return O=this.getNamedItemNS(C.namespaceURI,C.localName),ae(this._ownerElement,this,C,O),O},removeNamedItem:function(C){var T=this.getNamedItem(C);return ie(this._ownerElement,this,T),T},removeNamedItemNS:function(C,T){var O=this.getNamedItemNS(C,T);return ie(this._ownerElement,this,O),O},getNamedItemNS:function(C,T){for(var O=this.length;O--;){var Y=this[O];if(Y.localName==T&&Y.namespaceURI==C)return Y}return null}};function ue(){}ue.prototype={hasFeature:function(C,T){return!0},createDocument:function(C,T,O){var Y=new pe;if(Y.implementation=this,Y.childNodes=new ee,Y.doctype=O||null,O&&Y.appendChild(O),T){var le=Y.createElementNS(C,T);Y.appendChild(le)}return Y},createDocumentType:function(C,T,O){var Y=new f;return Y.name=C,Y.nodeName=C,Y.publicId=T||"",Y.systemId=O||"",Y}};function ne(){}ne.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(C,T){return st(this,C,T)},replaceChild:function(C,T){st(this,C,T,Ie),T&&this.removeChild(T)},removeChild:function(C){return Ae(this,C)},appendChild:function(C){return this.insertBefore(C,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(C){return zn(this.ownerDocument||this,this,C)},normalize:function(){for(var C=this.firstChild;C;){var T=C.nextSibling;T&&T.nodeType==w&&C.nodeType==w?(this.removeChild(T),C.appendData(T.data)):(C.normalize(),C=T)}},isSupported:function(C,T){return this.ownerDocument.implementation.hasFeature(C,T)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(C){for(var T=this;T;){var O=T._nsMap;if(O){for(var Y in O)if(Object.prototype.hasOwnProperty.call(O,Y)&&O[Y]===C)return Y}T=T.nodeType==m?T.ownerDocument:T.parentNode}return null},lookupNamespaceURI:function(C){for(var T=this;T;){var O=T._nsMap;if(O&&Object.prototype.hasOwnProperty.call(O,C))return O[C];T=T.nodeType==m?T.ownerDocument:T.parentNode}return null},isDefaultNamespace:function(C){var T=this.lookupPrefix(C);return T==null}};function ge(C){return C=="<"&&"&lt;"||C==">"&&"&gt;"||C=="&"&&"&amp;"||C=='"'&&"&quot;"||"&#"+C.charCodeAt()+";"}o(h,ne),o(h,ne.prototype);function Le(C,T){if(T(C))return!0;if(C=C.firstChild)do if(Le(C,T))return!0;while(C=C.nextSibling)}function pe(){this.ownerDocument=this}function Ce(C,T,O){C&&C._inc++;var Y=O.namespaceURI;Y===t.XMLNS&&(T._nsMap[O.prefix?O.localName:""]=O.value)}function Me(C,T,O,Y){C&&C._inc++;var le=O.namespaceURI;le===t.XMLNS&&delete T._nsMap[O.prefix?O.localName:""]}function Je(C,T,O){if(C&&C._inc){C._inc++;var Y=T.childNodes;if(O)Y[Y.length++]=O;else{for(var le=T.firstChild,Ee=0;le;)Y[Ee++]=le,le=le.nextSibling;Y.length=Ee,delete Y[Y.length]}}}function Ae(C,T){var O=T.previousSibling,Y=T.nextSibling;return O?O.nextSibling=Y:C.firstChild=Y,Y?Y.previousSibling=O:C.lastChild=O,T.parentNode=null,T.previousSibling=null,T.nextSibling=null,Je(C.ownerDocument,C),T}function qe(C){return C&&(C.nodeType===ne.DOCUMENT_NODE||C.nodeType===ne.DOCUMENT_FRAGMENT_NODE||C.nodeType===ne.ELEMENT_NODE)}function dt(C){return C&&(De(C)||ke(C)||at(C)||C.nodeType===ne.DOCUMENT_FRAGMENT_NODE||C.nodeType===ne.COMMENT_NODE||C.nodeType===ne.PROCESSING_INSTRUCTION_NODE)}function at(C){return C&&C.nodeType===ne.DOCUMENT_TYPE_NODE}function De(C){return C&&C.nodeType===ne.ELEMENT_NODE}function ke(C){return C&&C.nodeType===ne.TEXT_NODE}function _e(C,T){var O=C.childNodes||[];if(e(O,De)||at(T))return!1;var Y=e(O,at);return!(T&&Y&&O.indexOf(Y)>O.indexOf(T))}function wt(C,T){var O=C.childNodes||[];function Y(Ee){return De(Ee)&&Ee!==T}if(e(O,Y))return!1;var le=e(O,at);return!(T&&le&&O.indexOf(le)>O.indexOf(T))}function Ve(C,T,O){if(!qe(C))throw new q(k,"Unexpected parent node type "+C.nodeType);if(O&&O.parentNode!==C)throw new q(H,"child not in parent");if(!dt(T)||at(T)&&C.nodeType!==ne.DOCUMENT_NODE)throw new q(k,"Unexpected node type "+T.nodeType+" for parent node type "+C.nodeType)}function se(C,T,O){var Y=C.childNodes||[],le=T.childNodes||[];if(T.nodeType===ne.DOCUMENT_FRAGMENT_NODE){var Ee=le.filter(De);if(Ee.length>1||e(le,ke))throw new q(k,"More than one element or text in fragment");if(Ee.length===1&&!_e(C,O))throw new q(k,"Element in fragment can not be inserted before doctype")}if(De(T)&&!_e(C,O))throw new q(k,"Only one element can be added and only after doctype");if(at(T)){if(e(Y,at))throw new q(k,"Only one doctype is allowed");var Xe=e(Y,De);if(O&&Y.indexOf(Xe)<Y.indexOf(O))throw new q(k,"Doctype can only be inserted before an element");if(!O&&Xe)throw new q(k,"Doctype can not be appended since element is present")}}function Ie(C,T,O){var Y=C.childNodes||[],le=T.childNodes||[];if(T.nodeType===ne.DOCUMENT_FRAGMENT_NODE){var Ee=le.filter(De);if(Ee.length>1||e(le,ke))throw new q(k,"More than one element or text in fragment");if(Ee.length===1&&!wt(C,O))throw new q(k,"Element in fragment can not be inserted before doctype")}if(De(T)&&!wt(C,O))throw new q(k,"Only one element can be added and only after doctype");if(at(T)){if(e(Y,function(Ct){return at(Ct)&&Ct!==O}))throw new q(k,"Only one doctype is allowed");var Xe=e(Y,De);if(O&&Y.indexOf(Xe)<Y.indexOf(O))throw new q(k,"Doctype can only be inserted before an element")}}function st(C,T,O,Y){Ve(C,T,O),C.nodeType===ne.DOCUMENT_NODE&&(Y||se)(C,T,O);var le=T.parentNode;if(le&&le.removeChild(T),T.nodeType===x){var Ee=T.firstChild;if(Ee==null)return T;var Xe=T.lastChild}else Ee=Xe=T;var pt=O?O.previousSibling:C.lastChild;Ee.previousSibling=pt,Xe.nextSibling=O,pt?pt.nextSibling=Ee:C.firstChild=Ee,O==null?C.lastChild=Xe:O.previousSibling=Xe;do{Ee.parentNode=C;var Ct=C.ownerDocument||C;Tt(Ee,Ct)}while(Ee!==Xe&&(Ee=Ee.nextSibling));return Je(C.ownerDocument||C,C),T.nodeType==x&&(T.firstChild=T.lastChild=null),T}function Tt(C,T){if(C.ownerDocument!==T){if(C.ownerDocument=T,C.nodeType===p&&C.attributes)for(var O=0;O<C.attributes.length;O++){var Y=C.attributes.item(O);Y&&(Y.ownerDocument=T)}for(var le=C.firstChild;le;)Tt(le,T),le=le.nextSibling}}function Oe(C,T){T.parentNode&&T.parentNode.removeChild(T),T.parentNode=C,T.previousSibling=C.lastChild,T.nextSibling=null,T.previousSibling?T.previousSibling.nextSibling=T:C.firstChild=T,C.lastChild=T,Je(C.ownerDocument,C,T);var O=C.ownerDocument||C;return Tt(T,O),T}pe.prototype={nodeName:"#document",nodeType:Q,doctype:null,documentElement:null,_inc:1,insertBefore:function(C,T){if(C.nodeType==x){for(var O=C.firstChild;O;){var Y=O.nextSibling;this.insertBefore(O,T),O=Y}return C}return st(this,C,T),Tt(C,this),this.documentElement===null&&C.nodeType===p&&(this.documentElement=C),C},removeChild:function(C){return this.documentElement==C&&(this.documentElement=null),Ae(this,C)},replaceChild:function(C,T){st(this,C,T,Ie),Tt(C,this),T&&this.removeChild(T),De(C)&&(this.documentElement=C)},importNode:function(C,T){return yr(this,C,T)},getElementById:function(C){var T=null;return Le(this.documentElement,function(O){if(O.nodeType==p&&O.getAttribute("id")==C)return T=O,!0}),T},getElementsByClassName:function(C){var T=n(C);return new Z(this,function(O){var Y=[];return T.length>0&&Le(O.documentElement,function(le){if(le!==O&&le.nodeType===p){var Ee=le.getAttribute("class");if(Ee){var Xe=C===Ee;if(!Xe){var pt=n(Ee);Xe=T.every(l(pt))}Xe&&Y.push(le)}}}),Y})},createElement:function(C){var T=new Re;T.ownerDocument=this,T.nodeName=C,T.tagName=C,T.localName=C,T.childNodes=new ee;var O=T.attributes=new V;return O._ownerElement=T,T},createDocumentFragment:function(){var C=new W;return C.ownerDocument=this,C.childNodes=new ee,C},createTextNode:function(C){var T=new Et;return T.ownerDocument=this,T.appendData(C),T},createComment:function(C){var T=new fn;return T.ownerDocument=this,T.appendData(C),T},createCDATASection:function(C){var T=new b;return T.ownerDocument=this,T.appendData(C),T},createProcessingInstruction:function(C,T){var O=new te;return O.ownerDocument=this,O.tagName=O.nodeName=O.target=C,O.nodeValue=O.data=T,O},createAttribute:function(C){var T=new Dt;return T.ownerDocument=this,T.name=C,T.nodeName=C,T.localName=C,T.specified=!0,T},createEntityReference:function(C){var T=new j;return T.ownerDocument=this,T.nodeName=C,T},createElementNS:function(C,T){var O=new Re,Y=T.split(":"),le=O.attributes=new V;return O.childNodes=new ee,O.ownerDocument=this,O.nodeName=T,O.tagName=T,O.namespaceURI=C,Y.length==2?(O.prefix=Y[0],O.localName=Y[1]):O.localName=T,le._ownerElement=O,O},createAttributeNS:function(C,T){var O=new Dt,Y=T.split(":");return O.ownerDocument=this,O.nodeName=T,O.name=T,O.namespaceURI=C,O.specified=!0,Y.length==2?(O.prefix=Y[0],O.localName=Y[1]):O.localName=T,O}},c(pe,ne);function Re(){this._nsMap={}}Re.prototype={nodeType:p,hasAttribute:function(C){return this.getAttributeNode(C)!=null},getAttribute:function(C){var T=this.getAttributeNode(C);return T&&T.value||""},getAttributeNode:function(C){return this.attributes.getNamedItem(C)},setAttribute:function(C,T){var O=this.ownerDocument.createAttribute(C);O.value=O.nodeValue=""+T,this.setAttributeNode(O)},removeAttribute:function(C){var T=this.getAttributeNode(C);T&&this.removeAttributeNode(T)},appendChild:function(C){return C.nodeType===x?this.insertBefore(C,null):Oe(this,C)},setAttributeNode:function(C){return this.attributes.setNamedItem(C)},setAttributeNodeNS:function(C){return this.attributes.setNamedItemNS(C)},removeAttributeNode:function(C){return this.attributes.removeNamedItem(C.nodeName)},removeAttributeNS:function(C,T){var O=this.getAttributeNodeNS(C,T);O&&this.removeAttributeNode(O)},hasAttributeNS:function(C,T){return this.getAttributeNodeNS(C,T)!=null},getAttributeNS:function(C,T){var O=this.getAttributeNodeNS(C,T);return O&&O.value||""},setAttributeNS:function(C,T,O){var Y=this.ownerDocument.createAttributeNS(C,T);Y.value=Y.nodeValue=""+O,this.setAttributeNode(Y)},getAttributeNodeNS:function(C,T){return this.attributes.getNamedItemNS(C,T)},getElementsByTagName:function(C){return new Z(this,function(T){var O=[];return Le(T,function(Y){Y!==T&&Y.nodeType==p&&(C==="*"||Y.tagName==C)&&O.push(Y)}),O})},getElementsByTagNameNS:function(C,T){return new Z(this,function(O){var Y=[];return Le(O,function(le){le!==O&&le.nodeType===p&&(C==="*"||le.namespaceURI===C)&&(T==="*"||le.localName==T)&&Y.push(le)}),Y})}},pe.prototype.getElementsByTagName=Re.prototype.getElementsByTagName,pe.prototype.getElementsByTagNameNS=Re.prototype.getElementsByTagNameNS,c(Re,ne);function Dt(){}Dt.prototype.nodeType=m,c(Dt,ne);function Zt(){}Zt.prototype={data:"",substringData:function(C,T){return this.data.substring(C,C+T)},appendData:function(C){C=this.data+C,this.nodeValue=this.data=C,this.length=C.length},insertData:function(C,T){this.replaceData(C,0,T)},appendChild:function(C){throw new Error(X[k])},deleteData:function(C,T){this.replaceData(C,T,"")},replaceData:function(C,T,O){var Y=this.data.substring(0,C),le=this.data.substring(C+T);O=Y+O+le,this.nodeValue=this.data=O,this.length=O.length}},c(Zt,ne);function Et(){}Et.prototype={nodeName:"#text",nodeType:w,splitText:function(C){var T=this.data,O=T.substring(C);T=T.substring(0,C),this.data=this.nodeValue=T,this.length=T.length;var Y=this.ownerDocument.createTextNode(O);return this.parentNode&&this.parentNode.insertBefore(Y,this.nextSibling),Y}},c(Et,Zt);function fn(){}fn.prototype={nodeName:"#comment",nodeType:R},c(fn,Zt);function b(){}b.prototype={nodeName:"#cdata-section",nodeType:y},c(b,Zt);function f(){}f.prototype.nodeType=J,c(f,ne);function g(){}g.prototype.nodeType=G,c(g,ne);function I(){}I.prototype.nodeType=D,c(I,ne);function j(){}j.prototype.nodeType=N,c(j,ne);function W(){}W.prototype.nodeName="#document-fragment",W.prototype.nodeType=x,c(W,ne);function te(){}te.prototype.nodeType=L,c(te,ne);function xe(){}xe.prototype.serializeToString=function(C,T,O){return Ge.call(C,T,O)},ne.prototype.toString=Ge;function Ge(C,T){var O=[],Y=this.nodeType==9&&this.documentElement||this,le=Y.prefix,Ee=Y.namespaceURI;if(Ee&&le==null){var le=Y.lookupPrefix(Ee);if(le==null)var Xe=[{namespace:Ee,prefix:null}]}return Fe(this,O,C,T,Xe),O.join("")}function Pe(C,T,O){var Y=C.prefix||"",le=C.namespaceURI;if(!le||Y==="xml"&&le===t.XML||le===t.XMLNS)return!1;for(var Ee=O.length;Ee--;){var Xe=O[Ee];if(Xe.prefix===Y)return Xe.namespace!==le}return!0}function He(C,T,O){C.push(" ",T,'="',O.replace(/[<>&"\t\n\r]/g,ge),'"')}function Fe(C,T,O,Y,le){if(le||(le=[]),Y)if(C=Y(C),C){if(typeof C=="string"){T.push(C);return}}else return;switch(C.nodeType){case p:var Ee=C.attributes,Xe=Ee.length,lt=C.firstChild,pt=C.tagName;O=t.isHTML(C.namespaceURI)||O;var Ct=pt;if(!O&&!C.prefix&&C.namespaceURI){for(var Bt,Lt=0;Lt<Ee.length;Lt++)if(Ee.item(Lt).name==="xmlns"){Bt=Ee.item(Lt).value;break}if(!Bt)for(var Kt=le.length-1;Kt>=0;Kt--){var en=le[Kt];if(en.prefix===""&&en.namespace===C.namespaceURI){Bt=en.namespace;break}}if(Bt!==C.namespaceURI)for(var Kt=le.length-1;Kt>=0;Kt--){var en=le[Kt];if(en.namespace===C.namespaceURI){en.prefix&&(Ct=en.prefix+":"+pt);break}}}T.push("<",Ct);for(var ht=0;ht<Xe;ht++){var tt=Ee.item(ht);tt.prefix=="xmlns"?le.push({prefix:tt.localName,namespace:tt.value}):tt.nodeName=="xmlns"&&le.push({prefix:"",namespace:tt.value})}for(var ht=0;ht<Xe;ht++){var tt=Ee.item(ht);if(Pe(tt,O,le)){var tn=tt.prefix||"",pn=tt.namespaceURI;He(T,tn?"xmlns:"+tn:"xmlns",pn),le.push({prefix:tn,namespace:pn})}Fe(tt,T,O,Y,le)}if(pt===Ct&&Pe(C,O,le)){var tn=C.prefix||"",pn=C.namespaceURI;He(T,tn?"xmlns:"+tn:"xmlns",pn),le.push({prefix:tn,namespace:pn})}if(lt||O&&!/^(?:meta|link|img|br|hr|input)$/i.test(pt)){if(T.push(">"),O&&/^script$/i.test(pt))for(;lt;)lt.data?T.push(lt.data):Fe(lt,T,O,Y,le.slice()),lt=lt.nextSibling;else for(;lt;)Fe(lt,T,O,Y,le.slice()),lt=lt.nextSibling;T.push("</",Ct,">")}else T.push("/>");return;case Q:case x:for(var lt=C.firstChild;lt;)Fe(lt,T,O,Y,le.slice()),lt=lt.nextSibling;return;case m:return He(T,C.name,C.value);case w:return T.push(C.data.replace(/[<&>]/g,ge));case y:return T.push("<![CDATA[",C.data,"]]>");case R:return T.push("<!--",C.data,"-->");case J:var Yn=C.publicId,un=C.systemId;if(T.push("<!DOCTYPE ",C.name),Yn)T.push(" PUBLIC ",Yn),un&&un!="."&&T.push(" ",un),T.push(">");else if(un&&un!=".")T.push(" SYSTEM ",un,">");else{var Ze=C.internalSubset;Ze&&T.push(" [",Ze,"]"),T.push(">")}return;case L:return T.push("<?",C.target," ",C.data,"?>");case N:return T.push("&",C.nodeName,";");default:T.push("??",C.nodeName)}}function yr(C,T,O){var Y;switch(T.nodeType){case p:Y=T.cloneNode(!1),Y.ownerDocument=C;case x:break;case m:O=!0;break}if(Y||(Y=T.cloneNode(!1)),Y.ownerDocument=C,Y.parentNode=null,O)for(var le=T.firstChild;le;)Y.appendChild(yr(C,le,O)),le=le.nextSibling;return Y}function zn(C,T,O){var Y=new T.constructor;for(var le in T)if(Object.prototype.hasOwnProperty.call(T,le)){var Ee=T[le];typeof Ee!="object"&&Ee!=Y[le]&&(Y[le]=Ee)}switch(T.childNodes&&(Y.childNodes=new ee),Y.ownerDocument=C,Y.nodeType){case p:var Xe=T.attributes,pt=Y.attributes=new V,Ct=Xe.length;pt._ownerElement=Y;for(var Bt=0;Bt<Ct;Bt++)Y.setAttributeNode(zn(C,Xe.item(Bt),!0));break;case m:O=!0}if(O)for(var Lt=T.firstChild;Lt;)Y.appendChild(zn(C,Lt,O)),Lt=Lt.nextSibling;return Y}function Wn(C,T,O){C[T]=O}try{if(Object.defineProperty){let C=function(T){switch(T.nodeType){case p:case x:var O=[];for(T=T.firstChild;T;)T.nodeType!==7&&T.nodeType!==8&&O.push(C(T)),T=T.nextSibling;return O.join("");default:return T.nodeValue}};Object.defineProperty(Z.prototype,"length",{get:function(){return _(this),this.$$length}}),Object.defineProperty(ne.prototype,"textContent",{get:function(){return C(this)},set:function(T){switch(this.nodeType){case p:case x:for(;this.firstChild;)this.removeChild(this.firstChild);(T||String(T))&&this.appendChild(this.ownerDocument.createTextNode(T));break;default:this.data=T,this.value=T,this.nodeValue=T}}}),Wn=function(T,O,Y){T["$$"+O]=Y}}}catch{}return rn.DocumentType=f,rn.DOMException=q,rn.DOMImplementation=ue,rn.Element=Re,rn.Node=ne,rn.NodeList=ee,rn.XMLSerializer=xe,rn}var Kn={},ya={},es;function Zo(){return es||(es=1,(function(a){var e=ta().freeze;a.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),a.HTML_ENTITIES=e({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:`
`,nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),a.entityMap=a.HTML_ENTITIES})(ya)),ya}var Rr={},ts;function Ko(){if(ts)return Rr;ts=1;var a=ta().NAMESPACE,e=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,t=new RegExp("[\\-\\.0-9"+e.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),r=new RegExp("^"+e.source+t.source+"*(?::"+e.source+t.source+"*)?$"),i=0,s=1,n=2,l=3,o=4,c=5,h=6,p=7;function m(k,H){this.message=k,this.locator=H,Error.captureStackTrace&&Error.captureStackTrace(this,m)}m.prototype=new Error,m.prototype.name=m.name;function w(){}w.prototype={parse:function(k,H,$){var q=this.domBuilder;q.startDocument(),J(H,H={}),y(k,H,$,q,this.errorHandler),q.endDocument()}};function y(k,H,$,q,ee){function Z(Oe){if(Oe>65535){Oe-=65536;var Re=55296+(Oe>>10),Dt=56320+(Oe&1023);return String.fromCharCode(Re,Dt)}else return String.fromCharCode(Oe)}function _(Oe){var Re=Oe.slice(1,-1);return Object.hasOwnProperty.call($,Re)?$[Re]:Re.charAt(0)==="#"?Z(parseInt(Re.substr(1).replace("x","0x"))):(ee.error("entity not found:"+Oe),Oe)}function V(Oe){if(Oe>pe){var Re=k.substring(pe,Oe).replace(/&#?\w+;/g,_);ne&&K(pe),q.characters(Re,0,Oe-pe),pe=Oe}}function K(Oe,Re){for(;Oe>=ie&&(Re=ue.exec(k));)ae=Re.index,ie=ae+Re[0].length,ne.lineNumber++;ne.columnNumber=Oe-ae+1}for(var ae=0,ie=0,ue=/.*(?:\r\n?|\n)|.*$/g,ne=q.locator,ge=[{currentNSMap:H}],Le={},pe=0;;){try{var Ce=k.indexOf("<",pe);if(Ce<0){if(!k.substr(pe).match(/^\s*$/)){var Me=q.doc,Je=Me.createTextNode(k.substr(pe));Me.appendChild(Je),q.currentElement=Je}return}switch(Ce>pe&&V(Ce),k.charAt(Ce+1)){case"/":var Ve=k.indexOf(">",Ce+3),Ae=k.substring(Ce+2,Ve).replace(/[ \t\n\r]+$/g,""),qe=ge.pop();Ve<0?(Ae=k.substring(Ce+2).replace(/[\s<].*/,""),ee.error("end tag name: "+Ae+" is not complete:"+qe.tagName),Ve=Ce+1+Ae.length):Ae.match(/\s</)&&(Ae=Ae.replace(/[\s<].*/,""),ee.error("end tag name: "+Ae+" maybe not complete"),Ve=Ce+1+Ae.length);var dt=qe.localNSMap,at=qe.tagName==Ae,De=at||qe.tagName&&qe.tagName.toLowerCase()==Ae.toLowerCase();if(De){if(q.endElement(qe.uri,qe.localName,Ae),dt)for(var ke in dt)Object.prototype.hasOwnProperty.call(dt,ke)&&q.endPrefixMapping(ke);at||ee.fatalError("end tag name: "+Ae+" is not match the current start tagName:"+qe.tagName)}else ge.push(qe);Ve++;break;case"?":ne&&K(Ce),Ve=G(k,Ce,q);break;case"!":ne&&K(Ce),Ve=x(k,Ce,q,ee);break;default:ne&&K(Ce);var _e=new M,wt=ge[ge.length-1].currentNSMap,Ve=D(k,Ce,_e,wt,_,ee),se=_e.length;if(!_e.closed&&Q(k,Ve,_e.tagName,Le)&&(_e.closed=!0,$.nbsp||ee.warning("unclosed xml attribute")),ne&&se){for(var Ie=N(ne,{}),st=0;st<se;st++){var Tt=_e[st];K(Tt.offset),Tt.locator=N(ne,{})}q.locator=Ie,L(_e,q,wt)&&ge.push(_e),q.locator=ne}else L(_e,q,wt)&&ge.push(_e);a.isHTML(_e.uri)&&!_e.closed?Ve=R(k,Ve,_e.tagName,_,q):Ve++}}catch(Oe){if(Oe instanceof m)throw Oe;ee.error("element parse error: "+Oe),Ve=-1}Ve>pe?pe=Ve:V(Math.max(Ce,pe)+1)}}function N(k,H){return H.lineNumber=k.lineNumber,H.columnNumber=k.columnNumber,H}function D(k,H,$,q,ee,Z){function _(ne,ge,Le){$.attributeNames.hasOwnProperty(ne)&&Z.fatalError("Attribute "+ne+" redefined"),$.addValue(ne,ge.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,ee),Le)}for(var V,K,ae=++H,ie=i;;){var ue=k.charAt(ae);switch(ue){case"=":if(ie===s)V=k.slice(H,ae),ie=l;else if(ie===n)ie=l;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(ie===l||ie===s)if(ie===s&&(Z.warning('attribute value must after "="'),V=k.slice(H,ae)),H=ae+1,ae=k.indexOf(ue,H),ae>0)K=k.slice(H,ae),_(V,K,H-1),ie=c;else throw new Error("attribute value no end '"+ue+"' match");else if(ie==o)K=k.slice(H,ae),_(V,K,H),Z.warning('attribute "'+V+'" missed start quot('+ue+")!!"),H=ae+1,ie=c;else throw new Error('attribute value must after "="');break;case"/":switch(ie){case i:$.setTagName(k.slice(H,ae));case c:case h:case p:ie=p,$.closed=!0;case o:case s:break;case n:$.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return Z.error("unexpected end of input"),ie==i&&$.setTagName(k.slice(H,ae)),ae;case">":switch(ie){case i:$.setTagName(k.slice(H,ae));case c:case h:case p:break;case o:case s:K=k.slice(H,ae),K.slice(-1)==="/"&&($.closed=!0,K=K.slice(0,-1));case n:ie===n&&(K=V),ie==o?(Z.warning('attribute "'+K+'" missed quot(")!'),_(V,K,H)):((!a.isHTML(q[""])||!K.match(/^(?:disabled|checked|selected)$/i))&&Z.warning('attribute "'+K+'" missed value!! "'+K+'" instead!!'),_(K,K,H));break;case l:throw new Error("attribute value missed!!")}return ae;case"":ue=" ";default:if(ue<=" ")switch(ie){case i:$.setTagName(k.slice(H,ae)),ie=h;break;case s:V=k.slice(H,ae),ie=n;break;case o:var K=k.slice(H,ae);Z.warning('attribute "'+K+'" missed quot(")!!'),_(V,K,H);case c:ie=h;break}else switch(ie){case n:$.tagName,(!a.isHTML(q[""])||!V.match(/^(?:disabled|checked|selected)$/i))&&Z.warning('attribute "'+V+'" missed value!! "'+V+'" instead2!!'),_(V,V,H),H=ae,ie=s;break;case c:Z.warning('attribute space is required"'+V+'"!!');case h:ie=s,H=ae;break;case l:ie=o,H=ae;break;case p:throw new Error("elements closed character '/' and '>' must be connected to")}}ae++}}function L(k,H,$){for(var q=k.tagName,ee=null,ue=k.length;ue--;){var Z=k[ue],_=Z.qName,V=Z.value,ne=_.indexOf(":");if(ne>0)var K=Z.prefix=_.slice(0,ne),ae=_.slice(ne+1),ie=K==="xmlns"&&ae;else ae=_,K=null,ie=_==="xmlns"&&"";Z.localName=ae,ie!==!1&&(ee==null&&(ee={},J($,$={})),$[ie]=ee[ie]=V,Z.uri=a.XMLNS,H.startPrefixMapping(ie,V))}for(var ue=k.length;ue--;){Z=k[ue];var K=Z.prefix;K&&(K==="xml"&&(Z.uri=a.XML),K!=="xmlns"&&(Z.uri=$[K||""]))}var ne=q.indexOf(":");ne>0?(K=k.prefix=q.slice(0,ne),ae=k.localName=q.slice(ne+1)):(K=null,ae=k.localName=q);var ge=k.uri=$[K||""];if(H.startElement(ge,ae,q,k),k.closed){if(H.endElement(ge,ae,q),ee)for(K in ee)Object.prototype.hasOwnProperty.call(ee,K)&&H.endPrefixMapping(K)}else return k.currentNSMap=$,k.localNSMap=ee,!0}function R(k,H,$,q,ee){if(/^(?:script|textarea)$/i.test($)){var Z=k.indexOf("</"+$+">",H),_=k.substring(H+1,Z);if(/[&<]/.test(_))return/^script$/i.test($)?(ee.characters(_,0,_.length),Z):(_=_.replace(/&#?\w+;/g,q),ee.characters(_,0,_.length),Z)}return H+1}function Q(k,H,$,q){var ee=q[$];return ee==null&&(ee=k.lastIndexOf("</"+$+">"),ee<H&&(ee=k.lastIndexOf("</"+$)),q[$]=ee),ee<H}function J(k,H){for(var $ in k)Object.prototype.hasOwnProperty.call(k,$)&&(H[$]=k[$])}function x(k,H,$,q){var ee=k.charAt(H+2);switch(ee){case"-":if(k.charAt(H+3)==="-"){var Z=k.indexOf("-->",H+4);return Z>H?($.comment(k,H+4,Z-H-4),Z+3):(q.error("Unclosed comment"),-1)}else return-1;default:if(k.substr(H+3,6)=="CDATA["){var Z=k.indexOf("]]>",H+9);return $.startCDATA(),$.characters(k,H+9,Z-H-9),$.endCDATA(),Z+3}var _=X(k,H),V=_.length;if(V>1&&/!doctype/i.test(_[0][0])){var K=_[1][0],ae=!1,ie=!1;V>3&&(/^public$/i.test(_[2][0])?(ae=_[3][0],ie=V>4&&_[4][0]):/^system$/i.test(_[2][0])&&(ie=_[3][0]));var ue=_[V-1];return $.startDTD(K,ae,ie),$.endDTD(),ue.index+ue[0].length}}return-1}function G(k,H,$){var q=k.indexOf("?>",H);if(q){var ee=k.substring(H,q).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return ee?(ee[0].length,$.processingInstruction(ee[1],ee[2]),q+2):-1}return-1}function M(){this.attributeNames={}}M.prototype={setTagName:function(k){if(!r.test(k))throw new Error("invalid tagName:"+k);this.tagName=k},addValue:function(k,H,$){if(!r.test(k))throw new Error("invalid attribute:"+k);this.attributeNames[k]=this.length,this[this.length++]={qName:k,value:H,offset:$}},length:0,getLocalName:function(k){return this[k].localName},getLocator:function(k){return this[k].locator},getQName:function(k){return this[k].qName},getURI:function(k){return this[k].uri},getValue:function(k){return this[k].value}};function X(k,H){var $,q=[],ee=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(ee.lastIndex=H,ee.exec(k);$=ee.exec(k);)if(q.push($),$[1])return q}return Rr.XMLReader=w,Rr.ParseError=m,Rr}var ns;function ec(){if(ns)return Kn;ns=1;var a=ta(),e=zs(),t=Zo(),r=Ko(),i=e.DOMImplementation,s=a.NAMESPACE,n=r.ParseError,l=r.XMLReader;function o(D){return D.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function c(D){this.options=D||{locator:{}}}c.prototype.parseFromString=function(D,L){var R=this.options,Q=new l,J=R.domBuilder||new p,x=R.errorHandler,G=R.locator,M=R.xmlns||{},X=/\/x?html?$/.test(L),k=X?t.HTML_ENTITIES:t.XML_ENTITIES;G&&J.setDocumentLocator(G),Q.errorHandler=h(x,J,G),Q.domBuilder=R.domBuilder||J,X&&(M[""]=s.HTML),M.xml=M.xml||s.XML;var H=R.normalizeLineEndings||o;return D&&typeof D=="string"?Q.parse(H(D),M,k):Q.errorHandler.error("invalid doc source"),J.doc};function h(D,L,R){if(!D){if(L instanceof p)return L;D=L}var Q={},J=D instanceof Function;R=R||{};function x(G){var M=D[G];!M&&J&&(M=D.length==2?function(X){D(G,X)}:D),Q[G]=M&&function(X){M("[xmldom "+G+"]	"+X+w(R))}||function(){}}return x("warning"),x("error"),x("fatalError"),Q}function p(){this.cdata=!1}function m(D,L){L.lineNumber=D.lineNumber,L.columnNumber=D.columnNumber}p.prototype={startDocument:function(){this.doc=new i().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(D,L,R,Q){var J=this.doc,x=J.createElementNS(D,R||L),G=Q.length;N(this,x),this.currentElement=x,this.locator&&m(this.locator,x);for(var M=0;M<G;M++){var D=Q.getURI(M),X=Q.getValue(M),R=Q.getQName(M),k=J.createAttributeNS(D,R);this.locator&&m(Q.getLocator(M),k),k.value=k.nodeValue=X,x.setAttributeNode(k)}},endElement:function(D,L,R){var Q=this.currentElement;Q.tagName,this.currentElement=Q.parentNode},startPrefixMapping:function(D,L){},endPrefixMapping:function(D){},processingInstruction:function(D,L){var R=this.doc.createProcessingInstruction(D,L);this.locator&&m(this.locator,R),N(this,R)},ignorableWhitespace:function(D,L,R){},characters:function(D,L,R){if(D=y.apply(this,arguments),D){if(this.cdata)var Q=this.doc.createCDATASection(D);else var Q=this.doc.createTextNode(D);this.currentElement?this.currentElement.appendChild(Q):/^\s*$/.test(D)&&this.doc.appendChild(Q),this.locator&&m(this.locator,Q)}},skippedEntity:function(D){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(D){(this.locator=D)&&(D.lineNumber=0)},comment:function(D,L,R){D=y.apply(this,arguments);var Q=this.doc.createComment(D);this.locator&&m(this.locator,Q),N(this,Q)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(D,L,R){var Q=this.doc.implementation;if(Q&&Q.createDocumentType){var J=Q.createDocumentType(D,L,R);this.locator&&m(this.locator,J),N(this,J),this.doc.doctype=J}},warning:function(D){console.warn("[xmldom warning]	"+D,w(this.locator))},error:function(D){console.error("[xmldom error]	"+D,w(this.locator))},fatalError:function(D){throw new n(D,this.locator)}};function w(D){if(D)return`
@`+(D.systemId||"")+"#[line:"+D.lineNumber+",col:"+D.columnNumber+"]"}function y(D,L,R){return typeof D=="string"?D.substr(L,R):D.length>=L+R||L?new java.lang.String(D,L,R)+"":D}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(D){p.prototype[D]=function(){return null}});function N(D,L){D.currentElement?D.currentElement.appendChild(L):D.doc.appendChild(L)}return Kn.__DOMHandler=p,Kn.normalizeLineEndings=o,Kn.DOMParser=c,Kn}var rs;function tc(){if(rs)return Zn;rs=1;var a=zs();return Zn.DOMImplementation=a.DOMImplementation,Zn.XMLSerializer=a.XMLSerializer,Zn.DOMParser=ec().DOMParser,Zn}var as=tc();function nc(a){return a=a.split(";")[0].trim(),new ft("http://www.w3.org/ns/iana/media-types/"+a+"#Resource")}function rc(a,e){a.callbacks={};for(var t=e.length-1;t>=0;t--)a.callbacks[e[t]]=[];a.addHook=function(r){a.callbacks[r]||(a.callbacks[r]=[])},a.addCallback=function(r,i){a.callbacks[r].push(i)},a.removeCallback=function(r,i){for(var s=0;s<a.callbacks[r].length;s++)if(a.callbacks[r][s].name===i)return a.callbacks[r].splice(s,1),!0;return!1},a.insertCallback=function(r,i){a.callbacks[r].unshift(i)},a.fireCallbacks=function(i,s){var n=[],l=[],o=a.callbacks[i].length,c;let h;for(c=o-1;c>=0;c--)h=a.callbacks[i][c],h&&h.apply(a,s)&&n.push(h);for(c=n.length-1;c>=0;c--)l.push(n[c]);for(c=o;c<a.callbacks[i].length;c++)l.push(a.callbacks[i][c]);a.callbacks[i]=l}}function ac(a,e){e=e||{};var t=[];e&&e.selfClosing&&e.selfClosing.split(" ").forEach(function(i){t[i]=!0});var r=[];return e&&e.skipAttributes&&e.skipAttributes.split(" ").forEach(function(i){r[i]=!0}),Ws(a,e,t,r)}function Ws(a,e,t,r){var i,s="",n=[!1];if(typeof a.nodeType>"u")return s;if(a.nodeType===1){if(a.hasAttribute("class")&&e&&e.classWithChildText&&a.matches(e.classWithChildText.class))s+=a.querySelector(e.classWithChildText.element).textContent;else if(!(e&&e.skipNodeWithClass&&a.matches("."+e.skipNodeWithClass))){var l=a.nodeName.toLowerCase();s+="<"+l;var o=[];for(i=a.attributes.length-1;i>=0;i--){var c=a.attributes[i];if(!(r&&r.length>0&&r[c.name])&&!/^\d+$/.test(c.name)){if(c.name==="class"&&e&&e.replaceClassItemWith&&c.value.split(" ").indexOf(e.replaceClassItemWith.source)>-1){var h=new RegExp(e.replaceClassItemWith.source,"g");c.value=c.value.replace(h,e.replaceClassItemWith.target).trim()}c.name==="class"&&e&&e.skipClassWithValue&&e.skipClassWithValue===c.value||o.push(c.name+"='"+c.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&quot;")+"'")}}if(o.length>0&&(e&&e.sortAttributes&&o.sort(function(m,w){return m.toLowerCase().localeCompare(w.toLowerCase())}),s+=" "+o.join(" ")),t&&t.ename)s+=" />";else{for(s+=">",s+=l==="html"?`
  `:"",n.push(l==="style"||l==="script"),i=0;i<a.childNodes.length;i++)s+=Ws(a.childNodes[i]);n.pop(),s+=l==="body"?"</"+l+`>
`:"</"+l+">"}}}else if(a.nodeType===8)s+="<!--"+a.nodeValue+"-->";else if(a.nodeType===3||a.nodeType===4){var p=a.nodeValue.replace(/\n+$/,"");s+=n[n.length-1]?p:p.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}else console.log("Warning; Cannot handle serialising nodes of type: "+a.nodeType),console.log(a);return s}function wa(a,e,t,r){var i=function(l){return l.termType==="BlankNode"?null:l},s=function(l){var o=t.statementsMatching(l).map(function(c){return""+i(c.subject)+" "+i(c.predicate)+" "+i(c.object)}).concat(t.statementsMatching(void 0,void 0,l).map(function(c){return""+i(c.subject)+" "+i(c.predicate)+" "+i(c.object)}));return o.sort(),o.join(`
`)};const n=Object.prototype.hasOwnProperty.call(t,"compareTerms")?t.compareTerms(a,e):a.compareTerm(e);return a.termType==="BlankNode"&&e.termType==="BlankNode"?n===0?0:s(a)>s(e)?1:s(a)<s(e)?-1:n:r&&a.uri&&e.uri?(r[a.uri]||a.uri).localeCompare(r[e.uri]||e.uri):n}function ic(a,e,t,r){return wa(a.subject,e.subject,t,r)||wa(a.predicate,e.predicate,t,r)||wa(a.object,e.object,t,r)}function qn(a,e){var t;if(e=e||{},typeof module<"u"&&module&&module.exports){var r=new as.DOMParser().parseFromString(a,e.contentType||"application/xhtml+xml");return r}else typeof window<"u"&&window.DOMParser?t=new window.DOMParser:t=new as.DOMParser;return t.parseFromString(a,"application/xml")}function Ua(a,e){for(var t=0;t<a.length;t++)if(a[t].subject.equals(e.subject)&&a[t].predicate.equals(e.predicate)&&a[t].object.equals(e.object)&&a[t].why.equals(e.why)){a.splice(t,1);return}throw new Error("RDFArrayRemove: Array did not contain "+e+" "+e.why)}function sc(a){var e=""+a+`
`;if(!a.stack)return e+`No stack available.
`;for(var t=a.stack.toString().split(`
`),r=[],i=0;i<t.length;i++){var s=t[i];if(s.indexOf("ecmaunit.js")>-1)break;s.charAt(0)=="("&&(s="function"+s);var n=s.split("@");r.push(n)}for(var i=0;i<r.length;i++)e+="  "+r[i][1]+`
    `+r[i][0];return e}function Ys(a=Rt){return{boolean:a.namedNode("http://www.w3.org/2001/XMLSchema#boolean"),dateTime:a.namedNode("http://www.w3.org/2001/XMLSchema#dateTime"),decimal:a.namedNode("http://www.w3.org/2001/XMLSchema#decimal"),double:a.namedNode("http://www.w3.org/2001/XMLSchema#double"),integer:a.namedNode("http://www.w3.org/2001/XMLSchema#integer"),langString:a.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),string:a.namedNode("http://www.w3.org/2001/XMLSchema#string")}}Ys(Rt);function Qs(a){return new Ja(a)}class Ja{constructor(e){re(this,"_notQNameChars",`	\r
 !"#$%&'()*,+/;<=>?@[\\]^\`{|}~`),re(this,"_notNameChars",this._notQNameChars+":"),re(this,"validPrefix",new RegExp(/^[a-zA-Z][a-zA-Z0-9]*$/)),re(this,"forbidden1",new RegExp(/[\\"\b\f\r\v\t\n\u0080-\uffff]/gm)),re(this,"forbidden3",new RegExp(/[\\"\b\f\r\v\u0080-\uffff]/gm)),this.flags="",this.base=null,this.prefixes=[],this.namespaces=[];const t=Object.keys(Ji());for(const r in t){const i=Ji()[t[r]](""),s=t[r];this.prefixes[i]=s,this.namespaces[s]=i}this.suggestPrefix("rdf","http://www.w3.org/1999/02/22-rdf-syntax-ns#"),this.suggestPrefix("xml","reserved:reservedForFutureUse"),this.namespacesUsed=[],this.keywords=["a"],this.prefixchars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",this.incoming=null,this.formulas=[],this.store=e,this.rdfFactory=e.rdfFactory||Rt,this.xsd=Ys(this.rdfFactory)}setBase(e){return this.base=e,this}setFlags(e){return this.flags=e||"",this}toStr(e){var t=e.toNT();return e.termType==="Graph"&&(this.formulas[t]=e),t}fromStr(e){if(e[0]==="{"){var t=this.formulas[e];return t||console.log("No formula object for "+e),t}return this.store.fromNT(e)}setNamespaces(e){for(var t in e)this.setPrefix(t,e[t]);return this}setPrefix(e,t){if(e.slice(0,7)!=="default"&&e.slice(0,2)!=="ns"&&!(!e||!t)){for(let r in this.prefixes)this.prefixes[r]==e&&delete this.prefixes[r];this.prefixes[t]=e,this.namespaces[e]=t}}suggestPrefix(e,t){e.slice(0,7)!=="default"&&e.slice(0,2)!=="ns"&&(!e||!t||e in this.namespaces||t in this.prefixes||(this.prefixes[t]=e,this.namespaces[e]=t))}suggestNamespaces(e){for(var t in e)this.suggestPrefix(t,e[t]);return this}checkIntegrity(){var e,t;for(e in this.namespaces)if(this.prefixes[this.namespaces[e]]!==e)throw new Error("Serializer integity error 1: "+e+", "+this.namespaces[e]+", "+this.prefixes[this.namespaces[e]]+"!");for(t in this.prefixes)if(this.namespaces[this.prefixes[t]]!==t)throw new Error("Serializer integity error 2: "+t+", "+this.prefixs[t]+", "+this.namespaces[this.prefixes[t]]+"!")}makeUpPrefix(e){var t=e;function r(o){return!this.validPrefix.test(o)||o==="ns"||o in this.namespaces?!1:(this.prefixes[e]=o,this.namespaces[o]=e,o)}var i=r.bind(this);"#/".indexOf(t[t.length-1])>=0&&(t=t.slice(0,-1));var s=t.lastIndexOf("/");s>=0&&(t=t.slice(s+1));for(var n=0;n<t.length&&this.prefixchars.indexOf(t[n])>=0;)n++;if(t=t.slice(0,n),t.length<6&&i(t))return t;if(i(t.slice(0,3)))return t.slice(0,3);if(i(t.slice(0,2)))return t.slice(0,2);if(i(t.slice(0,4)))return t.slice(0,4);if(i(t.slice(0,1)))return t.slice(0,1);if(i(t.slice(0,5)))return t.slice(0,5);this.validPrefix.test(t)||(t="n");for(var l=0;;l++)if(i(t.slice(0,3)+l))return t.slice(0,3)+l}rootSubjects(e){for(var t={},r={},i={},s=0;s<e.length;s++){var n=e[s],l=function(N){t.hasOwnProperty(N)||(t[N]=[]),t[N].push(n.subject)},o=[n.subject,n.predicate,n.object];o.map(function(N){N.termType==="BlankNode"?i[N.toNT()]=!0:N.termType==="Collection"&&N.elements.forEach(function(D){l(D)})}),l(e[s].object);var c=r[this.toStr(n.subject)];c||(c=[]),c.push(n),r[this.toStr(n.subject)]=c}var h=[];for(var p in r)if(r.hasOwnProperty(p)){var m=this.fromStr(p);if(m.termType!=="BlankNode"||!t[m]||t[m].length!==1){h.push(m);continue}}this.incoming=t;for(var w={},y=0;y<h.length;y++)w[h[y].toNT()]=!0;return{roots:h,subjects:r,rootsHash:w,incoming:t}}toN3(e){return this.statementsToN3(e.statements)}isValidPNLocal(e){if(e.length===0)return!0;if(e[e.length-1]===".")return!1;for(var t=0;t<e.length;t++){var r=e[t];if(r!=="."&&this._notNameChars.indexOf(r)>=0)return!1}return!0}explicitURI(e){return this.flags.indexOf("r")<0&&this.base?e=ga(this.base,e):this.flags.indexOf("u")>=0?e=uc(e):e=lc(decodeURI(e)),"<"+e+">"}statementsToNTriples(e){var t=e.slice();t.sort();for(var r="",i="http://www.w3.org/1999/02/22-rdf-syntax-ns#",s=this,n=this.store,l=this.rdfFactory,o=function(m){if(m.termType!=="Collection")return s.atomicTermToN3(m);for(var w=m.elements,y=n.sym(i+"nill"),N=w.length-1;N>=0;N--){var D=l.blankNode();r+=o(D)+" "+o(n.sym(i+"first"))+" "+o(w[N])+`.
`,r+=o(D)+" "+o(n.sym(i+"rest"))+" "+o(y)+`.
`,y=D}return s.atomicTermToN3(y)},c=0;c<t.length;c++){var h=t[c],p="";p+=o(h.subject)+" ",p+=o(h.predicate)+" ",p+=o(h.object)+" ",this.flags.indexOf("q")>=0&&(p+=o(h.why)+" "),p+=`.
`,r+=p}return r}statementsToN3(e){var t=4,r=80,i=this.store,s={"http://www.w3.org/1999/02/22-rdf-syntax-ns#type":"aaa:00"},n=function(M,X){return ic(M,X,i,s)};e.sort(n),this.base&&!this.defaultNamespace&&(this.defaultNamespace=this.base+"#");var l={};this.flags.indexOf("s")<0&&(l["http://www.w3.org/2002/07/owl#sameAs"]="="),this.flags.indexOf("t")<0&&(l["http://www.w3.org/1999/02/22-rdf-syntax-ns#type"]="a"),this.flags.indexOf("i")<0&&(l["http://www.w3.org/2000/10/swap/log#implies"]="=>");var o=function(M){for(var X="",k=0;k<M;k++)X+=" ";return X},c=function(M){for(var X="",k=0;k<M.length;k++){var H=M[k],$=typeof H=="string"?H:c(H);if(k!==0){var q=X.slice(-1)||" ";$===","||$===";"||$==="."&&!"0123456789.:".includes(q)||(X+=" ")}X+=$}return X},h=function(M,X){var k="",H=1e5;X===void 0&&(X=-1);for(var $=0;$<M.length;$++){var q=M[$];if(typeof q!="string"){var ee=h(q,X+1);if(ee.length<10*(r-t*X)&&ee.indexOf('"""')<0){var Z=c(q);Z.length<r-t*X&&(q=Z,ee="")}ee&&(H=1e4),k+=ee}if(typeof q=="string"){if(q.length===1&&k.slice(-1)===`
`&&",.;".indexOf(q)>=0){k=k.slice(0,-1),q=="."&&"0123456789.:".includes(k.charAt(k.length-1))&&(k+=" ",H+=1),k+=q+`
`,H+=1;continue}if(H<t*X+4||H+q.length+1<r&&";.".indexOf(k[k.length-2])<0)k=k.slice(0,-1)+" "+q+`
`,H+=q.length+1;else{let _=o(t*X)+q;k+=_+`
`,H=_.length,X<0&&(k+=`
`,H=1e5)}}}return k};function p(M){for(var X=this.rootSubjects(M),k=X.roots,H=[],$=0;$<k.length;$++){var q=k[$];H.push(w(q,X))}return H}var m=p.bind(this);function w(M,X){return M.termType==="BlankNode"&&!X.incoming[M]?L(M,X,!0).concat(["."]):[Q(M,X)].concat([N(M,X)]).concat(["."])}function y(M,X){var k=[],H=null,$=X.subjects[this.toStr(M)]||[];if(typeof $>"u")throw new Error("Cant find statements for "+M);for(var q=[],ee=0;ee<$.length;ee++){var Z=$[ee];Z.predicate.uri===H?q.push(","):(H&&(k=k.concat([q]).concat([";"]),q=[]),k.push(l[Z.predicate.uri]?l[Z.predicate.uri]:Q(Z.predicate,X))),H=Z.predicate.uri,q.push(L(Z.object,X))}return k=k.concat([q]),k}var N=y.bind(this);function D(M,X,k){return M.termType==="BlankNode"&&(k||X.rootsHash[M.toNT()]===void 0)?X.subjects[this.toStr(M)]?["[",N(M,X),"]"]:"[]":Q(M,X)}var L=D.bind(this);function R(M,X){var k,H;switch(M.termType){case"Graph":return H=["{"],H=H.concat(m(M.statements)),H.concat(["}"]);case"Collection":for(H=["("],k=0;k<M.elements.length;k++)H.push([L(M.elements[k],X)]);return H.push(")"),H;default:return this.atomicTermToN3(M)}}Ja.prototype.termToN3=Q;var Q=R.bind(this);function J(){var M="";this.flags.indexOf("d")<0&&this.defaultNamespace&&(M+="@prefix : "+this.explicitURI(this.defaultNamespace)+`.
`);for(var X in this.prefixes)this.prefixes.hasOwnProperty(X)&&this.namespacesUsed[X]&&(M+="@prefix "+this.prefixes[X]+": "+this.explicitURI(X)+`.
`);return M+`
`}var x=J.bind(this),G=m(e);return x()+h(G)}atomicTermToN3(e,t){switch(e.termType){case"BlankNode":case"Variable":return e.toNT();case"Literal":var r=e.value;if(typeof r!="string")throw new TypeError("Value of RDF literal node must be a string");if(e.datatype&&this.flags.indexOf("x")<0)switch(e.datatype.uri){case"http://www.w3.org/2001/XMLSchema#integer":return r;case"http://www.w3.org/2001/XMLSchema#decimal":return r.indexOf(".")<0&&(r+=".0"),r;case"http://www.w3.org/2001/XMLSchema#double":{const s=r.toLowerCase().indexOf("e")>0;return r.indexOf(".")<0&&!s&&(r+=".0"),s||(r+="e0"),r}case"http://www.w3.org/2001/XMLSchema#boolean":return e.value==="1"?"true":"false"}var i=this.stringToN3(e.value,this.flags);return e.language?i+="@"+e.language:e.datatype.equals(this.xsd.string)||(i+="^^"+this.atomicTermToN3(e.datatype,t)),i;case"NamedNode":return this.symbolToN3(e);case"DefaultGraph":return"";default:throw new Error("Internal: atomicTermToN3 cannot handle "+e+" of termType: "+e.termType)}}stringToN3(e,t){t||(t="e");var r="",i,s,n,l,o;for(e.length>20&&e.slice(-1)!=='"'&&t.indexOf("n")<0&&(e.indexOf(`
`)>0||e.indexOf('"')>0)?(l='"""',o=this.forbidden3):(l='"',o=this.forbidden1),i=0;i<e.length;){o.lastIndex=0;var c=o.exec(e.slice(i));if(c==null)break;s=i+o.lastIndex-1,r+=e.slice(i,s);var h=e[s];h==='"'&&l==='"""'&&e.slice(s,s+3)!=='"""'?r+=h:(n=`\b\f\r	\v
\\"`.indexOf(h),n>=0?r+="\\"+'bfrtvn\\"'[n]:t.indexOf("e")>=0?r+="\\u"+("000"+h.charCodeAt(0).toString(16).toLowerCase()).slice(-4):r+=h),i=s+1}return l+r+e.slice(i)+l}symbolToN3(e){var t=e.uri,r=t.indexOf("#");if(r<0&&this.flags.indexOf("/")<0&&(r=t.lastIndexOf("/")),r>=0&&this.flags.indexOf("p")<0&&(t.indexOf("http")===0||t.indexOf("ws")===0||t.indexOf("file")===0)){var i=t.slice(r+1),s=t.slice(0,r+1),n=t.indexOf("://")+4,l=this.base?this.base.slice(0,Math.max(this.base.lastIndexOf("/"),this.base.lastIndexOf("#"))+1):null,o=l&&s===l,c=this.flags.indexOf("o")>=0&&i.indexOf(".")>=0,h=!o&&!c&&s.length>n&&this.isValidPNLocal(i);if(h){if(this.defaultNamespace&&this.defaultNamespace===s&&this.flags.indexOf("d")<0)return this.flags.indexOf("k")>=0&&this.keyords.indexOf(i)<0?i:":"+i;var p=this.prefixes[s];if(p||(p=this.makeUpPrefix(s)),p)return this.namespacesUsed[s]=!0,p+":"+i}}return this.explicitURI(t)}writeStore(e){var t=this.store,r=t.fetcher,i=r&&r.appNode,s=this.store.index[3];for(var n in s){var l=t.fromNT(n);i&&l.equals(i)||e(`
`+this.atomicTermToN3(l)+" "+this.atomicTermToN3(t.sym("http://www.w3.org/2000/10/swap/log#semantics"))+" { "+this.statementsToN3(t.statementsMatching(void 0,void 0,void 0,l))+` }.
`)}t.statementsMatching(void 0,t.sym("http://www.w3.org/2007/ont/link#requestedURI")).map(function(h){e(`
<`+h.object.value+`> log:metadata {
`);var p=t.statementsMatching(void 0,void 0,void 0,h.subject);e(this.statementsToN3(this.statementsToN3(p))),e(`}.
`)});var o=[];i&&o.push(i);var c=[];o.map(function(h){c=c.concat(t.statementsMatching(void 0,void 0,void 0,h))}),e(this.statementsToN3(c))}statementsToXML(e){var t=4,r=80,i=[];i["http://www.w3.org/1999/02/22-rdf-syntax-ns#"]=!0;var s="http://www.w3.org/1999/02/22-rdf-syntax-ns#_",n=function(H){for(var $="",q=0;q<H;q++)$+=" ";return $},l=function(H){for(var $="",q=0;q<H.length;q++){var ee=H[q],Z=typeof ee=="string"?ee:l(ee);$+=Z}return $},o=function(H,$){var q="",ee,Z=1e5;$||($=0);for(var _=0;_<H.length;_++){var V=H[_];if(typeof V!="string"){var K=o(V,$+1);K.length<10*(r-t*$)&&K.indexOf('"""')<0&&(ee=l(V),ee.length<r-t*$&&(V="   "+ee,K="")),K&&(Z=1e4),q+=K}typeof V=="string"&&(Z<t*$+4?(q=q.slice(0,-1)+" "+V+`
`,Z+=V.length+1):(ee=n(t*$)+V,q+=ee+`
`,Z=ee.length))}return q};function c(H){this.suggestPrefix("rdf","http://www.w3.org/1999/02/22-rdf-syntax-ns#");for(var $=this.rootSubjects(H),q=$.roots,ee=[],Z=0;Z<q.length;Z++){var _=q[Z];ee.push(N(_,$))}return ee}var h=c.bind(this);function p(H){return typeof H>"u"?"@@@undefined@@@@":H.replace(/[&<"]/g,function($){switch($[0]){case"&":return"&amp;";case"<":return"&lt;";case'"':return"&quot;"}})}function m(H){return p(this.base?ga(this.base,H.uri):H.uri)}var w=m.bind(this);function y(H,$){var q=[],ee,Z,_,V,K=$.subjects[this.toStr(H)];if(typeof K>"u")return R(H,$);K.sort(function(Le,pe){var Ce=Le.predicate.uri,Me=pe.predicate.uri;if(Ce.substring(0,s.length)===s||Me.substring(0,s.length)===s)return Ce.localeCompare(Me);var Je=Ce.substring(s.length),Ae=Me.substring(s.length),qe=parseInt(Je,10),dt=parseInt(Ae,10);return isNaN(qe)||isNaN(dt)||qe!==Je||dt!==Ae?Ce.localeCompare(Me):qe-dt});for(var ae=0;ae<K.length;ae++){if(_=K[ae],_.predicate.uri==="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"&&!ee&&_.object.termType==="NamedNode"){ee=_.object;continue}if(V=_.predicate,V.uri.substr(0,s.length)===s){var ie=V.uri.substr(s.length),ue=parseInt(ie,10);ie===ue.toString()&&(V=this.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#li"))}switch(Z=J(V),_.object.termType){case"BlankNode":$.incoming[_.object].length===1?q=q.concat(["<"+Z+' rdf:parseType="Resource">',N(_.object,$),"</"+Z+">"]):q=q.concat(["<"+Z+' rdf:nodeID="'+_.object.toNT().slice(2)+'"/>']);break;case"NamedNode":q=q.concat(["<"+Z+' rdf:resource="'+w(_.object)+'"/>']);break;case"Literal":q=q.concat(["<"+Z+(_.object.language?' xml:lang="'+_.object.language+'"':_.object.datatype.equals(this.xsd.string)?"":' rdf:datatype="'+p(_.object.datatype.uri)+'"')+">"+p(_.object.value)+"</"+Z+">"]);break;case"Collection":q=q.concat(["<"+Z+' rdf:parseType="Collection">',D(_.object,$),"</"+Z+">"]);break;default:throw new Error("Can't serialize object of type "+_.object.termType+" into XML")}}var ne=ee?J(ee):"rdf:Description",ge="";return H.termType==="BlankNode"?(!$.incoming[H]||$.incoming[H].length!==1)&&(ge=' rdf:nodeID="'+H.toNT().slice(2)+'"'):ge=' rdf:about="'+w(H)+'"',["<"+ne+ge+">"].concat([q]).concat(["</"+ne+">"])}var N=y.bind(this);function D(H,$){for(var q=[],ee=0;ee<H.elements.length;ee++)q.push(N(H.elements[ee],$));return q}function L(H,$){var q=[],ee=$.subjects[this.toStr(H)];if(!ee)return q;ee.sort();for(var Z=0;Z<ee.length;Z++){var _=ee[Z];switch(_.object.termType){case"BlankNode":$.rootsHash[_.object.toNT()]?q=q.concat(["<"+J(_.predicate)+' rdf:nodeID="'+_.object.toNT().slice(2)+'">',"</"+J(_.predicate)+">"]):q=q.concat(["<"+J(_.predicate)+' rdf:parseType="Resource">',R(_.object,$),"</"+J(_.predicate)+">"]);break;case"NamedNode":q=q.concat(["<"+J(_.predicate)+' rdf:resource="'+w(_.object)+'"/>']);break;case"Literal":q=q.concat(["<"+J(_.predicate)+(_.object.language?' xml:lang="'+_.object.language+'"':_.object.datatype.equals(this.xsd.string)?"":' rdf:datatype="'+p(_.object.datatype.value)+'"')+">"+p(_.object.value)+"</"+J(_.predicate)+">"]);break;case"Collection":q=q.concat(["<"+J(_.predicate)+' rdf:parseType="Collection">',D(_.object,$),"</"+J(_.predicate)+">"]);break;default:throw new Error("Can't serialize object of type "+_.object.termType+" into XML")}}return q}var R=L.bind(this);function Q(H){var $=H.uri,q=$.indexOf("#");if(q<0&&this.flags.indexOf("/")<0&&(q=$.lastIndexOf("/")),q<0)throw new Error("Cannot make qname out of <"+$+">");for(var ee=q+1;ee<$.length;ee++)if(this._notNameChars.indexOf($[ee])>=0)throw new Error('Invalid character "'+$[ee]+'" cannot be in XML qname for URI: '+$);var Z=$.slice(q+1),_=$.slice(0,q+1);if(this.defaultNamespace&&this.defaultNamespace===_&&this.flags.indexOf("d")<0)return Z;var V=this.prefixes[_];return V||(V=this.makeUpPrefix(_)),i[_]=!0,V+":"+Z}var J=Q.bind(this),x=h(e),G="<rdf:RDF";this.defaultNamespace&&(G+=' xmlns="'+p(this.defaultNamespace)+'"');for(var M in i)if(i.hasOwnProperty(M)){var X=this.base&&this.flags.includes("z")?ga(this.base,M):M;G+=`
 xmlns:`+this.prefixes[M]+'="'+p(X)+'"'}G+=">";var k=[G,x,"</rdf:RDF>"];return o(k,-1)}statementsToJsonld(e){const t=this.statementsToN3(e),r=Yo.parse(t);return JSON.stringify(r,null,2)}}function lc(a){return encodeURI(a)}function uc(a){for(var e="",t,r=0;r<a.length;r++)t=a.charCodeAt(r),t>65535?e+="\\U"+("00000000"+t.toString(16)).slice(-8):t>126?e+="\\u"+("0000"+t.toString(16)).slice(-4):e+=a[r];return e}function pr(a,e,t,r,i,s){t=t||a?.value;const n=s||{};r=r||Tn;var l=void 0;try{var o=Qs(e);n.flags&&o.setFlags(n.flags);var c=e.statementsMatching(void 0,void 0,void 0,a);switch("namespaces"in e&&o.suggestNamespaces(e.namespaces),n.namespaces&&o.setNamespaces(n.namespaces),o.setBase(t),r){case hr:return l=o.statementsToXML(c),h(null,l);case qs:case Lo:return l=o.statementsToN3(c),h(null,l);case Tn:case Uo:return o.setFlags("si"+(n.flags?" "+n.flags:"")),l=o.statementsToN3(c),h(null,l);case ko:return o.setFlags("deinprstux"),l=o.statementsToNTriples(c),h(null,l);case La:return o.setFlags("si dr"+(n.flags?" "+n.flags:"")),l=o.statementsToJsonld(c),h(null,l);case Ra:case ka:return o.setFlags("deinprstux q"),l=o.statementsToNTriples(c),h(null,l);default:throw new Error("Serialize: Content-type "+r+" not supported for data write.")}}catch(p){if(i)return i(p,void 0);throw p}function h(p,m){if(i){i(p,m);return}else return m}}const oc=["blankNode","defaultGraph","literal","namedNode","quad","variable","supports"],Or={first:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",rest:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",nil:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"};function Js(a,e,t){const r=[];return t.reduce((i,s,n,l)=>{r.push(a.quad(i,a.namedNode(Or.first),l[n]));let o;return n<l.length-1?(o=a.blankNode(),r.push(a.quad(i,a.namedNode(Or.rest),o))):r.push(a.quad(i,a.namedNode(Or.rest),a.namedNode(Or.nil))),o},e),r}function St(a,e,t=0){var r=a.length;for(t<0&&(t=r+t);t<r;t++)if(a[t]===e)return t;return-1}class mr extends We{constructor(e=[],t=[],r=[],i=[],s={}){super(""),this.statements=e,this.constraints=t,this.initBindings=r,this.optional=i,re(this,"termType",gr),re(this,"classOrder",zt.Graph),re(this,"fetcher",void 0),re(this,"isVar",0),re(this,"ns",be),re(this,"rdfFactory",void 0),this.rdfFactory=s&&s.rdfFactory||Rt;for(const n of oc)this[n]=(...l)=>this.rdfFactory[n](...l)}add(e,t,r,i){return arguments.length===1&&e.forEach(s=>this.add(s.subject,s.predicate,s.object,s.graph)),this.statements.push(this.rdfFactory.quad(e,t,r,i))}addStatement(e){return this.add(e)}bnode(e){return this.rdfFactory.blankNode(e)}addAll(e){e.forEach(t=>{this.add(t.subject,t.predicate,t.object,t.graph)})}any(e,t,r,i){const s=this.anyStatementMatching(e,t,r,i);return s==null?null:e==null?s.subject:t==null?s.predicate:r==null?s.object:null}anyValue(e,t,r,i){const s=this.any(e,t,r,i);return s?s.value:void 0}anyJS(e,t,r,i){const s=this.any(e,t,r,i);return s?We.toJS(s):void 0}anyStatementMatching(e,t,r,i){let s=this.statementsMatching(e,t,r,i,!0);if(!(!s||s.length===0))return s[0]}id(e){return this.rdfFactory.id(e)}statementsMatching(e,t,r,i,s){const n=this.statements.filter(l=>(!e||e.equals(l.subject))&&(!t||t.equals(l.predicate))&&(!r||r.equals(l.object))&&(!i||i.equals(l.graph)));return s?n.length===0?[]:[n[0]]:n}bottomTypeURIs(e){let t,r,i,s,n,l,o,c;t=[];for(let h in e)if(e.hasOwnProperty(h)){for(c=e[h],o=this.each(void 0,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),this.rdfFactory.namedNode(h)),r=!0,s=0,n=o.length;s<n;s++)if(i=o[s],l=i.uri,l in e){r=!1;break}r&&(t[h]=c)}return t}collection(){return new Mt}each(e,t,r,i){const s=[];let n=this.statementsMatching(e,t,r,i,!1);if(e==null)for(let l=0,o=n.length;l<o;l++)s.push(n[l].subject);else if(t==null)for(let l=0,o=n.length;l<o;l++)s.push(n[l].predicate);else if(r==null)for(let l=0,o=n.length;l<o;l++)s.push(n[l].object);else if(i==null)for(let l=0,o=n.length;l<o;l++)s.push(new ft(n[l].graph.value));return s}equals(e){return e?this.hashString()===e.hashString():!1}findMembersNT(e){let t,r,i,s,n,l,o,c,h,p,m,w,y,N;w={},w[e.toNT()]=!0,s={},l=this.transitiveClosure(w,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!0);for(let D in l)if(l.hasOwnProperty(D)){o=this.statementsMatching(void 0,this.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),this.fromNT(D));for(let L=0,R=o.length;L<R;L++)y=o[L],s[y.subject.toNT()]=y;c=this.each(void 0,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#domain"),this.fromNT(D));for(let L=0,R=c.length;L<R;L++)for(n=c[L],h=this.statementsMatching(void 0,n),i=0,t=h.length;i<t;i++)y=h[i],s[y.subject.toNT()]=y;p=this.each(void 0,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#range"),this.fromNT(D));for(let L=0,R=p.length;L<R;L++)for(n=p[L],m=this.statementsMatching(void 0,n),N=0,r=m.length;N<r;N++)y=m[N],s[y.object.toNT()]=y}return s}findMemberURIs(e){return this.NTtoURI(this.findMembersNT(e))}findSubClassesNT(e){let t={};return t[e.toNT()]=!0,this.transitiveClosure(t,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!0)}findSuperClassesNT(e){let t={};return t[e.toNT()]=!0,this.transitiveClosure(t,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!1)}findTypesNT(e){let t,r,i,s,n,l,o,c,h;i="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",h=[],s=this.statementsMatching(e,void 0,void 0);for(let p=0,m=s.length;p<m;p++)if(c=s[p],c.predicate.uri===i)h[c.object.toNT()]=c;else{n=this.each(c.predicate,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#domain"));for(let w=0,y=n.length;w<y;w++)r=n[w],h[r.toNT()]=c}l=this.statementsMatching(void 0,void 0,e);for(let p=0,m=l.length;p<m;p++){c=l[p],o=this.each(c.predicate,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#range"));for(let w=0,y=o.length;w<y;w++)t=o[w],h[t.toNT()]=c}return this.transitiveClosure(h,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!1)}findTypeURIs(e){return this.NTtoURI(this.findTypesNT(e))}connectedStatements(e,t,r){r=r||[];let i=[e],s={},n={},l=[],o=this,c=function(h){let p=function(w){w.termType==="BlankNode"&&!s[w.value]&&(s[w.value]=!0,i.push(w))},m=o.statementsMatching(null,null,h,t).concat(o.statementsMatching(h,null,null,t));m=m.filter(function(w){if(r[w.predicate.value])return!1;let y=w.toNT();return n[y]?!1:(n[y]=!0,!0)}),m.forEach(function(w){p(w.subject),p(w.object)}),l=l.concat(m)};for(;i.length;)c(i.shift());return l}formula(e){return new mr}fromNT(e){let t,r,i;switch(e[0]){case"<":return this.sym(e.slice(1,-1));case'"':if(i=void 0,t=void 0,r=e.lastIndexOf('"'),r<e.length-1)if(e[r+1]==="@")i=e.slice(r+2);else if(e.slice(r+1,r+3)==="^^")t=this.fromNT(e.slice(r+3));else throw new Error("Can't convert string from NT: "+e);return e=e.slice(1,r),e=e.replace(/\\"/g,'"'),e=e.replace(/\\n/g,`
`),e=e.replace(/\\\\/g,"\\"),this.rdfFactory.literal(e,i||t);case"_":return this.rdfFactory.blankNode(e.slice(2));case"?":return new Sn(e.slice(1))}throw new Error("Can't convert from NT: "+e)}holds(e,t,r,i){let s;if(arguments.length===1){if(!e)return!0;if(e instanceof Array){for(s=0;s<e.length;s++)if(!this.holds(e[s]))return!1;return!0}else{if(Mo(e))return this.holds(e.subject,e.predicate,e.object,e.graph);if(e.statements)return this.holds(e.statements)}}return this.anyStatementMatching(e,t,r,i)!=null}holdsStatement(e){return this.holds(e.subject,e.predicate,e.object,e.graph)}list(e,t){if(t.rdfFactory.supports.COLLECTIONS){const r=t.rdfFactory.collection();return e.forEach(function(i){r.append(i)}),r}else{const r=t.rdfFactory.blankNode(),i=Js(t.rdfFactory,r,e);return t.addAll(i),r}}NTtoURI(e){let t,r,i={};for(t in e)e.hasOwnProperty(t)&&(r=e[t],t[0]==="<"&&(i[t.slice(1,-1)]=r));return i}serialize(e,t,r,i){return pr(r,this,e,t,void 0,i)}substitute(e){let t=this.statements.map(function(i){return i.substitute(e)});const r=new mr;return r.addAll(t),r}sym(e,t){if(t)throw new Error("This feature (kb.sym with 2 args) is removed. Do not assume prefix mappings.");return this.rdfFactory.namedNode(e)}the(e,t,r,i){return this.any(e,t,r,i)}transitiveClosure(e,t,r){let i,s,n,l,o,c,h={};Object.assign(h,e);let p={};for(;;){if(c=(function(){for(let m in h)if(h.hasOwnProperty(m))return m})(),c==null)return p;for(o=r?this.each(void 0,t,this.fromNT(c)):this.each(this.fromNT(c),t),s=0,n=o.length;s<n;s++)i=o[s],l=i.toNT(),!(l in p)&&(l in h||(h[l]=h[c]));p[c]=h[c],delete h[c]}}topTypeURIs(e){let t,r,i,s,n,l,o,c;o=[];for(i in e)if(e.hasOwnProperty(i)){for(c=e[i],n=0,l=this.each(this.rdfFactory.namedNode(i),this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf")),t=0,s=l.length;t<s;t++)if(r=l[t],r.uri!=="http://www.w3.org/2000/01/rdf-schema#Resource"){n++;break}n||(o[i]=c)}return o["http://www.w3.org/2000/01/rdf-schema#Resource"]&&delete o["http://www.w3.org/2000/01/rdf-schema#Resource"],o["http://www.w3.org/2002/07/owl#Thing"]&&delete o["http://www.w3.org/2002/07/owl#Thing"],o}toString(){return"{"+this.statements.join(`
`)+"}"}variable(e){return new Sn(e)}whether(e,t,r,i){return this.statementsMatching(e,t,r,i,!1).length}}We.fromValue=js;const Ln={xsd:be("http://www.w3.org/2001/XMLSchema#")};We.toJS=function(a){return Ya(a)?a.elements.map(We.toJS):Hs(a)?a.datatype.equals(Ln.xsd("boolean"))?a.value==="1"||a.value==="true":a.datatype.equals(Ln.xsd("dateTime"))||a.datatype.equals(Ln.xsd("date"))?new Date(a.value):a.datatype.equals(Ln.xsd("integer"))||a.datatype.equals(Ln.xsd("float"))||a.datatype.equals(Ln.xsd("decimal"))?Number(a.value):a.value:a};class cc{constructor(e,t){this.pat=new sn,this.vars=[],this.name=e,this.id=t}}function is(a,e,t,r){function i(x){var G="",M;for(M in x)x.hasOwnProperty(M)&&(G+="    "+M+" -> "+x[M]);return G}function s(x){var G="Bindings: ",M,X=x.length;for(M=0;M<X;M++)G+=i(x[M][0])+`;
	`;return G}function n(x,G,M,X){var k=M[x];if(k===void 0){if(x.isVar){var H=[];return H[x]=G,[[H,null]]}k=x}if(!k.complexType)return X.redirections[k]&&(k=X.redirections[k]),X.redirections[G]&&(G=X.redirections[G]),k.equals(G)||k.uri&&k.uri===fr?[[[],null]]:[];if(x instanceof Array)return G instanceof Array?l(x,G,M):[];throw new Error("query.js: oops - code not written yet")}function l(x,G,M,X){var k;if(x.length!==G.length)return[];if(!x.length)return[[[],null]];var H=n(x[0],G[0],M,X);if(H.length===0)return H;var $=[],q,ee=H.length,Z,_,V,K,ae,ie;for(q=0;q<ee;q++){Z=H[q][0],ie=[];for(K in Z)Z.hasOwnProperty(K)&&(ie[K]=Z[K]);for(K in M)M.hasOwnProperty(K)&&(ie[K]=M[K]);for(k=l(x.slice(1),G.slice(1),ie,X),V=k.length,_=0;_<V;_++){ae=k[_][0];for(K in Z)Z.hasOwnProperty(K)&&(ae[K]=Z[K]);$.push([ae,null])}}return $}function o(x,G){var M=G[x];return M===void 0?x:M}function c(x,G){var M={},X;for(X in x)x.hasOwnProperty(X)&&(M[X]=x[X]);for(X in G)G.hasOwnProperty(X)&&(M[X]=G[X]);return M}function h(x,G){return this.trunkBindings=G,this.originalCallback=x,this.branches=[],this}h.prototype.checkAllDone=function(){var x;for(x=0;x<this.branches.length;x++)if(!this.branches[x].done)return;this.doCallBacks(this.branches.length-1,this.trunkBindings)},h.prototype.doCallBacks=function(x,G){var M;if(x<0)return this.originalCallback(G);for(M=0;M<this.branches[x].results.length;M++)this.doCallBacks(x-1,c(G,this.branches[x].results[M]))};function p(x,G){return this.count=0,this.success=!1,this.done=!1,this.callback=x,this.onDone=G,this}p.prototype.reportMatch=function(x){this.callback(x),this.success=!0},p.prototype.reportDone=function(){this.done=!0,this.onDone!==void 0&&this.onDone()};var m=function(x){return this.count=0,this.done=!1,this.results=[],this.junction=x,x.branches.push(this),this};m.prototype.reportMatch=function(x){this.results.push(x)},m.prototype.reportDone=function(){Vt.debug("Optional branch finished - results.length = "+this.results.length),this.results.length===0&&this.results.push({}),this.done=!0,this.junction.checkAllDone()};function w(x,G,M){var X,k,H,$;for(G.nvars=0,G.index=null,X=[G.subject,G.predicate,G.object,G.why],$=[x.subjectIndex,x.predicateIndex,x.objectIndex,x.whyIndex],H=0;H<4;H++){let q=X[H];if(!(q.uri&&q.uri===fr))if(q.isVar&&M[q]===void 0)G.nvars++;else{if(q=o(X[H],M),x.redirections[x.id(q)]&&(q=x.redirections[x.id(q)]),k=$[H][x.id(q)],!k)return G.index=[],!1;(G.index===null||G.index.length>k.length)&&(G.index=k)}}return G.index===null&&(G.index=x.statements),!0}function y(x,G){return x.nvars!==G.nvars?x.nvars-G.nvars:x.index.length-G.index.length}var N=0,D=function(x,G,M,X,k,H,$){Vt.debug("Match begins, Branch count now: "+$.count+" for "+$.pattern_debug);var q=G.statements;if(q.length===0){if(Vt.debug("FOUND MATCH WITH BINDINGS:"+i(M)),G.optional.length===0)$.reportMatch(M);else{Vt.debug("OPTIONAL: "+G.optional);var ee=new h(e,M),Z=[],_;for(_=0;_<G.optional.length;_++)Z[_]=new m(ee),Z[_].pattern_debug=G.optional[_];for(_=0;_<G.optional.length;_++)Z[_].count=Z[_].count+1,D(x,G.optional[_],M,"",k,e,Z[_])}$.count--,Vt.debug("Match ends -- success , Branch count now: "+$.count+" for "+$.pattern_debug);return}var V,K,ae=q.length;if(k){var ie="match"+N++,ue=function(ne,ge){var Le=ne.uri.split("#")[0];k.nowOrWhenFetched(Le,void 0,function(pe,Ce,Me){pe||console.log("Error following link to <"+ne.uri+"> in query: "+Ce),D(x,G,M,X,k,H,$)})};for(K=0;K<ae;K++){if(V=q[K],M[V.subject]!==void 0&&M[V.subject].uri&&k&&k.getState(bn(M[V.subject].uri))==="unrequested"){ue(M[V.subject],ie);return}if(M[V.object]!==void 0&&M[V.object].uri&&k&&k.getState(bn(M[V.object].uri))==="unrequested"){ue(M[V.object],ie);return}}}R(x,G,M,X,k,H,$)},L=function(x,G){var M=!0,X,k;for(X in x)x.hasOwnProperty(X)&&G[X]&&(k=G[X].test,k&&!k(x[X])&&(M=!1));return M},R=function(x,G,M,X,k,H,$){var q=G.statements,ee=q.length,Z,_,V,K,ae,ie,ue;for(Z=0;Z<ee;Z++)ue=q[Z],w(x,ue,M);q.sort(y),ue=q[0];var ne=x.formula();ne.optional=G.optional,ne.constraints=G.constraints,ne.statements=q.slice(1),Vt.debug(X+"match2 searching "+ue.index.length+" for "+ue+"; bindings so far="+i(M));var ge,Le=ue.index.length,pe,Ce;for(ge=0;ge<Le;ge++)for(Ce=ue.index[ge],pe=l([ue.subject,ue.predicate,ue.object,ue.why],[Ce.subject,Ce.predicate,Ce.object,Ce.why],M,x),Vt.info(X+" From first: "+pe.length+": "+s(pe)),V=pe.length,_=0;_<V;_++)if(ae=[],ie=pe[_][0],!L(ie,G.constraints))Vt.debug("Branch count CS: "+$.count);else{for(K in ie)ie.hasOwnProperty(K)&&(ae[K]=ie[K]);for(K in M)M.hasOwnProperty(K)&&(ae[K]=M[K]);$.count++,D(x,ne,ae,X+"  ",k,H,$)}$.count--,Vt.debug("Match2 ends, Branch count: "+$.count+" for "+$.pattern_debug),$.count===0&&$.reportDone()},Q=this;Vt.debug("Query on "+this.statements.length);var J=new p(e,r);J.count++,a.sync?D(Q,a.pat,a.pat.initBindings,"",t,e,J):setTimeout(function(){D(Q,a.pat,a.pat.initBindings,"",t,e,J)},0)}const Ea="http://www.w3.org/2002/07/owl#";function dc(a,e,t,r){var i=a.any(e,t,void 0);return i?(a.equate(i,r),!0):!1}function hc(a,e,t,r){var i=a.any(void 0,t,r);return i?(a.equate(i,e),!0):!1}function Zs(a,e,t,r,i){a.typeCallback&&a.typeCallback(a,r,i);var s=a.classActions[a.id(r)],n=!1;if(s)for(var l=0;l<s.length;l++)n=n||s[l](a,e,t,r,i);return n}class sn extends mr{constructor(e,t={}){super(void 0,void 0,void 0,void 0,t),re(this,"updater",void 0),re(this,"namespaces",void 0),re(this,"classActions",void 0),re(this,"propertyActions",void 0),re(this,"redirections",void 0),re(this,"aliases",void 0),re(this,"HTTPRedirects",void 0),re(this,"subjectIndex",void 0),re(this,"predicateIndex",void 0),re(this,"objectIndex",void 0),re(this,"whyIndex",void 0),re(this,"index",void 0),re(this,"features",void 0),re(this,"_universalVariables",void 0),re(this,"_existentialVariables",void 0),re(this,"rdfArrayRemove",void 0),re(this,"dataCallbacks",[]),re(this,"dataRemovalCallbacks",[]),this.propertyActions={},this.classActions={},this.redirections=[],this.aliases=[],this.HTTPRedirects=[],this.subjectIndex=[],this.predicateIndex=[],this.objectIndex=[],this.whyIndex=[],this.index=[this.subjectIndex,this.predicateIndex,this.objectIndex,this.whyIndex],this.namespaces={},this.features=e||[],this.rdfArrayRemove=t.rdfArrayRemove||Ua,t.dataCallback&&(this.dataCallbacks=[t.dataCallback]),t.dataRemovalCallback&&(this.dataRemovalCallbacks=[t.dataRemovalCallback]),this.initPropertyActions(this.features)}static get defaultGraphURI(){return fr}substitute(e){var t=this.statements.map(function(i){return i.substitute(e)}),r=new sn;return r.add(t),r}addDataCallback(e){this.dataCallbacks.push(e)}addDataRemovalCallback(e){this.dataRemovalCallbacks.push(e)}applyPatch(e,t,r){var i=this,s,n=null;function l(h){if(e.delete){s=e.delete,n&&(s=s.substitute(n)),s=s.statements;var p=[],m=s.map(function(w){var y=i.statementsMatching(w.subject,w.predicate,w.object,t);return y.length===0?(p.push(w),null):y[0]});if(p.length)return r("Could not find to delete: "+p.join(`
 or `));m.map(function(w){i.remove(w)})}e.insert&&(s=e.insert,n&&(s=s.substitute(n)),s=s.statements,s.map(function(w){w.graph=t,i.add(w.subject,w.predicate,w.object,w.graph)})),h()}if(e.where){var o=new cc("patch");o.pat=e.where,o.pat.statements.map(function(h){h.graph=Vn(t.value)}),o.sync=!0;var c=[];i.query(o,function(p){c.push(p)},i.fetcher,function(){if(c.length===0)return r("No match found to be patched:"+e.where);if(c.length>1)return r("Patch ambiguous. No patch done.");n=c[0],l(r)})}else l(r)}declareExistential(e){return this._existentialVariables||(this._existentialVariables=[]),this._existentialVariables.push(e),e}initPropertyActions(e){this.propertyActions[this.rdfFactory.id(this.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"))]=[Zs],St(e,"sameAs")>=0&&(this.propertyActions[this.rdfFactory.id(this.rdfFactory.namedNode(`${Ea}sameAs`))]=[function(t,r,i,s,n){return t.equate(r,s),!0}]),St(e,"InverseFunctionalProperty")>=0&&(this.classActions[this.rdfFactory.id(this.rdfFactory.namedNode(`${Ea}InverseFunctionalProperty`))]=[function(t,r,i,s,n){return t.newPropertyAction(r,hc)}]),St(e,"FunctionalProperty")>=0&&(this.classActions[this.rdfFactory.id(this.rdfFactory.namedNode(`${Ea}FunctionalProperty`))]=[function(t,r,i,s,n){return t.newPropertyAction(r,dc)}])}addStatement(e){return this.add(e.subject,e.predicate,e.object,e.graph),this.statements.length}add(e,t,r,i){var s;if(arguments.length===1){if(e instanceof Array)for(s=0;s<e.length;s++)this.add(e[s]);else Mn(e)?this.add(e.subject,e.predicate,e.object,e.graph):Zr(e)&&this.add(e.statements);return this}var n,l;i||(i=this.fetcher?this.fetcher.appNode:this.rdfFactory.defaultGraph()),typeof e=="string"&&(e=this.rdfFactory.namedNode(e)),t=We.fromValue(t);const o=We.fromValue(r);if(i=We.fromValue(i),!$o(e))throw new Error("Subject is not a subject type");if(!qo(t))throw new Error(`Predicate ${t} is not a predicate type`);if(!Po(o))throw new Error(`Object ${o} is not an object type`);if(!Vo(i))throw new Error("Why is not a graph type");this.predicateCallback&&this.predicateCallback(this,t,i);var c=this.id(this.canon(t));n=this.propertyActions[c];var h=!1;if(n)for(s=0;s<n.length;s++)h=h||n[s](this,e,t,o,i);if(this.holds(e,t,o,i))return null;var p=[this.id(this.canon(e)),c,this.id(this.canon(o)),this.id(this.canon(i))];for(l=this.rdfFactory.quad(e,t,o,i),s=0;s<4;s++){var m=this.index[s],w=p[s];m[w]||(m[w]=[]),m[w].push(l)}this.statements.push(l);for(const y of this.dataCallbacks)y(l);return l}canon(e){if(!e)return e;const t=this.redirections[this.id(e)];if(t)return t;switch(e.termType){case Bn:return new Wt(e.value);case dn:return e;case _n:return new Qa;case $s:return e;case gr:return e;case Xn:return new Xt(e.value,e.language,e.datatype);case Fn:return new ft(e.value);case cn:return new Sn(e.value);default:throw new Error(`Term Type not recognized for canonization: ${e.termType}`)}}check(){this.checkStatementList(this.statements);for(var e=0;e<4;e++){var t=this.index[e];for(var r in t)t.hasOwnProperty(r)&&this.checkStatementList(t[r],e)}}checkStatementList(e,t){t===void 0&&(t=0);for(var r=["subject","predicate","object","why"],i=" found in "+r[t]+" index.",s,n=0;n<e.length;n++){s=e[n];for(var l=[s.subject,s.predicate,s.object,s.graph],o=function(m,w){for(var y=0;y<m.length;y++)if(m[y].subject.equals(w.subject)&&m[y].predicate.equals(w.predicate)&&m[y].object.equals(w.object)&&m[y].why.equals(w.graph))return!0},c=0;c<4;c++){var h=this.canon(l[c]),p=this.id(h);this.index[c][p]&&o(this.index[c][p],s)}if(!o(this.statements,s))throw new Error("Statement list does not statement "+s+"@"+s.graph+i)}}close(){return this}compareTerms(e,t){return Object.prototype.hasOwnProperty.call(e,"compareTerm")?e.compareTerm(t):zt[e.termType]<zt[t.termType]?-1:zt[e.termType]>zt[t.termType]?1:e.value<t.value?-1:e.value>t.value?1:0}copyTo(e,t,r){r||(r=[]);var i=this.statementsMatching(e);St(r,"two-direction")!==-1&&i.concat(this.statementsMatching(void 0,void 0,e));for(var s=0;s<i.length;s++){var n=i[s];switch(n.object.termType){case"NamedNode":this.add(t,n.predicate,n.object);break;case"Literal":case"BlankNode":case"Collection":this.add(t,n.predicate,n.object.copy(this))}St(r,"delete")!==-1&&this.remove(n)}}equate(e,t){const r=this.canon(e),i=this.canon(t);var s=this.compareTerms(r,i);return s?s<0?this.replaceWith(i,r):this.replaceWith(r,i):!0}formula(e){return new sn(e)}get length(){return this.statements.length}match(e,t,r,i){return this.statementsMatching(We.fromValue(e),We.fromValue(t),We.fromValue(r),We.fromValue(i))}mentionsURI(e){var t="<"+e+">";return!!this.subjectIndex[t]||!!this.objectIndex[t]||!!this.predicateIndex[t]}newExistential(e){if(!e)return this.bnode();var t=this.sym(e);return this.declareExistential(t)}newPropertyAction(e,t){var r=this.id(e);this.propertyActions[r]||(this.propertyActions[r]=[]),this.propertyActions[r].push(t);for(var i=this.statementsMatching(void 0,e,void 0),s=!1,n=0;n<i.length;n++)s=s||t(this,i[n].subject,e,i[n].object);return s}newUniversal(e){var t=this.sym(e);return this._universalVariables||(this._universalVariables=[]),this._universalVariables.push(t),t}variable(e){return new Sn(e)}nextSymbol(e){for(var t=0;;t++){var r=e.value+"#n"+t;if(!this.mentionsURI(r))return this.sym(r)}}query(e,t,r,i){return is.call(this,e,t,r,i)}querySync(e){var t=[];function r(n){t.push(n)}function i(){s=!0}var s=!1;if(e.sync=!0,is.call(this,e,r,null,i),!s)throw new Error("Sync query should have called done function");return t}remove(e){if(e instanceof Array){for(var t=0;t<e.length;t++)this.remove(e[t]);return this}if(Zr(e))return this.remove(e.statements);var r=this.statementsMatching(e.subject,e.predicate,e.object,e.graph);if(!r.length)throw new Error("Statement to be removed is not on store: "+e);return this.removeStatement(r[0]),this}removeDocument(e){this.removeMetadata(e);for(var t=this.statementsMatching(void 0,void 0,void 0,e).slice(),r=0;r<t.length;r++)this.removeStatement(t[r]);return this.removeMatches(e,null,null),this}removeMetadata(e){const t=this.sym("chrome://TheCurrentSession"),r="http://www.w3.org/2007/ont/link#",i=this.statementsMatching(void 0,this.sym(`${r}requestedURI`),this.rdfFactory.literal(e.value),t).map(l=>l.subject);for(var s=0;s<i.length;s++){const l=i[s];if(l!=null){let o;const c=this.any(l,this.sym(`${r}status`),null,t);if(c!=null){o=this.statementsMatching(c,this.sym(`${r}status`),null,t).slice();for(var n=0;n<o.length;n++)this.removeStatement(o[n])}const h=this.any(l,this.sym(`${r}response`),null,t);if(h!=null){o=this.statementsMatching(h,null,null,t).slice();for(var n=0;n<o.length;n++)this.removeStatement(o[n])}o=this.statementsMatching(l,null,null,t).slice();for(var n=0;n<o.length;n++)this.removeStatement(o[n])}}return this.removeMatches(this.sym(e.value),null,null,t),this}removeMany(e,t,r,i,s){for(var n=this.statementsMatching(e,t,r,i,!1),l=[],o=0;o<n.length;o++)l.push(n[o]);for(s&&(l=l.slice(0,s)),o=0;o<l.length;o++)this.remove(l[o])}removeMatches(e,t,r,i){return this.removeMany(e,t,r,i),this}removeStatement(e){for(var t=[e.subject,e.predicate,e.object,e.graph],r=0;r<4;r++){var i=this.canon(t[r]),s=this.id(i);this.index[r][s]&&this.rdfArrayRemove(this.index[r][s],e)}this.rdfArrayRemove(this.statements,e);for(const n of this.dataRemovalCallbacks)n(e);return this}removeStatements(e){for(var t=0;t<e.length;t++)this.remove(e[t]);return this}replaceWith(e,t){for(var r=this.id(e),i=this.id(t),s=function(l){var o=l[r];if(o){var c=l[i];c?l[i]=o.concat(c):l[i]=o,delete l[r]}},n=0;n<4;n++)s(this.index[n]);if(this.redirections[r]=t,e.value){if(this.aliases[i]||(this.aliases[i]=[]),this.aliases[i].push(e),this.aliases[r])for(n=0;n<this.aliases[r].length;n++)this.redirections[this.id(this.aliases[r][n])]=t,this.aliases[i].push(this.aliases[r][n]);this.add(t,this.sym("http://www.w3.org/2007/ont/link#uri"),e),this.fetcher&&this.fetcher.nowKnownAs(e,t)}return s(this.classActions),s(this.propertyActions),!0}allAliases(e){var t=this.aliases[this.id(this.canon(e))]||[];return t.push(this.canon(e)),t}sameThings(e,t){if(e.equals(t))return!0;var r=this.canon(e);if(!r)return!1;var i=this.canon(t);return i?r.value===i.value:!1}setPrefixForURI(e,t){if(!(e==="tab"&&this.namespaces.tab)&&!(e.slice(0,2)==="ns"||e.slice(0,7)==="default")){for(let r in this.namespaces)this.namespaces[r]==t&&delete this.namespaces[r];this.namespaces[e]=t}}statementsMatching(e,t,r,i,s){var n=[e,t,r,i],l=[],o=[],c=[],h,p;for(h=0;h<4;h++)l[h]=this.canon(We.fromValue(n[h])),l[h]&&(c.push(h),o[h]=this.id(l[h]));if(c.length===0)return this.statements;if(c.length===1)return h=c[0],p=this.index[h][o[h]],p&&s&&p.length>1&&(p=p.slice(0,1)),p=p||[],p;var m=1e10,w,y;for(y=0;y<c.length;y++){if(h=c[y],p=this.index[h][o[h]],!p)return[];p.length<m&&(m=p.length,w=y)}for(var N=c[w],D=this.index[N][o[N]],L=c.slice(0,w).concat(c.slice(w+1)),R=[],Q=["subject","predicate","object","why"],J=0;J<D.length;J++){var x=D[J];for(y=0;y<L.length;y++)if(h=L[y],!this.canon(x[Q[h]]).equals(l[h])){x=null;break}if(x!=null&&(R.push(x),s))break}return R}uris(e){var t=this.canon(e),r=this.aliases[this.id(t)];if(!t.value)return[];var i=[t.value];if(r)for(var s=0;s<r.length;s++)i.push(r[s].uri);return i}serialize(e,t,r,i){const s=i?.namespaces?{...this.namespaces,...i.namespaces}:{...this.namespaces};return i={...i||{},namespaces:s},pr(r,this,e,t,void 0,i)}}re(sn,"handleRDFType",void 0);sn.handleRDFType=Zs;const Nn=be("http://www.w3.org/1999/02/22-rdf-syntax-ns#");function fc(a,e,t,r){for(const i of a.statementsMatching(t,null,null,r)){const s=new Ut(e,i.predicate,i.object,r);a.remove(i),a.add(s)}for(const i of a.statementsMatching(null,t,null,r))a.remove(i),a.add(new Ut(i.subject,e,i.object,r));for(const i of a.statementsMatching(null,null,t,r))a.remove(i),a.add(new Ut(i.subject,i.predicate,e,r))}function pc(a,e){const t=Nn("nil");for(const r of a.statementsMatching(t,null,null,e)){a.remove(r);const i=new Mt;a.add(new Ut(i,r.predicate,r.object,e))}for(const r of a.statementsMatching(null,null,t,e))if(!r.predicate.sameTerm(Nn("rest"))){a.remove(r);const i=new Mt;a.add(new Ut(r.subject,r.predicate,i,e))}}function mc(a,e){function t(i,s,n){const l=a.statementsMatching(i,Nn("rest"),null,e);if(l.length!==1)throw new Error(`Bad list structure: no rest at ${i}`);const o=a.statementsMatching(i,Nn("first"),null,e);if(o.length!==1)throw new Error(`Bad list structure: rest but ${o.length} firsts at ${i}`);const h=[o[0].object].concat(s),p=n.concat(l).concat(o),m=a.statementsMatching(null,Nn("rest"),i,e);if(m.length===0){const y=new Mt(h);a.remove(p),fc(a,y,i,e);return}if(m.length!==1)throw new Error(`Bad list structure: ${m.length} pres at ${i}`);const w=m[0].subject;if(w.termType!=="BlankNode")throw new Error(`Bad list element node ${w} type: ${w.termType} `);t(w,h,p)}pc(a,e),a.statementsMatching(null,Nn("rest"),Nn("nil"),e).forEach(i=>{if(i.subject.termType!=="BlankNode")throw new Error(`Bad list element node ${i.subject} type: ${i.subject.termType} `);t(i.subject,[],[])})}function gc(a){return encodeURI(a)}var vc={encode:function(a){a=a.replace(/\r\n/g,`
`);for(var e="",t=0;t<a.length;t++){var r=a.charCodeAt(t);r<128?e+=String.fromCharCode(r):r>127&&r<2048?(e+=String.fromCharCode(r>>6|192),e+=String.fromCharCode(r&63|128)):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128),e+=String.fromCharCode(r&63|128))}return e},decode:function(a){for(var e="",t=0;t<a.length;){var r=a.charCodeAt(t);r<128?(e+=String.fromCharCode(r),t++):r>191&&r<224?(e+=String.fromCharCode((r&31)<<6|a.charCodeAt(t+1)&63),t+=2):(e+=String.fromCharCode((r&15)<<12|(a.charCodeAt(t+1)&63)<<6|a.charCodeAt(t+2)&63),t+=3)}return e}},Ca="http://www.w3.org/2000/10/swap/log#",ot=function(a){return a},ct=function(a){return a},er=function(a){if(a.length>0)throw"missing.js: oops nnonempty dict not imp";return[]},_t=function(a){return a.length},Na=function(a,e,t){if(typeof a.slice>"u")throw"@@ mising.js: No .slice function for "+a+" of type "+typeof a;return typeof t>"u"||t==null?a.slice(e):a.slice(e,t)},lr=Error("dummy error stop iteration"),Ur=function(a){return this.last=0,this.li=a,this.next=function(){if(this.last==this.li.length)throw lr;return this.li[this.last++]},this},ba=function(a,e){return a.indexOf(e)},wn=function(a,e){if(!a)throw e?"python Assertion failed: "+e:"(python) Assertion failed."},yc=function(a){return String.fromCharCode(a)};String.prototype.encode=function(a){if(a!="utf-8")throw"UTF8_converter: can only do utf-8";return vc.encode(this)};String.prototype.decode=function(a){if(a!="utf-8")throw"UTF8_converter: can only do utf-8";return this};var xa=function(a,e){return xt(e,a)},wc=null,Ec="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",ss="http://www.w3.org/1999/02/22-rdf-syntax-ns#nil",ls="http://www.w3.org/2002/07/owl#sameAs",Cc="#",Nc="http://www.w3.org/2001/XMLSchema#integer",bc="http://www.w3.org/2001/XMLSchema#double",xc="http://www.w3.org/2001/XMLSchema#decimal",Tc="http://www.w3.org/2001/XMLSchema#date",Ac="http://www.w3.org/2001/XMLSchema#dateTime",Ks=`	\r
 !"#$%&'()*.,+/;<=>?@[\\]^\`{|}~`,kn=Ks+":",Ta=new RegExp("^([-+]?[0-9]+)(\\.[0-9]+)?([eE][-+]?[0-9]+)?","g"),us=new RegExp("^[0-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9](T[0-9][0-9]:[0-9][0-9](:[0-9][0-9](\\.[0-9]*)?)?)?Z?"),Dc=new RegExp("[\\s#]"),Aa=new RegExp('[\\\\\\r\\n\\"]',"g"),Da=new RegExp("^[a-zA-Z0-9]+(-[a-zA-Z0-9]+)*","g");function Mr(a,e){var t=a.charAt(e+1);return t===""||Dc.test(t)}function Za(a,e,t,r,i,s,n,l){return new _c(a,e,t,r,i,s,n,l)}class _c{constructor(e,t,r,i,s,n,l,o){typeof t>"u"&&(t=null),typeof r>"u"&&(r=""),typeof i>"u"&&(i=null),typeof s>"u"&&(s=""),typeof l>"u"&&(l=""),typeof o>"u"&&(o=null),this._bindings=new er([]),this._flags=l,r!=""&&(wn(r.indexOf(":")>=0,"Document URI not absolute: "+r),this._bindings[""]=r+"#"),this._store=e,s&&e.setGenPrefix(s),this._thisDoc=r,this.source=e.sym(r),this.lines=0,this.statementCount=0,this.hasNil=!1,this.startOfLine=0,this.previousLine=0,this._genPrefix=s,this.keywords=new ct(["a","this","bind","has","is","of","true","false"]),this.keywordsSet=0,this._anonymousNodes=new er([]),this._variables=new er([]),this._parentVariables=new er([]),this._reason=o,this._reason2=null,i?this._baseURI=i:r?this._baseURI=r:this._baseURI=null,wn(!this._baseURI||this._baseURI.indexOf(":")>=0),this._genPrefix||(this._thisDoc?this._genPrefix=this._thisDoc+"#_g":this._genPrefix=RDFSink_uniqueURI()),t==null?this._thisDoc?this._formula=e.formula(r+"#_formula"):this._formula=e.formula():this._formula=t,this._context=this._formula,this._parentContext=null}here(e){return this._genPrefix+"_L"+this.lines+"C"+(e-this.startOfLine+1)}formula(){return this._formula}loadStream(e){return this.loadBuf(e.read())}loadBuf(e){return this.startDoc(),this.feed(e),this.endDoc()}feed(e){for(var t=e.decode("utf-8"),r=0;r>=0;){var i=this.skipSpace(t,r);if(i<0)return;var r=this.directiveOrStatement(t,i);if(r<0)throw ve(this._thisDoc,this.lines,t,i,"expected directive or statement")}}directiveOrStatement(e,t){var r=this.skipSpace(e,t);if(r<0)return r;var i=this.directive(e,r);if(i>=0)return this.checkDot(e,i);var i=this.statement(e,r);return i>=0?this.checkDot(e,i):i}tok(e,t,r){if(t.slice(r,r+1)=="@")var r=r+1;else if(St(this.keywords,e)<0)return-1;var i=r+_t(e);return t.slice(r,i)==e&&Ks.indexOf(t.charAt(i))>=0?i:-1}directive(e,t){var o=this.skipSpace(e,t);if(o<0)return o;var r=new ct([]),o=this.tok("bind",e,t);if(o>0)throw ve(this._thisDoc,this.lines,e,t,"keyword bind is obsolete: use @prefix");var o=this.tok("keywords",e,t);if(o>0){var t=this.commaSeparatedList(e,o,r,!1);if(t<0)throw ve(this._thisDoc,this.lines,e,t,"'@keywords' needs comma separated list of words");return this.setKeywords(Na(r,null,null)),t}var o=this.tok("forAll",e,t);if(o>0){var t=this.commaSeparatedList(e,o,r,!0);if(t<0)throw ve(this._thisDoc,this.lines,e,t,"Bad variable list after @forAll");var i=new Ur(r);try{for(;;){var s=i.next();(St(this._variables,s)<0||St(this._parentVariables,s)>=0)&&(this._variables[s]=this._context.newUniversal(s))}}catch(h){if(h!=lr)throw h}return t}var o=this.tok("forSome",e,t);if(o>0){var t=this.commaSeparatedList(e,o,r,this.uri_ref2);if(t<0)throw ve(this._thisDoc,this.lines,e,t,"Bad variable list after @forSome");var i=new Ur(r);try{for(;;){var s=i.next();this._context.declareExistential(s)}}catch(p){if(p!=lr)throw p}return t}var o=this.tok("prefix",e,t);if(o>=0){var n=new ct([]),t=this.qname(e,o,n);if(t<0)throw ve(this._thisDoc,this.lines,e,o,"expected qname after @prefix");var o=this.uri_ref2(e,t,n);if(o<0)throw ve(this._thisDoc,this.lines,e,t,"expected <uriref> after @prefix _qname_");var l=n[1].uri;if(this._baseURI)var l=xa(this._baseURI,l);else wn(l.indexOf(":")>=0,"With no base URI, cannot handle relative URI for NS");return wn(l.indexOf(":")>=0),this._bindings[n[0][0]]=l,this.bind(n[0][0],gc(l)),o}var o=this.tok("base",e,t);if(o>=0){var n=new ct([]),t=this.uri_ref2(e,o,n);if(t<0)throw ve(this._thisDoc,this.lines,e,o,"expected <uri> after @base ");var l=n[0].uri;if(this._baseURI)var l=xa(this._baseURI,l);else throw ve(this._thisDoc,this.lines,e,o,"With no previous base URI, cannot use relative URI in @base  <"+l+">");return wn(l.indexOf(":")>=0),this._baseURI=l,t}return-1}bind(e,t){e==""||this._store.setPrefixForURI(e,t)}setKeywords(e){e==null?this.keywordsSet=0:(this.keywords=e,this.keywordsSet=1)}startDoc(){}endDoc(){return this.hasNil&&this._store.rdfFactory.supports.COLLECTIONS&&mc(this._store,this.source),this._formula}makeStatement(e){e[0].add(e[2],e[1],e[3],this.source),(e[2].uri&&e[2].uri===ss||e[3].uri&&e[3].uri===ss)&&(this.hasNil=!0),this.statementCount+=1}statement(e,i){var r=new ct([]),i=this.object(e,i,r);if(i<0)return i;var s=this.property_list(e,i,r[0]);if(s<0)throw ve(this._thisDoc,this.lines,e,i,"expected propertylist");return s}subject(e,t,r){return this.item(e,t,r)}verb(e,t,r){var s=this.skipSpace(e,t);if(s<0)return s;var i=new ct([]),s=this.tok("has",e,t);if(s>=0){var t=this.prop(e,s,i);if(t<0)throw ve(this._thisDoc,this.lines,e,s,"expected property after 'has'");return r.push(new ot(["->",i[0]])),t}var s=this.tok("is",e,t);if(s>=0){var t=this.prop(e,s,i);if(t<0)throw ve(this._thisDoc,this.lines,e,s,"expected <property> after 'is'");var s=this.skipSpace(e,t);if(s<0)throw ve(this._thisDoc,this.lines,e,t,"End of file found, expected property after 'is'");var t=s,s=this.tok("of",e,t);if(s<0)throw ve(this._thisDoc,this.lines,e,t,"expected 'of' after 'is' <prop>");return r.push(new ot(["<-",i[0]])),s}var s=this.tok("a",e,t);if(s>=0)return r.push(new ot(["->",this._store.sym(Ec)])),s;if(e.slice(t,t+2)=="<=")return r.push(new ot(["<-",this._store.sym(Ca+"implies")])),t+2;if(e.slice(t,t+1)=="=")return e.slice(t+1,t+2)==">"?(r.push(new ot(["->",this._store.sym(Ca+"implies")])),t+2):(r.push(new ot(["->",this._store.sym(ls)])),t+1);if(e.slice(t,t+2)==":=")return r.push(new ot(["->",Ca+"becomes"])),t+2;var s=this.prop(e,t,i);if(s>=0)return r.push(new ot(["->",i[0]])),s;if(e.slice(t,t+2)==">-"||e.slice(t,t+2)=="<-")throw ve(this._thisDoc,this.lines,e,s,">- ... -> syntax is obsolete.");return-1}prop(e,t,r){return this.item(e,t,r)}item(e,t,r){return this.path(e,t,r)}blankNode(e){return this._context.bnode(e,this._reason2)}path(e,t,r){var i=this.nodeOrLiteral(e,t,r);if(i<0)return i;for(;"!^.".indexOf(e.slice(i,i+1))>=0;){var s=e.slice(i,i+1);if(s=="."&&Mr(e,i))break;var n=r.pop(),l=this.blankNode(this.here(i)),i=this.node(e,i+1,r);if(i<0)throw ve(this._thisDoc,this.lines,e,i,"EOF found in middle of path syntax");var o=r.pop();s=="^"?this.makeStatement(new ot([this._context,o,l,n])):this.makeStatement(new ot([this._context,o,n,l])),r.push(l)}return i}anonymousNode(e){var t=this._anonymousNodes[e];if(t)return t;var t=this._store.bnode(e);return this._anonymousNodes[e]=t,t}node(e,n,r,i){typeof i>"u"&&(i=null);var s=i,x=this.skipSpace(e,n);if(x<0)return x;var n=x,l=e.slice(n,n+1);if(l=="["){var o=this.here(n),x=this.skipSpace(e,n+1);if(x<0)throw ve(this._thisDoc,this.lines,e,n,"EOF after '['");if(e.slice(x,x+1)=="="){var n=x+1,c=new ct([]),x=this.objectList(e,n,c);if(x>=0){var s=c[0];if(_t(c)>1){var h=new Ur(c);try{for(;;){var p=h.next();this.makeStatement(new ot([this._context,this._store.sym(ls),s,p]))}}catch(q){if(q!=lr)throw q}}var x=this.skipSpace(e,x);if(x<0)throw ve(this._thisDoc,this.lines,e,n,"EOF when objectList expected after [ = ");if(e.slice(x,x+1)==";")var x=x+1}else throw ve(this._thisDoc,this.lines,e,n,"objectList expected after [= ")}if(s==null)var s=this.blankNode(o);var n=this.property_list(e,x,s);if(n<0)throw ve(this._thisDoc,this.lines,e,x,"property_list expected");var x=this.skipSpace(e,n);if(x<0)throw ve(this._thisDoc,this.lines,e,n,"EOF when ']' expected after [ <propertyList>");if(e.slice(x,x+1)==".")return r.push(s),x;if(e.slice(x,x+1)!="]")throw ve(this._thisDoc,this.lines,e,x,"']' expected");return r.push(s),x+1}if(l=="{"){var m=e.slice(n+1,n+2);if(m=="$"){n+=1;for(var x=n+1,w=new ct([]),y=!0;;){var n=this.skipSpace(e,x);if(n<0)throw ve(this._thisDoc,this.lines,e,n,"needed '$}', found end.");if(e.slice(n,n+2)=="$}"){var x=n+2;break}if(y)var y=!1;else if(e.slice(n,n+1)==",")n+=1;else throw ve(this._thisDoc,this.lines,e,n,"expected: ','");var N=new ct([]),x=this.item(e,n,N);if(x<0)throw ve(this._thisDoc,this.lines,e,n,"expected item in set or '$}'");w.push(N[0])}return r.push(this._store.newSet(w,this._context)),x}else{var x=n+1,D=this._parentContext;this._parentContext=this._context;var L=this._anonymousNodes,R=this._parentVariables;this._parentVariables=this._variables,this._anonymousNodes=new er([]),this._variables=this._variables.slice();var Q=this._reason2;if(this._reason2=wc,s==null)var s=this._store.formula();for(this._context=s;;){var n=this.skipSpace(e,x);if(n<0)throw ve(this._thisDoc,this.lines,e,n,"needed '}', found end.");if(e.slice(n,n+1)=="}"){var x=n+1;break}var x=this.directiveOrStatement(e,n);if(x<0)throw ve(this._thisDoc,this.lines,e,n,"expected statement or '}'")}return this._anonymousNodes=L,this._variables=this._parentVariables,this._parentVariables=R,this._context=this._parentContext,this._reason2=Q,this._parentContext=D,r.push(s.close()),x}}if(l=="("){var J=this._store.list,m=e.slice(n+1,n+2);if(m=="$"){var J=this._store.newSet;n+=1}for(var x=n+1,w=new ct([]);;){var n=this.skipSpace(e,x);if(n<0)throw ve(this._thisDoc,this.lines,e,n,"needed ')', found end.");if(e.slice(n,n+1)==")"){var x=n+1;break}var N=new ct([]),x=this.item(e,n,N);if(x<0)throw ve(this._thisDoc,this.lines,e,n,"expected item in list or ')'");w.push(N[0])}return r.push(J(w,this._context)),x}var x=this.tok("this",e,n);if(x>=0)throw ve(this._thisDoc,this.lines,e,n,"Keyword 'this' was ancient N3. Now use @forSome and @forAll keywords.");var x=this.tok("true",e,n);if(x>=0)return r.push(!0),x;var x=this.tok("false",e,n);if(x>=0)return r.push(!1),x;if(s==null){var x=this.uri_ref2(e,n,r);if(x>=0)return x}return-1}property_list(e,t,r){for(;;){var m=this.skipSpace(e,t);if(m<0)throw ve(this._thisDoc,this.lines,e,t,"EOF found when expected verb in property list");if(e.slice(m,m+2)==":-"){var t=m+2,i=new ct([]),m=this.node(e,t,i,r);if(m<0)throw ve(this._thisDoc,this.lines,e,t,"bad {} or () or [] node after :- ");var t=m;continue}var t=m,s=new ct([]),m=this.verb(e,t,s);if(m<=0)return t;var n=new ct([]),t=this.objectList(e,m,n);if(t<0)throw ve(this._thisDoc,this.lines,e,m,"objectList expected");var l=new Ur(n);try{for(;;){var o=l.next(),c=s[0],h=c[0],p=c[1];h=="->"?this.makeStatement(new ot([this._context,p,r,o])):this.makeStatement(new ot([this._context,p,o,r]))}}catch(y){if(y!=lr)throw y}var m=this.skipSpace(e,t);if(m<0)throw ve(this._thisDoc,this.lines,e,m,"EOF found in list of objects");if(e.slice(t,t+1)!=";")return t;var t=t+1}}commaSeparatedList(e,t,r,i){var s=this.skipSpace(e,t);if(s<0)throw ve(this._thisDoc,this.lines,e,s,"EOF found expecting comma sep list");if(e.charAt(s)==".")return t;if(i)var s=this.uri_ref2(e,s,r);else var s=this.bareWord(e,s,r);if(s<0)return-1;for(;;){var t=this.skipSpace(e,s);if(t<0)return t;var n=e.slice(t,t+1);if(n!=",")return n!="."?-1:t;if(i)var s=this.uri_ref2(e,t+1,r);else var s=this.bareWord(e,t+1,r);if(s<0)throw ve(this._thisDoc,this.lines,e,s,"bad list content")}}objectList(e,i,r){var i=this.object(e,i,r);if(i<0)return-1;for(;;){var s=this.skipSpace(e,i);if(s<0)throw ve(this._thisDoc,this.lines,e,s,"EOF found after object");if(e.slice(s,s+1)!=",")return s;var i=this.object(e,s+1,r);if(i<0)return i}}checkDot(e,t){var r=this.skipSpace(e,t);if(r<0)return r;if(e.slice(r,r+1)==".")return r+1;if(e.slice(r,r+1)=="}"||e.slice(r,r+1)=="]")return r;throw ve(this._thisDoc,this.lines,e,r,"expected '.' or '}' or ']' at end of statement")}uri_ref2(e,p,r){var i=new ct([]),s=this.qname(e,p,i);if(s>=0){var n=i[0],l=n[0],o=n[1];if(l==null){wn(0,"not used?");var c=this._baseURI+Cc}else{var c=this._bindings[l];if(!c){if(l=="_")return r.push(this.anonymousNode(o)),s;throw ve(this._thisDoc,this.lines,e,p,"Prefix "+l+" not bound.")}}var h=this._store.sym(c+o);return St(this._variables,h)>=0?r.push(this._variables[h]):r.push(h),s}var p=this.skipSpace(e,p);if(p<0)return-1;if(e.charAt(p)=="?"){var m=new ct([]),s=this.variable(e,p,m);return s>0?(r.push(m[0]),s):-1}else if(e.charAt(p)=="<"){for(var p=p+1,w=p;p<_t(e);){if(e.charAt(p)==">"){var y=e.slice(w,p);if(this._baseURI)var y=xa(this._baseURI,y);else wn(y.indexOf(":")>=0,"With no base URI, cannot deal with relative URIs");if(e.slice(p-1,p)=="#"&&Na(y,-1,null)!="#")var y=y+"#";var h=this._store.sym(y);return St(this._variables,h)>=0?r.push(this._variables[h]):r.push(h),p+1}var p=p+1}throw ve(this._thisDoc,this.lines,e,s,"unterminated URI reference")}else if(this.keywordsSet){var m=new ct([]),s=this.bareWord(e,p,m);if(s<0)return-1;if(St(this.keywords,m[0])>=0)throw ve(this._thisDoc,this.lines,e,p,'Keyword "'+m[0]+'" not allowed here.');return r.push(this._store.sym(this._bindings[""]+m[0])),s}else return-1}skipSpace(e,t){for(var r=` 
\r	\f\v            ​\u2028\u2029　`,i=t||0;i<e.length;i++){var s=e.charAt(i);if(r.indexOf(s)<0)if(e.charAt(i)==="#")for(;;i++){if(i===e.length)return-1;if(e.charAt(i)===`
`){this.lines=this.lines+1;break}}else return i;else e.charAt(i)===`
`&&(this.lines=this.lines+1)}return-1}variable(e,s,r){var i=this.skipSpace(e,s);if(i<0||e.slice(i,i+1)!="?")return-1;var i=i+1,s=i;if("0123456789-".indexOf(e.charAt(i))>=0)throw ve(this._thisDoc,this.lines,e,i,"Varible name can't start with '"+e.charAt(i)+"s'");for(;s<_t(e)&&kn.indexOf(e.charAt(s))<0;)var s=s+1;if(this._parentContext==null)throw ve(this._thisDoc,this.lines,e,i,"Can't use ?xxx syntax for variable in outermost level: "+e.slice(i-1,s));return r.push(this._store.variable(e.slice(i,s))),s}bareWord(e,n,r){var i=this.skipSpace(e,n);if(i<0)return-1;var s=e.charAt(i);if("0123456789-".indexOf(s)>=0||kn.indexOf(s)>=0)return-1;for(var n=i;n<_t(e);){var l=e.charAt(n);if(l==="."){if(Mr(e,n))break}else if(kn.indexOf(l)>=0)break;var n=n+1}return r.push(e.slice(i,n)),n}qname(e,i,r){var i=this.skipSpace(e,i);if(i<0)return-1;var s=e.charAt(i);if("0123456789-+".indexOf(s)>=0)return-1;if(kn.indexOf(s)<0)for(var n=s,i=i+1;i<_t(e);){var s=e.charAt(i);if(s==="."){if(Mr(e,i))break}else if(kn.indexOf(s)>=0)break;var n=n+s,i=i+1}else var n="";if(i<_t(e)&&e.charAt(i)==":"){for(var l=n,i=i+1,n="";i<_t(e);){var s=e.charAt(i);if(s==="."){if(Mr(e,i))break}else if(kn.indexOf(s)>=0)break;var n=n+s,i=i+1}return r.push(new ot([l,n])),i}else return n&&this.keywordsSet&&St(this.keywords,n)<0?(r.push(new ot(["",n])),i):-1}object(e,t,r){var i=this.subject(e,t,r);if(i>=0)return i;{var i=this.skipSpace(e,t);if(i<0)return-1;var t=i,s=null;let c=e.charAt(t);if(c=='"'||c=="'"){e.slice(t,t+3==c+c)?s=c+c+c:s=c;var t=t+_t(s),n=this.strconst(e,t,s),i=n[0],l=n[1];return r.push(this._store.literal(l)),i}else return-1}}nodeOrLiteral(e,t,r){var i=this.node(e,t,r);if(i>=0)return i;var i=this.skipSpace(e,t);if(i<0)return-1;var t=i,s=e.charAt(t);if("-+0987654321".indexOf(s)>=0){us.lastIndex=0;var n=us.exec(e.slice(t));if(n!=null){var l=n[0];i=t+l.length,l.indexOf("T")>=0?r.push(this._store.literal(l,this._store.sym(Ac))):r.push(this._store.literal(l,this._store.sym(Tc)))}else{Ta.lastIndex=0;var n=Ta.exec(e.slice(t));if(n==null)throw ve(this._thisDoc,this.lines,e,t,"Bad number or date syntax");i=t+Ta.lastIndex;var l=e.slice(t,i);l.indexOf("e")>=0?r.push(this._store.literal(parseFloat(l),this._store.sym(bc))):e.slice(t,i).indexOf(".")>=0?r.push(this._store.literal(parseFloat(l),this._store.sym(xc))):r.push(this._store.literal(parseInt(l),this._store.sym(Nc)))}return i}if(e.charAt(t)=='"'){if(e.slice(t,t+3)=='"""')var o='"""';else var o='"';var t=t+_t(o),c=null,h=this.strconst(e,t,o),i=h[0],p=h[1],m=null;if(e.slice(i,i+1)=="@"){Da.lastIndex=0;var n=Da.exec(e.slice(i+1));if(n==null)throw ve(this._thisDoc,startline,e,t,"Bad language code syntax on string literal, after @");var t=Da.lastIndex+i+1,m=e.slice(i+1,t),i=t}if(e.slice(i,i+2)=="^^")var w=new ct([]),i=this.uri_ref2(e,i+2,w),c=w[0];return r.push(this._store.literal(p,m||c)),i}else return-1}strconst(e,t,r){for(var i=t,s="",n=this.lines;i<_t(e);){var t=i+_t(r);if(e.slice(i,t)==r)return new ot([t,s]);if(e.charAt(i)=='"'){var s=s+'"',i=i+1;continue}Aa.lastIndex=0;var l=Aa.exec(e.slice(i));if(!l)throw ve(this._thisDoc,n,e,i,"Closing quote missing in string at ^ in "+e.slice(i-20,i)+"^"+e.slice(i,i+20));var t=i+Aa.lastIndex-1,s=s+e.slice(i,t),o=e.charAt(t);if(o=='"'){var i=t;continue}else if(o=="\r"){var i=t+1;continue}else if(o==`
`){if(r=='"')throw ve(this._thisDoc,n,e,t,"newline found in string literal");this.lines=this.lines+1;var s=s+o,i=t+1;this.previousLine=this.startOfLine,this.startOfLine=i}else if(o=="\\"){var i=t+1,o=e.slice(i,i+1);if(!o)throw ve(this._thisDoc,n,e,t,"unterminated string literal (2)");var c=ba('abfrtvn\\"',o);if(c>=0)var h=`a\b\f\r	\v
\\"`.charAt(c),s=s+h,i=i+1;else if(o=="u")var p=this.uEscape(e,i+1,n),i=p[0],o=p[1],s=s+o;else if(o=="U")var p=this.UEscape(e,i+1,n),i=p[0],o=p[1],s=s+o;else throw ve(this._thisDoc,this.lines,e,t,"bad escape")}}throw ve(this._thisDoc,this.lines,e,t,"unterminated string literal")}uEscape(e,t,r){for(var i=t,s=0,n=0;s<4;){var l=e.slice(i,i+1),o=l.toLowerCase(),i=i+1;if(o=="")throw ve(this._thisDoc,r,e,t,"unterminated string literal(3)");var c=ba("0123456789abcdef",o);if(c<0)throw ve(this._thisDoc,r,e,t,"bad string literal hex escape");var n=n*16+c,s=s+1}var h=String.fromCharCode(n);return new ot([i,h])}UEscape(e,t,r){for(var i=t,s=0,n="\\U";s<8;){var l=e.slice(i,i+1),o=l.toLowerCase(),i=i+1;if(o=="")throw ve(this._thisDoc,r,e,t,"unterminated string literal(3)");var c=ba("0123456789abcdef",o);if(c<0)throw ve(this._thisDoc,r,e,t,"bad string literal hex escape");var n=n+o,s=s+1}var h=yc("0x"+Na(n,2,10)-0);return new ot([i,h])}}function ve(a,e,t,r,i){let s=e+1,n="Line "+s+" of <"+a+">: Bad syntax: "+i+`
at: "`+t.slice(r,r+30)+'"',l=new SyntaxError(n,a,s);return l.lineNo=s,l.characterInFile=r,l.syntaxProblem=i,l}const Ma={...Rt,supports:{[bt.collections]:!0,[bt.defaultGraphType]:!1,[bt.equalsMethod]:!0,[bt.identity]:!1,[bt.id]:!0,[bt.reversibleId]:!1,[bt.variableType]:!0},collection(a){return new Mt(a)},id(a){return Ya(a)?`( ${a.elements.map(e=>this.id(e)).join(", ")} )`:Ho(a)?Sn.toString(a):Rt.id(a)},termToNQ(a){return a.termType===dn?Mt.toNT(a):Rt.termToNQ(a)}},Sc="modulepreload",Ic=function(a){return"/"+a},os={},el=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let o=function(c){return Promise.all(c.map(h=>Promise.resolve(h).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),l=n?.nonce||n?.getAttribute("nonce");i=o(t.map(c=>{if(c=Ic(c),c in os)return;os[c]=!0;const h=c.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${p}`))return;const m=document.createElement("link");if(m.rel=h?"stylesheet":Sc,h||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),h)return new Promise((w,y)=>{m.addEventListener("load",w),m.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(n){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=n,window.dispatchEvent(l),!l.defaultPrevented)throw n}return i.then(n=>{for(const l of n||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};function Ka(a,e){return typeof e=="string"?a.rdfFactory.literal(e):Object.prototype.hasOwnProperty.call(e,"@list")?a.rdfFactory.supports.COLLECTIONS===!0?Bc(a,e["@list"]):Fc(a,e):Object.prototype.hasOwnProperty.call(e,"@id")?ei(a,e):Object.prototype.hasOwnProperty.call(e,"@language")?a.rdfFactory.literal(e["@value"],e["@language"]):Object.prototype.hasOwnProperty.call(e,"@type")?a.rdfFactory.literal(e["@value"],a.rdfFactory.namedNode(e["@type"])):Object.prototype.hasOwnProperty.call(e,"@value")?a.rdfFactory.literal(e["@value"]):a.rdfFactory.literal(e)}function Fc(a,e){const t=e["@id"]?ei(a,e):a.rdfFactory.blankNode(),r=e["@list"].map(s=>Ka(a,s)),i=Js(a.rdfFactory,t,r);return a.addAll(i),t}function Bc(a,e){if(!Array.isArray(e))throw new TypeError("Object must be an array");return a.rdfFactory.collection(e.map(t=>Ka(a,t)))}async function tl(a,e,t){const r=t&&Object.prototype.hasOwnProperty.call(t,"termType")?t.value:t;return(await(await el(()=>import("./jsonld-sXlu9EzX.js").then(n=>n.j),[])).default.flatten(JSON.parse(a),null,{base:r})).reduce((n,l)=>nl(n,t,l),e)}function ei(a,e){return e["@id"].startsWith("_:")?a.rdfFactory.blankNode(e["@id"].substring(2)):a.rdfFactory.namedNode(e["@id"])}function nl(a,e,t){const r=t["@id"]?ei(a,t):a.rdfFactory.blankNode();for(const i of Object.keys(t)){if(i==="@id")continue;if(i=="@graph"){const n=r,l=t[i];for(let o=0;o<l.length;o++)a=nl(a,n,l[o])}const s=t[i];if(Array.isArray(s))for(let n=0;n<s.length;n++)a.addStatement(cs(a,r,i,s[n],e));else a.addStatement(cs(a,r,i,s,e))}return a}function cs(a,e,t,r,i){let s,n;return t==="@type"?(s=a.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),n=a.rdfFactory.namedNode(r)):(s=a.rdfFactory.namedNode(t),n=Ka(a,r)),a.rdfFactory.quad(e,s,n,a.rdfFactory.namedNode(i))}var _a={},tr={},ds;function Lc(){if(ds)return tr;ds=1,tr.byteLength=l,tr.toByteArray=c,tr.fromByteArray=m;for(var a=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,s=r.length;i<s;++i)a[i]=r[i],e[r.charCodeAt(i)]=i;e[45]=62,e[95]=63;function n(w){var y=w.length;if(y%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var N=w.indexOf("=");N===-1&&(N=y);var D=N===y?0:4-N%4;return[N,D]}function l(w){var y=n(w),N=y[0],D=y[1];return(N+D)*3/4-D}function o(w,y,N){return(y+N)*3/4-N}function c(w){var y,N=n(w),D=N[0],L=N[1],R=new t(o(w,D,L)),Q=0,J=L>0?D-4:D,x;for(x=0;x<J;x+=4)y=e[w.charCodeAt(x)]<<18|e[w.charCodeAt(x+1)]<<12|e[w.charCodeAt(x+2)]<<6|e[w.charCodeAt(x+3)],R[Q++]=y>>16&255,R[Q++]=y>>8&255,R[Q++]=y&255;return L===2&&(y=e[w.charCodeAt(x)]<<2|e[w.charCodeAt(x+1)]>>4,R[Q++]=y&255),L===1&&(y=e[w.charCodeAt(x)]<<10|e[w.charCodeAt(x+1)]<<4|e[w.charCodeAt(x+2)]>>2,R[Q++]=y>>8&255,R[Q++]=y&255),R}function h(w){return a[w>>18&63]+a[w>>12&63]+a[w>>6&63]+a[w&63]}function p(w,y,N){for(var D,L=[],R=y;R<N;R+=3)D=(w[R]<<16&16711680)+(w[R+1]<<8&65280)+(w[R+2]&255),L.push(h(D));return L.join("")}function m(w){for(var y,N=w.length,D=N%3,L=[],R=16383,Q=0,J=N-D;Q<J;Q+=R)L.push(p(w,Q,Q+R>J?J:Q+R));return D===1?(y=w[N-1],L.push(a[y>>2]+a[y<<4&63]+"==")):D===2&&(y=(w[N-2]<<8)+w[N-1],L.push(a[y>>10]+a[y>>4&63]+a[y<<2&63]+"=")),L.join("")}return tr}var Pr={};var hs;function kc(){return hs||(hs=1,Pr.read=function(a,e,t,r,i){var s,n,l=i*8-r-1,o=(1<<l)-1,c=o>>1,h=-7,p=t?i-1:0,m=t?-1:1,w=a[e+p];for(p+=m,s=w&(1<<-h)-1,w>>=-h,h+=l;h>0;s=s*256+a[e+p],p+=m,h-=8);for(n=s&(1<<-h)-1,s>>=-h,h+=r;h>0;n=n*256+a[e+p],p+=m,h-=8);if(s===0)s=1-c;else{if(s===o)return n?NaN:(w?-1:1)*(1/0);n=n+Math.pow(2,r),s=s-c}return(w?-1:1)*n*Math.pow(2,s-r)},Pr.write=function(a,e,t,r,i,s){var n,l,o,c=s*8-i-1,h=(1<<c)-1,p=h>>1,m=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=r?0:s-1,y=r?1:-1,N=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,n=h):(n=Math.floor(Math.log(e)/Math.LN2),e*(o=Math.pow(2,-n))<1&&(n--,o*=2),n+p>=1?e+=m/o:e+=m*Math.pow(2,1-p),e*o>=2&&(n++,o/=2),n+p>=h?(l=0,n=h):n+p>=1?(l=(e*o-1)*Math.pow(2,i),n=n+p):(l=e*Math.pow(2,p-1)*Math.pow(2,i),n=0));i>=8;a[t+w]=l&255,w+=y,l/=256,i-=8);for(n=n<<i|l,c+=i;c>0;a[t+w]=n&255,w+=y,n/=256,c-=8);a[t+w-y]|=N*128}),Pr}var fs;function Rc(){return fs||(fs=1,(function(a){const e=Lc(),t=kc(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;a.Buffer=l,a.SlowBuffer=R,a.INSPECT_MAX_BYTES=50;const i=2147483647;a.kMaxLength=i,l.TYPED_ARRAY_SUPPORT=s(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const b=new Uint8Array(1),f={foo:function(){return 42}};return Object.setPrototypeOf(f,Uint8Array.prototype),Object.setPrototypeOf(b,f),b.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function n(b){if(b>i)throw new RangeError('The value "'+b+'" is invalid for option "size"');const f=new Uint8Array(b);return Object.setPrototypeOf(f,l.prototype),f}function l(b,f,g){if(typeof b=="number"){if(typeof f=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(b)}return o(b,f,g)}l.poolSize=8192;function o(b,f,g){if(typeof b=="string")return m(b,f);if(ArrayBuffer.isView(b))return y(b);if(b==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof b);if(Re(b,ArrayBuffer)||b&&Re(b.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Re(b,SharedArrayBuffer)||b&&Re(b.buffer,SharedArrayBuffer)))return N(b,f,g);if(typeof b=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const I=b.valueOf&&b.valueOf();if(I!=null&&I!==b)return l.from(I,f,g);const j=D(b);if(j)return j;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof b[Symbol.toPrimitive]=="function")return l.from(b[Symbol.toPrimitive]("string"),f,g);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof b)}l.from=function(b,f,g){return o(b,f,g)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function c(b){if(typeof b!="number")throw new TypeError('"size" argument must be of type number');if(b<0)throw new RangeError('The value "'+b+'" is invalid for option "size"')}function h(b,f,g){return c(b),b<=0?n(b):f!==void 0?typeof g=="string"?n(b).fill(f,g):n(b).fill(f):n(b)}l.alloc=function(b,f,g){return h(b,f,g)};function p(b){return c(b),n(b<0?0:L(b)|0)}l.allocUnsafe=function(b){return p(b)},l.allocUnsafeSlow=function(b){return p(b)};function m(b,f){if((typeof f!="string"||f==="")&&(f="utf8"),!l.isEncoding(f))throw new TypeError("Unknown encoding: "+f);const g=Q(b,f)|0;let I=n(g);const j=I.write(b,f);return j!==g&&(I=I.slice(0,j)),I}function w(b){const f=b.length<0?0:L(b.length)|0,g=n(f);for(let I=0;I<f;I+=1)g[I]=b[I]&255;return g}function y(b){if(Re(b,Uint8Array)){const f=new Uint8Array(b);return N(f.buffer,f.byteOffset,f.byteLength)}return w(b)}function N(b,f,g){if(f<0||b.byteLength<f)throw new RangeError('"offset" is outside of buffer bounds');if(b.byteLength<f+(g||0))throw new RangeError('"length" is outside of buffer bounds');let I;return f===void 0&&g===void 0?I=new Uint8Array(b):g===void 0?I=new Uint8Array(b,f):I=new Uint8Array(b,f,g),Object.setPrototypeOf(I,l.prototype),I}function D(b){if(l.isBuffer(b)){const f=L(b.length)|0,g=n(f);return g.length===0||b.copy(g,0,0,f),g}if(b.length!==void 0)return typeof b.length!="number"||Dt(b.length)?n(0):w(b);if(b.type==="Buffer"&&Array.isArray(b.data))return w(b.data)}function L(b){if(b>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return b|0}function R(b){return+b!=b&&(b=0),l.alloc(+b)}l.isBuffer=function(f){return f!=null&&f._isBuffer===!0&&f!==l.prototype},l.compare=function(f,g){if(Re(f,Uint8Array)&&(f=l.from(f,f.offset,f.byteLength)),Re(g,Uint8Array)&&(g=l.from(g,g.offset,g.byteLength)),!l.isBuffer(f)||!l.isBuffer(g))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===g)return 0;let I=f.length,j=g.length;for(let W=0,te=Math.min(I,j);W<te;++W)if(f[W]!==g[W]){I=f[W],j=g[W];break}return I<j?-1:j<I?1:0},l.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(f,g){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return l.alloc(0);let I;if(g===void 0)for(g=0,I=0;I<f.length;++I)g+=f[I].length;const j=l.allocUnsafe(g);let W=0;for(I=0;I<f.length;++I){let te=f[I];if(Re(te,Uint8Array))W+te.length>j.length?(l.isBuffer(te)||(te=l.from(te)),te.copy(j,W)):Uint8Array.prototype.set.call(j,te,W);else if(l.isBuffer(te))te.copy(j,W);else throw new TypeError('"list" argument must be an Array of Buffers');W+=te.length}return j};function Q(b,f){if(l.isBuffer(b))return b.length;if(ArrayBuffer.isView(b)||Re(b,ArrayBuffer))return b.byteLength;if(typeof b!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof b);const g=b.length,I=arguments.length>2&&arguments[2]===!0;if(!I&&g===0)return 0;let j=!1;for(;;)switch(f){case"ascii":case"latin1":case"binary":return g;case"utf8":case"utf-8":return se(b).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g*2;case"hex":return g>>>1;case"base64":return Tt(b).length;default:if(j)return I?-1:se(b).length;f=(""+f).toLowerCase(),j=!0}}l.byteLength=Q;function J(b,f,g){let I=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((g===void 0||g>this.length)&&(g=this.length),g<=0)||(g>>>=0,f>>>=0,g<=f))return"";for(b||(b="utf8");;)switch(b){case"hex":return ie(this,f,g);case"utf8":case"utf-8":return Z(this,f,g);case"ascii":return K(this,f,g);case"latin1":case"binary":return ae(this,f,g);case"base64":return ee(this,f,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ue(this,f,g);default:if(I)throw new TypeError("Unknown encoding: "+b);b=(b+"").toLowerCase(),I=!0}}l.prototype._isBuffer=!0;function x(b,f,g){const I=b[f];b[f]=b[g],b[g]=I}l.prototype.swap16=function(){const f=this.length;if(f%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let g=0;g<f;g+=2)x(this,g,g+1);return this},l.prototype.swap32=function(){const f=this.length;if(f%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let g=0;g<f;g+=4)x(this,g,g+3),x(this,g+1,g+2);return this},l.prototype.swap64=function(){const f=this.length;if(f%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let g=0;g<f;g+=8)x(this,g,g+7),x(this,g+1,g+6),x(this,g+2,g+5),x(this,g+3,g+4);return this},l.prototype.toString=function(){const f=this.length;return f===0?"":arguments.length===0?Z(this,0,f):J.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(f){if(!l.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:l.compare(this,f)===0},l.prototype.inspect=function(){let f="";const g=a.INSPECT_MAX_BYTES;return f=this.toString("hex",0,g).replace(/(.{2})/g,"$1 ").trim(),this.length>g&&(f+=" ... "),"<Buffer "+f+">"},r&&(l.prototype[r]=l.prototype.inspect),l.prototype.compare=function(f,g,I,j,W){if(Re(f,Uint8Array)&&(f=l.from(f,f.offset,f.byteLength)),!l.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(g===void 0&&(g=0),I===void 0&&(I=f?f.length:0),j===void 0&&(j=0),W===void 0&&(W=this.length),g<0||I>f.length||j<0||W>this.length)throw new RangeError("out of range index");if(j>=W&&g>=I)return 0;if(j>=W)return-1;if(g>=I)return 1;if(g>>>=0,I>>>=0,j>>>=0,W>>>=0,this===f)return 0;let te=W-j,xe=I-g;const Ge=Math.min(te,xe),Pe=this.slice(j,W),He=f.slice(g,I);for(let Fe=0;Fe<Ge;++Fe)if(Pe[Fe]!==He[Fe]){te=Pe[Fe],xe=He[Fe];break}return te<xe?-1:xe<te?1:0};function G(b,f,g,I,j){if(b.length===0)return-1;if(typeof g=="string"?(I=g,g=0):g>2147483647?g=2147483647:g<-2147483648&&(g=-2147483648),g=+g,Dt(g)&&(g=j?0:b.length-1),g<0&&(g=b.length+g),g>=b.length){if(j)return-1;g=b.length-1}else if(g<0)if(j)g=0;else return-1;if(typeof f=="string"&&(f=l.from(f,I)),l.isBuffer(f))return f.length===0?-1:M(b,f,g,I,j);if(typeof f=="number")return f=f&255,typeof Uint8Array.prototype.indexOf=="function"?j?Uint8Array.prototype.indexOf.call(b,f,g):Uint8Array.prototype.lastIndexOf.call(b,f,g):M(b,[f],g,I,j);throw new TypeError("val must be string, number or Buffer")}function M(b,f,g,I,j){let W=1,te=b.length,xe=f.length;if(I!==void 0&&(I=String(I).toLowerCase(),I==="ucs2"||I==="ucs-2"||I==="utf16le"||I==="utf-16le")){if(b.length<2||f.length<2)return-1;W=2,te/=2,xe/=2,g/=2}function Ge(He,Fe){return W===1?He[Fe]:He.readUInt16BE(Fe*W)}let Pe;if(j){let He=-1;for(Pe=g;Pe<te;Pe++)if(Ge(b,Pe)===Ge(f,He===-1?0:Pe-He)){if(He===-1&&(He=Pe),Pe-He+1===xe)return He*W}else He!==-1&&(Pe-=Pe-He),He=-1}else for(g+xe>te&&(g=te-xe),Pe=g;Pe>=0;Pe--){let He=!0;for(let Fe=0;Fe<xe;Fe++)if(Ge(b,Pe+Fe)!==Ge(f,Fe)){He=!1;break}if(He)return Pe}return-1}l.prototype.includes=function(f,g,I){return this.indexOf(f,g,I)!==-1},l.prototype.indexOf=function(f,g,I){return G(this,f,g,I,!0)},l.prototype.lastIndexOf=function(f,g,I){return G(this,f,g,I,!1)};function X(b,f,g,I){g=Number(g)||0;const j=b.length-g;I?(I=Number(I),I>j&&(I=j)):I=j;const W=f.length;I>W/2&&(I=W/2);let te;for(te=0;te<I;++te){const xe=parseInt(f.substr(te*2,2),16);if(Dt(xe))return te;b[g+te]=xe}return te}function k(b,f,g,I){return Oe(se(f,b.length-g),b,g,I)}function H(b,f,g,I){return Oe(Ie(f),b,g,I)}function $(b,f,g,I){return Oe(Tt(f),b,g,I)}function q(b,f,g,I){return Oe(st(f,b.length-g),b,g,I)}l.prototype.write=function(f,g,I,j){if(g===void 0)j="utf8",I=this.length,g=0;else if(I===void 0&&typeof g=="string")j=g,I=this.length,g=0;else if(isFinite(g))g=g>>>0,isFinite(I)?(I=I>>>0,j===void 0&&(j="utf8")):(j=I,I=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const W=this.length-g;if((I===void 0||I>W)&&(I=W),f.length>0&&(I<0||g<0)||g>this.length)throw new RangeError("Attempt to write outside buffer bounds");j||(j="utf8");let te=!1;for(;;)switch(j){case"hex":return X(this,f,g,I);case"utf8":case"utf-8":return k(this,f,g,I);case"ascii":case"latin1":case"binary":return H(this,f,g,I);case"base64":return $(this,f,g,I);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,f,g,I);default:if(te)throw new TypeError("Unknown encoding: "+j);j=(""+j).toLowerCase(),te=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ee(b,f,g){return f===0&&g===b.length?e.fromByteArray(b):e.fromByteArray(b.slice(f,g))}function Z(b,f,g){g=Math.min(b.length,g);const I=[];let j=f;for(;j<g;){const W=b[j];let te=null,xe=W>239?4:W>223?3:W>191?2:1;if(j+xe<=g){let Ge,Pe,He,Fe;switch(xe){case 1:W<128&&(te=W);break;case 2:Ge=b[j+1],(Ge&192)===128&&(Fe=(W&31)<<6|Ge&63,Fe>127&&(te=Fe));break;case 3:Ge=b[j+1],Pe=b[j+2],(Ge&192)===128&&(Pe&192)===128&&(Fe=(W&15)<<12|(Ge&63)<<6|Pe&63,Fe>2047&&(Fe<55296||Fe>57343)&&(te=Fe));break;case 4:Ge=b[j+1],Pe=b[j+2],He=b[j+3],(Ge&192)===128&&(Pe&192)===128&&(He&192)===128&&(Fe=(W&15)<<18|(Ge&63)<<12|(Pe&63)<<6|He&63,Fe>65535&&Fe<1114112&&(te=Fe))}}te===null?(te=65533,xe=1):te>65535&&(te-=65536,I.push(te>>>10&1023|55296),te=56320|te&1023),I.push(te),j+=xe}return V(I)}const _=4096;function V(b){const f=b.length;if(f<=_)return String.fromCharCode.apply(String,b);let g="",I=0;for(;I<f;)g+=String.fromCharCode.apply(String,b.slice(I,I+=_));return g}function K(b,f,g){let I="";g=Math.min(b.length,g);for(let j=f;j<g;++j)I+=String.fromCharCode(b[j]&127);return I}function ae(b,f,g){let I="";g=Math.min(b.length,g);for(let j=f;j<g;++j)I+=String.fromCharCode(b[j]);return I}function ie(b,f,g){const I=b.length;(!f||f<0)&&(f=0),(!g||g<0||g>I)&&(g=I);let j="";for(let W=f;W<g;++W)j+=Zt[b[W]];return j}function ue(b,f,g){const I=b.slice(f,g);let j="";for(let W=0;W<I.length-1;W+=2)j+=String.fromCharCode(I[W]+I[W+1]*256);return j}l.prototype.slice=function(f,g){const I=this.length;f=~~f,g=g===void 0?I:~~g,f<0?(f+=I,f<0&&(f=0)):f>I&&(f=I),g<0?(g+=I,g<0&&(g=0)):g>I&&(g=I),g<f&&(g=f);const j=this.subarray(f,g);return Object.setPrototypeOf(j,l.prototype),j};function ne(b,f,g){if(b%1!==0||b<0)throw new RangeError("offset is not uint");if(b+f>g)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(f,g,I){f=f>>>0,g=g>>>0,I||ne(f,g,this.length);let j=this[f],W=1,te=0;for(;++te<g&&(W*=256);)j+=this[f+te]*W;return j},l.prototype.readUintBE=l.prototype.readUIntBE=function(f,g,I){f=f>>>0,g=g>>>0,I||ne(f,g,this.length);let j=this[f+--g],W=1;for(;g>0&&(W*=256);)j+=this[f+--g]*W;return j},l.prototype.readUint8=l.prototype.readUInt8=function(f,g){return f=f>>>0,g||ne(f,1,this.length),this[f]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(f,g){return f=f>>>0,g||ne(f,2,this.length),this[f]|this[f+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(f,g){return f=f>>>0,g||ne(f,2,this.length),this[f]<<8|this[f+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(f,g){return f=f>>>0,g||ne(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+this[f+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(f,g){return f=f>>>0,g||ne(f,4,this.length),this[f]*16777216+(this[f+1]<<16|this[f+2]<<8|this[f+3])},l.prototype.readBigUInt64LE=Et(function(f){f=f>>>0,ke(f,"offset");const g=this[f],I=this[f+7];(g===void 0||I===void 0)&&_e(f,this.length-8);const j=g+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24,W=this[++f]+this[++f]*2**8+this[++f]*2**16+I*2**24;return BigInt(j)+(BigInt(W)<<BigInt(32))}),l.prototype.readBigUInt64BE=Et(function(f){f=f>>>0,ke(f,"offset");const g=this[f],I=this[f+7];(g===void 0||I===void 0)&&_e(f,this.length-8);const j=g*2**24+this[++f]*2**16+this[++f]*2**8+this[++f],W=this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+I;return(BigInt(j)<<BigInt(32))+BigInt(W)}),l.prototype.readIntLE=function(f,g,I){f=f>>>0,g=g>>>0,I||ne(f,g,this.length);let j=this[f],W=1,te=0;for(;++te<g&&(W*=256);)j+=this[f+te]*W;return W*=128,j>=W&&(j-=Math.pow(2,8*g)),j},l.prototype.readIntBE=function(f,g,I){f=f>>>0,g=g>>>0,I||ne(f,g,this.length);let j=g,W=1,te=this[f+--j];for(;j>0&&(W*=256);)te+=this[f+--j]*W;return W*=128,te>=W&&(te-=Math.pow(2,8*g)),te},l.prototype.readInt8=function(f,g){return f=f>>>0,g||ne(f,1,this.length),this[f]&128?(255-this[f]+1)*-1:this[f]},l.prototype.readInt16LE=function(f,g){f=f>>>0,g||ne(f,2,this.length);const I=this[f]|this[f+1]<<8;return I&32768?I|4294901760:I},l.prototype.readInt16BE=function(f,g){f=f>>>0,g||ne(f,2,this.length);const I=this[f+1]|this[f]<<8;return I&32768?I|4294901760:I},l.prototype.readInt32LE=function(f,g){return f=f>>>0,g||ne(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},l.prototype.readInt32BE=function(f,g){return f=f>>>0,g||ne(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},l.prototype.readBigInt64LE=Et(function(f){f=f>>>0,ke(f,"offset");const g=this[f],I=this[f+7];(g===void 0||I===void 0)&&_e(f,this.length-8);const j=this[f+4]+this[f+5]*2**8+this[f+6]*2**16+(I<<24);return(BigInt(j)<<BigInt(32))+BigInt(g+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24)}),l.prototype.readBigInt64BE=Et(function(f){f=f>>>0,ke(f,"offset");const g=this[f],I=this[f+7];(g===void 0||I===void 0)&&_e(f,this.length-8);const j=(g<<24)+this[++f]*2**16+this[++f]*2**8+this[++f];return(BigInt(j)<<BigInt(32))+BigInt(this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+I)}),l.prototype.readFloatLE=function(f,g){return f=f>>>0,g||ne(f,4,this.length),t.read(this,f,!0,23,4)},l.prototype.readFloatBE=function(f,g){return f=f>>>0,g||ne(f,4,this.length),t.read(this,f,!1,23,4)},l.prototype.readDoubleLE=function(f,g){return f=f>>>0,g||ne(f,8,this.length),t.read(this,f,!0,52,8)},l.prototype.readDoubleBE=function(f,g){return f=f>>>0,g||ne(f,8,this.length),t.read(this,f,!1,52,8)};function ge(b,f,g,I,j,W){if(!l.isBuffer(b))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>j||f<W)throw new RangeError('"value" argument is out of bounds');if(g+I>b.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(f,g,I,j){if(f=+f,g=g>>>0,I=I>>>0,!j){const xe=Math.pow(2,8*I)-1;ge(this,f,g,I,xe,0)}let W=1,te=0;for(this[g]=f&255;++te<I&&(W*=256);)this[g+te]=f/W&255;return g+I},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(f,g,I,j){if(f=+f,g=g>>>0,I=I>>>0,!j){const xe=Math.pow(2,8*I)-1;ge(this,f,g,I,xe,0)}let W=I-1,te=1;for(this[g+W]=f&255;--W>=0&&(te*=256);)this[g+W]=f/te&255;return g+I},l.prototype.writeUint8=l.prototype.writeUInt8=function(f,g,I){return f=+f,g=g>>>0,I||ge(this,f,g,1,255,0),this[g]=f&255,g+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(f,g,I){return f=+f,g=g>>>0,I||ge(this,f,g,2,65535,0),this[g]=f&255,this[g+1]=f>>>8,g+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(f,g,I){return f=+f,g=g>>>0,I||ge(this,f,g,2,65535,0),this[g]=f>>>8,this[g+1]=f&255,g+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(f,g,I){return f=+f,g=g>>>0,I||ge(this,f,g,4,4294967295,0),this[g+3]=f>>>24,this[g+2]=f>>>16,this[g+1]=f>>>8,this[g]=f&255,g+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(f,g,I){return f=+f,g=g>>>0,I||ge(this,f,g,4,4294967295,0),this[g]=f>>>24,this[g+1]=f>>>16,this[g+2]=f>>>8,this[g+3]=f&255,g+4};function Le(b,f,g,I,j){De(f,I,j,b,g,7);let W=Number(f&BigInt(4294967295));b[g++]=W,W=W>>8,b[g++]=W,W=W>>8,b[g++]=W,W=W>>8,b[g++]=W;let te=Number(f>>BigInt(32)&BigInt(4294967295));return b[g++]=te,te=te>>8,b[g++]=te,te=te>>8,b[g++]=te,te=te>>8,b[g++]=te,g}function pe(b,f,g,I,j){De(f,I,j,b,g,7);let W=Number(f&BigInt(4294967295));b[g+7]=W,W=W>>8,b[g+6]=W,W=W>>8,b[g+5]=W,W=W>>8,b[g+4]=W;let te=Number(f>>BigInt(32)&BigInt(4294967295));return b[g+3]=te,te=te>>8,b[g+2]=te,te=te>>8,b[g+1]=te,te=te>>8,b[g]=te,g+8}l.prototype.writeBigUInt64LE=Et(function(f,g=0){return Le(this,f,g,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=Et(function(f,g=0){return pe(this,f,g,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(f,g,I,j){if(f=+f,g=g>>>0,!j){const Ge=Math.pow(2,8*I-1);ge(this,f,g,I,Ge-1,-Ge)}let W=0,te=1,xe=0;for(this[g]=f&255;++W<I&&(te*=256);)f<0&&xe===0&&this[g+W-1]!==0&&(xe=1),this[g+W]=(f/te>>0)-xe&255;return g+I},l.prototype.writeIntBE=function(f,g,I,j){if(f=+f,g=g>>>0,!j){const Ge=Math.pow(2,8*I-1);ge(this,f,g,I,Ge-1,-Ge)}let W=I-1,te=1,xe=0;for(this[g+W]=f&255;--W>=0&&(te*=256);)f<0&&xe===0&&this[g+W+1]!==0&&(xe=1),this[g+W]=(f/te>>0)-xe&255;return g+I},l.prototype.writeInt8=function(f,g,I){return f=+f,g=g>>>0,I||ge(this,f,g,1,127,-128),f<0&&(f=255+f+1),this[g]=f&255,g+1},l.prototype.writeInt16LE=function(f,g,I){return f=+f,g=g>>>0,I||ge(this,f,g,2,32767,-32768),this[g]=f&255,this[g+1]=f>>>8,g+2},l.prototype.writeInt16BE=function(f,g,I){return f=+f,g=g>>>0,I||ge(this,f,g,2,32767,-32768),this[g]=f>>>8,this[g+1]=f&255,g+2},l.prototype.writeInt32LE=function(f,g,I){return f=+f,g=g>>>0,I||ge(this,f,g,4,2147483647,-2147483648),this[g]=f&255,this[g+1]=f>>>8,this[g+2]=f>>>16,this[g+3]=f>>>24,g+4},l.prototype.writeInt32BE=function(f,g,I){return f=+f,g=g>>>0,I||ge(this,f,g,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[g]=f>>>24,this[g+1]=f>>>16,this[g+2]=f>>>8,this[g+3]=f&255,g+4},l.prototype.writeBigInt64LE=Et(function(f,g=0){return Le(this,f,g,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=Et(function(f,g=0){return pe(this,f,g,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ce(b,f,g,I,j,W){if(g+I>b.length)throw new RangeError("Index out of range");if(g<0)throw new RangeError("Index out of range")}function Me(b,f,g,I,j){return f=+f,g=g>>>0,j||Ce(b,f,g,4),t.write(b,f,g,I,23,4),g+4}l.prototype.writeFloatLE=function(f,g,I){return Me(this,f,g,!0,I)},l.prototype.writeFloatBE=function(f,g,I){return Me(this,f,g,!1,I)};function Je(b,f,g,I,j){return f=+f,g=g>>>0,j||Ce(b,f,g,8),t.write(b,f,g,I,52,8),g+8}l.prototype.writeDoubleLE=function(f,g,I){return Je(this,f,g,!0,I)},l.prototype.writeDoubleBE=function(f,g,I){return Je(this,f,g,!1,I)},l.prototype.copy=function(f,g,I,j){if(!l.isBuffer(f))throw new TypeError("argument should be a Buffer");if(I||(I=0),!j&&j!==0&&(j=this.length),g>=f.length&&(g=f.length),g||(g=0),j>0&&j<I&&(j=I),j===I||f.length===0||this.length===0)return 0;if(g<0)throw new RangeError("targetStart out of bounds");if(I<0||I>=this.length)throw new RangeError("Index out of range");if(j<0)throw new RangeError("sourceEnd out of bounds");j>this.length&&(j=this.length),f.length-g<j-I&&(j=f.length-g+I);const W=j-I;return this===f&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(g,I,j):Uint8Array.prototype.set.call(f,this.subarray(I,j),g),W},l.prototype.fill=function(f,g,I,j){if(typeof f=="string"){if(typeof g=="string"?(j=g,g=0,I=this.length):typeof I=="string"&&(j=I,I=this.length),j!==void 0&&typeof j!="string")throw new TypeError("encoding must be a string");if(typeof j=="string"&&!l.isEncoding(j))throw new TypeError("Unknown encoding: "+j);if(f.length===1){const te=f.charCodeAt(0);(j==="utf8"&&te<128||j==="latin1")&&(f=te)}}else typeof f=="number"?f=f&255:typeof f=="boolean"&&(f=Number(f));if(g<0||this.length<g||this.length<I)throw new RangeError("Out of range index");if(I<=g)return this;g=g>>>0,I=I===void 0?this.length:I>>>0,f||(f=0);let W;if(typeof f=="number")for(W=g;W<I;++W)this[W]=f;else{const te=l.isBuffer(f)?f:l.from(f,j),xe=te.length;if(xe===0)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(W=0;W<I-g;++W)this[W+g]=te[W%xe]}return this};const Ae={};function qe(b,f,g){Ae[b]=class extends g{constructor(){super(),Object.defineProperty(this,"message",{value:f.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${b}]`,this.stack,delete this.name}get code(){return b}set code(j){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:j,writable:!0})}toString(){return`${this.name} [${b}]: ${this.message}`}}}qe("ERR_BUFFER_OUT_OF_BOUNDS",function(b){return b?`${b} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),qe("ERR_INVALID_ARG_TYPE",function(b,f){return`The "${b}" argument must be of type number. Received type ${typeof f}`},TypeError),qe("ERR_OUT_OF_RANGE",function(b,f,g){let I=`The value of "${b}" is out of range.`,j=g;return Number.isInteger(g)&&Math.abs(g)>2**32?j=dt(String(g)):typeof g=="bigint"&&(j=String(g),(g>BigInt(2)**BigInt(32)||g<-(BigInt(2)**BigInt(32)))&&(j=dt(j)),j+="n"),I+=` It must be ${f}. Received ${j}`,I},RangeError);function dt(b){let f="",g=b.length;const I=b[0]==="-"?1:0;for(;g>=I+4;g-=3)f=`_${b.slice(g-3,g)}${f}`;return`${b.slice(0,g)}${f}`}function at(b,f,g){ke(f,"offset"),(b[f]===void 0||b[f+g]===void 0)&&_e(f,b.length-(g+1))}function De(b,f,g,I,j,W){if(b>g||b<f){const te=typeof f=="bigint"?"n":"";let xe;throw f===0||f===BigInt(0)?xe=`>= 0${te} and < 2${te} ** ${(W+1)*8}${te}`:xe=`>= -(2${te} ** ${(W+1)*8-1}${te}) and < 2 ** ${(W+1)*8-1}${te}`,new Ae.ERR_OUT_OF_RANGE("value",xe,b)}at(I,j,W)}function ke(b,f){if(typeof b!="number")throw new Ae.ERR_INVALID_ARG_TYPE(f,"number",b)}function _e(b,f,g){throw Math.floor(b)!==b?(ke(b,g),new Ae.ERR_OUT_OF_RANGE("offset","an integer",b)):f<0?new Ae.ERR_BUFFER_OUT_OF_BOUNDS:new Ae.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${f}`,b)}const wt=/[^+/0-9A-Za-z-_]/g;function Ve(b){if(b=b.split("=")[0],b=b.trim().replace(wt,""),b.length<2)return"";for(;b.length%4!==0;)b=b+"=";return b}function se(b,f){f=f||1/0;let g;const I=b.length;let j=null;const W=[];for(let te=0;te<I;++te){if(g=b.charCodeAt(te),g>55295&&g<57344){if(!j){if(g>56319){(f-=3)>-1&&W.push(239,191,189);continue}else if(te+1===I){(f-=3)>-1&&W.push(239,191,189);continue}j=g;continue}if(g<56320){(f-=3)>-1&&W.push(239,191,189),j=g;continue}g=(j-55296<<10|g-56320)+65536}else j&&(f-=3)>-1&&W.push(239,191,189);if(j=null,g<128){if((f-=1)<0)break;W.push(g)}else if(g<2048){if((f-=2)<0)break;W.push(g>>6|192,g&63|128)}else if(g<65536){if((f-=3)<0)break;W.push(g>>12|224,g>>6&63|128,g&63|128)}else if(g<1114112){if((f-=4)<0)break;W.push(g>>18|240,g>>12&63|128,g>>6&63|128,g&63|128)}else throw new Error("Invalid code point")}return W}function Ie(b){const f=[];for(let g=0;g<b.length;++g)f.push(b.charCodeAt(g)&255);return f}function st(b,f){let g,I,j;const W=[];for(let te=0;te<b.length&&!((f-=2)<0);++te)g=b.charCodeAt(te),I=g>>8,j=g%256,W.push(j),W.push(I);return W}function Tt(b){return e.toByteArray(Ve(b))}function Oe(b,f,g,I){let j;for(j=0;j<I&&!(j+g>=f.length||j>=b.length);++j)f[j+g]=b[j];return j}function Re(b,f){return b instanceof f||b!=null&&b.constructor!=null&&b.constructor.name!=null&&b.constructor.name===f.name}function Dt(b){return b!==b}const Zt=(function(){const b="0123456789abcdef",f=new Array(256);for(let g=0;g<16;++g){const I=g*16;for(let j=0;j<16;++j)f[I+j]=b[g]+b[j]}return f})();function Et(b){return typeof BigInt>"u"?fn:b}function fn(){throw new Error("BigInt not supported")}})(_a)),_a}var Oc=Rc();const nr="http://www.w3.org/1999/02/22-rdf-syntax-ns#",rr="http://www.w3.org/2001/XMLSchema#",$r="http://www.w3.org/2000/10/swap/",kt={xsd:{decimal:`${rr}decimal`,boolean:`${rr}boolean`,double:`${rr}double`,integer:`${rr}integer`,string:`${rr}string`},rdf:{type:`${nr}type`,nil:`${nr}nil`,first:`${nr}first`,rest:`${nr}rest`,langString:`${nr}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${$r}reify#forSome`,forAll:`${$r}reify#forAll`},log:{implies:`${$r}log#implies`,isImpliedBy:`${$r}log#isImpliedBy`}},{xsd:qr}=kt,Uc=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,ps={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},Mc=/[\x00-\x20<>\\"\{\}\|\^\`]/,Pc={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},$c=/$0^/;class qc{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,e=e||{},this._isImpliedBy=e.isImpliedBy,this._lineMode=!!e.lineMode){this._n3Mode=!1;for(const t in this)!(t in Pc)&&this[t]instanceof RegExp&&(this[t]=$c)}else this._n3Mode=e.n3!==!1;this.comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,t){let r=this._input,i=r.length;for(;;){let l,o;for(;l=this._newline.exec(r);)this.comments&&(o=this._comment.exec(l[0]))&&s("comment",o[1],"",this._line,l[0].length),r=r.substr(l[0].length,r.length),i=r.length,this._line++;if(!l&&(l=this._whitespace.exec(r))&&(r=r.substr(l[0].length,r.length)),this._endOfFile.test(r))return t&&(this.comments&&(o=this._comment.exec(r))&&s("comment",o[1],"",this._line,r.length),r=null,s("eof","","",this._line,0)),this._input=r;const c=this._line,h=r[0];let p="",m="",w="",y=null,N=0,D=!1;switch(h){case"^":if(r.length<3)break;if(r[1]==="^"){if(this._previousMarker="^^",r=r.substr(2),r[0]!=="<"){D=!0;break}}else{this._n3Mode&&(N=1,p="^");break}case"<":if(y=this._unescapedIri.exec(r))p="IRI",m=y[1];else if(y=this._iri.exec(r)){if(m=this._unescape(y[1]),m===null||Mc.test(m))return n(this);p="IRI"}else r.length>1&&r[1]==="<"?(p="<<",N=2):this._n3Mode&&r.length>1&&r[1]==="="&&(N=2,this._isImpliedBy?(p="abbreviation",m="<"):(p="inverse",m=">"));break;case">":r.length>1&&r[1]===">"&&(p=">>",N=2);break;case"_":((y=this._blank.exec(r))||t&&(y=this._blank.exec(`${r} `)))&&(p="blank",w="_",m=y[1]);break;case'"':if(y=this._simpleQuotedString.exec(r))m=y[1];else if({value:m,matchLength:N}=this._parseLiteral(r),m===null)return n(this);(y!==null||N!==0)&&(p="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(y=this._simpleApostropheString.exec(r))m=y[1];else if({value:m,matchLength:N}=this._parseLiteral(r),m===null)return n(this);(y!==null||N!==0)&&(p="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(y=this._variable.exec(r))&&(p="var",m=y[0]);break;case"@":this._previousMarker==="literal"&&(y=this._langcode.exec(r))?(p="langcode",m=y[1]):(y=this._keyword.exec(r))&&(p=y[0]);break;case".":if(r.length===1?t:r[1]<"0"||r[1]>"9"){p=".",N=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(y=this._number.exec(r)||t&&(y=this._number.exec(`${r} `)))&&(p="literal",m=y[0],w=typeof y[1]=="string"?qr.double:typeof y[2]=="string"?qr.decimal:qr.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(y=this._sparqlKeyword.exec(r))?p=y[0].toUpperCase():D=!0;break;case"f":case"t":(y=this._boolean.exec(r))?(p="literal",m=y[0],w=qr.boolean):D=!0;break;case"a":(y=this._shortPredicates.exec(r))?(p="abbreviation",m="a"):D=!0;break;case"=":this._n3Mode&&r.length>1&&(p="abbreviation",r[1]!==">"?(N=1,m="="):(N=2,m=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(N=1,p=h);break;case"{":!this._lineMode&&r.length>=2&&(r[1]==="|"?(p="{|",N=2):(p=h,N=1));break;case"|":r.length>=2&&r[1]==="}"&&(p="|}",N=2);break;default:D=!0}if(D&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(y=this._prefix.exec(r))?(p="prefix",m=y[1]||""):((y=this._prefixed.exec(r))||t&&(y=this._prefixed.exec(`${r} `)))&&(p="prefixed",w=y[1]||"",m=this._unescape(y[2]))),this._previousMarker==="^^")switch(p){case"prefixed":p="type";break;case"IRI":p="typeIRI";break;default:p=""}if(!p)return t||!/^'''|^"""/.test(r)&&/\n|\r/.test(r)?n(this):this._input=r;const L=N||y[0].length,R=s(p,m,w,c,L);this.previousToken=R,this._previousMarker=p,r=r.substr(L,r.length)}function s(l,o,c,h,p){const m=r?i-r.length:i,w=m+p,y={type:l,value:o,prefix:c,line:h,start:m,end:w};return e(null,y),y}function n(l){e(l._syntaxError(/^\S*/.exec(r)[0]))}}_unescape(e){let t=!1;const r=e.replace(Uc,(i,s,n,l)=>{if(typeof s=="string")return String.fromCharCode(Number.parseInt(s,16));if(typeof n=="string"){let o=Number.parseInt(n,16);return o<=65535?String.fromCharCode(Number.parseInt(n,16)):String.fromCharCode(55296+((o-=65536)>>10),56320+(o&1023))}return l in ps?ps[l]:(t=!0,"")});return t?null:r}_parseLiteral(e){if(e.length>=3){const t=e.match(/^(?:"""|"|'''|'|)/)[0],r=t.length;let i=Math.max(this._literalClosingPos,r);for(;(i=e.indexOf(t,i))>0;){let s=0;for(;e[i-s-1]==="\\";)s++;if(s%2===0){const n=e.substring(r,i),l=n.split(/\r\n|\r|\n/).length-1,o=i+r;if(r===1&&l!==0||r===3&&this._lineMode)break;return this._line+=l,{value:this._unescape(n),matchLength:o}}i++}this._literalClosingPos=e.length-r+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const t=new Error(`Unexpected "${e}" on line ${this._line}.`);return t.context={token:void 0,line:this._line,previousToken:this.previousToken},t}_readStartingBom(e){return e.startsWith("\uFEFF")?e.substr(1):e}tokenize(e,t){if(this._line=1,typeof e=="string")if(this._input=this._readStartingBom(e),typeof t=="function")queueMicrotask(()=>this._tokenizeToEnd(t,!0));else{const r=[];let i;if(this._tokenizeToEnd((s,n)=>s?i=s:r.push(n),!0),i)throw i;return r}else this._pendingBuffer=null,typeof e.setEncoding=="function"&&e.setEncoding("utf8"),e.on("data",r=>{this._input!==null&&r.length!==0&&(this._pendingBuffer&&(r=Oc.Buffer.concat([this._pendingBuffer,r]),this._pendingBuffer=null),r[r.length-1]&128?this._pendingBuffer=r:(typeof this._input>"u"?this._input=this._readStartingBom(typeof r=="string"?r:r.toString()):this._input+=r,this._tokenizeToEnd(t,!1)))}),e.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(t,!0)}),e.on("error",t)}}const{rdf:Hc,xsd:$n}=kt;let vr,jc=0;const Vc={namedNode:il,blankNode:sl,variable:ul,literal:ll,defaultGraph:Wc,quad:Pa,triple:Pa,fromTerm:ur,fromQuad:ol};class ln{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof ln?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class rl extends ln{get termType(){return"NamedNode"}}class or extends ln{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let t=e.lastIndexOf('"')+1;return t<e.length&&e[t++]==="@"?e.substr(t).toLowerCase():""}get datatype(){return new rl(this.datatypeString)}get datatypeString(){const e=this.id,t=e.lastIndexOf('"')+1,r=t<e.length?e[t]:"";return r==="^"?e.substr(t+2):r!=="@"?$n.string:Hc.langString}equals(e){return e instanceof or?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class Gc extends ln{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class Xc extends ln{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}class zc extends ln{constructor(){return super(""),vr||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}}vr=new zc;class al extends ln{constructor(e,t,r,i){super(""),this._subject=e,this._predicate=t,this._object=r,this._graph=i||vr}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function il(a){return new rl(a)}function sl(a){return new Gc(a||`n3-${jc++}`)}function ll(a,e){if(typeof e=="string")return new or(`"${a}"@${e.toLowerCase()}`);let t=e?e.value:"";return t===""&&(typeof a=="boolean"?t=$n.boolean:typeof a=="number"&&(Number.isFinite(a)?t=Number.isInteger(a)?$n.integer:$n.double:(t=$n.double,Number.isNaN(a)||(a=a>0?"INF":"-INF")))),t===""||t===$n.string?new or(`"${a}"`):new or(`"${a}"^^${t}`)}function ul(a){return new Xc(a)}function Wc(){return vr}function Pa(a,e,t,r){return new al(a,e,t,r)}function ur(a){if(a instanceof ln)return a;switch(a.termType){case"NamedNode":return il(a.value);case"BlankNode":return sl(a.value);case"Variable":return ul(a.value);case"DefaultGraph":return vr;case"Literal":return ll(a.value,a.language||a.datatype);case"Quad":return ol(a);default:throw new Error(`Unexpected termType: ${a.termType}`)}}function ol(a){if(a instanceof al)return a;if(a.termType!=="Quad")throw new Error(`Unexpected termType: ${a.termType}`);return Pa(ur(a.subject),ur(a.predicate),ur(a.object),ur(a.graph))}let ms=0;class cl{constructor(e){this._contextStack=[],this._graph=null,e=e||{},this._setBase(e.baseIRI),e.factory&&dl(this,e.factory);const t=typeof e.format=="string"?e.format.match(/\w*$/)[0].toLowerCase():"",r=/turtle/.test(t),i=/trig/.test(t),s=/triple/.test(t),n=/quad/.test(t),l=this._n3Mode=/n3/.test(t),o=s||n;(this._supportsNamedGraphs=!(r||l))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(r||i||s||l),this._isImpliedBy=e.isImpliedBy,this._supportsRDFStar=t===""||/star|\*$/.test(t),o&&(this._resolveRelativeIRI=c=>null),this._blankNodePrefix=typeof e.blankNodePrefix!="string"?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new qc({lineMode:o,n3:l,isImpliedBy:this._isImpliedBy}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){ms=0}_setBase(e){if(!e)this._base="",this._basePath="";else{const t=e.indexOf("#");t>=0&&(e=e.substr(0,t)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}}_saveContext(e,t,r,i,s){const n=this._n3Mode;this._contextStack.push({type:e,subject:r,predicate:i,object:s,graph:t,inverse:n?this._inversePredicate:!1,blankPrefix:n?this._prefixes._:"",quantified:n?this._quantified:null}),n&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,t){const r=this._contextStack.pop();if(!r||r.type!==e)return this._error(`Unexpected ${t.type}`,t);this._subject=r.subject,this._predicate=r.predicate,this._object=r.object,this._graph=r.graph,this._n3Mode&&(this._inversePredicate=r.inverse,this._prefixes._=r.blankPrefix,this._quantified=r.quantified)}_readInTopContext(e){switch(e.type){case"eof":return this._graph!==null?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,t){let r;switch(e.type){case"IRI":case"typeIRI":const i=this._resolveIRI(e.value);if(i===null)return this._error("Invalid IRI",e);r=this._factory.namedNode(i);break;case"type":case"prefixed":const s=this._prefixes[e.prefix];if(s===void 0)return this._error(`Undefined prefix "${e.prefix}:"`,e);r=this._factory.namedNode(s+e.value);break;case"blank":r=this._factory.blankNode(this._prefixes[e.prefix]+e.value);break;case"var":r=this._factory.variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!t&&this._n3Mode&&r.id in this._quantified&&(r=this._quantified[r.id]),r}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._factory.blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._factory.blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier="blankNode",this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier="variable",this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(e.prefix.length===0)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._subject=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const t=e.type;switch(t){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${t}`,e):(this._subject=null,t==="]"?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._factory.blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if((this._predicate=this._readEntity(e))===void 0)return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(e.prefix.length===0)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._factory.blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._object=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return e.type==="{"?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return e.type!=="{"?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return e.type==="]"?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if(e.type!=="]")return this._readBlankNodePunctuation(e);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const t=this._predicate===null;return this._restoreContext("blank",e),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:t?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let t=null,r=null,i=this._readListItem;const s=this._subject,n=this._contextStack,l=n[n.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,r=this._factory.blankNode(),this.RDF_FIRST,this._subject=t=this._factory.blankNode()),i=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,r=this._factory.blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),n.length!==0&&n[n.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(i=this._readPredicate,this._subject===this.RDF_NIL)return i}else if(i=this._getContextEndReader(),this._object===this.RDF_NIL)return i;r=this.RDF_NIL;break;case"literal":e.prefix.length===0?(this._literalValue=e.value,i=this._readListItemDataTypeOrLang):(t=this._factory.literal(e.value,this._factory.namedNode(e.prefix)),i=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if((t=this._readEntity(e))===void 0)return}if(r===null&&(this._subject=r=this._factory.blankNode()),s===null?l.predicate===null?l.subject=r:l.object=r:this._emit(s,this.RDF_REST,r,this._graph),t!==null){if(this._n3Mode&&(e.type==="IRI"||e.type==="prefixed"))return this._saveContext("item",this._graph,r,this.RDF_FIRST,t),this._subject=t,this._predicate=null,this._getPathReader(this._readListItem);this._emit(r,this.RDF_FIRST,t,this._graph)}return i}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let t=this._factory.literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const r=this._readEntity(e);if(r===void 0)return;t=this._factory.literal(this._literalValue,r),e=null;break;case"langcode":t=this._factory.literal(this._literalValue,e.value),e=null;break}return{token:e,literal:t}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,t){const r=this._completeLiteral(e);if(r)return this._object=r.literal,t&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),r.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(r.token))}_readFormulaTail(e){return e.type!=="}"?this._readPunctuation(e):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let t,r=this._graph;const i=this._subject,s=this._inversePredicate;switch(e.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,t=this._contextStack.length?this._readSubject:this._readInTopContext,s&&(this._inversePredicate=!1);break;case";":t=this._readPredicate;break;case",":t=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",e);const n=this._predicate,l=this._object;this._subject=this._factory.quad(i,n,l,this.DEFAULTGRAPH),t=this._readPredicate;break;case"|}":if(this._subject.termType!=="Quad")return this._error("Unexpected asserted triple closing",e);this._subject=null,t=this._readPunctuation;break;default:if(this._supportsQuads&&this._graph===null&&(r=this._readEntity(e))!==void 0){t=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(i!==null){const n=this._predicate,l=this._object;s?this._emit(l,n,i,r):this._emit(i,n,l,r)}return t}_readBlankNodePunctuation(e){let t;switch(e.type){case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),t}_readQuadPunctuation(e){return e.type!=="."?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return e.type!=="prefix"?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if(e.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const t=this._readEntity(e);return this._prefixes[this._prefix]=t.value,this._prefixCallback(this._prefix,t),this._readDeclarationPunctuation}_readBaseIRI(e){const t=e.type==="IRI"&&this._resolveIRI(e.value);return t?(this._setBase(t),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return e.type!=="]"?this._error("Invalid graph label",e):(this._subject=this._factory.blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):e.type!=="."?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let t;switch(e.type){case"IRI":case"prefixed":if((t=this._readEntity(e,!0))!==void 0)break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,t,this.QUANTIFIERS_GRAPH)):this._quantified[t.id]=this._factory[this._quantifier](this._factory.blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return e.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const t=this._contextStack,r=t.length&&t[t.length-1];if(r&&r.type==="item"){const i=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,i,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let t,r;const i=this._factory.blankNode();if((r=this._readEntity(e))!==void 0)return this._predicate===null?(t=this._subject,this._subject=i):(t=this._object,this._object=i),this._emit(t,r,i,this._graph),this._readPath}_readBackwardPath(e){const t=this._factory.blankNode();let r,i;if((r=this._readEntity(e))!==void 0)return this._predicate===null?(i=this._subject,this._subject=t):(i=this._object,this._object=t),this._emit(t,r,i,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return e.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(e))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(e.type!==">>")return this._error(`Expected >> but got ${e.type}`,e);const t=this._factory.quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),this._subject===null?(this._subject=t,this._readPredicate):(this._object=t,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,t,r,i){this._callback(null,this._factory.quad(e,t,r,i||this.DEFAULTGRAPH))}_error(e,t){const r=new Error(`${e} on line ${t.line}.`);r.context={token:t,line:t.line,previousToken:this._lexer.previousToken},this._callback(r),this._callback=Hr}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return(e[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const t=e.length;let r="",i=-1,s=-1,n=0,l="/";for(;i<t;){switch(l){case":":if(s<0&&e[++i]==="/"&&e[++i]==="/")for(;(s=i+1)<t&&e[s]!=="/";)i=s;break;case"?":case"#":i=t;break;case"/":if(e[i+1]===".")switch(l=e[++i+1],l){case"/":r+=e.substring(n,i-1),n=i+1;break;case void 0:case"?":case"#":return r+e.substring(n,i)+e.substr(i+1);case".":if(l=e[++i+1],l===void 0||l==="/"||l==="?"||l==="#"){if(r+=e.substring(n,i-2),(n=r.lastIndexOf("/"))>=s&&(r=r.substr(0,n)),l!=="/")return`${r}/${e.substr(i+1)}`;n=i+1}}}l=e[++i]}return r+e.substring(n)}parse(e,t,r){let i,s,n;if(t&&(t.onQuad||t.onPrefix||t.onComment)?(i=t.onQuad,s=t.onPrefix,n=t.onComment):(i=t,s=r),this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${ms++}_`,this._prefixCallback=s||Hr,this._inversePredicate=!1,this._quantified=Object.create(null),!i){const o=[];let c;if(this._callback=(h,p)=>{h?c=h:p&&o.push(p)},this._lexer.tokenize(e).every(h=>this._readCallback=this._readCallback(h)),c)throw c;return o}let l=(o,c)=>{o!==null?(this._callback(o),this._callback=Hr):this._readCallback&&(this._readCallback=this._readCallback(c))};n&&(this._lexer.comments=!0,l=(o,c)=>{o!==null?(this._callback(o),this._callback=Hr):this._readCallback&&(c.type==="comment"?n(c.value):this._readCallback=this._readCallback(c))}),this._callback=i,this._lexer.tokenize(e,l)}}function Hr(){}function dl(a,e){a._factory=e,a.DEFAULTGRAPH=e.defaultGraph(),a.RDF_FIRST=e.namedNode(kt.rdf.first),a.RDF_REST=e.namedNode(kt.rdf.rest),a.RDF_NIL=e.namedNode(kt.rdf.nil),a.N3_FORALL=e.namedNode(kt.r.forAll),a.N3_FORSOME=e.namedNode(kt.r.forSome),a.ABBREVIATIONS={a:e.namedNode(kt.rdf.type),"=":e.namedNode(kt.owl.sameAs),">":e.namedNode(kt.log.implies),"<":e.namedNode(kt.log.isImpliedBy)},a.QUANTIFIERS_GRAPH=e.namedNode("urn:n3:quantifiers")}dl(cl.prototype,Vc);if(typeof on>"u")var on={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12};class ye{constructor(e,t){this.options=t||{},this.kb=e,this.target=t.target||{graph:{subjects:{},prefixes:{},terms:{}}},this.blankNodes=[],this.htmlOptions={selfClosing:"br img input area base basefont col colgroup source wbr isindex link meta param hr"},this.theOne="_:"+new Date().getTime(),this.language=null,this.vocabulary=null,this.blankCounter=0,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}],this.inXHTMLMode=!1,this.absURIRE=/[\w\_\-]+:\S+/,this.finishedHandlers=[],this.init()}addTriple(e,t,r,i){var s,n,l,o;typeof t>"u"?s=Rt.namedNode(this.options.base):s=this.toRDFNodeObject(t),l=this.toRDFNodeObject(r),n=this.toRDFNodeObject(i),o=Rt.namedNode(this.options.base),this.kb.add(s,l,n,o)}ancestorPath(e){for(var t="";e&&e.nodeType!==on.DOCUMENT_NODE;)t="/"+e.localName+t,e=e.parentNode;return t}copyMappings(e){var t={};for(var r in e)t[r]=e[r];return t}copyProperties(){}deriveDateTimeType(e){for(var t=0;t<ye.dateTimeTypes.length;t++){var r=ye.dateTimeTypes[t].pattern.exec(e);if(r&&r[0].length===e.length)return ye.dateTimeTypes[t].type}return null}init(){}newBlankNode(){return this.blankCounter++,"_:"+this.blankCounter}newSubjectOrigin(e,t){}parseCURIE(e,t,r){var i=e.indexOf(":"),s;if(i>=0){var n=e.substring(0,i);if(n==="")return s=t[""],s?s+e.substring(i+1):null;if(n==="_")return"_:"+e.substring(i+1);if(ye.NCNAME.test(n)&&(s=t[n],s))return s+e.substring(i+1)}return null}parseCURIEOrURI(e,t,r){var i=this.parseCURIE(e,t,r);return i||this.resolveAndNormalize(r,e)}parsePredicate(e,t,r,i,s,n){if(e==="")return null;var l=this.parseTermOrCURIEOrAbsURI(e,t,n?null:r,i,s);return l&&l.indexOf("_:")===0?null:l}parsePrefixMappings(e,t){for(var r=this.tokenize(e),i=null,s=0;s<r.length;s++)r[s][r[s].length-1]===":"?i=r[s].substring(0,r[s].length-1):i&&(t[i]=this.options.base?xt(r[s],this.options.base):r[s],i=null)}static parseRDFaDOM(e,t,r){var i=new ye(t,{base:r});e.baseURI||(e.baseURI=r),i.process(e,{baseURI:r})}parseSafeCURIEOrCURIEOrURI(e,t,r){return e=this.trim(e),e.charAt(0)==="["&&e.charAt(e.length-1)==="]"?(e=e.substring(1,e.length-1),e=e.trim(e),e.length===0?null:e==="_:"?this.theOne:this.parseCURIE(e,t,r)):this.parseCURIEOrURI(e,t,r)}parseTermOrCURIEOrAbsURI(e,t,r,i,s){e=this.trim(e);var n=this.parseCURIE(e,i,s);if(n)return n;if(r){if(t&&!this.absURIRE.exec(e))return t+e;var l=r[e];if(l)return l;var o=e.toLowerCase();if(l=r[o],l)return l}return this.absURIRE.exec(e)?this.resolveAndNormalize(s,e):null}parseTermOrCURIEOrURI(e,t,r,i,s){e=this.trim(e);var n=this.parseCURIE(e,i,s);if(n)return n;var l=r[e];if(l)return l;var o=e.toLowerCase();return l=r[o],l||(t&&!this.absURIRE.exec(e)?t+e:this.resolveAndNormalize(s,e))}parseURI(e){return e}process(e,t){t=t||{};var r;e.nodeType===on.DOCUMENT_NODE?(e.baseURI&&!t.baseURI&&(t.baseURI=e.baseURI),r=e.baseURI,e=e.documentElement,e.baseURI||(e.baseURI=r),this.setContext(e)):e.parentNode.nodeType===on.DOCUMENT_NODE&&this.setContext(e);var i=[],s=function(se){if(!se&&t&&t.baseURI)return t.baseURI;var Ie=se.indexOf("#");return Ie>=0&&(se=se.substring(0,Ie)),t&&t.baseURIMap&&(se=t.baseURIMap(se)),se};for(i.push({current:e,context:this.push(null,s(e.baseURI))});i.length>0;){var n=i.shift();if(n.parent){if(n.context.parent&&n.context.parent.listMapping===n.listMapping)continue;for(let se in n.listMapping){var l=n.listMapping[se];if(l.length===0){this.addTriple(n.parent,n.subject,se,{type:ye.objectURI,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"});continue}var o=[];for(let Ie=0;Ie<l.length;Ie++)o.push(this.newBlankNode());for(let Ie=0;Ie<o.length;Ie++)this.addTriple(n.parent,o[Ie],"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",l[Ie]),this.addTriple(n.parent,o[Ie],"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",{type:ye.objectURI,value:Ie+1<o.length?o[Ie+1]:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"});this.addTriple(n.parent,n.subject,se,{type:ye.objectURI,value:o[0]})}continue}var c=n.current,h=n.context,p=!1,m=null,w=null,y=null,N=h.prefixes,D=!1,L=[],R=h.listMapping,Q=!h.parent,J=h.language,x=h.vocabulary;r=this.parseURI(s(c.baseURI)),c.item=null;var G=c.getAttributeNode("vocab");if(G){let se=this.trim(G.value);if(se.length>0){x=se;var M=r.spec;this.addTriple(c,M,"http://www.w3.org/ns/rdfa#usesVocabulary",{type:ye.objectURI,value:x})}else x=this.vocabulary}for(var X=0;X<c.attributes.length;X++){var k=c.attributes[X];if(k.nodeName.charAt(0)==="x"&&k.nodeName.indexOf("xmlns:")===0){D||(N=this.copyMappings(N),D=!0);var H=k.nodeName.substring(6),$=ye.trim(k.value);N[H]=this.options.base?xt($,this.options.base):$}}var q=c.getAttributeNode("prefix");q&&(D||(N=this.copyMappings(N),D=!0),this.parsePrefixMappings(q.value,N));var ee=null;for(let se=0;!ee&&se<this.langAttributes.length;se++)ee=c.getAttributeNodeNS(this.langAttributes[se].namespaceURI,this.langAttributes[se].localName);if(ee){let se=ye.trim(ee.value);se.length>0?J=se:J=null}var Z=c.getAttributeNode("rel"),_=c.getAttributeNode("rev"),V=c.getAttributeNode("typeof"),K=c.getAttributeNode("property"),ae=c.getAttributeNode("datatype"),ie=this.inHTMLMode?c.getAttributeNode("datetime"):null,ue=c.getAttributeNode("content"),ne=c.getAttributeNode("about"),ge=c.getAttributeNode("src"),Le=c.getAttributeNode("resource"),pe=c.getAttributeNode("href"),Ce=c.getAttributeNode("inlist"),Me=[],Je,Ae;if(Z){Ae=this.tokenize(Z.value);for(let se=0;se<Ae.length;se++)Je=this.parsePredicate(Ae[se],x,h.terms,N,r,this.inHTMLMode&&K!==null),Je&&Me.push(Je)}var qe=[];if(_){Ae=this.tokenize(_.value);for(let se=0;se<Ae.length;se++)Je=this.parsePredicate(Ae[se],x,h.terms,N,r,this.inHTMLMode&&K),Je&&qe.push(Je)}if(this.inHTMLMode&&(Z||_)&&K&&(Me.length===0&&(Z=null),qe.length===0&&(_=null)),Z||_?(ne&&(m=this.parseSafeCURIEOrCURIEOrURI(ne.value,N,r)),V&&(y=m),m||(c.parentNode.nodeType===on.DOCUMENT_NODE?m=s(c.baseURI):h.parentObject&&(m=s(c.parentNode.baseURI)===h.parentObject?s(c.baseURI):h.parentObject)),Le&&(w=this.parseSafeCURIEOrCURIEOrURI(Le.value,N,r)),w||(pe?w=this.resolveAndNormalize(r,encodeURI(pe.value)):ge?w=this.resolveAndNormalize(r,encodeURI(ge.value)):V&&!ne&&!(this.inXHTMLMode&&(c.localName==="head"||c.localName==="body"))&&(w=this.newBlankNode())),V&&!ne&&this.inXHTMLMode&&(c.localName==="head"||c.localName==="body")?y=m:V&&!ne&&(y=w)):K&&!ue&&!ae?(ne&&(m=this.parseSafeCURIEOrCURIEOrURI(ne.value,N,r),V&&(y=m)),!m&&c.parentNode.nodeType===on.DOCUMENT_NODE?(m=s(c.baseURI),V&&(y=m)):!m&&h.parentObject&&(m=s(c.parentNode.baseURI)===h.parentObject?s(c.baseURI):h.parentObject),V&&!y&&(Le&&(y=this.parseSafeCURIEOrCURIEOrURI(Le.value,N,r)),!y&&pe&&(y=this.resolveAndNormalize(r,encodeURI(pe.value))),!y&&ge&&(y=this.resolveAndNormalize(r,encodeURI(ge.value))),!y&&(this.inXHTMLMode||this.inHTMLMode)&&(c.localName==="head"||c.localName==="body")&&(y=m),y||(y=this.newBlankNode()),w=y)):(ne&&(m=this.parseSafeCURIEOrCURIEOrURI(ne.value,N,r)),!m&&Le&&(m=this.parseSafeCURIEOrCURIEOrURI(Le.value,N,r)),!m&&pe&&(m=this.resolveAndNormalize(r,encodeURI(pe.value))),!m&&ge&&(m=this.resolveAndNormalize(r,encodeURI(ge.value))),m||(c.parentNode.nodeType===on.DOCUMENT_NODE?m=s(c.baseURI):(this.inXHTMLMode||this.inHTMLMode)&&(c.localName==="head"||c.localName==="body")?m=s(c.parentNode.baseURI)===h.parentObject?s(c.baseURI):h.parentObject:V?m=this.newBlankNode():h.parentObject&&(m=s(c.parentNode.baseURI)===h.parentObject?s(c.baseURI):h.parentObject,K||(p=!0))),V&&(y=m)),m&&(ne||Le||y)){var dt=m;V&&!ne&&!Le&&w&&(dt=w),this.newSubjectOrigin(c,dt)}if(y){Ae=this.tokenize(V.value);for(let se=0;se<Ae.length;se++){var at=this.parseTermOrCURIEOrAbsURI(Ae[se],x,h.terms,N,r);at&&this.addTriple(c,y,ye.typeURI,{type:ye.objectURI,value:at})}}if(m&&m!==h.parentObject&&(R={},Q=!0),w){if(Z&&Ce)for(let se=0;se<Me.length;se++){let Ie=R[Me[se]];Ie||(Ie=[],R[Me[se]]=Ie),Ie.push({type:ye.objectURI,value:w})}else if(Z)for(let se=0;se<Me.length;se++)this.addTriple(c,m,Me[se],{type:ye.objectURI,value:w});if(_)for(let se=0;se<qe.length;se++)this.addTriple(c,w,qe[se],{type:ye.objectURI,value:m})}else{if(m&&!w&&(Z||_)&&(w=this.newBlankNode()),Z&&Ce)for(let se=0;se<Me.length;se++){let Ie=R[Me[se]];Ie||(Ie=[],R[Je]=Ie),L.push({predicate:Me[se],list:Ie})}else if(Z)for(let se=0;se<Me.length;se++)L.push({predicate:Me[se],forward:!0});if(_)for(let se=0;se<qe.length;se++)L.push({predicate:qe[se],forward:!1})}if(K){var De=null,ke=null;ae?(De=ae.value===""?ye.PlainLiteralURI:this.parseTermOrCURIEOrAbsURI(ae.value,x,h.terms,N,r),ie&&!ue?ke=ie.value:ke=De===ye.XMLLiteralURI||De===ye.HTMLLiteralURI?null:ue?ue.value:c.textContent):ue?(De=ye.PlainLiteralURI,ke=ue.value):ie?(ke=ie.value,De=ye.deriveDateTimeType(ke),De||(De=ye.PlainLiteralURI)):!Z&&!_&&(Le&&(ke=this.parseSafeCURIEOrCURIEOrURI(Le.value,N,r)),!ke&&pe?ke=this.resolveAndNormalize(r,encodeURI(pe.value)):!ke&&ge&&(ke=this.resolveAndNormalize(r,encodeURI(ge.value))),ke&&(De=ye.objectURI)),De||(V&&!ne?(De=ye.objectURI,ke=y):(ke=c.textContent,this.inHTMLMode&&c.localName==="time"&&(De=ye.deriveDateTimeType(ke)),De||(De=ye.PlainLiteralURI))),Ae=this.tokenize(K.value);for(let se=0;se<Ae.length;se++){let Ie=this.parsePredicate(Ae[se],x,h.terms,N,r);if(Ie)if(Ce){let st=R[Ie];st||(st=[],R[Ie]=st),st.push(De===ye.XMLLiteralURI||De===ye.HTMLLiteralURI?{type:De,value:c.childNodes}:{type:De||ye.PlainLiteralURI,value:ke,language:J})}else De===ye.XMLLiteralURI||De===ye.HTMLLiteralURI?this.addTriple(c,m,Ie,{type:De,value:c.childNodes}):this.addTriple(c,m,Ie,{type:De||ye.PlainLiteralURI,value:ke,language:J})}}if(m&&!p)for(let se=0;se<h.incomplete.length;se++)h.incomplete[se].list?h.incomplete[se].list.push({type:ye.objectURI,value:m}):h.incomplete[se].forward?this.addTriple(c,h.subject,h.incomplete[se].predicate,{type:ye.objectURI,value:m}):this.addTriple(c,m,h.incomplete[se].predicate,{type:ye.objectURI,value:h.subject});var _e=null,wt=m;p?(_e=this.push(h,h.subject),_e.parentObject=s(c.parentNode.baseURI)===h.parentObject?s(c.baseURI):h.parentObject,_e.incomplete=h.incomplete,_e.language=J,_e.prefixes=N,_e.vocabulary=x):(_e=this.push(h,m),_e.parentObject=w||m||h.subject,_e.prefixes=N,_e.incomplete=L,w&&(wt=w,R={},Q=!0),_e.listMapping=R,_e.language=J,_e.vocabulary=x),Q&&i.unshift({parent:c,context:h,subject:wt,listMapping:R});for(var Ve=c.lastChild;Ve;Ve=Ve.previousSibling)Ve.nodeType===on.ELEMENT_NODE&&i.unshift({current:Ve,context:_e})}this.inHTMLMode&&this.copyProperties();for(let se=0;se<this.finishedHandlers.length;se++)this.finishedHandlers[se](e)}push(e,t){return{parent:e,subject:t||(e?e.subject:null),parentObject:null,incomplete:[],listMapping:e?e.listMapping:{},language:e?e.language:this.language,prefixes:e?e.prefixes:this.target.graph.prefixes,terms:e?e.terms:this.target.graph.terms,vocabulary:e?e.vocabulary:this.vocabulary}}resolveAndNormalize(e,t){return xt(t,e)}setContext(e){e.localName==="html"&&e.getAttribute("version")==="XHTML+RDFa 1.1"?this.setXHTMLContext():e.localName==="html"||e.namespaceURI==="http://www.w3.org/1999/xhtml"?typeof document<"u"&&document.doctype?document.doctype.publicId==="-//W3C//DTD XHTML+RDFa 1.0//EN"&&document.doctype.systemId==="http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd"?(console.log("WARNING: RDF 1.0 is not supported.  Defaulting to HTML5 mode."),this.setHTMLContext()):document.doctype.publicId==="-//W3C//DTD XHTML+RDFa 1.1//EN"&&document.doctype.systemId==="http://www.w3.org/MarkUp/DTD/xhtml-rdfa-2.dtd"?this.setXHTMLContext():this.setHTMLContext():this.setHTMLContext():this.setXMLContext()}setHTMLContext(){this.setInitialContext(),this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}],this.inXHTMLMode=!1,this.inHTMLMode=!0}setInitialContext(){this.vocabulary=null,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}]}setXHTMLContext(){this.setInitialContext(),this.inXHTMLMode=!0,this.inHTMLMode=!1,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}],this.target.graph.terms.alternate="http://www.w3.org/1999/xhtml/vocab#alternate",this.target.graph.terms.appendix="http://www.w3.org/1999/xhtml/vocab#appendix",this.target.graph.terms.bookmark="http://www.w3.org/1999/xhtml/vocab#bookmark",this.target.graph.terms.cite="http://www.w3.org/1999/xhtml/vocab#cite",this.target.graph.terms.chapter="http://www.w3.org/1999/xhtml/vocab#chapter",this.target.graph.terms.contents="http://www.w3.org/1999/xhtml/vocab#contents",this.target.graph.terms.copyright="http://www.w3.org/1999/xhtml/vocab#copyright",this.target.graph.terms.first="http://www.w3.org/1999/xhtml/vocab#first",this.target.graph.terms.glossary="http://www.w3.org/1999/xhtml/vocab#glossary",this.target.graph.terms.help="http://www.w3.org/1999/xhtml/vocab#help",this.target.graph.terms.icon="http://www.w3.org/1999/xhtml/vocab#icon",this.target.graph.terms.index="http://www.w3.org/1999/xhtml/vocab#index",this.target.graph.terms.last="http://www.w3.org/1999/xhtml/vocab#last",this.target.graph.terms.license="http://www.w3.org/1999/xhtml/vocab#license",this.target.graph.terms.meta="http://www.w3.org/1999/xhtml/vocab#meta",this.target.graph.terms.next="http://www.w3.org/1999/xhtml/vocab#next",this.target.graph.terms.prev="http://www.w3.org/1999/xhtml/vocab#prev",this.target.graph.terms.previous="http://www.w3.org/1999/xhtml/vocab#previous",this.target.graph.terms.section="http://www.w3.org/1999/xhtml/vocab#section",this.target.graph.terms.stylesheet="http://www.w3.org/1999/xhtml/vocab#stylesheet",this.target.graph.terms.subsection="http://www.w3.org/1999/xhtml/vocab#subsection",this.target.graph.terms.start="http://www.w3.org/1999/xhtml/vocab#start",this.target.graph.terms.top="http://www.w3.org/1999/xhtml/vocab#top",this.target.graph.terms.up="http://www.w3.org/1999/xhtml/vocab#up",this.target.graph.terms.p3pv1="http://www.w3.org/1999/xhtml/vocab#p3pv1",this.target.graph.terms.related="http://www.w3.org/1999/xhtml/vocab#related",this.target.graph.terms.role="http://www.w3.org/1999/xhtml/vocab#role",this.target.graph.terms.transformation="http://www.w3.org/1999/xhtml/vocab#transformation"}setXMLContext(){this.setInitialContext(),this.inXHTMLMode=!1,this.inHTMLMode=!1}tokenize(e){return this.trim(e).split(/\s+/)}static tokenize(e){return this.trim(e).split(/\s+/)}toRDFNodeObject(e){if(!(typeof e>"u")){if(typeof e=="string")return e.substring(0,2)==="_:"?(typeof this.blankNodes[e.substring(2)]>"u"&&(this.blankNodes[e.substring(2)]=new Wt(e.substring(2))),this.blankNodes[e.substring(2)]):Rt.namedNode(e);switch(e.type){case ye.objectURI:return e.value.substring(0,2)==="_:"?(typeof this.blankNodes[e.value.substring(2)]>"u"&&(this.blankNodes[e.value.substring(2)]=new Wt(e.value.substring(2))),this.blankNodes[e.value.substring(2)]):Rt.namedNode(e.value);case ye.PlainLiteralURI:return new Xt(e.value,e.language||"");case ye.XMLLiteralURI:case ye.HTMLLiteralURI:var t="";return Object.keys(e.value).forEach(r=>{t+=ac(e.value[r],this.htmlOptions)}),new Xt(t,"",new ft(e.type));default:return new Xt(e.value,"",new ft(e.type))}}}trim(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}static trim(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}}ye.XMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral";ye.HTMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML";ye.PlainLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral";ye.objectURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#object";ye.typeURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#type";ye.nameChar="[-A-Z_a-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�က0-F.0-9·̀-ͯ‿-⁀]";ye.nameStartChar="[A-Za-zÀ-ÖØ-öø-ÿĀ-ıĴ-ľŁ-ňŊ-žƀ-ǃǍ-ǰǴ-ǵǺ-ȗɐ-ʨʻ-ˁΆΈ-ΊΌΎ-ΡΣ-ώϐ-ϖϚϜϞϠϢ-ϳЁ-ЌЎ-яё-ќў-ҁҐ-ӄӇ-ӈӋ-ӌӐ-ӫӮ-ӵӸ-ӹԱ-Ֆՙա-ֆא-תװ-ײء-غف-يٱ-ڷں-ھۀ-ێې-ۓەۥ-ۦअ-हऽक़-ॡঅ-ঌএ-ঐও-নপ-রলশ-হড়-ঢ়য়-ৡৰ-ৱਅ-ਊਏ-ਐਓ-ਨਪ-ਰਲ-ਲ਼ਵ-ਸ਼ਸ-ਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઋઍએ-ઑઓ-નપ-રલ-ળવ-હઽૠଅ-ଌଏ-ଐଓ-ନପ-ରଲ-ଳଶ-ହଽଡ଼-ଢ଼ୟ-ୡஅ-ஊஎ-ஐஒ-கங-சஜஞ-டண-தந-பம-வஷ-ஹఅ-ఌఎ-ఐఒ-నప-ళవ-హౠ-ౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹೞೠ-ೡഅ-ഌഎ-ഐഒ-നപ-ഹൠ-ൡก-ฮะา-ำเ-ๅກ-ຂຄງ-ຈຊຍດ-ທນ-ຟມ-ຣລວສ-ຫອ-ຮະາ-ຳຽເ-ໄཀ-ཇཉ-ཀྵႠ-Ⴥა-ჶᄀᄂ-ᄃᄅ-ᄇᄉᄋ-ᄌᄎ-ᄒᄼᄾᅀᅌᅎᅐᅔ-ᅕᅙᅟ-ᅡᅣᅥᅧᅩᅭ-ᅮᅲ-ᅳᅵᆞᆨᆫᆮ-ᆯᆷ-ᆸᆺᆼ-ᇂᇫᇰᇹḀ-ẛẠ-ỹἀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼΩK-Å℮ↀ-ↂぁ-ゔァ-ヺㄅ-ㄬ가-힣一-龥〇〡-〩_]";ye.NCNAME=new RegExp("^"+ye.nameStartChar+ye.nameChar+"*$");ye.dateTimeTypes=[{pattern:/-?P(?:[0-9]+Y)?(?:[0-9]+M)?(?:[0-9]+D)?(?:T(?:[0-9]+H)?(?:[0-9]+M)?(?:[0-9]+(?:\.[0-9]+)?S)?)?/,type:"http://www.w3.org/2001/XMLSchema#duration"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9]T(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#dateTime"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9](?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#date"},{pattern:/(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#time"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]/,type:"http://www.w3.org/2001/XMLSchema#gYearMonth"},{pattern:/-?[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9]/,type:"http://www.w3.org/2001/XMLSchema#gYear"}];const Kr=ye.parseRDFaDOM;class Se{constructor(e){this.store=e,this.bnodes={},this.why=null,this.reify=!1}frameFactory(e,t,r){return{NODE:1,ARC:2,parent:t,parser:e,store:e.store,element:r,lastChild:0,base:null,lang:null,node:null,nodeType:null,listIndex:1,rdfid:null,datatype:null,collection:!1,terminateFrame:function(){this.collection&&this.node.close()},addSymbol:function(i,s){s=xt(s,this.base),this.node=this.store.sym(s),this.nodeType=i},loadTriple:function(){if(this.parent.parent.collection?this.parent.parent.node.append(this.node):this.store.add(this.parent.parent.node,this.parent.node,this.node,this.parser.why),this.parent.rdfid!=null){var i=this.store.sym(xt("#"+this.parent.rdfid,this.base));this.store.add(i,this.store.sym(Se.ns.RDF+"type"),this.store.sym(Se.ns.RDF+"Statement"),this.parser.why),this.store.add(i,this.store.sym(Se.ns.RDF+"subject"),this.parent.parent.node,this.parser.why),this.store.add(i,this.store.sym(Se.ns.RDF+"predicate"),this.parent.node,this.parser.why),this.store.add(i,this.store.sym(Se.ns.RDF+"object"),this.node,this.parser.why)}},isTripleToLoad:function(){return this.parent!=null&&this.parent.parent!=null&&this.nodeType===this.NODE&&this.parent.nodeType===this.ARC&&this.parent.parent.nodeType===this.NODE},addNode:function(i){this.addSymbol(this.NODE,i),this.isTripleToLoad()&&this.loadTriple()},addCollection:function(){this.nodeType=this.NODE,this.node=this.store.collection(),this.collection=!0,this.isTripleToLoad()&&this.loadTriple()},addCollectionArc:function(){this.nodeType=this.ARC},addBNode:function(i){i!=null?this.parser.bnodes[i]!=null?this.node=this.parser.bnodes[i]:this.node=this.parser.bnodes[i]=this.store.bnode():this.node=this.store.bnode(),this.nodeType=this.NODE,this.isTripleToLoad()&&this.loadTriple()},addArc:function(i){i===Se.ns.RDF+"li"&&(i=Se.ns.RDF+"_"+this.parent.listIndex,this.parent.listIndex++),this.addSymbol(this.ARC,i)},addLiteral:function(i){this.parent.datatype&&this.parent.datatype!==Se.ns.RDF+"langString"?this.node=this.store.literal(i,this.store.sym(this.parent.datatype)):this.node=this.store.literal(i,this.lang),this.nodeType=this.NODE,this.isTripleToLoad()&&this.loadTriple()}}}getAttributeNodeNS(e,t,r){var i=null;if(e.getAttributeNodeNS)i=e.getAttributeNodeNS(t,r);else for(var s=e.attributes,n,l,o=0;o<s.length;++o)if(n=s[o],n.namespaceURI===t&&(l=n.prefix?n.prefix+":"+r:r,l===n.nodeName)){i=n;break}return i}parse(e,t,r){var i=e.childNodes;this.cleanParser();var s;if(e.nodeType===Se.nodeType.DOCUMENT){for(var n=0;n<i.length;n++)if(i[n].nodeType===Se.nodeType.ELEMENT){s=i[n];break}}else if(e.nodeType===Se.nodeType.ELEMENT)s=e;else throw new Error("RDFParser: can't find root in "+t+". Halting. ");this.why=r;var l=this.frameFactory(this);return this.base=t,l.base=t,l.lang=null,this.parseDOM(this.buildFrame(l,s)),!0}parseDOM(e){for(var t,r=(function(J){var x="";if(J.namespaceURI==null)throw new Error("RDF/XML syntax error: No namespace for "+J.localName+" in "+this.base);return J.namespaceURI&&(x=x+J.namespaceURI),J.localName?x=x+J.localName:J.nodeName&&(J.nodeName.indexOf(":")>=0?x=x+J.nodeName.split(":")[1]:x=x+J.nodeName),x}).bind(this),i=!0;e.parent;){var s=e.element,n=s.attributes;if(s.nodeType===Se.nodeType.TEXT||s.nodeType===Se.nodeType.CDATA_SECTION)e.parent.nodeType===e.NODE&&(e.addArc(Se.ns.RDF+"value"),e=this.buildFrame(e)),e.addLiteral(s.nodeValue);else if(r(s)!==Se.ns.RDF+"RDF")if(e.parent&&e.parent.collection&&(e.addCollectionArc(),e=this.buildFrame(e,e.element),e.parent.element=null),!e.parent||!e.parent.nodeType||e.parent.nodeType===e.ARC){var l=this.getAttributeNodeNS(s,Se.ns.RDF,"about");if(t=this.getAttributeNodeNS(s,Se.ns.RDF,"ID"),l&&t)throw new Error("RDFParser: "+s.nodeName+" has both rdf:id and rdf:about. Halting. Only one of these properties may be specified on a node.");if(!l&&t)e.addNode("#"+t.nodeValue),s.removeAttributeNode(t);else if(l==null&&t==null){var o=this.getAttributeNodeNS(s,Se.ns.RDF,"nodeID");o?(e.addBNode(o.nodeValue),s.removeAttributeNode(o)):e.addBNode()}else e.addNode(l.nodeValue),s.removeAttributeNode(l);var c=this.getAttributeNodeNS(s,Se.ns.RDF,"type");Se.ns.RDF+"Description"!==r(s)&&(c={nodeValue:r(s)}),c!=null&&(this.store.add(e.node,this.store.sym(Se.ns.RDF+"type"),this.store.sym(xt(c.nodeValue,e.base)),this.why),c.nodeName&&s.removeAttributeNode(c));for(var h=n.length-1;h>=0;h--)this.store.add(e.node,this.store.sym(r(n[h])),this.store.literal(n[h].nodeValue,e.lang),this.why)}else{e.addArc(r(s)),this.reify&&(t=this.getAttributeNodeNS(s,Se.ns.RDF,"ID"),t&&(e.rdfid=t.nodeValue,s.removeAttributeNode(t)));var p=this.getAttributeNodeNS(s,Se.ns.RDF,"parseType"),m=this.getAttributeNodeNS(s,Se.ns.RDF,"datatype");if(m&&(e.datatype=m.nodeValue,s.removeAttributeNode(m)),p){var w=p.nodeValue;w==="Literal"?(e.datatype=Se.ns.RDF+"XMLLiteral",e=this.buildFrame(e),e.addLiteral(s.innerHTML||s.childNodes),i=!1):w==="Resource"?(e=this.buildFrame(e,e.element),e.parent.element=null,e.addBNode()):w==="Collection"&&(e=this.buildFrame(e,e.element),e.parent.element=null,e.addCollection()),s.removeAttributeNode(p)}if(n.length!==0){var y=this.getAttributeNodeNS(s,Se.ns.RDF,"resource"),N=this.getAttributeNodeNS(s,Se.ns.RDF,"nodeID");e=this.buildFrame(e),y?(e.addNode(y.nodeValue),s.removeAttributeNode(y)):N?(e.addBNode(N.nodeValue),s.removeAttributeNode(N)):e.addBNode();for(var D=n.length-1;D>=0;D--){var L=this.buildFrame(e);L.addArc(r(n[D])),r(n[D])===Se.ns.RDF+"type"?this.buildFrame(L).addNode(n[D].nodeValue):this.buildFrame(L).addLiteral(n[D].nodeValue)}}else s.childNodes.length===0&&this.buildFrame(e).addLiteral("")}for(s=e.element;e.parent;){for(var R=e;s==null;)e=e.parent,s=e.element;var Q=s.childNodes&&s.childNodes[e.lastChild];if(!Q||!i){if(e.terminateFrame(),!(e=e.parent))break;s=e.element,i=!0}else if(Q.nodeType!==Se.nodeType.ELEMENT&&Q.nodeType!==Se.nodeType.TEXT&&Q.nodeType!==Se.nodeType.CDATA_SECTION||(Q.nodeType===Se.nodeType.TEXT||Q.nodeType===Se.nodeType.CDATA_SECTION)&&s.childNodes.length!==1)e.lastChild++;else{e.lastChild++,e=this.buildFrame(R,s.childNodes[e.lastChild-1]);break}}}}cleanParser(){this.bnodes={},this.why=null}buildFrame(e,t){var r=this.frameFactory(this,e,t);if(e&&(r.base=e.base,r.lang=e.lang),!t||t.nodeType===Se.nodeType.TEXT||t.nodeType===Se.nodeType.CDATA_SECTION)return r;var i=t.attributes,s=t.getAttributeNode("xml:base");s!=null&&(r.base=s.nodeValue,t.removeAttribute("xml:base"));var n=t.getAttributeNode("xml:lang");n!=null&&(r.lang=n.nodeValue,t.removeAttribute("xml:lang"));for(var l=i.length-1;l>=0;l--)if(i[l].nodeName.substr(0,3)==="xml"){if(i[l].name.slice(0,6)==="xmlns:"){var o=i[l].nodeValue;this.base&&(o=xt(o,this.base)),this.store.setPrefixForURI(i[l].name.slice(6),o)}t.removeAttributeNode(i[l])}return r}}re(Se,"ns",{RDF:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",RDFS:"http://www.w3.org/2000/01/rdf-schema#"});re(Se,"nodeType",{ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12});function Yc(a,e,t){var r,i,s,n=["INSERT","DELETE","WHERE"],l=be("http://www.w3.org/ns/pim/patch#"),o=Za(e,e,t,t,null,null,"",null),c={},h=function(N,D,L,R,Q){return"Line "+(D+1)+" of <"+N+`>: Bad syntax:
   `+Q+`
   at: "`+L.slice(R,R+30)+'"'};r=0;var p=e.sym(t+"#query");for(c.query=p;;){if(i=o.skipSpace(a,r),i<0)return c;if(a[i]===";"){if(r=o.skipSpace(a,i+1),r<0)return c;i=r}var m=!1;for(s=0;s<n.length;s++){var w=n[s];if(a.slice(i,i+w.length)===w){if(r=o.skipSpace(a,i+w.length),r<0)throw h(o._thisDoc,o.lines,a,i+w.length,"found EOF, needed {...} after "+w);if((w==="INSERT"||w==="DELETE")&&a.slice(r,r+4)==="DATA"){if(i=o.skipSpace(a,r+4),i<0)throw h(o._thisDoc,o.lines,a,r+4,"needed {...} after INSERT DATA "+w);r=i}var y=[];if(i=o.node(a,r,y),i<0)throw h(o._thisDoc,o.lines,a,r,"bad syntax or EOF in {...} after "+w);c[w.toLowerCase()]=y[0],e.add(p,l(w.toLowerCase()),y[0]),m=!0,r=i}}if(!m&&a.slice(i,i+7)==="@prefix"){if(r=o.directive(a,i),r<0)throw h(o._thisDoc,o.lines,a,r,"bad syntax or EOF after @prefix ");r=o.checkDot(a,r),m=!0}if(!m)throw h(o._thisDoc,o.lines,a,i,"Unknown syntax at start of statememt: '"+a.slice(i).slice(0,20)+"'")}}function $a(a,e,t,r="text/turtle",i){r=r||Tn,r=r.split(";")[0];try{if(r===qs||r===Tn){var s=Za(e,e,t,t,null,null,"",null);s.loadBuf(a),o()}else if(r===hr){var n=new Se(e);n.parse(qn(a),t,e.sym(t)),o()}else if(r===Oa)Kr(qn(a,{contentType:Oa}),e,t),o();else if(r===Vi)Kr(qn(a,{contentType:Vi}),e,t),o();else if(r===Ro||r===Oo)Yc(a,e,t),o();else if(r===La)tl(a,e,t).then(o).catch(c);else if(r===Ra||r===ka){var l=new cl({factory:Ma});h(null,a)}else throw r===void 0?new Error("contentType is undefined"):new Error("Don't know how to parse "+r+" yet")}catch(m){c(m)}$a.handled={"text/n3":!0,"text/turtle":!0,"application/rdf+xml":!0,"application/xhtml+xml":!0,"text/html":!0,"application/sparql-update":!0,"application/sparql-update-single-match":!0,"application/ld+json":!0,"application/nquads":!0,"application/n-quads":!0};function o(){if(i)i(null,e);else return}function c(m){if(r!==La||r!==Ra||r!==ka)if(i)i(m,e);else{let w=new Error(""+m+" while trying to parse <"+t+"> as "+r);throw w.cause=m,w}}function h(m,w){try{l.parse(w,p)}catch(y){i(y,e)}}function p(m,w){w?e.add(w.subject,w.predicate,w.object,w.graph):i(m,e)}}var jr={exports:{}},gs;function Qc(){return gs||(gs=1,(function(a,e){var t=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof kr<"u"&&kr,r=(function(){function s(){this.fetch=!1,this.DOMException=t.DOMException}return s.prototype=t,new s})();(function(s){(function(n){var l=typeof s<"u"&&s||typeof self<"u"&&self||typeof kr<"u"&&kr||{},o={searchParams:"URLSearchParams"in l,iterable:"Symbol"in l&&"iterator"in Symbol,blob:"FileReader"in l&&"Blob"in l&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in l,arrayBuffer:"ArrayBuffer"in l};function c(_){return _&&DataView.prototype.isPrototypeOf(_)}if(o.arrayBuffer)var h=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],p=ArrayBuffer.isView||function(_){return _&&h.indexOf(Object.prototype.toString.call(_))>-1};function m(_){if(typeof _!="string"&&(_=String(_)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(_)||_==="")throw new TypeError('Invalid character in header field name: "'+_+'"');return _.toLowerCase()}function w(_){return typeof _!="string"&&(_=String(_)),_}function y(_){var V={next:function(){var K=_.shift();return{done:K===void 0,value:K}}};return o.iterable&&(V[Symbol.iterator]=function(){return V}),V}function N(_){this.map={},_ instanceof N?_.forEach(function(V,K){this.append(K,V)},this):Array.isArray(_)?_.forEach(function(V){if(V.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+V.length);this.append(V[0],V[1])},this):_&&Object.getOwnPropertyNames(_).forEach(function(V){this.append(V,_[V])},this)}N.prototype.append=function(_,V){_=m(_),V=w(V);var K=this.map[_];this.map[_]=K?K+", "+V:V},N.prototype.delete=function(_){delete this.map[m(_)]},N.prototype.get=function(_){return _=m(_),this.has(_)?this.map[_]:null},N.prototype.has=function(_){return this.map.hasOwnProperty(m(_))},N.prototype.set=function(_,V){this.map[m(_)]=w(V)},N.prototype.forEach=function(_,V){for(var K in this.map)this.map.hasOwnProperty(K)&&_.call(V,this.map[K],K,this)},N.prototype.keys=function(){var _=[];return this.forEach(function(V,K){_.push(K)}),y(_)},N.prototype.values=function(){var _=[];return this.forEach(function(V){_.push(V)}),y(_)},N.prototype.entries=function(){var _=[];return this.forEach(function(V,K){_.push([K,V])}),y(_)},o.iterable&&(N.prototype[Symbol.iterator]=N.prototype.entries);function D(_){if(!_._noBody){if(_.bodyUsed)return Promise.reject(new TypeError("Already read"));_.bodyUsed=!0}}function L(_){return new Promise(function(V,K){_.onload=function(){V(_.result)},_.onerror=function(){K(_.error)}})}function R(_){var V=new FileReader,K=L(V);return V.readAsArrayBuffer(_),K}function Q(_){var V=new FileReader,K=L(V),ae=/charset=([A-Za-z0-9_-]+)/.exec(_.type),ie=ae?ae[1]:"utf-8";return V.readAsText(_,ie),K}function J(_){for(var V=new Uint8Array(_),K=new Array(V.length),ae=0;ae<V.length;ae++)K[ae]=String.fromCharCode(V[ae]);return K.join("")}function x(_){if(_.slice)return _.slice(0);var V=new Uint8Array(_.byteLength);return V.set(new Uint8Array(_)),V.buffer}function G(){return this.bodyUsed=!1,this._initBody=function(_){this.bodyUsed=this.bodyUsed,this._bodyInit=_,_?typeof _=="string"?this._bodyText=_:o.blob&&Blob.prototype.isPrototypeOf(_)?this._bodyBlob=_:o.formData&&FormData.prototype.isPrototypeOf(_)?this._bodyFormData=_:o.searchParams&&URLSearchParams.prototype.isPrototypeOf(_)?this._bodyText=_.toString():o.arrayBuffer&&o.blob&&c(_)?(this._bodyArrayBuffer=x(_.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(_)||p(_))?this._bodyArrayBuffer=x(_):this._bodyText=_=Object.prototype.toString.call(_):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof _=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):o.searchParams&&URLSearchParams.prototype.isPrototypeOf(_)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o.blob&&(this.blob=function(){var _=D(this);if(_)return _;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var _=D(this);return _||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(o.blob)return this.blob().then(R);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var _=D(this);if(_)return _;if(this._bodyBlob)return Q(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(J(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o.formData&&(this.formData=function(){return this.text().then(H)}),this.json=function(){return this.text().then(JSON.parse)},this}var M=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function X(_){var V=_.toUpperCase();return M.indexOf(V)>-1?V:_}function k(_,V){if(!(this instanceof k))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');V=V||{};var K=V.body;if(_ instanceof k){if(_.bodyUsed)throw new TypeError("Already read");this.url=_.url,this.credentials=_.credentials,V.headers||(this.headers=new N(_.headers)),this.method=_.method,this.mode=_.mode,this.signal=_.signal,!K&&_._bodyInit!=null&&(K=_._bodyInit,_.bodyUsed=!0)}else this.url=String(_);if(this.credentials=V.credentials||this.credentials||"same-origin",(V.headers||!this.headers)&&(this.headers=new N(V.headers)),this.method=X(V.method||this.method||"GET"),this.mode=V.mode||this.mode||null,this.signal=V.signal||this.signal||(function(){if("AbortController"in l){var ue=new AbortController;return ue.signal}})(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&K)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(K),(this.method==="GET"||this.method==="HEAD")&&(V.cache==="no-store"||V.cache==="no-cache")){var ae=/([?&])_=[^&]*/;if(ae.test(this.url))this.url=this.url.replace(ae,"$1_="+new Date().getTime());else{var ie=/\?/;this.url+=(ie.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}k.prototype.clone=function(){return new k(this,{body:this._bodyInit})};function H(_){var V=new FormData;return _.trim().split("&").forEach(function(K){if(K){var ae=K.split("="),ie=ae.shift().replace(/\+/g," "),ue=ae.join("=").replace(/\+/g," ");V.append(decodeURIComponent(ie),decodeURIComponent(ue))}}),V}function $(_){var V=new N,K=_.replace(/\r?\n[\t ]+/g," ");return K.split("\r").map(function(ae){return ae.indexOf(`
`)===0?ae.substr(1,ae.length):ae}).forEach(function(ae){var ie=ae.split(":"),ue=ie.shift().trim();if(ue){var ne=ie.join(":").trim();try{V.append(ue,ne)}catch(ge){console.warn("Response "+ge.message)}}}),V}G.call(k.prototype);function q(_,V){if(!(this instanceof q))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(V||(V={}),this.type="default",this.status=V.status===void 0?200:V.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=V.statusText===void 0?"":""+V.statusText,this.headers=new N(V.headers),this.url=V.url||"",this._initBody(_)}G.call(q.prototype),q.prototype.clone=function(){return new q(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new N(this.headers),url:this.url})},q.error=function(){var _=new q(null,{status:200,statusText:""});return _.ok=!1,_.status=0,_.type="error",_};var ee=[301,302,303,307,308];q.redirect=function(_,V){if(ee.indexOf(V)===-1)throw new RangeError("Invalid status code");return new q(null,{status:V,headers:{location:_}})},n.DOMException=l.DOMException;try{new n.DOMException}catch{n.DOMException=function(V,K){this.message=V,this.name=K;var ae=Error(V);this.stack=ae.stack},n.DOMException.prototype=Object.create(Error.prototype),n.DOMException.prototype.constructor=n.DOMException}function Z(_,V){return new Promise(function(K,ae){var ie=new k(_,V);if(ie.signal&&ie.signal.aborted)return ae(new n.DOMException("Aborted","AbortError"));var ue=new XMLHttpRequest;function ne(){ue.abort()}ue.onload=function(){var pe={statusText:ue.statusText,headers:$(ue.getAllResponseHeaders()||"")};ie.url.indexOf("file://")===0&&(ue.status<200||ue.status>599)?pe.status=200:pe.status=ue.status,pe.url="responseURL"in ue?ue.responseURL:pe.headers.get("X-Request-URL");var Ce="response"in ue?ue.response:ue.responseText;setTimeout(function(){K(new q(Ce,pe))},0)},ue.onerror=function(){setTimeout(function(){ae(new TypeError("Network request failed"))},0)},ue.ontimeout=function(){setTimeout(function(){ae(new TypeError("Network request timed out"))},0)},ue.onabort=function(){setTimeout(function(){ae(new n.DOMException("Aborted","AbortError"))},0)};function ge(pe){try{return pe===""&&l.location.href?l.location.href:pe}catch{return pe}}if(ue.open(ie.method,ge(ie.url),!0),ie.credentials==="include"?ue.withCredentials=!0:ie.credentials==="omit"&&(ue.withCredentials=!1),"responseType"in ue&&(o.blob?ue.responseType="blob":o.arrayBuffer&&(ue.responseType="arraybuffer")),V&&typeof V.headers=="object"&&!(V.headers instanceof N||l.Headers&&V.headers instanceof l.Headers)){var Le=[];Object.getOwnPropertyNames(V.headers).forEach(function(pe){Le.push(m(pe)),ue.setRequestHeader(pe,w(V.headers[pe]))}),ie.headers.forEach(function(pe,Ce){Le.indexOf(Ce)===-1&&ue.setRequestHeader(Ce,pe)})}else ie.headers.forEach(function(pe,Ce){ue.setRequestHeader(Ce,pe)});ie.signal&&(ie.signal.addEventListener("abort",ne),ue.onreadystatechange=function(){ue.readyState===4&&ie.signal.removeEventListener("abort",ne)}),ue.send(typeof ie._bodyInit>"u"?null:ie._bodyInit)})}return Z.polyfill=!0,l.fetch||(l.fetch=Z,l.Headers=N,l.Request=k,l.Response=q),n.Headers=N,n.Request=k,n.Response=q,n.fetch=Z,n})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=t.fetch?t:r;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,a.exports=e})(jr,jr.exports)),jr.exports}var qa=Qc();const Jc=Xs(qa),Zc={"text/n3":!0,"text/turtle":!0,"application/rdf+xml":!0,"application/xhtml+xml":!0,"text/html":!0,"application/ld+json":!0},hl={rdf:hr,owl:hr,n3:"text/n3",ttl:"text/turtle",nt:"text/n3",acl:"text/n3",html:"text/html",xml:"text/xml"},fl=a=>({link:be("http://www.w3.org/2007/ont/link#",a),http:be("http://www.w3.org/2007/ont/http#",a),httph:be("http://www.w3.org/2007/ont/httph#",a),rdf:be("http://www.w3.org/1999/02/22-rdf-syntax-ns#",a),rdfs:be("http://www.w3.org/2000/01/rdf-schema#",a),dc:be("http://purl.org/dc/elements/1.1/",a),ldp:be("http://www.w3.org/ns/ldp#",a)}),It=fl();class hn{constructor(e,t){re(this,"response",void 0),re(this,"dom",void 0),this.response=e,this.dom=t}}re(hn,"pattern",void 0);class ti extends hn{static toString(){return"RDFXMLHandler"}static register(e){e.mediatypes[hr]={q:.9}}parse(e,t,r){let i=e.store;this.dom||(this.dom=qn(t));let s=this.dom.documentElement;if(s&&s.nodeName==="parsererror")return e.failFetch(r,"Badly formed XML in "+r.resource.value,"parse_error");let n=new Se(i);try{n.parse(this.dom,r.original.value,r.original)}catch(l){return e.failFetch(r,"Syntax error parsing RDF/XML! "+l,"parse_error")}return r.noMeta||i.add(r.original,It.rdf("type"),It.link("RDFDocument"),e.appNode),e.doneFetch(r,this.response)}}ti.pattern=new RegExp("application/rdf\\+xml");class An extends hn{static toString(){return"XHTMLHandler"}static register(e){e.mediatypes[Oa]={q:.8}}parse(e,t,r){let i,s;this.dom||(this.dom=qn(t));let n=e.store,l=this.dom.getElementsByTagName("title");l.length>0&&n.add(r.resource,It.dc("title"),n.rdfFactory.literal(l[0].textContent),r.resource);let o=this.dom.getElementsByTagName("link");for(let h=o.length-1;h>=0;h--)i=o[h].getAttribute("rel"),s=!1,i||(i=o[h].getAttribute("rev"),s=!0),i&&e.linkData(r.original,i,o[h].getAttribute("href"),r.resource,s);let c=this.dom.getElementsByTagName("script");for(let h=0;h<c.length;h++){let p=c[h].getAttribute("type");Zc[p]&&($a(c[h].textContent,n,r.original.value,p),$a(c[h].textContent,n,r.original.value,p))}if(r.noMeta||n.add(r.resource,It.rdf("type"),It.link("WebPage"),e.appNode),!r.noRDFa&&Kr)try{Kr(this.dom,n,r.original.value)}catch(h){let p="Error trying to parse "+r.resource+` as RDFa:
`+h+`:
`+h.stack;return e.failFetch(r,p,"parse_error")}return e.doneFetch(r,this.response)}}An.pattern=new RegExp("application/xhtml");class jn extends hn{static toString(){return"XMLHandler"}static register(e){e.mediatypes["text/xml"]={q:.5},e.mediatypes["application/xml"]={q:.5}}static isElement(e){return e.nodeType===Node.ELEMENT_NODE}parse(e,t,r){let i=qn(t);for(let n=0;n<i.childNodes.length;n++){const l=i.childNodes[n];if(jn.isElement(l)){let o=l.namespaceURI;if(o&&o===o.rdf)return e.addStatus(r.req,"Has XML root element in the RDF namespace, so assume RDF/XML."),new ti(this.response,i).parse(e,t,r);break}}if(i.doctype&&i.doctype.name==="html"&&i.doctype.publicId.match(/^-\/\/W3C\/\/DTD XHTML/)&&i.doctype.systemId.match(/http:\/\/www.w3.org\/TR\/xhtml/))return e.addStatus(r.req,`Has XHTML DOCTYPE. Switching to XHTML Handler.
`),new An(this.response,i).parse(e,t,r);let s=i.getElementsByTagName("html")[0];if(s){let n=s.getAttribute("xmlns");if(n&&n.match(/^http:\/\/www.w3.org\/1999\/xhtml/))return e.addStatus(r.req,`Has a default namespace for XHTML. Switching to XHTMLHandler.
`),new An(this.response,i).parse(e,t,r)}return e.failFetch(r,`Unsupported dialect of XML: not RDF or XHTML namespace, etc.
`+t.slice(0,80),901)}}jn.pattern=new RegExp("(text|application)/(.*)xml");class pl extends hn{static toString(){return"HTMLHandler"}static register(e){e.mediatypes["text/html"]={q:.8}}parse(e,t,r){let i=e.store;if(yl(t))return e.addStatus(r.req,`Has an XML declaration. We'll assume it's XHTML as the content-type was text/html.
`),new An(this.response).parse(e,t,r);if(Kc(t))return e.addStatus(r.req,`Has XHTML DOCTYPE. Switching to XHTMLHandler.
`),new An(this.response).parse(e,t,r);if(ed(t))return e.addStatus(r.req,`Has default namespace for XHTML, so switching to XHTMLHandler.
`),new An(this.response).parse(e,t,r);let s=new RegExp("<title>([\\s\\S]+?)</title>","im").exec(t);return s&&i.add(r.resource,It.dc("title"),i.rdfFactory.literal(s[1]),r.resource),i.add(r.resource,It.rdf("type"),It.link("WebPage"),e.appNode),e.addStatus(r.req,"non-XML HTML document, not parsed for data."),e.doneFetch(r,this.response)}}pl.pattern=new RegExp("text/html");class ml extends hn{static toString(){return"JsonLdHandler"}static register(e){e.mediatypes["application/ld+json"]={q:.9}}async parse(e,t,r,i){const s=e.store;try{return await tl(t,s,r.original.value),e.store.add(r.original,It.rdf("type"),It.link("RDFDocument"),e.appNode),e.doneFetch(r,i)}catch(n){const l="Error trying to parse "+r.resource+` as JSON-LD:
`+n;return e.failFetch(r,l,"parse_error",i)}}}ml.pattern=/application\/(ld\+json|activity\+json)/;class gl extends hn{static toString(){return"TextHandler"}static register(e){e.mediatypes["text/plain"]={q:.5}}parse(e,t,r){return yl(t)?(e.addStatus(r.req,"Warning: "+r.resource+` has an XML declaration. We'll assume it's XML but its content-type wasn't XML.
`),new jn(this.response).parse(e,t,r)):t.slice(0,500).match(/xmlns:/)?(e.addStatus(r.req,`May have an XML namespace. We'll assume it's XML but its content-type wasn't XML.
`),new jn(this.response).parse(e,t,r)):(e.addStatus(r.req,"Plain text document, no known RDF semantics."),e.doneFetch(r,this.response))}}gl.pattern=new RegExp("text/plain");class vl extends hn{static toString(){return"N3Handler"}static register(e){e.mediatypes["text/n3"]={},e.mediatypes["text/turtle"]={}}parse(e,t,r,i){let s=e.store,n=Za(s,s,r.original.value,r.original.value,null,null,"",null);try{n.loadBuf(t)}catch(l){let o="Error trying to parse "+r.resource+` as Notation3:
`+l;return e.failFetch(r,o,"parse_error",i)}return e.addStatus(r.req,"N3 parsed: "+n.statementCount+" triples in "+n.lines+" lines."),e.store.add(r.original,It.rdf("type"),It.link("RDFDocument"),e.appNode),e.doneFetch(r,this.response)}}vl.pattern=new RegExp("(application|text)/(x-)?(rdf\\+)?(n3|turtle)");const Ha={RDFXMLHandler:ti,XHTMLHandler:An,XMLHandler:jn,HTMLHandler:pl,TextHandler:gl,N3Handler:vl,JsonLdHandler:ml};function Kc(a){const e=a.indexOf("<!DOCTYPE html"),t=a.indexOf(">");return e===-1||t===-1||e>t?!1:a.substr(e,t-e).indexOf("XHTML")!==-1}function yl(a){return!!a.match(/\s*<\?xml\s+version\s*=[^<>]+\?>/)}function ed(a){return!!a.match(/[^(<html)]*<html\s+[^<]*xmlns=['"]http:\/\/www.w3.org\/1999\/xhtml["'][^<]*>/)}class nt{constructor(e,t={}){re(this,"store",void 0),re(this,"timeout",void 0),re(this,"_fetch",void 0),re(this,"mediatypes",void 0),re(this,"appNode",void 0),re(this,"requested",void 0),re(this,"timeouts",void 0),re(this,"redirectedTo",void 0),re(this,"fetchQueue",void 0),re(this,"fetchCallbacks",void 0),re(this,"nonexistent",void 0),re(this,"lookedUp",void 0),re(this,"handlers",void 0),re(this,"ns",void 0),re(this,"fireCallbacks",void 0),this.store=e||new sn,this.ns=fl(this.store.rdfFactory),this.timeout=t.timeout||3e4;let r=t.fetch||typeof global<"u"&&(global.solidFetcher||global.solidFetch)||typeof window<"u"&&(window.solidFetcher||window.solidFetch)||Jc;if(!r)throw new Error("No _fetch function available for Fetcher");typeof window<"u"&&r===window.fetch?this._fetch=r.bind(window):typeof global<"u"&&r===global.fetch?this._fetch=r.bind(global):this._fetch=r,this.appNode=this.store.sym("chrome://TheCurrentSession"),this.store.fetcher=this,this.requested={},this.timeouts={},this.redirectedTo={},this.fetchQueue={},this.fetchCallbacks={},this.nonexistent={},this.lookedUp={},this.handlers=[],this.mediatypes={"image/*":{q:.9},"*/*":{q:.1}},rc(this,["request","fail","refresh","retract","done"]),Object.keys(t.handlers||Ha).map(i=>this.addHandler(Ha[i]))}static crossSiteProxy(e){if(nt.crossSiteProxyTemplate)return nt.crossSiteProxyTemplate.replace("{uri}",encodeURIComponent(e))}static offlineOverride(e){let t=e;var r;return typeof window<"u"&&window.panes&&(r=window.panes.UI)&&r.preferences&&r.preferences.get("offlineModeUsingLocalhost")&&t.slice(0,7)==="http://"&&t.slice(7,17)!=="localhost/"&&(t="http://localhost/"+t.slice(7)),t}static proxyIfNecessary(e){var t;if(typeof window<"u"&&window.panes&&(t=window.panes.UI)&&t.isExtension)return e;if(typeof $SolidTestEnvironment<"u"&&$SolidTestEnvironment.localSiteMap){let r=e.split("/").slice(2);const i=(n,l)=>{let o=l[n.shift()];return o?typeof o=="string"?o+n.join("/"):n?i(n,o):null:null},s=i(r,$SolidTestEnvironment.localSiteMap);if(s)return s}return nt.crossSiteProxyTemplate&&typeof document<"u"&&document.location&&(""+document.location).slice(0,6)==="https:"&&e.slice(0,5)==="http:"?nt.crossSiteProxyTemplate.replace("{uri}",encodeURIComponent(e)):e}static unsupportedProtocol(e){let t=zi(e);return t==="tel"||t==="mailto"||t==="urn"}static setCredentials(e,t={}){t.credentials===void 0&&(t.withCredentials!==void 0?t.credentials=t.withCredentials?"include":"omit":t.credentials="include")}load(e,t={}){if(t=Object.assign({},t),e instanceof Array)return Promise.all(e.map(c=>this.load(c,Object.assign({},t))));let i=Cn(e);i=i.split("#")[0],t=this.initFetchOptions(i,t);const s=this.appNode,n=this.store,l=n.statementsMatching(void 0,this.ns.link("requestedURI"),n.sym(i),s).map(c=>c.subject);for(const c of l){const h=n.any(c,this.ns.link("response"),null,s);if(h!=null){const p=n.statementsMatching(h,this.ns.link("outOfDate"),!0,s);n.remove(p),t.force=!0,t.clearPreviousData=!0}}const o=this.initFetchOptions(i,t);return this.pendingFetchPromise(i,o.baseURI,o)}async pendingFetchPromise(e,t,r){let i;return!r.force&&await this.fetchQueue[t]?i=this.fetchQueue[t]:(i=Promise.race([this.setRequestTimeout(e,r),this.fetchUri(e,r)]),this.fetchQueue[t]=i,this.cleanupFetchRequest(t,void 0,this.timeout)),i.then(s=>(e in this.timeouts&&(this.timeouts[e].forEach(clearTimeout),delete this.timeouts[e]),s))}cleanupFetchRequest(e,t,r){t!==void 0&&console.warn("_options is deprecated"),this.timeouts[e]=(this.timeouts[e]||[]).concat(setTimeout(()=>{this.isPending(e)||delete this.fetchQueue[e]},r))}initFetchOptions(e,t){let r=this.store;!t.method||t.method.toUpperCase()==="GET"||(t.force=!0),t.resource=r.rdfFactory.namedNode(e),t.baseURI=t.baseURI||e,t.original=r.rdfFactory.namedNode(t.baseURI),t.req=r.bnode(),t.headers=t.headers||{},t.contentType&&(t.headers["content-type"]=t.contentType),t.force&&(t.cache="no-cache");let s=this.acceptString();t.headers.accept=s;let n=nt.offlineOverride(e);t.requestedURI=n,nt.setCredentials(n,t);let l=nt.proxyIfNecessary(n);return n!==l&&(t.proxyUsed=!0),t.actualProxyURI=l,t}fetchUri(e,t){if(!e)return Promise.reject(new Error("Cannot fetch an empty uri"));if(nt.unsupportedProtocol(e))return this.failFetch(t,"fetcher: Unsupported protocol","unsupported_protocol");let r=this.getState(e);if(t.force)delete this.nonexistent[e];else{if(r==="fetched")return Promise.resolve(this.doneFetch(t,{status:200,ok:!0,statusText:"Already loaded into quadstore."}));if(r==="failed"&&this.requested[e]===404){let s="Previously failed: "+this.requested[e],n={url:e,status:this.requested[e],statusText:s,responseText:s,headers:new qa.Headers,ok:!1,body:null,bodyUsed:!1,size:0,timeout:0};return this.failFetch(t,s,this.requested[e],n)}}this.fireCallbacks("request",[e]),this.requested[e]=!0,t.noMeta||this.saveRequestMetadata(e,t);let{actualProxyURI:i}=t;return this._fetch(i,t).then(s=>this.handleResponse(s,e,t),s=>{let n={url:i,status:999,statusText:(s.name||"network failure")+": "+(s.errno||s.code||s.type),responseText:s.message,headers:new qa.Headers,ok:!1,body:null,bodyUsed:!1,size:0,timeout:0};return this.handleError(n,e,t)})}nowOrWhenFetched(e,t,r,i={}){const s=Cn(e);typeof t=="function"?r=t:typeof t>"u"||(Gi(t)?i.referringTerm=t:i=t),this.load(s,i).then(n=>{if(r)if(n)if(n.ok)r(!0,"OK",n);else{let l="HTTP error: Status "+n.status+" ("+n.statusText+")";n.responseText&&(l+=" "+n.responseText),r(!1,l,n)}else r(!1,"@@ nowOrWhenFetched:  no response object!")},function(n){var l=n.message||n.statusText;l="Failed to load  <"+s+"> "+l,n.response&&n.response.status&&(l+=" status: "+n.response.status),r(!1,l,n.response)})}addStatus(e,t){let r=new Date;t="["+r.getHours()+":"+r.getMinutes()+":"+r.getSeconds()+"."+r.getMilliseconds()+"] "+t;let i=this.store;const s=i.the(e,this.ns.link("status"));Ya(s)&&s.append(i.rdfFactory.literal(t))}failFetch(e,t,r,i){this.addStatus(e.req,t),e.noMeta||this.store.add(e.original,this.ns.link("error"),this.store.rdfFactory.literal(t));let s=(e.method||"GET").toUpperCase();(s==="GET"||s==="HEAD")&&(e.resource.equals(e.original),this.requested[bn(e.original.value)]=r,this.fireCallbacks("fail",[e.original.value,t]));var l=new Error("Fetcher: "+t);return l.status=r,l.statusText=t,l.response=i,Promise.reject(l)}linkData(e,t,r,i,s){if(!r)return;let n=this.store,l,o=n.rdfFactory.namedNode(xt(r,e.value));if(t==="alternate"||t==="seeAlso"||t==="meta"||t==="describedby"){if(o.value===e.value)return;l=this.ns.rdfs("seeAlso")}else t==="type"?l=n.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"):l=n.rdfFactory.namedNode(xt(encodeURIComponent(t),"http://www.iana.org/assignments/link-relations/"));s?n.add(o,l,e,i):n.add(e,l,o,i)}parseLinkHeader(e,t,r){if(!e)return;const i=/<[^>]*>\s*(\s*;\s*[^()<>@,;:"/[\]?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*")))*(,|$)/g,s=/[^\(\)<>@,;:"\/\[\]\?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*"))/g,n=e.match(i);if(n!=null)for(let l=0;l<n.length;l++){let o=n[l].split(">"),c=o[0].substring(1),p=o[1].match(s);if(p==null)return;for(let m=0;m<p.length;m++){let N=p[m].split("=")[1].replace(/["']/g,"");this.linkData(t,N,c,r)}}}doneFetch(e,t){return this.addStatus(e.req,"Done."),this.requested[e.original.value]="done",this.fireCallbacks("done",[e.original.value]),t.req=e.req,t}nowKnownAs(e,t){this.lookedUp[e.value]?this.lookedUp[t.value]||this.lookUpThing(t,e):this.lookedUp[t.value]&&(this.lookedUp[e.value]||this.lookUpThing(e,t))}putBack(e,t={}){const r=Cn(e);let i=new ft(r).doc();return t.contentType=t["content-type"]||t["Content-Type"]||t.contentType||Tn,t.contentType==="application/ld+json"?new Promise((s,n)=>{pr(i,this.store,i.uri,t.contentType,(l,o)=>{l?n(l):(t.data=o,this.webOperation("PUT",e,t).then(c=>s(c)).catch(c=>n(c)))})}):(t.data=pr(i,this.store,i.value,t.contentType),this.webOperation("PUT",r,t))}webCopy(e,t,r){return this.webOperation("GET",e).then(i=>this.webOperation("PUT",t,{data:i.responseText,contentType:r}))}delete(e,t){return this.webOperation("DELETE",e,t).then(r=>(this.requested[e]=404,this.nonexistent[e]=!0,this.unload(this.store.rdfFactory.namedNode(e)),r))}async createIfNotExists(e,t=Tn,r=""){const i=this;try{var s=await i.load(e)}catch(n){if(n.response.status===404){try{s=await i.webOperation("PUT",e.value,{data:r,contentType:t})}catch(l){throw l}return delete i.requested[e.value],s}else throw n}return s}createContainer(e,t,r){let i={"content-type":Tn,link:this.ns.ldp("BasicContainer")+'; rel="type"'};t&&(i.slug=t);let s={headers:i};return r&&(s.body=r),this.webOperation("POST",e,s)}invalidateCache(e){const t=Cn(e),r=this;if(r.fetchQueue&&r.fetchQueue[t]){var i=r.fetchQueue[t];i.PromiseStatus,delete r.fetchQueue[t]}if(r.requested[t]&&r.requested[t]!=="done"&&r.requested[t]!=="failed"&&r.requested[t]!==404){let s=`Rdflib: fetcher: Destructive operation on <${r.requested[t]}> file being fetched! `+t;console.error(s)}else delete r.requested[t],delete r.nonexistent[t]}webOperation(e,t,r={}){const i=Cn(t);r.method=e,r.body=r.data||r.body,r.force=!0;const s=this;if(r.body&&!r.contentType)throw new Error("Web operation sending data must have a defined contentType.");return r.contentType&&(r.headers=r.headers||{},r.headers["content-type"]=r.contentType),nt.setCredentials(i,r),new Promise(function(n,l){s._fetch(i,r).then(o=>{if(o.ok)(e==="PUT"||e==="PATCH"||e==="POST"||e==="DELETE")&&s.invalidateCache(i),o.text?o.text().then(c=>{o.responseText=c,n(o)}):n(o);else{let c="Web error: "+o.status;o.statusText&&(c+=" ("+o.statusText+")"),c+=" on "+e+" of <"+i+">",o.responseText&&(c+=": "+o.responseText);let h=new Error(c);h.response=o,l(h)}},o=>{let c="Fetch error for "+e+" of <"+i+">:"+o;l(new Error(c))})})}lookUpThing(e,t){let r=this.store.uris(e);return r=r.map(i=>bn(i)),r.forEach(i=>{this.lookedUp[i]=!0}),this.load(r,{referringTerm:t})}getHeader(e,t){const r=this.store,i=e.value,s=r.each(void 0,this.ns.link("requestedURI"),r.rdfFactory.literal(i));for(let n=0;n<s.length;n++){let l=s[n];if(l!==void 0){let o=r.any(l,this.ns.link("response"));if(o!==void 0&&r.anyValue(o,this.ns.http("status"))&&r.anyValue(o,this.ns.http("status")).startsWith("2")){let c=r.each(o,this.ns.httph(t.toLowerCase()));return c.length?c.map(h=>h.value):[]}}}}saveRequestMetadata(e,t){let r=t.req,i=this.store,s=t.referringTerm;this.addStatus(t.req,"Accept: "+t.headers.accept),Gi(s)&&i.add(i.rdfFactory.namedNode(e),this.ns.link("requestedBy"),s,this.appNode),t.original&&t.original.value!==e&&i.add(r,this.ns.link("orginalURI"),i.rdfFactory.literal(t.original.value),this.appNode);const n=new Date,l="["+n.getHours()+":"+n.getMinutes()+":"+n.getSeconds()+"] ";i.add(r,this.ns.rdfs("label"),i.rdfFactory.literal(l+" Request for "+e),this.appNode),i.add(r,this.ns.link("requestedURI"),i.rdfFactory.literal(e),this.appNode),i.add(r,this.ns.link("status"),i.collection(),this.appNode)}saveResponseMetadata(e,t){const r=this.store;let i=r.bnode();return r.add(t.req,this.ns.link("response"),i,this.appNode),r.add(i,this.ns.http("status"),r.rdfFactory.literal(e.status),this.appNode),r.add(i,this.ns.http("statusText"),r.rdfFactory.literal(e.statusText),this.appNode),e.headers.forEach((s,n)=>{r.add(i,this.ns.httph(n),this.store.rdfFactory.literal(s),this.appNode),n==="content-type"&&r.add(t.resource,this.ns.rdf("type"),r.rdfFactory.namedNode(nc(s).value),this.appNode)}),i}objectRefresh(e){let t=this.store.uris(e);if(typeof t<"u")for(let r=0;r<t.length;r++)this.refresh(this.store.rdfFactory.namedNode(bn(t[r])))}refresh(e,t){this.fireCallbacks("refresh",arguments),this.nowOrWhenFetched(e,{force:!0,clearPreviousData:!0},t)}refreshIfExpired(e,t){let r=this.getHeader(e,"Expires");!r||new Date(r[0]).getTime()<=new Date().getTime()?this.refresh(e,t):t(!0,"Not expired",{})}retract(e){this.store.removeMany(void 0,void 0,void 0,e),e.value&&delete this.requested[bn(e.value)],this.fireCallbacks("retract",arguments)}getState(e){return typeof this.requested[e]>"u"?"unrequested":this.requested[e]===!0?"requested":this.requested[e]==="done"?"fetched":this.requested[e]==="redirected"?this.getState(this.redirectedTo[e]):"failed"}isPending(e){return this.requested[e]===!0}unload(e){this.store.removeDocument(e),delete this.requested[e.value]}addHandler(e){this.handlers.push(e),e.register(this)}retryNoCredentials(e,t){t.retriedWithNoCredentials=!0,delete this.requested[e],delete this.fetchQueue[e];let r=Object.assign({},t,{credentials:"omit"});return this.addStatus(t.req,"Abort: Will retry with credentials SUPPRESSED to see if that helps"),this.load(e,r)}isCrossSite(e){if(typeof document>"u"||!document.location)return!1;const t=Xo,r=""+document.location;return(t(r)&&t(e)&&t(r))!==t(e)}handleError(e,t,r){if(this.isCrossSite(t)){if(r.credentials&&r.credentials==="include"&&!r.retriedWithNoCredentials)return this.retryNoCredentials(t,r);let s=nt.crossSiteProxy(t);if(s&&!r.proxyUsed)return this.redirectToProxy(s,r)}var i;return e instanceof Error?i="Fetch error: "+e.message:(i=e.statusText,e.responseText&&(i+=` ${e.responseText}`)),this.failFetch(r,i,e.status||998,e)}addType(e,t,r,i){let s=t;if(i){var n=r.any(s,this.ns.link("requestedURI"));n&&n.value!==i&&r.add(r.rdfFactory.namedNode(i),this.ns.rdf("type"),e,this.appNode)}for(;;){const c=r.any(s,this.ns.link("requestedURI"));if(c&&c.value&&r.add(r.rdfFactory.namedNode(c.value),this.ns.rdf("type"),e,this.appNode),s=r.any(void 0,r.rdfFactory.namedNode("http://www.w3.org/2007/ont/link#redirectedRequest"),s),!s)break;var l=r.any(s,r.rdfFactory.namedNode("http://www.w3.org/2007/ont/link#response"));if(!l)break;var o=r.any(l,r.rdfFactory.namedNode("http://www.w3.org/2007/ont/http#status"));if(!o||o!=="301"&&o!=="302")break}}handleResponse(e,t,r){const i=this.store,s=e.headers,n=r.req,l=this.saveResponseMetadata(e,r),o=this.normalizedContentType(r,s)||"";let c=s.get("content-location");if(e.status===0)return this.handleError(e,t,r);if(e.status>=400)return e.status===404&&(this.nonexistent[r.original.value]=!0,this.nonexistent[t]=!0),this.saveErrorResponse(e,l).then(()=>{let w=r.resource+" "+e.statusText;return this.failFetch(r,w,e.status,e)});var h=null,p=null;if(c&&(p=xt(c,t),p!==t&&(h=p)),e.status===200){if(this.addType(this.ns.link("Document"),n,i,t),h&&this.addType(this.ns.link("Document"),n,i,h),r.clearPreviousData){const y=i.statementsMatching(void 0,void 0,void 0,r.resource).slice();for(let N=0;N<y.length;N++)i.removeStatement(y[N])}let w=o.includes("image/")||o.includes("application/pdf");o&&w&&(this.addType(i.rdfFactory.namedNode("http://purl.org/dc/terms/Image"),n,i,t),h&&this.addType(i.rdfFactory.namedNode("http://purl.org/dc/terms/Image"),n,i,h))}if(c){if(!r.force&&h&&this.requested[p]==="done")return this.doneFetch(r,e);this.requested[p]=!0}this.parseLinkHeader(s.get("link"),r.original,n);let m=this.handlerForContentType(o,e);return m?e.text().then(w=>(e.responseText=w,m.parse(this,w,r,e))):(this.addStatus(n,"Fetch over. No data handled."),this.doneFetch(r,e))}saveErrorResponse(e,t){let r=this.store;return e.text().then(i=>{i.length>10&&r.add(t,this.ns.http("content"),r.rdfFactory.literal(i),t)})}handlerForContentType(e,t){if(!e)return null;let r=this.handlers.find(i=>e.match(i.pattern));return r?new r(t):null}guessContentType(e){return hl[e.split(".").pop()]}normalizedContentType(e,t){if(e.forceContentType)return e.forceContentType;let r=t.get("content-type");if(!r||r.includes("application/octet-stream")){let s=this.guessContentType(e.resource.value);if(s)return s}let i=zi(e.resource.value);return!r&&["file","chrome"].includes(i)?"text/xml":r}redirectToProxy(e,t){this.addStatus(t.req,"BLOCKED -> Cross-site Proxy to <"+e+">"),t.proxyUsed=!0;const r=this.store,i=t.req;t.noMeta||(r.add(i,this.ns.link("redirectedTo"),r.rdfFactory.namedNode(e),i),this.addStatus(i,"redirected to new request")),this.requested[t.resource.value]="redirected",this.redirectedTo[t.resource.value]=e;let s=Object.assign({},t);return s.baseURI=t.resource.value,this.fetchUri(e,s).then(n=>(s.noMeta||r.add(i,this.ns.link("redirectedRequest"),s.req,this.appNode),n))}setRequestTimeout(e,t){return new Promise(r=>{this.timeouts[e]=(this.timeouts[e]||[]).concat(setTimeout(()=>{this.isPending(e)&&!t.retriedWithNoCredentials&&!t.proxyUsed&&r(this.failFetch(t,`Request to ${e} timed out`,"timeout"))},this.timeout))})}addFetchCallback(e,t){this.fetchCallbacks[e]?this.fetchCallbacks[e].push(t):this.fetchCallbacks[e]=[t]}acceptString(){let e="";for(let t in this.mediatypes){e!==""&&(e+=", "),e+=t;for(let r in this.mediatypes[t])e+=";"+r+"="+this.mediatypes[t][r]}return e}}re(nt,"HANDLERS",void 0);re(nt,"CONTENT_TYPE_BY_EXT",void 0);re(nt,"crossSiteProxyTemplate",void 0);nt.HANDLERS=Ha;nt.CONTENT_TYPE_BY_EXT=hl;class td{constructor(e){if(re(this,"store",void 0),re(this,"ifps",void 0),re(this,"fps",void 0),re(this,"patchControl",void 0),re(this,"ns",void 0),e=e||new sn,e.updater)throw new Error("You can't have two UpdateManagers for the same store");e.fetcher||(e.fetcher=new nt(e)),this.store=e,e.updater=this,this.ifps={},this.fps={},this.ns={},this.ns.link=be("http://www.w3.org/2007/ont/link#"),this.ns.http=be("http://www.w3.org/2007/ont/http#"),this.ns.httph=be("http://www.w3.org/2007/ont/httph#"),this.ns.ldp=be("http://www.w3.org/ns/ldp#"),this.ns.rdf=be("http://www.w3.org/1999/02/22-rdf-syntax-ns#"),this.ns.rdfs=be("http://www.w3.org/2000/01/rdf-schema#"),this.ns.rdf=be("http://www.w3.org/1999/02/22-rdf-syntax-ns#"),this.ns.owl=be("http://www.w3.org/2002/07/owl#"),this.patchControl=[]}patchControlFor(e){return this.patchControl[e.value]||(this.patchControl[e.value]=[]),this.patchControl[e.value]}isHttpUri(e){return e.slice(0,4)==="http"}flagAuthorizationMetadata(e){e||(e=this.store);const t=e.fetcher?.appNode,r=e.statementsMatching(void 0,this.ns.link("requestedURI"),void 0,t).map(i=>i.subject);for(const i of r){const s=e.any(i,this.ns.link("response"),null,t);s!=null&&e.add(s,this.ns.link("outOfDate"),!0,t)}}async checkEditable(e,t){if(!e)return!1;t||(t=this.store);const r=this.editable(e,t);return r!==void 0?r:(await t.fetcher?.load(e),this.editable(e,t))}editable(e,t){if(!e)return!1;if(t||(t=this.store),e=Cn(e),!this.isHttpUri(e)&&t.holds(t.rdfFactory.namedNode(e),t.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),t.rdfFactory.namedNode("http://www.w3.org/2007/ont/link#MachineEditableDocument")))return"LOCALFILE";var r,i=!1;const s=t.fetcher?.appNode;for(var n=t.each(void 0,this.ns.link("requestedURI"),bn(e),s),l,o=0;o<n.length;o++)if(r=n[o],r!==void 0){const N=t.any(r,this.ns.link("response"),null,s);if(N!==void 0){if(t.anyJS(N,this.ns.link("outOfDate"),null,s))continue;var c=t.anyValue(N,this.ns.httph("wac-allow"));if(c)for(var h of c.split(",")){var p=h.split("=");if(p[0].includes("user")&&!p[1].includes("write")&&!p[1].includes("append"))return!1}var m=t.each(N,this.ns.httph("accept-patch"));if(m.length)for(let L=0;L<m.length;L++){if(l=m[L].value.trim(),l.indexOf("application/sparql-update")>=0||l.indexOf("application/sparql-update-single-match")>=0)return"SPARQL";if(l.indexOf("text/n3")>=0)return"N3PATCH"}var w=t.each(N,this.ns.httph("ms-author-via"));if(w.length)for(let L=0;L<w.length;L++){if(l=w[L].value.trim(),l.indexOf("SPARQL")>=0)return"SPARQL";if(l.indexOf("DAV")>=0)return"DAV"}if(!this.isHttpUri(e))return c?"LOCALFILE":!1;var y=t.each(N,this.ns.http("status"));if(y.length)for(let L=0;L<y.length;L++)(y[L]===200||y[L]===404)&&(i=!0)}}if(n.length!==0){if(i)return!1}}anonymize(e){return e.toNT().substr(0,2)==="_:"&&this.mentioned(e)?"?"+e.toNT().substr(2):e.toNT()}anonymizeNT(e){return this.anonymize(e.subject)+" "+this.anonymize(e.predicate)+" "+this.anonymize(e.object)+" ."}nTriples(e){return`${e.subject.toNT()} ${e.predicate.toNT()} ${e.object.toNT()} .`}statementBnodes(e){return[e.subject,e.predicate,e.object].filter(function(t){return jo(t)})}statementArrayBnodes(e){var t=[];for(let i=0;i<e.length;i++)t=t.concat(this.statementBnodes(e[i]));t.sort();var r=[];for(let i=0;i<t.length;i++)(i===0||!t[i].equals(t[i-1]))&&r.push(t[i]);return r}cacheIfps(){this.ifps={};var e=this.store.each(void 0,this.ns.rdf("type"),this.ns.owl("InverseFunctionalProperty"));for(let t=0;t<e.length;t++)this.ifps[e[t].value]=!0;this.fps={},e=this.store.each(void 0,this.ns.rdf("type"),this.ns.owl("FunctionalProperty"));for(let t=0;t<e.length;t++)this.fps[e[t].value]=!0}bnodeContext2(e,t,r){var i=this.store.statementsMatching(void 0,void 0,e,t),s,n;for(let l=0;l<i.length;l++)if(this.fps[i[l].predicate.value]){if(s=i[l].subject,!s.isBlank)return[i[l]];if(r&&(n=this.bnodeContext2(s,t,r-1),n))return n.concat([i[l]])}i=this.store.statementsMatching(e,void 0,void 0,t);for(let l=0;l<i.length;l++)if(this.ifps[i[l].predicate.value]){if(s=i[l].object,!s.isBlank)return[i[l]];if(r&&(n=this.bnodeContext2(s,t,r-1),n))return n.concat([i[l]])}return null}bnodeContext1(e,t){for(var r=0;r<3;r++){var i=this.bnodeContext2(e,t,r);if(i!==null)return i}return this.store.connectedStatements(e,t)}mentioned(e){return this.store.statementsMatching(e,null,null,null).length!==0||this.store.statementsMatching(null,e).length!==0||this.store.statementsMatching(null,null,e).length!==0}bnodeContext(e,t){var r=[];if(e.length){this.cacheIfps();for(let s=0;s<e.length;s++){var i=e[s];this.mentioned(i)&&(r=r.concat(this.bnodeContext1(i,t)))}}return r}statementContext(e){var t=this.statementBnodes(e);return this.bnodeContext(t,e.graph)}contextWhere(e){var t=this;return!e||e.length===0?"":"WHERE { "+e.map(function(r){return t.anonymizeNT(r)}).join(`
`)+` }
`}fire(e,t,r,i={}){return Promise.resolve().then(()=>{if(!e)throw new Error("No URI given for remote editing operation: "+t);return i.noMeta=!0,i.contentType=i.contentType||"application/sparql-update",i.body=t,this.store.fetcher.webOperation("PATCH",e,i)}).then(s=>{if(!s.ok){let n="UpdateManager: update failed for <"+e+"> status="+s.status+", "+s.statusText+`
   for query: `+t;throw new Error(n)}r(e,s.ok,s.responseText,s)}).catch(s=>{r(e,!1,s.message,s)})}update_statement(e){if(!(e&&!e.graph)){var t=this,r=this.statementContext(e);return{statement:e?[e.subject,e.predicate,e.object,e.graph]:void 0,statementNT:e?this.anonymizeNT(e):void 0,where:t.contextWhere(r),set_object:function(i,s){var n=this.where;n+="DELETE DATA { "+this.statementNT+` } ;
`,n+="INSERT DATA { "+this.anonymize(this.statement[0])+" "+this.anonymize(this.statement[1])+" "+this.anonymize(i)+`  . }
`,t.fire(this.statement[3].value,n,s)}}}}insert_statement(e,t){var r=e instanceof Array?e[0]:e,i=this.contextWhere(this.statementContext(r));if(e instanceof Array){var s="";for(let n=0;n<e.length;n++)s+=e[n]+`
`;i+="INSERT DATA { "+s+` }
`}else i+="INSERT DATA { "+this.anonymize(e.subject)+" "+this.anonymize(e.predicate)+" "+this.anonymize(e.object)+`  . }
`;this.fire(r.graph.value,i,t)}delete_statement(e,t){var r=e instanceof Array?e[0]:e,i=this.contextWhere(this.statementContext(r));if(e instanceof Array){var s="";for(let n=0;n<e.length;n++)s+=e[n]+`
`;i+="DELETE DATA { "+s+` }
`}else i+="DELETE DATA { "+this.anonymize(e.subject)+" "+this.anonymize(e.predicate)+" "+this.anonymize(e.object)+`  . }
`;this.fire(r.graph.value,i,t)}requestDownstreamAction(e,t){var r=this.patchControlFor(e);if(!r.pendingUpstream)t(e);else if(r.downstreamAction){if(""+r.downstreamAction!=""+t)throw new Error("Can't wait for > 1 different downstream actions")}else r.downstreamAction=t}clearUpstreamCount(e){var t=this.patchControlFor(e);t.upstreamCount=0}getUpdatesVia(e){var t=this.store.fetcher.getHeader(e,"updates-via");return!t||!t.length?null:t[0].trim()}addDownstreamChangeListener(e,t){var r=this.patchControlFor(e);r.downstreamChangeListeners||(r.downstreamChangeListeners=[]),r.downstreamChangeListeners.push(t),this.setRefreshHandler(e,i=>{this.reloadAndSync(i)})}reloadAndSync(e){var t=this.patchControlFor(e),r=this;if(t.reloading){t.outOfDate=!0;return}t.reloading=!0;var i=1e3,s=function(){r.reload(r.store,e,function(n,l,o){if(n){if(t.downstreamChangeListeners)for(let c=0;c<t.downstreamChangeListeners.length;c++)t.downstreamChangeListeners[c]();t.reloading=!1,t.outOfDate&&(t.outOfDate=!1,s())}else t.reloading=!1,o&&o.status===0&&(t.reloading=!0,i=i*2,setTimeout(s,i))})};s()}setRefreshHandler(e,t){let r=this.getUpdatesVia(e);var i=t,s=this,n=this,l=1500,o=0;if(!r)return!1;r=xt(r,e.value);const c=r.replace(/^http:/,"ws:").replace(/^https:/,"wss:");var h=function(){var p;if(typeof WebSocket<"u")p=new WebSocket(c);else if(typeof window<"u"&&window.WebSocket)p=window.WebSocket(c);else return;p.onopen=function(){l=1500,this.send("sub "+e.value),o&&n.requestDownstreamAction(e,i)};var m=s.patchControlFor(e);m.upstreamCount=0,p.onerror=function(y){},p.onclose=function(w){l*=2,o+=1,setTimeout(function(){h()},l)},p.onmessage=function(w){if(w.data&&w.data.slice(0,3)==="pub"){if("upstreamCount"in m&&(m.upstreamCount-=1,m.upstreamCount>=0))return;m.upstreamCount=0,s.requestDownstreamAction(e,i)}}};return h(),!0}updateMany(e,t=[]){const r=e.concat(t).map(l=>l.why),i=this,s=[];r.forEach(l=>{s.find(o=>o.equals(l))||s.push(l)});const n=s.map(l=>i.update(e.filter(o=>o.why.equals(l)),t.filter(o=>o.why.equals(l))));return Promise.all(n)}constructSparqlUpdateQuery(e,t,r){var i=this.contextWhere(r),s="";if(i.length){if(e.length){s+="DELETE { ";for(let n=0;n<e.length;n++)s+=this.anonymizeNT(e[n])+`
`;s+=` }
`}if(t.length){s+="INSERT { ";for(let n=0;n<t.length;n++)s+=this.anonymizeNT(t[n])+`
`;s+=` }
`}s+=i}else{if(e.length){s+="DELETE DATA { ";for(let n=0;n<e.length;n++)s+=this.anonymizeNT(e[n])+`
`;s+=` } 
`}if(t.length){e.length&&(s+=" ; "),s+="INSERT DATA { ";for(let n=0;n<t.length;n++)s+=this.nTriples(t[n])+`
`;s+=` }
`}}return s}constructN3PatchQuery(e,t,r){var i=`
@prefix solid: <http://www.w3.org/ns/solid/terms#>.
@prefix ex: <http://www.example.org/terms#>.

_:patch
`;return r&&r.length>0&&(i+=`
      solid:where {
        ${r.map(s=>this.anonymizeNT(s)).join(`
        `)}
      };`),e.length>0&&(i+=`
      solid:deletes {
        ${e.map(s=>this.anonymizeNT(s)).join(`
        `)}
      };`),t.length>0&&(i+=`
      solid:inserts {
        ${t.map(s=>this.anonymizeNT(s)).join(`
        `)}
      };`),i+=`   a solid:InsertDeletePatch .
`,i}update(e,t,r,i,s={}){if(!r){var n=this;return new Promise(function(x,G){n.update(e,t,function(M,X,k){X?x():G(new Error(k))},i,s)})}try{var l=this.store,o=e?Zr(e)?e.statements:e instanceof Array?e:[e]:[],c=t?Zr(t)?t.statements:t instanceof Array?t:[t]:[];if(!(o instanceof Array))throw new Error("Type Error "+typeof o+": "+o);if(!(c instanceof Array))throw new Error("Type Error "+typeof c+": "+c);if(o.length===0&&c.length===0)return r(null,!0);var h=o.length?o[0].graph:c[0].graph;if(!h){let x="Error patching: statement does not specify which document to patch:"+o[0]+", "+c[0];throw new Error(x)}if(h.termType!=="NamedNode"){let x="Error patching: document not a NamedNode:"+o[0]+", "+c[0];throw new Error(x)}var p=this.patchControlFor(h),m=Date.now(),w=["subject","predicate","object","why"],y=["insert","delete"],N={delete:o,insert:c};y.map(function(x){N[x].map(function(G){if(!h.equals(G.graph))throw new Error("update: destination "+h+" inconsistent with delete quad "+G.graph);w.map(function(M){if(typeof G[M]>"u")throw new Error("update: undefined "+M+" of statement.")})})});var D=this.editable(h.value,l);if(D===!1)throw new Error("Update: Can't make changes in uneditable "+h);if(D===void 0){if(i)throw new Error("Update: Loaded "+h+"but still can't figure out what editing protocol it supports.");this.store.fetcher.load(h).then(x=>{this.update(e,t,r,!0,s)},x=>{if(x.response.status===404)this.update(e,t,r,!0,s);else throw new Error(`Update: Can't get updatability status ${h} before patching: ${x}`)});return}else if(D.indexOf("SPARQL")>=0||D.indexOf("N3PATCH")>=0){var L=D.indexOf("SPARQL")>=0,R=[];o.length&&(R=this.statementArrayBnodes(o)),c.length&&(R=R.concat(this.statementArrayBnodes(c)));var Q=this.bnodeContext(R,h),J=L?this.constructSparqlUpdateQuery(o,c,Q):this.constructN3PatchQuery(o,c,Q);s.contentType=L?"application/sparql-update":"text/n3",p.pendingUpstream=p.pendingUpstream?p.pendingUpstream+1:1,"upstreamCount"in p&&(p.upstreamCount+=1),this.fire(h.value,J,(x,G,M,X)=>{if(X.elapsedTimeMs=Date.now()-m,G){try{l.remove(o)}catch(H){G=!1,M="Remote Ok BUT error deleting "+o.length+" from store!!! "+H}for(let H=0;H<c.length;H++)l.add(c[H].subject,c[H].predicate,c[H].object,h)}if(r(x,G,M,X),p.pendingUpstream-=1,p.pendingUpstream===0&&p.downstreamAction){var k=p.downstreamAction;delete p.downstreamAction,k(h)}},s)}else if(D.indexOf("DAV")>=0)this.updateDav(h,o,c,r,s);else if(D.indexOf("LOCALFILE")>=0)try{this.updateLocalFile(h,o,c,r,s)}catch{r(h.value,!1,"Exception trying to write back file <"+h.value+`>
`)}else throw new Error("Unhandled edit method: '"+D+"' for "+h)}catch(x){r(void 0,!1,"Exception in update: "+x+`
`+sc(x))}}updateDav(e,t,r,i,s={}){let n=this.store;var l=n.any(e,this.ns.link("request"));if(!l)throw new Error("No record of our HTTP GET request for document: "+e);var o=n.any(l,this.ns.link("response"));if(!o)return null;var c=n.the(o,this.ns.httph("content-type")).value;let h=n.statementsMatching(void 0,void 0,void 0,e).slice();for(let y=0;y<t.length;y++)Ua(h,t[y]);for(let y=0;y<r.length;y++)h.push(r[y]);const p=this.serialize(e.value,h,c);var m=n.the(o,this.ns.httph("content-location")),w;return m&&(w=xt(m.value,w)),s.contentType=c,s.noMeta=!0,s.body=p,n.fetcher.webOperation("PUT",w,s).then(y=>{if(!y.ok)throw new Error(y.error);for(let N=0;N<t.length;N++)n.remove(t[N]);for(let N=0;N<r.length;N++)n.add(r[N].subject,r[N].predicate,r[N].object,e);i(e.value,y.ok,y.responseText,y)}).catch(y=>{i(e.value,!1,y.message,y)})}updateLocalFile(e,t,r,i,s={}){const n=this.store;let l=n.statementsMatching(void 0,void 0,void 0,e).slice();for(let p=0;p<t.length;p++)Ua(l,t[p]);for(let p=0;p<r.length;p++)l.push(r[p]);var o=e.value.lastIndexOf(".");if(o<1)throw new Error("Rewriting file: No filename extension: "+e.value);var c=e.value.slice(o+1);let h=nt.CONTENT_TYPE_BY_EXT[c];if(!h)throw new Error("File extension ."+c+" not supported for data write");s.body=this.serialize(e.value,l,h),s.contentType=h,n.fetcher.webOperation("PUT",e.value,s).then(p=>{if(!p.ok)return i(e.value,!1,p.error);for(let m=0;m<t.length;m++)n.remove(t[m]);for(let m=0;m<r.length;m++)n.add(r[m].subject,r[m].predicate,r[m].object,e);i(e.value,!0,"")})}serialize(e,t,r){const i=this.store;let s;if(typeof t=="string")return t;var n=Qs(i);switch(n.suggestNamespaces(i.namespaces),n.setBase(e),r){case"text/xml":case"application/rdf+xml":s=n.statementsToXML(t);break;case"text/n3":case"text/turtle":case"application/x-turtle":case"application/n3":s=n.statementsToN3(t);break;default:throw new Error("Content-type "+r+" not supported for data serialization")}return s}put(e,t,r,i){const s=this.store;let n;return Promise.resolve().then(()=>(n=this.serialize(e.value,t,r),s.fetcher.webOperation("PUT",e.value,{contentType:r,body:n}))).then(l=>{if(!l.ok)return i(e.value,l.ok,l.error,l);delete s.fetcher.nonexistent[e.value],delete s.fetcher.requested[e.value],typeof t!="string"&&t.map(o=>{s.addStatement(o)}),i(e.value,l.ok,"",l)}).catch(l=>{i(e.value,!1,l.message)})}reload(e,t,r){var i=Date.now();const s={force:!0,noMeta:!0,clearPreviousData:!0};e.fetcher.nowOrWhenFetched(t.value,s,function(n,l,o){if(!n)r(!1,"Error reloading data: "+l,o);else if(o.onErrorWasCalled||o.status!==200)r(!1,"Non-HTTP error reloading data: "+l,o);else{var c=Date.now()-i;t.reloadTimeTotal||(t.reloadTimeTotal=0),t.reloadTimeCount||(t.reloadTimeCount=0),t.reloadTimeTotal+=c,t.reloadTimeCount+=1,r(!0)}})}}const Vr={...Ma,fetcher(a,e){return new nt(a,e)},graph(a=void 0,e=void 0){return new sn(a,e||{rdfFactory:Ma})},lit(a,e,t){return this.literal(""+a,e||t)},st(a,e,t,r){return this.quad(a,e,t,r)}},wl={};for(const a in Vr)typeof Vr[a]=="function"&&(wl[a]=Vr[a].bind(Vr));const{graph:nd,lit:vs,namedNode:Vn}=wl;new mr;We.fromValue;Wt.nextId;function El(a){const e=nd(),t={};a?.fetch&&(t.fetch=a.fetch);const r=new nt(e,t);e.updater=new td(e);async function i(s){const n=s.replace(/#.*$/,""),l=Vn(n);return await r.load(l),l}return{store:e,fetcher:r,fetchDocument:i}}const zr=[];function Be(a){zr.push(a)}function Cl(a,e){const t=[];for(let r=zr.length-1;r>=0;r--)try{zr[r].canHandle(a,e)&&t.push(zr[r])}catch{}return t}const Rn={STATE_CHANGE:"sessionStateChange",EXPIRATION_WARNING:"sessionExpirationWarning",EXPIRATION:"sessionExpiration"};class rd{constructor(e="solid-oidc",t="session",r=1){this.dbName=e,this.storeName=t,this.dbVersion=r,this.db=null}async init(){return new Promise((e,t)=>{const r=indexedDB.open(this.dbName,this.dbVersion);r.onerror=()=>t(new Error(`Database error: ${r.error}`)),r.onsuccess=()=>{this.db=r.result,e(this)},r.onupgradeneeded=i=>{const s=i.target.result;s.objectStoreNames.contains(this.storeName)||s.createObjectStore(this.storeName)}})}async setItem(e,t){return this.db||await this.init(),new Promise((r,i)=>{const s=this.db.transaction(this.storeName,"readwrite");s.oncomplete=()=>r(),s.onerror=()=>i(new Error(`Transaction error: ${s.error}`)),s.objectStore(this.storeName).put(t,e)})}async getItem(e){return this.db||await this.init(),new Promise((t,r)=>{const i=this.db.transaction(this.storeName,"readonly");i.onerror=()=>r(new Error(`Transaction error: ${i.error}`));const s=i.objectStore(this.storeName).get(e);s.onsuccess=()=>t(s.result||null)})}async deleteItem(e){return this.db||await this.init(),new Promise((t,r)=>{const i=this.db.transaction(this.storeName,"readwrite");i.oncomplete=()=>t(),i.onerror=()=>r(new Error(`Transaction error: ${i.error}`)),i.objectStore(this.storeName).delete(e)})}async clear(){return this.db||await this.init(),new Promise((e,t)=>{const r=this.db.transaction(this.storeName,"readwrite");r.oncomplete=()=>e(),r.onerror=()=>t(new Error(`Transaction error: ${r.error}`)),r.objectStore(this.storeName).clear()})}close(){this.db&&(this.db.close(),this.db=null)}}async function ad(){const a=crypto.randomUUID()+"-"+crypto.randomUUID(),e=new Uint8Array(await crypto.subtle.digest("SHA-256",new TextEncoder().encode(a))),t=btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"");return{verifier:a,challenge:t}}async function Nl(a,e,t,r=null){const i=await Ps(a.publicKey),s={htu:e,htm:t};return r&&(s.ath=r),new Io(s).setIssuedAt().setJti(crypto.randomUUID()).setProtectedHeader({alg:"ES256",typ:"dpop+jwt",jwk:i}).sign(a.privateKey)}async function id(a){const e=new TextEncoder().encode(a),t=await crypto.subtle.digest("SHA-256",e),r=Array.from(new Uint8Array(t));return btoa(String.fromCharCode(...r)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function sd(a){const e=new URL(a).origin,t=await fetch(`${e}/.well-known/openid-configuration`);if(!t.ok)throw new Error(`OIDC discovery failed: ${t.status}`);return t.json()}async function ld(a,e){const t=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({application_type:"web",redirect_uris:e,token_endpoint_auth_method:"none",grant_types:["authorization_code","refresh_token"],response_types:["code"],scope:"openid offline_access webid"})});if(!t.ok)throw new Error(`Client registration failed: ${t.status}`);return t.json()}async function bl(a,e,t){const r=await Nl(t,a,"POST"),i=await fetch(a,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",DPoP:r},body:new URLSearchParams(e)});if(!i.ok)throw new Error(`Token request failed: ${i.status}`);return i.json()}async function ud(a,e,t,r,i){const s=Do(new URL(e)),{payload:n}=await _o(a,s,{issuer:t,audience:"solid"}),l=await So(await Ps(i.publicKey));if(n.cnf?.jkt!==l)throw new Error("DPoP thumbprint mismatch");if(n.client_id!==r)throw new Error("client_id mismatch");return n}async function od(a){await a.init();const[e,t,r,i]=await Promise.all([a.getItem("refresh_token"),a.getItem("token_endpoint"),a.getItem("client_id"),a.getItem("dpop_keypair")]);if(!e||!t||!r||!i)throw new Error("Missing refresh data");const s=await bl(t,{grant_type:"refresh_token",refresh_token:e,client_id:r},i);return s.refresh_token&&await a.setItem("refresh_token",s.refresh_token),a.close(),{...s,dpop_key_pair:i}}class cd extends EventTarget{constructor(e={}){super(),this.clientId=e.clientId||null,this.database=e.database||new rd,this.onStateChange=e.onStateChange||null,this.onExpirationWarning=e.onExpirationWarning||null,this.onExpiration=e.onExpiration||null,this._isActive=!1,this._webId=null,this._exp=null,this._ath=null,this._tokens=null,this._idpDetails=null,this._refreshPromise=null,this.onStateChange&&this.addEventListener(Rn.STATE_CHANGE,this.onStateChange),this.onExpirationWarning&&this.addEventListener(Rn.EXPIRATION_WARNING,this.onExpirationWarning),this.onExpiration&&this.addEventListener(Rn.EXPIRATION,this.onExpiration)}get isActive(){return this._isActive}get webId(){return this._webId}isExpired(){return this._exp?Math.floor(Date.now()/1e3)>=this._exp:!0}getExpiresIn(){return this._exp?this._exp-Math.floor(Date.now()/1e3):-1}async login(e,t){const r=new URL(t),i=r.origin+r.pathname+r.search,s=await sd(e),n=s.issuer,l=m=>m.endsWith("/")?m.slice(0,-1):m;if(l(e)!==l(n))throw new Error(`Issuer mismatch: ${n} !== ${e}`);sessionStorage.setItem("solid_oidc_idp",n),sessionStorage.setItem("solid_oidc_token_endpoint",s.token_endpoint),sessionStorage.setItem("solid_oidc_jwks_uri",s.jwks_uri);let o=this.clientId;o||(o=(await ld(s.registration_endpoint,[i])).client_id,sessionStorage.setItem("solid_oidc_client_id",o));const c=await ad();sessionStorage.setItem("solid_oidc_pkce_verifier",c.verifier);const h=crypto.randomUUID();sessionStorage.setItem("solid_oidc_csrf",h);const p=new URL(s.authorization_endpoint);p.searchParams.set("response_type","code"),p.searchParams.set("redirect_uri",i),p.searchParams.set("scope","openid offline_access webid"),p.searchParams.set("client_id",o),p.searchParams.set("code_challenge_method","S256"),p.searchParams.set("code_challenge",c.challenge),p.searchParams.set("state",h),p.searchParams.set("prompt","consent"),window.location.href=p.toString()}async handleRedirectFromLogin(){const e=new URL(window.location.href),t=e.searchParams.get("code");if(!t)return;const r=sessionStorage.getItem("solid_oidc_idp"),i=e.searchParams.get("iss");if(!r||i!==r)throw new Error(`Issuer mismatch: ${i} !== ${r}`);const s=sessionStorage.getItem("solid_oidc_csrf");if(e.searchParams.get("state")!==s)throw new Error("CSRF token mismatch");e.searchParams.delete("code"),e.searchParams.delete("iss"),e.searchParams.delete("state"),window.history.replaceState({},document.title,e.toString());const n=sessionStorage.getItem("solid_oidc_pkce_verifier"),l=sessionStorage.getItem("solid_oidc_token_endpoint"),o=sessionStorage.getItem("solid_oidc_jwks_uri"),c=this.clientId||sessionStorage.getItem("solid_oidc_client_id");if(!n||!l||!c)throw new Error("Missing session data");const h=await To("ES256"),p=await bl(l,{grant_type:"authorization_code",code:t,code_verifier:n,redirect_uri:e.origin+e.pathname,client_id:c},h);await ud(p.access_token,o,r,c,h),this._idpDetails={idp:r,jwksUri:o,tokenEndpoint:l},await this.database.init(),await Promise.all([this.database.setItem("idp",r),this.database.setItem("jwks_uri",o),this.database.setItem("token_endpoint",l),this.database.setItem("client_id",c),this.database.setItem("dpop_keypair",h),this.database.setItem("refresh_token",p.refresh_token)]),this.database.close(),sessionStorage.removeItem("solid_oidc_idp"),sessionStorage.removeItem("solid_oidc_token_endpoint"),sessionStorage.removeItem("solid_oidc_jwks_uri"),sessionStorage.removeItem("solid_oidc_client_id"),sessionStorage.removeItem("solid_oidc_pkce_verifier"),sessionStorage.removeItem("solid_oidc_csrf"),await this._setTokens({...p,dpop_key_pair:h}),this._dispatchStateChange()}async restore(){return this._refreshPromise?this._refreshPromise:(this._refreshPromise=(async()=>{try{const e=await od(this.database);await this._setTokens(e),this._dispatchStateChange()}catch(e){throw this._isActive&&(this.isExpired()?this._dispatchExpiration():this._dispatchExpirationWarning()),e}finally{this._refreshPromise=null}})(),this._refreshPromise)}async logout(){this._isActive=!1,this._webId=null,this._exp=null,this._ath=null,this._tokens=null,this._idpDetails=null,await this.database.init(),await this.database.clear(),this.database.close(),this._dispatchStateChange()}async authFetch(e,t={}){if(!this._isActive)return fetch(e,t);this.isExpired()&&await this.restore();let r,i,s;e instanceof Request?(r=new URL(e.url),i=t.method||e.method||"GET",s=new Headers(e.headers)):(r=new URL(e.toString()),i=t.method||"GET",s=t.headers?new Headers(t.headers):new Headers);const n=await Nl(this._tokens.dpop_key_pair,`${r.origin}${r.pathname}`,i.toUpperCase(),this._ath);return s.set("DPoP",n),s.set("Authorization",`DPoP ${this._tokens.access_token}`),e instanceof Request?fetch(new Request(e,{...t,headers:s})):fetch(r,{...t,headers:s})}async _setTokens(e){this._tokens=e;const t=Ao(e.access_token);if(!t.webid)throw new Error("Missing webid claim");if(!t.exp)throw new Error("Missing exp claim");this._ath=await id(e.access_token),this._webId=t.webid,this._exp=t.exp,this._isActive=!0}_dispatchStateChange(){this.dispatchEvent(new CustomEvent(Rn.STATE_CHANGE,{detail:{isActive:this._isActive,webId:this._webId}}))}_dispatchExpirationWarning(){this.dispatchEvent(new CustomEvent(Rn.EXPIRATION_WARNING,{detail:{expires_in:this.getExpiresIn()}}))}_dispatchExpiration(){this.dispatchEvent(new CustomEvent(Rn.EXPIRATION))}}const dd={label:"Source",icon:"📄",canHandle(a,e){return!0},render(a,e,t){t.innerHTML="";const r=a.doc(),i=e.match(null,null,null,r),s=e.fetcher,n=hd(i,r,e),l=document.createElement("div");l.className="source-header";const o=document.createElement("h2");if(o.textContent="Source",l.appendChild(o),s){const h=document.createElement("button");h.className="source-edit-btn",h.textContent="Edit",h.addEventListener("click",()=>{xl(t,l,n,r,s)}),l.appendChild(h)}if(t.appendChild(l),i.length===0){const h=document.createElement("p");h.textContent="No triples found in this document.",t.appendChild(h);return}const c=document.createElement("pre");c.className="source-view",c.textContent=n,t.appendChild(c)}};function hd(a,e,t){if(a.length===0)return"";try{return pr(e,t,void 0,"text/turtle")??""}catch{return a.map(r=>`<${r.subject.value}> <${r.predicate.value}> ${r.object.termType==="NamedNode"?`<${r.object.value}>`:`"${r.object.value}"`} .`).join(`
`)}}function xl(a,e,t,r,i){for(;e.nextSibling;)e.nextSibling.remove();const s=e.querySelector(".source-edit-btn");s&&s.remove();const n=document.createElement("div");n.className="source-btn-group";const l=document.createElement("button");l.className="source-save-btn",l.textContent="Save";const o=document.createElement("button");o.className="source-cancel-btn",o.textContent="Cancel",n.appendChild(l),n.appendChild(o),e.appendChild(n);const c=document.createElement("textarea");c.className="source-editor",c.value=t,c.spellcheck=!1,a.appendChild(c),c.focus();const h=document.createElement("p");h.className="source-status",a.appendChild(h),o.addEventListener("click",()=>{ys(a,e,t,r,i)}),l.addEventListener("click",async()=>{l.disabled=!0,o.disabled=!0,h.textContent="Saving...",h.className="source-status";try{const p=await i.webOperation("PUT",r.value,{data:c.value,contentType:"text/turtle"});if(!p.ok)throw new Error(`${p.status} ${p.statusText}`);h.textContent="Saved!",h.className="source-status source-status-ok",setTimeout(()=>{ys(a,e,c.value,r,i)},800)}catch(p){const m=p instanceof Error?p.message:String(p);h.textContent=`Save failed: ${m}`,h.className="source-status source-status-error",l.disabled=!1,o.disabled=!1}})}function ys(a,e,t,r,i){for(;e.nextSibling;)e.nextSibling.remove();const s=e.querySelector(".source-btn-group");s&&s.remove();const n=document.createElement("button");if(n.className="source-edit-btn",n.textContent="Edit",n.addEventListener("click",()=>{xl(a,e,t,r,i)}),e.appendChild(n),t){const l=document.createElement("pre");l.className="source-view",l.textContent=t,a.appendChild(l)}else{const l=document.createElement("p");l.textContent="No triples found in this document.",a.appendChild(l)}}Be(dd);const me=be("http://www.w3.org/1999/02/22-rdf-syntax-ns#"),rt=be("http://www.w3.org/2000/01/rdf-schema#"),et=be("http://purl.org/dc/elements/1.1/"),de=be("http://purl.org/dc/terms/"),Ne=be("http://xmlns.com/foaf/0.1/"),Ke=be("http://www.w3.org/ns/ldp#"),Yt=be("http://www.w3.org/ns/solid/terms#"),ws=be("http://www.w3.org/ns/posix/stat#"),we=be("http://www.w3.org/2006/vcard/ns#"),Gn=be("http://www.w3.org/ns/pim/space#"),vt=be("http://www.w3.org/ns/auth/acl#"),gt=be("http://www.w3.org/ns/ui#"),Ft=be("http://rdfs.org/sioc/ns#"),Ot=be("http://www.w3.org/ns/pim/meeting#"),yt=be("http://www.w3.org/2005/01/wf/flow#"),mt=be("http://www.w3.org/ns/pim/transaction#"),ja=be("http://www.w3.org/ns/pim/tracker#"),Ye=be("https://www.w3.org/ns/activitystreams#"),xn=be("http://www.w3.org/2002/01/bookmark#"),Sa=be("http://www.w3.org/ns/org#"),ea=be("http://www.w3.org/ns/pim/pad#"),Wr=be("http://rdfs.org/sioc/types#"),cr=be("http://purl.org/ontology/olo/core#"),fd=be("http://purl.org/ontology/pbo/core#"),pd=be("http://purl.org/ontology/mo/"),B=be("http://schema.org/");function md(a){const e=a.indexOf("#");return e>=0?a.slice(e+1):""}function fe(a){const e=md(a);if(e)return decodeURIComponent(e);try{const r=new URL(a).pathname.split("/").filter(Boolean);return r.length>0?decodeURIComponent(r[r.length-1]):a}catch{return a}}const Tl="mashlib:navigate";function Va(a){window.dispatchEvent(new CustomEvent(Tl,{detail:{uri:a}}))}function Jt(a,e){const t=document.createElement("a");return t.href=`?uri=${encodeURIComponent(a)}`,t.textContent=e,t.addEventListener("click",r=>{r.preventDefault(),Va(a)}),t}function gd(a,e){return e.any(a,rt("label"),null,null)?.value??e.any(a,Ne("name"),null,null)?.value??e.any(a,de("title"),null,null)?.value??e.any(a,et("title"),null,null)?.value??e.any(a,B("name"),null,null)?.value??fe(a.value)}function vd(a,e){return e.match(null,null,null,null),fe(a)}function yd(a,e){const t=e.match(a,null,null,null),r=new Map;for(const s of t){const n=s.predicate.value;r.has(n)||r.set(n,{predicate:n,predicateLabel:vd(n,e),objects:[]}),r.get(n).objects.push({value:s.object.value,termType:s.object.termType,datatype:s.object.datatype?.value,language:s.object.language})}return[...r.values()].sort((s,n)=>s.predicate===me("type").value?-1:n.predicate===me("type").value?1:s.predicateLabel.localeCompare(n.predicateLabel))}function wd(a){const e=document.createElement("span");if(e.className="outline-value",a.termType==="NamedNode"){const t=Jt(a.value,fe(a.value));t.className="outline-link",t.title=a.value,e.appendChild(t)}else if(a.termType==="BlankNode")e.textContent=`_:${a.value}`,e.className+=" outline-blank";else{const t=document.createElement("span");if(t.className="outline-literal",t.textContent=a.value,e.appendChild(t),a.language){const r=document.createElement("span");r.className="outline-lang",r.textContent=`@${a.language}`,e.appendChild(r)}else if(a.datatype&&!a.datatype.includes("XMLSchema#string")){const r=document.createElement("span");r.className="outline-datatype",r.textContent=`^^${fe(a.datatype)}`,e.appendChild(r)}}return e}function Ed(a,e,t){t.innerHTML="";const r=document.createElement("div");r.className="outline-view";const i=gd(a,e),s=document.createElement("h2");s.className="outline-title",s.textContent=i,r.appendChild(s);const n=document.createElement("p");n.className="outline-uri";const l=document.createElement("code");l.textContent=a.value,n.appendChild(l),r.appendChild(n);const o=yd(a,e);if(o.length===0){const L=document.createElement("p");L.className="outline-empty",L.textContent="No triples found for this resource.",r.appendChild(L),t.appendChild(r);return}const c=o.reduce((L,R)=>L+R.objects.length,0),h=document.createElement("p");h.className="outline-count",h.textContent=`${c} triple${c!==1?"s":""} across ${o.length} predicate${o.length!==1?"s":""}`,r.appendChild(h);const p=document.createElement("table");p.className="outline-table";const m=document.createElement("thead"),w=document.createElement("tr"),y=document.createElement("th");y.textContent="Property";const N=document.createElement("th");N.textContent="Value",w.appendChild(y),w.appendChild(N),m.appendChild(w),p.appendChild(m);const D=document.createElement("tbody");for(const L of o)for(let R=0;R<L.objects.length;R++){const Q=document.createElement("tr"),J=document.createElement("td");if(J.className="outline-predicate",R===0){const G=document.createElement("a");G.href=L.predicate,G.textContent=L.predicateLabel,G.title=L.predicate,G.target="_blank",G.rel="noopener",J.appendChild(G),L.objects.length>1&&(J.rowSpan=L.objects.length),Q.appendChild(J)}const x=document.createElement("td");x.className="outline-object",x.appendChild(wd(L.objects[R])),Q.appendChild(x),D.appendChild(Q)}p.appendChild(D),r.appendChild(p),t.appendChild(r)}const Cd={label:"Outline",icon:"🔍",canHandle(a,e){return e.match(a,null,null,null).length>0},render(a,e,t){Ed(a,e,t)}};Be(Cd);const Nd={label:"Properties",icon:"📋",canHandle(a,e){return!0},render(a,e,t){t.innerHTML="";const r=document.createElement("h2");r.textContent=fe(a.value),t.appendChild(r);const i=document.createElement("p");i.className="subject-uri";const s=document.createElement("a");s.href=a.value,s.textContent=a.value,s.target="_blank",s.rel="noopener",i.appendChild(s),t.appendChild(i);const n=e.match(a,null,null,null);if(n.length===0){const p=document.createElement("p");p.textContent="No properties found for this subject.",t.appendChild(p);return}const l=new Map;for(const p of n){const m=p.predicate.value;l.has(m)||l.set(m,{predicate:p.predicate,objects:[]}),l.get(m).objects.push({value:p.object.value,isUri:p.object.termType==="NamedNode"})}const o=document.createElement("table");o.className="properties-table";const c=document.createElement("thead");c.innerHTML="<tr><th>Property</th><th>Value</th></tr>",o.appendChild(c);const h=document.createElement("tbody");for(const[,{predicate:p,objects:m}]of l)for(const w of m){const y=document.createElement("tr"),N=document.createElement("td");N.className="prop-predicate";const D=document.createElement("a");D.href=p.value,D.textContent=fe(p.value),D.title=p.value,D.target="_blank",D.rel="noopener",N.appendChild(D),y.appendChild(N);const L=document.createElement("td");if(L.className="prop-value",w.isUri){const R=document.createElement("a");R.href=w.value,R.textContent=fe(w.value),R.title=w.value,R.target="_blank",R.rel="noopener",L.appendChild(R)}else L.textContent=w.value;y.appendChild(L),h.appendChild(y)}o.appendChild(h),t.appendChild(o)}};Be(Nd);const Al=[{uri:"Read",label:"Read",description:"can view the resource"},{uri:"Append",label:"Append",description:"can add new content"},{uri:"Write",label:"Write",description:"can modify content"},{uri:"Control",label:"Control",description:"can manage sharing"}],bd=[{label:"Owners",modes:["Read","Write","Control"],color:"#7b2d8e"},{label:"Editors",modes:["Read","Write"],color:"#dc3545"},{label:"Posters",modes:["Read","Append"],color:"#e67e00"},{label:"Submitters",modes:["Append"],color:"#ccaa00"},{label:"Viewers",modes:["Read"],color:"#28a745"}];function xd(a,e){const r=e.each(a,me("type"),null,null).map(i=>i.value);return r.includes(Ke("Container").value)||r.includes(Ke("BasicContainer").value)?!0:a.value.endsWith("/")}function ar(a,e){if(a===Ne("Agent").value)return"Everyone (public)";if(a===vt("AuthenticatedAgent").value)return"Anyone logged in";const t={termType:"NamedNode",value:a},r=e.any(t,Ne("name"),null,null)?.value??e.any(t,we("fn"),null,null)?.value;return r||fe(a)}function Td(a,e){const t=[],r=e.each(null,vt("accessTo"),a,null);for(const s of r){if(s.termType!=="NamedNode")continue;const n=s,l=e.each(n,me("type"),null,null);if(!l.some(p=>p.value===vt("Authorization").value)&&l.length>0)continue;const h=e.each(n,vt("mode"),null,null).map(p=>fe(p.value));for(const p of e.each(n,vt("agent"),null,null))t.push({agentType:"agent",agentUri:p.value,agentLabel:ar(p.value,e),modes:h});for(const p of e.each(n,vt("agentClass"),null,null))t.push({agentType:"agentClass",agentUri:p.value,agentLabel:ar(p.value,e),modes:h});for(const p of e.each(n,vt("agentGroup"),null,null))t.push({agentType:"agentGroup",agentUri:p.value,agentLabel:ar(p.value,e),modes:h})}const i=e.each(null,vt("default"),a,null);for(const s of i){if(s.termType!=="NamedNode")continue;const n=s,o=e.each(n,vt("mode"),null,null).map(c=>fe(c.value));for(const c of e.each(n,vt("agent"),null,null)){const h=c.value;t.some(p=>p.agentUri===h&&p.modes.join()===o.join())||t.push({agentType:"agent",agentUri:h,agentLabel:ar(h,e),modes:o})}for(const c of e.each(n,vt("agentClass"),null,null)){const h=c.value;t.some(p=>p.agentUri===h&&p.modes.join()===o.join())||t.push({agentType:"agentClass",agentUri:h,agentLabel:ar(h,e),modes:o})}}return t}function Ad(a){const e=new Map;for(const t of a){const r=t.modes.sort().join(",");e.has(r)||e.set(r,[]),e.get(r).push(t)}return e}function Dd(a){const e=[...a].sort().join(",");for(const t of bd)if([...t.modes].sort().join(",")===e)return{label:t.label,color:t.color};return{label:a.join(" + "),color:"#555"}}function _d(a,e,t){t.innerHTML="";const r=document.createElement("div");r.className="sharing-view";const i=xd(a,e)?"folder":"file",s=document.createElement("h2");s.className="sharing-title",s.textContent=`Sharing for ${i}`,r.appendChild(s);const n=document.createElement("p");n.className="sharing-resource";const l=document.createElement("code");l.textContent=a.value,n.appendChild(l),r.appendChild(n);const o=Td(a,e);if(o.length===0){const p=document.createElement("p");p.className="sharing-no-acl",p.textContent="No specific sharing settings found. This resource may inherit permissions from its parent container.",r.appendChild(p),Es(r),t.appendChild(r);return}const c=Ad(o),h=document.createElement("div");h.className="sharing-permissions";for(const[p,m]of c){const w=p.split(","),{label:y,color:N}=Dd(w),D=document.createElement("div");D.className="sharing-level";const L=document.createElement("div");L.className="sharing-level-name",L.style.color=N,L.textContent=y,D.appendChild(L);const R=document.createElement("div");R.className="sharing-agents";for(const x of m){const G=document.createElement("span");G.className=`sharing-agent sharing-agent-${x.agentType}`,G.textContent=x.agentLabel,G.title=x.agentUri,R.appendChild(G)}D.appendChild(R);const Q=document.createElement("div");Q.className="sharing-level-desc",Q.style.color=N;const J=w.map(x=>{const G=Al.find(M=>M.uri===x);return G?G.description:x});Q.textContent=J.join(", "),D.appendChild(Q),h.appendChild(D)}if(r.appendChild(h),i==="folder"){const p=document.createElement("p");p.className="sharing-default-info",p.textContent="Folder permissions may also apply as defaults for new resources created within.",r.appendChild(p)}Es(r),t.appendChild(r)}function Es(a){const e=document.createElement("div");e.className="sharing-legend";const t=document.createElement("h3");t.textContent="Access Modes",e.appendChild(t);const r=document.createElement("table");r.className="sharing-legend-table";for(const i of Al){const s=document.createElement("tr"),n=document.createElement("td");n.className="sharing-legend-mode",n.textContent=i.label;const l=document.createElement("td");l.textContent=i.description,s.appendChild(n),s.appendChild(l),r.appendChild(s)}e.appendChild(r),a.appendChild(e)}function Sd(a,e){const r=e.each(a,me("type"),null,null).map(i=>i.value);return!!(r.includes(Ke("Resource").value)||r.includes(Ke("Container").value)||r.includes(Ke("BasicContainer").value)||a.value.endsWith("/"))}const Id={label:"Sharing",icon:"🔒",canHandle(a,e){return Sd(a,e)},render(a,e,t){_d(a,e,t)}};Be(Id);function Ia(a){return fe(a)}function Cs(a){return a.startsWith("http://")||a.startsWith("https://")?fe(a):a.length>120?a.slice(0,117)+"...":a}function Fd(a,e,t){t.innerHTML="";const r=document.createElement("div");r.className="table-view";const i=e.any(a,B("name"),null,null)?.value??e.any(a,de("title"),null,null)?.value??e.any(a,rt("label"),null,null)?.value??fe(a.value),s=document.createElement("h2");s.className="table-title",s.textContent=i,r.appendChild(s);let n=[],l="";const o=e.each(a,B("itemListElement"),null,null);if(o.length>0&&(n=o,l="List Items"),n.length===0){const J=Dl(a,e);J&&(n=J.items,l=fe(J.typeUri))}const c=document.createElement("p");if(c.className="table-count",c.textContent=`${n.length} ${l}${n.length!==1?"s":""}`,r.appendChild(c),n.length===0){const J=document.createElement("p");J.className="table-empty",J.textContent="No items to display.",r.appendChild(J),t.appendChild(r);return}const h=new Set;for(const J of n){const x=e.match(J,null,null,null);for(const G of x){const M=G.predicate.value;M!==me("type").value&&h.add(M)}}const p=Array.from(h),m=[B("name").value,de("title").value,rt("label").value,B("description").value,de("description").value];p.sort((J,x)=>{const G=m.indexOf(J),M=m.indexOf(x);return G!==-1&&M!==-1?G-M:G!==-1?-1:M!==-1?1:Ia(J).localeCompare(Ia(x))});const w=8,y=p.slice(0,w),N=document.createElement("div");N.className="table-scroll";const D=document.createElement("table");D.className="table-data";const L=document.createElement("thead"),R=document.createElement("tr");for(const J of y){const x=document.createElement("th");x.className="table-header",x.textContent=Ia(J),x.setAttribute("data-predicate",J),x.addEventListener("click",()=>{Bd(D,y.indexOf(J))}),R.appendChild(x)}L.appendChild(R),D.appendChild(L);const Q=document.createElement("tbody");for(const J of n){const x=document.createElement("tr");x.className="table-row";for(const G of y){const M=document.createElement("td");M.className="table-cell";const X=e.each(J,Vn(G),null,null);if(X.length>0){const k=X[0].value;if(k.startsWith("http://")||k.startsWith("https://")){const H=document.createElement("a");H.href=k,H.textContent=Cs(k),H.className="table-link",M.appendChild(H)}else M.textContent=Cs(k)}x.appendChild(M)}Q.appendChild(x)}if(D.appendChild(Q),N.appendChild(D),r.appendChild(N),p.length>w){const J=document.createElement("p");J.className="table-more",J.textContent=`+ ${p.length-w} more columns hidden`,r.appendChild(J)}t.appendChild(r)}function Bd(a,e,t,r,i){const s=a.querySelector("tbody");if(!s)return;const n=Array.from(s.querySelectorAll("tr")),l=a.querySelectorAll("th")[e],c=(l?.getAttribute("data-sort")??"none")==="asc"?"desc":"asc";a.querySelectorAll("th").forEach(h=>h.removeAttribute("data-sort")),l?.setAttribute("data-sort",c),n.sort((h,p)=>{const m=h.children[e]?.textContent??"",w=p.children[e]?.textContent??"",y=m.localeCompare(w,void 0,{numeric:!0});return c==="asc"?y:-y});for(const h of n)s.appendChild(h)}const Ld=[B("Dataset").value,B("DataCatalog").value,B("ItemList").value,rt("Class").value];function Dl(a,e){const t=a.doc(),r=e.match(null,me("type"),null,t),i=new Map;for(const l of r){const o=l.object.value;if(o===rt("Resource").value||o===me("Statement").value)continue;const c=i.get(o)??[];c.push(l.subject),i.set(o,c)}let s=null,n=[];for(const[l,o]of i)o.length>=2&&o.length>n.length&&(s=l,n=o);return s&&n.length>=2?{typeUri:s,items:n}:null}function kd(a,e){const t=e.each(a,me("type"),null,null).map(i=>i.value);for(const i of Ld)if(t.includes(i))return!0;if(e.any(a,B("itemListElement"),null,null))return!0;const r=Dl(a,e);return!!(r&&r.items.length>=3)}const Rd={label:"Table",icon:"📊",canHandle(a,e){return kd(a,e)},render(a,e,t){Fd(a,e,t)}};Be(Rd);const Od=[".html",".htm",".xhtml"];function Ud(a){try{const e=new URL(a).pathname.toLowerCase();return Od.some(t=>e.endsWith(t))}catch{return!1}}const Md={label:"HTML",icon:"🌐",canHandle(a,e){return Ud(a.value)},render(a,e,t){t.innerHTML="";const r=document.createElement("div");r.className="html-view";const i=document.createElement("iframe");i.className="html-frame",i.src=a.value,i.setAttribute("sandbox","allow-same-origin"),i.title="HTML content",i.addEventListener("load",()=>{try{const s=i.contentDocument;if(s){const n=s.documentElement.scrollHeight;i.style.height=`${Math.max(n,200)}px`}}catch{i.style.height="80vh"}}),r.appendChild(i),t.appendChild(r)}};Be(Md);const Pd={".mp3":"audio/mpeg",".wav":"audio/wav",".ogg":"audio/ogg",".oga":"audio/ogg",".flac":"audio/flac",".aac":"audio/aac",".m4a":"audio/mp4",".opus":"audio/opus",".weba":"audio/webm"};function Ns(a){try{const e=new URL(a).pathname.toLowerCase();for(const[t,r]of Object.entries(Pd))if(e.endsWith(t))return r}catch{}}function $d(a,e){const r=e.each(a,me("type"),null,null).map(i=>i.value);return!!(r.includes(B("AudioObject").value)||r.includes(pd("Track").value))}const qd={label:"Audio",icon:"🎵",canHandle(a,e){return Ns(a.value)!==void 0||$d(a,e)},render(a,e,t){t.innerHTML="";const r=document.createElement("div");r.className="audio-view";const i=e.any(a,de("title"),null,null)?.value??e.any(a,B("name"),null,null)?.value??fe(a.value),s=document.createElement("h3");s.className="audio-title",s.textContent=i,r.appendChild(s);const n=e.any(a,B("byArtist"),null,null)?.value??e.any(a,de("creator"),null,null)?.value;if(n){const p=document.createElement("p");p.className="audio-artist",p.textContent=n,r.appendChild(p)}const l=document.createElement("audio");l.className="audio-player",l.controls=!0,l.preload="metadata";const o=Ns(a.value);if(o){const p=document.createElement("source");p.src=a.value,p.type=o,l.appendChild(p)}else l.src=a.value;const c=document.createElement("p");c.textContent="Your browser does not support this audio format.",l.appendChild(c),r.appendChild(l);const h=e.any(a,de("description"),null,null)?.value??e.any(a,B("description"),null,null)?.value;if(h){const p=document.createElement("p");p.className="audio-description",p.textContent=h,r.appendChild(p)}t.appendChild(r)}};Be(qd);const Hd=[".png",".jpg",".jpeg",".gif",".svg",".webp",".bmp",".ico",".avif"];function jd(a){const e=new URL(a).pathname.toLowerCase();return Hd.some(t=>e.endsWith(t))}function Vd(a,e){const r=e.each(a,me("type"),null,null).map(i=>i.value);return!!(r.includes(Ne("Image").value)||r.includes(B("ImageObject").value))}const Gd={label:"Image",icon:"🖼",canHandle(a,e){return jd(a.value)||Vd(a,e)},render(a,e,t){t.innerHTML="";const r=document.createElement("div");r.className="image-view";const i=document.createElement("img");i.className="image-main",i.src=a.value,i.alt=fe(a.value),i.addEventListener("error",()=>{i.style.display="none";const l=document.createElement("p");l.className="error",l.textContent="Failed to load image.",r.appendChild(l)}),r.appendChild(i);const s=e.any(a,de("title"),null,null)?.value??e.any(a,B("name"),null,null)?.value,n=e.any(a,de("description"),null,null)?.value??e.any(a,B("description"),null,null)?.value;if(s||n){const l=document.createElement("div");if(l.className="image-caption",s){const o=document.createElement("h3");o.textContent=s,l.appendChild(o)}if(n){const o=document.createElement("p");o.textContent=n,l.appendChild(o)}r.appendChild(l)}t.appendChild(r)}};Be(Gd);function Xd(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function zd(a,e,t){t.innerHTML="";const r=document.createElement("div");r.className="code-view";const i=document.createElement("div");i.className="code-header";const n=a.value.split("?")[0].split("#")[0].split("/").pop()??a.value,l=_l(a.value),o=document.createElement("span");if(o.className="code-filename",o.textContent=n,i.appendChild(o),l){const p=document.createElement("span");p.className="code-language",p.textContent=l,i.appendChild(p)}r.appendChild(i);const c=e.any(a,Yt("content"),null,null)?.value??e.any(a,de("content"),null,null)?.value;if(c){bs(c,r),t.appendChild(r);return}const h=document.createElement("p");h.className="code-loading",h.textContent="Loading...",r.appendChild(h),t.appendChild(r),fetch(a.value).then(p=>{if(!p.ok)throw new Error(`HTTP ${p.status}`);return p.text()}).then(p=>{h.remove(),bs(p,r)}).catch(p=>{h.textContent=`Failed to load: ${p.message}`,h.className="code-error"})}function bs(a,e){const t=a.split(`
`);t.length>0&&t[t.length-1]===""&&t.pop();const r=document.createElement("pre");r.className="code-block";const i=document.createElement("table");i.className="code-table",String(t.length).length;for(let n=0;n<t.length;n++){const l=document.createElement("tr");l.className="code-line";const o=document.createElement("td");o.className="code-line-number",o.textContent=String(n+1),o.setAttribute("data-line",String(n+1)),l.appendChild(o);const c=document.createElement("td");c.className="code-line-content",c.innerHTML=Xd(t[n])||`
`,l.appendChild(c),i.appendChild(l)}r.appendChild(i);const s=document.createElement("div");s.className="code-footer",s.textContent=`${t.length} line${t.length!==1?"s":""}`,e.appendChild(r),e.appendChild(s)}const Wd={".js":"JavaScript",".mjs":"JavaScript",".cjs":"JavaScript",".jsx":"JSX",".ts":"TypeScript",".tsx":"TSX",".py":"Python",".rb":"Ruby",".rs":"Rust",".go":"Go",".java":"Java",".kt":"Kotlin",".scala":"Scala",".c":"C",".h":"C Header",".cpp":"C++",".cc":"C++",".hpp":"C++ Header",".cs":"C#",".swift":"Swift",".php":"PHP",".pl":"Perl",".lua":"Lua",".r":"R",".sh":"Shell",".bash":"Bash",".zsh":"Zsh",".fish":"Fish",".ps1":"PowerShell",".sql":"SQL",".json":"JSON",".yaml":"YAML",".yml":"YAML",".toml":"TOML",".xml":"XML",".css":"CSS",".scss":"SCSS",".less":"LESS",".sass":"Sass",".graphql":"GraphQL",".gql":"GraphQL",".proto":"Protocol Buffers",".dockerfile":"Dockerfile",".tf":"Terraform",".vim":"Vim Script",".el":"Emacs Lisp",".clj":"Clojure",".ex":"Elixir",".exs":"Elixir",".erl":"Erlang",".hs":"Haskell",".ml":"OCaml",".fs":"F#",".dart":"Dart",".zig":"Zig",".v":"V",".nim":"Nim",".wasm":"WebAssembly",".wat":"WebAssembly Text"};function _l(a){const t=a.split("?")[0].split("#")[0].split("/").pop()??"",r=t.toLowerCase();if(r==="dockerfile")return"Dockerfile";if(r==="makefile"||r==="gnumakefile")return"Makefile";if(r==="rakefile"||r==="gemfile")return"Ruby";if(r==="cmakelists.txt")return"CMake";const i=t.lastIndexOf(".");if(i===-1)return null;const s=t.slice(i).toLowerCase();return Wd[s]??null}function Yd(a,e){return!!(_l(a.value)||e.each(a,me("type"),null,null).map(r=>r.value).includes(B("SoftwareSourceCode").value))}const Qd={label:"Code",icon:"💻",canHandle(a,e){return Yd(a,e)},render(a,e,t){zd(a,e,t)}};Be(Qd);const Jd=[".md",".markdown",".mdown",".mkd",".mkdn"];function Zd(a){try{const e=new URL(a).pathname.toLowerCase();return Jd.some(t=>e.endsWith(t))}catch{return!1}}function Kd(a,e){const t=e.match(null,null,null,a.doc());if(t.length!==0){for(const r of t)if(r.predicate.value==="http://www.w3.org/ns/solid/terms#content"||r.predicate.value==="http://purl.org/dc/terms/content")return r.object.value}}const eh={label:"Markdown",icon:"📝",canHandle(a,e){return Zd(a.value)},render(a,e,t){t.innerHTML="";const r=document.createElement("div");r.className="markdown-view",t.appendChild(r);const i=Kd(a,e),s=i?Promise.resolve(i):fetch(a.value).then(n=>{if(!n.ok)throw new Error(`HTTP ${n.status}`);return n.text()});if(!i){const n=document.createElement("p");n.className="loading",n.textContent="Loading markdown...",r.appendChild(n)}Promise.all([s,el(()=>import("./marked.esm-BGwOOx1V.js"),[])]).then(([n,{marked:l}])=>{r.innerHTML=l.parse(n)}).catch(()=>{r.innerHTML="";const n=document.createElement("p");n.className="error",n.textContent="Failed to load markdown content.",r.appendChild(n)})}};Be(eh);function th(a){try{return new URL(a).pathname.toLowerCase().endsWith(".pdf")}catch{return!1}}const nh={label:"PDF",icon:"📄",canHandle(a,e){return th(a.value)},render(a,e,t){t.innerHTML="";const r=document.createElement("div");r.className="pdf-view";const i=document.createElement("h3");i.className="pdf-title",i.textContent=fe(a.value),r.appendChild(i);const s=document.createElement("object");s.className="pdf-embed",s.data=a.value,s.type="application/pdf";const n=document.createElement("div");n.className="pdf-fallback";const l=document.createElement("p");l.textContent="Unable to display PDF inline.",n.appendChild(l);const o=document.createElement("a");o.href=a.value,o.textContent="Download PDF",o.target="_blank",o.rel="noopener",n.appendChild(o),s.appendChild(n),r.appendChild(s),t.appendChild(r)}};Be(nh);const rh={".mp4":"video/mp4",".webm":"video/webm",".ogg":"video/ogg",".ogv":"video/ogg",".mov":"video/mp4",".m4v":"video/mp4"};function xs(a){try{const e=new URL(a).pathname.toLowerCase();for(const[t,r]of Object.entries(rh))if(e.endsWith(t))return r}catch{}}function ah(a,e){return!!e.each(a,me("type"),null,null).map(i=>i.value).includes(B("VideoObject").value)}const ih={label:"Video",icon:"🎬",canHandle(a,e){return xs(a.value)!==void 0||ah(a,e)},render(a,e,t){t.innerHTML="";const r=document.createElement("div");r.className="video-view";const i=document.createElement("video");i.className="video-main",i.controls=!0,i.preload="metadata";const s=xs(a.value);if(s){const c=document.createElement("source");c.src=a.value,c.type=s,i.appendChild(c)}else i.src=a.value;const n=document.createElement("p");n.textContent="Your browser does not support this video format.",i.appendChild(n),r.appendChild(i);const l=e.any(a,de("title"),null,null)?.value??e.any(a,B("name"),null,null)?.value,o=e.any(a,de("description"),null,null)?.value??e.any(a,B("description"),null,null)?.value;if(l||o){const c=document.createElement("div");if(c.className="video-caption",l){const h=document.createElement("h3");h.textContent=l,c.appendChild(h)}if(o){const h=document.createElement("p");h.textContent=o,c.appendChild(h)}r.appendChild(c)}t.appendChild(r)}};Be(ih);function sh(a,e,t){t.innerHTML="";const r=document.createElement("div");r.className="gallery-view";const i=e.any(a,B("name"),null,null)?.value??e.any(a,de("title"),null,null)?.value??fe(a.value),s=document.createElement("h2");s.className="gallery-title",s.textContent=i,r.appendChild(s);const n=e.any(a,B("description"),null,null)?.value??e.any(a,de("description"),null,null)?.value;if(n){const h=document.createElement("p");h.className="gallery-description",h.textContent=n,r.appendChild(h)}const l=Sl(a,e),o=document.createElement("p");if(o.className="gallery-count",o.textContent=`${l.length} image${l.length!==1?"s":""}`,r.appendChild(o),l.length===0){const h=document.createElement("p");h.className="gallery-empty",h.textContent="No images found.",r.appendChild(h),t.appendChild(r);return}const c=document.createElement("div");c.className="gallery-grid";for(const h of l){const p=document.createElement("div");p.className="gallery-cell";const m=document.createElement("img");m.className="gallery-thumb",m.src=h,m.alt=lh(h),m.loading="lazy",m.addEventListener("click",()=>{uh(h,l,r)}),p.appendChild(m),c.appendChild(p)}r.appendChild(c),t.appendChild(r)}function lh(a){return a.split("?")[0].split("#")[0].split("/").pop()??"image"}function uh(a,e,t){const r=t.querySelector(".gallery-lightbox");r&&r.remove();let i=e.indexOf(a);i===-1&&(i=0);const s=document.createElement("div");s.className="gallery-lightbox";const n=document.createElement("img");if(n.className="gallery-lightbox-img",n.src=e[i],n.alt="Full size image",s.addEventListener("click",o=>{o.target===s&&s.remove()}),e.length>1){const o=document.createElement("button");o.className="gallery-lightbox-prev",o.textContent="❮",o.addEventListener("click",h=>{h.stopPropagation(),i=(i-1+e.length)%e.length,n.src=e[i]}),s.appendChild(o);const c=document.createElement("button");c.className="gallery-lightbox-next",c.textContent="❯",c.addEventListener("click",h=>{h.stopPropagation(),i=(i+1)%e.length,n.src=e[i]}),s.appendChild(c)}const l=document.createElement("button");l.className="gallery-lightbox-close",l.textContent="×",l.addEventListener("click",()=>s.remove()),s.appendChild(n),s.appendChild(l),t.appendChild(s)}const oh=[B("ImageGallery").value,B("MediaGallery").value,B("CollectionPage").value],ch=[".png",".jpg",".jpeg",".gif",".svg",".webp",".bmp",".ico",".avif",".tiff"];function Sl(a,e){const t=new Set;for(const r of e.each(a,B("image"),null,null))t.add(r.value);for(const r of e.each(a,Ne("img"),null,null))t.add(r.value);for(const r of e.each(a,B("hasPart"),null,null)){dh(r.value)&&t.add(r.value);const i=e.each(r,me("type"),null,null).map(s=>s.value);if(i.includes(B("ImageObject").value)||i.includes(Ne("Image").value)){const s=e.any(r,B("contentUrl"),null,null)?.value??e.any(r,B("url"),null,null)?.value??r.value;t.add(s)}}for(const r of e.each(a,B("associatedMedia"),null,null))if(e.each(r,me("type"),null,null).map(s=>s.value).includes(B("ImageObject").value)){const s=e.any(r,B("contentUrl"),null,null)?.value??r.value;t.add(s)}return Array.from(t)}function dh(a){const e=a.split("?")[0].split("#")[0].toLowerCase();return ch.some(t=>e.endsWith(t))}function hh(a,e){const t=e.each(a,me("type"),null,null).map(i=>i.value);for(const i of oh)if(t.includes(i))return!0;return Sl(a,e).length>=2}const fh={label:"Gallery",icon:"🖼",canHandle(a,e){return hh(a,e)},render(a,e,t){sh(a,e,t)}};Be(fh);function ph(a){const e=new Date(a);return isNaN(e.getTime())?a:e.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})}function mh(a,e){return e.any(a,B("name"),null,null)?.value??e.any(a,Ne("name"),null,null)?.value??fe(a.value)}function gh(a,e,t){t.innerHTML="";const r=document.createElement("article");r.className="article-view";const i=e.any(a,B("headline"),null,null)?.value??e.any(a,B("name"),null,null)?.value??e.any(a,de("title"),null,null)?.value??fe(a.value),s=document.createElement("h1");s.className="article-title",s.textContent=i,r.appendChild(s);const n=e.any(a,B("author"),null,null),l=e.any(a,B("datePublished"),null,null)?.value,o=e.any(a,de("created"),null,null)?.value,c=l??o;if(n||c){const N=document.createElement("div");if(N.className="article-byline",n){const D=document.createElement("span");D.className="article-author",D.textContent=mh(n,e),N.appendChild(D)}if(c){const D=document.createElement("time");D.className="article-date",D.dateTime=c,D.textContent=ph(c),N.appendChild(D)}r.appendChild(N)}const h=e.any(a,B("image"),null,null)?.value??e.any(a,B("thumbnailUrl"),null,null)?.value;if(h){const N=document.createElement("img");N.className="article-image",N.src=h,N.alt=i,r.appendChild(N)}const p=e.any(a,B("description"),null,null)?.value??e.any(a,B("abstract"),null,null)?.value??e.any(a,de("abstract"),null,null)?.value;if(p){const N=document.createElement("p");N.className="article-description",N.textContent=p,r.appendChild(N)}const m=e.any(a,B("articleBody"),null,null)?.value;if(m){const N=document.createElement("div");N.className="article-body";const D=m.split(/\n\n+/);for(const L of D){const R=L.trim();if(!R)continue;const Q=document.createElement("p");Q.textContent=R,N.appendChild(Q)}r.appendChild(N)}const w=e.any(a,B("publisher"),null,null);if(w){const N=e.any(w,B("name"),null,null)?.value??fe(w.value),D=document.createElement("p");D.className="article-publisher",D.textContent=`Published by ${N}`,r.appendChild(D)}const y=e.each(a,B("keywords"),null,null);if(y.length>0){const N=document.createElement("div");N.className="article-tags";for(const D of y){const L=document.createElement("span");L.className="article-tag",L.textContent=D.value,N.appendChild(L)}r.appendChild(N)}t.appendChild(r)}const vh=["Article","BlogPosting","NewsArticle","ScholarlyArticle","TechArticle","SocialMediaPosting","Report"];function yh(a,e){const r=e.each(a,me("type"),null,null).map(i=>i.value);for(const i of vh)if(r.includes(B(i).value))return!0;return!!(e.any(a,B("articleBody"),null,null)||e.any(a,B("headline"),null,null))}const wh={label:"Article",icon:"📰",canHandle(a,e){return yh(a,e)},render(a,e,t){gh(a,e,t)}};Be(wh);function Eh(a,e,t){t.innerHTML="";const r=document.createElement("div");r.className="map-view";const i=e.any(a,B("name"),null,null)?.value??e.any(a,de("title"),null,null)?.value??fe(a.value),s=document.createElement("h2");s.className="map-title",s.textContent=i,r.appendChild(s);const n=e.any(a,B("address"),null,null)?.value??void 0;if(n){const c=document.createElement("p");c.className="map-address",c.textContent=n,r.appendChild(c)}const l=e.any(a,B("description"),null,null)?.value??e.any(a,de("description"),null,null)?.value;if(l){const c=document.createElement("p");c.className="map-description",c.textContent=l,r.appendChild(c)}const o=Il(a,e);if(o){const c=document.createElement("div");c.className="map-embed";const h=document.createElement("iframe");h.className="map-frame",h.src=`https://www.openstreetmap.org/export/embed.html?bbox=${o.lng-.01},${o.lat-.005},${o.lng+.01},${o.lat+.005}&layer=mapnik&marker=${o.lat},${o.lng}`,h.setAttribute("sandbox","allow-scripts allow-same-origin"),h.title=`Map showing ${i}`,c.appendChild(h);const p=document.createElement("a");p.className="map-osm-link",p.href=`https://www.openstreetmap.org/?mlat=${o.lat}&mlon=${o.lng}#map=16/${o.lat}/${o.lng}`,p.textContent="View on OpenStreetMap",p.target="_blank",p.rel="noopener",c.appendChild(p),r.appendChild(c)}else{const c=document.createElement("p");c.className="map-no-coords",c.textContent="No coordinates available for this place.",r.appendChild(c)}t.appendChild(r)}function Il(a,e){const t=e.any(a,B("latitude"),null,null)?.value,r=e.any(a,B("longitude"),null,null)?.value;if(t&&r){const n=parseFloat(t),l=parseFloat(r);if(!isNaN(n)&&!isNaN(l))return{lat:n,lng:l}}const i=e.any(a,B("geo"),null,null);if(i){const n=e.any(i,B("latitude"),null,null)?.value,l=e.any(i,B("longitude"),null,null)?.value;if(n&&l){const o=parseFloat(n),c=parseFloat(l);if(!isNaN(o)&&!isNaN(c))return{lat:o,lng:c}}}const s=e.any(a,B("location"),null,null);if(s){const n=e.any(s,B("geo"),null,null);if(n){const c=e.any(n,B("latitude"),null,null)?.value,h=e.any(n,B("longitude"),null,null)?.value;if(c&&h){const p=parseFloat(c),m=parseFloat(h);if(!isNaN(p)&&!isNaN(m))return{lat:p,lng:m}}}const l=e.any(s,B("latitude"),null,null)?.value,o=e.any(s,B("longitude"),null,null)?.value;if(l&&o){const c=parseFloat(l),h=parseFloat(o);if(!isNaN(c)&&!isNaN(h))return{lat:c,lng:h}}}return null}function Ch(a,e){const r=e.each(a,me("type"),null,null).map(i=>i.value);return!!(r.includes(B("Place").value)||r.includes(B("GeoCoordinates").value))}const Nh={label:"Map",icon:"🗺",canHandle(a,e){return!!(Il(a,e)||Ch(a,e))},render(a,e,t){Eh(a,e,t)}};Be(Nh);function Ts(a){const e=new Date(a);return isNaN(e.getTime())?a:e.toLocaleString(void 0,{weekday:"short",month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}function Gr(a){const e=new Date(a);return isNaN(e.getTime())?a:e.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric",year:"numeric"})}function As(a,e){const t=e.any(a,B("name"),null,null)?.value;if(t)return t;const r=e.any(a,B("address"),null,null)?.value;return r&&!r.startsWith("http")?r:a.value.startsWith("http")?fe(a.value):a.value}function bh(a){for(const e of a){if(e.includes("Flight"))return"Flight";if(e.includes("TrainTrip"))return"Train";if(e.includes("BusTrip"))return"Bus";if(e.includes("BoatTrip"))return"Boat"}return"Leg"}function Ds(a,e,t){const r=document.createElement("div");r.className="trip-leg";const i=e.each(a,me("type"),null,null).map(N=>N.value),s=bh(i),n=document.createElement("div");n.className="trip-leg-header";const l=document.createElement("span");l.className="trip-leg-mode",l.textContent=s;const o=e.any(a,B("flightNumber"),null,null)?.value??e.any(a,B("trainNumber"),null,null)?.value??e.any(a,B("busNumber"),null,null)?.value??e.any(a,B("name"),null,null)?.value;o&&(l.textContent+=` ${o}`),n.appendChild(l);const c=e.any(a,B("provider"),null,null)??e.any(a,B("airline"),null,null);if(c){const N=e.any(c,B("name"),null,null)?.value??(c.value.startsWith("http")?null:c.value);if(N){const D=document.createElement("span");D.className="trip-leg-provider",D.textContent=N,n.appendChild(D)}}r.appendChild(n);const h=document.createElement("div");h.className="trip-leg-route";const p=e.any(a,B("departureStation"),null,null)??e.any(a,B("departureAirport"),null,null)??e.any(a,B("departureStop"),null,null)??e.any(a,B("fromLocation"),null,null),m=e.any(a,B("arrivalStation"),null,null)??e.any(a,B("arrivalAirport"),null,null)??e.any(a,B("arrivalStop"),null,null)??e.any(a,B("toLocation"),null,null);if(p||m){const N=p?As(p,e):"?",D=m?As(m,e):"?";h.innerHTML=`<span class="trip-from">${N}</span><span class="trip-arrow">→</span><span class="trip-to">${D}</span>`,r.appendChild(h)}const w=e.any(a,B("departureTime"),null,null)?.value,y=e.any(a,B("arrivalTime"),null,null)?.value;if(w||y){const N=document.createElement("div");if(N.className="trip-leg-times",w){const D=document.createElement("span");D.className="trip-leg-time",D.textContent=`Departs: ${Ts(w)}`,N.appendChild(D)}if(y){const D=document.createElement("span");D.className="trip-leg-time",D.textContent=`Arrives: ${Ts(y)}`,N.appendChild(D)}r.appendChild(N)}t.appendChild(r)}function xh(a,e,t){t.innerHTML="";const r=document.createElement("div");r.className="trip-view";const i=e.any(a,B("name"),null,null)?.value??e.any(a,de("title"),null,null)?.value??fe(a.value),s=document.createElement("h2");s.className="trip-title",s.textContent=i,r.appendChild(s);const n=e.any(a,B("description"),null,null)?.value??e.any(a,de("description"),null,null)?.value;if(n){const m=document.createElement("p");m.className="trip-description",m.textContent=n,r.appendChild(m)}const l=e.any(a,B("departureTime"),null,null)?.value??e.any(a,B("startDate"),null,null)?.value,o=e.any(a,B("arrivalTime"),null,null)?.value??e.any(a,B("endDate"),null,null)?.value;if(l||o){const m=document.createElement("p");m.className="trip-dates",l&&o?m.textContent=`${Gr(l)} — ${Gr(o)}`:l?m.textContent=Gr(l):o&&(m.textContent=`Until ${Gr(o)}`),r.appendChild(m)}e.each(a,me("type"),null,null).map(m=>m.value).some(m=>m.includes("Flight")||m.includes("TrainTrip")||m.includes("BusTrip")||m.includes("BoatTrip"))&&Ds(a,e,r);const p=e.each(a,B("itinerary"),null,null);if(p.length>0){const m=document.createElement("div");m.className="trip-itinerary";const w=document.createElement("h3");w.textContent=`Itinerary (${p.length} leg${p.length!==1?"s":""})`,m.appendChild(w);const y=[...p].sort((N,D)=>{const L=e.any(N,B("departureTime"),null,null)?.value??"",R=e.any(D,B("departureTime"),null,null)?.value??"";return L.localeCompare(R)});for(const N of y)Ds(N,e,m);r.appendChild(m)}t.appendChild(r)}const Th=["Trip","TouristTrip","Flight","TrainTrip","BusTrip","BoatTrip","TravelAction"];function Ah(a,e){const t=e.each(a,me("type"),null,null).map(s=>s.value);for(const s of Th)if(t.includes(B(s).value))return!0;if(e.any(a,B("itinerary"),null,null))return!0;const r=e.any(a,B("departureTime"),null,null),i=e.any(a,B("arrivalTime"),null,null);return!!(r&&i)}const Dh={label:"Trip",icon:"✈",canHandle(a,e){return Ah(a,e)},render(a,e,t){xh(a,e,t)}};Be(Dh);function _h(a,e){const t=new Set,r=[],i=[B("event"),B("subEvent")];for(const s of i)for(const n of e.each(a,s,null,null))n.termType==="NamedNode"&&!t.has(n.value)&&(t.add(n.value),r.push(n));return r}function Sh(a,e){const t=e.any(a,B("name"),null,null)?.value??e.any(a,rt("label"),null,null)?.value??"Untitled Event",r=e.any(a,B("startDate"),null,null)?.value??null,i=e.any(a,B("endDate"),null,null)?.value??null,s=e.any(a,B("location"),null,null);let n="";return s&&(s.termType==="Literal"?n=s.value:s.termType==="NamedNode"&&(n=e.any(s,B("name"),null,null)?.value??e.any(s,rt("label"),null,null)?.value??s.value)),{uri:a.value,name:t,startDate:r?new Date(r):null,endDate:i?new Date(i):null,location:n}}function Ih(a,e){return new Date(a,e+1,0).getDate()}function Fh(a,e){return new Date(a,e,1).getDay()}function Bh(a,e){return a.getFullYear()===e.getFullYear()&&a.getMonth()===e.getMonth()&&a.getDate()===e.getDate()}function Lh(a,e,t,r){const i=new Date(e,t,r);return a.filter(s=>s.startDate?!!(Bh(s.startDate,i)||s.endDate&&s.startDate<=i&&s.endDate>=i):!1)}function kh(a){return a.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})}const _s=["January","February","March","April","May","June","July","August","September","October","November","December"],Rh=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function Fa(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function Oh(a,e,t){const r=e.any(a,B("name"),null,null)?.value??e.any(a,rt("label"),null,null)?.value??"Schedule",i=e.any(a,B("description"),null,null)?.value??null,n=_h(a,e).map(x=>Sh(x,e)),l=n.filter(x=>x.startDate!==null);l.sort((x,G)=>x.startDate.getTime()-G.startDate.getTime());let o,c;if(l.length>0)o=l[0].startDate.getFullYear(),c=l[0].startDate.getMonth();else{const x=new Date;o=x.getFullYear(),c=x.getMonth()}const h=document.createElement("div");h.className="sched-pane",t.appendChild(h);const p=document.createElement("h2");if(p.className="sched-title",p.textContent=r,h.appendChild(p),i){const x=document.createElement("p");x.className="sched-description",x.textContent=i,h.appendChild(x)}const m=document.createElement("p");m.className="sched-count",m.textContent=`${n.length} event${n.length!==1?"s":""}`,h.appendChild(m);const w=document.createElement("div");w.className="sched-nav",h.appendChild(w);const y=document.createElement("button");y.className="sched-prev",y.textContent="←",y.setAttribute("aria-label","Previous month");const N=document.createElement("span");N.className="sched-month-label";const D=document.createElement("button");D.className="sched-next",D.textContent="→",D.setAttribute("aria-label","Next month"),w.appendChild(y),w.appendChild(N),w.appendChild(D);const L=document.createElement("div");L.className="sched-calendar",h.appendChild(L);const R=document.createElement("div");R.className="sched-detail",h.appendChild(R);function Q(){N.textContent=`${_s[c]} ${o}`,L.innerHTML="";for(const M of Rh){const X=document.createElement("div");X.className="sched-day-header",X.textContent=M,L.appendChild(X)}const x=Ih(o,c),G=Fh(o,c);for(let M=0;M<G;M++){const X=document.createElement("div");X.className="sched-day sched-day-empty",L.appendChild(X)}for(let M=1;M<=x;M++){const X=document.createElement("div");X.className="sched-day",X.setAttribute("data-day",String(M));const k=document.createElement("span");k.className="sched-day-num",k.textContent=String(M),X.appendChild(k);const H=Lh(n,o,c,M);if(H.length>0){X.classList.add("sched-has-events");const $=document.createElement("span");$.className="sched-event-dot",$.textContent=String(H.length),X.appendChild($),X.addEventListener("click",()=>{J(M,H)})}L.appendChild(X)}R.innerHTML=""}function J(x,G){R.innerHTML="";const M=document.createElement("h3");M.className="sched-detail-heading",M.textContent=`${_s[c]} ${x}, ${o}`,R.appendChild(M);for(const X of G){const k=document.createElement("div");k.className="sched-event-item";let H=`<span class="sched-event-name">${Fa(X.name)}</span>`;X.startDate&&(H+=` <span class="sched-event-time">${Fa(kh(X.startDate))}</span>`),X.location&&(H+=` <span class="sched-event-location">${Fa(X.location)}</span>`),k.innerHTML=H,R.appendChild(k)}}y.addEventListener("click",()=>{c--,c<0&&(c=11,o--),Q()}),D.addEventListener("click",()=>{c++,c>11&&(c=0,o++),Q()}),Q()}const Uh=[B("Schedule"),B("EventSeries"),B("EventSchedule")];function Mh(a,e){const t=new Set,r=[],i=[B("event"),B("subEvent")];for(const s of i)for(const n of e.each(a,s,null,null))n.termType==="NamedNode"&&!t.has(n.value)&&(t.add(n.value),r.push(n));return r}const Ph={label:"Schedule",icon:"📅",canHandle(a,e){for(const r of Uh)if(e.holds(a,me("type"),r))return!0;return Mh(a,e).length>=2},render(a,e,t){Oh(a,e,t)}};Be(Ph);function Ss(a){const e=new Date(a);return isNaN(e.getTime())?a:/^\d{4}-\d{2}-\d{2}$/.test(a)?e.toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"}):e.toLocaleString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function $h(a){const e=new Date(a);return isNaN(e.getTime())?a:e.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})}function qh(a,e){const t=new Date(a),r=new Date(e);return t.getFullYear()===r.getFullYear()&&t.getMonth()===r.getMonth()&&t.getDate()===r.getDate()}function ir(a,e,t,r=!1){if(!t)return;const i=document.createElement("div");i.className="event-detail";const s=document.createElement("span");if(s.className="event-label",s.textContent=e,i.appendChild(s),r&&(t.startsWith("http://")||t.startsWith("https://"))){const n=document.createElement("a");n.href=t,n.textContent=fe(t),n.target="_blank",n.rel="noopener",i.appendChild(n)}else{const n=document.createElement("span");n.className="event-value",n.textContent=t,i.appendChild(n)}a.appendChild(i)}function Hh(a,e,t){t.innerHTML="";const r=document.createElement("div");r.className="event-view";const i=e.any(a,B("name"),null,null)?.value??e.any(a,de("title"),null,null)?.value??fe(a.value),s=document.createElement("h2");s.className="event-title",s.textContent=i,r.appendChild(s);const n=e.any(a,B("startDate"),null,null)?.value,l=e.any(a,B("endDate"),null,null)?.value;if(n){let D=Ss(n);l&&(qh(n,l)?D+=` – ${$h(l)}`:D+=` – ${Ss(l)}`);const L=document.createElement("p");L.className="event-date",L.textContent=D,r.appendChild(L)}const o=document.createElement("div");o.className="event-details";const c=e.any(a,B("location"),null,null);let h;c&&(h=e.any(c,B("name"),null,null)?.value??c.value),ir(o,"Location",h);const p=e.any(a,B("organizer"),null,null);if(p){const D=e.any(p,B("name"),null,null)?.value??e.any(p,Ne("name"),null,null)?.value??fe(p.value);ir(o,"Organizer",D)}const m=e.any(a,B("url"),null,null)?.value;ir(o,"Link",m,!0);const w=e.any(a,B("eventStatus"),null,null)?.value;w&&ir(o,"Status",fe(w));const y=e.any(a,B("eventAttendanceMode"),null,null)?.value;y&&ir(o,"Format",fe(y)),r.appendChild(o);const N=e.any(a,B("description"),null,null)?.value??e.any(a,de("description"),null,null)?.value;if(N){const D=document.createElement("div");D.className="event-description",D.textContent=N,r.appendChild(D)}t.appendChild(r)}function jh(a,e){const r=e.each(a,me("type"),null,null).map(i=>i.value);return!!(r.includes(B("Event").value)||r.includes(B("SocialEvent").value)||r.includes(B("BusinessEvent").value)||r.includes(B("MusicEvent").value)||r.includes(B("EducationEvent").value)||e.any(a,B("startDate"),null,null)&&e.any(a,B("name"),null,null))}const Vh={label:"Event",icon:"📅",canHandle(a,e){return jh(a,e)},render(a,e,t){Hh(a,e,t)}};Be(Vh);function Gh(a,e){return e.any(a,de("title"),null,null)?.value??e.any(a,B("name"),null,null)?.value??"Bookmarks"}function Xh(a,e){const t=e.each(a,xn("hasMember"),null,null),r=[];for(const i of t){const s=i,n=e.any(s,de("title"),null,null)?.value??e.any(s,B("name"),null,null)?.value??e.any(s,xn("title"),null,null)?.value??fe(s.value),l=e.any(s,xn("recalls"),null,null)?.value??null,o=e.any(s,de("created"),null,null)?.value,c=o?new Date(o):null,h=e.any(s,de("description"),null,null)?.value??e.any(s,B("description"),null,null)?.value??null;r.push({uri:s.value,title:n,recalls:l,created:c,description:h})}return r.sort((i,s)=>i.created&&s.created?s.created.getTime()-i.created.getTime():i.created?-1:s.created?1:i.title.localeCompare(s.title)),r}function zh(a){return a.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}function Wh(a,e,t){t.innerHTML="";const r=document.createElement("div");r.className="bookmarks-view";const i=Gh(a,e),s=document.createElement("h2");s.className="bookmarks-title",s.textContent=i,r.appendChild(s);const n=Xh(a,e),l=document.createElement("p");if(l.className="bookmarks-count",l.textContent=`${n.length} bookmark${n.length!==1?"s":""}`,r.appendChild(l),n.length===0){const c=document.createElement("p");c.className="bookmarks-empty",c.textContent="No bookmarks saved.",r.appendChild(c),t.appendChild(r);return}const o=document.createElement("ul");o.className="bookmarks-list";for(const c of n){const h=document.createElement("li");h.className="bookmark-item";const p=document.createElement("a");if(p.className="bookmark-title",p.textContent=c.title,c.recalls?(p.href=c.recalls,p.target="_blank",p.rel="noopener"):(p.href=c.uri,p.target="_blank",p.rel="noopener"),h.appendChild(p),c.recalls){const m=document.createElement("span");m.className="bookmark-url",m.textContent=c.recalls,h.appendChild(m)}if(c.created||c.description){const m=document.createElement("div");if(m.className="bookmark-meta",c.created){const w=document.createElement("span");w.className="bookmark-date",w.textContent=zh(c.created),m.appendChild(w)}if(c.description){const w=document.createElement("span");w.className="bookmark-desc",w.textContent=c.description,m.appendChild(w)}h.appendChild(m)}o.appendChild(h)}r.appendChild(o),t.appendChild(r)}function Yh(a,e){const r=e.each(a,me("type"),null,null).map(s=>s.value);if(r.includes(xn("BookmarkList").value)||r.includes(xn("Topic").value))return!0;const i=e.each(a,xn("hasMember"),null,null);if(i.length>0){for(const s of i)if(e.each(s,me("type"),null,null).some(l=>l.value===xn("Bookmark").value))return!0}return!1}const Qh={label:"Bookmarks",icon:"🔖",canHandle(a,e){return Yh(a,e)},render(a,e,t){Wh(a,e,t)}};Be(Qh);function Is(a,e){return e.any(a,Ye("name"),null,null)?.value??e.any(a,B("name"),null,null)?.value??e.any(a,Ne("name"),null,null)?.value??fe(a.value)}function Jh(a,e){const t=e.each(a,me("type"),null,null);for(const r of t)switch(fe(r.value).toLowerCase()){case"create":return"created";case"update":return"updated";case"delete":return"deleted";case"follow":return"followed";case"like":return"liked";case"announce":return"shared";case"add":return"added";case"remove":return"removed";case"accept":return"accepted";case"reject":return"rejected";case"undo":return"undid";case"invite":return"invited";case"join":return"joined";case"leave":return"left";case"offer":return"offered"}return"did something with"}function Fs(a,e){const t=e.any(a,Ye("actor"),null,null),r=e.any(a,Ye("object"),null,null),i=e.any(a,Ye("published"),null,null)?.value;return{uri:a.value,actorName:t?Is(t,e):null,actorUri:t?.value??null,verb:Jh(a,e),objectName:r?Is(r,e):null,objectUri:r?.value??null,summary:e.any(a,Ye("summary"),null,null)?.value??null,content:e.any(a,Ye("content"),null,null)?.value??null,published:i?new Date(i):null}}function Zh(a,e){return[...e.each(a,Ye("items"),null,null),...e.each(a,Ye("orderedItems"),null,null)]}function Kh(a,e){const t=e.each(a,me("type"),null,null).map(r=>r.value);return["Collection","OrderedCollection","CollectionPage","OrderedCollectionPage"].some(r=>t.includes(Ye(r).value))}function ef(a){return a.toLocaleString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function Bs(a){const e=document.createElement("div");e.className="activity-item";const t=document.createElement("div");if(t.className="activity-summary",a.summary)t.textContent=a.summary;else{if(a.actorName){const r=document.createElement("a");r.className="activity-actor",r.textContent=a.actorName,a.actorUri&&(r.href=`?uri=${encodeURIComponent(a.actorUri)}`,r.addEventListener("click",i=>{i.preventDefault(),Va(a.actorUri)})),t.appendChild(r),t.appendChild(document.createTextNode(` ${a.verb} `))}if(a.objectName){const r=document.createElement("a");r.className="activity-object",r.textContent=a.objectName,a.objectUri&&(r.href=`?uri=${encodeURIComponent(a.objectUri)}`,r.addEventListener("click",i=>{i.preventDefault(),Va(a.objectUri)})),t.appendChild(r)}}if(e.appendChild(t),a.content){const r=document.createElement("p");r.className="activity-content",r.textContent=a.content,e.appendChild(r)}if(a.published){const r=document.createElement("time");r.className="activity-time",r.dateTime=a.published.toISOString(),r.textContent=ef(a.published),e.appendChild(r)}return e}function tf(a,e,t){t.innerHTML="";const r=document.createElement("div");if(r.className="activity-view",Kh(a,e)){const i=e.any(a,Ye("name"),null,null)?.value??"Activities",s=document.createElement("h2");s.className="activity-title",s.textContent=i,r.appendChild(s);const n=e.any(a,Ye("totalItems"),null,null)?.value;if(n){const c=document.createElement("p");c.className="activity-count",c.textContent=`${n} item${n!=="1"?"s":""}`,r.appendChild(c)}const l=Zh(a,e),o=document.createElement("div");if(o.className="activity-timeline",l.length===0){const c=document.createElement("p");c.className="activity-empty",c.textContent="No activities.",r.appendChild(c)}else{for(const c of l){const h=Fs(c,e);o.appendChild(Bs(h))}r.appendChild(o)}}else{const i=Fs(a,e),s=document.createElement("div");s.className="activity-timeline",s.appendChild(Bs(i)),r.appendChild(s)}t.appendChild(r)}const nf=["Activity","Create","Update","Delete","Follow","Like","Announce","Add","Remove","Accept","Reject","Undo","Invite","Join","Leave","Offer"],rf=["Collection","OrderedCollection","CollectionPage","OrderedCollectionPage"];function af(a,e){const r=e.each(a,me("type"),null,null).map(i=>i.value);for(const i of nf)if(r.includes(Ye(i).value))return!0;for(const i of rf)if(r.includes(Ye(i).value))return!0;return!!(e.any(a,Ye("actor"),null,null)&&e.any(a,Ye("object"),null,null))}const sf={label:"Activity",icon:"🔔",canHandle(a,e){return af(a,e)},render(a,e,t){tf(a,e,t)}};Be(sf);function Ga(a,e){try{return new Intl.NumberFormat(void 0,{style:"currency",currency:e||"USD"}).format(a)}catch{return`${e?`${e} `:""}${a.toFixed(2)}`}}function lf(a,e){const t=e.each(a,me("type"),null,null).map(r=>r.value);return!!(t.includes(mt("BankAccount").value)||t.includes(mt("PaymentCard").value)||t.includes(B("BankAccount").value)||e.any(a,mt("transaction"),null,null))}function Fl(a,e){const t=e.any(a,mt("description"),null,null)?.value??e.any(a,de("title"),null,null)?.value??e.any(a,B("description"),null,null)?.value??e.any(a,B("name"),null,null)?.value??fe(a.value),r=e.any(a,mt("amount"),null,null)?.value??e.any(a,B("price"),null,null)?.value??e.any(a,B("amount"),null,null)?.value,i=r?parseFloat(r):null,s=e.any(a,mt("currency"),null,null)?.value??e.any(a,B("priceCurrency"),null,null)?.value??e.any(a,B("currency"),null,null)?.value??"",n=e.any(a,mt("date"),null,null)?.value??e.any(a,de("date"),null,null)?.value??e.any(a,B("dateCreated"),null,null)?.value??null,l=e.any(a,mt("category"),null,null),o=l?e.any(l,rt("label"),null,null)?.value??e.any(l,B("name"),null,null)?.value??fe(l.value):null,c=e.any(a,mt("payee"),null,null)??e.any(a,B("recipient"),null,null),h=c?e.any(c,B("name"),null,null)?.value??(c.value.startsWith("http")?fe(c.value):c.value):null;return{uri:a.value,date:n,description:t,amount:i,currency:s,category:o,payee:h}}function uf(a,e,t){const i=e.each(a,mt("transaction"),null,null).map(m=>Fl(m,e));i.sort((m,w)=>!m.date&&!w.date?0:m.date?w.date?w.date.localeCompare(m.date):-1:1);const s=document.createElement("p");if(s.className="txn-count",s.textContent=`${i.length} transaction${i.length!==1?"s":""}`,t.appendChild(s),i.length===0){const m=document.createElement("p");m.className="txn-empty",m.textContent="No transactions found.",t.appendChild(m);return}const n=i.reduce((m,w)=>m+(w.amount??0),0),l=i.find(m=>m.currency)?.currency??"";if(n!==0){const m=document.createElement("p");m.className="txn-total",m.textContent=`Balance: ${Ga(n,l)}`,t.appendChild(m)}const o=document.createElement("div");o.className="txn-table-wrapper";const c=document.createElement("table");c.className="txn-table";const h=document.createElement("thead");h.innerHTML='<tr><th>Date</th><th>Description</th><th>Category</th><th class="txn-amount-col">Amount</th></tr>',c.appendChild(h);const p=document.createElement("tbody");for(const m of i){const w=document.createElement("tr");w.className="txn-row";const y=document.createElement("td");if(y.className="txn-date",m.date){const R=new Date(m.date);y.textContent=isNaN(R.getTime())?m.date:R.toLocaleDateString(void 0,{month:"short",day:"numeric"})}w.appendChild(y);const N=document.createElement("td");N.className="txn-desc",N.textContent=m.payee?`${m.description} — ${m.payee}`:m.description,w.appendChild(N);const D=document.createElement("td");D.className="txn-category",D.textContent=m.category??"",w.appendChild(D);const L=document.createElement("td");L.className="txn-amount",m.amount!==null&&(L.textContent=Ga(m.amount,m.currency),m.amount<0&&L.classList.add("txn-negative"),m.amount>0&&L.classList.add("txn-positive")),w.appendChild(L),p.appendChild(w)}c.appendChild(p),o.appendChild(c),t.appendChild(o)}function of(a,e,t){const r=Fl(a,e),i=document.createElement("div");i.className="txn-details";const s=[];if(r.date){const l=new Date(r.date),o=isNaN(l.getTime())?r.date:l.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"});s.push(["Date",o])}r.amount!==null&&s.push(["Amount",Ga(r.amount,r.currency)]),r.payee&&s.push(["Payee",r.payee]),r.category&&s.push(["Category",r.category]);for(const[l,o]of s){const c=document.createElement("div");c.className="txn-detail",c.innerHTML=`<span class="txn-label">${l}</span><span class="txn-value">${o}</span>`,i.appendChild(c)}t.appendChild(i);const n=e.any(a,B("description"),null,null)?.value??e.any(a,de("description"),null,null)?.value;if(n&&n!==r.description){const l=document.createElement("p");l.className="txn-body",l.textContent=n,t.appendChild(l)}}function cf(a,e,t){t.innerHTML="";const r=document.createElement("div");r.className="txn-view";const i=e.any(a,B("name"),null,null)?.value??e.any(a,de("title"),null,null)?.value??e.any(a,mt("description"),null,null)?.value??e.any(a,rt("label"),null,null)?.value??fe(a.value),s=document.createElement("h2");s.className="txn-title",s.textContent=i,r.appendChild(s),lf(a,e)?uf(a,e,r):of(a,e,r),t.appendChild(r)}const df=[mt("Transaction").value,mt("BankAccount").value,mt("PaymentCard").value,B("Invoice").value,B("MoneyTransfer").value,B("PayAction").value,B("BankAccount").value];function hf(a,e){const t=e.each(a,me("type"),null,null).map(r=>r.value);for(const r of df)if(t.includes(r))return!0;return!!(e.any(a,mt("transaction"),null,null)||e.any(a,B("totalPaymentDue"),null,null)||e.any(a,mt("amount"),null,null))}const ff={label:"Transactions",icon:"💳",canHandle(a,e){return hf(a,e)},render(a,e,t){cf(a,e,t)}};Be(ff);function pf(a,e){const t=e.any(a,B("price"),null,null)?.value;if(t){const i=e.any(a,B("priceCurrency"),null,null)?.value??"";return{price:t,currency:i}}const r=e.any(a,B("offers"),null,null);if(r){const i=e.any(r,B("price"),null,null)?.value;if(i){const s=e.any(r,B("priceCurrency"),null,null)?.value??"";return{price:i,currency:s}}}return null}function mf(a,e){const t=parseFloat(a);if(isNaN(t))return`${e} ${a}`.trim();try{return new Intl.NumberFormat(void 0,{style:"currency",currency:e||"USD"}).format(t)}catch{return`${e} ${a}`.trim()}}function gf(a,e,t){t.innerHTML="";const r=document.createElement("div");r.className="product-view";const i=e.any(a,B("image"),null,null)?.value??e.any(a,B("thumbnailUrl"),null,null)?.value;if(i){const y=document.createElement("img");y.className="product-image",y.src=i,y.alt="Product image",r.appendChild(y)}const s=document.createElement("div");s.className="product-info";const n=e.any(a,B("name"),null,null)?.value??e.any(a,de("title"),null,null)?.value??fe(a.value),l=document.createElement("h2");l.className="product-name",l.textContent=n,s.appendChild(l);const o=e.any(a,B("brand"),null,null);if(o){const y=e.any(o,B("name"),null,null)?.value??o.value;if(y&&!y.startsWith("http")){const N=document.createElement("p");N.className="product-brand",N.textContent=y,s.appendChild(N)}}const c=pf(a,e);if(c){const y=document.createElement("p");y.className="product-price",y.textContent=mf(c.price,c.currency),s.appendChild(y)}const h=e.any(a,B("aggregateRating"),null,null);if(h){const y=e.any(h,B("ratingValue"),null,null)?.value,N=e.any(h,B("reviewCount"),null,null)?.value,D=e.any(h,B("bestRating"),null,null)?.value??"5";if(y){const L=document.createElement("div");L.className="product-rating";const R=Math.round(parseFloat(y)),Q=parseInt(D),J="★".repeat(Math.min(R,Q))+"☆".repeat(Math.max(Q-R,0)),x=document.createElement("span");x.className="product-stars",x.textContent=J,L.appendChild(x);const G=document.createElement("span");G.className="product-score",G.textContent=`${y}/${D}`,N&&(G.textContent+=` (${N} reviews)`),L.appendChild(G),s.appendChild(L)}}const p=e.any(a,B("description"),null,null)?.value??e.any(a,de("description"),null,null)?.value;if(p){const y=document.createElement("p");y.className="product-description",y.textContent=p,s.appendChild(y)}const m=e.any(a,B("sku"),null,null)?.value;if(m){const y=document.createElement("p");y.className="product-sku",y.textContent=`SKU: ${m}`,s.appendChild(y)}const w=e.any(a,B("url"),null,null)?.value;if(w){const y=document.createElement("a");y.className="product-link",y.href=w,y.textContent="View product",y.target="_blank",y.rel="noopener",s.appendChild(y)}r.appendChild(s),t.appendChild(r)}const vf=["Product","IndividualProduct","SomeProducts","Vehicle","Car","CreativeWork","SoftwareApplication","Book","Movie","MusicAlbum","Game"];function yf(a,e){const r=e.each(a,me("type"),null,null).map(i=>i.value);for(const i of vf)if(r.includes(B(i).value))return!0;return!!(e.any(a,B("offers"),null,null)||e.any(a,B("price"),null,null))}const wf={label:"Product",icon:"📦",canHandle(a,e){return yf(a,e)},render(a,e,t){gf(a,e,t)}};Be(wf);function Ba(a){const e=a.match(/^PT?(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?$/i);if(!e)return a;const t=[];return e[1]&&t.push(`${e[1]} hr`),e[2]&&t.push(`${e[2]} min`),e[3]&&t.push(`${e[3]} sec`),t.join(" ")||a}function Ef(a,e,t){t.innerHTML="";const r=document.createElement("div");r.className="recipe-view";const i=e.any(a,B("image"),null,null)?.value??e.any(a,B("thumbnailUrl"),null,null)?.value;if(i){const x=document.createElement("img");x.className="recipe-image",x.src=i,x.alt="Recipe photo",r.appendChild(x)}const s=e.any(a,B("name"),null,null)?.value??e.any(a,de("title"),null,null)?.value??fe(a.value),n=document.createElement("h2");n.className="recipe-name",n.textContent=s,r.appendChild(n);const l=e.any(a,B("description"),null,null)?.value??e.any(a,de("description"),null,null)?.value;if(l){const x=document.createElement("p");x.className="recipe-description",x.textContent=l,r.appendChild(x)}const o=[],c=e.any(a,B("prepTime"),null,null)?.value;c&&o.push({label:"Prep",value:Ba(c)});const h=e.any(a,B("cookTime"),null,null)?.value;h&&o.push({label:"Cook",value:Ba(h)});const p=e.any(a,B("totalTime"),null,null)?.value;p&&o.push({label:"Total",value:Ba(p)});const m=e.any(a,B("recipeYield"),null,null)?.value;m&&o.push({label:"Yield",value:m});const w=e.any(a,B("recipeServings"),null,null)?.value;if(w&&o.push({label:"Servings",value:w}),o.length>0){const x=document.createElement("div");x.className="recipe-meta";for(const G of o){const M=document.createElement("span");M.className="recipe-meta-item",M.innerHTML=`<strong>${G.label}</strong> ${G.value}`,x.appendChild(M)}r.appendChild(x)}const y=e.any(a,B("aggregateRating"),null,null);if(y){const x=e.any(y,B("ratingValue"),null,null)?.value,G=e.any(y,B("reviewCount"),null,null)?.value;if(x){const M=document.createElement("div");M.className="recipe-rating";const X=Math.round(parseFloat(x)),k="★".repeat(Math.min(X,5))+"☆".repeat(Math.max(5-X,0)),H=document.createElement("span");H.className="recipe-stars",H.textContent=k,M.appendChild(H);const $=document.createElement("span");$.className="recipe-score",$.textContent=`${x}/5`,G&&($.textContent+=` (${G} reviews)`),M.appendChild($),r.appendChild(M)}}const N=e.any(a,B("recipeCategory"),null,null)?.value,D=e.any(a,B("recipeCuisine"),null,null)?.value;if(N||D){const x=document.createElement("div");if(x.className="recipe-tags",N){const G=document.createElement("span");G.className="recipe-tag",G.textContent=N,x.appendChild(G)}if(D){const G=document.createElement("span");G.className="recipe-tag",G.textContent=D,x.appendChild(G)}r.appendChild(x)}const L=e.each(a,B("recipeIngredient"),null,null);if(L.length>0){const x=document.createElement("div");x.className="recipe-section";const G=document.createElement("h3");G.textContent="Ingredients",x.appendChild(G);const M=document.createElement("ul");M.className="recipe-ingredients";for(const X of L){const k=document.createElement("li");k.textContent=X.value,M.appendChild(k)}x.appendChild(M),r.appendChild(x)}const R=e.each(a,B("recipeInstructions"),null,null);if(R.length>0){const x=document.createElement("div");x.className="recipe-section";const G=document.createElement("h3");G.textContent="Instructions",x.appendChild(G);const M=document.createElement("ol");M.className="recipe-instructions";for(const X of R){const k=e.any(X,B("text"),null,null)?.value??X.value;if(k&&!k.startsWith("http")){const H=document.createElement("li");H.textContent=k,M.appendChild(H)}}x.appendChild(M),r.appendChild(x)}const Q=e.any(a,B("nutrition"),null,null);if(Q){const x=[["calories","Calories"],["fatContent","Fat"],["carbohydrateContent","Carbs"],["proteinContent","Protein"],["fiberContent","Fiber"],["sugarContent","Sugar"],["sodiumContent","Sodium"]],G=[];for(const[M,X]of x){const k=e.any(Q,B(M),null,null)?.value;k&&G.push({label:X,value:k})}if(G.length>0){const M=document.createElement("div");M.className="recipe-section";const X=document.createElement("h3");X.textContent="Nutrition",M.appendChild(X);const k=document.createElement("div");k.className="recipe-nutrition";for(const H of G){const $=document.createElement("div");$.className="recipe-nutrition-item",$.innerHTML=`<span class="recipe-nutrition-value">${H.value}</span><span class="recipe-nutrition-label">${H.label}</span>`,k.appendChild($)}M.appendChild(k),r.appendChild(M)}}const J=e.any(a,B("author"),null,null);if(J){const x=e.any(J,B("name"),null,null)?.value??J.value;if(x&&!x.startsWith("http")){const G=document.createElement("p");G.className="recipe-author",G.textContent=`Recipe by ${x}`,r.appendChild(G)}}t.appendChild(r)}const Cf=["Recipe","HowTo"];function Nf(a,e){const r=e.each(a,me("type"),null,null).map(i=>i.value);for(const i of Cf)if(r.includes(B(i).value))return!0;return!!(e.any(a,B("recipeIngredient"),null,null)||e.any(a,B("recipeInstructions"),null,null))}const bf={label:"Recipe",icon:"🍳",canHandle(a,e){return Nf(a,e)},render(a,e,t){Ef(a,e,t)}};Be(bf);function xf(a,e){const t=e.each(a,me("type"),null,null).map(r=>r.value);return!!(t.includes(yt("Tracker").value)||t.includes(ja("Tracker").value)||e.any(a,yt("issue"),null,null))}function Xa(a){return(a.split("#").pop()??a.split("/").pop()??a).replace(/([a-z])([A-Z])/g,"$1 $2")}function Bl(a){const e=a.toLowerCase();return e.includes("open")||e.includes("new")?"issue-state-open":e.includes("closed")||e.includes("done")||e.includes("resolved")||e.includes("fixed")?"issue-state-closed":e.includes("progress")||e.includes("active")?"issue-state-active":"issue-state-default"}function Tf(a,e,t){const r=document.createElement("div");r.className="issue-view";const i=e.any(a,de("title"),null,null)?.value??e.any(a,B("name"),null,null)?.value??e.any(a,rt("label"),null,null)?.value??fe(a.value),s=document.createElement("h2");s.className="issue-title",s.textContent=i,r.appendChild(s);const n=e.any(a,yt("state"),null,null);if(n){const m=document.createElement("span");m.className=`issue-state ${Bl(n.value)}`,m.textContent=Xa(n.value),r.appendChild(m)}const l=document.createElement("div");l.className="issue-details";const o=e.any(a,yt("assignee"),null,null);if(o){const m=e.any(o,B("name"),null,null)?.value??fe(o.value),w=document.createElement("div");w.className="issue-detail",w.innerHTML=`<span class="issue-label">Assignee</span><span class="issue-value">${m}</span>`,l.appendChild(w)}const c=e.any(a,yt("priority"),null,null)?.value??e.any(a,B("priority"),null,null)?.value;if(c){const m=document.createElement("div");m.className="issue-detail",m.innerHTML=`<span class="issue-label">Priority</span><span class="issue-value">${Xa(c)}</span>`,l.appendChild(m)}const h=e.any(a,de("created"),null,null)?.value??e.any(a,B("dateCreated"),null,null)?.value;if(h){const m=document.createElement("div");m.className="issue-detail";const w=new Date(h),y=isNaN(w.getTime())?h:w.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"});m.innerHTML=`<span class="issue-label">Created</span><span class="issue-value">${y}</span>`,l.appendChild(m)}l.children.length>0&&r.appendChild(l);const p=e.any(a,de("description"),null,null)?.value??e.any(a,B("description"),null,null)?.value??e.any(a,rt("comment"),null,null)?.value;if(p){const m=document.createElement("div");m.className="issue-description",m.textContent=p,r.appendChild(m)}t.appendChild(r)}function Af(a,e,t){const r=document.createElement("div");r.className="tracker-view";const i=e.any(a,de("title"),null,null)?.value??e.any(a,B("name"),null,null)?.value??e.any(a,rt("label"),null,null)?.value??fe(a.value),s=document.createElement("h2");s.className="tracker-title",s.textContent=i,r.appendChild(s);const n=e.any(a,de("description"),null,null)?.value??e.any(a,B("description"),null,null)?.value;if(n){const c=document.createElement("p");c.className="tracker-description",c.textContent=n,r.appendChild(c)}const l=e.each(a,yt("issue"),null,null),o=document.createElement("p");if(o.className="tracker-count",o.textContent=`${l.length} issue${l.length!==1?"s":""}`,r.appendChild(o),l.length===0){const c=document.createElement("p");c.className="tracker-empty",c.textContent="No issues found.",r.appendChild(c)}else{const c=document.createElement("ul");c.className="tracker-issues";for(const h of l){const p=h,m=document.createElement("li");m.className="tracker-issue";const w=e.any(p,yt("state"),null,null);if(w){const L=document.createElement("span");L.className=`issue-state ${Bl(w.value)}`,L.textContent=Xa(w.value),m.appendChild(L)}const y=e.any(p,de("title"),null,null)?.value??e.any(p,B("name"),null,null)?.value??fe(p.value),N=document.createElement("a");N.className="tracker-issue-title",N.href=p.value,N.textContent=y,m.appendChild(N);const D=e.any(p,yt("assignee"),null,null);if(D){const L=e.any(D,B("name"),null,null)?.value??fe(D.value),R=document.createElement("span");R.className="tracker-issue-assignee",R.textContent=L,m.appendChild(R)}c.appendChild(m)}r.appendChild(c)}t.appendChild(r)}function Df(a,e,t){t.innerHTML="",xf(a,e)?Af(a,e,t):Tf(a,e,t)}const _f=[yt("Tracker").value,yt("Issue").value,ja("Tracker").value,ja("Issue").value];function Sf(a,e){const r=e.each(a,me("type"),null,null).map(i=>i.value);for(const i of _f)if(r.includes(i))return!0;return!!(e.any(a,yt("issue"),null,null)||e.any(a,yt("state"),null,null))}const If={label:"Issues",icon:"📋",canHandle(a,e){return Sf(a,e)},render(a,e,t){Df(a,e,t)}};Be(If);function Ff(a){const e=new Date(a);return isNaN(e.getTime())?a:e.toLocaleString(void 0,{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function Bf(a,e){return e.any(a,B("name"),null,null)?.value??e.any(a,Ne("name"),null,null)?.value??fe(a.value)}function Lf(a,e,t){t.innerHTML="";const r=document.createElement("div");r.className="meeting-view";const i=e.any(a,de("title"),null,null)?.value??e.any(a,B("name"),null,null)?.value??e.any(a,rt("label"),null,null)?.value??fe(a.value),s=document.createElement("h2");s.className="meeting-title",s.textContent=i,r.appendChild(s);const n=e.any(a,B("startDate"),null,null)?.value??e.any(a,de("created"),null,null)?.value??e.any(a,de("date"),null,null)?.value;if(n){const w=document.createElement("p");w.className="meeting-date",w.textContent=Ff(n),r.appendChild(w)}const l=e.any(a,B("location"),null,null)?.value??e.any(a,Ot("location"),null,null)?.value;if(l&&!l.startsWith("http")){const w=document.createElement("p");w.className="meeting-location",w.textContent=l,r.appendChild(w)}const o=e.any(a,de("description"),null,null)?.value??e.any(a,B("description"),null,null)?.value;if(o){const w=document.createElement("p");w.className="meeting-description",w.textContent=o,r.appendChild(w)}const c=e.each(a,Ot("participant"),null,null);if(c.length>0){const w=document.createElement("div");w.className="meeting-section";const y=document.createElement("h3");y.textContent="Participants",w.appendChild(y);const N=document.createElement("ul");N.className="meeting-participants";for(const D of c){const L=D,R=Bf(L,e),Q=document.createElement("li"),J=document.createElement("a");J.className="meeting-participant",J.href=L.value,J.textContent=R,Q.appendChild(J),N.appendChild(Q)}w.appendChild(N),r.appendChild(w)}const h=e.each(a,Ot("agenda"),null,null);if(h.length>0){const w=document.createElement("div");w.className="meeting-section";const y=document.createElement("h3");y.textContent="Agenda",w.appendChild(y);const N=document.createElement("ol");N.className="meeting-agenda";for(const D of h){const L=document.createElement("li"),R=e.any(D,de("title"),null,null)?.value??e.any(D,B("name"),null,null)?.value??D.value;R&&!R.startsWith("http")?L.textContent=R:L.textContent=fe(R),N.appendChild(L)}w.appendChild(N),r.appendChild(w)}const p=e.each(a,Ot("action"),null,null);if(p.length>0){const w=document.createElement("div");w.className="meeting-section";const y=document.createElement("h3");y.textContent="Action Items",w.appendChild(y);const N=document.createElement("ul");N.className="meeting-actions";for(const D of p){const L=document.createElement("li"),R=e.any(D,de("title"),null,null)?.value??e.any(D,B("name"),null,null)?.value??e.any(D,rt("label"),null,null)?.value??D.value;R&&!R.startsWith("http")?L.textContent=R:L.textContent=fe(R),N.appendChild(L)}w.appendChild(N),r.appendChild(w)}const m=e.any(a,Ft("content"),null,null)?.value??e.any(a,B("text"),null,null)?.value;if(m){const w=document.createElement("div");w.className="meeting-section";const y=document.createElement("h3");y.textContent="Notes",w.appendChild(y);const N=document.createElement("div");N.className="meeting-notes",N.textContent=m,w.appendChild(N),r.appendChild(w)}t.appendChild(r)}Ot("Meeting").value,B("Event").value;function kf(a,e){return!!(e.each(a,me("type"),null,null).map(i=>i.value).includes(Ot("Meeting").value)||e.any(a,Ot("participant"),null,null)||e.any(a,Ot("agenda"),null,null))}const Rf={label:"Meeting",icon:"🤝",canHandle(a,e){return kf(a,e)},render(a,e,t){Lf(a,e,t)}};Be(Rf);const Ls={Create:"created",Update:"updated",Delete:"deleted",Add:"added",Remove:"removed",Like:"liked",Follow:"followed",Announce:"shared",Accept:"accepted",Reject:"rejected",Invite:"invited",Offer:"offered",Undo:"undid",Block:"blocked",Flag:"flagged",Move:"moved",Read:"read",View:"viewed",Listen:"listened to",Join:"joined",Leave:"left"};function Of(a,e){const t=[],r=[...e.each(a,Ke("contains"),null,null),...e.each(a,Ye("items"),null,null),...e.each(a,Yt("notification"),null,null)],i=new Set;for(const s of r){if(i.has(s.value))continue;i.add(s.value);const n=s,l=e.each(n,me("type"),null,null).map(R=>R.value);let o="";for(const R of l){const Q=R.split("#").pop()??R.split("/").pop()??"";if(Ls[Q]){o=Q;break}}const c=e.any(n,Ye("actor"),null,null);let h="",p=null;c&&(p=c.value,h=e.any(c,B("name"),null,null)?.value??e.any(c,Ye("name"),null,null)?.value??fe(c.value));const m=e.any(n,Ye("object"),null,null);let w="",y=null;m&&(y=m.value,w=e.any(m,B("name"),null,null)?.value??e.any(m,Ye("name"),null,null)?.value??fe(m.value));const N=e.any(n,Ye("content"),null,null)?.value??e.any(n,Ye("summary"),null,null)?.value??e.any(n,de("description"),null,null)?.value??null,D=e.any(n,Ye("published"),null,null)?.value??e.any(n,de("created"),null,null)?.value??e.any(n,de("date"),null,null)?.value??null,L=Ls[o]??(o.toLowerCase()||"notified");t.push({uri:n.value,type:o,actor:h,actorUri:p,verb:L,object:w,objectUri:y,content:N,timestamp:D})}return t.sort((s,n)=>!s.timestamp&&!n.timestamp?0:s.timestamp?n.timestamp?new Date(n.timestamp).getTime()-new Date(s.timestamp).getTime():-1:1),t}function Uf(a){const e=new Date(a);if(isNaN(e.getTime()))return a;const t=new Date,r=t.getTime()-e.getTime(),i=Math.floor(r/6e4),s=Math.floor(r/36e5),n=Math.floor(r/864e5);return i<1?"just now":i<60?`${i}m ago`:s<24?`${s}h ago`:n<7?`${n}d ago`:e.toLocaleDateString(void 0,{month:"short",day:"numeric",year:e.getFullYear()!==t.getFullYear()?"numeric":void 0})}function Mf(a,e,t){t.innerHTML="";const r=document.createElement("div");r.className="notif-view";const i=e.any(a,B("name"),null,null)?.value??e.any(a,de("title"),null,null)?.value??e.any(a,rt("label"),null,null)?.value??"Notifications",s=document.createElement("h2");s.className="notif-title",s.textContent=i,r.appendChild(s);const n=Of(a,e),l=document.createElement("p");if(l.className="notif-count",l.textContent=`${n.length} notification${n.length!==1?"s":""}`,r.appendChild(l),n.length===0){const c=document.createElement("p");c.className="notif-empty",c.textContent="No notifications.",r.appendChild(c),t.appendChild(r);return}const o=document.createElement("div");o.className="notif-list";for(const c of n){const h=document.createElement("div");h.className="notif-item";const p=document.createElement("div");if(p.className="notif-summary",c.actor){const m=document.createElement("a");m.className="notif-actor",m.textContent=c.actor,c.actorUri&&(m.href=c.actorUri),p.appendChild(m),p.appendChild(document.createTextNode(` ${c.verb} `))}else p.appendChild(document.createTextNode(`${c.verb} `));if(c.object){const m=document.createElement("a");m.className="notif-object",m.textContent=c.object,c.objectUri&&(m.href=c.objectUri),p.appendChild(m)}if(h.appendChild(p),c.content){const m=document.createElement("p");m.className="notif-content",m.textContent=c.content,h.appendChild(m)}if(c.timestamp){const m=document.createElement("time");m.className="notif-time",m.dateTime=c.timestamp,m.textContent=Uf(c.timestamp),h.appendChild(m)}o.appendChild(h)}r.appendChild(o),t.appendChild(r)}function Pf(a,e){const t=e.each(a,me("type"),null,null).map(r=>r.value);return!!((t.includes(Ke("Container").value)||t.includes(Ke("BasicContainer").value))&&(e.match(null,Ke("inbox"),a,null).length>0||e.match(null,Yt("inbox"),a,null).length>0)||t.includes(Ye("OrderedCollection").value)||t.includes(Ye("Collection").value)&&(e.any(a,Ye("items"),null,null)||e.any(a,Ke("contains"),null,null))||e.any(a,Yt("notification"),null,null))}const $f={label:"Notifications",icon:"🔔",canHandle(a,e){return Pf(a,e)},render(a,e,t){Mf(a,e,t)}};Be($f);const qf={SingleLineTextField:{inputType:"text"},TextField:{inputType:"text"},NamedNodeURIField:{inputType:"url"},IntegerField:{inputType:"number",xsdType:"integer"},DecimalField:{inputType:"number",xsdType:"decimal"},FloatField:{inputType:"number",xsdType:"float"},DateField:{inputType:"date",xsdType:"date"},DateTimeField:{inputType:"datetime-local",xsdType:"dateTime"},TimeField:{inputType:"time",xsdType:"time"},ColorField:{inputType:"color"},PhoneField:{inputType:"tel"},EmailField:{inputType:"email"}};function ks(a,e){return e.any(a,rt("label"),null,null)?.value??e.any(a,de("title"),null,null)?.value??e.any(a,et("title"),null,null)?.value??e.any(a,Ne("name"),null,null)?.value??e.any(a,B("name"),null,null)?.value??fe(a.value)}function Hf(a,e){const t=e.each(a,me("type"),null,null);for(const r of t){const i=fe(r.value);if(i!=="type")return i}return"Unknown"}function jf(a,e){const t=[],r=e.each(a,gt("part"),null,null),i=e.any(a,gt("parts"),null,null);i&&i.termType==="NamedNode"&&Vf(i,e,t);for(const s of r){if(s.termType!=="NamedNode")continue;const n=s;t.some(l=>l.uri===n.value)||t.push(Ll(n,e))}return t.sort((s,n)=>s.sequence-n.sequence),t}function Vf(a,e,t){let r=a;const i=new Set;for(;r&&!i.has(r.value)&&(i.add(r.value),r.value!==me("nil").value);){const s=e.any(r,me("first"),null,null);s&&s.termType==="NamedNode"&&t.push(Ll(s,e));const n=e.any(r,me("rest"),null,null);if(n&&n.termType==="NamedNode")r=n;else break}}function Ll(a,e){const t=Hf(a,e),r=e.any(a,gt("property"),null,null)?.value??null,i=e.any(a,gt("label"),null,null)?.value??(r?fe(r):t),s=e.any(a,gt("sequence"),null,null)?.value,n=s?parseInt(s,10):999,l=e.any(a,gt("contents"),null,null)?.value??null;return{uri:a.value,fieldType:t,property:r,label:i,sequence:n,contents:l}}function Gf(a,e){const t=e.each(a,me("type"),null,null);if(t.some(r=>r.value===gt("Form").value))return a;for(const r of t){if(r.termType!=="NamedNode")continue;const i=e.any(r,gt("annotationForm"),null,null);if(i&&i.termType==="NamedNode")return i;const s=e.any(r,gt("creationForm"),null,null);if(s&&s.termType==="NamedNode")return s;const n=e.each(r,rt("subClassOf"),null,null);for(const l of n){if(l.termType!=="NamedNode")continue;const o=e.any(l,gt("annotationForm"),null,null);if(o&&o.termType==="NamedNode")return o;const c=e.any(l,gt("creationForm"),null,null);if(c&&c.termType==="NamedNode")return c}}return null}function Xf(a,e,t){const r=document.createElement("div");if(r.className="form-field",a.fieldType==="Comment"){const c=document.createElement("p");return c.className="form-comment",c.textContent=a.contents??"",c}if(a.fieldType==="Heading"){const c=document.createElement("h3");return c.className="form-heading",c.textContent=a.contents??a.label,c}const i=document.createElement("label");i.className="form-field-label",i.textContent=a.label,a.property&&(i.title=a.property),r.appendChild(i);const s=document.createElement("div");s.className="form-field-value";let n="";if(a.property){const c={termType:"NamedNode",value:a.property},h=t.any(e,c,null,null);h&&(n=h.value)}if(a.fieldType==="BooleanField"||a.fieldType==="TristateField"){const c=document.createElement("span");return c.className="form-boolean",n==="true"||n==="1"?(c.textContent="✓",c.classList.add("form-bool-true")):n==="false"||n==="0"?(c.textContent="✗",c.classList.add("form-bool-false")):(c.textContent=a.fieldType==="TristateField"?"—":"✗",c.classList.add("form-bool-null")),s.appendChild(c),r.appendChild(s),r}if(a.fieldType==="MultiLineTextField"){const c=document.createElement("textarea");return c.className="form-textarea",c.value=n,c.readOnly=!0,c.rows=4,s.appendChild(c),r.appendChild(s),r}if(a.fieldType==="Choice"||a.fieldType==="Classifier"){const c=document.createElement("select");c.className="form-select",c.disabled=!0;const h=document.createElement("option");return h.textContent=n?fe(n):"(none)",h.value=n,c.appendChild(h),s.appendChild(c),r.appendChild(s),r}const l=qf[a.fieldType],o=document.createElement("input");return o.className="form-input",o.type=l?.inputType??"text",o.value=n,o.readOnly=!0,s.appendChild(o),r.appendChild(s),r}function zf(a,e,t){t.innerHTML="";const r=document.createElement("div");r.className="form-view";const i=Gf(a,e);if(!i){const p=document.createElement("p");p.className="form-empty",p.textContent="No form definition found for this resource.",r.appendChild(p),t.appendChild(r);return}const s=e.any(i,de("title"),null,null)?.value??e.any(i,et("title"),null,null)?.value??ks(i,e),n=document.createElement("h2");if(n.className="form-title",n.textContent=s,r.appendChild(n),!(i.value===a.value)){const p=document.createElement("p");p.className="form-subject",p.textContent=`Editing: ${ks(a,e)}`,r.appendChild(p)}const o=jf(i,e);if(o.length===0){const p=document.createElement("p");p.className="form-no-fields",p.textContent="This form has no fields defined.",r.appendChild(p),t.appendChild(r);return}const c=document.createElement("p");c.className="form-count",c.textContent=`${o.length} field${o.length!==1?"s":""}`,r.appendChild(c);const h=document.createElement("div");h.className="form-fields";for(const p of o)h.appendChild(Xf(p,a,e));r.appendChild(h),t.appendChild(r)}function Wf(a,e){const t=e.each(a,me("type"),null,null);if(t.map(i=>i.value).includes(gt("Form").value))return!0;for(const i of t){if(i.termType!=="NamedNode")continue;if(e.any(i,gt("creationForm"),null,null)||e.any(i,gt("annotationForm"),null,null))return!0;const s=e.each(i,rt("subClassOf"),null,null);for(const n of s)if(n.termType==="NamedNode"&&(e.any(n,gt("creationForm"),null,null)||e.any(n,gt("annotationForm"),null,null)))return!0}return!1}const Yf={label:"Form",icon:"📋",canHandle(a,e){return Wf(a,e)},render(a,e,t){zf(a,e,t)}};Be(Yf);const Qf=[{uri:"Read",label:"Read"},{uri:"Write",label:"Write"},{uri:"Append",label:"Append"},{uri:"Control",label:"Control"}];function Jf(a,e){return e.any(a,Ne("name"),null,null)?.value??e.any(a,we("fn"),null,null)?.value??fe(a.value)}function Zf(a,e){const t=[],r=e.each(a,vt("trustedApp"),null,null);for(const i of r){const s=e.any(i,vt("origin"),null,null);if(!s)continue;const n=s.value,l=fe(n),c=e.each(i,vt("mode"),null,null).map(h=>fe(h.value));t.push({originUri:n,originLabel:l,modes:c})}return t.sort((i,s)=>i.originUri.localeCompare(s.originUri)),t}function Kf(a,e,t){t.innerHTML="";const r=document.createElement("div");r.className="trusted-apps-view";const i=document.createElement("h2");i.className="trusted-apps-title",i.textContent="Trusted Applications",r.appendChild(i);const s=Jf(a,e),n=document.createElement("p");n.className="trusted-apps-subtitle",n.textContent=`Manage applications trusted by ${s}`,r.appendChild(n);const l=Zf(a,e),o=document.createElement("p");if(o.className="trusted-apps-count",o.textContent=`${l.length} trusted application${l.length!==1?"s":""}`,r.appendChild(o),l.length===0){const N=document.createElement("p");N.className="trusted-apps-empty",N.textContent="No trusted applications configured.",r.appendChild(N),Rs(r),t.appendChild(r);return}const c=document.createElement("table");c.className="trusted-apps-table";const h=document.createElement("thead"),p=document.createElement("tr"),m=document.createElement("th");m.textContent="Application URL";const w=document.createElement("th");w.textContent="Access Modes",p.appendChild(m),p.appendChild(w),h.appendChild(p),c.appendChild(h);const y=document.createElement("tbody");for(const N of l){const D=document.createElement("tr");D.className="trusted-apps-row";const L=document.createElement("td");L.className="trusted-apps-origin";const R=document.createElement("a");R.href=N.originUri,R.textContent=N.originUri,R.target="_blank",R.rel="noopener",L.appendChild(R),D.appendChild(L);const Q=document.createElement("td");Q.className="trusted-apps-modes";for(const J of Qf){const x=document.createElement("span"),G=N.modes.includes(J.uri);x.className=`trusted-apps-mode ${G?"trusted-apps-mode-active":"trusted-apps-mode-inactive"}`,x.textContent=J.label,Q.appendChild(x)}D.appendChild(Q),y.appendChild(D)}c.appendChild(y),r.appendChild(c),Rs(r),t.appendChild(r)}function Rs(a){const e=document.createElement("div");e.className="trusted-apps-notes";const t=document.createElement("h3");t.textContent="Notes",e.appendChild(t);const r=document.createElement("ol"),i=["Trusted applications get access to all resources that you have access to.","You can limit which modes they have by default.","They will not gain more access than you have."];for(const s of i){const n=document.createElement("li");n.textContent=s,r.appendChild(n)}e.appendChild(r),a.appendChild(e)}function ep(a,e){return e.each(a,vt("trustedApp"),null,null).length>0}const tp={label:"Trusted Apps",icon:"🛡️",canHandle(a,e){return ep(a,e)},render(a,e,t){Kf(a,e,t)}};Be(tp);function np(a,e){return e.any(a,de("title"),null,null)?.value??e.any(a,et("title"),null,null)?.value??e.any(a,B("name"),null,null)?.value??"Notepad"}function kl(a,e){return e.any(a,Ne("name"),null,null)?.value??e.any(a,B("name"),null,null)?.value??fe(a.value)}function rp(a,e){const t=[],r=new Set;let i=e.any(a,ea("next"),null,null);for(;i&&i.termType==="NamedNode"&&!r.has(i.value)&&i.value!==a.value;){r.add(i.value);const s=i,n=e.any(s,Ft("content"),null,null)?.value??e.any(s,et("description"),null,null)?.value??"",l=e.any(s,et("author"),null,null)??e.any(s,de("creator"),null,null)??e.any(s,Ne("maker"),null,null);let o=null,c=null;l&&(c=l.value,l.termType==="NamedNode"?o=kl(l,e):o=l.value),t.push({uri:s.value,content:n,author:o,authorUri:c}),i=e.any(s,ea("next"),null,null)}return t}function ap(a,e){const t=e.any(a,de("created"),null,null)?.value??e.any(a,et("date"),null,null)?.value;if(!t)return null;const r=new Date(t);return isNaN(r.getTime())?t:r.toLocaleDateString()}function ip(a,e,t){t.innerHTML="";const r=document.createElement("div");r.className="pad-view";const i=np(a,e),s=document.createElement("h2");s.className="pad-title",s.textContent=i,r.appendChild(s);const n=document.createElement("div");n.className="pad-meta";const l=ap(a,e);if(l){const y=document.createElement("span");y.className="pad-date",y.textContent=`Created: ${l}`,n.appendChild(y)}const o=e.any(a,et("author"),null,null)??e.any(a,de("creator"),null,null);if(o&&o.termType==="NamedNode"){const y=kl(o,e),N=document.createElement("span");N.className="pad-author",N.textContent=`Author: ${y}`,n.appendChild(N)}n.children.length>0&&r.appendChild(n);const c=rp(a,e);if(c.length===0){const y=document.createElement("p");y.className="pad-empty",y.textContent="This notepad is empty.",r.appendChild(y),t.appendChild(r);return}const h=document.createElement("div");h.className="pad-content";const m=new Set(c.filter(y=>y.author).map(y=>y.authorUri)).size>1;for(const y of c){const N=document.createElement("div");if(N.className="pad-chunk",m&&y.author){const R=document.createElement("span");R.className="pad-chunk-author",R.textContent=y.author,y.authorUri&&(R.title=y.authorUri),N.appendChild(R)}const D=document.createElement("div");D.className="pad-chunk-text";const L=y.content.split(`
`);for(let R=0;R<L.length;R++)R>0&&D.appendChild(document.createElement("br")),D.appendChild(document.createTextNode(L[R]));N.appendChild(D),h.appendChild(N)}r.appendChild(h);const w=document.createElement("p");w.className="pad-count",w.textContent=`${c.length} chunk${c.length!==1?"s":""}`,r.appendChild(w),t.appendChild(r)}function sp(a,e){return!!(e.each(a,me("type"),null,null).map(i=>i.value).includes(ea("Notepad").value)||e.any(a,ea("next"),null,null))}const lp={label:"Notepad",icon:"📝",canHandle(a,e){return sp(a,e)},render(a,e,t){ip(a,e,t)}};Be(lp);function up(a,e){return e.any(a,de("title"),null,null)?.value??e.any(a,et("title"),null,null)?.value??e.any(a,B("name"),null,null)?.value??e.any(a,Ft("name"),null,null)?.value??"Microblog"}function op(a,e){return e.any(a,Ne("name"),null,null)?.value??e.any(a,B("name"),null,null)?.value??fe(a.value)}function cp(a,e){return e.each(a,me("type"),null,null).some(r=>r.value===Wr("MicroblogPost").value)}function Rl(a,e){const t=e.any(a,Ft("content"),null,null)?.value??e.any(a,de("description"),null,null)?.value??e.any(a,et("description"),null,null)?.value??"",r=e.any(a,de("created"),null,null)?.value??e.any(a,et("date"),null,null)?.value,i=r?new Date(r):null,s=e.any(a,Ft("has_creator"),null,null)??e.any(a,Ne("maker"),null,null)??e.any(a,de("creator"),null,null);let n=null,l=null;return s&&(l=s.value,s.termType==="NamedNode"?n=op(s,e):n=s.value),{uri:a.value,content:t,created:i,creator:n,creatorUri:l}}function dp(a,e){const t=e.each(a,Ft("container_of"),null,null),r=[];for(const i of t)i.termType==="NamedNode"&&r.push(Rl(i,e));return r.sort((i,s)=>!i.created&&!s.created?0:i.created?s.created?s.created.getTime()-i.created.getTime():-1:1),r}function hp(a){const e=new Date,t=e.getTime()-a.getTime(),r=Math.floor(t/6e4),i=Math.floor(t/36e5),s=Math.floor(t/864e5);return r<1?"just now":r<60?`${r}m ago`:i<24?`${i}h ago`:s<7?`${s}d ago`:a.toLocaleDateString(void 0,{month:"short",day:"numeric",year:a.getFullYear()!==e.getFullYear()?"numeric":void 0})}function fp(a,e){const t=/(https?:\/\/[^\s<>"]+)/g,r=a.split(t);for(const i of r)if(t.test(i)){t.lastIndex=0;const s=document.createElement("a");s.href=i,s.textContent=i,s.target="_blank",s.rel="noopener",e.appendChild(s)}else i&&e.appendChild(document.createTextNode(i))}function Os(a){const e=document.createElement("div");e.className="microblog-post";const t=document.createElement("div");if(t.className="microblog-post-header",a.creator){const s=document.createElement("span");s.className="microblog-post-author",s.textContent=a.creator,a.creatorUri&&(s.title=a.creatorUri),t.appendChild(s)}if(a.created){const s=document.createElement("time");s.className="microblog-post-time",s.dateTime=a.created.toISOString(),s.textContent=hp(a.created),t.appendChild(s)}e.appendChild(t);const r=document.createElement("div");r.className="microblog-post-content",fp(a.content,r),e.appendChild(r);const i=a.content.length;if(i>0){const s=document.createElement("span");s.className="microblog-char-count",s.textContent=`${i}`,e.appendChild(s)}return e}function pp(a,e,t){t.innerHTML="";const r=document.createElement("div");if(r.className="microblog-view",cp(a,e)){const h=Rl(a,e),p=document.createElement("h2");p.className="microblog-title",p.textContent="Microblog Post",r.appendChild(p),r.appendChild(Os(h)),t.appendChild(r);return}const i=up(a,e),s=document.createElement("h2");s.className="microblog-title",s.textContent=i,r.appendChild(s);const n=e.any(a,de("description"),null,null)?.value??e.any(a,et("description"),null,null)?.value;if(n){const h=document.createElement("p");h.className="microblog-description",h.textContent=n,r.appendChild(h)}const l=dp(a,e),o=document.createElement("p");if(o.className="microblog-count",o.textContent=`${l.length} post${l.length!==1?"s":""}`,r.appendChild(o),l.length===0){const h=document.createElement("p");h.className="microblog-empty",h.textContent="No posts yet.",r.appendChild(h),t.appendChild(r);return}const c=document.createElement("div");c.className="microblog-feed";for(const h of l)c.appendChild(Os(h));r.appendChild(c),t.appendChild(r)}function mp(a,e){const r=e.each(a,me("type"),null,null).map(s=>s.value);if(r.includes(Wr("Microblog").value)||r.includes(Wr("MessageBoard").value)||r.includes(Ft("Forum").value)||r.includes(Wr("MicroblogPost").value))return!0;const i=e.each(a,Ft("container_of"),null,null);if(i.length>0){for(const s of i)if(s.termType==="NamedNode"&&e.any(s,Ft("content"),null,null))return!0}return!1}const gp={label:"Microblog",icon:"📢",canHandle(a,e){return mp(a,e)},render(a,e,t){pp(a,e,t)}};Be(gp);function vp(a,e){const t=e.each(a,cr("slot"),null,null),r=[];for(const i of t){const s=e.any(i,cr("index"),null,null),n=e.any(i,cr("item"),null,null);if(!n)continue;const l=n,o=e.any(l,et("title"),null,null)?.value??e.any(l,de("title"),null,null)?.value??e.any(l,B("name"),null,null)?.value??l.value,c=e.any(l,B("video"),null,null)?.value??e.any(l,B("contentUrl"),null,null)?.value??void 0;r.push({index:s?Number(s.value):0,title:o,uri:l.value,videoUrl:c})}return r.sort((i,s)=>i.index-s.index),r}function yp(a){const e=[/(?:youtube\.com\/watch\?v=)([a-zA-Z0-9_-]{11})/,/(?:youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})/,/(?:youtu\.be\/)([a-zA-Z0-9_-]{11})/];for(const t of e){const r=a.match(t);if(r)return r[1]}return null}function wp(a,e,t){t.innerHTML="";const r=e.any(a,et("title"),null,null)?.value??e.any(a,de("title"),null,null)?.value??e.any(a,B("name"),null,null)?.value??"Untitled Playlist",i=document.createElement("h2");i.textContent=r,t.appendChild(i);const s=vp(a,e);if(s.length===0){const l=document.createElement("p");l.textContent="No tracks found in this playlist.",t.appendChild(l);return}const n=document.createElement("ol");n.className="playlist-tracks";for(const l of s){const o=document.createElement("li");o.className="playlist-track",o.dataset.uri=l.uri;const c=document.createElement("span");if(c.className="track-title",c.textContent=l.title,o.appendChild(c),l.videoUrl){const h=document.createElement("div");h.className="track-video";const p=yp(l.videoUrl);if(p){const m=document.createElement("iframe");m.src=`https://www.youtube-nocookie.com/embed/${p}`,m.width="560",m.height="315",m.allowFullscreen=!0,m.setAttribute("loading","lazy"),m.setAttribute("allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"),h.appendChild(m)}else{const m=document.createElement("video");m.src=l.videoUrl,m.controls=!0,m.width=560,h.appendChild(m)}o.appendChild(h)}n.appendChild(o)}t.appendChild(n)}function Ep(a,e){const r=e.each(a,me("type"),null,null).map(s=>s.value);return r.includes(cr("OrderedList").value)||r.includes(fd("Playlist").value)?!0:e.each(a,cr("slot"),null,null).length>0}const Cp={label:"Playlist",icon:"🎵",canHandle(a,e){return Ep(a,e)},render(a,e,t){wp(a,e,t)}};Be(Cp);function Np(a,e){if(e)return"📁";const t=a.split(".").pop()?.toLowerCase()??"";return{jpg:"🖼",jpeg:"🖼",png:"🖼",gif:"🖼",svg:"🖼",webp:"🖼",bmp:"🖼",ico:"🖼",mp3:"🎵",wav:"🎵",ogg:"🎵",flac:"🎵",m4a:"🎵",mp4:"🎬",webm:"🎬",avi:"🎬",mov:"🎬",mkv:"🎬",pdf:"📑",doc:"📝",docx:"📝",ttl:"📊",rdf:"📊",jsonld:"📊",n3:"📊",nq:"📊",json:"📋",xml:"📋",csv:"📋",js:"📜",ts:"📜",py:"📜",html:"📜",css:"📜",txt:"📄",md:"📄",zip:"📦",tar:"📦",gz:"📦"}[t]??"📄"}function bp(a,e){const t=e.each(a,Ke("contains"),null,null),r=[];for(const i of t){const s=i,n=s.value,l=e.each(s,me("type"),null,null).map(N=>N.value),o=l.includes(Ke("Container").value)||l.includes(Ke("BasicContainer").value)||n.endsWith("/"),c=ni(n,o),p=(e.any(s,de("modified"),null,null)??e.any(s,ws("mtime"),null,null))?.value,m=e.any(s,ws("size"),null,null),w=m?Number(m.value):void 0,y=e.any(s,de("format"),null,null)?.value??void 0;r.push({uri:n,name:c,isContainer:o,modified:p,size:w,contentType:y})}return r.sort((i,s)=>i.isContainer!==s.isContainer?i.isContainer?-1:1:i.name.localeCompare(s.name)),r}function ni(a,e){const r=(e?a.replace(/\/$/,""):a).split("/");return decodeURIComponent(r[r.length-1]||a)}function xp(a){return a<1024?`${a} B`:a<1024*1024?`${(a/1024).toFixed(1)} KB`:`${(a/(1024*1024)).toFixed(1)} MB`}function Tp(a){const e=Number(a),t=Number.isNaN(e)?new Date(a):new Date(e*1e3);return Number.isNaN(t.getTime())?a:t.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function Ap(a){const e=a.replace(/\/$/,""),t=e.lastIndexOf("/");return t<=7?null:e.slice(0,t+1)}function Dp(a){const e=[];let t=a;for(;;){const r=ni(t,!0);e.unshift({label:r||"Root",uri:t});const i=Ap(t);if(!i)break;t=i}return e}function _p(a,e,t,r){const i=document.createElement("div");i.className="folder-toolbar";const s=document.createElement("button");s.className="folder-toolbar-btn",s.textContent="📁 New Folder",i.appendChild(s);const n=document.createElement("button");n.className="folder-toolbar-btn",n.textContent="📄 New File",i.appendChild(n);const l=document.createElement("div");l.className="folder-create-form",l.hidden=!0;const o=document.createElement("span");o.className="folder-create-label",l.appendChild(o);const c=document.createElement("input");c.type="text",c.className="folder-create-input",c.placeholder="Name...",l.appendChild(c);const h=document.createElement("button");h.className="folder-toolbar-btn folder-create-ok",h.textContent="Create",l.appendChild(h);const p=document.createElement("button");p.className="folder-toolbar-btn folder-create-cancel",p.textContent="Cancel",l.appendChild(p);const m=document.createElement("span");m.className="folder-create-status",l.appendChild(m),i.appendChild(l);let w="folder";function y(D){w=D,o.textContent=D==="folder"?"Folder name:":"File name:",c.value="",m.textContent="",l.hidden=!1,s.hidden=!0,n.hidden=!0,c.focus()}function N(){l.hidden=!0,s.hidden=!1,n.hidden=!1,m.textContent=""}return s.addEventListener("click",()=>y("folder")),n.addEventListener("click",()=>y("file")),p.addEventListener("click",N),c.addEventListener("keydown",D=>{D.key==="Enter"&&h.click(),D.key==="Escape"&&N()}),h.addEventListener("click",async()=>{const D=c.value.trim();if(!D){m.textContent="Name cannot be empty.";return}h.disabled=!0,m.textContent="Creating...";try{if(w==="folder"){const L=a.value.endsWith("/")?a.value:a.value+"/";await e.webOperation("POST",L,{data:"",contentType:"text/turtle",headers:{Slug:D,Link:'<http://www.w3.org/ns/ldp#BasicContainer>; rel="type"'}})}else{const R=(a.value.endsWith("/")?a.value:a.value+"/")+encodeURIComponent(D),Q=D.split(".").pop()?.toLowerCase()??"",x={ttl:"text/turtle",rdf:"application/rdf+xml",jsonld:"application/ld+json",json:"application/json",html:"text/html",css:"text/css",js:"application/javascript",txt:"text/plain",md:"text/markdown",xml:"application/xml",csv:"text/csv"}[Q]??"text/turtle";await e.webOperation("PUT",R,{data:"",contentType:x})}N(),await e.load(a,{force:!0}),Ol(a,r,t)}catch(L){const R=L instanceof Error?L.message:String(L);m.textContent=`Error: ${R}`,h.disabled=!1}}),i}function Ol(a,e,t){t.innerHTML="";const r=document.createElement("div");r.className="folder-view";const i=e.any(a,et("title"),null,null)?.value??e.any(a,de("title"),null,null)?.value??ni(a.value,!0),s=document.createElement("h2");s.className="folder-title",s.textContent=i,r.appendChild(s);const n=Dp(a.value);if(n.length>1){const L=document.createElement("nav");L.className="folder-breadcrumbs",L.setAttribute("aria-label","Folder path");for(let R=0;R<n.length;R++){if(R>0){const Q=document.createElement("span");Q.className="folder-breadcrumb-sep",Q.textContent=" / ",L.appendChild(Q)}if(R<n.length-1){const Q=Jt(n[R].uri,n[R].label);Q.className="folder-breadcrumb",L.appendChild(Q)}else{const Q=document.createElement("span");Q.className="folder-breadcrumb-current",Q.textContent=n[R].label,L.appendChild(Q)}}r.appendChild(L)}const l=document.createElement("p");l.className="folder-path",l.textContent=a.value,r.appendChild(l);const o=bp(a,e),c=o.filter(L=>L.isContainer),h=o.filter(L=>!L.isContainer),p=[];c.length>0&&p.push(`${c.length} folder${c.length!==1?"s":""}`),h.length>0&&p.push(`${h.length} file${h.length!==1?"s":""}`);const m=document.createElement("p");m.className="folder-count",m.textContent=p.length>0?p.join(", "):"0 items",r.appendChild(m);const w=e.fetcher;if(w){const L=_p(a,w,t,e);r.appendChild(L)}if(o.length===0){const L=document.createElement("p");L.className="folder-empty",L.textContent="This folder is empty.",r.appendChild(L),t.appendChild(r);return}const y=document.createElement("table");y.className="folder-listing";const N=document.createElement("thead");N.innerHTML="<tr><th></th><th>Name</th><th>Type</th><th>Size</th><th>Modified</th></tr>",y.appendChild(N);const D=document.createElement("tbody");for(const L of o){const R=document.createElement("tr");R.className=L.isContainer?"folder-row":"file-row";const Q=document.createElement("td");Q.className="folder-icon",Q.textContent=Np(L.name,L.isContainer),R.appendChild(Q);const J=document.createElement("td");J.className="folder-name";const x=Jt(L.uri,L.name+(L.isContainer?"/":""));J.appendChild(x),R.appendChild(J);const G=document.createElement("td");G.className="folder-type",L.isContainer?G.textContent="Folder":L.contentType?G.textContent=L.contentType:G.textContent="",R.appendChild(G);const M=document.createElement("td");M.className="folder-size",M.textContent=L.size!=null?xp(L.size):"",R.appendChild(M);const X=document.createElement("td");X.className="folder-modified",X.textContent=L.modified?Tp(L.modified):"",R.appendChild(X),D.appendChild(R)}y.appendChild(D),r.appendChild(y),t.appendChild(r)}function Sp(a,e){const r=e.each(a,me("type"),null,null).map(i=>i.value);return!!(r.includes(Ke("Container").value)||r.includes(Ke("BasicContainer").value)||a.value.endsWith("/")&&e.match(a,Ke("contains"),null,null).length>0)}const Ip={label:"Folder",icon:"📁",canHandle(a,e){return Sp(a,e)},render(a,e,t){Ol(a,e,t)}};Be(Ip);function Fp(a,e){const t=e.each(null,Gn("storage"),a,null);for(const i of t){if(i.termType!=="NamedNode")continue;const s=e.any(i,Ne("name"),null,null)?.value??e.any(i,we("fn"),null,null)?.value;if(s)return s}const r=e.any(a,Ne("primaryTopic"),null,null);if(r&&r.termType==="NamedNode"){const i=e.any(r,Ne("name"),null,null)?.value??e.any(r,we("fn"),null,null)?.value;if(i)return i}try{const s=new URL(a.value).hostname.split(".")[0];if(s&&s!=="www")return s}catch{}return null}function Bp(a,e){const t=e.each(null,Gn("storage"),a,null);for(const i of t)if(i.termType==="NamedNode")return i.value;const r=e.any(a,Ne("primaryTopic"),null,null);return r&&r.termType==="NamedNode"?r.value:null}function Lp(a,e){const t=[],r=e.each(a,Ke("contains"),null,null);for(const i of r){if(i.termType!=="NamedNode")continue;const s=i,l=e.each(s,me("type"),null,null).map(h=>h.value),o=l.includes(Ke("Container").value)||l.includes(Ke("BasicContainer").value)||s.value.endsWith("/"),c=e.any(s,de("title"),null,null)?.value??e.any(s,et("title"),null,null)?.value??fe(s.value);t.push({uri:s.value,label:c,type:o?"container":"resource"})}return t.sort((i,s)=>i.type!==s.type?i.type==="container"?-1:1:i.label.localeCompare(s.label)),t}function kp(a,e){const r=e.each(a,me("type"),null,null).map(s=>s.value);let i=null;return r.includes(Yt("Account").value)?i="Solid Account":r.includes(Gn("Storage").value)&&(i="Solid Pod"),{typeLabel:i}}function Rp(a,e,t){t.innerHTML="";const r=document.createElement("div");r.className="dashboard-view";const i=Fp(a,e),s=Bp(a,e),n=document.createElement("h2");n.className="dashboard-title",n.textContent=i?`${i}'s Pod`:"Solid Pod",r.appendChild(n);const l=document.createElement("p");l.className="dashboard-url";const o=document.createElement("code");o.textContent=a.value,l.appendChild(o),r.appendChild(l);const{typeLabel:c}=kp(a,e);if(c){const w=document.createElement("span");w.className="dashboard-badge",w.textContent=c,r.appendChild(w)}if(s){const w=document.createElement("div");w.className="dashboard-section";const y=document.createElement("h3");y.textContent="Profile",w.appendChild(y);const N=Jt(s,i?`View ${i}'s profile`:"View profile");N.className="dashboard-link",w.appendChild(N),r.appendChild(w)}const h=Lp(a,e),p=document.createElement("div");p.className="dashboard-section";const m=document.createElement("h3");if(m.textContent="Data",p.appendChild(m),h.length===0){const w=document.createElement("p");w.className="dashboard-empty",w.textContent="No visible contents.",p.appendChild(w)}else{const w=document.createElement("p");w.className="dashboard-count";const y=h.filter(R=>R.type==="container").length,N=h.filter(R=>R.type==="resource").length,D=[];y>0&&D.push(`${y} folder${y!==1?"s":""}`),N>0&&D.push(`${N} file${N!==1?"s":""}`),w.textContent=D.join(", "),p.appendChild(w);const L=document.createElement("ul");L.className="dashboard-contents";for(const R of h){const Q=document.createElement("li");Q.className=`dashboard-item dashboard-item-${R.type}`;const J=document.createElement("span");J.className="dashboard-item-icon",J.textContent=R.type==="container"?"📁":"📄",Q.appendChild(J);const x=Jt(R.uri,R.label);x.className="dashboard-item-link",x.title=R.uri,Q.appendChild(x),L.appendChild(Q)}p.appendChild(L)}r.appendChild(p),t.appendChild(r)}function Op(a,e){const r=e.each(a,me("type"),null,null).map(n=>n.value);if(r.includes(Gn("Storage").value)||r.includes(Yt("Account").value))return!0;if(r.includes(Ke("Container").value)||r.includes(Ke("BasicContainer").value))try{if(new URL(a.value).pathname==="/")return!0}catch{}return e.each(null,Gn("storage"),a,null).length>0}const Up={label:"Dashboard",icon:"🏠",canHandle(a,e){return Op(a,e)},render(a,e,t){Rp(a,e,t)}};Be(Up);const Mp=/\.(png|jpe?g|gif|webp|svg|bmp|ico)(\?.*)?$/i;function Pp(a,e){return e.any(a,de("title"),null,null)?.value??e.any(a,et("title"),null,null)?.value??e.any(a,B("name"),null,null)?.value??e.any(a,Ne("name"),null,null)?.value??"Chat"}function Ul(a,e){return e.any(a,Ne("name"),null,null)?.value??e.any(a,B("name"),null,null)?.value??fe(a.value)}function $p(a,e){const t=e.each(a,yt("message"),null,null),r=[];for(const i of t){const s=i,n=e.any(s,Ft("content"),null,null)?.value??e.any(s,de("content"),null,null)?.value??e.any(s,et("description"),null,null)?.value??"",l=e.any(s,de("created"),null,null)?.value??e.any(s,et("date"),null,null)?.value,o=l?new Date(l):null,c=e.any(s,Ne("maker"),null,null)??e.any(s,et("creator"),null,null);let h=null,p=null;c&&(p=c.value,c.termType==="NamedNode"?h=Ul(c,e):h=c.value),r.push({uri:s.value,content:n,created:o,maker:h,makerUri:p})}return r.sort((i,s)=>!i.created&&!s.created?0:i.created?s.created?i.created.getTime()-s.created.getTime():1:-1),r}function qp(a){return a.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})}function Hp(a){return a.toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"})}function jp(a){return a.toISOString().slice(0,10)}function Vp(a,e){const t=/(https?:\/\/[^\s<>"]+)/g,r=a.split(t);for(const i of r)if(t.test(i))if(t.lastIndex=0,Mp.test(i)){const s=document.createElement("img");s.className="chat-inline-image",s.src=i,s.alt="Shared image",s.loading="lazy",e.appendChild(s)}else{const s=document.createElement("a");s.href=i,s.textContent=i,s.target="_blank",s.rel="noopener",e.appendChild(s)}else i&&e.appendChild(document.createTextNode(i))}function Gp(a,e,t){t.innerHTML="";const r=document.createElement("div");r.className="chat-view";const i=Pp(a,e),s=document.createElement("h2");s.className="chat-title",s.textContent=i,r.appendChild(s);const n=e.any(a,et("author"),null,null)??e.any(a,de("creator"),null,null);if(n&&n.termType==="NamedNode"){const p=Ul(n,e),m=document.createElement("p");m.className="chat-creator",m.textContent=`Created by ${p}`,r.appendChild(m)}const l=$p(a,e),o=document.createElement("p");if(o.className="chat-count",o.textContent=`${l.length} message${l.length!==1?"s":""}`,r.appendChild(o),l.length===0){const p=document.createElement("p");p.className="chat-empty",p.textContent="No messages yet.",r.appendChild(p),t.appendChild(r);return}const c=document.createElement("div");c.className="chat-messages";let h=null;for(const p of l){if(p.created){const N=jp(p.created);if(N!==h){h=N;const D=document.createElement("div");D.className="chat-date-header",D.textContent=Hp(p.created),c.appendChild(D)}}const m=document.createElement("div");m.className="chat-message";const w=document.createElement("div");if(w.className="chat-message-header",p.maker)if(p.makerUri){const N=Jt(p.makerUri,p.maker);N.className="chat-author",N.title=p.makerUri,w.appendChild(N)}else{const N=document.createElement("span");N.className="chat-author",N.textContent=p.maker,w.appendChild(N)}if(p.created){const N=document.createElement("time");N.className="chat-time",N.dateTime=p.created.toISOString(),N.textContent=qp(p.created),w.appendChild(N)}m.appendChild(w);const y=document.createElement("div");y.className="chat-content",Vp(p.content,y),m.appendChild(y),c.appendChild(m)}r.appendChild(c),t.appendChild(r)}function Xp(a,e){const r=e.each(a,me("type"),null,null).map(i=>i.value);return!!(r.includes(Ot("LongChat").value)||r.includes(Ot("ShortChat").value)||r.includes(Ot("Chat").value)||r.includes(yt("Flow").value)||r.includes(Ft("Thread").value)||e.match(a,yt("message"),null,null).length>0||e.any(a,Ft("content"),null,null)&&e.any(a,de("created"),null,null))}const zp={label:"Chat",icon:"💬",canHandle(a,e){return Xp(a,e)},render(a,e,t){Gp(a,e,t)}};Be(zp);function Ml(a,e){return e.any(a,we("fn"),null,null)?.value??e.any(a,Ne("name"),null,null)?.value??e.any(a,B("name"),null,null)?.value??fe(a.value)}function Wp(a,e){const t=[],r=e.each(a,we("hasEmail"),null,null);for(const i of r){const s=e.any(i,we("value"),null,null)?.value;s?t.push(s):i.value.startsWith("mailto:")&&t.push(i.value)}if(t.length===0){const i=e.any(a,Ne("mbox"),null,null)?.value;i&&t.push(i)}return t}function Yp(a,e){const t=[],r=e.each(a,we("hasTelephone"),null,null);for(const i of r){const s=e.any(i,we("value"),null,null)?.value;s?t.push(s):i.value.startsWith("tel:")&&t.push(i.value)}return t}function Qp(a,e){const t=e.any(a,we("hasAddress"),null,null);if(!t)return;const r=t,i=e.any(r,we("street-address"),null,null)?.value,s=e.any(r,we("locality"),null,null)?.value,n=e.any(r,we("region"),null,null)?.value,l=e.any(r,we("postal-code"),null,null)?.value,o=e.any(r,we("country-name"),null,null)?.value,c=[i,s,n,l,o].filter(Boolean);return c.length>0?c.join(", "):void 0}function Pl(a,e){const t=e.each(a,we("hasMember"),null,null),r=[];for(const i of t){const s=i;if(e.holds(s,me("type"),we("Group"))){const n=Pl(s,e);r.push(...n);continue}r.push({uri:s.value,name:Ml(s,e),emails:Wp(s,e),phones:Yp(s,e),title:e.any(s,we("title"),null,null)?.value??void 0,org:e.any(s,we("organization-name"),null,null)?.value??void 0,photo:e.any(s,we("hasPhoto"),null,null)?.value??e.any(s,Ne("img"),null,null)?.value??void 0,address:Qp(s,e),note:e.any(s,we("note"),null,null)?.value??void 0})}return r.sort((i,s)=>i.name.localeCompare(s.name)),r}function Jp(a,e){const t=[],r=e.each(a,we("hasMember"),null,null);for(const i of r){const s=i;if(e.holds(s,me("type"),we("Group"))){const n=Ml(s,e),l=e.each(s,we("hasMember"),null,null).length;t.push({name:n,count:l,uri:s.value})}}return t.sort((i,s)=>i.name.localeCompare(s.name)),t}function Zp(a,e){return e.any(a,we("fn"),null,null)?.value??e.any(a,B("name"),null,null)?.value??"Address Book"}function Kp(a,e,t){t.innerHTML="";const r=document.createElement("div");r.className="contacts-view";const i=Zp(a,e),s=document.createElement("h2");s.className="contacts-title",s.textContent=i,r.appendChild(s);const n=Pl(a,e),l=Jp(a,e),o=document.createElement("p");if(o.className="contacts-count",o.textContent=`${n.length} contact${n.length!==1?"s":""}`,r.appendChild(o),n.length>5){const h=document.createElement("input");h.className="contacts-search",h.type="search",h.placeholder="Filter contacts...",h.setAttribute("aria-label","Filter contacts"),h.addEventListener("input",()=>{const p=h.value.toLowerCase(),m=r.querySelectorAll(".contact-card");for(const w of m){const y=w,N=y.getAttribute("data-name")??"";y.style.display=N.toLowerCase().includes(p)?"":"none"}}),r.appendChild(h)}if(l.length>0){const h=document.createElement("div");h.className="contacts-groups";const p=document.createElement("h3");p.textContent="Groups",h.appendChild(p);const m=document.createElement("ul");m.className="contacts-group-list";for(const w of l){const y=document.createElement("li");y.className="contacts-group-item";const N=Jt(w.uri,`${w.name} (${w.count})`);y.appendChild(N),m.appendChild(y)}h.appendChild(m),r.appendChild(h)}if(n.length===0){const h=document.createElement("p");h.className="contacts-empty",h.textContent="No contacts found.",r.appendChild(h),t.appendChild(r);return}const c=document.createElement("ul");c.className="contacts-list";for(const h of n){const p=document.createElement("li");if(p.className="contact-card",p.setAttribute("data-name",h.name),h.photo){const y=document.createElement("img");y.className="contact-photo",y.src=h.photo,y.alt=h.name,p.appendChild(y)}else{const y=document.createElement("div");y.className="contact-photo-placeholder",y.textContent=h.name.charAt(0).toUpperCase(),p.appendChild(y)}const m=document.createElement("div");m.className="contact-info";const w=Jt(h.uri,h.name);if(w.className="contact-name",w.title=h.uri,m.appendChild(w),h.title){const y=document.createElement("span");y.className="contact-title",y.textContent=h.title,m.appendChild(y)}if(h.org){const y=document.createElement("span");y.className="contact-org",y.textContent=h.org,m.appendChild(y)}for(const y of h.emails){const N=document.createElement("a");N.className="contact-email";const D=y.replace("mailto:","");N.href=y.startsWith("mailto:")?y:`mailto:${D}`,N.textContent=D,m.appendChild(N)}for(const y of h.phones){const N=document.createElement("a");N.className="contact-phone";const D=y.replace("tel:","");N.href=y.startsWith("tel:")?y:`tel:${D}`,N.textContent=D,m.appendChild(N)}if(h.address){const y=document.createElement("span");y.className="contact-address",y.textContent=h.address,m.appendChild(y)}if(h.note){const y=document.createElement("p");y.className="contact-note",y.textContent=h.note,m.appendChild(y)}p.appendChild(m),c.appendChild(p)}r.appendChild(c),t.appendChild(r)}function em(a,e){const r=e.each(a,me("type"),null,null).map(i=>i.value);return!!(r.includes(we("AddressBook").value)||r.includes(we("Group").value)||e.match(a,we("hasMember"),null,null).length>0)}const tm={label:"Contacts",icon:"📇",canHandle(a,e){return em(a,e)},render(a,e,t){Kp(a,e,t)}};Be(tm);function En(a,e,t,r=!1){if(!t)return;const i=document.createElement("div");i.className="org-detail";const s=document.createElement("span");if(s.className="org-label",s.textContent=e,i.appendChild(s),r&&(t.startsWith("http://")||t.startsWith("https://"))){const n=document.createElement("a");n.href=t,n.textContent=fe(t),n.target="_blank",n.rel="noopener",i.appendChild(n)}else if(r&&t.startsWith("mailto:")){const n=document.createElement("a");n.href=t,n.textContent=t.replace("mailto:",""),i.appendChild(n)}else{const n=document.createElement("span");n.className="org-value",n.textContent=t,i.appendChild(n)}a.appendChild(i)}function nm(a,e,t){t.innerHTML="";const r=document.createElement("div");r.className="org-card";const i=e.any(a,B("logo"),null,null)?.value??e.any(a,Ne("logo"),null,null)?.value??e.any(a,Ne("img"),null,null)?.value;if(i){const R=document.createElement("img");R.className="org-logo",R.src=i,R.alt="Organization logo",r.appendChild(R)}const s=e.any(a,B("name"),null,null)?.value??e.any(a,Ne("name"),null,null)?.value??e.any(a,de("title"),null,null)?.value??fe(a.value),n=document.createElement("h2");n.className="org-name",n.textContent=s,r.appendChild(n);const l=e.any(a,B("description"),null,null)?.value??e.any(a,de("description"),null,null)?.value;if(l){const R=document.createElement("p");R.className="org-description",R.textContent=l,r.appendChild(R)}const o=document.createElement("div");o.className="org-details";const c=e.any(a,B("url"),null,null)?.value;En(o,"Website",c,!0);const h=e.any(a,B("email"),null,null)?.value;En(o,"Email",h,!0);const p=e.any(a,B("telephone"),null,null)?.value;En(o,"Phone",p);const m=e.any(a,B("address"),null,null);if(m){const R=e.any(m,B("streetAddress"),null,null)?.value,Q=e.any(m,B("addressLocality"),null,null)?.value,J=e.any(m,B("addressRegion"),null,null)?.value,x=e.any(m,B("addressCountry"),null,null)?.value;if(R||Q){const G=[R,Q,J,x].filter(Boolean);En(o,"Address",G.join(", "))}else En(o,"Address",m.value)}const w=e.any(a,B("foundingDate"),null,null)?.value;En(o,"Founded",w);const y=e.any(a,B("numberOfEmployees"),null,null)?.value;En(o,"Employees",y),r.appendChild(o);const N=e.each(a,B("member"),null,null),D=e.each(a,B("employee"),null,null),L=[...N,...D];if(L.length>0){const R=document.createElement("div");R.className="org-people";const Q=document.createElement("h3");Q.textContent=`People (${L.length})`,R.appendChild(Q);const J=document.createElement("ul");J.className="org-people-list";for(const x of L){const G=e.any(x,B("name"),null,null)?.value??e.any(x,Ne("name"),null,null)?.value??fe(x.value),M=document.createElement("li"),X=Jt(x.value,G);X.title=x.value,M.appendChild(X),J.appendChild(M)}R.appendChild(J),r.appendChild(R)}t.appendChild(r)}const rm=[B("Organization"),B("Corporation"),B("GovernmentOrganization"),B("NGO"),B("EducationalOrganization"),B("LocalBusiness"),Ne("Organization"),Ne("Group")];function am(a,e){const r=e.each(a,me("type"),null,null).map(i=>i.value);for(const i of rm)if(r.includes(i.value))return!0;return!1}const im={label:"Organization",icon:"🏢",canHandle(a,e){return am(a,e)},render(a,e,t){nm(a,e,t)}};Be(im);function sm(a,e){return e.any(a,we("fn"),null,null)?.value??e.any(a,Ne("name"),null,null)?.value??e.any(a,B("name"),null,null)?.value??fe(a.value)}function lm(a,e){return e.any(a,we("hasPhoto"),null,null)?.value??e.any(a,Ne("img"),null,null)?.value??e.any(a,B("image"),null,null)?.value??e.any(a,Ne("depiction"),null,null)?.value??void 0}function um(a,e){const t=e.any(a,Yt("preferredSubjectPronoun"),null,null)?.value;if(!t)return;let r=t;const i=e.any(a,Yt("preferredObjectPronoun"),null,null)?.value;if(i){r+="/"+i;const s=e.any(a,Yt("preferredRelativePronoun"),null,null)?.value;s&&(r+="/"+s)}return r}function om(a,e){const t=e.any(a,we("hasAddress"),null,null);if(!t)return;const r=t,i=e.any(r,we("locality"),null,null)?.value,s=e.any(r,we("region"),null,null)?.value,n=e.any(r,we("country-name"),null,null)?.value,l=[i,s,n].filter(Boolean);return l.length>0?l.join(", "):void 0}function cm(a,e){const t=[],r=e.each(a,Ne("account"),null,null);for(const i of r){const s=i,n=e.any(s,Ne("name"),null,null)?.value??e.any(s,rt("label"),null,null)?.value??fe(s.value),l=e.any(s,Ne("homepage"),null,null)?.value??s.value;t.push({name:n,uri:l})}return t}function dm(a,e){const t=[],r=e.each(a,we("hasTelephone"),null,null);for(const i of r){const s=e.any(i,we("value"),null,null)?.value;s?t.push(s):i.value.startsWith("tel:")&&t.push(i.value)}return t}function hm(a,e){const t=[],r=e.each(a,we("hasEmail"),null,null);for(const i of r){const s=e.any(i,we("value"),null,null)?.value;s?t.push(s):i.value.startsWith("mailto:")&&t.push(i.value)}if(t.length===0){const i=e.any(a,Ne("mbox"),null,null)?.value;i&&t.push(i)}return t}function fm(a,e){const t=e.each(null,Sa("member"),a,null),r=[],i=[];for(const s of t){const n=s,l=e.any(n,Sa("organization"),null,null),o=l?e.any(l,B("name"),null,null)?.value??e.any(l,Ne("name"),null,null)?.value??fe(l.value):"",c=e.any(n,Sa("role"),null,null),h=e.any(n,we("role"),null,null)?.value,p=c?e.any(c,B("name"),null,null)?.value:void 0,m=h&&p?`${p} - ${h}`:h||p||"",w=e.any(n,B("startDate"),null,null)?.value,y=e.any(n,B("endDate"),null,null)?.value,N=w?`${w.slice(0,10)} – ${y?y.slice(0,10):"present"}`:"",D={orgName:o,roleText:m,dates:N};e.holds(n,me("type"),Yt("PastRole"))?i.push(D):r.push(D)}return{current:r,past:i}}function On(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function an(a,e,t,r=!1){if(!t)return;const i=document.createElement("div");i.className="profile-detail";const s=document.createElement("span");if(s.className="profile-label",s.textContent=e,i.appendChild(s),r&&(t.startsWith("http://")||t.startsWith("https://"))){const n=document.createElement("a");n.href=t,n.textContent=fe(t),n.target="_blank",n.rel="noopener",i.appendChild(n)}else if(r&&t.startsWith("mailto:")){const n=document.createElement("a");n.href=t,n.textContent=t.replace("mailto:",""),i.appendChild(n)}else if(r&&t.startsWith("tel:")){const n=document.createElement("a");n.href=t,n.textContent=t.replace("tel:",""),i.appendChild(n)}else{const n=document.createElement("span");n.className="profile-value",n.textContent=t,i.appendChild(n)}a.appendChild(i)}const Us=[{label:"Name",predicate:we("fn")},{label:"Nickname",predicate:Ne("nick")},{label:"Photo URL",predicate:we("hasPhoto"),inputType:"url"},{label:"Role",predicate:we("role")},{label:"Organization",predicate:we("organization-name")},{label:"Bio",predicate:we("note")}];function Yr(a,e,t){t.innerHTML="";const r=e.updater,i=e.fetcher,s=!!(r&&i),n=document.createElement("div");if(n.className="profile-card",s){const $=document.createElement("div");$.className="profile-edit-row";const q=document.createElement("button");q.className="profile-edit-btn",q.textContent="Edit",q.addEventListener("click",()=>{pm(a,e,t,r)}),$.appendChild(q),n.appendChild($)}const l=lm(a,e);if(l){const $=document.createElement("img");$.className="profile-photo",$.src=l,$.alt="Profile photo",n.appendChild($)}const o=sm(a,e),c=document.createElement("h2");c.className="profile-name",c.textContent=o,n.appendChild(c);const h=um(a,e);if(h){const $=document.createElement("p");$.className="profile-pronouns",$.textContent=h,n.appendChild($)}const p=e.any(a,Ne("nick"),null,null)?.value;if(p){const $=document.createElement("p");$.className="profile-nick",$.textContent=`@${p}`,n.appendChild($)}const m=om(a,e);if(m){const $=document.createElement("p");$.className="profile-location",$.textContent=m,n.appendChild($)}const w=document.createElement("p");w.className="profile-webid";const y=document.createElement("a");y.href=a.value,y.textContent=a.value,y.target="_blank",y.rel="noopener",w.appendChild(y),n.appendChild(w);const N=document.createElement("div");N.className="profile-details";const D=e.any(a,we("role"),null,null)?.value,L=e.any(a,we("organization-name"),null,null)?.value;D&&L?an(N,"Role",`${D}, ${L}`):(an(N,"Role",D),an(N,"Organization",L)),an(N,"Birthday",e.any(a,we("bday"),null,null)?.value);const R=e.any(a,we("note"),null,null)?.value??e.any(a,Ne("bio"),null,null)?.value;an(N,"About",R?.trim());const Q=hm(a,e);for(const $ of Q)an(N,"Email",$,!0);const J=dm(a,e);for(const $ of J)an(N,"Phone",$,!0);const x=e.any(a,Ne("homepage"),null,null)?.value;an(N,"Homepage",x,!0);const G=e.any(a,Gn("storage"),null,null)?.value;an(N,"Pod",G,!0),n.appendChild(N);const{current:M,past:X}=fm(a,e);if(M.length>0||X.length>0){const $=document.createElement("div");$.className="profile-roles";const q=document.createElement("h3");if(q.textContent="Experience",$.appendChild(q),M.length>0){const ee=document.createElement("h4");ee.className="profile-roles-subheader",ee.textContent="Current",$.appendChild(ee);for(const Z of M){const _=document.createElement("div");_.className="profile-role-item";let V=`<strong class="profile-role-org">${On(Z.orgName)}</strong>`;Z.roleText&&(V+=` <span class="profile-role-title">${On(Z.roleText)}</span>`),Z.dates&&(V+=` <span class="profile-role-dates">${On(Z.dates)}</span>`),_.innerHTML=V,$.appendChild(_)}}if(X.length>0){const ee=document.createElement("h4");ee.className="profile-roles-subheader",ee.textContent="Past",$.appendChild(ee);for(const Z of X){const _=document.createElement("div");_.className="profile-role-item";let V=`<strong class="profile-role-org">${On(Z.orgName)}</strong>`;Z.roleText&&(V+=` <span class="profile-role-title">${On(Z.roleText)}</span>`),Z.dates&&(V+=` <span class="profile-role-dates">${On(Z.dates)}</span>`),_.innerHTML=V,$.appendChild(_)}}n.appendChild($)}const k=cm(a,e);if(k.length>0){const $=document.createElement("div");$.className="profile-social";const q=document.createElement("h3");q.textContent="Social Accounts",$.appendChild(q);const ee=document.createElement("ul");ee.className="profile-social-list";for(const Z of k){const _=document.createElement("li"),V=document.createElement("a");V.href=Z.uri,V.textContent=Z.name,V.target="_blank",V.rel="noopener noreferrer",_.appendChild(V),ee.appendChild(_)}$.appendChild(ee),n.appendChild($)}const H=e.each(a,Ne("knows"),null,null);if(H.length>0){const $=document.createElement("div");$.className="profile-friends";const q=document.createElement("h3");q.textContent=`Contacts (${H.length})`,$.appendChild(q);const ee=document.createElement("ul");ee.className="profile-friends-list";for(const Z of H){const _=document.createElement("li"),V=Jt(Z.value,fe(Z.value));V.title=Z.value,_.appendChild(V),ee.appendChild(_)}$.appendChild(ee),n.appendChild($)}t.appendChild(n)}function pm(a,e,t,r){t.innerHTML="";const i=document.createElement("div");i.className="profile-edit-form";const s=document.createElement("h2");s.textContent="Edit Profile",i.appendChild(s);const n=new Map;for(const p of Us){const m=e.any(a,p.predicate,null,null)?.value??"",w=document.createElement("div");w.className="profile-field-group";const y=document.createElement("label");y.textContent=p.label,w.appendChild(y);let N;p.label==="Bio"?(N=document.createElement("textarea"),N.rows=3):(N=document.createElement("input"),N.type=p.inputType??"text"),N.className="profile-field-input",N.value=m,w.appendChild(N),n.set(p,N),i.appendChild(w)}const l=document.createElement("div");l.className="profile-edit-actions";const o=document.createElement("button");o.className="profile-save-btn",o.textContent="Save";const c=document.createElement("button");c.className="profile-cancel-btn",c.textContent="Cancel",l.appendChild(o),l.appendChild(c),i.appendChild(l);const h=document.createElement("p");h.className="profile-edit-status",i.appendChild(h),t.appendChild(i),c.addEventListener("click",()=>{Yr(a,e,t)}),o.addEventListener("click",async()=>{o.disabled=!0,c.disabled=!0,h.textContent="Saving...",h.className="profile-edit-status";try{const p=[],m=[],w=a.doc();for(const y of Us){const D=n.get(y).value.trim(),L=e.any(a,y.predicate,null,null);if(L&&D&&L.value!==D){const R=e.match(a,y.predicate,L,w);R.length>0&&p.push(R[0]),m.push(new Ut(a,y.predicate,vs(D),w))}else if(L&&!D){const R=e.match(a,y.predicate,L,w);R.length>0&&p.push(R[0])}else!L&&D&&m.push(new Ut(a,y.predicate,vs(D),w))}if(p.length===0&&m.length===0){Yr(a,e,t);return}await new Promise((y,N)=>{r.update(p,m,(D,L,R)=>{L?y():N(new Error(R??"Update failed"))})}),h.textContent="Saved!",h.className="profile-edit-status profile-edit-status-ok",setTimeout(()=>Yr(a,e,t),800)}catch(p){const m=p instanceof Error?p.message:String(p);h.textContent=`Save failed: ${m}`,h.className="profile-edit-status profile-edit-status-error",o.disabled=!1,c.disabled=!1}})}function mm(a,e){const r=e.each(a,me("type"),null,null).map(i=>i.value);return!!(r.includes(Ne("Person").value)||r.includes(B("Person").value)||r.includes(we("Individual").value)||e.any(a,Ne("name"),null,null)||e.any(a,we("fn"),null,null))}const gm={label:"Profile",icon:"👤",canHandle(a,e){return mm(a,e)},render(a,e,t){Yr(a,e,t)}};Be(gm);const At=new cd;let Dn=El();function $l(){const a=At.isActive?At.authFetch.bind(At):void 0;Dn=El(a?{fetch:a}:void 0)}function vm(a,e,t,r){const{store:i}=Dn;r.innerHTML="",a.length<=1?r.hidden=!0:r.hidden=!1;for(let s=0;s<a.length;s++){const n=a[s],l=document.createElement("button");l.className="pane-tab",l.role="tab",l.textContent=`${n.icon} ${n.label}`,l.setAttribute("aria-selected",s===0?"true":"false"),l.addEventListener("click",()=>{for(const o of r.children)o.setAttribute("aria-selected","false");l.setAttribute("aria-selected","true"),t.innerHTML="",n.render(e,i,t)}),r.appendChild(l)}t.innerHTML="",a[0].render(e,i,t)}let Qr=null,Hn=null,Jr=null;function ql(a,e,t){Hl();let r;try{r=new URL(a).origin}catch{return}const i=r.replace(/^http/,"ws");Hn=a;try{const s=new WebSocket(i);Qr=s,s.addEventListener("open",()=>{s.send(`sub ${a}`)}),s.addEventListener("message",n=>{const l=String(n.data);l.startsWith("pub")&&l.includes(a)&&ym(a,e,t)}),s.addEventListener("close",()=>{Hn===a&&(Jr=setTimeout(()=>{Hn===a&&ql(a,e,t)},5e3))}),s.addEventListener("error",()=>{s.close()})}catch{}}function Hl(){Jr&&(clearTimeout(Jr),Jr=null),Qr&&(Hn=null,Qr.close(),Qr=null)}async function ym(a,e,t){const i=t.querySelector('.pane-tab[aria-selected="true"]')?.textContent??"";try{await Dn.fetcher.load(Vn(a),{force:!0});const s=Vn(Hn?.includes("#")?Hn:a),n=Cl(s,Dn.store);if(n.length===0)return;const l=n.findIndex(c=>`${c.icon} ${c.label}`===i),o=l>=0?n[l]:n[0];e.innerHTML="",o.render(s,Dn.store,e)}catch{}}async function ri(a,e,t){e.innerHTML='<p class="loading">Loading...</p>',t.innerHTML="",t.hidden=!0,Hl();try{await Dn.fetchDocument(a);const r=Vn(a),i=Cl(r,Dn.store);if(i.length===0){e.innerHTML=`
        <div class="error">
          <p><strong>No pane available</strong> for this resource.</p>
          <p>URI: <code>${Ms(a)}</code></p>
          <p>The resource was fetched successfully, but no registered pane
          knows how to display it.</p>
        </div>
      `;return}vm(i,r,e,t);const s=a.replace(/#.*$/,"");ql(s,e,t)}catch(r){const i=r instanceof Error?r.message:String(r);e.innerHTML=`
      <div class="error">
        <p><strong>Failed to load resource</strong></p>
        <p>${Ms(i)}</p>
      </div>
    `}}async function wm(){try{await At.handleRedirectFromLogin()}catch{}try{await At.restore()}catch{}At.isActive&&$l()}function Em(){$l()}function Ms(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}const Cm=document.getElementById("url-form"),In=document.getElementById("url-input"),na=document.getElementById("pane-container"),ai=document.getElementById("pane-tabs"),za=document.getElementById("login-btn"),Wa=document.getElementById("logout-btn"),sr=document.getElementById("user-info");async function ra(a,e){if(In.value=a,e){const t=new URL(window.location.href);t.searchParams.set("uri",a),window.history.pushState({uri:a},"",t.toString())}await ri(a,na,ai)}function jl(){At.isActive?(za.hidden=!0,Wa.hidden=!1,sr.hidden=!1,sr.textContent=At.webId?fe(At.webId):"Logged in",sr.title=At.webId??""):(za.hidden=!1,Wa.hidden=!0,sr.hidden=!0,sr.textContent="")}At.addEventListener("sessionStateChange",()=>{Em(),jl();const a=In.value.trim();a&&ri(a,na,ai)});za.addEventListener("click",()=>{const a=prompt("Solid identity provider:","https://solidcommunity.net");if(a){const e=In.value.trim();e&&sessionStorage.setItem("mashlib_pre_login_uri",e);const t=window.location.origin+window.location.pathname;At.login(a,t)}});Wa.addEventListener("click",()=>{At.logout()});Cm.addEventListener("submit",a=>{a.preventDefault();const e=In.value.trim();e&&ra(e,!0)});window.addEventListener(Tl,(a=>{const e=a.detail.uri;e&&ra(e,!0)}));window.addEventListener("popstate",()=>{const e=new URLSearchParams(window.location.search).get("uri");e?ra(e,!1):(In.value="",na.innerHTML='<p class="placeholder">Enter a URL above to browse a Linked Data resource.</p>')});document.querySelectorAll(".quick-link").forEach(a=>{a.addEventListener("click",e=>{e.preventDefault();const t=a.href,i=new URL(t).searchParams.get("uri");i&&ra(i,!0)})});async function Nm(){let e=new URLSearchParams(window.location.search).get("uri")||"";const t=sessionStorage.getItem("mashlib_pre_login_uri");if(t&&!e&&(e=t,sessionStorage.removeItem("mashlib_pre_login_uri")),e||(e=In.value.trim()),e&&(In.value=e),await wm(),jl(),e){const r=new URL(window.location.href);r.searchParams.set("uri",e),window.history.replaceState({uri:e},"",r.toString()),ri(e,na,ai)}}Nm();export{kr as c,Xs as g};
