import{generateKeyPair as gc,decodeJwt as vc,createRemoteJWKSet as yc,jwtVerify as wc,calculateJwkThumbprint as Ec,exportJWK as Cl,SignJWT as Cc}from"https://esm.sh/jose@5";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function t(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=t(a);fetch(a.href,s)}})();function br(i){"@babel/helpers - typeof";return br=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},br(i)}function bc(i,e){if(br(i)!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(br(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function xc(i){var e=bc(i,"string");return br(e)=="symbol"?e:e+""}function re(i,e,t){return(e=xc(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}const Zt={Literal:1,Collection:3,Graph:4,NamedNode:5,BlankNode:6,Variable:7};let Ye=class{constructor(e){re(this,"termType",void 0),re(this,"classOrder",void 0),re(this,"value",void 0),this.value=e}substitute(e){return this}compareTerm(e){return this.classOrder<e.classOrder?-1:this.classOrder>e.classOrder?1:this.value<e.value?-1:this.value>e.value?1:0}equals(e){return e?this.termType===e.termType&&this.value===e.value:!1}hashString(){return this.toCanonical()}sameTerm(e){return this.equals(e)}toCanonical(){return this.toNT()}toNT(){return this.toString()}toNQ(){return this.toNT()}toString(){throw new Error("Node.toString() is abstract - see the subclasses instead")}};re(Ye,"fromValue",void 0);re(Ye,"toJS",void 0);const $n="NamedNode",Mn="BlankNode",er="Literal",gn="Variable",Ln="DefaultGraph",vn="Collection",bl="Empty",Dr="Graph",Cs="text/html",Ji="application/ld+json",xl="text/n3",Nc="application/n3",Ki="application/nquads",ea="application/n-quads",Tc="application/n-triples",xr="application/rdf+xml",Ac="application/sparql-update",Dc="application/sparql-update-single-match",In="text/turtle",_c="application/x-turtle",ta="application/xhtml+xml";let Jt=class jn extends Ye{static getId(e){if(e){if(typeof e!="string")throw new Error("Bad id argument to new blank node: "+e);if(e.includes("#")){let t=e.split("#");return t[t.length-1]}return e}return"n"+jn.nextId++}constructor(e){super(jn.getId(e)),re(this,"termType",Mn),re(this,"classOrder",Zt.BlankNode),re(this,"isBlank",1),re(this,"isVar",1)}get id(){return this.value}set id(e){this.value=e}compareTerm(e){return this.classOrder<e.classOrder?-1:this.classOrder>e.classOrder?1:this.id<e.id?-1:this.id>e.id?1:0}copy(e){var t=new jn;return e.copyTo(this,t),t}toCanonical(){return jn.NTAnonymousNodePrefix+this.value}toString(){return jn.NTAnonymousNodePrefix+this.id}};re(Jt,"nextId",0);re(Jt,"NTAnonymousNodePrefix","_:");function Dn(i){return typeof i=="string"?i:i.value}function kc(i){return typeof i=="object"&&i!==null&&"subject"in i}function di(i){return typeof i=="object"&&i!==null&&"statements"in i}function va(i){return en(i)&&i.termType===vn}function Sc(i){return i&&Object.prototype.hasOwnProperty.call(i,"termType")&&(i.termType===$n||i.termType===gn||i.termType===Mn||i.termType===vn||i.termType===er||i.termType===Dr)}function Ic(i){return i&&Object.prototype.hasOwnProperty.call(i,"termType")&&(i.termType===$n||i.termType===gn||i.termType===Mn||i.termType===vn||i.termType===er||i.termType===Dr)}function Bc(i){return en(i)&&(i.termType===$n||i.termType===Mn||i.termType===gn)}function Fc(i){return en(i)&&i.termType===gn}function en(i){return typeof i=="object"&&i!==null&&"termType"in i}function Nl(i){return i.termType===er}function Vn(i){return typeof i=="object"&&i!==null&&"subject"in i&&"predicate"in i&&"object"in i}function bs(i){return en(i)&&i.termType==="NamedNode"}function Lc(i){return en(i)&&"termType"in i&&i.termType==="BlankNode"}function Rc(i){return en(i)&&(i.termType===$n||i.termType===gn||i.termType===Mn||i.termType===Ln)}let mt=class Gn extends Ye{constructor(e){if(super(Dn(e)),re(this,"termType",$n),re(this,"classOrder",Zt.NamedNode),!this.value)throw new Error("Missing IRI for NamedNode");if(!this.value.includes(":"))throw new Error('NamedNode IRI "'+e+'" must be absolute.');if(this.value.includes(" ")){var t='Error: NamedNode IRI "'+e+'" must not contain unencoded spaces.';throw new Error(t)}}dir(){var e=this.value.split("#")[0],t=e.slice(0,-1).lastIndexOf("/"),n=e.indexOf("//");return n>=0&&t<n+2||t<0?null:new Gn(e.slice(0,t+1))}site(){var e=this.value.split("#")[0],t=e.indexOf("//");if(t<0)throw new Error("This URI does not have a web site part (origin)");var n=e.indexOf("/",t+2);return n<0?new Gn(e.slice(0)+"/"):new Gn(e.slice(0,n+1))}doc(){return this.value.indexOf("#")<0?this:new Gn(this.value.split("#")[0])}toString(){return"<"+this.value+">"}id(){return this.value.split("#")[1]}get uri(){return this.value}set uri(e){this.value=e}static fromValue(e){return typeof e>"u"||e===null||en(e)?e:new Gn(e)}};const ln={boolean:new mt("http://www.w3.org/2001/XMLSchema#boolean"),dateTime:new mt("http://www.w3.org/2001/XMLSchema#dateTime"),decimal:new mt("http://www.w3.org/2001/XMLSchema#decimal"),double:new mt("http://www.w3.org/2001/XMLSchema#double"),integer:new mt("http://www.w3.org/2001/XMLSchema#integer"),langString:new mt("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),string:new mt("http://www.w3.org/2001/XMLSchema#string")};let Yt=class Wt extends Ye{constructor(e,t,n){super(e),re(this,"termType",er),re(this,"classOrder",Zt.Literal),re(this,"datatype",ln.string),re(this,"isVar",0),re(this,"language",""),t?(this.language=t,this.datatype=ln.langString):n?this.datatype=mt.fromValue(n):this.datatype=ln.string}copy(){return new Wt(this.value,this.lang,this.datatype)}equals(e){return e?this.termType===e.termType&&this.value===e.value&&this.language===e.language&&(!this.datatype&&!e.datatype||this.datatype&&this.datatype.equals(e.datatype)):!1}get lang(){return this.language}set lang(e){this.language=e||""}toNT(){return Wt.toNT(this)}static toNT(e){if(typeof e.value=="number")return""+e.value;if(typeof e.value!="string")throw new Error("Value of RDF literal is not string or number: "+e.value);var t=e.value;return t=t.replace(/\\/g,"\\\\"),t=t.replace(/\"/g,'\\"'),t=t.replace(/\n/g,"\\n"),t=t.replace(/\r/g,"\\r"),t='"'+t+'"',e.language?t+="@"+e.language:e.datatype.equals(ln.string)||(t+="^^"+e.datatype.toCanonical()),t}toString(){return""+this.value}static fromBoolean(e){let t=e?"1":"0";return new Wt(t,null,ln.boolean)}static fromDate(e){if(!(e instanceof Date))throw new TypeError("Invalid argument to Literal.fromDate()");let t=function(a){return(""+(100+a)).slice(1,3)},n=""+e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"Z";return new Wt(n,null,ln.dateTime)}static fromNumber(e){if(typeof e!="number")throw new TypeError("Invalid argument to Literal.fromNumber()");let t;const n=e.toString();return n.indexOf("e")<0&&Math.abs(e)<=Number.MAX_SAFE_INTEGER?t=Number.isInteger(e)?ln.integer:ln.decimal:t=ln.double,new Wt(n,null,t)}static fromValue(e){if(Nl(e))return e;switch(typeof e){case"object":if(e instanceof Date)return Wt.fromDate(e);case"boolean":return Wt.fromBoolean(e);case"number":return Wt.fromNumber(e);case"string":return new Wt(e)}throw new Error("Can't make literal from "+e+" of type "+typeof e)}};function Tl(i){return typeof i>"u"||i===null||en(i)?i:Array.isArray(i)?new qt(i):Yt.fromValue(i)}class qt extends Ye{constructor(e){super((Jt.nextId++).toString()),re(this,"termType",vn),re(this,"classOrder",Zt.Collection),re(this,"closed",!1),re(this,"compareTerm",Jt.prototype.compareTerm),re(this,"elements",[]),re(this,"isVar",0),e&&e.length>0&&e.forEach(t=>{this.elements.push(Tl(t))})}get id(){return this.value}set id(e){this.value=e}append(e){return this.elements.push(e)}close(){return this.closed=!0,this.closed}shift(){return this.elements.shift()}substitute(e){const t=this.elements.map(n=>n.substitute(e));return new qt(t)}toNT(){return qt.toNT(this)}static toNT(e){return Jt.NTAnonymousNodePrefix+e.id}toString(){return"("+this.elements.join(" ")+")"}unshift(e){return this.elements.unshift(e)}}re(qt,"termType",vn);const Nr="chrome:theSession";new mt(Nr);let ya=class extends Ye{constructor(){super(""),re(this,"value",""),re(this,"termType",Ln),re(this,"uri",Nr)}toCanonical(){return this.value}toString(){return"DefaultGraph"}};function xs(i){return!!i&&i.termType===Ln}const Oc=new ya;class Pt{constructor(e,t,n,a){re(this,"subject",void 0),re(this,"predicate",void 0),re(this,"object",void 0),re(this,"graph",void 0),this.subject=Ye.fromValue(e),this.predicate=Ye.fromValue(t),this.object=Ye.fromValue(n),this.graph=a==null?Oc:Ye.fromValue(a)}get why(){return this.graph}set why(e){this.graph=e}equals(e){return e.subject.equals(this.subject)&&e.predicate.equals(this.predicate)&&e.object.equals(this.object)&&e.graph.equals(this.graph)}substitute(e){return new Pt(this.subject.substitute(e),this.predicate.substitute(e),this.object.substitute(e),xs(this.graph)?this.graph:this.graph.substitute(e))}toCanonical(){let e=[this.subject.toCanonical(),this.predicate.toCanonical(),this.object.toCanonical()];return this.graph&&this.graph.termType!==Ln&&e.push(this.graph.toCanonical()),e.join(" ")+" ."}toNT(){return[this.subject.toNT(),this.predicate.toNT(),this.object.toNT()].join(" ")+" ."}toNQ(){return[this.subject.toNT(),this.predicate.toNT(),this.object.toNT(),xs(this.graph)?"":this.graph.toNT()].join(" ")+" ."}toString(){return this.toNT()}}var Al=Al||console.log;function kn(i){var e;return e=i.indexOf("#"),e<0?i:i.slice(0,e)}function $c(i){var e=/[^\/]*\/\/([^\/]*)\//.exec(i);return e?e[1]:""}function Dt(i,e){var t,n,a,s,r,l,o=e.indexOf("#");if(o>0&&(e=e.slice(0,o)),i.length===0)return e;if(i.indexOf("#")===0)return e+i;if(s=i.indexOf(":"),s>=0||(t=e.indexOf(":"),e.length===0))return i;if(t<0)return Al("Invalid base: "+e+" in join with given: "+i),i;if(n=e.slice(0,+t+1||9e9),i.indexOf("//")===0)return n+i;if(e.indexOf("//",t)===t+1){if(a=e.indexOf("/",t+3),a<0)return e.length-t-3>0?e+"/"+i:n+i}else if(a=e.indexOf("/",t+1),a<0)return e.length-t-1>0?e+"/"+i:n+i;if(i.indexOf("/")===0)return e.slice(0,a)+i;if(l=e.slice(a),r=l.lastIndexOf("/"),r<0)return n+i;for(r>=0&&r<l.length-1&&(l=l.slice(0,+r+1||9e9)),l+=i;l.match(/[^\/]*\/\.\.\//);)l=l.replace(/[^\/]*\/\.\.\//,"");return l=l.replace(/\.\//g,""),l=l.replace(/\/\.$/,"/"),e.slice(0,a)+l}function Ns(i){const e=i.indexOf(":");return e<0?null:i.slice(0,e)}function Ri(i,e){var t,n,a,s,r,l,o,u,d,f,m,w,y,C=new RegExp("^[-_a-zA-Z0-9.]+:(//[^/]*)?/[^/]*$");if(!i)return e;if(i===e)return"";for(n=u=0,r=e.length;u<r&&e[n]===i[n];n=++u);if(i.slice(0,n).match(C)&&(a=e.indexOf("//"),a<0&&(a=-2),s=e.indexOf("/",a+2),e[s+1]!=="/"&&i[s+1]!=="/"&&e.slice(0,s)===i.slice(0,s)))return e.slice(s);if(e[n]==="#"&&i.length===n)return e.slice(n);for(;n>0&&e[n-1]!=="/";)n--;if(n<3||i.indexOf("//",n-2)>0||e.indexOf("//",n-2)>0||i.indexOf(":",n)>0)return e;for(o=0,m=i.slice(n),d=0,l=m.length;d<l;d++)t=m[d],t==="/"&&o++;if(o===0&&n<e.length&&e[n]==="#")return"./"+e.slice(n);if(o===0&&n===e.length)return"./";if(y="",o>0)for(f=1,w=o;w>=1?f<=w:f>=w;w>=1?++f:--f)y+="../";return y+e.slice(n)}let Rn=class Dl extends Ye{constructor(e=""){super(e),re(this,"termType",gn),re(this,"base","varid:"),re(this,"classOrder",Zt.Variable),re(this,"isVar",1),re(this,"uri",void 0),this.base="varid:",this.uri=Dt(e,this.base)}equals(e){return e?this.termType===e.termType&&this.value===e.value:!1}hashString(){return this.toString()}substitute(e){var t;return(t=e[this.toNT()])!=null?t:this}toString(){return Dl.toString(this)}static toString(e){return e.uri.slice(0,e.base.length)===e.base?`?${e.uri.slice(e.base.length)}`:`?${e.uri}`}},At=(function(i){return i.collections="COLLECTIONS",i.defaultGraphType="DEFAULT_GRAPH_TYPE",i.equalsMethod="EQUALS_METHOD",i.id="ID",i.identity="IDENTITY",i.reversibleId="REVERSIBLE_ID",i.variableType="VARIABLE_TYPE",i})({});const Ts=new ya,Mt={supports:{[At.collections]:!1,[At.defaultGraphType]:!1,[At.equalsMethod]:!0,[At.identity]:!1,[At.id]:!0,[At.reversibleId]:!1,[At.variableType]:!0},blankNode(i){return new Jt(i)},defaultGraph:()=>Ts,equals(i,e){return i===e||!i||!e?!0:Vn(i)||Vn(e)?Vn(i)&&Vn(e)?this.equals(i.subject,e.subject)&&this.equals(i.predicate,e.predicate)&&this.equals(i.object,e.object)&&this.equals(i.graph,e.graph):!1:en(i)&&en(e)?this.id(i)===this.id(e):!1},id(i){if(!i)return"undefined";if(Vn(i))return this.quadToNQ(i);switch(i.termType){case Ln:return"defaultGraph";case gn:return Rn.toString(i);default:const e=this.termToNQ(i);if(e)return e;throw new Error(`Can't id term with type '${i.termType}'`)}},isQuad(i){return i instanceof Pt},literal(i,e){if(typeof i!="string"&&!e)return Yt.fromValue(i);const t=typeof i=="string"?i:""+i;return typeof e=="string"?e.indexOf(":")===-1?new Yt(t,e):new Yt(t,null,this.namedNode(e)):new Yt(t,null,e)},namedNode(i){return new mt(i)},quad(i,e,t,n){return new Pt(i,e,t,n||Ts)},triple(i,e,t,n){return this.quad(i,e,t,n)},quadToNQ(i){return`${this.termToNQ(i.subject)} ${this.termToNQ(i.predicate)} ${this.termToNQ(i.object)} ${this.termToNQ(i.graph)} .`},termToNQ(i){switch(i.termType){case Mn:return"_:"+i.value;case Ln:return"";case bl:return"<http://www.w3.org/1999/02/22-rdf-syntax-ns#nil>";case er:return Yt.toNT(i);case Dr:case $n:return"<"+i.value+">";case vn:return"("+i.elements.map(e=>this.termToNQ(e)).join(" ")+")";default:throw new Error(`Can't serialize nonstandard term type (was '${i.termType}')`)}},toNQ(i){return this.isQuad(i)?this.quadToNQ(i):this.termToNQ(i)},variable(i){return new Rn(i)}},Xt={debug(i){},warn(i){},info(i){},error(i){},success(i){},msg(i){}};function xe(i,e){const t=e||{namedNode:n=>new mt(n)};return function(n){return t.namedNode(i+(n||""))}}var Gr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _l(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var ai={exports:{}},Mc=ai.exports,As;function Uc(){return As||(As=1,(function(i){(function(e,t){i.exports?i.exports=t():e.ttl2jsonld=t()})(Mc,function(){function e(a,s){function r(){this.constructor=a}r.prototype=s.prototype,a.prototype=new r}function t(a,s,r,l){this.message=a,this.expected=s,this.found=r,this.location=l,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,t)}e(t,Error),t.buildMessage=function(a,s){var r={literal:function(w){return'"'+o(w.text)+'"'},class:function(w){var y="",C;for(C=0;C<w.parts.length;C++)y+=w.parts[C]instanceof Array?u(w.parts[C][0])+"-"+u(w.parts[C][1]):u(w.parts[C]);return"["+(w.inverted?"^":"")+y+"]"},any:function(w){return"any character"},end:function(w){return"end of input"},other:function(w){return w.description}};function l(w){return w.charCodeAt(0).toString(16).toUpperCase()}function o(w){return w.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(y){return"\\x0"+l(y)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(y){return"\\x"+l(y)})}function u(w){return w.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(y){return"\\x0"+l(y)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(y){return"\\x"+l(y)})}function d(w){return r[w.type](w)}function f(w){var y=new Array(w.length),C,T;for(C=0;C<w.length;C++)y[C]=d(w[C]);if(y.sort(),y.length>0){for(C=1,T=1;C<y.length;C++)y[C-1]!==y[C]&&(y[T]=y[C],T++);y.length=T}switch(y.length){case 1:return y[0];case 2:return y[0]+" or "+y[1];default:return y.slice(0,-1).join(", ")+", or "+y[y.length-1]}}function m(w){return w?'"'+o(w)+'"':"end of input"}return"Expected "+f(a)+" but "+m(s)+" found."};function n(a,s){s=s!==void 0?s:{};var r={},l={turtleDoc:cs},o=cs,u=function(c){var v=$e.toJSON();return v["@graph"]=[],c.filter(E=>Array.isArray(E)).forEach(E=>{E.forEach(D=>{v["@graph"].push(D)})}),v["@graph"].length===1&&(Object.assign(v,v["@graph"][0]),delete v["@graph"]),v},d="\uFEFF",f=Te("\uFEFF",!1),m=".",w=Te(".",!1),y=function(c){return c},C="#",T=Te("#",!1),L=/^[^\n]/,R=Ve([`
`],!0,!1),Z=`
`,Y=Te(`
`,!1),N=function(c){return c.join("")},j="@prefix",$=Te("@prefix",!1),G=function(c,v){return $e.addPrefix(c===""?"0":c,v),{}},F="@base",H=Te("@base",!1),P=function(c){return $e.addBase(c),{}},q=/^[Bb]/,ee=Ve(["B","b"],!1,!1),J=/^[Aa]/,_=Ve(["A","a"],!1,!1),V=/^[Ss]/,K=Ve(["S","s"],!1,!1),ie=/^[Ee]/,ae=Ve(["E","e"],!1,!1),oe=/^[Pp]/,ne=Ve(["P","p"],!1,!1),ge=/^[Rr]/,Fe=Ve(["R","r"],!1,!1),pe=/^[Ff]/,Ce=Ve(["F","f"],!1,!1),Pe=/^[Ii]/,Ke=Ve(["I","i"],!1,!1),Ae=/^[Xx]/,ze=Ve(["X","x"],!1,!1),ft=function(c,v){var E={};return typeof c=="string"&&c!=="[]"?E["@id"]=c:typeof c=="object"&&Object.assign(E,c),v&&Object.assign(E,v),[E]},st=function(c,v){var E={};return c&&Object.assign(E,c),v&&Object.assign(E,v),[E]},De=";",Le=Te(";",!1),_e=function(c,v,E,D){var k={};return k[E]=D,k},bt=function(c,v,E){return E},Ge=function(c,v,E){var D={};return E.unshift(mc(c,v)),E.forEach(k=>{k&&Object.keys(k).forEach(M=>{k[M].forEach(U=>{M==="@type"&&U["@id"]!==void 0&&(U=U["@id"]),D[M]===void 0?D[M]=U:Array.isArray(D[M])?D[M].push(U):D[M]=[D[M],U]})})}),D},se=",",Se=Te(",",!1),ot=function(c,v){return v},_t=function(c,v){return v.unshift(c),v},Oe="a",Re=Te("a",!1),St=function(){return"@type"},nn=function(c){return Li(c,!0)},xt=function(c){return Li(c,!1)},wn=function(c){return c==="[]"?{}:{"@id":c}},x=function(c){return{"@id":c}},p="[",g=Te("[",!1),S="]",z=Te("]",!1),W="(",te=Te("(",!1),Ne=")",Xe=Te(")",!1),qe=function(c){return{"@list":c}},je=function(c,v){return{"@value":c,"@language":v}},Ie="^^",Sr=Te("^^",!1),tr=function(c,v){if(v==="http://www.w3.org/2001/XMLSchema#boolean"&&c==="true")return!0;if(v==="http://www.w3.org/2001/XMLSchema#boolean"&&c==="false")return!1;if(v==="http://www.w3.org/2001/XMLSchema#integer")return parseInt(c);if(v==="http://www.w3.org/2001/XMLSchema#double")return parseFloat(c);const E=$e.resolve(v,!0);if(E){const D=v.split(":")[0];if(E==="http://www.w3.org/2001/XMLSchema#boolean"&&c==="true")return $e.decrement(D),!0;if(E==="http://www.w3.org/2001/XMLSchema#boolean"&&c==="false")return $e.decrement(D),!1;if(E==="http://www.w3.org/2001/XMLSchema#integer")return $e.decrement(D),parseInt(c);if(E==="http://www.w3.org/2001/XMLSchema#double")return $e.decrement(D),parseFloat(c)}return{"@value":c,"@type":v}},nr="true",b=Te("true",!1),A=function(){return!0},O="false",Q=Te("false",!1),le=function(){return!1},Ee=function(c){return c+":"},We="<",gt=Te("<",!1),Nt=/^[^\0- <>"{}|\^`\\]/,Rt=Ve([["\0"," "],"<",">",'"',"{","}","|","^","`","\\"],!0,!1),Ot=">",rn=Te(">",!1),an=function(c){const v=c.map(D=>65536<=D.codePointAt(0)&&D.codePointAt(0)<=983039?"a":D.length===1?D:D.length===6?String.fromCharCode("0x"+D.substring(2)):D.length===10?String.fromCodePoint("0x"+D.substring(2)):D).join("");if(v.match(/^[^\u0000-\u0020<>"{}|^`\\]*$/)){var E=c.join("");try{return $e.resolve(E)}catch{Ai("Invalid IRIREF "+E)}}else Ai("Invalid IRIREF "+c.join("")+" / "+v)},pt=":",rt=Te(":",!1),sn=function(c){return c=c||"0",$e.hasPrefix(c)===!1&&Ai("undefined prefix "+c),c},En=function(c){return c||""},ut=function(c,v){return $e.increment(c),$e.resolve(c+":"+v)},rr="_:",pn=Te("_:",!1),et=/^[0-9]/,lt=Ve([["0","9"]],!1,!1),Oo="@",$o=Te("@",!1),Oa=/^[a-zA-Z]/,$a=Ve([["a","z"],["A","Z"]],!1,!1),xi="-",Ni=Te("-",!1),Ir=/^[a-zA-Z0-9]/,Br=Ve([["a","z"],["A","Z"],["0","9"]],!1,!1),Ma=function(c,v){return"-"+v.join("")},Mo=function(c,v){return c.join("")+v.join("")},Fr=/^[+\-]/,Lr=Ve(["+","-"],!1,!1),Uo=function(c){return c.match(/^[0+][0-9]+$/)?{"@value":c,"@type":"http://www.w3.org/2001/XMLSchema#integer"}:parseInt(c)},Po=function(c){return{"@value":c,"@type":"http://www.w3.org/2001/XMLSchema#decimal"}},qo=function(c){return{"@value":c,"@type":"http://www.w3.org/2001/XMLSchema#double"}},Ho=/^[eE]/,zo=Ve(["e","E"],!1,!1),Rr='"',Or=Te('"',!1),Ua=/^[^"\\\n\r]/,Pa=Ve(['"',"\\",`
`,"\r"],!0,!1),$r="'",Mr=Te("'",!1),qa=/^[^'\\\n\r]/,Ha=Ve(["'","\\",`
`,"\r"],!0,!1),Ur="'''",za=Te("'''",!1),Ht=/^[^'\\]/,zt=Ve(["'","\\"],!0,!1),Pr="''",ja=Te("''",!1),Va=function(c,v){return"''"+v.join("")},Ga=function(c,v){return"'"+v.join("")},Xa=function(c,v){return c.join("")+v.join("")},qr='"""',Wa=Te('"""',!1),jt=/^[^"\\]/,Vt=Ve(['"',"\\"],!0,!1),Hr='""',Qa=Te('""',!1),Ya=function(c,v){return'""'+v.join("")},Za=function(c,v){return'"'+v.join("")},Ja="\\U",jo=Te("\\U",!1),Vo=function(c){return String.fromCodePoint(parseInt(c.join(""),16))},Ka="\\u",Go=Te("\\u",!1),Xo=function(c){return String.fromCharCode(parseInt(c.join(""),16))},es="\\t",Wo=Te("\\t",!1),Qo=function(){return"	"},ts="\\b",Yo=Te("\\b",!1),Zo=function(){return"\b"},ns="\\n",Jo=Te("\\n",!1),Ko=function(){return`
`},rs="\\r",eu=Te("\\r",!1),tu=function(){return"\r"},is="\\f",nu=Te("\\f",!1),ru=function(){return"\f"},as='\\"',iu=Te('\\"',!1),au=function(){return'"'},ss="\\'",su=Te("\\'",!1),lu=function(){return"'"},ls="\\\\",ou=Te("\\\\",!1),uu=function(){return"\\"},cu=/^[ \t\r\n]/,hu=Ve([" ","	","\r",`
`],!1,!1),du=function(){return"[]"},fu=/^[\uD800-\uDBFF]/,pu=Ve([["\uD800","\uDBFF"]],!1,!1),mu=/^[\uDC00-\uDFFF]/,gu=Ve([["\uDC00","\uDFFF"]],!1,!1),vu=function(c,v){return c+v},yu=/^[A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,wu=Ve([["A","Z"],["a","z"],["À","Ö"],["Ø","ö"],["ø","˿"],["Ͱ","ͽ"],["Ϳ","῿"],["‌","‍"],["⁰","↏"],["Ⰰ","⿯"],["、","퟿"],["豈","﷏"],["ﷰ","�"]],!1,!1),Eu="_",Cu=Te("_",!1),bu="·",xu=Te("·",!1),Nu=/^[\u0300-\u036F]/,Tu=Ve([["̀","ͯ"]],!1,!1),Au=/^[\u203F-\u2040]/,Du=Ve([["‿","⁀"]],!1,!1),os=function(c,v,E,D){return E.join("")+D.join("")},_u=function(c,v,E){return c+v.join("")+E.join("")},ku="%",Su=Te("%",!1),Iu=/^[0-9A-Fa-f]/,Bu=Ve([["0","9"],["A","F"],["a","f"]],!1,!1),Fu="\\",Lu=Te("\\",!1),Ru=/^[_~.!$&'()*+,;=\/?#@%\-]/,Ou=Ve(["_","~",".","!","$","&","'","(",")","*","+",",",";","=","/","?","#","@","%","-"],!1,!1),h=0,ue=0,zr=[{line:1,column:1}],Gt=0,Ti=[],jr;if("startRule"in s){if(!(s.startRule in l))throw new Error(`Can't start parsing from rule "`+s.startRule+'".');o=l[s.startRule]}function Ai(c,v){throw v=v!==void 0?v:Di(ue,h),Mu(c,v)}function Te(c,v){return{type:"literal",text:c,ignoreCase:v}}function Ve(c,v,E){return{type:"class",parts:c,inverted:v,ignoreCase:E}}function $u(){return{type:"end"}}function us(c){var v=zr[c],E;if(v)return v;for(E=c-1;!zr[E];)E--;for(v=zr[E],v={line:v.line,column:v.column};E<c;)a.charCodeAt(E)===10?(v.line++,v.column=1):v.column++,E++;return zr[c]=v,v}function Di(c,v){var E=us(c),D=us(v);return{start:{offset:c,line:E.line,column:E.column},end:{offset:v,line:D.line,column:D.column}}}function X(c){h<Gt||(h>Gt&&(Gt=h,Ti=[]),Ti.push(c))}function Mu(c,v){return new t(c,null,null,v)}function Uu(c,v,E){return new t(t.buildMessage(c,v),c,v,E)}function cs(){var c,v,E,D,k;for(c=h,v=[],E=hs();E!==r;)v.push(E),E=hs();if(v!==r){for(E=[],D=ds();D!==r;)E.push(D),D=ds();if(E!==r){for(D=[],k=ce();k!==r;)D.push(k),k=ce();D!==r?(ue=c,v=u(E),c=v):(h=c,c=r)}else h=c,c=r}else h=c,c=r;return c}function hs(){var c;return a.charCodeAt(h)===65279?(c=d,h++):(c=r,X(f)),c}function ds(){var c,v,E,D;if(c=qu(),c===r)if(c=h,v=Gu(),v!==r){for(E=[],D=ce();D!==r;)E.push(D),D=ce();E!==r?(a.charCodeAt(h)===46?(D=m,h++):(D=r,X(w)),D!==r?(ue=c,v=y(v),c=v):(h=c,c=r)):(h=c,c=r)}else h=c,c=r;return c}function Pu(){var c,v,E,D;if(c=h,a.charCodeAt(h)===35?(v=C,h++):(v=r,X(T)),v!==r){for(E=[],L.test(a.charAt(h))?(D=a.charAt(h),h++):(D=r,X(R));D!==r;)E.push(D),L.test(a.charAt(h))?(D=a.charAt(h),h++):(D=r,X(R));E!==r?(a.charCodeAt(h)===10?(D=Z,h++):(D=r,X(Y)),D!==r?(ue=c,v=N(E),c=v):(h=c,c=r)):(h=c,c=r)}else h=c,c=r;return c}function ce(){var c;return c=cc(),c===r&&(c=Pu()),c}function qu(){var c;return c=Hu(),c===r&&(c=zu(),c===r&&(c=Vu(),c===r&&(c=ju()))),c}function Hu(){var c,v,E,D,k,M,U,I,de;for(c=h,v=[],E=ce();E!==r;)v.push(E),E=ce();if(v!==r)if(a.substr(h,7)===j?(E=j,h+=7):(E=r,X($)),E!==r){for(D=[],k=ce();k!==r;)D.push(k),k=ce();if(D!==r)if(k=vs(),k!==r){for(M=[],U=ce();U!==r;)M.push(U),U=ce();if(M!==r)if(U=ar(),U!==r){for(I=[],de=ce();de!==r;)I.push(de),de=ce();I!==r?(a.charCodeAt(h)===46?(de=m,h++):(de=r,X(w)),de!==r?(ue=c,v=G(k,U),c=v):(h=c,c=r)):(h=c,c=r)}else h=c,c=r;else h=c,c=r}else h=c,c=r;else h=c,c=r}else h=c,c=r;else h=c,c=r;return c}function zu(){var c,v,E,D,k,M,U;for(c=h,v=[],E=ce();E!==r;)v.push(E),E=ce();if(v!==r)if(a.substr(h,5)===F?(E=F,h+=5):(E=r,X(H)),E!==r){for(D=[],k=ce();k!==r;)D.push(k),k=ce();if(D!==r)if(k=ar(),k!==r){for(M=[],U=ce();U!==r;)M.push(U),U=ce();M!==r?(a.charCodeAt(h)===46?(U=m,h++):(U=r,X(w)),U!==r?(ue=c,v=P(k),c=v):(h=c,c=r)):(h=c,c=r)}else h=c,c=r;else h=c,c=r}else h=c,c=r;else h=c,c=r;return c}function ju(){var c,v,E,D,k,M,U,I;for(c=h,v=[],E=ce();E!==r;)v.push(E),E=ce();if(v!==r)if(q.test(a.charAt(h))?(E=a.charAt(h),h++):(E=r,X(ee)),E!==r)if(J.test(a.charAt(h))?(D=a.charAt(h),h++):(D=r,X(_)),D!==r)if(V.test(a.charAt(h))?(k=a.charAt(h),h++):(k=r,X(K)),k!==r)if(ie.test(a.charAt(h))?(M=a.charAt(h),h++):(M=r,X(ae)),M!==r){for(U=[],I=ce();I!==r;)U.push(I),I=ce();U!==r?(I=ar(),I!==r?(ue=c,v=P(I),c=v):(h=c,c=r)):(h=c,c=r)}else h=c,c=r;else h=c,c=r;else h=c,c=r;else h=c,c=r;else h=c,c=r;return c}function Vu(){var c,v,E,D,k,M,U,I,de,He,bn,xn;for(c=h,v=[],E=ce();E!==r;)v.push(E),E=ce();if(v!==r)if(oe.test(a.charAt(h))?(E=a.charAt(h),h++):(E=r,X(ne)),E!==r)if(ge.test(a.charAt(h))?(D=a.charAt(h),h++):(D=r,X(Fe)),D!==r)if(ie.test(a.charAt(h))?(k=a.charAt(h),h++):(k=r,X(ae)),k!==r)if(pe.test(a.charAt(h))?(M=a.charAt(h),h++):(M=r,X(Ce)),M!==r)if(Pe.test(a.charAt(h))?(U=a.charAt(h),h++):(U=r,X(Ke)),U!==r)if(Ae.test(a.charAt(h))?(I=a.charAt(h),h++):(I=r,X(ze)),I!==r){for(de=[],He=ce();He!==r;)de.push(He),He=ce();if(de!==r)if(He=vs(),He!==r){for(bn=[],xn=ce();xn!==r;)bn.push(xn),xn=ce();bn!==r?(xn=ar(),xn!==r?(ue=c,v=G(He,xn),c=v):(h=c,c=r)):(h=c,c=r)}else h=c,c=r;else h=c,c=r}else h=c,c=r;else h=c,c=r;else h=c,c=r;else h=c,c=r;else h=c,c=r;else h=c,c=r;else h=c,c=r;return c}function Gu(){var c,v,E;return c=h,v=Xu(),v!==r?(E=_i(),E!==r?(ue=c,v=ft(v,E),c=v):(h=c,c=r)):(h=c,c=r),c===r&&(c=h,v=fs(),v!==r?(E=_i(),E===r&&(E=null),E!==r?(ue=c,v=st(v,E),c=v):(h=c,c=r)):(h=c,c=r)),c}function _i(){var c,v,E,D,k,M,U,I,de,He;if(c=h,v=Si(),v!==r)if(E=ki(),E!==r){for(D=[],k=h,M=[],U=ce();U!==r;)M.push(U),U=ce();for(M!==r?(a.charCodeAt(h)===59?(U=De,h++):(U=r,X(Le)),U!==r?(I=h,de=Si(),de!==r?(He=ki(),He!==r?(ue=I,de=_e(v,E,de,He),I=de):(h=I,I=r)):(h=I,I=r),I===r&&(I=null),I!==r?(ue=k,M=bt(v,E,I),k=M):(h=k,k=r)):(h=k,k=r)):(h=k,k=r);k!==r;){for(D.push(k),k=h,M=[],U=ce();U!==r;)M.push(U),U=ce();M!==r?(a.charCodeAt(h)===59?(U=De,h++):(U=r,X(Le)),U!==r?(I=h,de=Si(),de!==r?(He=ki(),He!==r?(ue=I,de=_e(v,E,de,He),I=de):(h=I,I=r)):(h=I,I=r),I===r&&(I=null),I!==r?(ue=k,M=bt(v,E,I),k=M):(h=k,k=r)):(h=k,k=r)):(h=k,k=r)}D!==r?(ue=c,v=Ge(v,E,D),c=v):(h=c,c=r)}else h=c,c=r;else h=c,c=r;return c}function ki(){var c,v,E,D,k,M,U;if(c=h,v=ir(),v!==r){for(E=[],D=h,k=[],M=ce();M!==r;)k.push(M),M=ce();for(k!==r?(a.charCodeAt(h)===44?(M=se,h++):(M=r,X(Se)),M!==r?(U=ir(),U!==r?(ue=D,k=ot(v,U),D=k):(h=D,D=r)):(h=D,D=r)):(h=D,D=r);D!==r;){for(E.push(D),D=h,k=[],M=ce();M!==r;)k.push(M),M=ce();k!==r?(a.charCodeAt(h)===44?(M=se,h++):(M=r,X(Se)),M!==r?(U=ir(),U!==r?(ue=D,k=ot(v,U),D=k):(h=D,D=r)):(h=D,D=r)):(h=D,D=r)}E!==r?(ue=c,v=_t(v,E),c=v):(h=c,c=r)}else h=c,c=r;return c}function Si(){var c,v,E;if(c=h,v=Wu(),v!==r&&(ue=c,v=y(v)),c=v,c===r){for(c=h,v=[],E=ce();E!==r;)v.push(E),E=ce();v!==r?(a.charCodeAt(h)===97?(E=Oe,h++):(E=r,X(Re)),E!==r?(ue=c,v=St(),c=v):(h=c,c=r)):(h=c,c=r)}return c}function Xu(){var c,v;return c=h,v=ps(),v!==r&&(ue=c,v=nn(v)),c=v,c===r&&(c=ms(),c===r&&(c=Vr())),c}function Wu(){var c,v,E;for(c=h,v=[],E=ce();E!==r;)v.push(E),E=ce();return v!==r?(E=Vr(),E!==r?(ue=c,v=y(E),c=v):(h=c,c=r)):(h=c,c=r),c}function ir(){var c,v;return c=Qu(),c===r&&(c=h,v=ps(),v!==r&&(ue=c,v=xt(v)),c=v,c===r&&(c=h,v=ms(),v!==r&&(ue=c,v=wn(v)),c=v,c===r&&(c=h,v=fs(),v!==r&&(ue=c,v=y(v)),c=v,c===r&&(c=h,v=Vr(),v!==r&&(ue=c,v=x(v)),c=v)))),c}function Qu(){var c;return c=Zu(),c===r&&(c=Yu(),c===r&&(c=Ju())),c}function fs(){var c,v,E,D,k,M;for(c=h,v=[],E=ce();E!==r;)v.push(E),E=ce();if(v!==r)if(a.charCodeAt(h)===91?(E=p,h++):(E=r,X(g)),E!==r)if(D=_i(),D!==r){for(k=[],M=ce();M!==r;)k.push(M),M=ce();k!==r?(a.charCodeAt(h)===93?(M=S,h++):(M=r,X(z)),M!==r?(ue=c,v=y(D),c=v):(h=c,c=r)):(h=c,c=r)}else h=c,c=r;else h=c,c=r;else h=c,c=r;return c}function ps(){var c,v,E,D,k,M;for(c=h,v=[],E=ce();E!==r;)v.push(E),E=ce();if(v!==r)if(a.charCodeAt(h)===40?(E=W,h++):(E=r,X(te)),E!==r){for(D=[],k=ir();k!==r;)D.push(k),k=ir();if(D!==r){for(k=[],M=ce();M!==r;)k.push(M),M=ce();k!==r?(a.charCodeAt(h)===41?(M=Ne,h++):(M=r,X(Xe)),M!==r?(ue=c,v=qe(D),c=v):(h=c,c=r)):(h=c,c=r)}else h=c,c=r}else h=c,c=r;else h=c,c=r;return c}function Yu(){var c,v,E;for(c=h,v=[],E=ce();E!==r;)v.push(E),E=ce();return v!==r?(E=ac(),E===r&&(E=ic(),E===r&&(E=rc())),E!==r?(ue=c,v=y(E),c=v):(h=c,c=r)):(h=c,c=r),c}function Zu(){var c,v,E,D,k,M,U;for(c=h,v=[],E=ce();E!==r;)v.push(E),E=ce();if(v!==r)if(E=Ii(),E!==r){for(D=[],k=ce();k!==r;)D.push(k),k=ce();D!==r?(k=nc(),k!==r?(ue=c,v=je(E,k),c=v):(h=c,c=r)):(h=c,c=r)}else h=c,c=r;else h=c,c=r;if(c===r){for(c=h,v=[],E=ce();E!==r;)v.push(E),E=ce();if(v!==r)if(E=Ii(),E!==r){for(D=[],k=ce();k!==r;)D.push(k),k=ce();if(D!==r)if(a.substr(h,2)===Ie?(k=Ie,h+=2):(k=r,X(Sr)),k!==r){for(M=[],U=ce();U!==r;)M.push(U),U=ce();M!==r?(U=Vr(),U!==r?(ue=c,v=tr(E,U),c=v):(h=c,c=r)):(h=c,c=r)}else h=c,c=r;else h=c,c=r}else h=c,c=r;else h=c,c=r;if(c===r){for(c=h,v=[],E=ce();E!==r;)v.push(E),E=ce();v!==r?(E=Ii(),E!==r?(ue=c,v=y(E),c=v):(h=c,c=r)):(h=c,c=r)}}return c}function Ju(){var c,v,E;for(c=h,v=[],E=ce();E!==r;)v.push(E),E=ce();if(v!==r?(a.substr(h,4)===nr?(E=nr,h+=4):(E=r,X(b)),E!==r?(ue=c,v=A(),c=v):(h=c,c=r)):(h=c,c=r),c===r){for(c=h,v=[],E=ce();E!==r;)v.push(E),E=ce();v!==r?(a.substr(h,5)===O?(E=O,h+=5):(E=r,X(Q)),E!==r?(ue=c,v=le(),c=v):(h=c,c=r)):(h=c,c=r)}return c}function Ii(){var c,v,E;for(c=h,v=[],E=ce();E!==r;)v.push(E),E=ce();return v!==r?(E=oc(),E===r&&(E=uc(),E===r&&(E=lc(),E===r&&(E=sc()))),E!==r?(ue=c,v=y(E),c=v):(h=c,c=r)):(h=c,c=r),c}function Vr(){var c,v,E;for(c=h,v=[],E=ce();E!==r;)v.push(E),E=ce();if(v!==r?(E=ar(),E!==r?(ue=c,v=y(E),c=v):(h=c,c=r)):(h=c,c=r),c===r){for(c=h,v=[],E=ce();E!==r;)v.push(E),E=ce();v!==r?(E=Ku(),E!==r?(ue=c,v=y(E),c=v):(h=c,c=r)):(h=c,c=r)}return c}function Ku(){var c,v;return c=ec(),c===r&&(c=h,v=gs(),v!==r&&(ue=c,v=Ee(v)),c=v),c}function ms(){var c,v,E;for(c=h,v=[],E=ce();E!==r;)v.push(E),E=ce();if(v!==r?(E=tc(),E!==r?(ue=c,v=y(E),c=v):(h=c,c=r)):(h=c,c=r),c===r){for(c=h,v=[],E=ce();E!==r;)v.push(E),E=ce();v!==r?(E=hc(),E!==r?(ue=c,v=y(E),c=v):(h=c,c=r)):(h=c,c=r)}return c}function ar(){var c,v,E,D;if(c=h,a.charCodeAt(h)===60?(v=We,h++):(v=r,X(gt)),v!==r){for(E=[],Nt.test(a.charAt(h))?(D=a.charAt(h),h++):(D=r,X(Rt)),D===r&&(D=Qe());D!==r;)E.push(D),Nt.test(a.charAt(h))?(D=a.charAt(h),h++):(D=r,X(Rt)),D===r&&(D=Qe());E!==r?(a.charCodeAt(h)===62?(D=Ot,h++):(D=r,X(rn)),D!==r?(ue=c,v=an(E),c=v):(h=c,c=r)):(h=c,c=r)}else h=c,c=r;return c}function gs(){var c,v,E;return c=h,v=ws(),v===r&&(v=null),v!==r?(a.charCodeAt(h)===58?(E=pt,h++):(E=r,X(rt)),E!==r?(ue=c,v=sn(v),c=v):(h=c,c=r)):(h=c,c=r),c}function vs(){var c,v,E;return c=h,v=ws(),v===r&&(v=null),v!==r?(a.charCodeAt(h)===58?(E=pt,h++):(E=r,X(rt)),E!==r?(ue=c,v=En(v),c=v):(h=c,c=r)):(h=c,c=r),c}function ec(){var c,v,E;return c=h,v=gs(),v!==r?(E=dc(),E!==r?(ue=c,v=ut(v,E),c=v):(h=c,c=r)):(h=c,c=r),c}function tc(){var c,v,E,D,k,M,U,I,de,He;if(c=h,v=h,a.substr(h,2)===rr?(E=rr,h+=2):(E=r,X(pn)),E!==r)if(D=Fi(),D===r&&(et.test(a.charAt(h))?(D=a.charAt(h),h++):(D=r,X(lt))),D!==r){for(k=[],M=ct();M!==r;)k.push(M),M=ct();if(k!==r){if(M=[],U=h,I=[],a.charCodeAt(h)===46?(de=m,h++):(de=r,X(w)),de!==r)for(;de!==r;)I.push(de),a.charCodeAt(h)===46?(de=m,h++):(de=r,X(w));else I=r;if(I!==r){if(de=[],He=ct(),He!==r)for(;He!==r;)de.push(He),He=ct();else de=r;de!==r?(I=[I,de],U=I):(h=U,U=r)}else h=U,U=r;for(;U!==r;){if(M.push(U),U=h,I=[],a.charCodeAt(h)===46?(de=m,h++):(de=r,X(w)),de!==r)for(;de!==r;)I.push(de),a.charCodeAt(h)===46?(de=m,h++):(de=r,X(w));else I=r;if(I!==r){if(de=[],He=ct(),He!==r)for(;He!==r;)de.push(He),He=ct();else de=r;de!==r?(I=[I,de],U=I):(h=U,U=r)}else h=U,U=r}M!==r?(E=[E,D,k,M],v=E):(h=v,v=r)}else h=v,v=r}else h=v,v=r;else h=v,v=r;return v!==r?c=a.substring(c,h):c=v,c}function nc(){var c,v,E,D,k,M,U,I;if(c=h,a.charCodeAt(h)===64?(v=Oo,h++):(v=r,X($o)),v!==r){if(E=[],Oa.test(a.charAt(h))?(D=a.charAt(h),h++):(D=r,X($a)),D!==r)for(;D!==r;)E.push(D),Oa.test(a.charAt(h))?(D=a.charAt(h),h++):(D=r,X($a));else E=r;if(E!==r){if(D=[],k=h,a.charCodeAt(h)===45?(M=xi,h++):(M=r,X(Ni)),M!==r){if(U=[],Ir.test(a.charAt(h))?(I=a.charAt(h),h++):(I=r,X(Br)),I!==r)for(;I!==r;)U.push(I),Ir.test(a.charAt(h))?(I=a.charAt(h),h++):(I=r,X(Br));else U=r;U!==r?(ue=k,M=Ma(E,U),k=M):(h=k,k=r)}else h=k,k=r;for(;k!==r;)if(D.push(k),k=h,a.charCodeAt(h)===45?(M=xi,h++):(M=r,X(Ni)),M!==r){if(U=[],Ir.test(a.charAt(h))?(I=a.charAt(h),h++):(I=r,X(Br)),I!==r)for(;I!==r;)U.push(I),Ir.test(a.charAt(h))?(I=a.charAt(h),h++):(I=r,X(Br));else U=r;U!==r?(ue=k,M=Ma(E,U),k=M):(h=k,k=r)}else h=k,k=r;D!==r?(ue=c,v=Mo(E,D),c=v):(h=c,c=r)}else h=c,c=r}else h=c,c=r;return c}function rc(){var c,v,E,D,k,M;if(c=h,v=h,E=h,Fr.test(a.charAt(h))?(D=a.charAt(h),h++):(D=r,X(Lr)),D===r&&(D=null),D!==r){if(k=[],et.test(a.charAt(h))?(M=a.charAt(h),h++):(M=r,X(lt)),M!==r)for(;M!==r;)k.push(M),et.test(a.charAt(h))?(M=a.charAt(h),h++):(M=r,X(lt));else k=r;k!==r?(D=[D,k],E=D):(h=E,E=r)}else h=E,E=r;return E!==r?v=a.substring(v,h):v=E,v!==r&&(ue=c,v=Uo(v)),c=v,c}function ic(){var c,v,E,D,k,M,U,I;if(c=h,v=h,E=h,Fr.test(a.charAt(h))?(D=a.charAt(h),h++):(D=r,X(Lr)),D===r&&(D=null),D!==r){for(k=[],et.test(a.charAt(h))?(M=a.charAt(h),h++):(M=r,X(lt));M!==r;)k.push(M),et.test(a.charAt(h))?(M=a.charAt(h),h++):(M=r,X(lt));if(k!==r)if(a.charCodeAt(h)===46?(M=m,h++):(M=r,X(w)),M!==r){if(U=[],et.test(a.charAt(h))?(I=a.charAt(h),h++):(I=r,X(lt)),I!==r)for(;I!==r;)U.push(I),et.test(a.charAt(h))?(I=a.charAt(h),h++):(I=r,X(lt));else U=r;U!==r?(D=[D,k,M,U],E=D):(h=E,E=r)}else h=E,E=r;else h=E,E=r}else h=E,E=r;return E!==r?v=a.substring(v,h):v=E,v!==r&&(ue=c,v=Po(v)),c=v,c}function ac(){var c,v,E,D,k,M,U,I,de;if(c=h,v=h,E=h,Fr.test(a.charAt(h))?(D=a.charAt(h),h++):(D=r,X(Lr)),D===r&&(D=null),D!==r){if(k=h,M=[],et.test(a.charAt(h))?(U=a.charAt(h),h++):(U=r,X(lt)),U!==r)for(;U!==r;)M.push(U),et.test(a.charAt(h))?(U=a.charAt(h),h++):(U=r,X(lt));else M=r;if(M!==r)if(a.charCodeAt(h)===46?(U=m,h++):(U=r,X(w)),U!==r){for(I=[],et.test(a.charAt(h))?(de=a.charAt(h),h++):(de=r,X(lt));de!==r;)I.push(de),et.test(a.charAt(h))?(de=a.charAt(h),h++):(de=r,X(lt));I!==r?(de=Bi(),de!==r?(M=[M,U,I,de],k=M):(h=k,k=r)):(h=k,k=r)}else h=k,k=r;else h=k,k=r;if(k===r){if(k=h,a.charCodeAt(h)===46?(M=m,h++):(M=r,X(w)),M!==r){if(U=[],et.test(a.charAt(h))?(I=a.charAt(h),h++):(I=r,X(lt)),I!==r)for(;I!==r;)U.push(I),et.test(a.charAt(h))?(I=a.charAt(h),h++):(I=r,X(lt));else U=r;U!==r?(I=Bi(),I!==r?(M=[M,U,I],k=M):(h=k,k=r)):(h=k,k=r)}else h=k,k=r;if(k===r){if(k=h,M=[],et.test(a.charAt(h))?(U=a.charAt(h),h++):(U=r,X(lt)),U!==r)for(;U!==r;)M.push(U),et.test(a.charAt(h))?(U=a.charAt(h),h++):(U=r,X(lt));else M=r;M!==r?(U=Bi(),U!==r?(M=[M,U],k=M):(h=k,k=r)):(h=k,k=r)}}k!==r?(D=[D,k],E=D):(h=E,E=r)}else h=E,E=r;return E!==r?v=a.substring(v,h):v=E,v!==r&&(ue=c,v=qo(v)),c=v,c}function Bi(){var c,v,E,D,k,M;if(c=h,v=h,Ho.test(a.charAt(h))?(E=a.charAt(h),h++):(E=r,X(zo)),E!==r)if(Fr.test(a.charAt(h))?(D=a.charAt(h),h++):(D=r,X(Lr)),D===r&&(D=null),D!==r){if(k=[],et.test(a.charAt(h))?(M=a.charAt(h),h++):(M=r,X(lt)),M!==r)for(;M!==r;)k.push(M),et.test(a.charAt(h))?(M=a.charAt(h),h++):(M=r,X(lt));else k=r;k!==r?(E=[E,D,k],v=E):(h=v,v=r)}else h=v,v=r;else h=v,v=r;return v!==r?c=a.substring(c,h):c=v,c}function sc(){var c,v,E,D;if(c=h,a.charCodeAt(h)===34?(v=Rr,h++):(v=r,X(Or)),v!==r){for(E=[],Ua.test(a.charAt(h))?(D=a.charAt(h),h++):(D=r,X(Pa)),D===r&&(D=Je(),D===r&&(D=Qe()));D!==r;)E.push(D),Ua.test(a.charAt(h))?(D=a.charAt(h),h++):(D=r,X(Pa)),D===r&&(D=Je(),D===r&&(D=Qe()));E!==r?(a.charCodeAt(h)===34?(D=Rr,h++):(D=r,X(Or)),D!==r?(ue=c,v=N(E),c=v):(h=c,c=r)):(h=c,c=r)}else h=c,c=r;return c}function lc(){var c,v,E,D;if(c=h,a.charCodeAt(h)===39?(v=$r,h++):(v=r,X(Mr)),v!==r){for(E=[],qa.test(a.charAt(h))?(D=a.charAt(h),h++):(D=r,X(Ha)),D===r&&(D=Je(),D===r&&(D=Qe()));D!==r;)E.push(D),qa.test(a.charAt(h))?(D=a.charAt(h),h++):(D=r,X(Ha)),D===r&&(D=Je(),D===r&&(D=Qe()));E!==r?(a.charCodeAt(h)===39?(D=$r,h++):(D=r,X(Mr)),D!==r?(ue=c,v=N(E),c=v):(h=c,c=r)):(h=c,c=r)}else h=c,c=r;return c}function oc(){var c,v,E,D,k,M,U,I;if(c=h,a.substr(h,3)===Ur?(v=Ur,h+=3):(v=r,X(za)),v!==r){for(E=[],Ht.test(a.charAt(h))?(D=a.charAt(h),h++):(D=r,X(zt)),D===r&&(D=Je(),D===r&&(D=Qe()));D!==r;)E.push(D),Ht.test(a.charAt(h))?(D=a.charAt(h),h++):(D=r,X(zt)),D===r&&(D=Je(),D===r&&(D=Qe()));if(E!==r){if(D=[],k=h,a.substr(h,2)===Pr?(M=Pr,h+=2):(M=r,X(ja)),M!==r){if(U=[],Ht.test(a.charAt(h))?(I=a.charAt(h),h++):(I=r,X(zt)),I===r&&(I=Je(),I===r&&(I=Qe())),I!==r)for(;I!==r;)U.push(I),Ht.test(a.charAt(h))?(I=a.charAt(h),h++):(I=r,X(zt)),I===r&&(I=Je(),I===r&&(I=Qe()));else U=r;U!==r?(ue=k,M=Va(E,U),k=M):(h=k,k=r)}else h=k,k=r;if(k===r)if(k=h,a.charCodeAt(h)===39?(M=$r,h++):(M=r,X(Mr)),M!==r){if(U=[],Ht.test(a.charAt(h))?(I=a.charAt(h),h++):(I=r,X(zt)),I===r&&(I=Je(),I===r&&(I=Qe())),I!==r)for(;I!==r;)U.push(I),Ht.test(a.charAt(h))?(I=a.charAt(h),h++):(I=r,X(zt)),I===r&&(I=Je(),I===r&&(I=Qe()));else U=r;U!==r?(ue=k,M=Ga(E,U),k=M):(h=k,k=r)}else h=k,k=r;for(;k!==r;){if(D.push(k),k=h,a.substr(h,2)===Pr?(M=Pr,h+=2):(M=r,X(ja)),M!==r){if(U=[],Ht.test(a.charAt(h))?(I=a.charAt(h),h++):(I=r,X(zt)),I===r&&(I=Je(),I===r&&(I=Qe())),I!==r)for(;I!==r;)U.push(I),Ht.test(a.charAt(h))?(I=a.charAt(h),h++):(I=r,X(zt)),I===r&&(I=Je(),I===r&&(I=Qe()));else U=r;U!==r?(ue=k,M=Va(E,U),k=M):(h=k,k=r)}else h=k,k=r;if(k===r)if(k=h,a.charCodeAt(h)===39?(M=$r,h++):(M=r,X(Mr)),M!==r){if(U=[],Ht.test(a.charAt(h))?(I=a.charAt(h),h++):(I=r,X(zt)),I===r&&(I=Je(),I===r&&(I=Qe())),I!==r)for(;I!==r;)U.push(I),Ht.test(a.charAt(h))?(I=a.charAt(h),h++):(I=r,X(zt)),I===r&&(I=Je(),I===r&&(I=Qe()));else U=r;U!==r?(ue=k,M=Ga(E,U),k=M):(h=k,k=r)}else h=k,k=r}D!==r?(a.substr(h,3)===Ur?(k=Ur,h+=3):(k=r,X(za)),k!==r?(ue=c,v=Xa(E,D),c=v):(h=c,c=r)):(h=c,c=r)}else h=c,c=r}else h=c,c=r;return c}function uc(){var c,v,E,D,k,M,U,I;if(c=h,a.substr(h,3)===qr?(v=qr,h+=3):(v=r,X(Wa)),v!==r){for(E=[],jt.test(a.charAt(h))?(D=a.charAt(h),h++):(D=r,X(Vt)),D===r&&(D=Je(),D===r&&(D=Qe()));D!==r;)E.push(D),jt.test(a.charAt(h))?(D=a.charAt(h),h++):(D=r,X(Vt)),D===r&&(D=Je(),D===r&&(D=Qe()));if(E!==r){if(D=[],k=h,a.substr(h,2)===Hr?(M=Hr,h+=2):(M=r,X(Qa)),M!==r){if(U=[],jt.test(a.charAt(h))?(I=a.charAt(h),h++):(I=r,X(Vt)),I===r&&(I=Je(),I===r&&(I=Qe())),I!==r)for(;I!==r;)U.push(I),jt.test(a.charAt(h))?(I=a.charAt(h),h++):(I=r,X(Vt)),I===r&&(I=Je(),I===r&&(I=Qe()));else U=r;U!==r?(ue=k,M=Ya(E,U),k=M):(h=k,k=r)}else h=k,k=r;if(k===r)if(k=h,a.charCodeAt(h)===34?(M=Rr,h++):(M=r,X(Or)),M!==r){if(U=[],jt.test(a.charAt(h))?(I=a.charAt(h),h++):(I=r,X(Vt)),I===r&&(I=Je(),I===r&&(I=Qe())),I!==r)for(;I!==r;)U.push(I),jt.test(a.charAt(h))?(I=a.charAt(h),h++):(I=r,X(Vt)),I===r&&(I=Je(),I===r&&(I=Qe()));else U=r;U!==r?(ue=k,M=Za(E,U),k=M):(h=k,k=r)}else h=k,k=r;for(;k!==r;){if(D.push(k),k=h,a.substr(h,2)===Hr?(M=Hr,h+=2):(M=r,X(Qa)),M!==r){if(U=[],jt.test(a.charAt(h))?(I=a.charAt(h),h++):(I=r,X(Vt)),I===r&&(I=Je(),I===r&&(I=Qe())),I!==r)for(;I!==r;)U.push(I),jt.test(a.charAt(h))?(I=a.charAt(h),h++):(I=r,X(Vt)),I===r&&(I=Je(),I===r&&(I=Qe()));else U=r;U!==r?(ue=k,M=Ya(E,U),k=M):(h=k,k=r)}else h=k,k=r;if(k===r)if(k=h,a.charCodeAt(h)===34?(M=Rr,h++):(M=r,X(Or)),M!==r){if(U=[],jt.test(a.charAt(h))?(I=a.charAt(h),h++):(I=r,X(Vt)),I===r&&(I=Je(),I===r&&(I=Qe())),I!==r)for(;I!==r;)U.push(I),jt.test(a.charAt(h))?(I=a.charAt(h),h++):(I=r,X(Vt)),I===r&&(I=Je(),I===r&&(I=Qe()));else U=r;U!==r?(ue=k,M=Za(E,U),k=M):(h=k,k=r)}else h=k,k=r}D!==r?(a.substr(h,3)===qr?(k=qr,h+=3):(k=r,X(Wa)),k!==r?(ue=c,v=Xa(E,D),c=v):(h=c,c=r)):(h=c,c=r)}else h=c,c=r}else h=c,c=r;return c}function Qe(){var c,v,E,D,k,M,U,I,de,He,bn;return c=h,a.substr(h,2)===Ja?(v=Ja,h+=2):(v=r,X(jo)),v!==r?(E=h,D=Tt(),D!==r?(k=Tt(),k!==r?(M=Tt(),M!==r?(U=Tt(),U!==r?(I=Tt(),I!==r?(de=Tt(),de!==r?(He=Tt(),He!==r?(bn=Tt(),bn!==r?(D=[D,k,M,U,I,de,He,bn],E=D):(h=E,E=r)):(h=E,E=r)):(h=E,E=r)):(h=E,E=r)):(h=E,E=r)):(h=E,E=r)):(h=E,E=r)):(h=E,E=r),E!==r?(ue=c,v=Vo(E),c=v):(h=c,c=r)):(h=c,c=r),c===r&&(c=h,a.substr(h,2)===Ka?(v=Ka,h+=2):(v=r,X(Go)),v!==r?(E=h,D=Tt(),D!==r?(k=Tt(),k!==r?(M=Tt(),M!==r?(U=Tt(),U!==r?(D=[D,k,M,U],E=D):(h=E,E=r)):(h=E,E=r)):(h=E,E=r)):(h=E,E=r),E!==r?(ue=c,v=Xo(E),c=v):(h=c,c=r)):(h=c,c=r)),c}function Je(){var c,v;return c=h,a.substr(h,2)===es?(v=es,h+=2):(v=r,X(Wo)),v!==r&&(ue=c,v=Qo()),c=v,c===r&&(c=h,a.substr(h,2)===ts?(v=ts,h+=2):(v=r,X(Yo)),v!==r&&(ue=c,v=Zo()),c=v,c===r&&(c=h,a.substr(h,2)===ns?(v=ns,h+=2):(v=r,X(Jo)),v!==r&&(ue=c,v=Ko()),c=v,c===r&&(c=h,a.substr(h,2)===rs?(v=rs,h+=2):(v=r,X(eu)),v!==r&&(ue=c,v=tu()),c=v,c===r&&(c=h,a.substr(h,2)===is?(v=is,h+=2):(v=r,X(nu)),v!==r&&(ue=c,v=ru()),c=v,c===r&&(c=h,a.substr(h,2)===as?(v=as,h+=2):(v=r,X(iu)),v!==r&&(ue=c,v=au()),c=v,c===r&&(c=h,a.substr(h,2)===ss?(v=ss,h+=2):(v=r,X(su)),v!==r&&(ue=c,v=lu()),c=v,c===r&&(c=h,a.substr(h,2)===ls?(v=ls,h+=2):(v=r,X(ou)),v!==r&&(ue=c,v=uu()),c=v))))))),c}function cc(){var c;return cu.test(a.charAt(h))?(c=a.charAt(h),h++):(c=r,X(hu)),c}function hc(){var c,v,E,D;if(c=h,a.charCodeAt(h)===91?(v=p,h++):(v=r,X(g)),v!==r){for(E=[],D=ce();D!==r;)E.push(D),D=ce();E!==r?(a.charCodeAt(h)===93?(D=S,h++):(D=r,X(z)),D!==r?(ue=c,v=du(),c=v):(h=c,c=r)):(h=c,c=r)}else h=c,c=r;return c}function ys(){var c,v,E;return c=h,fu.test(a.charAt(h))?(v=a.charAt(h),h++):(v=r,X(pu)),v!==r?(mu.test(a.charAt(h))?(E=a.charAt(h),h++):(E=r,X(gu)),E!==r?(ue=c,v=vu(v,E),c=v):(h=c,c=r)):(h=c,c=r),c===r&&(yu.test(a.charAt(h))?(c=a.charAt(h),h++):(c=r,X(wu))),c}function Fi(){var c;return c=ys(),c===r&&(a.charCodeAt(h)===95?(c=Eu,h++):(c=r,X(Cu))),c}function ct(){var c;return c=Fi(),c===r&&(a.charCodeAt(h)===45?(c=xi,h++):(c=r,X(Ni)),c===r&&(et.test(a.charAt(h))?(c=a.charAt(h),h++):(c=r,X(lt)),c===r&&(a.charCodeAt(h)===183?(c=bu,h++):(c=r,X(xu)),c===r&&(Nu.test(a.charAt(h))?(c=a.charAt(h),h++):(c=r,X(Tu)),c===r&&(Au.test(a.charAt(h))?(c=a.charAt(h),h++):(c=r,X(Du))))))),c}function ws(){var c,v,E,D,k,M,U,I,de;if(c=h,v=h,E=ys(),E!==r){for(D=[],k=ct();k!==r;)D.push(k),k=ct();if(D!==r){if(k=[],M=h,U=[],a.charCodeAt(h)===46?(I=m,h++):(I=r,X(w)),I!==r)for(;I!==r;)U.push(I),a.charCodeAt(h)===46?(I=m,h++):(I=r,X(w));else U=r;if(U!==r){if(I=[],de=ct(),de!==r)for(;de!==r;)I.push(de),de=ct();else I=r;I!==r?(U=[U,I],M=U):(h=M,M=r)}else h=M,M=r;for(;M!==r;){if(k.push(M),M=h,U=[],a.charCodeAt(h)===46?(I=m,h++):(I=r,X(w)),I!==r)for(;I!==r;)U.push(I),a.charCodeAt(h)===46?(I=m,h++):(I=r,X(w));else U=r;if(U!==r){if(I=[],de=ct(),de!==r)for(;de!==r;)I.push(de),de=ct();else I=r;I!==r?(U=[U,I],M=U):(h=M,M=r)}else h=M,M=r}k!==r?(E=[E,D,k],v=E):(h=v,v=r)}else h=v,v=r}else h=v,v=r;return v!==r?c=a.substring(c,h):c=v,c}function dc(){var c,v,E,D,k,M,U,I;if(c=h,v=Fi(),v===r&&(a.charCodeAt(h)===58?(v=pt,h++):(v=r,X(rt)),v===r&&(et.test(a.charAt(h))?(v=a.charAt(h),h++):(v=r,X(lt)),v===r&&(v=Cn()))),v!==r){for(E=[],D=ct(),D===r&&(a.charCodeAt(h)===58?(D=pt,h++):(D=r,X(rt)),D===r&&(D=Cn()));D!==r;)E.push(D),D=ct(),D===r&&(a.charCodeAt(h)===58?(D=pt,h++):(D=r,X(rt)),D===r&&(D=Cn()));if(E!==r){if(D=[],k=h,M=[],a.charCodeAt(h)===46?(U=m,h++):(U=r,X(w)),U!==r)for(;U!==r;)M.push(U),a.charCodeAt(h)===46?(U=m,h++):(U=r,X(w));else M=r;if(M!==r){if(U=[],I=ct(),I===r&&(a.charCodeAt(h)===58?(I=pt,h++):(I=r,X(rt)),I===r&&(I=Cn())),I!==r)for(;I!==r;)U.push(I),I=ct(),I===r&&(a.charCodeAt(h)===58?(I=pt,h++):(I=r,X(rt)),I===r&&(I=Cn()));else U=r;U!==r?(ue=k,M=os(v,E,M,U),k=M):(h=k,k=r)}else h=k,k=r;for(;k!==r;){if(D.push(k),k=h,M=[],a.charCodeAt(h)===46?(U=m,h++):(U=r,X(w)),U!==r)for(;U!==r;)M.push(U),a.charCodeAt(h)===46?(U=m,h++):(U=r,X(w));else M=r;if(M!==r){if(U=[],I=ct(),I===r&&(a.charCodeAt(h)===58?(I=pt,h++):(I=r,X(rt)),I===r&&(I=Cn())),I!==r)for(;I!==r;)U.push(I),I=ct(),I===r&&(a.charCodeAt(h)===58?(I=pt,h++):(I=r,X(rt)),I===r&&(I=Cn()));else U=r;U!==r?(ue=k,M=os(v,E,M,U),k=M):(h=k,k=r)}else h=k,k=r}D!==r?(ue=c,v=_u(v,E,D),c=v):(h=c,c=r)}else h=c,c=r}else h=c,c=r;return c}function Cn(){var c;return c=fc(),c===r&&(c=pc()),c}function fc(){var c,v,E,D,k;return c=h,v=h,a.charCodeAt(h)===37?(E=ku,h++):(E=r,X(Su)),E!==r?(D=Tt(),D!==r?(k=Tt(),k!==r?(E=[E,D,k],v=E):(h=v,v=r)):(h=v,v=r)):(h=v,v=r),v!==r?c=a.substring(c,h):c=v,c}function Tt(){var c;return Iu.test(a.charAt(h))?(c=a.charAt(h),h++):(c=r,X(Bu)),c}function pc(){var c,v,E;return c=h,a.charCodeAt(h)===92?(v=Fu,h++):(v=r,X(Lu)),v!==r?(Ru.test(a.charAt(h))?(E=a.charAt(h),h++):(E=r,X(Ou)),E!==r?(ue=c,v=y(E),c=v):(h=c,c=r)):(h=c,c=r),c}var Es=function(c){return c.match(/^[a-z](.*?):(.+?)/g)};function mc(c,v){var E={};return E[c]=v,E}var $e={base:[],data:{},addBase:function(c){if($e.base.length===0){$e.base.push(c);return}const v=$e.base[$e.base.length-1];v!==c&&$e.base.push(new URL(c,v).toString())},addPrefix:function(c,v){const E=$e.data[c];E===void 0?$e.data[c]=[{uri:v,count:0}]:E[E.length-1].uri!==v&&E.push({uri:v,count:0})},hasPrefix:function(c){return this.data[c]!==void 0},resolve:function(c,v){const E=Object.keys($e.data).find(k=>c.indexOf(k+":")===0);if(E!==void 0){const k=$e.data[E];if(k.length===1&&v!==!0&&Es(k[0].uri))return c;const M=k[k.length-1].uri;return c.replace(E+":",M)}else{var D=$e.base.length===0?s.baseIRI:$e.base[$e.base.length-1];return!D||c.match(/^(http:|https:|urn:|file:)/)?c:c.indexOf("//")===0&&D?D.split("//")[0]+c:new URL(c,D).toString()}},increment:function(c){const v=$e.data[c];v!==void 0&&v[v.length-1].count++},decrement:function(c){const v=$e.data[c];v!==void 0&&v[v.length-1].count--},toJSON:function(){const c={};return $e.base.length>0&&(c["@context"]===void 0&&(c["@context"]={}),c["@context"]["@base"]=$e.base[0]),Object.keys($e.data).forEach(v=>{const E=$e.data[v][0];E.uri==="http://www.w3.org/2001/XMLSchema#"&&E.count<1||Es(E.uri)&&(c["@context"]===void 0&&(c["@context"]={}),c["@context"][v]=E.uri)}),c}};function Li(c,v){if(c["@list"]===void 0||!v&&!c["@list"].find(k=>k["@list"]!==void 0))return c;if(c["@list"].length===0)return{"@id":"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"};var E={},D=null;return c["@list"].forEach(k=>{D===null?D=E:(D["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"]={},D=D["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"]),D["http://www.w3.org/1999/02/22-rdf-syntax-ns#first"]=Li(k,!0),D["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"]={"@id":"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}),E}if(jr=o(),jr!==r&&h===a.length)return jr;throw jr!==r&&h<a.length&&X($u()),Uu(Ti,Gt<a.length?a.charAt(Gt):null,Gt<a.length?Di(Gt,Gt+1):Di(Gt,Gt))}return{SyntaxError:t,parse:n}})})(ai)),ai.exports}var Pc=Uc(),Oi,Ds;function qc(){if(Ds)return Oi;Ds=1;const i={acl:"http://www.w3.org/ns/auth/acl#",arg:"http://www.w3.org/ns/pim/arg#",as:"https://www.w3.org/ns/activitystreams#",bookmark:"http://www.w3.org/2002/01/bookmark#",cal:"http://www.w3.org/2002/12/cal/ical#",cco:"http://www.ontologyrepository.com/CommonCoreOntologies/",cert:"http://www.w3.org/ns/auth/cert#",contact:"http://www.w3.org/2000/10/swap/pim/contact#",dc:"http://purl.org/dc/elements/1.1/",dct:"http://purl.org/dc/terms/",doap:"http://usefulinc.com/ns/doap#",foaf:"http://xmlns.com/foaf/0.1/",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",gpx:"http://www.w3.org/ns/pim/gpx#",gr:"http://purl.org/goodrelations/v1#",http:"http://www.w3.org/2007/ont/http#",httph:"http://www.w3.org/2007/ont/httph#",icalTZ:"http://www.w3.org/2002/12/cal/icaltzd#",ldp:"http://www.w3.org/ns/ldp#",link:"http://www.w3.org/2007/ont/link#",log:"http://www.w3.org/2000/10/swap/log#",meeting:"http://www.w3.org/ns/pim/meeting#",mo:"http://purl.org/ontology/mo/",org:"http://www.w3.org/ns/org#",owl:"http://www.w3.org/2002/07/owl#",pad:"http://www.w3.org/ns/pim/pad#",patch:"http://www.w3.org/ns/pim/patch#",prov:"http://www.w3.org/ns/prov#",pto:"http://www.productontology.org/id/",qu:"http://www.w3.org/2000/10/swap/pim/qif#",trip:"http://www.w3.org/ns/pim/trip#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",rss:"http://purl.org/rss/1.0/",sched:"http://www.w3.org/ns/pim/schedule#",schema:"http://schema.org/",sioc:"http://rdfs.org/sioc/ns#",skos:"http://www.w3.org/2004/02/skos/core#",solid:"http://www.w3.org/ns/solid/terms#",space:"http://www.w3.org/ns/pim/space#",stat:"http://www.w3.org/ns/posix/stat#",tab:"http://www.w3.org/2007/ont/link#",tabont:"http://www.w3.org/2007/ont/link#",ui:"http://www.w3.org/ns/ui#",vann:"http://purl.org/vocab/vann/",vcard:"http://www.w3.org/2006/vcard/ns#",wf:"http://www.w3.org/2005/01/wf/flow#",xsd:"http://www.w3.org/2001/XMLSchema#"};function e(t={namedNode:n=>n}){const n={};for(const a in i){const s=i[a];n[a]=function(r=""){return t.namedNode(s+r)}}return n}return Oi=e,Oi}var Hc=qc();const _s=_l(Hc);var sr={},on={},Nn={},ks;function yi(){if(ks)return Nn;ks=1;function i(s,r,l){if(l===void 0&&(l=Array.prototype),s&&typeof l.find=="function")return l.find.call(s,r);for(var o=0;o<s.length;o++)if(Object.prototype.hasOwnProperty.call(s,o)){var u=s[o];if(r.call(void 0,u,o,s))return u}}function e(s,r){return r===void 0&&(r=Object),r&&typeof r.freeze=="function"?r.freeze(s):s}function t(s,r){if(s===null||typeof s!="object")throw new TypeError("target is not an object");for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(s[l]=r[l]);return s}var n=e({HTML:"text/html",isHTML:function(s){return s===n.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),a=e({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(s){return s===a.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return Nn.assign=t,Nn.find=i,Nn.freeze=e,Nn.MIME_TYPE=n,Nn.NAMESPACE=a,Nn}var Ss;function kl(){if(Ss)return on;Ss=1;var i=yi(),e=i.find,t=i.NAMESPACE;function n(b){return b!==""}function a(b){return b?b.split(/[\t\n\f\r ]+/).filter(n):[]}function s(b,A){return b.hasOwnProperty(A)||(b[A]=!0),b}function r(b){if(!b)return[];var A=a(b);return Object.keys(A.reduce(s,{}))}function l(b){return function(A){return b&&b.indexOf(A)!==-1}}function o(b,A){for(var O in b)Object.prototype.hasOwnProperty.call(b,O)&&(A[O]=b[O])}function u(b,A){var O=b.prototype;if(!(O instanceof A)){let Q=function(){};Q.prototype=A.prototype,Q=new Q,o(O,Q),b.prototype=O=Q}O.constructor!=b&&(typeof b!="function"&&console.error("unknown Class:"+b),O.constructor=b)}var d={},f=d.ELEMENT_NODE=1,m=d.ATTRIBUTE_NODE=2,w=d.TEXT_NODE=3,y=d.CDATA_SECTION_NODE=4,C=d.ENTITY_REFERENCE_NODE=5,T=d.ENTITY_NODE=6,L=d.PROCESSING_INSTRUCTION_NODE=7,R=d.COMMENT_NODE=8,Z=d.DOCUMENT_NODE=9,Y=d.DOCUMENT_TYPE_NODE=10,N=d.DOCUMENT_FRAGMENT_NODE=11,j=d.NOTATION_NODE=12,$={},G={};$.INDEX_SIZE_ERR=(G[1]="Index size error",1),$.DOMSTRING_SIZE_ERR=(G[2]="DOMString size error",2);var F=$.HIERARCHY_REQUEST_ERR=(G[3]="Hierarchy request error",3);$.WRONG_DOCUMENT_ERR=(G[4]="Wrong document",4),$.INVALID_CHARACTER_ERR=(G[5]="Invalid character",5),$.NO_DATA_ALLOWED_ERR=(G[6]="No data allowed",6),$.NO_MODIFICATION_ALLOWED_ERR=(G[7]="No modification allowed",7);var H=$.NOT_FOUND_ERR=(G[8]="Not found",8);$.NOT_SUPPORTED_ERR=(G[9]="Not supported",9);var P=$.INUSE_ATTRIBUTE_ERR=(G[10]="Attribute in use",10);$.INVALID_STATE_ERR=(G[11]="Invalid state",11),$.SYNTAX_ERR=(G[12]="Syntax error",12),$.INVALID_MODIFICATION_ERR=(G[13]="Invalid modification",13),$.NAMESPACE_ERR=(G[14]="Invalid namespace",14),$.INVALID_ACCESS_ERR=(G[15]="Invalid access",15);function q(b,A){if(A instanceof Error)var O=A;else O=this,Error.call(this,G[b]),this.message=G[b],Error.captureStackTrace&&Error.captureStackTrace(this,q);return O.code=b,A&&(this.message=this.message+": "+A),O}q.prototype=Error.prototype,o($,q);function ee(){}ee.prototype={length:0,item:function(b){return b>=0&&b<this.length?this[b]:null},toString:function(b,A){for(var O=[],Q=0;Q<this.length;Q++)Ie(this[Q],O,b,A);return O.join("")},filter:function(b){return Array.prototype.filter.call(this,b)},indexOf:function(b){return Array.prototype.indexOf.call(this,b)}};function J(b,A){this._node=b,this._refresh=A,_(this)}function _(b){var A=b._node._inc||b._node.ownerDocument._inc;if(b._inc!==A){var O=b._refresh(b._node);if(nr(b,"length",O.length),!b.$$length||O.length<b.$$length)for(var Q=O.length;Q in b;Q++)Object.prototype.hasOwnProperty.call(b,Q)&&delete b[Q];o(O,b),b._inc=A}}J.prototype.item=function(b){return _(this),this[b]||null},u(J,ee);function V(){}function K(b,A){for(var O=b.length;O--;)if(b[O]===A)return O}function ie(b,A,O,Q){if(Q?A[K(A,Q)]=O:A[A.length++]=O,b){O.ownerElement=b;var le=b.ownerDocument;le&&(Q&&Pe(le,b,Q),Ce(le,b,O))}}function ae(b,A,O){var Q=K(A,O);if(Q>=0){for(var le=A.length-1;Q<le;)A[Q]=A[++Q];if(A.length=le,b){var Ee=b.ownerDocument;Ee&&(Pe(Ee,b,O),O.ownerElement=null)}}else throw new q(H,new Error(b.tagName+"@"+O))}V.prototype={length:0,item:ee.prototype.item,getNamedItem:function(b){for(var A=this.length;A--;){var O=this[A];if(O.nodeName==b)return O}},setNamedItem:function(b){var A=b.ownerElement;if(A&&A!=this._ownerElement)throw new q(P);var O=this.getNamedItem(b.nodeName);return ie(this._ownerElement,this,b,O),O},setNamedItemNS:function(b){var A=b.ownerElement,O;if(A&&A!=this._ownerElement)throw new q(P);return O=this.getNamedItemNS(b.namespaceURI,b.localName),ie(this._ownerElement,this,b,O),O},removeNamedItem:function(b){var A=this.getNamedItem(b);return ae(this._ownerElement,this,A),A},removeNamedItemNS:function(b,A){var O=this.getNamedItemNS(b,A);return ae(this._ownerElement,this,O),O},getNamedItemNS:function(b,A){for(var O=this.length;O--;){var Q=this[O];if(Q.localName==A&&Q.namespaceURI==b)return Q}return null}};function oe(){}oe.prototype={hasFeature:function(b,A){return!0},createDocument:function(b,A,O){var Q=new pe;if(Q.implementation=this,Q.childNodes=new ee,Q.doctype=O||null,O&&Q.appendChild(O),A){var le=Q.createElementNS(b,A);Q.appendChild(le)}return Q},createDocumentType:function(b,A,O){var Q=new p;return Q.name=b,Q.nodeName=b,Q.publicId=A||"",Q.systemId=O||"",Q}};function ne(){}ne.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(b,A){return ot(this,b,A)},replaceChild:function(b,A){ot(this,b,A,Se),A&&this.removeChild(A)},removeChild:function(b){return Ae(this,b)},appendChild:function(b){return this.insertBefore(b,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(b){return tr(this.ownerDocument||this,this,b)},normalize:function(){for(var b=this.firstChild;b;){var A=b.nextSibling;A&&A.nodeType==w&&b.nodeType==w?(this.removeChild(A),b.appendData(A.data)):(b.normalize(),b=A)}},isSupported:function(b,A){return this.ownerDocument.implementation.hasFeature(b,A)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(b){for(var A=this;A;){var O=A._nsMap;if(O){for(var Q in O)if(Object.prototype.hasOwnProperty.call(O,Q)&&O[Q]===b)return Q}A=A.nodeType==m?A.ownerDocument:A.parentNode}return null},lookupNamespaceURI:function(b){for(var A=this;A;){var O=A._nsMap;if(O&&Object.prototype.hasOwnProperty.call(O,b))return O[b];A=A.nodeType==m?A.ownerDocument:A.parentNode}return null},isDefaultNamespace:function(b){var A=this.lookupPrefix(b);return A==null}};function ge(b){return b=="<"&&"&lt;"||b==">"&&"&gt;"||b=="&"&&"&amp;"||b=='"'&&"&quot;"||"&#"+b.charCodeAt()+";"}o(d,ne),o(d,ne.prototype);function Fe(b,A){if(A(b))return!0;if(b=b.firstChild)do if(Fe(b,A))return!0;while(b=b.nextSibling)}function pe(){this.ownerDocument=this}function Ce(b,A,O){b&&b._inc++;var Q=O.namespaceURI;Q===t.XMLNS&&(A._nsMap[O.prefix?O.localName:""]=O.value)}function Pe(b,A,O,Q){b&&b._inc++;var le=O.namespaceURI;le===t.XMLNS&&delete A._nsMap[O.prefix?O.localName:""]}function Ke(b,A,O){if(b&&b._inc){b._inc++;var Q=A.childNodes;if(O)Q[Q.length++]=O;else{for(var le=A.firstChild,Ee=0;le;)Q[Ee++]=le,le=le.nextSibling;Q.length=Ee,delete Q[Q.length]}}}function Ae(b,A){var O=A.previousSibling,Q=A.nextSibling;return O?O.nextSibling=Q:b.firstChild=Q,Q?Q.previousSibling=O:b.lastChild=O,A.parentNode=null,A.previousSibling=null,A.nextSibling=null,Ke(b.ownerDocument,b),A}function ze(b){return b&&(b.nodeType===ne.DOCUMENT_NODE||b.nodeType===ne.DOCUMENT_FRAGMENT_NODE||b.nodeType===ne.ELEMENT_NODE)}function ft(b){return b&&(De(b)||Le(b)||st(b)||b.nodeType===ne.DOCUMENT_FRAGMENT_NODE||b.nodeType===ne.COMMENT_NODE||b.nodeType===ne.PROCESSING_INSTRUCTION_NODE)}function st(b){return b&&b.nodeType===ne.DOCUMENT_TYPE_NODE}function De(b){return b&&b.nodeType===ne.ELEMENT_NODE}function Le(b){return b&&b.nodeType===ne.TEXT_NODE}function _e(b,A){var O=b.childNodes||[];if(e(O,De)||st(A))return!1;var Q=e(O,st);return!(A&&Q&&O.indexOf(Q)>O.indexOf(A))}function bt(b,A){var O=b.childNodes||[];function Q(Ee){return De(Ee)&&Ee!==A}if(e(O,Q))return!1;var le=e(O,st);return!(A&&le&&O.indexOf(le)>O.indexOf(A))}function Ge(b,A,O){if(!ze(b))throw new q(F,"Unexpected parent node type "+b.nodeType);if(O&&O.parentNode!==b)throw new q(H,"child not in parent");if(!ft(A)||st(A)&&b.nodeType!==ne.DOCUMENT_NODE)throw new q(F,"Unexpected node type "+A.nodeType+" for parent node type "+b.nodeType)}function se(b,A,O){var Q=b.childNodes||[],le=A.childNodes||[];if(A.nodeType===ne.DOCUMENT_FRAGMENT_NODE){var Ee=le.filter(De);if(Ee.length>1||e(le,Le))throw new q(F,"More than one element or text in fragment");if(Ee.length===1&&!_e(b,O))throw new q(F,"Element in fragment can not be inserted before doctype")}if(De(A)&&!_e(b,O))throw new q(F,"Only one element can be added and only after doctype");if(st(A)){if(e(Q,st))throw new q(F,"Only one doctype is allowed");var We=e(Q,De);if(O&&Q.indexOf(We)<Q.indexOf(O))throw new q(F,"Doctype can only be inserted before an element");if(!O&&We)throw new q(F,"Doctype can not be appended since element is present")}}function Se(b,A,O){var Q=b.childNodes||[],le=A.childNodes||[];if(A.nodeType===ne.DOCUMENT_FRAGMENT_NODE){var Ee=le.filter(De);if(Ee.length>1||e(le,Le))throw new q(F,"More than one element or text in fragment");if(Ee.length===1&&!bt(b,O))throw new q(F,"Element in fragment can not be inserted before doctype")}if(De(A)&&!bt(b,O))throw new q(F,"Only one element can be added and only after doctype");if(st(A)){if(e(Q,function(Nt){return st(Nt)&&Nt!==O}))throw new q(F,"Only one doctype is allowed");var We=e(Q,De);if(O&&Q.indexOf(We)<Q.indexOf(O))throw new q(F,"Doctype can only be inserted before an element")}}function ot(b,A,O,Q){Ge(b,A,O),b.nodeType===ne.DOCUMENT_NODE&&(Q||se)(b,A,O);var le=A.parentNode;if(le&&le.removeChild(A),A.nodeType===N){var Ee=A.firstChild;if(Ee==null)return A;var We=A.lastChild}else Ee=We=A;var gt=O?O.previousSibling:b.lastChild;Ee.previousSibling=gt,We.nextSibling=O,gt?gt.nextSibling=Ee:b.firstChild=Ee,O==null?b.lastChild=We:O.previousSibling=We;do{Ee.parentNode=b;var Nt=b.ownerDocument||b;_t(Ee,Nt)}while(Ee!==We&&(Ee=Ee.nextSibling));return Ke(b.ownerDocument||b,b),A.nodeType==N&&(A.firstChild=A.lastChild=null),A}function _t(b,A){if(b.ownerDocument!==A){if(b.ownerDocument=A,b.nodeType===f&&b.attributes)for(var O=0;O<b.attributes.length;O++){var Q=b.attributes.item(O);Q&&(Q.ownerDocument=A)}for(var le=b.firstChild;le;)_t(le,A),le=le.nextSibling}}function Oe(b,A){A.parentNode&&A.parentNode.removeChild(A),A.parentNode=b,A.previousSibling=b.lastChild,A.nextSibling=null,A.previousSibling?A.previousSibling.nextSibling=A:b.firstChild=A,b.lastChild=A,Ke(b.ownerDocument,b,A);var O=b.ownerDocument||b;return _t(A,O),A}pe.prototype={nodeName:"#document",nodeType:Z,doctype:null,documentElement:null,_inc:1,insertBefore:function(b,A){if(b.nodeType==N){for(var O=b.firstChild;O;){var Q=O.nextSibling;this.insertBefore(O,A),O=Q}return b}return ot(this,b,A),_t(b,this),this.documentElement===null&&b.nodeType===f&&(this.documentElement=b),b},removeChild:function(b){return this.documentElement==b&&(this.documentElement=null),Ae(this,b)},replaceChild:function(b,A){ot(this,b,A,Se),_t(b,this),A&&this.removeChild(A),De(b)&&(this.documentElement=b)},importNode:function(b,A){return Sr(this,b,A)},getElementById:function(b){var A=null;return Fe(this.documentElement,function(O){if(O.nodeType==f&&O.getAttribute("id")==b)return A=O,!0}),A},getElementsByClassName:function(b){var A=r(b);return new J(this,function(O){var Q=[];return A.length>0&&Fe(O.documentElement,function(le){if(le!==O&&le.nodeType===f){var Ee=le.getAttribute("class");if(Ee){var We=b===Ee;if(!We){var gt=r(Ee);We=A.every(l(gt))}We&&Q.push(le)}}}),Q})},createElement:function(b){var A=new Re;A.ownerDocument=this,A.nodeName=b,A.tagName=b,A.localName=b,A.childNodes=new ee;var O=A.attributes=new V;return O._ownerElement=A,A},createDocumentFragment:function(){var b=new W;return b.ownerDocument=this,b.childNodes=new ee,b},createTextNode:function(b){var A=new xt;return A.ownerDocument=this,A.appendData(b),A},createComment:function(b){var A=new wn;return A.ownerDocument=this,A.appendData(b),A},createCDATASection:function(b){var A=new x;return A.ownerDocument=this,A.appendData(b),A},createProcessingInstruction:function(b,A){var O=new te;return O.ownerDocument=this,O.tagName=O.nodeName=O.target=b,O.nodeValue=O.data=A,O},createAttribute:function(b){var A=new St;return A.ownerDocument=this,A.name=b,A.nodeName=b,A.localName=b,A.specified=!0,A},createEntityReference:function(b){var A=new z;return A.ownerDocument=this,A.nodeName=b,A},createElementNS:function(b,A){var O=new Re,Q=A.split(":"),le=O.attributes=new V;return O.childNodes=new ee,O.ownerDocument=this,O.nodeName=A,O.tagName=A,O.namespaceURI=b,Q.length==2?(O.prefix=Q[0],O.localName=Q[1]):O.localName=A,le._ownerElement=O,O},createAttributeNS:function(b,A){var O=new St,Q=A.split(":");return O.ownerDocument=this,O.nodeName=A,O.name=A,O.namespaceURI=b,O.specified=!0,Q.length==2?(O.prefix=Q[0],O.localName=Q[1]):O.localName=A,O}},u(pe,ne);function Re(){this._nsMap={}}Re.prototype={nodeType:f,hasAttribute:function(b){return this.getAttributeNode(b)!=null},getAttribute:function(b){var A=this.getAttributeNode(b);return A&&A.value||""},getAttributeNode:function(b){return this.attributes.getNamedItem(b)},setAttribute:function(b,A){var O=this.ownerDocument.createAttribute(b);O.value=O.nodeValue=""+A,this.setAttributeNode(O)},removeAttribute:function(b){var A=this.getAttributeNode(b);A&&this.removeAttributeNode(A)},appendChild:function(b){return b.nodeType===N?this.insertBefore(b,null):Oe(this,b)},setAttributeNode:function(b){return this.attributes.setNamedItem(b)},setAttributeNodeNS:function(b){return this.attributes.setNamedItemNS(b)},removeAttributeNode:function(b){return this.attributes.removeNamedItem(b.nodeName)},removeAttributeNS:function(b,A){var O=this.getAttributeNodeNS(b,A);O&&this.removeAttributeNode(O)},hasAttributeNS:function(b,A){return this.getAttributeNodeNS(b,A)!=null},getAttributeNS:function(b,A){var O=this.getAttributeNodeNS(b,A);return O&&O.value||""},setAttributeNS:function(b,A,O){var Q=this.ownerDocument.createAttributeNS(b,A);Q.value=Q.nodeValue=""+O,this.setAttributeNode(Q)},getAttributeNodeNS:function(b,A){return this.attributes.getNamedItemNS(b,A)},getElementsByTagName:function(b){return new J(this,function(A){var O=[];return Fe(A,function(Q){Q!==A&&Q.nodeType==f&&(b==="*"||Q.tagName==b)&&O.push(Q)}),O})},getElementsByTagNameNS:function(b,A){return new J(this,function(O){var Q=[];return Fe(O,function(le){le!==O&&le.nodeType===f&&(b==="*"||le.namespaceURI===b)&&(A==="*"||le.localName==A)&&Q.push(le)}),Q})}},pe.prototype.getElementsByTagName=Re.prototype.getElementsByTagName,pe.prototype.getElementsByTagNameNS=Re.prototype.getElementsByTagNameNS,u(Re,ne);function St(){}St.prototype.nodeType=m,u(St,ne);function nn(){}nn.prototype={data:"",substringData:function(b,A){return this.data.substring(b,b+A)},appendData:function(b){b=this.data+b,this.nodeValue=this.data=b,this.length=b.length},insertData:function(b,A){this.replaceData(b,0,A)},appendChild:function(b){throw new Error(G[F])},deleteData:function(b,A){this.replaceData(b,A,"")},replaceData:function(b,A,O){var Q=this.data.substring(0,b),le=this.data.substring(b+A);O=Q+O+le,this.nodeValue=this.data=O,this.length=O.length}},u(nn,ne);function xt(){}xt.prototype={nodeName:"#text",nodeType:w,splitText:function(b){var A=this.data,O=A.substring(b);A=A.substring(0,b),this.data=this.nodeValue=A,this.length=A.length;var Q=this.ownerDocument.createTextNode(O);return this.parentNode&&this.parentNode.insertBefore(Q,this.nextSibling),Q}},u(xt,nn);function wn(){}wn.prototype={nodeName:"#comment",nodeType:R},u(wn,nn);function x(){}x.prototype={nodeName:"#cdata-section",nodeType:y},u(x,nn);function p(){}p.prototype.nodeType=Y,u(p,ne);function g(){}g.prototype.nodeType=j,u(g,ne);function S(){}S.prototype.nodeType=T,u(S,ne);function z(){}z.prototype.nodeType=C,u(z,ne);function W(){}W.prototype.nodeName="#document-fragment",W.prototype.nodeType=N,u(W,ne);function te(){}te.prototype.nodeType=L,u(te,ne);function Ne(){}Ne.prototype.serializeToString=function(b,A,O){return Xe.call(b,A,O)},ne.prototype.toString=Xe;function Xe(b,A){var O=[],Q=this.nodeType==9&&this.documentElement||this,le=Q.prefix,Ee=Q.namespaceURI;if(Ee&&le==null){var le=Q.lookupPrefix(Ee);if(le==null)var We=[{namespace:Ee,prefix:null}]}return Ie(this,O,b,A,We),O.join("")}function qe(b,A,O){var Q=b.prefix||"",le=b.namespaceURI;if(!le||Q==="xml"&&le===t.XML||le===t.XMLNS)return!1;for(var Ee=O.length;Ee--;){var We=O[Ee];if(We.prefix===Q)return We.namespace!==le}return!0}function je(b,A,O){b.push(" ",A,'="',O.replace(/[<>&"\t\n\r]/g,ge),'"')}function Ie(b,A,O,Q,le){if(le||(le=[]),Q)if(b=Q(b),b){if(typeof b=="string"){A.push(b);return}}else return;switch(b.nodeType){case f:var Ee=b.attributes,We=Ee.length,ut=b.firstChild,gt=b.tagName;O=t.isHTML(b.namespaceURI)||O;var Nt=gt;if(!O&&!b.prefix&&b.namespaceURI){for(var Rt,Ot=0;Ot<Ee.length;Ot++)if(Ee.item(Ot).name==="xmlns"){Rt=Ee.item(Ot).value;break}if(!Rt)for(var rn=le.length-1;rn>=0;rn--){var an=le[rn];if(an.prefix===""&&an.namespace===b.namespaceURI){Rt=an.namespace;break}}if(Rt!==b.namespaceURI)for(var rn=le.length-1;rn>=0;rn--){var an=le[rn];if(an.namespace===b.namespaceURI){an.prefix&&(Nt=an.prefix+":"+gt);break}}}A.push("<",Nt);for(var pt=0;pt<We;pt++){var rt=Ee.item(pt);rt.prefix=="xmlns"?le.push({prefix:rt.localName,namespace:rt.value}):rt.nodeName=="xmlns"&&le.push({prefix:"",namespace:rt.value})}for(var pt=0;pt<We;pt++){var rt=Ee.item(pt);if(qe(rt,O,le)){var sn=rt.prefix||"",En=rt.namespaceURI;je(A,sn?"xmlns:"+sn:"xmlns",En),le.push({prefix:sn,namespace:En})}Ie(rt,A,O,Q,le)}if(gt===Nt&&qe(b,O,le)){var sn=b.prefix||"",En=b.namespaceURI;je(A,sn?"xmlns:"+sn:"xmlns",En),le.push({prefix:sn,namespace:En})}if(ut||O&&!/^(?:meta|link|img|br|hr|input)$/i.test(gt)){if(A.push(">"),O&&/^script$/i.test(gt))for(;ut;)ut.data?A.push(ut.data):Ie(ut,A,O,Q,le.slice()),ut=ut.nextSibling;else for(;ut;)Ie(ut,A,O,Q,le.slice()),ut=ut.nextSibling;A.push("</",Nt,">")}else A.push("/>");return;case Z:case N:for(var ut=b.firstChild;ut;)Ie(ut,A,O,Q,le.slice()),ut=ut.nextSibling;return;case m:return je(A,b.name,b.value);case w:return A.push(b.data.replace(/[<&>]/g,ge));case y:return A.push("<![CDATA[",b.data,"]]>");case R:return A.push("<!--",b.data,"-->");case Y:var rr=b.publicId,pn=b.systemId;if(A.push("<!DOCTYPE ",b.name),rr)A.push(" PUBLIC ",rr),pn&&pn!="."&&A.push(" ",pn),A.push(">");else if(pn&&pn!=".")A.push(" SYSTEM ",pn,">");else{var et=b.internalSubset;et&&A.push(" [",et,"]"),A.push(">")}return;case L:return A.push("<?",b.target," ",b.data,"?>");case C:return A.push("&",b.nodeName,";");default:A.push("??",b.nodeName)}}function Sr(b,A,O){var Q;switch(A.nodeType){case f:Q=A.cloneNode(!1),Q.ownerDocument=b;case N:break;case m:O=!0;break}if(Q||(Q=A.cloneNode(!1)),Q.ownerDocument=b,Q.parentNode=null,O)for(var le=A.firstChild;le;)Q.appendChild(Sr(b,le,O)),le=le.nextSibling;return Q}function tr(b,A,O){var Q=new A.constructor;for(var le in A)if(Object.prototype.hasOwnProperty.call(A,le)){var Ee=A[le];typeof Ee!="object"&&Ee!=Q[le]&&(Q[le]=Ee)}switch(A.childNodes&&(Q.childNodes=new ee),Q.ownerDocument=b,Q.nodeType){case f:var We=A.attributes,gt=Q.attributes=new V,Nt=We.length;gt._ownerElement=Q;for(var Rt=0;Rt<Nt;Rt++)Q.setAttributeNode(tr(b,We.item(Rt),!0));break;case m:O=!0}if(O)for(var Ot=A.firstChild;Ot;)Q.appendChild(tr(b,Ot,O)),Ot=Ot.nextSibling;return Q}function nr(b,A,O){b[A]=O}try{if(Object.defineProperty){let b=function(A){switch(A.nodeType){case f:case N:var O=[];for(A=A.firstChild;A;)A.nodeType!==7&&A.nodeType!==8&&O.push(b(A)),A=A.nextSibling;return O.join("");default:return A.nodeValue}};Object.defineProperty(J.prototype,"length",{get:function(){return _(this),this.$$length}}),Object.defineProperty(ne.prototype,"textContent",{get:function(){return b(this)},set:function(A){switch(this.nodeType){case f:case N:for(;this.firstChild;)this.removeChild(this.firstChild);(A||String(A))&&this.appendChild(this.ownerDocument.createTextNode(A));break;default:this.data=A,this.value=A,this.nodeValue=A}}}),nr=function(A,O,Q){A["$$"+O]=Q}}}catch{}return on.DocumentType=p,on.DOMException=q,on.DOMImplementation=oe,on.Element=Re,on.Node=ne,on.NodeList=ee,on.XMLSerializer=Ne,on}var lr={},$i={},Is;function zc(){return Is||(Is=1,(function(i){var e=yi().freeze;i.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),i.HTML_ENTITIES=e({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:`
`,nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),i.entityMap=i.HTML_ENTITIES})($i)),$i}var Xr={},Bs;function jc(){if(Bs)return Xr;Bs=1;var i=yi().NAMESPACE,e=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,t=new RegExp("[\\-\\.0-9"+e.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),n=new RegExp("^"+e.source+t.source+"*(?::"+e.source+t.source+"*)?$"),a=0,s=1,r=2,l=3,o=4,u=5,d=6,f=7;function m(F,H){this.message=F,this.locator=H,Error.captureStackTrace&&Error.captureStackTrace(this,m)}m.prototype=new Error,m.prototype.name=m.name;function w(){}w.prototype={parse:function(F,H,P){var q=this.domBuilder;q.startDocument(),Y(H,H={}),y(F,H,P,q,this.errorHandler),q.endDocument()}};function y(F,H,P,q,ee){function J(Oe){if(Oe>65535){Oe-=65536;var Re=55296+(Oe>>10),St=56320+(Oe&1023);return String.fromCharCode(Re,St)}else return String.fromCharCode(Oe)}function _(Oe){var Re=Oe.slice(1,-1);return Object.hasOwnProperty.call(P,Re)?P[Re]:Re.charAt(0)==="#"?J(parseInt(Re.substr(1).replace("x","0x"))):(ee.error("entity not found:"+Oe),Oe)}function V(Oe){if(Oe>pe){var Re=F.substring(pe,Oe).replace(/&#?\w+;/g,_);ne&&K(pe),q.characters(Re,0,Oe-pe),pe=Oe}}function K(Oe,Re){for(;Oe>=ae&&(Re=oe.exec(F));)ie=Re.index,ae=ie+Re[0].length,ne.lineNumber++;ne.columnNumber=Oe-ie+1}for(var ie=0,ae=0,oe=/.*(?:\r\n?|\n)|.*$/g,ne=q.locator,ge=[{currentNSMap:H}],Fe={},pe=0;;){try{var Ce=F.indexOf("<",pe);if(Ce<0){if(!F.substr(pe).match(/^\s*$/)){var Pe=q.doc,Ke=Pe.createTextNode(F.substr(pe));Pe.appendChild(Ke),q.currentElement=Ke}return}switch(Ce>pe&&V(Ce),F.charAt(Ce+1)){case"/":var Ge=F.indexOf(">",Ce+3),Ae=F.substring(Ce+2,Ge).replace(/[ \t\n\r]+$/g,""),ze=ge.pop();Ge<0?(Ae=F.substring(Ce+2).replace(/[\s<].*/,""),ee.error("end tag name: "+Ae+" is not complete:"+ze.tagName),Ge=Ce+1+Ae.length):Ae.match(/\s</)&&(Ae=Ae.replace(/[\s<].*/,""),ee.error("end tag name: "+Ae+" maybe not complete"),Ge=Ce+1+Ae.length);var ft=ze.localNSMap,st=ze.tagName==Ae,De=st||ze.tagName&&ze.tagName.toLowerCase()==Ae.toLowerCase();if(De){if(q.endElement(ze.uri,ze.localName,Ae),ft)for(var Le in ft)Object.prototype.hasOwnProperty.call(ft,Le)&&q.endPrefixMapping(Le);st||ee.fatalError("end tag name: "+Ae+" is not match the current start tagName:"+ze.tagName)}else ge.push(ze);Ge++;break;case"?":ne&&K(Ce),Ge=j(F,Ce,q);break;case"!":ne&&K(Ce),Ge=N(F,Ce,q,ee);break;default:ne&&K(Ce);var _e=new $,bt=ge[ge.length-1].currentNSMap,Ge=T(F,Ce,_e,bt,_,ee),se=_e.length;if(!_e.closed&&Z(F,Ge,_e.tagName,Fe)&&(_e.closed=!0,P.nbsp||ee.warning("unclosed xml attribute")),ne&&se){for(var Se=C(ne,{}),ot=0;ot<se;ot++){var _t=_e[ot];K(_t.offset),_t.locator=C(ne,{})}q.locator=Se,L(_e,q,bt)&&ge.push(_e),q.locator=ne}else L(_e,q,bt)&&ge.push(_e);i.isHTML(_e.uri)&&!_e.closed?Ge=R(F,Ge,_e.tagName,_,q):Ge++}}catch(Oe){if(Oe instanceof m)throw Oe;ee.error("element parse error: "+Oe),Ge=-1}Ge>pe?pe=Ge:V(Math.max(Ce,pe)+1)}}function C(F,H){return H.lineNumber=F.lineNumber,H.columnNumber=F.columnNumber,H}function T(F,H,P,q,ee,J){function _(ne,ge,Fe){P.attributeNames.hasOwnProperty(ne)&&J.fatalError("Attribute "+ne+" redefined"),P.addValue(ne,ge.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,ee),Fe)}for(var V,K,ie=++H,ae=a;;){var oe=F.charAt(ie);switch(oe){case"=":if(ae===s)V=F.slice(H,ie),ae=l;else if(ae===r)ae=l;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(ae===l||ae===s)if(ae===s&&(J.warning('attribute value must after "="'),V=F.slice(H,ie)),H=ie+1,ie=F.indexOf(oe,H),ie>0)K=F.slice(H,ie),_(V,K,H-1),ae=u;else throw new Error("attribute value no end '"+oe+"' match");else if(ae==o)K=F.slice(H,ie),_(V,K,H),J.warning('attribute "'+V+'" missed start quot('+oe+")!!"),H=ie+1,ae=u;else throw new Error('attribute value must after "="');break;case"/":switch(ae){case a:P.setTagName(F.slice(H,ie));case u:case d:case f:ae=f,P.closed=!0;case o:case s:break;case r:P.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return J.error("unexpected end of input"),ae==a&&P.setTagName(F.slice(H,ie)),ie;case">":switch(ae){case a:P.setTagName(F.slice(H,ie));case u:case d:case f:break;case o:case s:K=F.slice(H,ie),K.slice(-1)==="/"&&(P.closed=!0,K=K.slice(0,-1));case r:ae===r&&(K=V),ae==o?(J.warning('attribute "'+K+'" missed quot(")!'),_(V,K,H)):((!i.isHTML(q[""])||!K.match(/^(?:disabled|checked|selected)$/i))&&J.warning('attribute "'+K+'" missed value!! "'+K+'" instead!!'),_(K,K,H));break;case l:throw new Error("attribute value missed!!")}return ie;case"":oe=" ";default:if(oe<=" ")switch(ae){case a:P.setTagName(F.slice(H,ie)),ae=d;break;case s:V=F.slice(H,ie),ae=r;break;case o:var K=F.slice(H,ie);J.warning('attribute "'+K+'" missed quot(")!!'),_(V,K,H);case u:ae=d;break}else switch(ae){case r:P.tagName,(!i.isHTML(q[""])||!V.match(/^(?:disabled|checked|selected)$/i))&&J.warning('attribute "'+V+'" missed value!! "'+V+'" instead2!!'),_(V,V,H),H=ie,ae=s;break;case u:J.warning('attribute space is required"'+V+'"!!');case d:ae=s,H=ie;break;case l:ae=o,H=ie;break;case f:throw new Error("elements closed character '/' and '>' must be connected to")}}ie++}}function L(F,H,P){for(var q=F.tagName,ee=null,oe=F.length;oe--;){var J=F[oe],_=J.qName,V=J.value,ne=_.indexOf(":");if(ne>0)var K=J.prefix=_.slice(0,ne),ie=_.slice(ne+1),ae=K==="xmlns"&&ie;else ie=_,K=null,ae=_==="xmlns"&&"";J.localName=ie,ae!==!1&&(ee==null&&(ee={},Y(P,P={})),P[ae]=ee[ae]=V,J.uri=i.XMLNS,H.startPrefixMapping(ae,V))}for(var oe=F.length;oe--;){J=F[oe];var K=J.prefix;K&&(K==="xml"&&(J.uri=i.XML),K!=="xmlns"&&(J.uri=P[K||""]))}var ne=q.indexOf(":");ne>0?(K=F.prefix=q.slice(0,ne),ie=F.localName=q.slice(ne+1)):(K=null,ie=F.localName=q);var ge=F.uri=P[K||""];if(H.startElement(ge,ie,q,F),F.closed){if(H.endElement(ge,ie,q),ee)for(K in ee)Object.prototype.hasOwnProperty.call(ee,K)&&H.endPrefixMapping(K)}else return F.currentNSMap=P,F.localNSMap=ee,!0}function R(F,H,P,q,ee){if(/^(?:script|textarea)$/i.test(P)){var J=F.indexOf("</"+P+">",H),_=F.substring(H+1,J);if(/[&<]/.test(_))return/^script$/i.test(P)?(ee.characters(_,0,_.length),J):(_=_.replace(/&#?\w+;/g,q),ee.characters(_,0,_.length),J)}return H+1}function Z(F,H,P,q){var ee=q[P];return ee==null&&(ee=F.lastIndexOf("</"+P+">"),ee<H&&(ee=F.lastIndexOf("</"+P)),q[P]=ee),ee<H}function Y(F,H){for(var P in F)Object.prototype.hasOwnProperty.call(F,P)&&(H[P]=F[P])}function N(F,H,P,q){var ee=F.charAt(H+2);switch(ee){case"-":if(F.charAt(H+3)==="-"){var J=F.indexOf("-->",H+4);return J>H?(P.comment(F,H+4,J-H-4),J+3):(q.error("Unclosed comment"),-1)}else return-1;default:if(F.substr(H+3,6)=="CDATA["){var J=F.indexOf("]]>",H+9);return P.startCDATA(),P.characters(F,H+9,J-H-9),P.endCDATA(),J+3}var _=G(F,H),V=_.length;if(V>1&&/!doctype/i.test(_[0][0])){var K=_[1][0],ie=!1,ae=!1;V>3&&(/^public$/i.test(_[2][0])?(ie=_[3][0],ae=V>4&&_[4][0]):/^system$/i.test(_[2][0])&&(ae=_[3][0]));var oe=_[V-1];return P.startDTD(K,ie,ae),P.endDTD(),oe.index+oe[0].length}}return-1}function j(F,H,P){var q=F.indexOf("?>",H);if(q){var ee=F.substring(H,q).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return ee?(ee[0].length,P.processingInstruction(ee[1],ee[2]),q+2):-1}return-1}function $(){this.attributeNames={}}$.prototype={setTagName:function(F){if(!n.test(F))throw new Error("invalid tagName:"+F);this.tagName=F},addValue:function(F,H,P){if(!n.test(F))throw new Error("invalid attribute:"+F);this.attributeNames[F]=this.length,this[this.length++]={qName:F,value:H,offset:P}},length:0,getLocalName:function(F){return this[F].localName},getLocator:function(F){return this[F].locator},getQName:function(F){return this[F].qName},getURI:function(F){return this[F].uri},getValue:function(F){return this[F].value}};function G(F,H){var P,q=[],ee=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(ee.lastIndex=H,ee.exec(F);P=ee.exec(F);)if(q.push(P),P[1])return q}return Xr.XMLReader=w,Xr.ParseError=m,Xr}var Fs;function Vc(){if(Fs)return lr;Fs=1;var i=yi(),e=kl(),t=zc(),n=jc(),a=e.DOMImplementation,s=i.NAMESPACE,r=n.ParseError,l=n.XMLReader;function o(T){return T.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function u(T){this.options=T||{locator:{}}}u.prototype.parseFromString=function(T,L){var R=this.options,Z=new l,Y=R.domBuilder||new f,N=R.errorHandler,j=R.locator,$=R.xmlns||{},G=/\/x?html?$/.test(L),F=G?t.HTML_ENTITIES:t.XML_ENTITIES;j&&Y.setDocumentLocator(j),Z.errorHandler=d(N,Y,j),Z.domBuilder=R.domBuilder||Y,G&&($[""]=s.HTML),$.xml=$.xml||s.XML;var H=R.normalizeLineEndings||o;return T&&typeof T=="string"?Z.parse(H(T),$,F):Z.errorHandler.error("invalid doc source"),Y.doc};function d(T,L,R){if(!T){if(L instanceof f)return L;T=L}var Z={},Y=T instanceof Function;R=R||{};function N(j){var $=T[j];!$&&Y&&($=T.length==2?function(G){T(j,G)}:T),Z[j]=$&&function(G){$("[xmldom "+j+"]	"+G+w(R))}||function(){}}return N("warning"),N("error"),N("fatalError"),Z}function f(){this.cdata=!1}function m(T,L){L.lineNumber=T.lineNumber,L.columnNumber=T.columnNumber}f.prototype={startDocument:function(){this.doc=new a().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(T,L,R,Z){var Y=this.doc,N=Y.createElementNS(T,R||L),j=Z.length;C(this,N),this.currentElement=N,this.locator&&m(this.locator,N);for(var $=0;$<j;$++){var T=Z.getURI($),G=Z.getValue($),R=Z.getQName($),F=Y.createAttributeNS(T,R);this.locator&&m(Z.getLocator($),F),F.value=F.nodeValue=G,N.setAttributeNode(F)}},endElement:function(T,L,R){var Z=this.currentElement;Z.tagName,this.currentElement=Z.parentNode},startPrefixMapping:function(T,L){},endPrefixMapping:function(T){},processingInstruction:function(T,L){var R=this.doc.createProcessingInstruction(T,L);this.locator&&m(this.locator,R),C(this,R)},ignorableWhitespace:function(T,L,R){},characters:function(T,L,R){if(T=y.apply(this,arguments),T){if(this.cdata)var Z=this.doc.createCDATASection(T);else var Z=this.doc.createTextNode(T);this.currentElement?this.currentElement.appendChild(Z):/^\s*$/.test(T)&&this.doc.appendChild(Z),this.locator&&m(this.locator,Z)}},skippedEntity:function(T){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(T){(this.locator=T)&&(T.lineNumber=0)},comment:function(T,L,R){T=y.apply(this,arguments);var Z=this.doc.createComment(T);this.locator&&m(this.locator,Z),C(this,Z)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(T,L,R){var Z=this.doc.implementation;if(Z&&Z.createDocumentType){var Y=Z.createDocumentType(T,L,R);this.locator&&m(this.locator,Y),C(this,Y),this.doc.doctype=Y}},warning:function(T){console.warn("[xmldom warning]	"+T,w(this.locator))},error:function(T){console.error("[xmldom error]	"+T,w(this.locator))},fatalError:function(T){throw new r(T,this.locator)}};function w(T){if(T)return`
@`+(T.systemId||"")+"#[line:"+T.lineNumber+",col:"+T.columnNumber+"]"}function y(T,L,R){return typeof T=="string"?T.substr(L,R):T.length>=L+R||L?new java.lang.String(T,L,R)+"":T}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(T){f.prototype[T]=function(){return null}});function C(T,L){T.currentElement?T.currentElement.appendChild(L):T.doc.appendChild(L)}return lr.__DOMHandler=f,lr.normalizeLineEndings=o,lr.DOMParser=u,lr}var Ls;function Gc(){if(Ls)return sr;Ls=1;var i=kl();return sr.DOMImplementation=i.DOMImplementation,sr.XMLSerializer=i.XMLSerializer,sr.DOMParser=Vc().DOMParser,sr}var Rs=Gc();function Xc(i){return i=i.split(";")[0].trim(),new mt("http://www.w3.org/ns/iana/media-types/"+i+"#Resource")}function Wc(i,e){i.callbacks={};for(var t=e.length-1;t>=0;t--)i.callbacks[e[t]]=[];i.addHook=function(n){i.callbacks[n]||(i.callbacks[n]=[])},i.addCallback=function(n,a){i.callbacks[n].push(a)},i.removeCallback=function(n,a){for(var s=0;s<i.callbacks[n].length;s++)if(i.callbacks[n][s].name===a)return i.callbacks[n].splice(s,1),!0;return!1},i.insertCallback=function(n,a){i.callbacks[n].unshift(a)},i.fireCallbacks=function(a,s){var r=[],l=[],o=i.callbacks[a].length,u;let d;for(u=o-1;u>=0;u--)d=i.callbacks[a][u],d&&d.apply(i,s)&&r.push(d);for(u=r.length-1;u>=0;u--)l.push(r[u]);for(u=o;u<i.callbacks[a].length;u++)l.push(i.callbacks[a][u]);i.callbacks[a]=l}}function Qc(i,e){e=e||{};var t=[];e&&e.selfClosing&&e.selfClosing.split(" ").forEach(function(a){t[a]=!0});var n=[];return e&&e.skipAttributes&&e.skipAttributes.split(" ").forEach(function(a){n[a]=!0}),Sl(i,e,t,n)}function Sl(i,e,t,n){var a,s="",r=[!1];if(typeof i.nodeType>"u")return s;if(i.nodeType===1){if(i.hasAttribute("class")&&e&&e.classWithChildText&&i.matches(e.classWithChildText.class))s+=i.querySelector(e.classWithChildText.element).textContent;else if(!(e&&e.skipNodeWithClass&&i.matches("."+e.skipNodeWithClass))){var l=i.nodeName.toLowerCase();s+="<"+l;var o=[];for(a=i.attributes.length-1;a>=0;a--){var u=i.attributes[a];if(!(n&&n.length>0&&n[u.name])&&!/^\d+$/.test(u.name)){if(u.name==="class"&&e&&e.replaceClassItemWith&&u.value.split(" ").indexOf(e.replaceClassItemWith.source)>-1){var d=new RegExp(e.replaceClassItemWith.source,"g");u.value=u.value.replace(d,e.replaceClassItemWith.target).trim()}u.name==="class"&&e&&e.skipClassWithValue&&e.skipClassWithValue===u.value||o.push(u.name+"='"+u.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&quot;")+"'")}}if(o.length>0&&(e&&e.sortAttributes&&o.sort(function(m,w){return m.toLowerCase().localeCompare(w.toLowerCase())}),s+=" "+o.join(" ")),t&&t.ename)s+=" />";else{for(s+=">",s+=l==="html"?`
  `:"",r.push(l==="style"||l==="script"),a=0;a<i.childNodes.length;a++)s+=Sl(i.childNodes[a]);r.pop(),s+=l==="body"?"</"+l+`>
`:"</"+l+">"}}}else if(i.nodeType===8)s+="<!--"+i.nodeValue+"-->";else if(i.nodeType===3||i.nodeType===4){var f=i.nodeValue.replace(/\n+$/,"");s+=r[r.length-1]?f:f.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}else console.log("Warning; Cannot handle serialising nodes of type: "+i.nodeType),console.log(i);return s}function Mi(i,e,t,n){var a=function(l){return l.termType==="BlankNode"?null:l},s=function(l){var o=t.statementsMatching(l).map(function(u){return""+a(u.subject)+" "+a(u.predicate)+" "+a(u.object)}).concat(t.statementsMatching(void 0,void 0,l).map(function(u){return""+a(u.subject)+" "+a(u.predicate)+" "+a(u.object)}));return o.sort(),o.join(`
`)};const r=Object.prototype.hasOwnProperty.call(t,"compareTerms")?t.compareTerms(i,e):i.compareTerm(e);return i.termType==="BlankNode"&&e.termType==="BlankNode"?r===0?0:s(i)>s(e)?1:s(i)<s(e)?-1:r:n&&i.uri&&e.uri?(n[i.uri]||i.uri).localeCompare(n[e.uri]||e.uri):r}function Yc(i,e,t,n){return Mi(i.subject,e.subject,t,n)||Mi(i.predicate,e.predicate,t,n)||Mi(i.object,e.object,t,n)}function Wn(i,e){var t;if(e=e||{},typeof module<"u"&&module&&module.exports){var n=new Rs.DOMParser().parseFromString(i,e.contentType||"application/xhtml+xml");return n}else typeof window<"u"&&window.DOMParser?t=new window.DOMParser:t=new Rs.DOMParser;return t.parseFromString(i,"application/xml")}function na(i,e){for(var t=0;t<i.length;t++)if(i[t].subject.equals(e.subject)&&i[t].predicate.equals(e.predicate)&&i[t].object.equals(e.object)&&i[t].why.equals(e.why)){i.splice(t,1);return}throw new Error("RDFArrayRemove: Array did not contain "+e+" "+e.why)}function Zc(i){var e=""+i+`
`;if(!i.stack)return e+`No stack available.
`;for(var t=i.stack.toString().split(`
`),n=[],a=0;a<t.length;a++){var s=t[a];if(s.indexOf("ecmaunit.js")>-1)break;s.charAt(0)=="("&&(s="function"+s);var r=s.split("@");n.push(r)}for(var a=0;a<n.length;a++)e+="  "+n[a][1]+`
    `+n[a][0];return e}function Il(i=Mt){return{boolean:i.namedNode("http://www.w3.org/2001/XMLSchema#boolean"),dateTime:i.namedNode("http://www.w3.org/2001/XMLSchema#dateTime"),decimal:i.namedNode("http://www.w3.org/2001/XMLSchema#decimal"),double:i.namedNode("http://www.w3.org/2001/XMLSchema#double"),integer:i.namedNode("http://www.w3.org/2001/XMLSchema#integer"),langString:i.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),string:i.namedNode("http://www.w3.org/2001/XMLSchema#string")}}Il(Mt);function Bl(i){return new wa(i)}class wa{constructor(e){re(this,"_notQNameChars",`	\r
 !"#$%&'()*,+/;<=>?@[\\]^\`{|}~`),re(this,"_notNameChars",this._notQNameChars+":"),re(this,"validPrefix",new RegExp(/^[a-zA-Z][a-zA-Z0-9]*$/)),re(this,"forbidden1",new RegExp(/[\\"\b\f\r\v\t\n\u0080-\uffff]/gm)),re(this,"forbidden3",new RegExp(/[\\"\b\f\r\v\u0080-\uffff]/gm)),this.flags="",this.base=null,this.prefixes=[],this.namespaces=[];const t=Object.keys(_s());for(const n in t){const a=_s()[t[n]](""),s=t[n];this.prefixes[a]=s,this.namespaces[s]=a}this.suggestPrefix("rdf","http://www.w3.org/1999/02/22-rdf-syntax-ns#"),this.suggestPrefix("xml","reserved:reservedForFutureUse"),this.namespacesUsed=[],this.keywords=["a"],this.prefixchars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",this.incoming=null,this.formulas=[],this.store=e,this.rdfFactory=e.rdfFactory||Mt,this.xsd=Il(this.rdfFactory)}setBase(e){return this.base=e,this}setFlags(e){return this.flags=e||"",this}toStr(e){var t=e.toNT();return e.termType==="Graph"&&(this.formulas[t]=e),t}fromStr(e){if(e[0]==="{"){var t=this.formulas[e];return t||console.log("No formula object for "+e),t}return this.store.fromNT(e)}setNamespaces(e){for(var t in e)this.setPrefix(t,e[t]);return this}setPrefix(e,t){if(e.slice(0,7)!=="default"&&e.slice(0,2)!=="ns"&&!(!e||!t)){for(let n in this.prefixes)this.prefixes[n]==e&&delete this.prefixes[n];this.prefixes[t]=e,this.namespaces[e]=t}}suggestPrefix(e,t){e.slice(0,7)!=="default"&&e.slice(0,2)!=="ns"&&(!e||!t||e in this.namespaces||t in this.prefixes||(this.prefixes[t]=e,this.namespaces[e]=t))}suggestNamespaces(e){for(var t in e)this.suggestPrefix(t,e[t]);return this}checkIntegrity(){var e,t;for(e in this.namespaces)if(this.prefixes[this.namespaces[e]]!==e)throw new Error("Serializer integity error 1: "+e+", "+this.namespaces[e]+", "+this.prefixes[this.namespaces[e]]+"!");for(t in this.prefixes)if(this.namespaces[this.prefixes[t]]!==t)throw new Error("Serializer integity error 2: "+t+", "+this.prefixs[t]+", "+this.namespaces[this.prefixes[t]]+"!")}makeUpPrefix(e){var t=e;function n(o){return!this.validPrefix.test(o)||o==="ns"||o in this.namespaces?!1:(this.prefixes[e]=o,this.namespaces[o]=e,o)}var a=n.bind(this);"#/".indexOf(t[t.length-1])>=0&&(t=t.slice(0,-1));var s=t.lastIndexOf("/");s>=0&&(t=t.slice(s+1));for(var r=0;r<t.length&&this.prefixchars.indexOf(t[r])>=0;)r++;if(t=t.slice(0,r),t.length<6&&a(t))return t;if(a(t.slice(0,3)))return t.slice(0,3);if(a(t.slice(0,2)))return t.slice(0,2);if(a(t.slice(0,4)))return t.slice(0,4);if(a(t.slice(0,1)))return t.slice(0,1);if(a(t.slice(0,5)))return t.slice(0,5);this.validPrefix.test(t)||(t="n");for(var l=0;;l++)if(a(t.slice(0,3)+l))return t.slice(0,3)+l}rootSubjects(e){for(var t={},n={},a={},s=0;s<e.length;s++){var r=e[s],l=function(C){t.hasOwnProperty(C)||(t[C]=[]),t[C].push(r.subject)},o=[r.subject,r.predicate,r.object];o.map(function(C){C.termType==="BlankNode"?a[C.toNT()]=!0:C.termType==="Collection"&&C.elements.forEach(function(T){l(T)})}),l(e[s].object);var u=n[this.toStr(r.subject)];u||(u=[]),u.push(r),n[this.toStr(r.subject)]=u}var d=[];for(var f in n)if(n.hasOwnProperty(f)){var m=this.fromStr(f);if(m.termType!=="BlankNode"||!t[m]||t[m].length!==1){d.push(m);continue}}this.incoming=t;for(var w={},y=0;y<d.length;y++)w[d[y].toNT()]=!0;return{roots:d,subjects:n,rootsHash:w,incoming:t}}toN3(e){return this.statementsToN3(e.statements)}isValidPNLocal(e){if(e.length===0)return!0;if(e[e.length-1]===".")return!1;for(var t=0;t<e.length;t++){var n=e[t];if(n!=="."&&this._notNameChars.indexOf(n)>=0)return!1}return!0}explicitURI(e){return this.flags.indexOf("r")<0&&this.base?e=Ri(this.base,e):this.flags.indexOf("u")>=0?e=Kc(e):e=Jc(decodeURI(e)),"<"+e+">"}statementsToNTriples(e){var t=e.slice();t.sort();for(var n="",a="http://www.w3.org/1999/02/22-rdf-syntax-ns#",s=this,r=this.store,l=this.rdfFactory,o=function(m){if(m.termType!=="Collection")return s.atomicTermToN3(m);for(var w=m.elements,y=r.sym(a+"nill"),C=w.length-1;C>=0;C--){var T=l.blankNode();n+=o(T)+" "+o(r.sym(a+"first"))+" "+o(w[C])+`.
`,n+=o(T)+" "+o(r.sym(a+"rest"))+" "+o(y)+`.
`,y=T}return s.atomicTermToN3(y)},u=0;u<t.length;u++){var d=t[u],f="";f+=o(d.subject)+" ",f+=o(d.predicate)+" ",f+=o(d.object)+" ",this.flags.indexOf("q")>=0&&(f+=o(d.why)+" "),f+=`.
`,n+=f}return n}statementsToN3(e){var t=4,n=80,a=this.store,s={"http://www.w3.org/1999/02/22-rdf-syntax-ns#type":"aaa:00"},r=function($,G){return Yc($,G,a,s)};e.sort(r),this.base&&!this.defaultNamespace&&(this.defaultNamespace=this.base+"#");var l={};this.flags.indexOf("s")<0&&(l["http://www.w3.org/2002/07/owl#sameAs"]="="),this.flags.indexOf("t")<0&&(l["http://www.w3.org/1999/02/22-rdf-syntax-ns#type"]="a"),this.flags.indexOf("i")<0&&(l["http://www.w3.org/2000/10/swap/log#implies"]="=>");var o=function($){for(var G="",F=0;F<$;F++)G+=" ";return G},u=function($){for(var G="",F=0;F<$.length;F++){var H=$[F],P=typeof H=="string"?H:u(H);if(F!==0){var q=G.slice(-1)||" ";P===","||P===";"||P==="."&&!"0123456789.:".includes(q)||(G+=" ")}G+=P}return G},d=function($,G){var F="",H=1e5;G===void 0&&(G=-1);for(var P=0;P<$.length;P++){var q=$[P];if(typeof q!="string"){var ee=d(q,G+1);if(ee.length<10*(n-t*G)&&ee.indexOf('"""')<0){var J=u(q);J.length<n-t*G&&(q=J,ee="")}ee&&(H=1e4),F+=ee}if(typeof q=="string"){if(q.length===1&&F.slice(-1)===`
`&&",.;".indexOf(q)>=0){F=F.slice(0,-1),q=="."&&"0123456789.:".includes(F.charAt(F.length-1))&&(F+=" ",H+=1),F+=q+`
`,H+=1;continue}if(H<t*G+4||H+q.length+1<n&&";.".indexOf(F[F.length-2])<0)F=F.slice(0,-1)+" "+q+`
`,H+=q.length+1;else{let _=o(t*G)+q;F+=_+`
`,H=_.length,G<0&&(F+=`
`,H=1e5)}}}return F};function f($){for(var G=this.rootSubjects($),F=G.roots,H=[],P=0;P<F.length;P++){var q=F[P];H.push(w(q,G))}return H}var m=f.bind(this);function w($,G){return $.termType==="BlankNode"&&!G.incoming[$]?L($,G,!0).concat(["."]):[Z($,G)].concat([C($,G)]).concat(["."])}function y($,G){var F=[],H=null,P=G.subjects[this.toStr($)]||[];if(typeof P>"u")throw new Error("Cant find statements for "+$);for(var q=[],ee=0;ee<P.length;ee++){var J=P[ee];J.predicate.uri===H?q.push(","):(H&&(F=F.concat([q]).concat([";"]),q=[]),F.push(l[J.predicate.uri]?l[J.predicate.uri]:Z(J.predicate,G))),H=J.predicate.uri,q.push(L(J.object,G))}return F=F.concat([q]),F}var C=y.bind(this);function T($,G,F){return $.termType==="BlankNode"&&(F||G.rootsHash[$.toNT()]===void 0)?G.subjects[this.toStr($)]?["[",C($,G),"]"]:"[]":Z($,G)}var L=T.bind(this);function R($,G){var F,H;switch($.termType){case"Graph":return H=["{"],H=H.concat(m($.statements)),H.concat(["}"]);case"Collection":for(H=["("],F=0;F<$.elements.length;F++)H.push([L($.elements[F],G)]);return H.push(")"),H;default:return this.atomicTermToN3($)}}wa.prototype.termToN3=Z;var Z=R.bind(this);function Y(){var $="";this.flags.indexOf("d")<0&&this.defaultNamespace&&($+="@prefix : "+this.explicitURI(this.defaultNamespace)+`.
`);for(var G in this.prefixes)this.prefixes.hasOwnProperty(G)&&this.namespacesUsed[G]&&($+="@prefix "+this.prefixes[G]+": "+this.explicitURI(G)+`.
`);return $+`
`}var N=Y.bind(this),j=m(e);return N()+d(j)}atomicTermToN3(e,t){switch(e.termType){case"BlankNode":case"Variable":return e.toNT();case"Literal":var n=e.value;if(typeof n!="string")throw new TypeError("Value of RDF literal node must be a string");if(e.datatype&&this.flags.indexOf("x")<0)switch(e.datatype.uri){case"http://www.w3.org/2001/XMLSchema#integer":return n;case"http://www.w3.org/2001/XMLSchema#decimal":return n.indexOf(".")<0&&(n+=".0"),n;case"http://www.w3.org/2001/XMLSchema#double":{const s=n.toLowerCase().indexOf("e")>0;return n.indexOf(".")<0&&!s&&(n+=".0"),s||(n+="e0"),n}case"http://www.w3.org/2001/XMLSchema#boolean":return e.value==="1"?"true":"false"}var a=this.stringToN3(e.value,this.flags);return e.language?a+="@"+e.language:e.datatype.equals(this.xsd.string)||(a+="^^"+this.atomicTermToN3(e.datatype,t)),a;case"NamedNode":return this.symbolToN3(e);case"DefaultGraph":return"";default:throw new Error("Internal: atomicTermToN3 cannot handle "+e+" of termType: "+e.termType)}}stringToN3(e,t){t||(t="e");var n="",a,s,r,l,o;for(e.length>20&&e.slice(-1)!=='"'&&t.indexOf("n")<0&&(e.indexOf(`
`)>0||e.indexOf('"')>0)?(l='"""',o=this.forbidden3):(l='"',o=this.forbidden1),a=0;a<e.length;){o.lastIndex=0;var u=o.exec(e.slice(a));if(u==null)break;s=a+o.lastIndex-1,n+=e.slice(a,s);var d=e[s];d==='"'&&l==='"""'&&e.slice(s,s+3)!=='"""'?n+=d:(r=`\b\f\r	\v
\\"`.indexOf(d),r>=0?n+="\\"+'bfrtvn\\"'[r]:t.indexOf("e")>=0?n+="\\u"+("000"+d.charCodeAt(0).toString(16).toLowerCase()).slice(-4):n+=d),a=s+1}return l+n+e.slice(a)+l}symbolToN3(e){var t=e.uri,n=t.indexOf("#");if(n<0&&this.flags.indexOf("/")<0&&(n=t.lastIndexOf("/")),n>=0&&this.flags.indexOf("p")<0&&(t.indexOf("http")===0||t.indexOf("ws")===0||t.indexOf("file")===0)){var a=t.slice(n+1),s=t.slice(0,n+1),r=t.indexOf("://")+4,l=this.base?this.base.slice(0,Math.max(this.base.lastIndexOf("/"),this.base.lastIndexOf("#"))+1):null,o=l&&s===l,u=this.flags.indexOf("o")>=0&&a.indexOf(".")>=0,d=!o&&!u&&s.length>r&&this.isValidPNLocal(a);if(d){if(this.defaultNamespace&&this.defaultNamespace===s&&this.flags.indexOf("d")<0)return this.flags.indexOf("k")>=0&&this.keyords.indexOf(a)<0?a:":"+a;var f=this.prefixes[s];if(f||(f=this.makeUpPrefix(s)),f)return this.namespacesUsed[s]=!0,f+":"+a}}return this.explicitURI(t)}writeStore(e){var t=this.store,n=t.fetcher,a=n&&n.appNode,s=this.store.index[3];for(var r in s){var l=t.fromNT(r);a&&l.equals(a)||e(`
`+this.atomicTermToN3(l)+" "+this.atomicTermToN3(t.sym("http://www.w3.org/2000/10/swap/log#semantics"))+" { "+this.statementsToN3(t.statementsMatching(void 0,void 0,void 0,l))+` }.
`)}t.statementsMatching(void 0,t.sym("http://www.w3.org/2007/ont/link#requestedURI")).map(function(d){e(`
<`+d.object.value+`> log:metadata {
`);var f=t.statementsMatching(void 0,void 0,void 0,d.subject);e(this.statementsToN3(this.statementsToN3(f))),e(`}.
`)});var o=[];a&&o.push(a);var u=[];o.map(function(d){u=u.concat(t.statementsMatching(void 0,void 0,void 0,d))}),e(this.statementsToN3(u))}statementsToXML(e){var t=4,n=80,a=[];a["http://www.w3.org/1999/02/22-rdf-syntax-ns#"]=!0;var s="http://www.w3.org/1999/02/22-rdf-syntax-ns#_",r=function(H){for(var P="",q=0;q<H;q++)P+=" ";return P},l=function(H){for(var P="",q=0;q<H.length;q++){var ee=H[q],J=typeof ee=="string"?ee:l(ee);P+=J}return P},o=function(H,P){var q="",ee,J=1e5;P||(P=0);for(var _=0;_<H.length;_++){var V=H[_];if(typeof V!="string"){var K=o(V,P+1);K.length<10*(n-t*P)&&K.indexOf('"""')<0&&(ee=l(V),ee.length<n-t*P&&(V="   "+ee,K="")),K&&(J=1e4),q+=K}typeof V=="string"&&(J<t*P+4?(q=q.slice(0,-1)+" "+V+`
`,J+=V.length+1):(ee=r(t*P)+V,q+=ee+`
`,J=ee.length))}return q};function u(H){this.suggestPrefix("rdf","http://www.w3.org/1999/02/22-rdf-syntax-ns#");for(var P=this.rootSubjects(H),q=P.roots,ee=[],J=0;J<q.length;J++){var _=q[J];ee.push(C(_,P))}return ee}var d=u.bind(this);function f(H){return typeof H>"u"?"@@@undefined@@@@":H.replace(/[&<"]/g,function(P){switch(P[0]){case"&":return"&amp;";case"<":return"&lt;";case'"':return"&quot;"}})}function m(H){return f(this.base?Ri(this.base,H.uri):H.uri)}var w=m.bind(this);function y(H,P){var q=[],ee,J,_,V,K=P.subjects[this.toStr(H)];if(typeof K>"u")return R(H,P);K.sort(function(Fe,pe){var Ce=Fe.predicate.uri,Pe=pe.predicate.uri;if(Ce.substring(0,s.length)===s||Pe.substring(0,s.length)===s)return Ce.localeCompare(Pe);var Ke=Ce.substring(s.length),Ae=Pe.substring(s.length),ze=parseInt(Ke,10),ft=parseInt(Ae,10);return isNaN(ze)||isNaN(ft)||ze!==Ke||ft!==Ae?Ce.localeCompare(Pe):ze-ft});for(var ie=0;ie<K.length;ie++){if(_=K[ie],_.predicate.uri==="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"&&!ee&&_.object.termType==="NamedNode"){ee=_.object;continue}if(V=_.predicate,V.uri.substr(0,s.length)===s){var ae=V.uri.substr(s.length),oe=parseInt(ae,10);ae===oe.toString()&&(V=this.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#li"))}switch(J=Y(V),_.object.termType){case"BlankNode":P.incoming[_.object].length===1?q=q.concat(["<"+J+' rdf:parseType="Resource">',C(_.object,P),"</"+J+">"]):q=q.concat(["<"+J+' rdf:nodeID="'+_.object.toNT().slice(2)+'"/>']);break;case"NamedNode":q=q.concat(["<"+J+' rdf:resource="'+w(_.object)+'"/>']);break;case"Literal":q=q.concat(["<"+J+(_.object.language?' xml:lang="'+_.object.language+'"':_.object.datatype.equals(this.xsd.string)?"":' rdf:datatype="'+f(_.object.datatype.uri)+'"')+">"+f(_.object.value)+"</"+J+">"]);break;case"Collection":q=q.concat(["<"+J+' rdf:parseType="Collection">',T(_.object,P),"</"+J+">"]);break;default:throw new Error("Can't serialize object of type "+_.object.termType+" into XML")}}var ne=ee?Y(ee):"rdf:Description",ge="";return H.termType==="BlankNode"?(!P.incoming[H]||P.incoming[H].length!==1)&&(ge=' rdf:nodeID="'+H.toNT().slice(2)+'"'):ge=' rdf:about="'+w(H)+'"',["<"+ne+ge+">"].concat([q]).concat(["</"+ne+">"])}var C=y.bind(this);function T(H,P){for(var q=[],ee=0;ee<H.elements.length;ee++)q.push(C(H.elements[ee],P));return q}function L(H,P){var q=[],ee=P.subjects[this.toStr(H)];if(!ee)return q;ee.sort();for(var J=0;J<ee.length;J++){var _=ee[J];switch(_.object.termType){case"BlankNode":P.rootsHash[_.object.toNT()]?q=q.concat(["<"+Y(_.predicate)+' rdf:nodeID="'+_.object.toNT().slice(2)+'">',"</"+Y(_.predicate)+">"]):q=q.concat(["<"+Y(_.predicate)+' rdf:parseType="Resource">',R(_.object,P),"</"+Y(_.predicate)+">"]);break;case"NamedNode":q=q.concat(["<"+Y(_.predicate)+' rdf:resource="'+w(_.object)+'"/>']);break;case"Literal":q=q.concat(["<"+Y(_.predicate)+(_.object.language?' xml:lang="'+_.object.language+'"':_.object.datatype.equals(this.xsd.string)?"":' rdf:datatype="'+f(_.object.datatype.value)+'"')+">"+f(_.object.value)+"</"+Y(_.predicate)+">"]);break;case"Collection":q=q.concat(["<"+Y(_.predicate)+' rdf:parseType="Collection">',T(_.object,P),"</"+Y(_.predicate)+">"]);break;default:throw new Error("Can't serialize object of type "+_.object.termType+" into XML")}}return q}var R=L.bind(this);function Z(H){var P=H.uri,q=P.indexOf("#");if(q<0&&this.flags.indexOf("/")<0&&(q=P.lastIndexOf("/")),q<0)throw new Error("Cannot make qname out of <"+P+">");for(var ee=q+1;ee<P.length;ee++)if(this._notNameChars.indexOf(P[ee])>=0)throw new Error('Invalid character "'+P[ee]+'" cannot be in XML qname for URI: '+P);var J=P.slice(q+1),_=P.slice(0,q+1);if(this.defaultNamespace&&this.defaultNamespace===_&&this.flags.indexOf("d")<0)return J;var V=this.prefixes[_];return V||(V=this.makeUpPrefix(_)),a[_]=!0,V+":"+J}var Y=Z.bind(this),N=d(e),j="<rdf:RDF";this.defaultNamespace&&(j+=' xmlns="'+f(this.defaultNamespace)+'"');for(var $ in a)if(a.hasOwnProperty($)){var G=this.base&&this.flags.includes("z")?Ri(this.base,$):$;j+=`
 xmlns:`+this.prefixes[$]+'="'+f(G)+'"'}j+=">";var F=[j,N,"</rdf:RDF>"];return o(F,-1)}statementsToJsonld(e){const t=this.statementsToN3(e),n=Pc.parse(t);return JSON.stringify(n,null,2)}}function Jc(i){return encodeURI(i)}function Kc(i){for(var e="",t,n=0;n<i.length;n++)t=i.charCodeAt(n),t>65535?e+="\\U"+("00000000"+t.toString(16)).slice(-8):t>126?e+="\\u"+("0000"+t.toString(16)).slice(-4):e+=i[n];return e}function Tr(i,e,t,n,a,s){t=t||i?.value;const r=s||{};n=n||In;var l=void 0;try{var o=Bl(e);r.flags&&o.setFlags(r.flags);var u=e.statementsMatching(void 0,void 0,void 0,i);switch("namespaces"in e&&o.suggestNamespaces(e.namespaces),r.namespaces&&o.setNamespaces(r.namespaces),o.setBase(t),n){case xr:return l=o.statementsToXML(u),d(null,l);case xl:case Nc:return l=o.statementsToN3(u),d(null,l);case In:case _c:return o.setFlags("si"+(r.flags?" "+r.flags:"")),l=o.statementsToN3(u),d(null,l);case Tc:return o.setFlags("deinprstux"),l=o.statementsToNTriples(u),d(null,l);case Ji:return o.setFlags("si dr"+(r.flags?" "+r.flags:"")),l=o.statementsToJsonld(u),d(null,l);case ea:case Ki:return o.setFlags("deinprstux q"),l=o.statementsToNTriples(u),d(null,l);default:throw new Error("Serialize: Content-type "+n+" not supported for data write.")}}catch(f){if(a)return a(f,void 0);throw f}function d(f,m){if(a){a(f,m);return}else return m}}const eh=["blankNode","defaultGraph","literal","namedNode","quad","variable","supports"],Wr={first:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",rest:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",nil:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"};function Fl(i,e,t){const n=[];return t.reduce((a,s,r,l)=>{n.push(i.quad(a,i.namedNode(Wr.first),l[r]));let o;return r<l.length-1?(o=i.blankNode(),n.push(i.quad(a,i.namedNode(Wr.rest),o))):n.push(i.quad(a,i.namedNode(Wr.rest),i.namedNode(Wr.nil))),o},e),n}function Bt(i,e,t=0){var n=i.length;for(t<0&&(t=n+t);t<n;t++)if(i[t]===e)return t;return-1}class Ar extends Ye{constructor(e=[],t=[],n=[],a=[],s={}){super(""),this.statements=e,this.constraints=t,this.initBindings=n,this.optional=a,re(this,"termType",Dr),re(this,"classOrder",Zt.Graph),re(this,"fetcher",void 0),re(this,"isVar",0),re(this,"ns",xe),re(this,"rdfFactory",void 0),this.rdfFactory=s&&s.rdfFactory||Mt;for(const r of eh)this[r]=(...l)=>this.rdfFactory[r](...l)}add(e,t,n,a){return arguments.length===1&&e.forEach(s=>this.add(s.subject,s.predicate,s.object,s.graph)),this.statements.push(this.rdfFactory.quad(e,t,n,a))}addStatement(e){return this.add(e)}bnode(e){return this.rdfFactory.blankNode(e)}addAll(e){e.forEach(t=>{this.add(t.subject,t.predicate,t.object,t.graph)})}any(e,t,n,a){const s=this.anyStatementMatching(e,t,n,a);return s==null?null:e==null?s.subject:t==null?s.predicate:n==null?s.object:null}anyValue(e,t,n,a){const s=this.any(e,t,n,a);return s?s.value:void 0}anyJS(e,t,n,a){const s=this.any(e,t,n,a);return s?Ye.toJS(s):void 0}anyStatementMatching(e,t,n,a){let s=this.statementsMatching(e,t,n,a,!0);if(!(!s||s.length===0))return s[0]}id(e){return this.rdfFactory.id(e)}statementsMatching(e,t,n,a,s){const r=this.statements.filter(l=>(!e||e.equals(l.subject))&&(!t||t.equals(l.predicate))&&(!n||n.equals(l.object))&&(!a||a.equals(l.graph)));return s?r.length===0?[]:[r[0]]:r}bottomTypeURIs(e){let t,n,a,s,r,l,o,u;t=[];for(let d in e)if(e.hasOwnProperty(d)){for(u=e[d],o=this.each(void 0,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),this.rdfFactory.namedNode(d)),n=!0,s=0,r=o.length;s<r;s++)if(a=o[s],l=a.uri,l in e){n=!1;break}n&&(t[d]=u)}return t}collection(){return new qt}each(e,t,n,a){const s=[];let r=this.statementsMatching(e,t,n,a,!1);if(e==null)for(let l=0,o=r.length;l<o;l++)s.push(r[l].subject);else if(t==null)for(let l=0,o=r.length;l<o;l++)s.push(r[l].predicate);else if(n==null)for(let l=0,o=r.length;l<o;l++)s.push(r[l].object);else if(a==null)for(let l=0,o=r.length;l<o;l++)s.push(new mt(r[l].graph.value));return s}equals(e){return e?this.hashString()===e.hashString():!1}findMembersNT(e){let t,n,a,s,r,l,o,u,d,f,m,w,y,C;w={},w[e.toNT()]=!0,s={},l=this.transitiveClosure(w,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!0);for(let T in l)if(l.hasOwnProperty(T)){o=this.statementsMatching(void 0,this.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),this.fromNT(T));for(let L=0,R=o.length;L<R;L++)y=o[L],s[y.subject.toNT()]=y;u=this.each(void 0,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#domain"),this.fromNT(T));for(let L=0,R=u.length;L<R;L++)for(r=u[L],d=this.statementsMatching(void 0,r),a=0,t=d.length;a<t;a++)y=d[a],s[y.subject.toNT()]=y;f=this.each(void 0,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#range"),this.fromNT(T));for(let L=0,R=f.length;L<R;L++)for(r=f[L],m=this.statementsMatching(void 0,r),C=0,n=m.length;C<n;C++)y=m[C],s[y.object.toNT()]=y}return s}findMemberURIs(e){return this.NTtoURI(this.findMembersNT(e))}findSubClassesNT(e){let t={};return t[e.toNT()]=!0,this.transitiveClosure(t,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!0)}findSuperClassesNT(e){let t={};return t[e.toNT()]=!0,this.transitiveClosure(t,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!1)}findTypesNT(e){let t,n,a,s,r,l,o,u,d;a="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",d=[],s=this.statementsMatching(e,void 0,void 0);for(let f=0,m=s.length;f<m;f++)if(u=s[f],u.predicate.uri===a)d[u.object.toNT()]=u;else{r=this.each(u.predicate,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#domain"));for(let w=0,y=r.length;w<y;w++)n=r[w],d[n.toNT()]=u}l=this.statementsMatching(void 0,void 0,e);for(let f=0,m=l.length;f<m;f++){u=l[f],o=this.each(u.predicate,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#range"));for(let w=0,y=o.length;w<y;w++)t=o[w],d[t.toNT()]=u}return this.transitiveClosure(d,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!1)}findTypeURIs(e){return this.NTtoURI(this.findTypesNT(e))}connectedStatements(e,t,n){n=n||[];let a=[e],s={},r={},l=[],o=this,u=function(d){let f=function(w){w.termType==="BlankNode"&&!s[w.value]&&(s[w.value]=!0,a.push(w))},m=o.statementsMatching(null,null,d,t).concat(o.statementsMatching(d,null,null,t));m=m.filter(function(w){if(n[w.predicate.value])return!1;let y=w.toNT();return r[y]?!1:(r[y]=!0,!0)}),m.forEach(function(w){f(w.subject),f(w.object)}),l=l.concat(m)};for(;a.length;)u(a.shift());return l}formula(e){return new Ar}fromNT(e){let t,n,a;switch(e[0]){case"<":return this.sym(e.slice(1,-1));case'"':if(a=void 0,t=void 0,n=e.lastIndexOf('"'),n<e.length-1)if(e[n+1]==="@")a=e.slice(n+2);else if(e.slice(n+1,n+3)==="^^")t=this.fromNT(e.slice(n+3));else throw new Error("Can't convert string from NT: "+e);return e=e.slice(1,n),e=e.replace(/\\"/g,'"'),e=e.replace(/\\n/g,`
`),e=e.replace(/\\\\/g,"\\"),this.rdfFactory.literal(e,a||t);case"_":return this.rdfFactory.blankNode(e.slice(2));case"?":return new Rn(e.slice(1))}throw new Error("Can't convert from NT: "+e)}holds(e,t,n,a){let s;if(arguments.length===1){if(!e)return!0;if(e instanceof Array){for(s=0;s<e.length;s++)if(!this.holds(e[s]))return!1;return!0}else{if(kc(e))return this.holds(e.subject,e.predicate,e.object,e.graph);if(e.statements)return this.holds(e.statements)}}return this.anyStatementMatching(e,t,n,a)!=null}holdsStatement(e){return this.holds(e.subject,e.predicate,e.object,e.graph)}list(e,t){if(t.rdfFactory.supports.COLLECTIONS){const n=t.rdfFactory.collection();return e.forEach(function(a){n.append(a)}),n}else{const n=t.rdfFactory.blankNode(),a=Fl(t.rdfFactory,n,e);return t.addAll(a),n}}NTtoURI(e){let t,n,a={};for(t in e)e.hasOwnProperty(t)&&(n=e[t],t[0]==="<"&&(a[t.slice(1,-1)]=n));return a}serialize(e,t,n,a){return Tr(n,this,e,t,void 0,a)}substitute(e){let t=this.statements.map(function(a){return a.substitute(e)});const n=new Ar;return n.addAll(t),n}sym(e,t){if(t)throw new Error("This feature (kb.sym with 2 args) is removed. Do not assume prefix mappings.");return this.rdfFactory.namedNode(e)}the(e,t,n,a){return this.any(e,t,n,a)}transitiveClosure(e,t,n){let a,s,r,l,o,u,d={};Object.assign(d,e);let f={};for(;;){if(u=(function(){for(let m in d)if(d.hasOwnProperty(m))return m})(),u==null)return f;for(o=n?this.each(void 0,t,this.fromNT(u)):this.each(this.fromNT(u),t),s=0,r=o.length;s<r;s++)a=o[s],l=a.toNT(),!(l in f)&&(l in d||(d[l]=d[u]));f[u]=d[u],delete d[u]}}topTypeURIs(e){let t,n,a,s,r,l,o,u;o=[];for(a in e)if(e.hasOwnProperty(a)){for(u=e[a],r=0,l=this.each(this.rdfFactory.namedNode(a),this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf")),t=0,s=l.length;t<s;t++)if(n=l[t],n.uri!=="http://www.w3.org/2000/01/rdf-schema#Resource"){r++;break}r||(o[a]=u)}return o["http://www.w3.org/2000/01/rdf-schema#Resource"]&&delete o["http://www.w3.org/2000/01/rdf-schema#Resource"],o["http://www.w3.org/2002/07/owl#Thing"]&&delete o["http://www.w3.org/2002/07/owl#Thing"],o}toString(){return"{"+this.statements.join(`
`)+"}"}variable(e){return new Rn(e)}whether(e,t,n,a){return this.statementsMatching(e,t,n,a,!1).length}}Ye.fromValue=Tl;const Pn={xsd:xe("http://www.w3.org/2001/XMLSchema#")};Ye.toJS=function(i){return va(i)?i.elements.map(Ye.toJS):Nl(i)?i.datatype.equals(Pn.xsd("boolean"))?i.value==="1"||i.value==="true":i.datatype.equals(Pn.xsd("dateTime"))||i.datatype.equals(Pn.xsd("date"))?new Date(i.value):i.datatype.equals(Pn.xsd("integer"))||i.datatype.equals(Pn.xsd("float"))||i.datatype.equals(Pn.xsd("decimal"))?Number(i.value):i.value:i};class th{constructor(e,t){this.pat=new dn,this.vars=[],this.name=e,this.id=t}}function Os(i,e,t,n){function a(N){var j="",$;for($ in N)N.hasOwnProperty($)&&(j+="    "+$+" -> "+N[$]);return j}function s(N){var j="Bindings: ",$,G=N.length;for($=0;$<G;$++)j+=a(N[$][0])+`;
	`;return j}function r(N,j,$,G){var F=$[N];if(F===void 0){if(N.isVar){var H=[];return H[N]=j,[[H,null]]}F=N}if(!F.complexType)return G.redirections[F]&&(F=G.redirections[F]),G.redirections[j]&&(j=G.redirections[j]),F.equals(j)||F.uri&&F.uri===Nr?[[[],null]]:[];if(N instanceof Array)return j instanceof Array?l(N,j,$):[];throw new Error("query.js: oops - code not written yet")}function l(N,j,$,G){var F;if(N.length!==j.length)return[];if(!N.length)return[[[],null]];var H=r(N[0],j[0],$,G);if(H.length===0)return H;var P=[],q,ee=H.length,J,_,V,K,ie,ae;for(q=0;q<ee;q++){J=H[q][0],ae=[];for(K in J)J.hasOwnProperty(K)&&(ae[K]=J[K]);for(K in $)$.hasOwnProperty(K)&&(ae[K]=$[K]);for(F=l(N.slice(1),j.slice(1),ae,G),V=F.length,_=0;_<V;_++){ie=F[_][0];for(K in J)J.hasOwnProperty(K)&&(ie[K]=J[K]);P.push([ie,null])}}return P}function o(N,j){var $=j[N];return $===void 0?N:$}function u(N,j){var $={},G;for(G in N)N.hasOwnProperty(G)&&($[G]=N[G]);for(G in j)j.hasOwnProperty(G)&&($[G]=j[G]);return $}function d(N,j){return this.trunkBindings=j,this.originalCallback=N,this.branches=[],this}d.prototype.checkAllDone=function(){var N;for(N=0;N<this.branches.length;N++)if(!this.branches[N].done)return;this.doCallBacks(this.branches.length-1,this.trunkBindings)},d.prototype.doCallBacks=function(N,j){var $;if(N<0)return this.originalCallback(j);for($=0;$<this.branches[N].results.length;$++)this.doCallBacks(N-1,u(j,this.branches[N].results[$]))};function f(N,j){return this.count=0,this.success=!1,this.done=!1,this.callback=N,this.onDone=j,this}f.prototype.reportMatch=function(N){this.callback(N),this.success=!0},f.prototype.reportDone=function(){this.done=!0,this.onDone!==void 0&&this.onDone()};var m=function(N){return this.count=0,this.done=!1,this.results=[],this.junction=N,N.branches.push(this),this};m.prototype.reportMatch=function(N){this.results.push(N)},m.prototype.reportDone=function(){Xt.debug("Optional branch finished - results.length = "+this.results.length),this.results.length===0&&this.results.push({}),this.done=!0,this.junction.checkAllDone()};function w(N,j,$){var G,F,H,P;for(j.nvars=0,j.index=null,G=[j.subject,j.predicate,j.object,j.why],P=[N.subjectIndex,N.predicateIndex,N.objectIndex,N.whyIndex],H=0;H<4;H++){let q=G[H];if(!(q.uri&&q.uri===Nr))if(q.isVar&&$[q]===void 0)j.nvars++;else{if(q=o(G[H],$),N.redirections[N.id(q)]&&(q=N.redirections[N.id(q)]),F=P[H][N.id(q)],!F)return j.index=[],!1;(j.index===null||j.index.length>F.length)&&(j.index=F)}}return j.index===null&&(j.index=N.statements),!0}function y(N,j){return N.nvars!==j.nvars?N.nvars-j.nvars:N.index.length-j.index.length}var C=0,T=function(N,j,$,G,F,H,P){Xt.debug("Match begins, Branch count now: "+P.count+" for "+P.pattern_debug);var q=j.statements;if(q.length===0){if(Xt.debug("FOUND MATCH WITH BINDINGS:"+a($)),j.optional.length===0)P.reportMatch($);else{Xt.debug("OPTIONAL: "+j.optional);var ee=new d(e,$),J=[],_;for(_=0;_<j.optional.length;_++)J[_]=new m(ee),J[_].pattern_debug=j.optional[_];for(_=0;_<j.optional.length;_++)J[_].count=J[_].count+1,T(N,j.optional[_],$,"",F,e,J[_])}P.count--,Xt.debug("Match ends -- success , Branch count now: "+P.count+" for "+P.pattern_debug);return}var V,K,ie=q.length;if(F){var ae="match"+C++,oe=function(ne,ge){var Fe=ne.uri.split("#")[0];F.nowOrWhenFetched(Fe,void 0,function(pe,Ce,Pe){pe||console.log("Error following link to <"+ne.uri+"> in query: "+Ce),T(N,j,$,G,F,H,P)})};for(K=0;K<ie;K++){if(V=q[K],$[V.subject]!==void 0&&$[V.subject].uri&&F&&F.getState(kn($[V.subject].uri))==="unrequested"){oe($[V.subject],ae);return}if($[V.object]!==void 0&&$[V.object].uri&&F&&F.getState(kn($[V.object].uri))==="unrequested"){oe($[V.object],ae);return}}}R(N,j,$,G,F,H,P)},L=function(N,j){var $=!0,G,F;for(G in N)N.hasOwnProperty(G)&&j[G]&&(F=j[G].test,F&&!F(N[G])&&($=!1));return $},R=function(N,j,$,G,F,H,P){var q=j.statements,ee=q.length,J,_,V,K,ie,ae,oe;for(J=0;J<ee;J++)oe=q[J],w(N,oe,$);q.sort(y),oe=q[0];var ne=N.formula();ne.optional=j.optional,ne.constraints=j.constraints,ne.statements=q.slice(1),Xt.debug(G+"match2 searching "+oe.index.length+" for "+oe+"; bindings so far="+a($));var ge,Fe=oe.index.length,pe,Ce;for(ge=0;ge<Fe;ge++)for(Ce=oe.index[ge],pe=l([oe.subject,oe.predicate,oe.object,oe.why],[Ce.subject,Ce.predicate,Ce.object,Ce.why],$,N),Xt.info(G+" From first: "+pe.length+": "+s(pe)),V=pe.length,_=0;_<V;_++)if(ie=[],ae=pe[_][0],!L(ae,j.constraints))Xt.debug("Branch count CS: "+P.count);else{for(K in ae)ae.hasOwnProperty(K)&&(ie[K]=ae[K]);for(K in $)$.hasOwnProperty(K)&&(ie[K]=$[K]);P.count++,T(N,ne,ie,G+"  ",F,H,P)}P.count--,Xt.debug("Match2 ends, Branch count: "+P.count+" for "+P.pattern_debug),P.count===0&&P.reportDone()},Z=this;Xt.debug("Query on "+this.statements.length);var Y=new f(e,n);Y.count++,i.sync?T(Z,i.pat,i.pat.initBindings,"",t,e,Y):setTimeout(function(){T(Z,i.pat,i.pat.initBindings,"",t,e,Y)},0)}const Ui="http://www.w3.org/2002/07/owl#";function nh(i,e,t,n){var a=i.any(e,t,void 0);return a?(i.equate(a,n),!0):!1}function rh(i,e,t,n){var a=i.any(void 0,t,n);return a?(i.equate(a,e),!0):!1}function Ll(i,e,t,n,a){i.typeCallback&&i.typeCallback(i,n,a);var s=i.classActions[i.id(n)],r=!1;if(s)for(var l=0;l<s.length;l++)r=r||s[l](i,e,t,n,a);return r}class dn extends Ar{constructor(e,t={}){super(void 0,void 0,void 0,void 0,t),re(this,"updater",void 0),re(this,"namespaces",void 0),re(this,"classActions",void 0),re(this,"propertyActions",void 0),re(this,"redirections",void 0),re(this,"aliases",void 0),re(this,"HTTPRedirects",void 0),re(this,"subjectIndex",void 0),re(this,"predicateIndex",void 0),re(this,"objectIndex",void 0),re(this,"whyIndex",void 0),re(this,"index",void 0),re(this,"features",void 0),re(this,"_universalVariables",void 0),re(this,"_existentialVariables",void 0),re(this,"rdfArrayRemove",void 0),re(this,"dataCallbacks",[]),re(this,"dataRemovalCallbacks",[]),this.propertyActions={},this.classActions={},this.redirections=[],this.aliases=[],this.HTTPRedirects=[],this.subjectIndex=[],this.predicateIndex=[],this.objectIndex=[],this.whyIndex=[],this.index=[this.subjectIndex,this.predicateIndex,this.objectIndex,this.whyIndex],this.namespaces={},this.features=e||[],this.rdfArrayRemove=t.rdfArrayRemove||na,t.dataCallback&&(this.dataCallbacks=[t.dataCallback]),t.dataRemovalCallback&&(this.dataRemovalCallbacks=[t.dataRemovalCallback]),this.initPropertyActions(this.features)}static get defaultGraphURI(){return Nr}substitute(e){var t=this.statements.map(function(a){return a.substitute(e)}),n=new dn;return n.add(t),n}addDataCallback(e){this.dataCallbacks.push(e)}addDataRemovalCallback(e){this.dataRemovalCallbacks.push(e)}applyPatch(e,t,n){var a=this,s,r=null;function l(d){if(e.delete){s=e.delete,r&&(s=s.substitute(r)),s=s.statements;var f=[],m=s.map(function(w){var y=a.statementsMatching(w.subject,w.predicate,w.object,t);return y.length===0?(f.push(w),null):y[0]});if(f.length)return n("Could not find to delete: "+f.join(`
 or `));m.map(function(w){a.remove(w)})}e.insert&&(s=e.insert,r&&(s=s.substitute(r)),s=s.statements,s.map(function(w){w.graph=t,a.add(w.subject,w.predicate,w.object,w.graph)})),d()}if(e.where){var o=new th("patch");o.pat=e.where,o.pat.statements.map(function(d){d.graph=Zn(t.value)}),o.sync=!0;var u=[];a.query(o,function(f){u.push(f)},a.fetcher,function(){if(u.length===0)return n("No match found to be patched:"+e.where);if(u.length>1)return n("Patch ambiguous. No patch done.");r=u[0],l(n)})}else l(n)}declareExistential(e){return this._existentialVariables||(this._existentialVariables=[]),this._existentialVariables.push(e),e}initPropertyActions(e){this.propertyActions[this.rdfFactory.id(this.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"))]=[Ll],Bt(e,"sameAs")>=0&&(this.propertyActions[this.rdfFactory.id(this.rdfFactory.namedNode(`${Ui}sameAs`))]=[function(t,n,a,s,r){return t.equate(n,s),!0}]),Bt(e,"InverseFunctionalProperty")>=0&&(this.classActions[this.rdfFactory.id(this.rdfFactory.namedNode(`${Ui}InverseFunctionalProperty`))]=[function(t,n,a,s,r){return t.newPropertyAction(n,rh)}]),Bt(e,"FunctionalProperty")>=0&&(this.classActions[this.rdfFactory.id(this.rdfFactory.namedNode(`${Ui}FunctionalProperty`))]=[function(t,n,a,s,r){return t.newPropertyAction(n,nh)}])}addStatement(e){return this.add(e.subject,e.predicate,e.object,e.graph),this.statements.length}add(e,t,n,a){var s;if(arguments.length===1){if(e instanceof Array)for(s=0;s<e.length;s++)this.add(e[s]);else Vn(e)?this.add(e.subject,e.predicate,e.object,e.graph):di(e)&&this.add(e.statements);return this}var r,l;a||(a=this.fetcher?this.fetcher.appNode:this.rdfFactory.defaultGraph()),typeof e=="string"&&(e=this.rdfFactory.namedNode(e)),t=Ye.fromValue(t);const o=Ye.fromValue(n);if(a=Ye.fromValue(a),!Ic(e))throw new Error("Subject is not a subject type");if(!Bc(t))throw new Error(`Predicate ${t} is not a predicate type`);if(!Sc(o))throw new Error(`Object ${o} is not an object type`);if(!Rc(a))throw new Error("Why is not a graph type");this.predicateCallback&&this.predicateCallback(this,t,a);var u=this.id(this.canon(t));r=this.propertyActions[u];var d=!1;if(r)for(s=0;s<r.length;s++)d=d||r[s](this,e,t,o,a);if(this.holds(e,t,o,a))return null;var f=[this.id(this.canon(e)),u,this.id(this.canon(o)),this.id(this.canon(a))];for(l=this.rdfFactory.quad(e,t,o,a),s=0;s<4;s++){var m=this.index[s],w=f[s];m[w]||(m[w]=[]),m[w].push(l)}this.statements.push(l);for(const y of this.dataCallbacks)y(l);return l}canon(e){if(!e)return e;const t=this.redirections[this.id(e)];if(t)return t;switch(e.termType){case Mn:return new Jt(e.value);case vn:return e;case Ln:return new ya;case bl:return e;case Dr:return e;case er:return new Yt(e.value,e.language,e.datatype);case $n:return new mt(e.value);case gn:return new Rn(e.value);default:throw new Error(`Term Type not recognized for canonization: ${e.termType}`)}}check(){this.checkStatementList(this.statements);for(var e=0;e<4;e++){var t=this.index[e];for(var n in t)t.hasOwnProperty(n)&&this.checkStatementList(t[n],e)}}checkStatementList(e,t){t===void 0&&(t=0);for(var n=["subject","predicate","object","why"],a=" found in "+n[t]+" index.",s,r=0;r<e.length;r++){s=e[r];for(var l=[s.subject,s.predicate,s.object,s.graph],o=function(m,w){for(var y=0;y<m.length;y++)if(m[y].subject.equals(w.subject)&&m[y].predicate.equals(w.predicate)&&m[y].object.equals(w.object)&&m[y].why.equals(w.graph))return!0},u=0;u<4;u++){var d=this.canon(l[u]),f=this.id(d);this.index[u][f]&&o(this.index[u][f],s)}if(!o(this.statements,s))throw new Error("Statement list does not statement "+s+"@"+s.graph+a)}}close(){return this}compareTerms(e,t){return Object.prototype.hasOwnProperty.call(e,"compareTerm")?e.compareTerm(t):Zt[e.termType]<Zt[t.termType]?-1:Zt[e.termType]>Zt[t.termType]?1:e.value<t.value?-1:e.value>t.value?1:0}copyTo(e,t,n){n||(n=[]);var a=this.statementsMatching(e);Bt(n,"two-direction")!==-1&&a.concat(this.statementsMatching(void 0,void 0,e));for(var s=0;s<a.length;s++){var r=a[s];switch(r.object.termType){case"NamedNode":this.add(t,r.predicate,r.object);break;case"Literal":case"BlankNode":case"Collection":this.add(t,r.predicate,r.object.copy(this))}Bt(n,"delete")!==-1&&this.remove(r)}}equate(e,t){const n=this.canon(e),a=this.canon(t);var s=this.compareTerms(n,a);return s?s<0?this.replaceWith(a,n):this.replaceWith(n,a):!0}formula(e){return new dn(e)}get length(){return this.statements.length}match(e,t,n,a){return this.statementsMatching(Ye.fromValue(e),Ye.fromValue(t),Ye.fromValue(n),Ye.fromValue(a))}mentionsURI(e){var t="<"+e+">";return!!this.subjectIndex[t]||!!this.objectIndex[t]||!!this.predicateIndex[t]}newExistential(e){if(!e)return this.bnode();var t=this.sym(e);return this.declareExistential(t)}newPropertyAction(e,t){var n=this.id(e);this.propertyActions[n]||(this.propertyActions[n]=[]),this.propertyActions[n].push(t);for(var a=this.statementsMatching(void 0,e,void 0),s=!1,r=0;r<a.length;r++)s=s||t(this,a[r].subject,e,a[r].object);return s}newUniversal(e){var t=this.sym(e);return this._universalVariables||(this._universalVariables=[]),this._universalVariables.push(t),t}variable(e){return new Rn(e)}nextSymbol(e){for(var t=0;;t++){var n=e.value+"#n"+t;if(!this.mentionsURI(n))return this.sym(n)}}query(e,t,n,a){return Os.call(this,e,t,n,a)}querySync(e){var t=[];function n(r){t.push(r)}function a(){s=!0}var s=!1;if(e.sync=!0,Os.call(this,e,n,null,a),!s)throw new Error("Sync query should have called done function");return t}remove(e){if(e instanceof Array){for(var t=0;t<e.length;t++)this.remove(e[t]);return this}if(di(e))return this.remove(e.statements);var n=this.statementsMatching(e.subject,e.predicate,e.object,e.graph);if(!n.length)throw new Error("Statement to be removed is not on store: "+e);return this.removeStatement(n[0]),this}removeDocument(e){this.removeMetadata(e);for(var t=this.statementsMatching(void 0,void 0,void 0,e).slice(),n=0;n<t.length;n++)this.removeStatement(t[n]);return this.removeMatches(e,null,null),this}removeMetadata(e){const t=this.sym("chrome://TheCurrentSession"),n="http://www.w3.org/2007/ont/link#",a=this.statementsMatching(void 0,this.sym(`${n}requestedURI`),this.rdfFactory.literal(e.value),t).map(l=>l.subject);for(var s=0;s<a.length;s++){const l=a[s];if(l!=null){let o;const u=this.any(l,this.sym(`${n}status`),null,t);if(u!=null){o=this.statementsMatching(u,this.sym(`${n}status`),null,t).slice();for(var r=0;r<o.length;r++)this.removeStatement(o[r])}const d=this.any(l,this.sym(`${n}response`),null,t);if(d!=null){o=this.statementsMatching(d,null,null,t).slice();for(var r=0;r<o.length;r++)this.removeStatement(o[r])}o=this.statementsMatching(l,null,null,t).slice();for(var r=0;r<o.length;r++)this.removeStatement(o[r])}}return this.removeMatches(this.sym(e.value),null,null,t),this}removeMany(e,t,n,a,s){for(var r=this.statementsMatching(e,t,n,a,!1),l=[],o=0;o<r.length;o++)l.push(r[o]);for(s&&(l=l.slice(0,s)),o=0;o<l.length;o++)this.remove(l[o])}removeMatches(e,t,n,a){return this.removeMany(e,t,n,a),this}removeStatement(e){for(var t=[e.subject,e.predicate,e.object,e.graph],n=0;n<4;n++){var a=this.canon(t[n]),s=this.id(a);this.index[n][s]&&this.rdfArrayRemove(this.index[n][s],e)}this.rdfArrayRemove(this.statements,e);for(const r of this.dataRemovalCallbacks)r(e);return this}removeStatements(e){for(var t=0;t<e.length;t++)this.remove(e[t]);return this}replaceWith(e,t){for(var n=this.id(e),a=this.id(t),s=function(l){var o=l[n];if(o){var u=l[a];u?l[a]=o.concat(u):l[a]=o,delete l[n]}},r=0;r<4;r++)s(this.index[r]);if(this.redirections[n]=t,e.value){if(this.aliases[a]||(this.aliases[a]=[]),this.aliases[a].push(e),this.aliases[n])for(r=0;r<this.aliases[n].length;r++)this.redirections[this.id(this.aliases[n][r])]=t,this.aliases[a].push(this.aliases[n][r]);this.add(t,this.sym("http://www.w3.org/2007/ont/link#uri"),e),this.fetcher&&this.fetcher.nowKnownAs(e,t)}return s(this.classActions),s(this.propertyActions),!0}allAliases(e){var t=this.aliases[this.id(this.canon(e))]||[];return t.push(this.canon(e)),t}sameThings(e,t){if(e.equals(t))return!0;var n=this.canon(e);if(!n)return!1;var a=this.canon(t);return a?n.value===a.value:!1}setPrefixForURI(e,t){if(!(e==="tab"&&this.namespaces.tab)&&!(e.slice(0,2)==="ns"||e.slice(0,7)==="default")){for(let n in this.namespaces)this.namespaces[n]==t&&delete this.namespaces[n];this.namespaces[e]=t}}statementsMatching(e,t,n,a,s){var r=[e,t,n,a],l=[],o=[],u=[],d,f;for(d=0;d<4;d++)l[d]=this.canon(Ye.fromValue(r[d])),l[d]&&(u.push(d),o[d]=this.id(l[d]));if(u.length===0)return this.statements;if(u.length===1)return d=u[0],f=this.index[d][o[d]],f&&s&&f.length>1&&(f=f.slice(0,1)),f=f||[],f;var m=1e10,w,y;for(y=0;y<u.length;y++){if(d=u[y],f=this.index[d][o[d]],!f)return[];f.length<m&&(m=f.length,w=y)}for(var C=u[w],T=this.index[C][o[C]],L=u.slice(0,w).concat(u.slice(w+1)),R=[],Z=["subject","predicate","object","why"],Y=0;Y<T.length;Y++){var N=T[Y];for(y=0;y<L.length;y++)if(d=L[y],!this.canon(N[Z[d]]).equals(l[d])){N=null;break}if(N!=null&&(R.push(N),s))break}return R}uris(e){var t=this.canon(e),n=this.aliases[this.id(t)];if(!t.value)return[];var a=[t.value];if(n)for(var s=0;s<n.length;s++)a.push(n[s].uri);return a}serialize(e,t,n,a){const s=a?.namespaces?{...this.namespaces,...a.namespaces}:{...this.namespaces};return a={...a||{},namespaces:s},Tr(n,this,e,t,void 0,a)}}re(dn,"handleRDFType",void 0);dn.handleRDFType=Ll;const _n=xe("http://www.w3.org/1999/02/22-rdf-syntax-ns#");function ih(i,e,t,n){for(const a of i.statementsMatching(t,null,null,n)){const s=new Pt(e,a.predicate,a.object,n);i.remove(a),i.add(s)}for(const a of i.statementsMatching(null,t,null,n))i.remove(a),i.add(new Pt(a.subject,e,a.object,n));for(const a of i.statementsMatching(null,null,t,n))i.remove(a),i.add(new Pt(a.subject,a.predicate,e,n))}function ah(i,e){const t=_n("nil");for(const n of i.statementsMatching(t,null,null,e)){i.remove(n);const a=new qt;i.add(new Pt(a,n.predicate,n.object,e))}for(const n of i.statementsMatching(null,null,t,e))if(!n.predicate.sameTerm(_n("rest"))){i.remove(n);const a=new qt;i.add(new Pt(n.subject,n.predicate,a,e))}}function sh(i,e){function t(a,s,r){const l=i.statementsMatching(a,_n("rest"),null,e);if(l.length!==1)throw new Error(`Bad list structure: no rest at ${a}`);const o=i.statementsMatching(a,_n("first"),null,e);if(o.length!==1)throw new Error(`Bad list structure: rest but ${o.length} firsts at ${a}`);const d=[o[0].object].concat(s),f=r.concat(l).concat(o),m=i.statementsMatching(null,_n("rest"),a,e);if(m.length===0){const y=new qt(d);i.remove(f),ih(i,y,a,e);return}if(m.length!==1)throw new Error(`Bad list structure: ${m.length} pres at ${a}`);const w=m[0].subject;if(w.termType!=="BlankNode")throw new Error(`Bad list element node ${w} type: ${w.termType} `);t(w,d,f)}ah(i,e),i.statementsMatching(null,_n("rest"),_n("nil"),e).forEach(a=>{if(a.subject.termType!=="BlankNode")throw new Error(`Bad list element node ${a.subject} type: ${a.subject.termType} `);t(a.subject,[],[])})}function lh(i){return encodeURI(i)}var oh={encode:function(i){i=i.replace(/\r\n/g,`
`);for(var e="",t=0;t<i.length;t++){var n=i.charCodeAt(t);n<128?e+=String.fromCharCode(n):n>127&&n<2048?(e+=String.fromCharCode(n>>6|192),e+=String.fromCharCode(n&63|128)):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128),e+=String.fromCharCode(n&63|128))}return e},decode:function(i){for(var e="",t=0;t<i.length;){var n=i.charCodeAt(t);n<128?(e+=String.fromCharCode(n),t++):n>191&&n<224?(e+=String.fromCharCode((n&31)<<6|i.charCodeAt(t+1)&63),t+=2):(e+=String.fromCharCode((n&15)<<12|(i.charCodeAt(t+1)&63)<<6|i.charCodeAt(t+2)&63),t+=3)}return e}},Pi="http://www.w3.org/2000/10/swap/log#",ht=function(i){return i},dt=function(i){return i},or=function(i){if(i.length>0)throw"missing.js: oops nnonempty dict not imp";return[]},It=function(i){return i.length},qi=function(i,e,t){if(typeof i.slice>"u")throw"@@ mising.js: No .slice function for "+i+" of type "+typeof i;return typeof t>"u"||t==null?i.slice(e):i.slice(e,t)},vr=Error("dummy error stop iteration"),Qr=function(i){return this.last=0,this.li=i,this.next=function(){if(this.last==this.li.length)throw vr;return this.li[this.last++]},this},Hi=function(i,e){return i.indexOf(e)},Tn=function(i,e){if(!i)throw e?"python Assertion failed: "+e:"(python) Assertion failed."},uh=function(i){return String.fromCharCode(i)};String.prototype.encode=function(i){if(i!="utf-8")throw"UTF8_converter: can only do utf-8";return oh.encode(this)};String.prototype.decode=function(i){if(i!="utf-8")throw"UTF8_converter: can only do utf-8";return this};var zi=function(i,e){return Dt(e,i)},ch=null,hh="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",$s="http://www.w3.org/1999/02/22-rdf-syntax-ns#nil",Ms="http://www.w3.org/2002/07/owl#sameAs",dh="#",fh="http://www.w3.org/2001/XMLSchema#integer",ph="http://www.w3.org/2001/XMLSchema#double",mh="http://www.w3.org/2001/XMLSchema#decimal",gh="http://www.w3.org/2001/XMLSchema#date",vh="http://www.w3.org/2001/XMLSchema#dateTime",Rl=`	\r
 !"#$%&'()*.,+/;<=>?@[\\]^\`{|}~`,qn=Rl+":",ji=new RegExp("^([-+]?[0-9]+)(\\.[0-9]+)?([eE][-+]?[0-9]+)?","g"),Us=new RegExp("^[0-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9](T[0-9][0-9]:[0-9][0-9](:[0-9][0-9](\\.[0-9]*)?)?)?Z?"),yh=new RegExp("[\\s#]"),Vi=new RegExp('[\\\\\\r\\n\\"]',"g"),Gi=new RegExp("^[a-zA-Z0-9]+(-[a-zA-Z0-9]+)*","g");function Yr(i,e){var t=i.charAt(e+1);return t===""||yh.test(t)}function Ea(i,e,t,n,a,s,r,l){return new wh(i,e,t,n,a,s,r,l)}class wh{constructor(e,t,n,a,s,r,l,o){typeof t>"u"&&(t=null),typeof n>"u"&&(n=""),typeof a>"u"&&(a=null),typeof s>"u"&&(s=""),typeof l>"u"&&(l=""),typeof o>"u"&&(o=null),this._bindings=new or([]),this._flags=l,n!=""&&(Tn(n.indexOf(":")>=0,"Document URI not absolute: "+n),this._bindings[""]=n+"#"),this._store=e,s&&e.setGenPrefix(s),this._thisDoc=n,this.source=e.sym(n),this.lines=0,this.statementCount=0,this.hasNil=!1,this.startOfLine=0,this.previousLine=0,this._genPrefix=s,this.keywords=new dt(["a","this","bind","has","is","of","true","false"]),this.keywordsSet=0,this._anonymousNodes=new or([]),this._variables=new or([]),this._parentVariables=new or([]),this._reason=o,this._reason2=null,a?this._baseURI=a:n?this._baseURI=n:this._baseURI=null,Tn(!this._baseURI||this._baseURI.indexOf(":")>=0),this._genPrefix||(this._thisDoc?this._genPrefix=this._thisDoc+"#_g":this._genPrefix=RDFSink_uniqueURI()),t==null?this._thisDoc?this._formula=e.formula(n+"#_formula"):this._formula=e.formula():this._formula=t,this._context=this._formula,this._parentContext=null}here(e){return this._genPrefix+"_L"+this.lines+"C"+(e-this.startOfLine+1)}formula(){return this._formula}loadStream(e){return this.loadBuf(e.read())}loadBuf(e){return this.startDoc(),this.feed(e),this.endDoc()}feed(e){for(var t=e.decode("utf-8"),n=0;n>=0;){var a=this.skipSpace(t,n);if(a<0)return;var n=this.directiveOrStatement(t,a);if(n<0)throw ve(this._thisDoc,this.lines,t,a,"expected directive or statement")}}directiveOrStatement(e,t){var n=this.skipSpace(e,t);if(n<0)return n;var a=this.directive(e,n);if(a>=0)return this.checkDot(e,a);var a=this.statement(e,n);return a>=0?this.checkDot(e,a):a}tok(e,t,n){if(t.slice(n,n+1)=="@")var n=n+1;else if(Bt(this.keywords,e)<0)return-1;var a=n+It(e);return t.slice(n,a)==e&&Rl.indexOf(t.charAt(a))>=0?a:-1}directive(e,t){var o=this.skipSpace(e,t);if(o<0)return o;var n=new dt([]),o=this.tok("bind",e,t);if(o>0)throw ve(this._thisDoc,this.lines,e,t,"keyword bind is obsolete: use @prefix");var o=this.tok("keywords",e,t);if(o>0){var t=this.commaSeparatedList(e,o,n,!1);if(t<0)throw ve(this._thisDoc,this.lines,e,t,"'@keywords' needs comma separated list of words");return this.setKeywords(qi(n,null,null)),t}var o=this.tok("forAll",e,t);if(o>0){var t=this.commaSeparatedList(e,o,n,!0);if(t<0)throw ve(this._thisDoc,this.lines,e,t,"Bad variable list after @forAll");var a=new Qr(n);try{for(;;){var s=a.next();(Bt(this._variables,s)<0||Bt(this._parentVariables,s)>=0)&&(this._variables[s]=this._context.newUniversal(s))}}catch(d){if(d!=vr)throw d}return t}var o=this.tok("forSome",e,t);if(o>0){var t=this.commaSeparatedList(e,o,n,this.uri_ref2);if(t<0)throw ve(this._thisDoc,this.lines,e,t,"Bad variable list after @forSome");var a=new Qr(n);try{for(;;){var s=a.next();this._context.declareExistential(s)}}catch(f){if(f!=vr)throw f}return t}var o=this.tok("prefix",e,t);if(o>=0){var r=new dt([]),t=this.qname(e,o,r);if(t<0)throw ve(this._thisDoc,this.lines,e,o,"expected qname after @prefix");var o=this.uri_ref2(e,t,r);if(o<0)throw ve(this._thisDoc,this.lines,e,t,"expected <uriref> after @prefix _qname_");var l=r[1].uri;if(this._baseURI)var l=zi(this._baseURI,l);else Tn(l.indexOf(":")>=0,"With no base URI, cannot handle relative URI for NS");return Tn(l.indexOf(":")>=0),this._bindings[r[0][0]]=l,this.bind(r[0][0],lh(l)),o}var o=this.tok("base",e,t);if(o>=0){var r=new dt([]),t=this.uri_ref2(e,o,r);if(t<0)throw ve(this._thisDoc,this.lines,e,o,"expected <uri> after @base ");var l=r[0].uri;if(this._baseURI)var l=zi(this._baseURI,l);else throw ve(this._thisDoc,this.lines,e,o,"With no previous base URI, cannot use relative URI in @base  <"+l+">");return Tn(l.indexOf(":")>=0),this._baseURI=l,t}return-1}bind(e,t){e==""||this._store.setPrefixForURI(e,t)}setKeywords(e){e==null?this.keywordsSet=0:(this.keywords=e,this.keywordsSet=1)}startDoc(){}endDoc(){return this.hasNil&&this._store.rdfFactory.supports.COLLECTIONS&&sh(this._store,this.source),this._formula}makeStatement(e){e[0].add(e[2],e[1],e[3],this.source),(e[2].uri&&e[2].uri===$s||e[3].uri&&e[3].uri===$s)&&(this.hasNil=!0),this.statementCount+=1}statement(e,a){var n=new dt([]),a=this.object(e,a,n);if(a<0)return a;var s=this.property_list(e,a,n[0]);if(s<0)throw ve(this._thisDoc,this.lines,e,a,"expected propertylist");return s}subject(e,t,n){return this.item(e,t,n)}verb(e,t,n){var s=this.skipSpace(e,t);if(s<0)return s;var a=new dt([]),s=this.tok("has",e,t);if(s>=0){var t=this.prop(e,s,a);if(t<0)throw ve(this._thisDoc,this.lines,e,s,"expected property after 'has'");return n.push(new ht(["->",a[0]])),t}var s=this.tok("is",e,t);if(s>=0){var t=this.prop(e,s,a);if(t<0)throw ve(this._thisDoc,this.lines,e,s,"expected <property> after 'is'");var s=this.skipSpace(e,t);if(s<0)throw ve(this._thisDoc,this.lines,e,t,"End of file found, expected property after 'is'");var t=s,s=this.tok("of",e,t);if(s<0)throw ve(this._thisDoc,this.lines,e,t,"expected 'of' after 'is' <prop>");return n.push(new ht(["<-",a[0]])),s}var s=this.tok("a",e,t);if(s>=0)return n.push(new ht(["->",this._store.sym(hh)])),s;if(e.slice(t,t+2)=="<=")return n.push(new ht(["<-",this._store.sym(Pi+"implies")])),t+2;if(e.slice(t,t+1)=="=")return e.slice(t+1,t+2)==">"?(n.push(new ht(["->",this._store.sym(Pi+"implies")])),t+2):(n.push(new ht(["->",this._store.sym(Ms)])),t+1);if(e.slice(t,t+2)==":=")return n.push(new ht(["->",Pi+"becomes"])),t+2;var s=this.prop(e,t,a);if(s>=0)return n.push(new ht(["->",a[0]])),s;if(e.slice(t,t+2)==">-"||e.slice(t,t+2)=="<-")throw ve(this._thisDoc,this.lines,e,s,">- ... -> syntax is obsolete.");return-1}prop(e,t,n){return this.item(e,t,n)}item(e,t,n){return this.path(e,t,n)}blankNode(e){return this._context.bnode(e,this._reason2)}path(e,t,n){var a=this.nodeOrLiteral(e,t,n);if(a<0)return a;for(;"!^.".indexOf(e.slice(a,a+1))>=0;){var s=e.slice(a,a+1);if(s=="."&&Yr(e,a))break;var r=n.pop(),l=this.blankNode(this.here(a)),a=this.node(e,a+1,n);if(a<0)throw ve(this._thisDoc,this.lines,e,a,"EOF found in middle of path syntax");var o=n.pop();s=="^"?this.makeStatement(new ht([this._context,o,l,r])):this.makeStatement(new ht([this._context,o,r,l])),n.push(l)}return a}anonymousNode(e){var t=this._anonymousNodes[e];if(t)return t;var t=this._store.bnode(e);return this._anonymousNodes[e]=t,t}node(e,r,n,a){typeof a>"u"&&(a=null);var s=a,N=this.skipSpace(e,r);if(N<0)return N;var r=N,l=e.slice(r,r+1);if(l=="["){var o=this.here(r),N=this.skipSpace(e,r+1);if(N<0)throw ve(this._thisDoc,this.lines,e,r,"EOF after '['");if(e.slice(N,N+1)=="="){var r=N+1,u=new dt([]),N=this.objectList(e,r,u);if(N>=0){var s=u[0];if(It(u)>1){var d=new Qr(u);try{for(;;){var f=d.next();this.makeStatement(new ht([this._context,this._store.sym(Ms),s,f]))}}catch(q){if(q!=vr)throw q}}var N=this.skipSpace(e,N);if(N<0)throw ve(this._thisDoc,this.lines,e,r,"EOF when objectList expected after [ = ");if(e.slice(N,N+1)==";")var N=N+1}else throw ve(this._thisDoc,this.lines,e,r,"objectList expected after [= ")}if(s==null)var s=this.blankNode(o);var r=this.property_list(e,N,s);if(r<0)throw ve(this._thisDoc,this.lines,e,N,"property_list expected");var N=this.skipSpace(e,r);if(N<0)throw ve(this._thisDoc,this.lines,e,r,"EOF when ']' expected after [ <propertyList>");if(e.slice(N,N+1)==".")return n.push(s),N;if(e.slice(N,N+1)!="]")throw ve(this._thisDoc,this.lines,e,N,"']' expected");return n.push(s),N+1}if(l=="{"){var m=e.slice(r+1,r+2);if(m=="$"){r+=1;for(var N=r+1,w=new dt([]),y=!0;;){var r=this.skipSpace(e,N);if(r<0)throw ve(this._thisDoc,this.lines,e,r,"needed '$}', found end.");if(e.slice(r,r+2)=="$}"){var N=r+2;break}if(y)var y=!1;else if(e.slice(r,r+1)==",")r+=1;else throw ve(this._thisDoc,this.lines,e,r,"expected: ','");var C=new dt([]),N=this.item(e,r,C);if(N<0)throw ve(this._thisDoc,this.lines,e,r,"expected item in set or '$}'");w.push(C[0])}return n.push(this._store.newSet(w,this._context)),N}else{var N=r+1,T=this._parentContext;this._parentContext=this._context;var L=this._anonymousNodes,R=this._parentVariables;this._parentVariables=this._variables,this._anonymousNodes=new or([]),this._variables=this._variables.slice();var Z=this._reason2;if(this._reason2=ch,s==null)var s=this._store.formula();for(this._context=s;;){var r=this.skipSpace(e,N);if(r<0)throw ve(this._thisDoc,this.lines,e,r,"needed '}', found end.");if(e.slice(r,r+1)=="}"){var N=r+1;break}var N=this.directiveOrStatement(e,r);if(N<0)throw ve(this._thisDoc,this.lines,e,r,"expected statement or '}'")}return this._anonymousNodes=L,this._variables=this._parentVariables,this._parentVariables=R,this._context=this._parentContext,this._reason2=Z,this._parentContext=T,n.push(s.close()),N}}if(l=="("){var Y=this._store.list,m=e.slice(r+1,r+2);if(m=="$"){var Y=this._store.newSet;r+=1}for(var N=r+1,w=new dt([]);;){var r=this.skipSpace(e,N);if(r<0)throw ve(this._thisDoc,this.lines,e,r,"needed ')', found end.");if(e.slice(r,r+1)==")"){var N=r+1;break}var C=new dt([]),N=this.item(e,r,C);if(N<0)throw ve(this._thisDoc,this.lines,e,r,"expected item in list or ')'");w.push(C[0])}return n.push(Y(w,this._context)),N}var N=this.tok("this",e,r);if(N>=0)throw ve(this._thisDoc,this.lines,e,r,"Keyword 'this' was ancient N3. Now use @forSome and @forAll keywords.");var N=this.tok("true",e,r);if(N>=0)return n.push(!0),N;var N=this.tok("false",e,r);if(N>=0)return n.push(!1),N;if(s==null){var N=this.uri_ref2(e,r,n);if(N>=0)return N}return-1}property_list(e,t,n){for(;;){var m=this.skipSpace(e,t);if(m<0)throw ve(this._thisDoc,this.lines,e,t,"EOF found when expected verb in property list");if(e.slice(m,m+2)==":-"){var t=m+2,a=new dt([]),m=this.node(e,t,a,n);if(m<0)throw ve(this._thisDoc,this.lines,e,t,"bad {} or () or [] node after :- ");var t=m;continue}var t=m,s=new dt([]),m=this.verb(e,t,s);if(m<=0)return t;var r=new dt([]),t=this.objectList(e,m,r);if(t<0)throw ve(this._thisDoc,this.lines,e,m,"objectList expected");var l=new Qr(r);try{for(;;){var o=l.next(),u=s[0],d=u[0],f=u[1];d=="->"?this.makeStatement(new ht([this._context,f,n,o])):this.makeStatement(new ht([this._context,f,o,n]))}}catch(y){if(y!=vr)throw y}var m=this.skipSpace(e,t);if(m<0)throw ve(this._thisDoc,this.lines,e,m,"EOF found in list of objects");if(e.slice(t,t+1)!=";")return t;var t=t+1}}commaSeparatedList(e,t,n,a){var s=this.skipSpace(e,t);if(s<0)throw ve(this._thisDoc,this.lines,e,s,"EOF found expecting comma sep list");if(e.charAt(s)==".")return t;if(a)var s=this.uri_ref2(e,s,n);else var s=this.bareWord(e,s,n);if(s<0)return-1;for(;;){var t=this.skipSpace(e,s);if(t<0)return t;var r=e.slice(t,t+1);if(r!=",")return r!="."?-1:t;if(a)var s=this.uri_ref2(e,t+1,n);else var s=this.bareWord(e,t+1,n);if(s<0)throw ve(this._thisDoc,this.lines,e,s,"bad list content")}}objectList(e,a,n){var a=this.object(e,a,n);if(a<0)return-1;for(;;){var s=this.skipSpace(e,a);if(s<0)throw ve(this._thisDoc,this.lines,e,s,"EOF found after object");if(e.slice(s,s+1)!=",")return s;var a=this.object(e,s+1,n);if(a<0)return a}}checkDot(e,t){var n=this.skipSpace(e,t);if(n<0)return n;if(e.slice(n,n+1)==".")return n+1;if(e.slice(n,n+1)=="}"||e.slice(n,n+1)=="]")return n;throw ve(this._thisDoc,this.lines,e,n,"expected '.' or '}' or ']' at end of statement")}uri_ref2(e,f,n){var a=new dt([]),s=this.qname(e,f,a);if(s>=0){var r=a[0],l=r[0],o=r[1];if(l==null){Tn(0,"not used?");var u=this._baseURI+dh}else{var u=this._bindings[l];if(!u){if(l=="_")return n.push(this.anonymousNode(o)),s;throw ve(this._thisDoc,this.lines,e,f,"Prefix "+l+" not bound.")}}var d=this._store.sym(u+o);return Bt(this._variables,d)>=0?n.push(this._variables[d]):n.push(d),s}var f=this.skipSpace(e,f);if(f<0)return-1;if(e.charAt(f)=="?"){var m=new dt([]),s=this.variable(e,f,m);return s>0?(n.push(m[0]),s):-1}else if(e.charAt(f)=="<"){for(var f=f+1,w=f;f<It(e);){if(e.charAt(f)==">"){var y=e.slice(w,f);if(this._baseURI)var y=zi(this._baseURI,y);else Tn(y.indexOf(":")>=0,"With no base URI, cannot deal with relative URIs");if(e.slice(f-1,f)=="#"&&qi(y,-1,null)!="#")var y=y+"#";var d=this._store.sym(y);return Bt(this._variables,d)>=0?n.push(this._variables[d]):n.push(d),f+1}var f=f+1}throw ve(this._thisDoc,this.lines,e,s,"unterminated URI reference")}else if(this.keywordsSet){var m=new dt([]),s=this.bareWord(e,f,m);if(s<0)return-1;if(Bt(this.keywords,m[0])>=0)throw ve(this._thisDoc,this.lines,e,f,'Keyword "'+m[0]+'" not allowed here.');return n.push(this._store.sym(this._bindings[""]+m[0])),s}else return-1}skipSpace(e,t){for(var n=` 
\r	\f\v            ​\u2028\u2029　`,a=t||0;a<e.length;a++){var s=e.charAt(a);if(n.indexOf(s)<0)if(e.charAt(a)==="#")for(;;a++){if(a===e.length)return-1;if(e.charAt(a)===`
`){this.lines=this.lines+1;break}}else return a;else e.charAt(a)===`
`&&(this.lines=this.lines+1)}return-1}variable(e,s,n){var a=this.skipSpace(e,s);if(a<0||e.slice(a,a+1)!="?")return-1;var a=a+1,s=a;if("0123456789-".indexOf(e.charAt(a))>=0)throw ve(this._thisDoc,this.lines,e,a,"Varible name can't start with '"+e.charAt(a)+"s'");for(;s<It(e)&&qn.indexOf(e.charAt(s))<0;)var s=s+1;if(this._parentContext==null)throw ve(this._thisDoc,this.lines,e,a,"Can't use ?xxx syntax for variable in outermost level: "+e.slice(a-1,s));return n.push(this._store.variable(e.slice(a,s))),s}bareWord(e,r,n){var a=this.skipSpace(e,r);if(a<0)return-1;var s=e.charAt(a);if("0123456789-".indexOf(s)>=0||qn.indexOf(s)>=0)return-1;for(var r=a;r<It(e);){var l=e.charAt(r);if(l==="."){if(Yr(e,r))break}else if(qn.indexOf(l)>=0)break;var r=r+1}return n.push(e.slice(a,r)),r}qname(e,a,n){var a=this.skipSpace(e,a);if(a<0)return-1;var s=e.charAt(a);if("0123456789-+".indexOf(s)>=0)return-1;if(qn.indexOf(s)<0)for(var r=s,a=a+1;a<It(e);){var s=e.charAt(a);if(s==="."){if(Yr(e,a))break}else if(qn.indexOf(s)>=0)break;var r=r+s,a=a+1}else var r="";if(a<It(e)&&e.charAt(a)==":"){for(var l=r,a=a+1,r="";a<It(e);){var s=e.charAt(a);if(s==="."){if(Yr(e,a))break}else if(qn.indexOf(s)>=0)break;var r=r+s,a=a+1}return n.push(new ht([l,r])),a}else return r&&this.keywordsSet&&Bt(this.keywords,r)<0?(n.push(new ht(["",r])),a):-1}object(e,t,n){var a=this.subject(e,t,n);if(a>=0)return a;{var a=this.skipSpace(e,t);if(a<0)return-1;var t=a,s=null;let u=e.charAt(t);if(u=='"'||u=="'"){e.slice(t,t+3==u+u)?s=u+u+u:s=u;var t=t+It(s),r=this.strconst(e,t,s),a=r[0],l=r[1];return n.push(this._store.literal(l)),a}else return-1}}nodeOrLiteral(e,t,n){var a=this.node(e,t,n);if(a>=0)return a;var a=this.skipSpace(e,t);if(a<0)return-1;var t=a,s=e.charAt(t);if("-+0987654321".indexOf(s)>=0){Us.lastIndex=0;var r=Us.exec(e.slice(t));if(r!=null){var l=r[0];a=t+l.length,l.indexOf("T")>=0?n.push(this._store.literal(l,this._store.sym(vh))):n.push(this._store.literal(l,this._store.sym(gh)))}else{ji.lastIndex=0;var r=ji.exec(e.slice(t));if(r==null)throw ve(this._thisDoc,this.lines,e,t,"Bad number or date syntax");a=t+ji.lastIndex;var l=e.slice(t,a);l.indexOf("e")>=0?n.push(this._store.literal(parseFloat(l),this._store.sym(ph))):e.slice(t,a).indexOf(".")>=0?n.push(this._store.literal(parseFloat(l),this._store.sym(mh))):n.push(this._store.literal(parseInt(l),this._store.sym(fh)))}return a}if(e.charAt(t)=='"'){if(e.slice(t,t+3)=='"""')var o='"""';else var o='"';var t=t+It(o),u=null,d=this.strconst(e,t,o),a=d[0],f=d[1],m=null;if(e.slice(a,a+1)=="@"){Gi.lastIndex=0;var r=Gi.exec(e.slice(a+1));if(r==null)throw ve(this._thisDoc,startline,e,t,"Bad language code syntax on string literal, after @");var t=Gi.lastIndex+a+1,m=e.slice(a+1,t),a=t}if(e.slice(a,a+2)=="^^")var w=new dt([]),a=this.uri_ref2(e,a+2,w),u=w[0];return n.push(this._store.literal(f,m||u)),a}else return-1}strconst(e,t,n){for(var a=t,s="",r=this.lines;a<It(e);){var t=a+It(n);if(e.slice(a,t)==n)return new ht([t,s]);if(e.charAt(a)=='"'){var s=s+'"',a=a+1;continue}Vi.lastIndex=0;var l=Vi.exec(e.slice(a));if(!l)throw ve(this._thisDoc,r,e,a,"Closing quote missing in string at ^ in "+e.slice(a-20,a)+"^"+e.slice(a,a+20));var t=a+Vi.lastIndex-1,s=s+e.slice(a,t),o=e.charAt(t);if(o=='"'){var a=t;continue}else if(o=="\r"){var a=t+1;continue}else if(o==`
`){if(n=='"')throw ve(this._thisDoc,r,e,t,"newline found in string literal");this.lines=this.lines+1;var s=s+o,a=t+1;this.previousLine=this.startOfLine,this.startOfLine=a}else if(o=="\\"){var a=t+1,o=e.slice(a,a+1);if(!o)throw ve(this._thisDoc,r,e,t,"unterminated string literal (2)");var u=Hi('abfrtvn\\"',o);if(u>=0)var d=`a\b\f\r	\v
\\"`.charAt(u),s=s+d,a=a+1;else if(o=="u")var f=this.uEscape(e,a+1,r),a=f[0],o=f[1],s=s+o;else if(o=="U")var f=this.UEscape(e,a+1,r),a=f[0],o=f[1],s=s+o;else throw ve(this._thisDoc,this.lines,e,t,"bad escape")}}throw ve(this._thisDoc,this.lines,e,t,"unterminated string literal")}uEscape(e,t,n){for(var a=t,s=0,r=0;s<4;){var l=e.slice(a,a+1),o=l.toLowerCase(),a=a+1;if(o=="")throw ve(this._thisDoc,n,e,t,"unterminated string literal(3)");var u=Hi("0123456789abcdef",o);if(u<0)throw ve(this._thisDoc,n,e,t,"bad string literal hex escape");var r=r*16+u,s=s+1}var d=String.fromCharCode(r);return new ht([a,d])}UEscape(e,t,n){for(var a=t,s=0,r="\\U";s<8;){var l=e.slice(a,a+1),o=l.toLowerCase(),a=a+1;if(o=="")throw ve(this._thisDoc,n,e,t,"unterminated string literal(3)");var u=Hi("0123456789abcdef",o);if(u<0)throw ve(this._thisDoc,n,e,t,"bad string literal hex escape");var r=r+o,s=s+1}var d=uh("0x"+qi(r,2,10)-0);return new ht([a,d])}}function ve(i,e,t,n,a){let s=e+1,r="Line "+s+" of <"+i+">: Bad syntax: "+a+`
at: "`+t.slice(n,n+30)+'"',l=new SyntaxError(r,i,s);return l.lineNo=s,l.characterInFile=n,l.syntaxProblem=a,l}const ra={...Mt,supports:{[At.collections]:!0,[At.defaultGraphType]:!1,[At.equalsMethod]:!0,[At.identity]:!1,[At.id]:!0,[At.reversibleId]:!1,[At.variableType]:!0},collection(i){return new qt(i)},id(i){return va(i)?`( ${i.elements.map(e=>this.id(e)).join(", ")} )`:Fc(i)?Rn.toString(i):Mt.id(i)},termToNQ(i){return i.termType===vn?qt.toNT(i):Mt.termToNQ(i)}},Eh="modulepreload",Ch=function(i){return"/"+i},Ps={},bh=function(e,t,n){let a=Promise.resolve();if(t&&t.length>0){let o=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),l=r?.nonce||r?.getAttribute("nonce");a=o(t.map(u=>{if(u=Ch(u),u in Ps)return;Ps[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":Eh,d||(m.as="script"),m.crossOrigin="",m.href=u,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((w,y)=>{m.addEventListener("load",w),m.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(r){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=r,window.dispatchEvent(l),!l.defaultPrevented)throw r}return a.then(r=>{for(const l of r||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};function Ca(i,e){return typeof e=="string"?i.rdfFactory.literal(e):Object.prototype.hasOwnProperty.call(e,"@list")?i.rdfFactory.supports.COLLECTIONS===!0?Nh(i,e["@list"]):xh(i,e):Object.prototype.hasOwnProperty.call(e,"@id")?ba(i,e):Object.prototype.hasOwnProperty.call(e,"@language")?i.rdfFactory.literal(e["@value"],e["@language"]):Object.prototype.hasOwnProperty.call(e,"@type")?i.rdfFactory.literal(e["@value"],i.rdfFactory.namedNode(e["@type"])):Object.prototype.hasOwnProperty.call(e,"@value")?i.rdfFactory.literal(e["@value"]):i.rdfFactory.literal(e)}function xh(i,e){const t=e["@id"]?ba(i,e):i.rdfFactory.blankNode(),n=e["@list"].map(s=>Ca(i,s)),a=Fl(i.rdfFactory,t,n);return i.addAll(a),t}function Nh(i,e){if(!Array.isArray(e))throw new TypeError("Object must be an array");return i.rdfFactory.collection(e.map(t=>Ca(i,t)))}async function Ol(i,e,t){const n=t&&Object.prototype.hasOwnProperty.call(t,"termType")?t.value:t;return(await(await bh(()=>import("./jsonld-DtNjcDL3.js").then(r=>r.j),[])).default.flatten(JSON.parse(i),null,{base:n})).reduce((r,l)=>$l(r,t,l),e)}function ba(i,e){return e["@id"].startsWith("_:")?i.rdfFactory.blankNode(e["@id"].substring(2)):i.rdfFactory.namedNode(e["@id"])}function $l(i,e,t){const n=t["@id"]?ba(i,t):i.rdfFactory.blankNode();for(const a of Object.keys(t)){if(a==="@id")continue;if(a=="@graph"){const r=n,l=t[a];for(let o=0;o<l.length;o++)i=$l(i,r,l[o])}const s=t[a];if(Array.isArray(s))for(let r=0;r<s.length;r++)i.addStatement(qs(i,n,a,s[r],e));else i.addStatement(qs(i,n,a,s,e))}return i}function qs(i,e,t,n,a){let s,r;return t==="@type"?(s=i.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),r=i.rdfFactory.namedNode(n)):(s=i.rdfFactory.namedNode(t),r=Ca(i,n)),i.rdfFactory.quad(e,s,r,i.rdfFactory.namedNode(a))}var Xi={},ur={},Hs;function Th(){if(Hs)return ur;Hs=1,ur.byteLength=l,ur.toByteArray=u,ur.fromByteArray=m;for(var i=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,s=n.length;a<s;++a)i[a]=n[a],e[n.charCodeAt(a)]=a;e[45]=62,e[95]=63;function r(w){var y=w.length;if(y%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var C=w.indexOf("=");C===-1&&(C=y);var T=C===y?0:4-C%4;return[C,T]}function l(w){var y=r(w),C=y[0],T=y[1];return(C+T)*3/4-T}function o(w,y,C){return(y+C)*3/4-C}function u(w){var y,C=r(w),T=C[0],L=C[1],R=new t(o(w,T,L)),Z=0,Y=L>0?T-4:T,N;for(N=0;N<Y;N+=4)y=e[w.charCodeAt(N)]<<18|e[w.charCodeAt(N+1)]<<12|e[w.charCodeAt(N+2)]<<6|e[w.charCodeAt(N+3)],R[Z++]=y>>16&255,R[Z++]=y>>8&255,R[Z++]=y&255;return L===2&&(y=e[w.charCodeAt(N)]<<2|e[w.charCodeAt(N+1)]>>4,R[Z++]=y&255),L===1&&(y=e[w.charCodeAt(N)]<<10|e[w.charCodeAt(N+1)]<<4|e[w.charCodeAt(N+2)]>>2,R[Z++]=y>>8&255,R[Z++]=y&255),R}function d(w){return i[w>>18&63]+i[w>>12&63]+i[w>>6&63]+i[w&63]}function f(w,y,C){for(var T,L=[],R=y;R<C;R+=3)T=(w[R]<<16&16711680)+(w[R+1]<<8&65280)+(w[R+2]&255),L.push(d(T));return L.join("")}function m(w){for(var y,C=w.length,T=C%3,L=[],R=16383,Z=0,Y=C-T;Z<Y;Z+=R)L.push(f(w,Z,Z+R>Y?Y:Z+R));return T===1?(y=w[C-1],L.push(i[y>>2]+i[y<<4&63]+"==")):T===2&&(y=(w[C-2]<<8)+w[C-1],L.push(i[y>>10]+i[y>>4&63]+i[y<<2&63]+"=")),L.join("")}return ur}var Zr={};var zs;function Ah(){return zs||(zs=1,Zr.read=function(i,e,t,n,a){var s,r,l=a*8-n-1,o=(1<<l)-1,u=o>>1,d=-7,f=t?a-1:0,m=t?-1:1,w=i[e+f];for(f+=m,s=w&(1<<-d)-1,w>>=-d,d+=l;d>0;s=s*256+i[e+f],f+=m,d-=8);for(r=s&(1<<-d)-1,s>>=-d,d+=n;d>0;r=r*256+i[e+f],f+=m,d-=8);if(s===0)s=1-u;else{if(s===o)return r?NaN:(w?-1:1)*(1/0);r=r+Math.pow(2,n),s=s-u}return(w?-1:1)*r*Math.pow(2,s-n)},Zr.write=function(i,e,t,n,a,s){var r,l,o,u=s*8-a-1,d=(1<<u)-1,f=d>>1,m=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=n?0:s-1,y=n?1:-1,C=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,r=d):(r=Math.floor(Math.log(e)/Math.LN2),e*(o=Math.pow(2,-r))<1&&(r--,o*=2),r+f>=1?e+=m/o:e+=m*Math.pow(2,1-f),e*o>=2&&(r++,o/=2),r+f>=d?(l=0,r=d):r+f>=1?(l=(e*o-1)*Math.pow(2,a),r=r+f):(l=e*Math.pow(2,f-1)*Math.pow(2,a),r=0));a>=8;i[t+w]=l&255,w+=y,l/=256,a-=8);for(r=r<<a|l,u+=a;u>0;i[t+w]=r&255,w+=y,r/=256,u-=8);i[t+w-y]|=C*128}),Zr}var js;function Dh(){return js||(js=1,(function(i){const e=Th(),t=Ah(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;i.Buffer=l,i.SlowBuffer=R,i.INSPECT_MAX_BYTES=50;const a=2147483647;i.kMaxLength=a,l.TYPED_ARRAY_SUPPORT=s(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const x=new Uint8Array(1),p={foo:function(){return 42}};return Object.setPrototypeOf(p,Uint8Array.prototype),Object.setPrototypeOf(x,p),x.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function r(x){if(x>a)throw new RangeError('The value "'+x+'" is invalid for option "size"');const p=new Uint8Array(x);return Object.setPrototypeOf(p,l.prototype),p}function l(x,p,g){if(typeof x=="number"){if(typeof p=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(x)}return o(x,p,g)}l.poolSize=8192;function o(x,p,g){if(typeof x=="string")return m(x,p);if(ArrayBuffer.isView(x))return y(x);if(x==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof x);if(Re(x,ArrayBuffer)||x&&Re(x.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Re(x,SharedArrayBuffer)||x&&Re(x.buffer,SharedArrayBuffer)))return C(x,p,g);if(typeof x=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const S=x.valueOf&&x.valueOf();if(S!=null&&S!==x)return l.from(S,p,g);const z=T(x);if(z)return z;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof x[Symbol.toPrimitive]=="function")return l.from(x[Symbol.toPrimitive]("string"),p,g);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof x)}l.from=function(x,p,g){return o(x,p,g)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function u(x){if(typeof x!="number")throw new TypeError('"size" argument must be of type number');if(x<0)throw new RangeError('The value "'+x+'" is invalid for option "size"')}function d(x,p,g){return u(x),x<=0?r(x):p!==void 0?typeof g=="string"?r(x).fill(p,g):r(x).fill(p):r(x)}l.alloc=function(x,p,g){return d(x,p,g)};function f(x){return u(x),r(x<0?0:L(x)|0)}l.allocUnsafe=function(x){return f(x)},l.allocUnsafeSlow=function(x){return f(x)};function m(x,p){if((typeof p!="string"||p==="")&&(p="utf8"),!l.isEncoding(p))throw new TypeError("Unknown encoding: "+p);const g=Z(x,p)|0;let S=r(g);const z=S.write(x,p);return z!==g&&(S=S.slice(0,z)),S}function w(x){const p=x.length<0?0:L(x.length)|0,g=r(p);for(let S=0;S<p;S+=1)g[S]=x[S]&255;return g}function y(x){if(Re(x,Uint8Array)){const p=new Uint8Array(x);return C(p.buffer,p.byteOffset,p.byteLength)}return w(x)}function C(x,p,g){if(p<0||x.byteLength<p)throw new RangeError('"offset" is outside of buffer bounds');if(x.byteLength<p+(g||0))throw new RangeError('"length" is outside of buffer bounds');let S;return p===void 0&&g===void 0?S=new Uint8Array(x):g===void 0?S=new Uint8Array(x,p):S=new Uint8Array(x,p,g),Object.setPrototypeOf(S,l.prototype),S}function T(x){if(l.isBuffer(x)){const p=L(x.length)|0,g=r(p);return g.length===0||x.copy(g,0,0,p),g}if(x.length!==void 0)return typeof x.length!="number"||St(x.length)?r(0):w(x);if(x.type==="Buffer"&&Array.isArray(x.data))return w(x.data)}function L(x){if(x>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return x|0}function R(x){return+x!=x&&(x=0),l.alloc(+x)}l.isBuffer=function(p){return p!=null&&p._isBuffer===!0&&p!==l.prototype},l.compare=function(p,g){if(Re(p,Uint8Array)&&(p=l.from(p,p.offset,p.byteLength)),Re(g,Uint8Array)&&(g=l.from(g,g.offset,g.byteLength)),!l.isBuffer(p)||!l.isBuffer(g))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(p===g)return 0;let S=p.length,z=g.length;for(let W=0,te=Math.min(S,z);W<te;++W)if(p[W]!==g[W]){S=p[W],z=g[W];break}return S<z?-1:z<S?1:0},l.isEncoding=function(p){switch(String(p).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(p,g){if(!Array.isArray(p))throw new TypeError('"list" argument must be an Array of Buffers');if(p.length===0)return l.alloc(0);let S;if(g===void 0)for(g=0,S=0;S<p.length;++S)g+=p[S].length;const z=l.allocUnsafe(g);let W=0;for(S=0;S<p.length;++S){let te=p[S];if(Re(te,Uint8Array))W+te.length>z.length?(l.isBuffer(te)||(te=l.from(te)),te.copy(z,W)):Uint8Array.prototype.set.call(z,te,W);else if(l.isBuffer(te))te.copy(z,W);else throw new TypeError('"list" argument must be an Array of Buffers');W+=te.length}return z};function Z(x,p){if(l.isBuffer(x))return x.length;if(ArrayBuffer.isView(x)||Re(x,ArrayBuffer))return x.byteLength;if(typeof x!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof x);const g=x.length,S=arguments.length>2&&arguments[2]===!0;if(!S&&g===0)return 0;let z=!1;for(;;)switch(p){case"ascii":case"latin1":case"binary":return g;case"utf8":case"utf-8":return se(x).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g*2;case"hex":return g>>>1;case"base64":return _t(x).length;default:if(z)return S?-1:se(x).length;p=(""+p).toLowerCase(),z=!0}}l.byteLength=Z;function Y(x,p,g){let S=!1;if((p===void 0||p<0)&&(p=0),p>this.length||((g===void 0||g>this.length)&&(g=this.length),g<=0)||(g>>>=0,p>>>=0,g<=p))return"";for(x||(x="utf8");;)switch(x){case"hex":return ae(this,p,g);case"utf8":case"utf-8":return J(this,p,g);case"ascii":return K(this,p,g);case"latin1":case"binary":return ie(this,p,g);case"base64":return ee(this,p,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return oe(this,p,g);default:if(S)throw new TypeError("Unknown encoding: "+x);x=(x+"").toLowerCase(),S=!0}}l.prototype._isBuffer=!0;function N(x,p,g){const S=x[p];x[p]=x[g],x[g]=S}l.prototype.swap16=function(){const p=this.length;if(p%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let g=0;g<p;g+=2)N(this,g,g+1);return this},l.prototype.swap32=function(){const p=this.length;if(p%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let g=0;g<p;g+=4)N(this,g,g+3),N(this,g+1,g+2);return this},l.prototype.swap64=function(){const p=this.length;if(p%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let g=0;g<p;g+=8)N(this,g,g+7),N(this,g+1,g+6),N(this,g+2,g+5),N(this,g+3,g+4);return this},l.prototype.toString=function(){const p=this.length;return p===0?"":arguments.length===0?J(this,0,p):Y.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(p){if(!l.isBuffer(p))throw new TypeError("Argument must be a Buffer");return this===p?!0:l.compare(this,p)===0},l.prototype.inspect=function(){let p="";const g=i.INSPECT_MAX_BYTES;return p=this.toString("hex",0,g).replace(/(.{2})/g,"$1 ").trim(),this.length>g&&(p+=" ... "),"<Buffer "+p+">"},n&&(l.prototype[n]=l.prototype.inspect),l.prototype.compare=function(p,g,S,z,W){if(Re(p,Uint8Array)&&(p=l.from(p,p.offset,p.byteLength)),!l.isBuffer(p))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof p);if(g===void 0&&(g=0),S===void 0&&(S=p?p.length:0),z===void 0&&(z=0),W===void 0&&(W=this.length),g<0||S>p.length||z<0||W>this.length)throw new RangeError("out of range index");if(z>=W&&g>=S)return 0;if(z>=W)return-1;if(g>=S)return 1;if(g>>>=0,S>>>=0,z>>>=0,W>>>=0,this===p)return 0;let te=W-z,Ne=S-g;const Xe=Math.min(te,Ne),qe=this.slice(z,W),je=p.slice(g,S);for(let Ie=0;Ie<Xe;++Ie)if(qe[Ie]!==je[Ie]){te=qe[Ie],Ne=je[Ie];break}return te<Ne?-1:Ne<te?1:0};function j(x,p,g,S,z){if(x.length===0)return-1;if(typeof g=="string"?(S=g,g=0):g>2147483647?g=2147483647:g<-2147483648&&(g=-2147483648),g=+g,St(g)&&(g=z?0:x.length-1),g<0&&(g=x.length+g),g>=x.length){if(z)return-1;g=x.length-1}else if(g<0)if(z)g=0;else return-1;if(typeof p=="string"&&(p=l.from(p,S)),l.isBuffer(p))return p.length===0?-1:$(x,p,g,S,z);if(typeof p=="number")return p=p&255,typeof Uint8Array.prototype.indexOf=="function"?z?Uint8Array.prototype.indexOf.call(x,p,g):Uint8Array.prototype.lastIndexOf.call(x,p,g):$(x,[p],g,S,z);throw new TypeError("val must be string, number or Buffer")}function $(x,p,g,S,z){let W=1,te=x.length,Ne=p.length;if(S!==void 0&&(S=String(S).toLowerCase(),S==="ucs2"||S==="ucs-2"||S==="utf16le"||S==="utf-16le")){if(x.length<2||p.length<2)return-1;W=2,te/=2,Ne/=2,g/=2}function Xe(je,Ie){return W===1?je[Ie]:je.readUInt16BE(Ie*W)}let qe;if(z){let je=-1;for(qe=g;qe<te;qe++)if(Xe(x,qe)===Xe(p,je===-1?0:qe-je)){if(je===-1&&(je=qe),qe-je+1===Ne)return je*W}else je!==-1&&(qe-=qe-je),je=-1}else for(g+Ne>te&&(g=te-Ne),qe=g;qe>=0;qe--){let je=!0;for(let Ie=0;Ie<Ne;Ie++)if(Xe(x,qe+Ie)!==Xe(p,Ie)){je=!1;break}if(je)return qe}return-1}l.prototype.includes=function(p,g,S){return this.indexOf(p,g,S)!==-1},l.prototype.indexOf=function(p,g,S){return j(this,p,g,S,!0)},l.prototype.lastIndexOf=function(p,g,S){return j(this,p,g,S,!1)};function G(x,p,g,S){g=Number(g)||0;const z=x.length-g;S?(S=Number(S),S>z&&(S=z)):S=z;const W=p.length;S>W/2&&(S=W/2);let te;for(te=0;te<S;++te){const Ne=parseInt(p.substr(te*2,2),16);if(St(Ne))return te;x[g+te]=Ne}return te}function F(x,p,g,S){return Oe(se(p,x.length-g),x,g,S)}function H(x,p,g,S){return Oe(Se(p),x,g,S)}function P(x,p,g,S){return Oe(_t(p),x,g,S)}function q(x,p,g,S){return Oe(ot(p,x.length-g),x,g,S)}l.prototype.write=function(p,g,S,z){if(g===void 0)z="utf8",S=this.length,g=0;else if(S===void 0&&typeof g=="string")z=g,S=this.length,g=0;else if(isFinite(g))g=g>>>0,isFinite(S)?(S=S>>>0,z===void 0&&(z="utf8")):(z=S,S=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const W=this.length-g;if((S===void 0||S>W)&&(S=W),p.length>0&&(S<0||g<0)||g>this.length)throw new RangeError("Attempt to write outside buffer bounds");z||(z="utf8");let te=!1;for(;;)switch(z){case"hex":return G(this,p,g,S);case"utf8":case"utf-8":return F(this,p,g,S);case"ascii":case"latin1":case"binary":return H(this,p,g,S);case"base64":return P(this,p,g,S);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,p,g,S);default:if(te)throw new TypeError("Unknown encoding: "+z);z=(""+z).toLowerCase(),te=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ee(x,p,g){return p===0&&g===x.length?e.fromByteArray(x):e.fromByteArray(x.slice(p,g))}function J(x,p,g){g=Math.min(x.length,g);const S=[];let z=p;for(;z<g;){const W=x[z];let te=null,Ne=W>239?4:W>223?3:W>191?2:1;if(z+Ne<=g){let Xe,qe,je,Ie;switch(Ne){case 1:W<128&&(te=W);break;case 2:Xe=x[z+1],(Xe&192)===128&&(Ie=(W&31)<<6|Xe&63,Ie>127&&(te=Ie));break;case 3:Xe=x[z+1],qe=x[z+2],(Xe&192)===128&&(qe&192)===128&&(Ie=(W&15)<<12|(Xe&63)<<6|qe&63,Ie>2047&&(Ie<55296||Ie>57343)&&(te=Ie));break;case 4:Xe=x[z+1],qe=x[z+2],je=x[z+3],(Xe&192)===128&&(qe&192)===128&&(je&192)===128&&(Ie=(W&15)<<18|(Xe&63)<<12|(qe&63)<<6|je&63,Ie>65535&&Ie<1114112&&(te=Ie))}}te===null?(te=65533,Ne=1):te>65535&&(te-=65536,S.push(te>>>10&1023|55296),te=56320|te&1023),S.push(te),z+=Ne}return V(S)}const _=4096;function V(x){const p=x.length;if(p<=_)return String.fromCharCode.apply(String,x);let g="",S=0;for(;S<p;)g+=String.fromCharCode.apply(String,x.slice(S,S+=_));return g}function K(x,p,g){let S="";g=Math.min(x.length,g);for(let z=p;z<g;++z)S+=String.fromCharCode(x[z]&127);return S}function ie(x,p,g){let S="";g=Math.min(x.length,g);for(let z=p;z<g;++z)S+=String.fromCharCode(x[z]);return S}function ae(x,p,g){const S=x.length;(!p||p<0)&&(p=0),(!g||g<0||g>S)&&(g=S);let z="";for(let W=p;W<g;++W)z+=nn[x[W]];return z}function oe(x,p,g){const S=x.slice(p,g);let z="";for(let W=0;W<S.length-1;W+=2)z+=String.fromCharCode(S[W]+S[W+1]*256);return z}l.prototype.slice=function(p,g){const S=this.length;p=~~p,g=g===void 0?S:~~g,p<0?(p+=S,p<0&&(p=0)):p>S&&(p=S),g<0?(g+=S,g<0&&(g=0)):g>S&&(g=S),g<p&&(g=p);const z=this.subarray(p,g);return Object.setPrototypeOf(z,l.prototype),z};function ne(x,p,g){if(x%1!==0||x<0)throw new RangeError("offset is not uint");if(x+p>g)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(p,g,S){p=p>>>0,g=g>>>0,S||ne(p,g,this.length);let z=this[p],W=1,te=0;for(;++te<g&&(W*=256);)z+=this[p+te]*W;return z},l.prototype.readUintBE=l.prototype.readUIntBE=function(p,g,S){p=p>>>0,g=g>>>0,S||ne(p,g,this.length);let z=this[p+--g],W=1;for(;g>0&&(W*=256);)z+=this[p+--g]*W;return z},l.prototype.readUint8=l.prototype.readUInt8=function(p,g){return p=p>>>0,g||ne(p,1,this.length),this[p]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(p,g){return p=p>>>0,g||ne(p,2,this.length),this[p]|this[p+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(p,g){return p=p>>>0,g||ne(p,2,this.length),this[p]<<8|this[p+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(p,g){return p=p>>>0,g||ne(p,4,this.length),(this[p]|this[p+1]<<8|this[p+2]<<16)+this[p+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(p,g){return p=p>>>0,g||ne(p,4,this.length),this[p]*16777216+(this[p+1]<<16|this[p+2]<<8|this[p+3])},l.prototype.readBigUInt64LE=xt(function(p){p=p>>>0,Le(p,"offset");const g=this[p],S=this[p+7];(g===void 0||S===void 0)&&_e(p,this.length-8);const z=g+this[++p]*2**8+this[++p]*2**16+this[++p]*2**24,W=this[++p]+this[++p]*2**8+this[++p]*2**16+S*2**24;return BigInt(z)+(BigInt(W)<<BigInt(32))}),l.prototype.readBigUInt64BE=xt(function(p){p=p>>>0,Le(p,"offset");const g=this[p],S=this[p+7];(g===void 0||S===void 0)&&_e(p,this.length-8);const z=g*2**24+this[++p]*2**16+this[++p]*2**8+this[++p],W=this[++p]*2**24+this[++p]*2**16+this[++p]*2**8+S;return(BigInt(z)<<BigInt(32))+BigInt(W)}),l.prototype.readIntLE=function(p,g,S){p=p>>>0,g=g>>>0,S||ne(p,g,this.length);let z=this[p],W=1,te=0;for(;++te<g&&(W*=256);)z+=this[p+te]*W;return W*=128,z>=W&&(z-=Math.pow(2,8*g)),z},l.prototype.readIntBE=function(p,g,S){p=p>>>0,g=g>>>0,S||ne(p,g,this.length);let z=g,W=1,te=this[p+--z];for(;z>0&&(W*=256);)te+=this[p+--z]*W;return W*=128,te>=W&&(te-=Math.pow(2,8*g)),te},l.prototype.readInt8=function(p,g){return p=p>>>0,g||ne(p,1,this.length),this[p]&128?(255-this[p]+1)*-1:this[p]},l.prototype.readInt16LE=function(p,g){p=p>>>0,g||ne(p,2,this.length);const S=this[p]|this[p+1]<<8;return S&32768?S|4294901760:S},l.prototype.readInt16BE=function(p,g){p=p>>>0,g||ne(p,2,this.length);const S=this[p+1]|this[p]<<8;return S&32768?S|4294901760:S},l.prototype.readInt32LE=function(p,g){return p=p>>>0,g||ne(p,4,this.length),this[p]|this[p+1]<<8|this[p+2]<<16|this[p+3]<<24},l.prototype.readInt32BE=function(p,g){return p=p>>>0,g||ne(p,4,this.length),this[p]<<24|this[p+1]<<16|this[p+2]<<8|this[p+3]},l.prototype.readBigInt64LE=xt(function(p){p=p>>>0,Le(p,"offset");const g=this[p],S=this[p+7];(g===void 0||S===void 0)&&_e(p,this.length-8);const z=this[p+4]+this[p+5]*2**8+this[p+6]*2**16+(S<<24);return(BigInt(z)<<BigInt(32))+BigInt(g+this[++p]*2**8+this[++p]*2**16+this[++p]*2**24)}),l.prototype.readBigInt64BE=xt(function(p){p=p>>>0,Le(p,"offset");const g=this[p],S=this[p+7];(g===void 0||S===void 0)&&_e(p,this.length-8);const z=(g<<24)+this[++p]*2**16+this[++p]*2**8+this[++p];return(BigInt(z)<<BigInt(32))+BigInt(this[++p]*2**24+this[++p]*2**16+this[++p]*2**8+S)}),l.prototype.readFloatLE=function(p,g){return p=p>>>0,g||ne(p,4,this.length),t.read(this,p,!0,23,4)},l.prototype.readFloatBE=function(p,g){return p=p>>>0,g||ne(p,4,this.length),t.read(this,p,!1,23,4)},l.prototype.readDoubleLE=function(p,g){return p=p>>>0,g||ne(p,8,this.length),t.read(this,p,!0,52,8)},l.prototype.readDoubleBE=function(p,g){return p=p>>>0,g||ne(p,8,this.length),t.read(this,p,!1,52,8)};function ge(x,p,g,S,z,W){if(!l.isBuffer(x))throw new TypeError('"buffer" argument must be a Buffer instance');if(p>z||p<W)throw new RangeError('"value" argument is out of bounds');if(g+S>x.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(p,g,S,z){if(p=+p,g=g>>>0,S=S>>>0,!z){const Ne=Math.pow(2,8*S)-1;ge(this,p,g,S,Ne,0)}let W=1,te=0;for(this[g]=p&255;++te<S&&(W*=256);)this[g+te]=p/W&255;return g+S},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(p,g,S,z){if(p=+p,g=g>>>0,S=S>>>0,!z){const Ne=Math.pow(2,8*S)-1;ge(this,p,g,S,Ne,0)}let W=S-1,te=1;for(this[g+W]=p&255;--W>=0&&(te*=256);)this[g+W]=p/te&255;return g+S},l.prototype.writeUint8=l.prototype.writeUInt8=function(p,g,S){return p=+p,g=g>>>0,S||ge(this,p,g,1,255,0),this[g]=p&255,g+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(p,g,S){return p=+p,g=g>>>0,S||ge(this,p,g,2,65535,0),this[g]=p&255,this[g+1]=p>>>8,g+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(p,g,S){return p=+p,g=g>>>0,S||ge(this,p,g,2,65535,0),this[g]=p>>>8,this[g+1]=p&255,g+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(p,g,S){return p=+p,g=g>>>0,S||ge(this,p,g,4,4294967295,0),this[g+3]=p>>>24,this[g+2]=p>>>16,this[g+1]=p>>>8,this[g]=p&255,g+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(p,g,S){return p=+p,g=g>>>0,S||ge(this,p,g,4,4294967295,0),this[g]=p>>>24,this[g+1]=p>>>16,this[g+2]=p>>>8,this[g+3]=p&255,g+4};function Fe(x,p,g,S,z){De(p,S,z,x,g,7);let W=Number(p&BigInt(4294967295));x[g++]=W,W=W>>8,x[g++]=W,W=W>>8,x[g++]=W,W=W>>8,x[g++]=W;let te=Number(p>>BigInt(32)&BigInt(4294967295));return x[g++]=te,te=te>>8,x[g++]=te,te=te>>8,x[g++]=te,te=te>>8,x[g++]=te,g}function pe(x,p,g,S,z){De(p,S,z,x,g,7);let W=Number(p&BigInt(4294967295));x[g+7]=W,W=W>>8,x[g+6]=W,W=W>>8,x[g+5]=W,W=W>>8,x[g+4]=W;let te=Number(p>>BigInt(32)&BigInt(4294967295));return x[g+3]=te,te=te>>8,x[g+2]=te,te=te>>8,x[g+1]=te,te=te>>8,x[g]=te,g+8}l.prototype.writeBigUInt64LE=xt(function(p,g=0){return Fe(this,p,g,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=xt(function(p,g=0){return pe(this,p,g,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(p,g,S,z){if(p=+p,g=g>>>0,!z){const Xe=Math.pow(2,8*S-1);ge(this,p,g,S,Xe-1,-Xe)}let W=0,te=1,Ne=0;for(this[g]=p&255;++W<S&&(te*=256);)p<0&&Ne===0&&this[g+W-1]!==0&&(Ne=1),this[g+W]=(p/te>>0)-Ne&255;return g+S},l.prototype.writeIntBE=function(p,g,S,z){if(p=+p,g=g>>>0,!z){const Xe=Math.pow(2,8*S-1);ge(this,p,g,S,Xe-1,-Xe)}let W=S-1,te=1,Ne=0;for(this[g+W]=p&255;--W>=0&&(te*=256);)p<0&&Ne===0&&this[g+W+1]!==0&&(Ne=1),this[g+W]=(p/te>>0)-Ne&255;return g+S},l.prototype.writeInt8=function(p,g,S){return p=+p,g=g>>>0,S||ge(this,p,g,1,127,-128),p<0&&(p=255+p+1),this[g]=p&255,g+1},l.prototype.writeInt16LE=function(p,g,S){return p=+p,g=g>>>0,S||ge(this,p,g,2,32767,-32768),this[g]=p&255,this[g+1]=p>>>8,g+2},l.prototype.writeInt16BE=function(p,g,S){return p=+p,g=g>>>0,S||ge(this,p,g,2,32767,-32768),this[g]=p>>>8,this[g+1]=p&255,g+2},l.prototype.writeInt32LE=function(p,g,S){return p=+p,g=g>>>0,S||ge(this,p,g,4,2147483647,-2147483648),this[g]=p&255,this[g+1]=p>>>8,this[g+2]=p>>>16,this[g+3]=p>>>24,g+4},l.prototype.writeInt32BE=function(p,g,S){return p=+p,g=g>>>0,S||ge(this,p,g,4,2147483647,-2147483648),p<0&&(p=4294967295+p+1),this[g]=p>>>24,this[g+1]=p>>>16,this[g+2]=p>>>8,this[g+3]=p&255,g+4},l.prototype.writeBigInt64LE=xt(function(p,g=0){return Fe(this,p,g,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=xt(function(p,g=0){return pe(this,p,g,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ce(x,p,g,S,z,W){if(g+S>x.length)throw new RangeError("Index out of range");if(g<0)throw new RangeError("Index out of range")}function Pe(x,p,g,S,z){return p=+p,g=g>>>0,z||Ce(x,p,g,4),t.write(x,p,g,S,23,4),g+4}l.prototype.writeFloatLE=function(p,g,S){return Pe(this,p,g,!0,S)},l.prototype.writeFloatBE=function(p,g,S){return Pe(this,p,g,!1,S)};function Ke(x,p,g,S,z){return p=+p,g=g>>>0,z||Ce(x,p,g,8),t.write(x,p,g,S,52,8),g+8}l.prototype.writeDoubleLE=function(p,g,S){return Ke(this,p,g,!0,S)},l.prototype.writeDoubleBE=function(p,g,S){return Ke(this,p,g,!1,S)},l.prototype.copy=function(p,g,S,z){if(!l.isBuffer(p))throw new TypeError("argument should be a Buffer");if(S||(S=0),!z&&z!==0&&(z=this.length),g>=p.length&&(g=p.length),g||(g=0),z>0&&z<S&&(z=S),z===S||p.length===0||this.length===0)return 0;if(g<0)throw new RangeError("targetStart out of bounds");if(S<0||S>=this.length)throw new RangeError("Index out of range");if(z<0)throw new RangeError("sourceEnd out of bounds");z>this.length&&(z=this.length),p.length-g<z-S&&(z=p.length-g+S);const W=z-S;return this===p&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(g,S,z):Uint8Array.prototype.set.call(p,this.subarray(S,z),g),W},l.prototype.fill=function(p,g,S,z){if(typeof p=="string"){if(typeof g=="string"?(z=g,g=0,S=this.length):typeof S=="string"&&(z=S,S=this.length),z!==void 0&&typeof z!="string")throw new TypeError("encoding must be a string");if(typeof z=="string"&&!l.isEncoding(z))throw new TypeError("Unknown encoding: "+z);if(p.length===1){const te=p.charCodeAt(0);(z==="utf8"&&te<128||z==="latin1")&&(p=te)}}else typeof p=="number"?p=p&255:typeof p=="boolean"&&(p=Number(p));if(g<0||this.length<g||this.length<S)throw new RangeError("Out of range index");if(S<=g)return this;g=g>>>0,S=S===void 0?this.length:S>>>0,p||(p=0);let W;if(typeof p=="number")for(W=g;W<S;++W)this[W]=p;else{const te=l.isBuffer(p)?p:l.from(p,z),Ne=te.length;if(Ne===0)throw new TypeError('The value "'+p+'" is invalid for argument "value"');for(W=0;W<S-g;++W)this[W+g]=te[W%Ne]}return this};const Ae={};function ze(x,p,g){Ae[x]=class extends g{constructor(){super(),Object.defineProperty(this,"message",{value:p.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${x}]`,this.stack,delete this.name}get code(){return x}set code(z){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:z,writable:!0})}toString(){return`${this.name} [${x}]: ${this.message}`}}}ze("ERR_BUFFER_OUT_OF_BOUNDS",function(x){return x?`${x} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ze("ERR_INVALID_ARG_TYPE",function(x,p){return`The "${x}" argument must be of type number. Received type ${typeof p}`},TypeError),ze("ERR_OUT_OF_RANGE",function(x,p,g){let S=`The value of "${x}" is out of range.`,z=g;return Number.isInteger(g)&&Math.abs(g)>2**32?z=ft(String(g)):typeof g=="bigint"&&(z=String(g),(g>BigInt(2)**BigInt(32)||g<-(BigInt(2)**BigInt(32)))&&(z=ft(z)),z+="n"),S+=` It must be ${p}. Received ${z}`,S},RangeError);function ft(x){let p="",g=x.length;const S=x[0]==="-"?1:0;for(;g>=S+4;g-=3)p=`_${x.slice(g-3,g)}${p}`;return`${x.slice(0,g)}${p}`}function st(x,p,g){Le(p,"offset"),(x[p]===void 0||x[p+g]===void 0)&&_e(p,x.length-(g+1))}function De(x,p,g,S,z,W){if(x>g||x<p){const te=typeof p=="bigint"?"n":"";let Ne;throw p===0||p===BigInt(0)?Ne=`>= 0${te} and < 2${te} ** ${(W+1)*8}${te}`:Ne=`>= -(2${te} ** ${(W+1)*8-1}${te}) and < 2 ** ${(W+1)*8-1}${te}`,new Ae.ERR_OUT_OF_RANGE("value",Ne,x)}st(S,z,W)}function Le(x,p){if(typeof x!="number")throw new Ae.ERR_INVALID_ARG_TYPE(p,"number",x)}function _e(x,p,g){throw Math.floor(x)!==x?(Le(x,g),new Ae.ERR_OUT_OF_RANGE("offset","an integer",x)):p<0?new Ae.ERR_BUFFER_OUT_OF_BOUNDS:new Ae.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${p}`,x)}const bt=/[^+/0-9A-Za-z-_]/g;function Ge(x){if(x=x.split("=")[0],x=x.trim().replace(bt,""),x.length<2)return"";for(;x.length%4!==0;)x=x+"=";return x}function se(x,p){p=p||1/0;let g;const S=x.length;let z=null;const W=[];for(let te=0;te<S;++te){if(g=x.charCodeAt(te),g>55295&&g<57344){if(!z){if(g>56319){(p-=3)>-1&&W.push(239,191,189);continue}else if(te+1===S){(p-=3)>-1&&W.push(239,191,189);continue}z=g;continue}if(g<56320){(p-=3)>-1&&W.push(239,191,189),z=g;continue}g=(z-55296<<10|g-56320)+65536}else z&&(p-=3)>-1&&W.push(239,191,189);if(z=null,g<128){if((p-=1)<0)break;W.push(g)}else if(g<2048){if((p-=2)<0)break;W.push(g>>6|192,g&63|128)}else if(g<65536){if((p-=3)<0)break;W.push(g>>12|224,g>>6&63|128,g&63|128)}else if(g<1114112){if((p-=4)<0)break;W.push(g>>18|240,g>>12&63|128,g>>6&63|128,g&63|128)}else throw new Error("Invalid code point")}return W}function Se(x){const p=[];for(let g=0;g<x.length;++g)p.push(x.charCodeAt(g)&255);return p}function ot(x,p){let g,S,z;const W=[];for(let te=0;te<x.length&&!((p-=2)<0);++te)g=x.charCodeAt(te),S=g>>8,z=g%256,W.push(z),W.push(S);return W}function _t(x){return e.toByteArray(Ge(x))}function Oe(x,p,g,S){let z;for(z=0;z<S&&!(z+g>=p.length||z>=x.length);++z)p[z+g]=x[z];return z}function Re(x,p){return x instanceof p||x!=null&&x.constructor!=null&&x.constructor.name!=null&&x.constructor.name===p.name}function St(x){return x!==x}const nn=(function(){const x="0123456789abcdef",p=new Array(256);for(let g=0;g<16;++g){const S=g*16;for(let z=0;z<16;++z)p[S+z]=x[g]+x[z]}return p})();function xt(x){return typeof BigInt>"u"?wn:x}function wn(){throw new Error("BigInt not supported")}})(Xi)),Xi}var _h=Dh();const cr="http://www.w3.org/1999/02/22-rdf-syntax-ns#",hr="http://www.w3.org/2001/XMLSchema#",Jr="http://www.w3.org/2000/10/swap/",$t={xsd:{decimal:`${hr}decimal`,boolean:`${hr}boolean`,double:`${hr}double`,integer:`${hr}integer`,string:`${hr}string`},rdf:{type:`${cr}type`,nil:`${cr}nil`,first:`${cr}first`,rest:`${cr}rest`,langString:`${cr}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${Jr}reify#forSome`,forAll:`${Jr}reify#forAll`},log:{implies:`${Jr}log#implies`,isImpliedBy:`${Jr}log#isImpliedBy`}},{xsd:Kr}=$t,kh=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,Vs={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},Sh=/[\x00-\x20<>\\"\{\}\|\^\`]/,Ih={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},Bh=/$0^/;class Fh{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,e=e||{},this._isImpliedBy=e.isImpliedBy,this._lineMode=!!e.lineMode){this._n3Mode=!1;for(const t in this)!(t in Ih)&&this[t]instanceof RegExp&&(this[t]=Bh)}else this._n3Mode=e.n3!==!1;this.comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,t){let n=this._input,a=n.length;for(;;){let l,o;for(;l=this._newline.exec(n);)this.comments&&(o=this._comment.exec(l[0]))&&s("comment",o[1],"",this._line,l[0].length),n=n.substr(l[0].length,n.length),a=n.length,this._line++;if(!l&&(l=this._whitespace.exec(n))&&(n=n.substr(l[0].length,n.length)),this._endOfFile.test(n))return t&&(this.comments&&(o=this._comment.exec(n))&&s("comment",o[1],"",this._line,n.length),n=null,s("eof","","",this._line,0)),this._input=n;const u=this._line,d=n[0];let f="",m="",w="",y=null,C=0,T=!1;switch(d){case"^":if(n.length<3)break;if(n[1]==="^"){if(this._previousMarker="^^",n=n.substr(2),n[0]!=="<"){T=!0;break}}else{this._n3Mode&&(C=1,f="^");break}case"<":if(y=this._unescapedIri.exec(n))f="IRI",m=y[1];else if(y=this._iri.exec(n)){if(m=this._unescape(y[1]),m===null||Sh.test(m))return r(this);f="IRI"}else n.length>1&&n[1]==="<"?(f="<<",C=2):this._n3Mode&&n.length>1&&n[1]==="="&&(C=2,this._isImpliedBy?(f="abbreviation",m="<"):(f="inverse",m=">"));break;case">":n.length>1&&n[1]===">"&&(f=">>",C=2);break;case"_":((y=this._blank.exec(n))||t&&(y=this._blank.exec(`${n} `)))&&(f="blank",w="_",m=y[1]);break;case'"':if(y=this._simpleQuotedString.exec(n))m=y[1];else if({value:m,matchLength:C}=this._parseLiteral(n),m===null)return r(this);(y!==null||C!==0)&&(f="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(y=this._simpleApostropheString.exec(n))m=y[1];else if({value:m,matchLength:C}=this._parseLiteral(n),m===null)return r(this);(y!==null||C!==0)&&(f="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(y=this._variable.exec(n))&&(f="var",m=y[0]);break;case"@":this._previousMarker==="literal"&&(y=this._langcode.exec(n))?(f="langcode",m=y[1]):(y=this._keyword.exec(n))&&(f=y[0]);break;case".":if(n.length===1?t:n[1]<"0"||n[1]>"9"){f=".",C=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(y=this._number.exec(n)||t&&(y=this._number.exec(`${n} `)))&&(f="literal",m=y[0],w=typeof y[1]=="string"?Kr.double:typeof y[2]=="string"?Kr.decimal:Kr.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(y=this._sparqlKeyword.exec(n))?f=y[0].toUpperCase():T=!0;break;case"f":case"t":(y=this._boolean.exec(n))?(f="literal",m=y[0],w=Kr.boolean):T=!0;break;case"a":(y=this._shortPredicates.exec(n))?(f="abbreviation",m="a"):T=!0;break;case"=":this._n3Mode&&n.length>1&&(f="abbreviation",n[1]!==">"?(C=1,m="="):(C=2,m=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(C=1,f=d);break;case"{":!this._lineMode&&n.length>=2&&(n[1]==="|"?(f="{|",C=2):(f=d,C=1));break;case"|":n.length>=2&&n[1]==="}"&&(f="|}",C=2);break;default:T=!0}if(T&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(y=this._prefix.exec(n))?(f="prefix",m=y[1]||""):((y=this._prefixed.exec(n))||t&&(y=this._prefixed.exec(`${n} `)))&&(f="prefixed",w=y[1]||"",m=this._unescape(y[2]))),this._previousMarker==="^^")switch(f){case"prefixed":f="type";break;case"IRI":f="typeIRI";break;default:f=""}if(!f)return t||!/^'''|^"""/.test(n)&&/\n|\r/.test(n)?r(this):this._input=n;const L=C||y[0].length,R=s(f,m,w,u,L);this.previousToken=R,this._previousMarker=f,n=n.substr(L,n.length)}function s(l,o,u,d,f){const m=n?a-n.length:a,w=m+f,y={type:l,value:o,prefix:u,line:d,start:m,end:w};return e(null,y),y}function r(l){e(l._syntaxError(/^\S*/.exec(n)[0]))}}_unescape(e){let t=!1;const n=e.replace(kh,(a,s,r,l)=>{if(typeof s=="string")return String.fromCharCode(Number.parseInt(s,16));if(typeof r=="string"){let o=Number.parseInt(r,16);return o<=65535?String.fromCharCode(Number.parseInt(r,16)):String.fromCharCode(55296+((o-=65536)>>10),56320+(o&1023))}return l in Vs?Vs[l]:(t=!0,"")});return t?null:n}_parseLiteral(e){if(e.length>=3){const t=e.match(/^(?:"""|"|'''|'|)/)[0],n=t.length;let a=Math.max(this._literalClosingPos,n);for(;(a=e.indexOf(t,a))>0;){let s=0;for(;e[a-s-1]==="\\";)s++;if(s%2===0){const r=e.substring(n,a),l=r.split(/\r\n|\r|\n/).length-1,o=a+n;if(n===1&&l!==0||n===3&&this._lineMode)break;return this._line+=l,{value:this._unescape(r),matchLength:o}}a++}this._literalClosingPos=e.length-n+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const t=new Error(`Unexpected "${e}" on line ${this._line}.`);return t.context={token:void 0,line:this._line,previousToken:this.previousToken},t}_readStartingBom(e){return e.startsWith("\uFEFF")?e.substr(1):e}tokenize(e,t){if(this._line=1,typeof e=="string")if(this._input=this._readStartingBom(e),typeof t=="function")queueMicrotask(()=>this._tokenizeToEnd(t,!0));else{const n=[];let a;if(this._tokenizeToEnd((s,r)=>s?a=s:n.push(r),!0),a)throw a;return n}else this._pendingBuffer=null,typeof e.setEncoding=="function"&&e.setEncoding("utf8"),e.on("data",n=>{this._input!==null&&n.length!==0&&(this._pendingBuffer&&(n=_h.Buffer.concat([this._pendingBuffer,n]),this._pendingBuffer=null),n[n.length-1]&128?this._pendingBuffer=n:(typeof this._input>"u"?this._input=this._readStartingBom(typeof n=="string"?n:n.toString()):this._input+=n,this._tokenizeToEnd(t,!1)))}),e.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(t,!0)}),e.on("error",t)}}const{rdf:Lh,xsd:Xn}=$t;let _r,Rh=0;const Oh={namedNode:Pl,blankNode:ql,variable:zl,literal:Hl,defaultGraph:Ph,quad:ia,triple:ia,fromTerm:yr,fromQuad:jl};class fn{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof fn?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class Ml extends fn{get termType(){return"NamedNode"}}class wr extends fn{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let t=e.lastIndexOf('"')+1;return t<e.length&&e[t++]==="@"?e.substr(t).toLowerCase():""}get datatype(){return new Ml(this.datatypeString)}get datatypeString(){const e=this.id,t=e.lastIndexOf('"')+1,n=t<e.length?e[t]:"";return n==="^"?e.substr(t+2):n!=="@"?Xn.string:Lh.langString}equals(e){return e instanceof wr?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class $h extends fn{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class Mh extends fn{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}class Uh extends fn{constructor(){return super(""),_r||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}}_r=new Uh;class Ul extends fn{constructor(e,t,n,a){super(""),this._subject=e,this._predicate=t,this._object=n,this._graph=a||_r}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function Pl(i){return new Ml(i)}function ql(i){return new $h(i||`n3-${Rh++}`)}function Hl(i,e){if(typeof e=="string")return new wr(`"${i}"@${e.toLowerCase()}`);let t=e?e.value:"";return t===""&&(typeof i=="boolean"?t=Xn.boolean:typeof i=="number"&&(Number.isFinite(i)?t=Number.isInteger(i)?Xn.integer:Xn.double:(t=Xn.double,Number.isNaN(i)||(i=i>0?"INF":"-INF")))),t===""||t===Xn.string?new wr(`"${i}"`):new wr(`"${i}"^^${t}`)}function zl(i){return new Mh(i)}function Ph(){return _r}function ia(i,e,t,n){return new Ul(i,e,t,n)}function yr(i){if(i instanceof fn)return i;switch(i.termType){case"NamedNode":return Pl(i.value);case"BlankNode":return ql(i.value);case"Variable":return zl(i.value);case"DefaultGraph":return _r;case"Literal":return Hl(i.value,i.language||i.datatype);case"Quad":return jl(i);default:throw new Error(`Unexpected termType: ${i.termType}`)}}function jl(i){if(i instanceof Ul)return i;if(i.termType!=="Quad")throw new Error(`Unexpected termType: ${i.termType}`);return ia(yr(i.subject),yr(i.predicate),yr(i.object),yr(i.graph))}let Gs=0;class Vl{constructor(e){this._contextStack=[],this._graph=null,e=e||{},this._setBase(e.baseIRI),e.factory&&Gl(this,e.factory);const t=typeof e.format=="string"?e.format.match(/\w*$/)[0].toLowerCase():"",n=/turtle/.test(t),a=/trig/.test(t),s=/triple/.test(t),r=/quad/.test(t),l=this._n3Mode=/n3/.test(t),o=s||r;(this._supportsNamedGraphs=!(n||l))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(n||a||s||l),this._isImpliedBy=e.isImpliedBy,this._supportsRDFStar=t===""||/star|\*$/.test(t),o&&(this._resolveRelativeIRI=u=>null),this._blankNodePrefix=typeof e.blankNodePrefix!="string"?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new Fh({lineMode:o,n3:l,isImpliedBy:this._isImpliedBy}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){Gs=0}_setBase(e){if(!e)this._base="",this._basePath="";else{const t=e.indexOf("#");t>=0&&(e=e.substr(0,t)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}}_saveContext(e,t,n,a,s){const r=this._n3Mode;this._contextStack.push({type:e,subject:n,predicate:a,object:s,graph:t,inverse:r?this._inversePredicate:!1,blankPrefix:r?this._prefixes._:"",quantified:r?this._quantified:null}),r&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,t){const n=this._contextStack.pop();if(!n||n.type!==e)return this._error(`Unexpected ${t.type}`,t);this._subject=n.subject,this._predicate=n.predicate,this._object=n.object,this._graph=n.graph,this._n3Mode&&(this._inversePredicate=n.inverse,this._prefixes._=n.blankPrefix,this._quantified=n.quantified)}_readInTopContext(e){switch(e.type){case"eof":return this._graph!==null?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,t){let n;switch(e.type){case"IRI":case"typeIRI":const a=this._resolveIRI(e.value);if(a===null)return this._error("Invalid IRI",e);n=this._factory.namedNode(a);break;case"type":case"prefixed":const s=this._prefixes[e.prefix];if(s===void 0)return this._error(`Undefined prefix "${e.prefix}:"`,e);n=this._factory.namedNode(s+e.value);break;case"blank":n=this._factory.blankNode(this._prefixes[e.prefix]+e.value);break;case"var":n=this._factory.variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!t&&this._n3Mode&&n.id in this._quantified&&(n=this._quantified[n.id]),n}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._factory.blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._factory.blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier="blankNode",this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier="variable",this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(e.prefix.length===0)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._subject=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const t=e.type;switch(t){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${t}`,e):(this._subject=null,t==="]"?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._factory.blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if((this._predicate=this._readEntity(e))===void 0)return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(e.prefix.length===0)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._factory.blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._object=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return e.type==="{"?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return e.type!=="{"?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return e.type==="]"?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if(e.type!=="]")return this._readBlankNodePunctuation(e);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const t=this._predicate===null;return this._restoreContext("blank",e),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:t?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let t=null,n=null,a=this._readListItem;const s=this._subject,r=this._contextStack,l=r[r.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,n=this._factory.blankNode(),this.RDF_FIRST,this._subject=t=this._factory.blankNode()),a=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,n=this._factory.blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),r.length!==0&&r[r.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(a=this._readPredicate,this._subject===this.RDF_NIL)return a}else if(a=this._getContextEndReader(),this._object===this.RDF_NIL)return a;n=this.RDF_NIL;break;case"literal":e.prefix.length===0?(this._literalValue=e.value,a=this._readListItemDataTypeOrLang):(t=this._factory.literal(e.value,this._factory.namedNode(e.prefix)),a=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if((t=this._readEntity(e))===void 0)return}if(n===null&&(this._subject=n=this._factory.blankNode()),s===null?l.predicate===null?l.subject=n:l.object=n:this._emit(s,this.RDF_REST,n,this._graph),t!==null){if(this._n3Mode&&(e.type==="IRI"||e.type==="prefixed"))return this._saveContext("item",this._graph,n,this.RDF_FIRST,t),this._subject=t,this._predicate=null,this._getPathReader(this._readListItem);this._emit(n,this.RDF_FIRST,t,this._graph)}return a}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let t=this._factory.literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const n=this._readEntity(e);if(n===void 0)return;t=this._factory.literal(this._literalValue,n),e=null;break;case"langcode":t=this._factory.literal(this._literalValue,e.value),e=null;break}return{token:e,literal:t}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,t){const n=this._completeLiteral(e);if(n)return this._object=n.literal,t&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),n.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(n.token))}_readFormulaTail(e){return e.type!=="}"?this._readPunctuation(e):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let t,n=this._graph;const a=this._subject,s=this._inversePredicate;switch(e.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,t=this._contextStack.length?this._readSubject:this._readInTopContext,s&&(this._inversePredicate=!1);break;case";":t=this._readPredicate;break;case",":t=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",e);const r=this._predicate,l=this._object;this._subject=this._factory.quad(a,r,l,this.DEFAULTGRAPH),t=this._readPredicate;break;case"|}":if(this._subject.termType!=="Quad")return this._error("Unexpected asserted triple closing",e);this._subject=null,t=this._readPunctuation;break;default:if(this._supportsQuads&&this._graph===null&&(n=this._readEntity(e))!==void 0){t=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(a!==null){const r=this._predicate,l=this._object;s?this._emit(l,r,a,n):this._emit(a,r,l,n)}return t}_readBlankNodePunctuation(e){let t;switch(e.type){case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),t}_readQuadPunctuation(e){return e.type!=="."?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return e.type!=="prefix"?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if(e.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const t=this._readEntity(e);return this._prefixes[this._prefix]=t.value,this._prefixCallback(this._prefix,t),this._readDeclarationPunctuation}_readBaseIRI(e){const t=e.type==="IRI"&&this._resolveIRI(e.value);return t?(this._setBase(t),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return e.type!=="]"?this._error("Invalid graph label",e):(this._subject=this._factory.blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):e.type!=="."?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let t;switch(e.type){case"IRI":case"prefixed":if((t=this._readEntity(e,!0))!==void 0)break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,t,this.QUANTIFIERS_GRAPH)):this._quantified[t.id]=this._factory[this._quantifier](this._factory.blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return e.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const t=this._contextStack,n=t.length&&t[t.length-1];if(n&&n.type==="item"){const a=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,a,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let t,n;const a=this._factory.blankNode();if((n=this._readEntity(e))!==void 0)return this._predicate===null?(t=this._subject,this._subject=a):(t=this._object,this._object=a),this._emit(t,n,a,this._graph),this._readPath}_readBackwardPath(e){const t=this._factory.blankNode();let n,a;if((n=this._readEntity(e))!==void 0)return this._predicate===null?(a=this._subject,this._subject=t):(a=this._object,this._object=t),this._emit(t,n,a,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return e.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(e))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(e.type!==">>")return this._error(`Expected >> but got ${e.type}`,e);const t=this._factory.quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),this._subject===null?(this._subject=t,this._readPredicate):(this._object=t,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,t,n,a){this._callback(null,this._factory.quad(e,t,n,a||this.DEFAULTGRAPH))}_error(e,t){const n=new Error(`${e} on line ${t.line}.`);n.context={token:t,line:t.line,previousToken:this._lexer.previousToken},this._callback(n),this._callback=ei}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return(e[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const t=e.length;let n="",a=-1,s=-1,r=0,l="/";for(;a<t;){switch(l){case":":if(s<0&&e[++a]==="/"&&e[++a]==="/")for(;(s=a+1)<t&&e[s]!=="/";)a=s;break;case"?":case"#":a=t;break;case"/":if(e[a+1]===".")switch(l=e[++a+1],l){case"/":n+=e.substring(r,a-1),r=a+1;break;case void 0:case"?":case"#":return n+e.substring(r,a)+e.substr(a+1);case".":if(l=e[++a+1],l===void 0||l==="/"||l==="?"||l==="#"){if(n+=e.substring(r,a-2),(r=n.lastIndexOf("/"))>=s&&(n=n.substr(0,r)),l!=="/")return`${n}/${e.substr(a+1)}`;r=a+1}}}l=e[++a]}return n+e.substring(r)}parse(e,t,n){let a,s,r;if(t&&(t.onQuad||t.onPrefix||t.onComment)?(a=t.onQuad,s=t.onPrefix,r=t.onComment):(a=t,s=n),this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${Gs++}_`,this._prefixCallback=s||ei,this._inversePredicate=!1,this._quantified=Object.create(null),!a){const o=[];let u;if(this._callback=(d,f)=>{d?u=d:f&&o.push(f)},this._lexer.tokenize(e).every(d=>this._readCallback=this._readCallback(d)),u)throw u;return o}let l=(o,u)=>{o!==null?(this._callback(o),this._callback=ei):this._readCallback&&(this._readCallback=this._readCallback(u))};r&&(this._lexer.comments=!0,l=(o,u)=>{o!==null?(this._callback(o),this._callback=ei):this._readCallback&&(u.type==="comment"?r(u.value):this._readCallback=this._readCallback(u))}),this._callback=a,this._lexer.tokenize(e,l)}}function ei(){}function Gl(i,e){i._factory=e,i.DEFAULTGRAPH=e.defaultGraph(),i.RDF_FIRST=e.namedNode($t.rdf.first),i.RDF_REST=e.namedNode($t.rdf.rest),i.RDF_NIL=e.namedNode($t.rdf.nil),i.N3_FORALL=e.namedNode($t.r.forAll),i.N3_FORSOME=e.namedNode($t.r.forSome),i.ABBREVIATIONS={a:e.namedNode($t.rdf.type),"=":e.namedNode($t.owl.sameAs),">":e.namedNode($t.log.implies),"<":e.namedNode($t.log.isImpliedBy)},i.QUANTIFIERS_GRAPH=e.namedNode("urn:n3:quantifiers")}Gl(Vl.prototype,Oh);if(typeof mn>"u")var mn={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12};class ye{constructor(e,t){this.options=t||{},this.kb=e,this.target=t.target||{graph:{subjects:{},prefixes:{},terms:{}}},this.blankNodes=[],this.htmlOptions={selfClosing:"br img input area base basefont col colgroup source wbr isindex link meta param hr"},this.theOne="_:"+new Date().getTime(),this.language=null,this.vocabulary=null,this.blankCounter=0,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}],this.inXHTMLMode=!1,this.absURIRE=/[\w\_\-]+:\S+/,this.finishedHandlers=[],this.init()}addTriple(e,t,n,a){var s,r,l,o;typeof t>"u"?s=Mt.namedNode(this.options.base):s=this.toRDFNodeObject(t),l=this.toRDFNodeObject(n),r=this.toRDFNodeObject(a),o=Mt.namedNode(this.options.base),this.kb.add(s,l,r,o)}ancestorPath(e){for(var t="";e&&e.nodeType!==mn.DOCUMENT_NODE;)t="/"+e.localName+t,e=e.parentNode;return t}copyMappings(e){var t={};for(var n in e)t[n]=e[n];return t}copyProperties(){}deriveDateTimeType(e){for(var t=0;t<ye.dateTimeTypes.length;t++){var n=ye.dateTimeTypes[t].pattern.exec(e);if(n&&n[0].length===e.length)return ye.dateTimeTypes[t].type}return null}init(){}newBlankNode(){return this.blankCounter++,"_:"+this.blankCounter}newSubjectOrigin(e,t){}parseCURIE(e,t,n){var a=e.indexOf(":"),s;if(a>=0){var r=e.substring(0,a);if(r==="")return s=t[""],s?s+e.substring(a+1):null;if(r==="_")return"_:"+e.substring(a+1);if(ye.NCNAME.test(r)&&(s=t[r],s))return s+e.substring(a+1)}return null}parseCURIEOrURI(e,t,n){var a=this.parseCURIE(e,t,n);return a||this.resolveAndNormalize(n,e)}parsePredicate(e,t,n,a,s,r){if(e==="")return null;var l=this.parseTermOrCURIEOrAbsURI(e,t,r?null:n,a,s);return l&&l.indexOf("_:")===0?null:l}parsePrefixMappings(e,t){for(var n=this.tokenize(e),a=null,s=0;s<n.length;s++)n[s][n[s].length-1]===":"?a=n[s].substring(0,n[s].length-1):a&&(t[a]=this.options.base?Dt(n[s],this.options.base):n[s],a=null)}static parseRDFaDOM(e,t,n){var a=new ye(t,{base:n});e.baseURI||(e.baseURI=n),a.process(e,{baseURI:n})}parseSafeCURIEOrCURIEOrURI(e,t,n){return e=this.trim(e),e.charAt(0)==="["&&e.charAt(e.length-1)==="]"?(e=e.substring(1,e.length-1),e=e.trim(e),e.length===0?null:e==="_:"?this.theOne:this.parseCURIE(e,t,n)):this.parseCURIEOrURI(e,t,n)}parseTermOrCURIEOrAbsURI(e,t,n,a,s){e=this.trim(e);var r=this.parseCURIE(e,a,s);if(r)return r;if(n){if(t&&!this.absURIRE.exec(e))return t+e;var l=n[e];if(l)return l;var o=e.toLowerCase();if(l=n[o],l)return l}return this.absURIRE.exec(e)?this.resolveAndNormalize(s,e):null}parseTermOrCURIEOrURI(e,t,n,a,s){e=this.trim(e);var r=this.parseCURIE(e,a,s);if(r)return r;var l=n[e];if(l)return l;var o=e.toLowerCase();return l=n[o],l||(t&&!this.absURIRE.exec(e)?t+e:this.resolveAndNormalize(s,e))}parseURI(e){return e}process(e,t){t=t||{};var n;e.nodeType===mn.DOCUMENT_NODE?(e.baseURI&&!t.baseURI&&(t.baseURI=e.baseURI),n=e.baseURI,e=e.documentElement,e.baseURI||(e.baseURI=n),this.setContext(e)):e.parentNode.nodeType===mn.DOCUMENT_NODE&&this.setContext(e);var a=[],s=function(se){if(!se&&t&&t.baseURI)return t.baseURI;var Se=se.indexOf("#");return Se>=0&&(se=se.substring(0,Se)),t&&t.baseURIMap&&(se=t.baseURIMap(se)),se};for(a.push({current:e,context:this.push(null,s(e.baseURI))});a.length>0;){var r=a.shift();if(r.parent){if(r.context.parent&&r.context.parent.listMapping===r.listMapping)continue;for(let se in r.listMapping){var l=r.listMapping[se];if(l.length===0){this.addTriple(r.parent,r.subject,se,{type:ye.objectURI,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"});continue}var o=[];for(let Se=0;Se<l.length;Se++)o.push(this.newBlankNode());for(let Se=0;Se<o.length;Se++)this.addTriple(r.parent,o[Se],"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",l[Se]),this.addTriple(r.parent,o[Se],"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",{type:ye.objectURI,value:Se+1<o.length?o[Se+1]:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"});this.addTriple(r.parent,r.subject,se,{type:ye.objectURI,value:o[0]})}continue}var u=r.current,d=r.context,f=!1,m=null,w=null,y=null,C=d.prefixes,T=!1,L=[],R=d.listMapping,Z=!d.parent,Y=d.language,N=d.vocabulary;n=this.parseURI(s(u.baseURI)),u.item=null;var j=u.getAttributeNode("vocab");if(j){let se=this.trim(j.value);if(se.length>0){N=se;var $=n.spec;this.addTriple(u,$,"http://www.w3.org/ns/rdfa#usesVocabulary",{type:ye.objectURI,value:N})}else N=this.vocabulary}for(var G=0;G<u.attributes.length;G++){var F=u.attributes[G];if(F.nodeName.charAt(0)==="x"&&F.nodeName.indexOf("xmlns:")===0){T||(C=this.copyMappings(C),T=!0);var H=F.nodeName.substring(6),P=ye.trim(F.value);C[H]=this.options.base?Dt(P,this.options.base):P}}var q=u.getAttributeNode("prefix");q&&(T||(C=this.copyMappings(C),T=!0),this.parsePrefixMappings(q.value,C));var ee=null;for(let se=0;!ee&&se<this.langAttributes.length;se++)ee=u.getAttributeNodeNS(this.langAttributes[se].namespaceURI,this.langAttributes[se].localName);if(ee){let se=ye.trim(ee.value);se.length>0?Y=se:Y=null}var J=u.getAttributeNode("rel"),_=u.getAttributeNode("rev"),V=u.getAttributeNode("typeof"),K=u.getAttributeNode("property"),ie=u.getAttributeNode("datatype"),ae=this.inHTMLMode?u.getAttributeNode("datetime"):null,oe=u.getAttributeNode("content"),ne=u.getAttributeNode("about"),ge=u.getAttributeNode("src"),Fe=u.getAttributeNode("resource"),pe=u.getAttributeNode("href"),Ce=u.getAttributeNode("inlist"),Pe=[],Ke,Ae;if(J){Ae=this.tokenize(J.value);for(let se=0;se<Ae.length;se++)Ke=this.parsePredicate(Ae[se],N,d.terms,C,n,this.inHTMLMode&&K!==null),Ke&&Pe.push(Ke)}var ze=[];if(_){Ae=this.tokenize(_.value);for(let se=0;se<Ae.length;se++)Ke=this.parsePredicate(Ae[se],N,d.terms,C,n,this.inHTMLMode&&K),Ke&&ze.push(Ke)}if(this.inHTMLMode&&(J||_)&&K&&(Pe.length===0&&(J=null),ze.length===0&&(_=null)),J||_?(ne&&(m=this.parseSafeCURIEOrCURIEOrURI(ne.value,C,n)),V&&(y=m),m||(u.parentNode.nodeType===mn.DOCUMENT_NODE?m=s(u.baseURI):d.parentObject&&(m=s(u.parentNode.baseURI)===d.parentObject?s(u.baseURI):d.parentObject)),Fe&&(w=this.parseSafeCURIEOrCURIEOrURI(Fe.value,C,n)),w||(pe?w=this.resolveAndNormalize(n,encodeURI(pe.value)):ge?w=this.resolveAndNormalize(n,encodeURI(ge.value)):V&&!ne&&!(this.inXHTMLMode&&(u.localName==="head"||u.localName==="body"))&&(w=this.newBlankNode())),V&&!ne&&this.inXHTMLMode&&(u.localName==="head"||u.localName==="body")?y=m:V&&!ne&&(y=w)):K&&!oe&&!ie?(ne&&(m=this.parseSafeCURIEOrCURIEOrURI(ne.value,C,n),V&&(y=m)),!m&&u.parentNode.nodeType===mn.DOCUMENT_NODE?(m=s(u.baseURI),V&&(y=m)):!m&&d.parentObject&&(m=s(u.parentNode.baseURI)===d.parentObject?s(u.baseURI):d.parentObject),V&&!y&&(Fe&&(y=this.parseSafeCURIEOrCURIEOrURI(Fe.value,C,n)),!y&&pe&&(y=this.resolveAndNormalize(n,encodeURI(pe.value))),!y&&ge&&(y=this.resolveAndNormalize(n,encodeURI(ge.value))),!y&&(this.inXHTMLMode||this.inHTMLMode)&&(u.localName==="head"||u.localName==="body")&&(y=m),y||(y=this.newBlankNode()),w=y)):(ne&&(m=this.parseSafeCURIEOrCURIEOrURI(ne.value,C,n)),!m&&Fe&&(m=this.parseSafeCURIEOrCURIEOrURI(Fe.value,C,n)),!m&&pe&&(m=this.resolveAndNormalize(n,encodeURI(pe.value))),!m&&ge&&(m=this.resolveAndNormalize(n,encodeURI(ge.value))),m||(u.parentNode.nodeType===mn.DOCUMENT_NODE?m=s(u.baseURI):(this.inXHTMLMode||this.inHTMLMode)&&(u.localName==="head"||u.localName==="body")?m=s(u.parentNode.baseURI)===d.parentObject?s(u.baseURI):d.parentObject:V?m=this.newBlankNode():d.parentObject&&(m=s(u.parentNode.baseURI)===d.parentObject?s(u.baseURI):d.parentObject,K||(f=!0))),V&&(y=m)),m&&(ne||Fe||y)){var ft=m;V&&!ne&&!Fe&&w&&(ft=w),this.newSubjectOrigin(u,ft)}if(y){Ae=this.tokenize(V.value);for(let se=0;se<Ae.length;se++){var st=this.parseTermOrCURIEOrAbsURI(Ae[se],N,d.terms,C,n);st&&this.addTriple(u,y,ye.typeURI,{type:ye.objectURI,value:st})}}if(m&&m!==d.parentObject&&(R={},Z=!0),w){if(J&&Ce)for(let se=0;se<Pe.length;se++){let Se=R[Pe[se]];Se||(Se=[],R[Pe[se]]=Se),Se.push({type:ye.objectURI,value:w})}else if(J)for(let se=0;se<Pe.length;se++)this.addTriple(u,m,Pe[se],{type:ye.objectURI,value:w});if(_)for(let se=0;se<ze.length;se++)this.addTriple(u,w,ze[se],{type:ye.objectURI,value:m})}else{if(m&&!w&&(J||_)&&(w=this.newBlankNode()),J&&Ce)for(let se=0;se<Pe.length;se++){let Se=R[Pe[se]];Se||(Se=[],R[Ke]=Se),L.push({predicate:Pe[se],list:Se})}else if(J)for(let se=0;se<Pe.length;se++)L.push({predicate:Pe[se],forward:!0});if(_)for(let se=0;se<ze.length;se++)L.push({predicate:ze[se],forward:!1})}if(K){var De=null,Le=null;ie?(De=ie.value===""?ye.PlainLiteralURI:this.parseTermOrCURIEOrAbsURI(ie.value,N,d.terms,C,n),ae&&!oe?Le=ae.value:Le=De===ye.XMLLiteralURI||De===ye.HTMLLiteralURI?null:oe?oe.value:u.textContent):oe?(De=ye.PlainLiteralURI,Le=oe.value):ae?(Le=ae.value,De=ye.deriveDateTimeType(Le),De||(De=ye.PlainLiteralURI)):!J&&!_&&(Fe&&(Le=this.parseSafeCURIEOrCURIEOrURI(Fe.value,C,n)),!Le&&pe?Le=this.resolveAndNormalize(n,encodeURI(pe.value)):!Le&&ge&&(Le=this.resolveAndNormalize(n,encodeURI(ge.value))),Le&&(De=ye.objectURI)),De||(V&&!ne?(De=ye.objectURI,Le=y):(Le=u.textContent,this.inHTMLMode&&u.localName==="time"&&(De=ye.deriveDateTimeType(Le)),De||(De=ye.PlainLiteralURI))),Ae=this.tokenize(K.value);for(let se=0;se<Ae.length;se++){let Se=this.parsePredicate(Ae[se],N,d.terms,C,n);if(Se)if(Ce){let ot=R[Se];ot||(ot=[],R[Se]=ot),ot.push(De===ye.XMLLiteralURI||De===ye.HTMLLiteralURI?{type:De,value:u.childNodes}:{type:De||ye.PlainLiteralURI,value:Le,language:Y})}else De===ye.XMLLiteralURI||De===ye.HTMLLiteralURI?this.addTriple(u,m,Se,{type:De,value:u.childNodes}):this.addTriple(u,m,Se,{type:De||ye.PlainLiteralURI,value:Le,language:Y})}}if(m&&!f)for(let se=0;se<d.incomplete.length;se++)d.incomplete[se].list?d.incomplete[se].list.push({type:ye.objectURI,value:m}):d.incomplete[se].forward?this.addTriple(u,d.subject,d.incomplete[se].predicate,{type:ye.objectURI,value:m}):this.addTriple(u,m,d.incomplete[se].predicate,{type:ye.objectURI,value:d.subject});var _e=null,bt=m;f?(_e=this.push(d,d.subject),_e.parentObject=s(u.parentNode.baseURI)===d.parentObject?s(u.baseURI):d.parentObject,_e.incomplete=d.incomplete,_e.language=Y,_e.prefixes=C,_e.vocabulary=N):(_e=this.push(d,m),_e.parentObject=w||m||d.subject,_e.prefixes=C,_e.incomplete=L,w&&(bt=w,R={},Z=!0),_e.listMapping=R,_e.language=Y,_e.vocabulary=N),Z&&a.unshift({parent:u,context:d,subject:bt,listMapping:R});for(var Ge=u.lastChild;Ge;Ge=Ge.previousSibling)Ge.nodeType===mn.ELEMENT_NODE&&a.unshift({current:Ge,context:_e})}this.inHTMLMode&&this.copyProperties();for(let se=0;se<this.finishedHandlers.length;se++)this.finishedHandlers[se](e)}push(e,t){return{parent:e,subject:t||(e?e.subject:null),parentObject:null,incomplete:[],listMapping:e?e.listMapping:{},language:e?e.language:this.language,prefixes:e?e.prefixes:this.target.graph.prefixes,terms:e?e.terms:this.target.graph.terms,vocabulary:e?e.vocabulary:this.vocabulary}}resolveAndNormalize(e,t){return Dt(t,e)}setContext(e){e.localName==="html"&&e.getAttribute("version")==="XHTML+RDFa 1.1"?this.setXHTMLContext():e.localName==="html"||e.namespaceURI==="http://www.w3.org/1999/xhtml"?typeof document<"u"&&document.doctype?document.doctype.publicId==="-//W3C//DTD XHTML+RDFa 1.0//EN"&&document.doctype.systemId==="http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd"?(console.log("WARNING: RDF 1.0 is not supported.  Defaulting to HTML5 mode."),this.setHTMLContext()):document.doctype.publicId==="-//W3C//DTD XHTML+RDFa 1.1//EN"&&document.doctype.systemId==="http://www.w3.org/MarkUp/DTD/xhtml-rdfa-2.dtd"?this.setXHTMLContext():this.setHTMLContext():this.setHTMLContext():this.setXMLContext()}setHTMLContext(){this.setInitialContext(),this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}],this.inXHTMLMode=!1,this.inHTMLMode=!0}setInitialContext(){this.vocabulary=null,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}]}setXHTMLContext(){this.setInitialContext(),this.inXHTMLMode=!0,this.inHTMLMode=!1,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}],this.target.graph.terms.alternate="http://www.w3.org/1999/xhtml/vocab#alternate",this.target.graph.terms.appendix="http://www.w3.org/1999/xhtml/vocab#appendix",this.target.graph.terms.bookmark="http://www.w3.org/1999/xhtml/vocab#bookmark",this.target.graph.terms.cite="http://www.w3.org/1999/xhtml/vocab#cite",this.target.graph.terms.chapter="http://www.w3.org/1999/xhtml/vocab#chapter",this.target.graph.terms.contents="http://www.w3.org/1999/xhtml/vocab#contents",this.target.graph.terms.copyright="http://www.w3.org/1999/xhtml/vocab#copyright",this.target.graph.terms.first="http://www.w3.org/1999/xhtml/vocab#first",this.target.graph.terms.glossary="http://www.w3.org/1999/xhtml/vocab#glossary",this.target.graph.terms.help="http://www.w3.org/1999/xhtml/vocab#help",this.target.graph.terms.icon="http://www.w3.org/1999/xhtml/vocab#icon",this.target.graph.terms.index="http://www.w3.org/1999/xhtml/vocab#index",this.target.graph.terms.last="http://www.w3.org/1999/xhtml/vocab#last",this.target.graph.terms.license="http://www.w3.org/1999/xhtml/vocab#license",this.target.graph.terms.meta="http://www.w3.org/1999/xhtml/vocab#meta",this.target.graph.terms.next="http://www.w3.org/1999/xhtml/vocab#next",this.target.graph.terms.prev="http://www.w3.org/1999/xhtml/vocab#prev",this.target.graph.terms.previous="http://www.w3.org/1999/xhtml/vocab#previous",this.target.graph.terms.section="http://www.w3.org/1999/xhtml/vocab#section",this.target.graph.terms.stylesheet="http://www.w3.org/1999/xhtml/vocab#stylesheet",this.target.graph.terms.subsection="http://www.w3.org/1999/xhtml/vocab#subsection",this.target.graph.terms.start="http://www.w3.org/1999/xhtml/vocab#start",this.target.graph.terms.top="http://www.w3.org/1999/xhtml/vocab#top",this.target.graph.terms.up="http://www.w3.org/1999/xhtml/vocab#up",this.target.graph.terms.p3pv1="http://www.w3.org/1999/xhtml/vocab#p3pv1",this.target.graph.terms.related="http://www.w3.org/1999/xhtml/vocab#related",this.target.graph.terms.role="http://www.w3.org/1999/xhtml/vocab#role",this.target.graph.terms.transformation="http://www.w3.org/1999/xhtml/vocab#transformation"}setXMLContext(){this.setInitialContext(),this.inXHTMLMode=!1,this.inHTMLMode=!1}tokenize(e){return this.trim(e).split(/\s+/)}static tokenize(e){return this.trim(e).split(/\s+/)}toRDFNodeObject(e){if(!(typeof e>"u")){if(typeof e=="string")return e.substring(0,2)==="_:"?(typeof this.blankNodes[e.substring(2)]>"u"&&(this.blankNodes[e.substring(2)]=new Jt(e.substring(2))),this.blankNodes[e.substring(2)]):Mt.namedNode(e);switch(e.type){case ye.objectURI:return e.value.substring(0,2)==="_:"?(typeof this.blankNodes[e.value.substring(2)]>"u"&&(this.blankNodes[e.value.substring(2)]=new Jt(e.value.substring(2))),this.blankNodes[e.value.substring(2)]):Mt.namedNode(e.value);case ye.PlainLiteralURI:return new Yt(e.value,e.language||"");case ye.XMLLiteralURI:case ye.HTMLLiteralURI:var t="";return Object.keys(e.value).forEach(n=>{t+=Qc(e.value[n],this.htmlOptions)}),new Yt(t,"",new mt(e.type));default:return new Yt(e.value,"",new mt(e.type))}}}trim(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}static trim(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}}ye.XMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral";ye.HTMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML";ye.PlainLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral";ye.objectURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#object";ye.typeURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#type";ye.nameChar="[-A-Z_a-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�က0-F.0-9·̀-ͯ‿-⁀]";ye.nameStartChar="[A-Za-zÀ-ÖØ-öø-ÿĀ-ıĴ-ľŁ-ňŊ-žƀ-ǃǍ-ǰǴ-ǵǺ-ȗɐ-ʨʻ-ˁΆΈ-ΊΌΎ-ΡΣ-ώϐ-ϖϚϜϞϠϢ-ϳЁ-ЌЎ-яё-ќў-ҁҐ-ӄӇ-ӈӋ-ӌӐ-ӫӮ-ӵӸ-ӹԱ-Ֆՙա-ֆא-תװ-ײء-غف-يٱ-ڷں-ھۀ-ێې-ۓەۥ-ۦअ-हऽक़-ॡঅ-ঌএ-ঐও-নপ-রলশ-হড়-ঢ়য়-ৡৰ-ৱਅ-ਊਏ-ਐਓ-ਨਪ-ਰਲ-ਲ਼ਵ-ਸ਼ਸ-ਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઋઍએ-ઑઓ-નપ-રલ-ળવ-હઽૠଅ-ଌଏ-ଐଓ-ନପ-ରଲ-ଳଶ-ହଽଡ଼-ଢ଼ୟ-ୡஅ-ஊஎ-ஐஒ-கங-சஜஞ-டண-தந-பம-வஷ-ஹఅ-ఌఎ-ఐఒ-నప-ళవ-హౠ-ౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹೞೠ-ೡഅ-ഌഎ-ഐഒ-നപ-ഹൠ-ൡก-ฮะา-ำเ-ๅກ-ຂຄງ-ຈຊຍດ-ທນ-ຟມ-ຣລວສ-ຫອ-ຮະາ-ຳຽເ-ໄཀ-ཇཉ-ཀྵႠ-Ⴥა-ჶᄀᄂ-ᄃᄅ-ᄇᄉᄋ-ᄌᄎ-ᄒᄼᄾᅀᅌᅎᅐᅔ-ᅕᅙᅟ-ᅡᅣᅥᅧᅩᅭ-ᅮᅲ-ᅳᅵᆞᆨᆫᆮ-ᆯᆷ-ᆸᆺᆼ-ᇂᇫᇰᇹḀ-ẛẠ-ỹἀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼΩK-Å℮ↀ-ↂぁ-ゔァ-ヺㄅ-ㄬ가-힣一-龥〇〡-〩_]";ye.NCNAME=new RegExp("^"+ye.nameStartChar+ye.nameChar+"*$");ye.dateTimeTypes=[{pattern:/-?P(?:[0-9]+Y)?(?:[0-9]+M)?(?:[0-9]+D)?(?:T(?:[0-9]+H)?(?:[0-9]+M)?(?:[0-9]+(?:\.[0-9]+)?S)?)?/,type:"http://www.w3.org/2001/XMLSchema#duration"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9]T(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#dateTime"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9](?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#date"},{pattern:/(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#time"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]/,type:"http://www.w3.org/2001/XMLSchema#gYearMonth"},{pattern:/-?[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9]/,type:"http://www.w3.org/2001/XMLSchema#gYear"}];const fi=ye.parseRDFaDOM;class ke{constructor(e){this.store=e,this.bnodes={},this.why=null,this.reify=!1}frameFactory(e,t,n){return{NODE:1,ARC:2,parent:t,parser:e,store:e.store,element:n,lastChild:0,base:null,lang:null,node:null,nodeType:null,listIndex:1,rdfid:null,datatype:null,collection:!1,terminateFrame:function(){this.collection&&this.node.close()},addSymbol:function(a,s){s=Dt(s,this.base),this.node=this.store.sym(s),this.nodeType=a},loadTriple:function(){if(this.parent.parent.collection?this.parent.parent.node.append(this.node):this.store.add(this.parent.parent.node,this.parent.node,this.node,this.parser.why),this.parent.rdfid!=null){var a=this.store.sym(Dt("#"+this.parent.rdfid,this.base));this.store.add(a,this.store.sym(ke.ns.RDF+"type"),this.store.sym(ke.ns.RDF+"Statement"),this.parser.why),this.store.add(a,this.store.sym(ke.ns.RDF+"subject"),this.parent.parent.node,this.parser.why),this.store.add(a,this.store.sym(ke.ns.RDF+"predicate"),this.parent.node,this.parser.why),this.store.add(a,this.store.sym(ke.ns.RDF+"object"),this.node,this.parser.why)}},isTripleToLoad:function(){return this.parent!=null&&this.parent.parent!=null&&this.nodeType===this.NODE&&this.parent.nodeType===this.ARC&&this.parent.parent.nodeType===this.NODE},addNode:function(a){this.addSymbol(this.NODE,a),this.isTripleToLoad()&&this.loadTriple()},addCollection:function(){this.nodeType=this.NODE,this.node=this.store.collection(),this.collection=!0,this.isTripleToLoad()&&this.loadTriple()},addCollectionArc:function(){this.nodeType=this.ARC},addBNode:function(a){a!=null?this.parser.bnodes[a]!=null?this.node=this.parser.bnodes[a]:this.node=this.parser.bnodes[a]=this.store.bnode():this.node=this.store.bnode(),this.nodeType=this.NODE,this.isTripleToLoad()&&this.loadTriple()},addArc:function(a){a===ke.ns.RDF+"li"&&(a=ke.ns.RDF+"_"+this.parent.listIndex,this.parent.listIndex++),this.addSymbol(this.ARC,a)},addLiteral:function(a){this.parent.datatype&&this.parent.datatype!==ke.ns.RDF+"langString"?this.node=this.store.literal(a,this.store.sym(this.parent.datatype)):this.node=this.store.literal(a,this.lang),this.nodeType=this.NODE,this.isTripleToLoad()&&this.loadTriple()}}}getAttributeNodeNS(e,t,n){var a=null;if(e.getAttributeNodeNS)a=e.getAttributeNodeNS(t,n);else for(var s=e.attributes,r,l,o=0;o<s.length;++o)if(r=s[o],r.namespaceURI===t&&(l=r.prefix?r.prefix+":"+n:n,l===r.nodeName)){a=r;break}return a}parse(e,t,n){var a=e.childNodes;this.cleanParser();var s;if(e.nodeType===ke.nodeType.DOCUMENT){for(var r=0;r<a.length;r++)if(a[r].nodeType===ke.nodeType.ELEMENT){s=a[r];break}}else if(e.nodeType===ke.nodeType.ELEMENT)s=e;else throw new Error("RDFParser: can't find root in "+t+". Halting. ");this.why=n;var l=this.frameFactory(this);return this.base=t,l.base=t,l.lang=null,this.parseDOM(this.buildFrame(l,s)),!0}parseDOM(e){for(var t,n=(function(Y){var N="";if(Y.namespaceURI==null)throw new Error("RDF/XML syntax error: No namespace for "+Y.localName+" in "+this.base);return Y.namespaceURI&&(N=N+Y.namespaceURI),Y.localName?N=N+Y.localName:Y.nodeName&&(Y.nodeName.indexOf(":")>=0?N=N+Y.nodeName.split(":")[1]:N=N+Y.nodeName),N}).bind(this),a=!0;e.parent;){var s=e.element,r=s.attributes;if(s.nodeType===ke.nodeType.TEXT||s.nodeType===ke.nodeType.CDATA_SECTION)e.parent.nodeType===e.NODE&&(e.addArc(ke.ns.RDF+"value"),e=this.buildFrame(e)),e.addLiteral(s.nodeValue);else if(n(s)!==ke.ns.RDF+"RDF")if(e.parent&&e.parent.collection&&(e.addCollectionArc(),e=this.buildFrame(e,e.element),e.parent.element=null),!e.parent||!e.parent.nodeType||e.parent.nodeType===e.ARC){var l=this.getAttributeNodeNS(s,ke.ns.RDF,"about");if(t=this.getAttributeNodeNS(s,ke.ns.RDF,"ID"),l&&t)throw new Error("RDFParser: "+s.nodeName+" has both rdf:id and rdf:about. Halting. Only one of these properties may be specified on a node.");if(!l&&t)e.addNode("#"+t.nodeValue),s.removeAttributeNode(t);else if(l==null&&t==null){var o=this.getAttributeNodeNS(s,ke.ns.RDF,"nodeID");o?(e.addBNode(o.nodeValue),s.removeAttributeNode(o)):e.addBNode()}else e.addNode(l.nodeValue),s.removeAttributeNode(l);var u=this.getAttributeNodeNS(s,ke.ns.RDF,"type");ke.ns.RDF+"Description"!==n(s)&&(u={nodeValue:n(s)}),u!=null&&(this.store.add(e.node,this.store.sym(ke.ns.RDF+"type"),this.store.sym(Dt(u.nodeValue,e.base)),this.why),u.nodeName&&s.removeAttributeNode(u));for(var d=r.length-1;d>=0;d--)this.store.add(e.node,this.store.sym(n(r[d])),this.store.literal(r[d].nodeValue,e.lang),this.why)}else{e.addArc(n(s)),this.reify&&(t=this.getAttributeNodeNS(s,ke.ns.RDF,"ID"),t&&(e.rdfid=t.nodeValue,s.removeAttributeNode(t)));var f=this.getAttributeNodeNS(s,ke.ns.RDF,"parseType"),m=this.getAttributeNodeNS(s,ke.ns.RDF,"datatype");if(m&&(e.datatype=m.nodeValue,s.removeAttributeNode(m)),f){var w=f.nodeValue;w==="Literal"?(e.datatype=ke.ns.RDF+"XMLLiteral",e=this.buildFrame(e),e.addLiteral(s.innerHTML||s.childNodes),a=!1):w==="Resource"?(e=this.buildFrame(e,e.element),e.parent.element=null,e.addBNode()):w==="Collection"&&(e=this.buildFrame(e,e.element),e.parent.element=null,e.addCollection()),s.removeAttributeNode(f)}if(r.length!==0){var y=this.getAttributeNodeNS(s,ke.ns.RDF,"resource"),C=this.getAttributeNodeNS(s,ke.ns.RDF,"nodeID");e=this.buildFrame(e),y?(e.addNode(y.nodeValue),s.removeAttributeNode(y)):C?(e.addBNode(C.nodeValue),s.removeAttributeNode(C)):e.addBNode();for(var T=r.length-1;T>=0;T--){var L=this.buildFrame(e);L.addArc(n(r[T])),n(r[T])===ke.ns.RDF+"type"?this.buildFrame(L).addNode(r[T].nodeValue):this.buildFrame(L).addLiteral(r[T].nodeValue)}}else s.childNodes.length===0&&this.buildFrame(e).addLiteral("")}for(s=e.element;e.parent;){for(var R=e;s==null;)e=e.parent,s=e.element;var Z=s.childNodes&&s.childNodes[e.lastChild];if(!Z||!a){if(e.terminateFrame(),!(e=e.parent))break;s=e.element,a=!0}else if(Z.nodeType!==ke.nodeType.ELEMENT&&Z.nodeType!==ke.nodeType.TEXT&&Z.nodeType!==ke.nodeType.CDATA_SECTION||(Z.nodeType===ke.nodeType.TEXT||Z.nodeType===ke.nodeType.CDATA_SECTION)&&s.childNodes.length!==1)e.lastChild++;else{e.lastChild++,e=this.buildFrame(R,s.childNodes[e.lastChild-1]);break}}}}cleanParser(){this.bnodes={},this.why=null}buildFrame(e,t){var n=this.frameFactory(this,e,t);if(e&&(n.base=e.base,n.lang=e.lang),!t||t.nodeType===ke.nodeType.TEXT||t.nodeType===ke.nodeType.CDATA_SECTION)return n;var a=t.attributes,s=t.getAttributeNode("xml:base");s!=null&&(n.base=s.nodeValue,t.removeAttribute("xml:base"));var r=t.getAttributeNode("xml:lang");r!=null&&(n.lang=r.nodeValue,t.removeAttribute("xml:lang"));for(var l=a.length-1;l>=0;l--)if(a[l].nodeName.substr(0,3)==="xml"){if(a[l].name.slice(0,6)==="xmlns:"){var o=a[l].nodeValue;this.base&&(o=Dt(o,this.base)),this.store.setPrefixForURI(a[l].name.slice(6),o)}t.removeAttributeNode(a[l])}return n}}re(ke,"ns",{RDF:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",RDFS:"http://www.w3.org/2000/01/rdf-schema#"});re(ke,"nodeType",{ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12});function qh(i,e,t){var n,a,s,r=["INSERT","DELETE","WHERE"],l=xe("http://www.w3.org/ns/pim/patch#"),o=Ea(e,e,t,t,null,null,"",null),u={},d=function(C,T,L,R,Z){return"Line "+(T+1)+" of <"+C+`>: Bad syntax:
   `+Z+`
   at: "`+L.slice(R,R+30)+'"'};n=0;var f=e.sym(t+"#query");for(u.query=f;;){if(a=o.skipSpace(i,n),a<0)return u;if(i[a]===";"){if(n=o.skipSpace(i,a+1),n<0)return u;a=n}var m=!1;for(s=0;s<r.length;s++){var w=r[s];if(i.slice(a,a+w.length)===w){if(n=o.skipSpace(i,a+w.length),n<0)throw d(o._thisDoc,o.lines,i,a+w.length,"found EOF, needed {...} after "+w);if((w==="INSERT"||w==="DELETE")&&i.slice(n,n+4)==="DATA"){if(a=o.skipSpace(i,n+4),a<0)throw d(o._thisDoc,o.lines,i,n+4,"needed {...} after INSERT DATA "+w);n=a}var y=[];if(a=o.node(i,n,y),a<0)throw d(o._thisDoc,o.lines,i,n,"bad syntax or EOF in {...} after "+w);u[w.toLowerCase()]=y[0],e.add(f,l(w.toLowerCase()),y[0]),m=!0,n=a}}if(!m&&i.slice(a,a+7)==="@prefix"){if(n=o.directive(i,a),n<0)throw d(o._thisDoc,o.lines,i,n,"bad syntax or EOF after @prefix ");n=o.checkDot(i,n),m=!0}if(!m)throw d(o._thisDoc,o.lines,i,a,"Unknown syntax at start of statememt: '"+i.slice(a).slice(0,20)+"'")}}function aa(i,e,t,n="text/turtle",a){n=n||In,n=n.split(";")[0];try{if(n===xl||n===In){var s=Ea(e,e,t,t,null,null,"",null);s.loadBuf(i),o()}else if(n===xr){var r=new ke(e);r.parse(Wn(i),t,e.sym(t)),o()}else if(n===ta)fi(Wn(i,{contentType:ta}),e,t),o();else if(n===Cs)fi(Wn(i,{contentType:Cs}),e,t),o();else if(n===Ac||n===Dc)qh(i,e,t),o();else if(n===Ji)Ol(i,e,t).then(o).catch(u);else if(n===ea||n===Ki){var l=new Vl({factory:ra});d(null,i)}else throw n===void 0?new Error("contentType is undefined"):new Error("Don't know how to parse "+n+" yet")}catch(m){u(m)}aa.handled={"text/n3":!0,"text/turtle":!0,"application/rdf+xml":!0,"application/xhtml+xml":!0,"text/html":!0,"application/sparql-update":!0,"application/sparql-update-single-match":!0,"application/ld+json":!0,"application/nquads":!0,"application/n-quads":!0};function o(){if(a)a(null,e);else return}function u(m){if(n!==Ji||n!==ea||n!==Ki)if(a)a(m,e);else{let w=new Error(""+m+" while trying to parse <"+t+"> as "+n);throw w.cause=m,w}}function d(m,w){try{l.parse(w,f)}catch(y){a(y,e)}}function f(m,w){w?e.add(w.subject,w.predicate,w.object,w.graph):a(m,e)}}var ti={exports:{}},Xs;function Hh(){return Xs||(Xs=1,(function(i,e){var t=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Gr<"u"&&Gr,n=(function(){function s(){this.fetch=!1,this.DOMException=t.DOMException}return s.prototype=t,new s})();(function(s){(function(r){var l=typeof s<"u"&&s||typeof self<"u"&&self||typeof Gr<"u"&&Gr||{},o={searchParams:"URLSearchParams"in l,iterable:"Symbol"in l&&"iterator"in Symbol,blob:"FileReader"in l&&"Blob"in l&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in l,arrayBuffer:"ArrayBuffer"in l};function u(_){return _&&DataView.prototype.isPrototypeOf(_)}if(o.arrayBuffer)var d=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(_){return _&&d.indexOf(Object.prototype.toString.call(_))>-1};function m(_){if(typeof _!="string"&&(_=String(_)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(_)||_==="")throw new TypeError('Invalid character in header field name: "'+_+'"');return _.toLowerCase()}function w(_){return typeof _!="string"&&(_=String(_)),_}function y(_){var V={next:function(){var K=_.shift();return{done:K===void 0,value:K}}};return o.iterable&&(V[Symbol.iterator]=function(){return V}),V}function C(_){this.map={},_ instanceof C?_.forEach(function(V,K){this.append(K,V)},this):Array.isArray(_)?_.forEach(function(V){if(V.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+V.length);this.append(V[0],V[1])},this):_&&Object.getOwnPropertyNames(_).forEach(function(V){this.append(V,_[V])},this)}C.prototype.append=function(_,V){_=m(_),V=w(V);var K=this.map[_];this.map[_]=K?K+", "+V:V},C.prototype.delete=function(_){delete this.map[m(_)]},C.prototype.get=function(_){return _=m(_),this.has(_)?this.map[_]:null},C.prototype.has=function(_){return this.map.hasOwnProperty(m(_))},C.prototype.set=function(_,V){this.map[m(_)]=w(V)},C.prototype.forEach=function(_,V){for(var K in this.map)this.map.hasOwnProperty(K)&&_.call(V,this.map[K],K,this)},C.prototype.keys=function(){var _=[];return this.forEach(function(V,K){_.push(K)}),y(_)},C.prototype.values=function(){var _=[];return this.forEach(function(V){_.push(V)}),y(_)},C.prototype.entries=function(){var _=[];return this.forEach(function(V,K){_.push([K,V])}),y(_)},o.iterable&&(C.prototype[Symbol.iterator]=C.prototype.entries);function T(_){if(!_._noBody){if(_.bodyUsed)return Promise.reject(new TypeError("Already read"));_.bodyUsed=!0}}function L(_){return new Promise(function(V,K){_.onload=function(){V(_.result)},_.onerror=function(){K(_.error)}})}function R(_){var V=new FileReader,K=L(V);return V.readAsArrayBuffer(_),K}function Z(_){var V=new FileReader,K=L(V),ie=/charset=([A-Za-z0-9_-]+)/.exec(_.type),ae=ie?ie[1]:"utf-8";return V.readAsText(_,ae),K}function Y(_){for(var V=new Uint8Array(_),K=new Array(V.length),ie=0;ie<V.length;ie++)K[ie]=String.fromCharCode(V[ie]);return K.join("")}function N(_){if(_.slice)return _.slice(0);var V=new Uint8Array(_.byteLength);return V.set(new Uint8Array(_)),V.buffer}function j(){return this.bodyUsed=!1,this._initBody=function(_){this.bodyUsed=this.bodyUsed,this._bodyInit=_,_?typeof _=="string"?this._bodyText=_:o.blob&&Blob.prototype.isPrototypeOf(_)?this._bodyBlob=_:o.formData&&FormData.prototype.isPrototypeOf(_)?this._bodyFormData=_:o.searchParams&&URLSearchParams.prototype.isPrototypeOf(_)?this._bodyText=_.toString():o.arrayBuffer&&o.blob&&u(_)?(this._bodyArrayBuffer=N(_.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(_)||f(_))?this._bodyArrayBuffer=N(_):this._bodyText=_=Object.prototype.toString.call(_):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof _=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):o.searchParams&&URLSearchParams.prototype.isPrototypeOf(_)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o.blob&&(this.blob=function(){var _=T(this);if(_)return _;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var _=T(this);return _||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(o.blob)return this.blob().then(R);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var _=T(this);if(_)return _;if(this._bodyBlob)return Z(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(Y(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o.formData&&(this.formData=function(){return this.text().then(H)}),this.json=function(){return this.text().then(JSON.parse)},this}var $=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function G(_){var V=_.toUpperCase();return $.indexOf(V)>-1?V:_}function F(_,V){if(!(this instanceof F))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');V=V||{};var K=V.body;if(_ instanceof F){if(_.bodyUsed)throw new TypeError("Already read");this.url=_.url,this.credentials=_.credentials,V.headers||(this.headers=new C(_.headers)),this.method=_.method,this.mode=_.mode,this.signal=_.signal,!K&&_._bodyInit!=null&&(K=_._bodyInit,_.bodyUsed=!0)}else this.url=String(_);if(this.credentials=V.credentials||this.credentials||"same-origin",(V.headers||!this.headers)&&(this.headers=new C(V.headers)),this.method=G(V.method||this.method||"GET"),this.mode=V.mode||this.mode||null,this.signal=V.signal||this.signal||(function(){if("AbortController"in l){var oe=new AbortController;return oe.signal}})(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&K)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(K),(this.method==="GET"||this.method==="HEAD")&&(V.cache==="no-store"||V.cache==="no-cache")){var ie=/([?&])_=[^&]*/;if(ie.test(this.url))this.url=this.url.replace(ie,"$1_="+new Date().getTime());else{var ae=/\?/;this.url+=(ae.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}F.prototype.clone=function(){return new F(this,{body:this._bodyInit})};function H(_){var V=new FormData;return _.trim().split("&").forEach(function(K){if(K){var ie=K.split("="),ae=ie.shift().replace(/\+/g," "),oe=ie.join("=").replace(/\+/g," ");V.append(decodeURIComponent(ae),decodeURIComponent(oe))}}),V}function P(_){var V=new C,K=_.replace(/\r?\n[\t ]+/g," ");return K.split("\r").map(function(ie){return ie.indexOf(`
`)===0?ie.substr(1,ie.length):ie}).forEach(function(ie){var ae=ie.split(":"),oe=ae.shift().trim();if(oe){var ne=ae.join(":").trim();try{V.append(oe,ne)}catch(ge){console.warn("Response "+ge.message)}}}),V}j.call(F.prototype);function q(_,V){if(!(this instanceof q))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(V||(V={}),this.type="default",this.status=V.status===void 0?200:V.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=V.statusText===void 0?"":""+V.statusText,this.headers=new C(V.headers),this.url=V.url||"",this._initBody(_)}j.call(q.prototype),q.prototype.clone=function(){return new q(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new C(this.headers),url:this.url})},q.error=function(){var _=new q(null,{status:200,statusText:""});return _.ok=!1,_.status=0,_.type="error",_};var ee=[301,302,303,307,308];q.redirect=function(_,V){if(ee.indexOf(V)===-1)throw new RangeError("Invalid status code");return new q(null,{status:V,headers:{location:_}})},r.DOMException=l.DOMException;try{new r.DOMException}catch{r.DOMException=function(V,K){this.message=V,this.name=K;var ie=Error(V);this.stack=ie.stack},r.DOMException.prototype=Object.create(Error.prototype),r.DOMException.prototype.constructor=r.DOMException}function J(_,V){return new Promise(function(K,ie){var ae=new F(_,V);if(ae.signal&&ae.signal.aborted)return ie(new r.DOMException("Aborted","AbortError"));var oe=new XMLHttpRequest;function ne(){oe.abort()}oe.onload=function(){var pe={statusText:oe.statusText,headers:P(oe.getAllResponseHeaders()||"")};ae.url.indexOf("file://")===0&&(oe.status<200||oe.status>599)?pe.status=200:pe.status=oe.status,pe.url="responseURL"in oe?oe.responseURL:pe.headers.get("X-Request-URL");var Ce="response"in oe?oe.response:oe.responseText;setTimeout(function(){K(new q(Ce,pe))},0)},oe.onerror=function(){setTimeout(function(){ie(new TypeError("Network request failed"))},0)},oe.ontimeout=function(){setTimeout(function(){ie(new TypeError("Network request timed out"))},0)},oe.onabort=function(){setTimeout(function(){ie(new r.DOMException("Aborted","AbortError"))},0)};function ge(pe){try{return pe===""&&l.location.href?l.location.href:pe}catch{return pe}}if(oe.open(ae.method,ge(ae.url),!0),ae.credentials==="include"?oe.withCredentials=!0:ae.credentials==="omit"&&(oe.withCredentials=!1),"responseType"in oe&&(o.blob?oe.responseType="blob":o.arrayBuffer&&(oe.responseType="arraybuffer")),V&&typeof V.headers=="object"&&!(V.headers instanceof C||l.Headers&&V.headers instanceof l.Headers)){var Fe=[];Object.getOwnPropertyNames(V.headers).forEach(function(pe){Fe.push(m(pe)),oe.setRequestHeader(pe,w(V.headers[pe]))}),ae.headers.forEach(function(pe,Ce){Fe.indexOf(Ce)===-1&&oe.setRequestHeader(Ce,pe)})}else ae.headers.forEach(function(pe,Ce){oe.setRequestHeader(Ce,pe)});ae.signal&&(ae.signal.addEventListener("abort",ne),oe.onreadystatechange=function(){oe.readyState===4&&ae.signal.removeEventListener("abort",ne)}),oe.send(typeof ae._bodyInit>"u"?null:ae._bodyInit)})}return J.polyfill=!0,l.fetch||(l.fetch=J,l.Headers=C,l.Request=F,l.Response=q),r.Headers=C,r.Request=F,r.Response=q,r.fetch=J,r})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var a=t.fetch?t:n;e=a.fetch,e.default=a.fetch,e.fetch=a.fetch,e.Headers=a.Headers,e.Request=a.Request,e.Response=a.Response,i.exports=e})(ti,ti.exports)),ti.exports}var sa=Hh();const zh=_l(sa),jh={"text/n3":!0,"text/turtle":!0,"application/rdf+xml":!0,"application/xhtml+xml":!0,"text/html":!0,"application/ld+json":!0},Xl={rdf:xr,owl:xr,n3:"text/n3",ttl:"text/turtle",nt:"text/n3",acl:"text/n3",html:"text/html",xml:"text/xml"},Wl=i=>({link:xe("http://www.w3.org/2007/ont/link#",i),http:xe("http://www.w3.org/2007/ont/http#",i),httph:xe("http://www.w3.org/2007/ont/httph#",i),rdf:xe("http://www.w3.org/1999/02/22-rdf-syntax-ns#",i),rdfs:xe("http://www.w3.org/2000/01/rdf-schema#",i),dc:xe("http://purl.org/dc/elements/1.1/",i),ldp:xe("http://www.w3.org/ns/ldp#",i)}),Ft=Wl();class yn{constructor(e,t){re(this,"response",void 0),re(this,"dom",void 0),this.response=e,this.dom=t}}re(yn,"pattern",void 0);class xa extends yn{static toString(){return"RDFXMLHandler"}static register(e){e.mediatypes[xr]={q:.9}}parse(e,t,n){let a=e.store;this.dom||(this.dom=Wn(t));let s=this.dom.documentElement;if(s&&s.nodeName==="parsererror")return e.failFetch(n,"Badly formed XML in "+n.resource.value,"parse_error");let r=new ke(a);try{r.parse(this.dom,n.original.value,n.original)}catch(l){return e.failFetch(n,"Syntax error parsing RDF/XML! "+l,"parse_error")}return n.noMeta||a.add(n.original,Ft.rdf("type"),Ft.link("RDFDocument"),e.appNode),e.doneFetch(n,this.response)}}xa.pattern=new RegExp("application/rdf\\+xml");class Bn extends yn{static toString(){return"XHTMLHandler"}static register(e){e.mediatypes[ta]={q:.8}}parse(e,t,n){let a,s;this.dom||(this.dom=Wn(t));let r=e.store,l=this.dom.getElementsByTagName("title");l.length>0&&r.add(n.resource,Ft.dc("title"),r.rdfFactory.literal(l[0].textContent),n.resource);let o=this.dom.getElementsByTagName("link");for(let d=o.length-1;d>=0;d--)a=o[d].getAttribute("rel"),s=!1,a||(a=o[d].getAttribute("rev"),s=!0),a&&e.linkData(n.original,a,o[d].getAttribute("href"),n.resource,s);let u=this.dom.getElementsByTagName("script");for(let d=0;d<u.length;d++){let f=u[d].getAttribute("type");jh[f]&&(aa(u[d].textContent,r,n.original.value,f),aa(u[d].textContent,r,n.original.value,f))}if(n.noMeta||r.add(n.resource,Ft.rdf("type"),Ft.link("WebPage"),e.appNode),!n.noRDFa&&fi)try{fi(this.dom,r,n.original.value)}catch(d){let f="Error trying to parse "+n.resource+` as RDFa:
`+d+`:
`+d.stack;return e.failFetch(n,f,"parse_error")}return e.doneFetch(n,this.response)}}Bn.pattern=new RegExp("application/xhtml");class Yn extends yn{static toString(){return"XMLHandler"}static register(e){e.mediatypes["text/xml"]={q:.5},e.mediatypes["application/xml"]={q:.5}}static isElement(e){return e.nodeType===Node.ELEMENT_NODE}parse(e,t,n){let a=Wn(t);for(let r=0;r<a.childNodes.length;r++){const l=a.childNodes[r];if(Yn.isElement(l)){let o=l.namespaceURI;if(o&&o===o.rdf)return e.addStatus(n.req,"Has XML root element in the RDF namespace, so assume RDF/XML."),new xa(this.response,a).parse(e,t,n);break}}if(a.doctype&&a.doctype.name==="html"&&a.doctype.publicId.match(/^-\/\/W3C\/\/DTD XHTML/)&&a.doctype.systemId.match(/http:\/\/www.w3.org\/TR\/xhtml/))return e.addStatus(n.req,`Has XHTML DOCTYPE. Switching to XHTML Handler.
`),new Bn(this.response,a).parse(e,t,n);let s=a.getElementsByTagName("html")[0];if(s){let r=s.getAttribute("xmlns");if(r&&r.match(/^http:\/\/www.w3.org\/1999\/xhtml/))return e.addStatus(n.req,`Has a default namespace for XHTML. Switching to XHTMLHandler.
`),new Bn(this.response,a).parse(e,t,n)}return e.failFetch(n,`Unsupported dialect of XML: not RDF or XHTML namespace, etc.
`+t.slice(0,80),901)}}Yn.pattern=new RegExp("(text|application)/(.*)xml");class Ql extends yn{static toString(){return"HTMLHandler"}static register(e){e.mediatypes["text/html"]={q:.8}}parse(e,t,n){let a=e.store;if(Kl(t))return e.addStatus(n.req,`Has an XML declaration. We'll assume it's XHTML as the content-type was text/html.
`),new Bn(this.response).parse(e,t,n);if(Vh(t))return e.addStatus(n.req,`Has XHTML DOCTYPE. Switching to XHTMLHandler.
`),new Bn(this.response).parse(e,t,n);if(Gh(t))return e.addStatus(n.req,`Has default namespace for XHTML, so switching to XHTMLHandler.
`),new Bn(this.response).parse(e,t,n);let s=new RegExp("<title>([\\s\\S]+?)</title>","im").exec(t);return s&&a.add(n.resource,Ft.dc("title"),a.rdfFactory.literal(s[1]),n.resource),a.add(n.resource,Ft.rdf("type"),Ft.link("WebPage"),e.appNode),e.addStatus(n.req,"non-XML HTML document, not parsed for data."),e.doneFetch(n,this.response)}}Ql.pattern=new RegExp("text/html");class Yl extends yn{static toString(){return"JsonLdHandler"}static register(e){e.mediatypes["application/ld+json"]={q:.9}}async parse(e,t,n,a){const s=e.store;try{return await Ol(t,s,n.original.value),e.store.add(n.original,Ft.rdf("type"),Ft.link("RDFDocument"),e.appNode),e.doneFetch(n,a)}catch(r){const l="Error trying to parse "+n.resource+` as JSON-LD:
`+r;return e.failFetch(n,l,"parse_error",a)}}}Yl.pattern=/application\/(ld\+json|activity\+json)/;class Zl extends yn{static toString(){return"TextHandler"}static register(e){e.mediatypes["text/plain"]={q:.5}}parse(e,t,n){return Kl(t)?(e.addStatus(n.req,"Warning: "+n.resource+` has an XML declaration. We'll assume it's XML but its content-type wasn't XML.
`),new Yn(this.response).parse(e,t,n)):t.slice(0,500).match(/xmlns:/)?(e.addStatus(n.req,`May have an XML namespace. We'll assume it's XML but its content-type wasn't XML.
`),new Yn(this.response).parse(e,t,n)):(e.addStatus(n.req,"Plain text document, no known RDF semantics."),e.doneFetch(n,this.response))}}Zl.pattern=new RegExp("text/plain");class Jl extends yn{static toString(){return"N3Handler"}static register(e){e.mediatypes["text/n3"]={},e.mediatypes["text/turtle"]={}}parse(e,t,n,a){let s=e.store,r=Ea(s,s,n.original.value,n.original.value,null,null,"",null);try{r.loadBuf(t)}catch(l){let o="Error trying to parse "+n.resource+` as Notation3:
`+l;return e.failFetch(n,o,"parse_error",a)}return e.addStatus(n.req,"N3 parsed: "+r.statementCount+" triples in "+r.lines+" lines."),e.store.add(n.original,Ft.rdf("type"),Ft.link("RDFDocument"),e.appNode),e.doneFetch(n,this.response)}}Jl.pattern=new RegExp("(application|text)/(x-)?(rdf\\+)?(n3|turtle)");const la={RDFXMLHandler:xa,XHTMLHandler:Bn,XMLHandler:Yn,HTMLHandler:Ql,TextHandler:Zl,N3Handler:Jl,JsonLdHandler:Yl};function Vh(i){const e=i.indexOf("<!DOCTYPE html"),t=i.indexOf(">");return e===-1||t===-1||e>t?!1:i.substr(e,t-e).indexOf("XHTML")!==-1}function Kl(i){return!!i.match(/\s*<\?xml\s+version\s*=[^<>]+\?>/)}function Gh(i){return!!i.match(/[^(<html)]*<html\s+[^<]*xmlns=['"]http:\/\/www.w3.org\/1999\/xhtml["'][^<]*>/)}class it{constructor(e,t={}){re(this,"store",void 0),re(this,"timeout",void 0),re(this,"_fetch",void 0),re(this,"mediatypes",void 0),re(this,"appNode",void 0),re(this,"requested",void 0),re(this,"timeouts",void 0),re(this,"redirectedTo",void 0),re(this,"fetchQueue",void 0),re(this,"fetchCallbacks",void 0),re(this,"nonexistent",void 0),re(this,"lookedUp",void 0),re(this,"handlers",void 0),re(this,"ns",void 0),re(this,"fireCallbacks",void 0),this.store=e||new dn,this.ns=Wl(this.store.rdfFactory),this.timeout=t.timeout||3e4;let n=t.fetch||typeof global<"u"&&(global.solidFetcher||global.solidFetch)||typeof window<"u"&&(window.solidFetcher||window.solidFetch)||zh;if(!n)throw new Error("No _fetch function available for Fetcher");typeof window<"u"&&n===window.fetch?this._fetch=n.bind(window):typeof global<"u"&&n===global.fetch?this._fetch=n.bind(global):this._fetch=n,this.appNode=this.store.sym("chrome://TheCurrentSession"),this.store.fetcher=this,this.requested={},this.timeouts={},this.redirectedTo={},this.fetchQueue={},this.fetchCallbacks={},this.nonexistent={},this.lookedUp={},this.handlers=[],this.mediatypes={"image/*":{q:.9},"*/*":{q:.1}},Wc(this,["request","fail","refresh","retract","done"]),Object.keys(t.handlers||la).map(a=>this.addHandler(la[a]))}static crossSiteProxy(e){if(it.crossSiteProxyTemplate)return it.crossSiteProxyTemplate.replace("{uri}",encodeURIComponent(e))}static offlineOverride(e){let t=e;var n;return typeof window<"u"&&window.panes&&(n=window.panes.UI)&&n.preferences&&n.preferences.get("offlineModeUsingLocalhost")&&t.slice(0,7)==="http://"&&t.slice(7,17)!=="localhost/"&&(t="http://localhost/"+t.slice(7)),t}static proxyIfNecessary(e){var t;if(typeof window<"u"&&window.panes&&(t=window.panes.UI)&&t.isExtension)return e;if(typeof $SolidTestEnvironment<"u"&&$SolidTestEnvironment.localSiteMap){let n=e.split("/").slice(2);const a=(r,l)=>{let o=l[r.shift()];return o?typeof o=="string"?o+r.join("/"):r?a(r,o):null:null},s=a(n,$SolidTestEnvironment.localSiteMap);if(s)return s}return it.crossSiteProxyTemplate&&typeof document<"u"&&document.location&&(""+document.location).slice(0,6)==="https:"&&e.slice(0,5)==="http:"?it.crossSiteProxyTemplate.replace("{uri}",encodeURIComponent(e)):e}static unsupportedProtocol(e){let t=Ns(e);return t==="tel"||t==="mailto"||t==="urn"}static setCredentials(e,t={}){t.credentials===void 0&&(t.withCredentials!==void 0?t.credentials=t.withCredentials?"include":"omit":t.credentials="include")}load(e,t={}){if(t=Object.assign({},t),e instanceof Array)return Promise.all(e.map(u=>this.load(u,Object.assign({},t))));let a=Dn(e);a=a.split("#")[0],t=this.initFetchOptions(a,t);const s=this.appNode,r=this.store,l=r.statementsMatching(void 0,this.ns.link("requestedURI"),r.sym(a),s).map(u=>u.subject);for(const u of l){const d=r.any(u,this.ns.link("response"),null,s);if(d!=null){const f=r.statementsMatching(d,this.ns.link("outOfDate"),!0,s);r.remove(f),t.force=!0,t.clearPreviousData=!0}}const o=this.initFetchOptions(a,t);return this.pendingFetchPromise(a,o.baseURI,o)}async pendingFetchPromise(e,t,n){let a;return!n.force&&await this.fetchQueue[t]?a=this.fetchQueue[t]:(a=Promise.race([this.setRequestTimeout(e,n),this.fetchUri(e,n)]),this.fetchQueue[t]=a,this.cleanupFetchRequest(t,void 0,this.timeout)),a.then(s=>(e in this.timeouts&&(this.timeouts[e].forEach(clearTimeout),delete this.timeouts[e]),s))}cleanupFetchRequest(e,t,n){t!==void 0&&console.warn("_options is deprecated"),this.timeouts[e]=(this.timeouts[e]||[]).concat(setTimeout(()=>{this.isPending(e)||delete this.fetchQueue[e]},n))}initFetchOptions(e,t){let n=this.store;!t.method||t.method.toUpperCase()==="GET"||(t.force=!0),t.resource=n.rdfFactory.namedNode(e),t.baseURI=t.baseURI||e,t.original=n.rdfFactory.namedNode(t.baseURI),t.req=n.bnode(),t.headers=t.headers||{},t.contentType&&(t.headers["content-type"]=t.contentType),t.force&&(t.cache="no-cache");let s=this.acceptString();t.headers.accept=s;let r=it.offlineOverride(e);t.requestedURI=r,it.setCredentials(r,t);let l=it.proxyIfNecessary(r);return r!==l&&(t.proxyUsed=!0),t.actualProxyURI=l,t}fetchUri(e,t){if(!e)return Promise.reject(new Error("Cannot fetch an empty uri"));if(it.unsupportedProtocol(e))return this.failFetch(t,"fetcher: Unsupported protocol","unsupported_protocol");let n=this.getState(e);if(t.force)delete this.nonexistent[e];else{if(n==="fetched")return Promise.resolve(this.doneFetch(t,{status:200,ok:!0,statusText:"Already loaded into quadstore."}));if(n==="failed"&&this.requested[e]===404){let s="Previously failed: "+this.requested[e],r={url:e,status:this.requested[e],statusText:s,responseText:s,headers:new sa.Headers,ok:!1,body:null,bodyUsed:!1,size:0,timeout:0};return this.failFetch(t,s,this.requested[e],r)}}this.fireCallbacks("request",[e]),this.requested[e]=!0,t.noMeta||this.saveRequestMetadata(e,t);let{actualProxyURI:a}=t;return this._fetch(a,t).then(s=>this.handleResponse(s,e,t),s=>{let r={url:a,status:999,statusText:(s.name||"network failure")+": "+(s.errno||s.code||s.type),responseText:s.message,headers:new sa.Headers,ok:!1,body:null,bodyUsed:!1,size:0,timeout:0};return this.handleError(r,e,t)})}nowOrWhenFetched(e,t,n,a={}){const s=Dn(e);typeof t=="function"?n=t:typeof t>"u"||(bs(t)?a.referringTerm=t:a=t),this.load(s,a).then(r=>{if(n)if(r)if(r.ok)n(!0,"OK",r);else{let l="HTTP error: Status "+r.status+" ("+r.statusText+")";r.responseText&&(l+=" "+r.responseText),n(!1,l,r)}else n(!1,"@@ nowOrWhenFetched:  no response object!")},function(r){var l=r.message||r.statusText;l="Failed to load  <"+s+"> "+l,r.response&&r.response.status&&(l+=" status: "+r.response.status),n(!1,l,r.response)})}addStatus(e,t){let n=new Date;t="["+n.getHours()+":"+n.getMinutes()+":"+n.getSeconds()+"."+n.getMilliseconds()+"] "+t;let a=this.store;const s=a.the(e,this.ns.link("status"));va(s)&&s.append(a.rdfFactory.literal(t))}failFetch(e,t,n,a){this.addStatus(e.req,t),e.noMeta||this.store.add(e.original,this.ns.link("error"),this.store.rdfFactory.literal(t));let s=(e.method||"GET").toUpperCase();(s==="GET"||s==="HEAD")&&(e.resource.equals(e.original),this.requested[kn(e.original.value)]=n,this.fireCallbacks("fail",[e.original.value,t]));var l=new Error("Fetcher: "+t);return l.status=n,l.statusText=t,l.response=a,Promise.reject(l)}linkData(e,t,n,a,s){if(!n)return;let r=this.store,l,o=r.rdfFactory.namedNode(Dt(n,e.value));if(t==="alternate"||t==="seeAlso"||t==="meta"||t==="describedby"){if(o.value===e.value)return;l=this.ns.rdfs("seeAlso")}else t==="type"?l=r.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"):l=r.rdfFactory.namedNode(Dt(encodeURIComponent(t),"http://www.iana.org/assignments/link-relations/"));s?r.add(o,l,e,a):r.add(e,l,o,a)}parseLinkHeader(e,t,n){if(!e)return;const a=/<[^>]*>\s*(\s*;\s*[^()<>@,;:"/[\]?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*")))*(,|$)/g,s=/[^\(\)<>@,;:"\/\[\]\?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*"))/g,r=e.match(a);if(r!=null)for(let l=0;l<r.length;l++){let o=r[l].split(">"),u=o[0].substring(1),f=o[1].match(s);if(f==null)return;for(let m=0;m<f.length;m++){let C=f[m].split("=")[1].replace(/["']/g,"");this.linkData(t,C,u,n)}}}doneFetch(e,t){return this.addStatus(e.req,"Done."),this.requested[e.original.value]="done",this.fireCallbacks("done",[e.original.value]),t.req=e.req,t}nowKnownAs(e,t){this.lookedUp[e.value]?this.lookedUp[t.value]||this.lookUpThing(t,e):this.lookedUp[t.value]&&(this.lookedUp[e.value]||this.lookUpThing(e,t))}putBack(e,t={}){const n=Dn(e);let a=new mt(n).doc();return t.contentType=t["content-type"]||t["Content-Type"]||t.contentType||In,t.contentType==="application/ld+json"?new Promise((s,r)=>{Tr(a,this.store,a.uri,t.contentType,(l,o)=>{l?r(l):(t.data=o,this.webOperation("PUT",e,t).then(u=>s(u)).catch(u=>r(u)))})}):(t.data=Tr(a,this.store,a.value,t.contentType),this.webOperation("PUT",n,t))}webCopy(e,t,n){return this.webOperation("GET",e).then(a=>this.webOperation("PUT",t,{data:a.responseText,contentType:n}))}delete(e,t){return this.webOperation("DELETE",e,t).then(n=>(this.requested[e]=404,this.nonexistent[e]=!0,this.unload(this.store.rdfFactory.namedNode(e)),n))}async createIfNotExists(e,t=In,n=""){const a=this;try{var s=await a.load(e)}catch(r){if(r.response.status===404){try{s=await a.webOperation("PUT",e.value,{data:n,contentType:t})}catch(l){throw l}return delete a.requested[e.value],s}else throw r}return s}createContainer(e,t,n){let a={"content-type":In,link:this.ns.ldp("BasicContainer")+'; rel="type"'};t&&(a.slug=t);let s={headers:a};return n&&(s.body=n),this.webOperation("POST",e,s)}invalidateCache(e){const t=Dn(e),n=this;if(n.fetchQueue&&n.fetchQueue[t]){var a=n.fetchQueue[t];a.PromiseStatus,delete n.fetchQueue[t]}if(n.requested[t]&&n.requested[t]!=="done"&&n.requested[t]!=="failed"&&n.requested[t]!==404){let s=`Rdflib: fetcher: Destructive operation on <${n.requested[t]}> file being fetched! `+t;console.error(s)}else delete n.requested[t],delete n.nonexistent[t]}webOperation(e,t,n={}){const a=Dn(t);n.method=e,n.body=n.data||n.body,n.force=!0;const s=this;if(n.body&&!n.contentType)throw new Error("Web operation sending data must have a defined contentType.");return n.contentType&&(n.headers=n.headers||{},n.headers["content-type"]=n.contentType),it.setCredentials(a,n),new Promise(function(r,l){s._fetch(a,n).then(o=>{if(o.ok)(e==="PUT"||e==="PATCH"||e==="POST"||e==="DELETE")&&s.invalidateCache(a),o.text?o.text().then(u=>{o.responseText=u,r(o)}):r(o);else{let u="Web error: "+o.status;o.statusText&&(u+=" ("+o.statusText+")"),u+=" on "+e+" of <"+a+">",o.responseText&&(u+=": "+o.responseText);let d=new Error(u);d.response=o,l(d)}},o=>{let u="Fetch error for "+e+" of <"+a+">:"+o;l(new Error(u))})})}lookUpThing(e,t){let n=this.store.uris(e);return n=n.map(a=>kn(a)),n.forEach(a=>{this.lookedUp[a]=!0}),this.load(n,{referringTerm:t})}getHeader(e,t){const n=this.store,a=e.value,s=n.each(void 0,this.ns.link("requestedURI"),n.rdfFactory.literal(a));for(let r=0;r<s.length;r++){let l=s[r];if(l!==void 0){let o=n.any(l,this.ns.link("response"));if(o!==void 0&&n.anyValue(o,this.ns.http("status"))&&n.anyValue(o,this.ns.http("status")).startsWith("2")){let u=n.each(o,this.ns.httph(t.toLowerCase()));return u.length?u.map(d=>d.value):[]}}}}saveRequestMetadata(e,t){let n=t.req,a=this.store,s=t.referringTerm;this.addStatus(t.req,"Accept: "+t.headers.accept),bs(s)&&a.add(a.rdfFactory.namedNode(e),this.ns.link("requestedBy"),s,this.appNode),t.original&&t.original.value!==e&&a.add(n,this.ns.link("orginalURI"),a.rdfFactory.literal(t.original.value),this.appNode);const r=new Date,l="["+r.getHours()+":"+r.getMinutes()+":"+r.getSeconds()+"] ";a.add(n,this.ns.rdfs("label"),a.rdfFactory.literal(l+" Request for "+e),this.appNode),a.add(n,this.ns.link("requestedURI"),a.rdfFactory.literal(e),this.appNode),a.add(n,this.ns.link("status"),a.collection(),this.appNode)}saveResponseMetadata(e,t){const n=this.store;let a=n.bnode();return n.add(t.req,this.ns.link("response"),a,this.appNode),n.add(a,this.ns.http("status"),n.rdfFactory.literal(e.status),this.appNode),n.add(a,this.ns.http("statusText"),n.rdfFactory.literal(e.statusText),this.appNode),e.headers.forEach((s,r)=>{n.add(a,this.ns.httph(r),this.store.rdfFactory.literal(s),this.appNode),r==="content-type"&&n.add(t.resource,this.ns.rdf("type"),n.rdfFactory.namedNode(Xc(s).value),this.appNode)}),a}objectRefresh(e){let t=this.store.uris(e);if(typeof t<"u")for(let n=0;n<t.length;n++)this.refresh(this.store.rdfFactory.namedNode(kn(t[n])))}refresh(e,t){this.fireCallbacks("refresh",arguments),this.nowOrWhenFetched(e,{force:!0,clearPreviousData:!0},t)}refreshIfExpired(e,t){let n=this.getHeader(e,"Expires");!n||new Date(n[0]).getTime()<=new Date().getTime()?this.refresh(e,t):t(!0,"Not expired",{})}retract(e){this.store.removeMany(void 0,void 0,void 0,e),e.value&&delete this.requested[kn(e.value)],this.fireCallbacks("retract",arguments)}getState(e){return typeof this.requested[e]>"u"?"unrequested":this.requested[e]===!0?"requested":this.requested[e]==="done"?"fetched":this.requested[e]==="redirected"?this.getState(this.redirectedTo[e]):"failed"}isPending(e){return this.requested[e]===!0}unload(e){this.store.removeDocument(e),delete this.requested[e.value]}addHandler(e){this.handlers.push(e),e.register(this)}retryNoCredentials(e,t){t.retriedWithNoCredentials=!0,delete this.requested[e],delete this.fetchQueue[e];let n=Object.assign({},t,{credentials:"omit"});return this.addStatus(t.req,"Abort: Will retry with credentials SUPPRESSED to see if that helps"),this.load(e,n)}isCrossSite(e){if(typeof document>"u"||!document.location)return!1;const t=$c,n=""+document.location;return(t(n)&&t(e)&&t(n))!==t(e)}handleError(e,t,n){if(this.isCrossSite(t)){if(n.credentials&&n.credentials==="include"&&!n.retriedWithNoCredentials)return this.retryNoCredentials(t,n);let s=it.crossSiteProxy(t);if(s&&!n.proxyUsed)return this.redirectToProxy(s,n)}var a;return e instanceof Error?a="Fetch error: "+e.message:(a=e.statusText,e.responseText&&(a+=` ${e.responseText}`)),this.failFetch(n,a,e.status||998,e)}addType(e,t,n,a){let s=t;if(a){var r=n.any(s,this.ns.link("requestedURI"));r&&r.value!==a&&n.add(n.rdfFactory.namedNode(a),this.ns.rdf("type"),e,this.appNode)}for(;;){const u=n.any(s,this.ns.link("requestedURI"));if(u&&u.value&&n.add(n.rdfFactory.namedNode(u.value),this.ns.rdf("type"),e,this.appNode),s=n.any(void 0,n.rdfFactory.namedNode("http://www.w3.org/2007/ont/link#redirectedRequest"),s),!s)break;var l=n.any(s,n.rdfFactory.namedNode("http://www.w3.org/2007/ont/link#response"));if(!l)break;var o=n.any(l,n.rdfFactory.namedNode("http://www.w3.org/2007/ont/http#status"));if(!o||o!=="301"&&o!=="302")break}}handleResponse(e,t,n){const a=this.store,s=e.headers,r=n.req,l=this.saveResponseMetadata(e,n),o=this.normalizedContentType(n,s)||"";let u=s.get("content-location");if(e.status===0)return this.handleError(e,t,n);if(e.status>=400)return e.status===404&&(this.nonexistent[n.original.value]=!0,this.nonexistent[t]=!0),this.saveErrorResponse(e,l).then(()=>{let w=n.resource+" "+e.statusText;return this.failFetch(n,w,e.status,e)});var d=null,f=null;if(u&&(f=Dt(u,t),f!==t&&(d=f)),e.status===200){if(this.addType(this.ns.link("Document"),r,a,t),d&&this.addType(this.ns.link("Document"),r,a,d),n.clearPreviousData){const y=a.statementsMatching(void 0,void 0,void 0,n.resource).slice();for(let C=0;C<y.length;C++)a.removeStatement(y[C])}let w=o.includes("image/")||o.includes("application/pdf");o&&w&&(this.addType(a.rdfFactory.namedNode("http://purl.org/dc/terms/Image"),r,a,t),d&&this.addType(a.rdfFactory.namedNode("http://purl.org/dc/terms/Image"),r,a,d))}if(u){if(!n.force&&d&&this.requested[f]==="done")return this.doneFetch(n,e);this.requested[f]=!0}this.parseLinkHeader(s.get("link"),n.original,r);let m=this.handlerForContentType(o,e);return m?e.text().then(w=>(e.responseText=w,m.parse(this,w,n,e))):(this.addStatus(r,"Fetch over. No data handled."),this.doneFetch(n,e))}saveErrorResponse(e,t){let n=this.store;return e.text().then(a=>{a.length>10&&n.add(t,this.ns.http("content"),n.rdfFactory.literal(a),t)})}handlerForContentType(e,t){if(!e)return null;let n=this.handlers.find(a=>e.match(a.pattern));return n?new n(t):null}guessContentType(e){return Xl[e.split(".").pop()]}normalizedContentType(e,t){if(e.forceContentType)return e.forceContentType;let n=t.get("content-type");if(!n||n.includes("application/octet-stream")){let s=this.guessContentType(e.resource.value);if(s)return s}let a=Ns(e.resource.value);return!n&&["file","chrome"].includes(a)?"text/xml":n}redirectToProxy(e,t){this.addStatus(t.req,"BLOCKED -> Cross-site Proxy to <"+e+">"),t.proxyUsed=!0;const n=this.store,a=t.req;t.noMeta||(n.add(a,this.ns.link("redirectedTo"),n.rdfFactory.namedNode(e),a),this.addStatus(a,"redirected to new request")),this.requested[t.resource.value]="redirected",this.redirectedTo[t.resource.value]=e;let s=Object.assign({},t);return s.baseURI=t.resource.value,this.fetchUri(e,s).then(r=>(s.noMeta||n.add(a,this.ns.link("redirectedRequest"),s.req,this.appNode),r))}setRequestTimeout(e,t){return new Promise(n=>{this.timeouts[e]=(this.timeouts[e]||[]).concat(setTimeout(()=>{this.isPending(e)&&!t.retriedWithNoCredentials&&!t.proxyUsed&&n(this.failFetch(t,`Request to ${e} timed out`,"timeout"))},this.timeout))})}addFetchCallback(e,t){this.fetchCallbacks[e]?this.fetchCallbacks[e].push(t):this.fetchCallbacks[e]=[t]}acceptString(){let e="";for(let t in this.mediatypes){e!==""&&(e+=", "),e+=t;for(let n in this.mediatypes[t])e+=";"+n+"="+this.mediatypes[t][n]}return e}}re(it,"HANDLERS",void 0);re(it,"CONTENT_TYPE_BY_EXT",void 0);re(it,"crossSiteProxyTemplate",void 0);it.HANDLERS=la;it.CONTENT_TYPE_BY_EXT=Xl;class Xh{constructor(e){if(re(this,"store",void 0),re(this,"ifps",void 0),re(this,"fps",void 0),re(this,"patchControl",void 0),re(this,"ns",void 0),e=e||new dn,e.updater)throw new Error("You can't have two UpdateManagers for the same store");e.fetcher||(e.fetcher=new it(e)),this.store=e,e.updater=this,this.ifps={},this.fps={},this.ns={},this.ns.link=xe("http://www.w3.org/2007/ont/link#"),this.ns.http=xe("http://www.w3.org/2007/ont/http#"),this.ns.httph=xe("http://www.w3.org/2007/ont/httph#"),this.ns.ldp=xe("http://www.w3.org/ns/ldp#"),this.ns.rdf=xe("http://www.w3.org/1999/02/22-rdf-syntax-ns#"),this.ns.rdfs=xe("http://www.w3.org/2000/01/rdf-schema#"),this.ns.rdf=xe("http://www.w3.org/1999/02/22-rdf-syntax-ns#"),this.ns.owl=xe("http://www.w3.org/2002/07/owl#"),this.patchControl=[]}patchControlFor(e){return this.patchControl[e.value]||(this.patchControl[e.value]=[]),this.patchControl[e.value]}isHttpUri(e){return e.slice(0,4)==="http"}flagAuthorizationMetadata(e){e||(e=this.store);const t=e.fetcher?.appNode,n=e.statementsMatching(void 0,this.ns.link("requestedURI"),void 0,t).map(a=>a.subject);for(const a of n){const s=e.any(a,this.ns.link("response"),null,t);s!=null&&e.add(s,this.ns.link("outOfDate"),!0,t)}}async checkEditable(e,t){if(!e)return!1;t||(t=this.store);const n=this.editable(e,t);return n!==void 0?n:(await t.fetcher?.load(e),this.editable(e,t))}editable(e,t){if(!e)return!1;if(t||(t=this.store),e=Dn(e),!this.isHttpUri(e)&&t.holds(t.rdfFactory.namedNode(e),t.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),t.rdfFactory.namedNode("http://www.w3.org/2007/ont/link#MachineEditableDocument")))return"LOCALFILE";var n,a=!1;const s=t.fetcher?.appNode;for(var r=t.each(void 0,this.ns.link("requestedURI"),kn(e),s),l,o=0;o<r.length;o++)if(n=r[o],n!==void 0){const C=t.any(n,this.ns.link("response"),null,s);if(C!==void 0){if(t.anyJS(C,this.ns.link("outOfDate"),null,s))continue;var u=t.anyValue(C,this.ns.httph("wac-allow"));if(u)for(var d of u.split(",")){var f=d.split("=");if(f[0].includes("user")&&!f[1].includes("write")&&!f[1].includes("append"))return!1}var m=t.each(C,this.ns.httph("accept-patch"));if(m.length)for(let L=0;L<m.length;L++){if(l=m[L].value.trim(),l.indexOf("application/sparql-update")>=0||l.indexOf("application/sparql-update-single-match")>=0)return"SPARQL";if(l.indexOf("text/n3")>=0)return"N3PATCH"}var w=t.each(C,this.ns.httph("ms-author-via"));if(w.length)for(let L=0;L<w.length;L++){if(l=w[L].value.trim(),l.indexOf("SPARQL")>=0)return"SPARQL";if(l.indexOf("DAV")>=0)return"DAV"}if(!this.isHttpUri(e))return u?"LOCALFILE":!1;var y=t.each(C,this.ns.http("status"));if(y.length)for(let L=0;L<y.length;L++)(y[L]===200||y[L]===404)&&(a=!0)}}if(r.length!==0){if(a)return!1}}anonymize(e){return e.toNT().substr(0,2)==="_:"&&this.mentioned(e)?"?"+e.toNT().substr(2):e.toNT()}anonymizeNT(e){return this.anonymize(e.subject)+" "+this.anonymize(e.predicate)+" "+this.anonymize(e.object)+" ."}nTriples(e){return`${e.subject.toNT()} ${e.predicate.toNT()} ${e.object.toNT()} .`}statementBnodes(e){return[e.subject,e.predicate,e.object].filter(function(t){return Lc(t)})}statementArrayBnodes(e){var t=[];for(let a=0;a<e.length;a++)t=t.concat(this.statementBnodes(e[a]));t.sort();var n=[];for(let a=0;a<t.length;a++)(a===0||!t[a].equals(t[a-1]))&&n.push(t[a]);return n}cacheIfps(){this.ifps={};var e=this.store.each(void 0,this.ns.rdf("type"),this.ns.owl("InverseFunctionalProperty"));for(let t=0;t<e.length;t++)this.ifps[e[t].value]=!0;this.fps={},e=this.store.each(void 0,this.ns.rdf("type"),this.ns.owl("FunctionalProperty"));for(let t=0;t<e.length;t++)this.fps[e[t].value]=!0}bnodeContext2(e,t,n){var a=this.store.statementsMatching(void 0,void 0,e,t),s,r;for(let l=0;l<a.length;l++)if(this.fps[a[l].predicate.value]){if(s=a[l].subject,!s.isBlank)return[a[l]];if(n&&(r=this.bnodeContext2(s,t,n-1),r))return r.concat([a[l]])}a=this.store.statementsMatching(e,void 0,void 0,t);for(let l=0;l<a.length;l++)if(this.ifps[a[l].predicate.value]){if(s=a[l].object,!s.isBlank)return[a[l]];if(n&&(r=this.bnodeContext2(s,t,n-1),r))return r.concat([a[l]])}return null}bnodeContext1(e,t){for(var n=0;n<3;n++){var a=this.bnodeContext2(e,t,n);if(a!==null)return a}return this.store.connectedStatements(e,t)}mentioned(e){return this.store.statementsMatching(e,null,null,null).length!==0||this.store.statementsMatching(null,e).length!==0||this.store.statementsMatching(null,null,e).length!==0}bnodeContext(e,t){var n=[];if(e.length){this.cacheIfps();for(let s=0;s<e.length;s++){var a=e[s];this.mentioned(a)&&(n=n.concat(this.bnodeContext1(a,t)))}}return n}statementContext(e){var t=this.statementBnodes(e);return this.bnodeContext(t,e.graph)}contextWhere(e){var t=this;return!e||e.length===0?"":"WHERE { "+e.map(function(n){return t.anonymizeNT(n)}).join(`
`)+` }
`}fire(e,t,n,a={}){return Promise.resolve().then(()=>{if(!e)throw new Error("No URI given for remote editing operation: "+t);return a.noMeta=!0,a.contentType=a.contentType||"application/sparql-update",a.body=t,this.store.fetcher.webOperation("PATCH",e,a)}).then(s=>{if(!s.ok){let r="UpdateManager: update failed for <"+e+"> status="+s.status+", "+s.statusText+`
   for query: `+t;throw new Error(r)}n(e,s.ok,s.responseText,s)}).catch(s=>{n(e,!1,s.message,s)})}update_statement(e){if(!(e&&!e.graph)){var t=this,n=this.statementContext(e);return{statement:e?[e.subject,e.predicate,e.object,e.graph]:void 0,statementNT:e?this.anonymizeNT(e):void 0,where:t.contextWhere(n),set_object:function(a,s){var r=this.where;r+="DELETE DATA { "+this.statementNT+` } ;
`,r+="INSERT DATA { "+this.anonymize(this.statement[0])+" "+this.anonymize(this.statement[1])+" "+this.anonymize(a)+`  . }
`,t.fire(this.statement[3].value,r,s)}}}}insert_statement(e,t){var n=e instanceof Array?e[0]:e,a=this.contextWhere(this.statementContext(n));if(e instanceof Array){var s="";for(let r=0;r<e.length;r++)s+=e[r]+`
`;a+="INSERT DATA { "+s+` }
`}else a+="INSERT DATA { "+this.anonymize(e.subject)+" "+this.anonymize(e.predicate)+" "+this.anonymize(e.object)+`  . }
`;this.fire(n.graph.value,a,t)}delete_statement(e,t){var n=e instanceof Array?e[0]:e,a=this.contextWhere(this.statementContext(n));if(e instanceof Array){var s="";for(let r=0;r<e.length;r++)s+=e[r]+`
`;a+="DELETE DATA { "+s+` }
`}else a+="DELETE DATA { "+this.anonymize(e.subject)+" "+this.anonymize(e.predicate)+" "+this.anonymize(e.object)+`  . }
`;this.fire(n.graph.value,a,t)}requestDownstreamAction(e,t){var n=this.patchControlFor(e);if(!n.pendingUpstream)t(e);else if(n.downstreamAction){if(""+n.downstreamAction!=""+t)throw new Error("Can't wait for > 1 different downstream actions")}else n.downstreamAction=t}clearUpstreamCount(e){var t=this.patchControlFor(e);t.upstreamCount=0}getUpdatesVia(e){var t=this.store.fetcher.getHeader(e,"updates-via");return!t||!t.length?null:t[0].trim()}addDownstreamChangeListener(e,t){var n=this.patchControlFor(e);n.downstreamChangeListeners||(n.downstreamChangeListeners=[]),n.downstreamChangeListeners.push(t),this.setRefreshHandler(e,a=>{this.reloadAndSync(a)})}reloadAndSync(e){var t=this.patchControlFor(e),n=this;if(t.reloading){t.outOfDate=!0;return}t.reloading=!0;var a=1e3,s=function(){n.reload(n.store,e,function(r,l,o){if(r){if(t.downstreamChangeListeners)for(let u=0;u<t.downstreamChangeListeners.length;u++)t.downstreamChangeListeners[u]();t.reloading=!1,t.outOfDate&&(t.outOfDate=!1,s())}else t.reloading=!1,o&&o.status===0&&(t.reloading=!0,a=a*2,setTimeout(s,a))})};s()}setRefreshHandler(e,t){let n=this.getUpdatesVia(e);var a=t,s=this,r=this,l=1500,o=0;if(!n)return!1;n=Dt(n,e.value);const u=n.replace(/^http:/,"ws:").replace(/^https:/,"wss:");var d=function(){var f;if(typeof WebSocket<"u")f=new WebSocket(u);else if(typeof window<"u"&&window.WebSocket)f=window.WebSocket(u);else return;f.onopen=function(){l=1500,this.send("sub "+e.value),o&&r.requestDownstreamAction(e,a)};var m=s.patchControlFor(e);m.upstreamCount=0,f.onerror=function(y){},f.onclose=function(w){l*=2,o+=1,setTimeout(function(){d()},l)},f.onmessage=function(w){if(w.data&&w.data.slice(0,3)==="pub"){if("upstreamCount"in m&&(m.upstreamCount-=1,m.upstreamCount>=0))return;m.upstreamCount=0,s.requestDownstreamAction(e,a)}}};return d(),!0}updateMany(e,t=[]){const n=e.concat(t).map(l=>l.why),a=this,s=[];n.forEach(l=>{s.find(o=>o.equals(l))||s.push(l)});const r=s.map(l=>a.update(e.filter(o=>o.why.equals(l)),t.filter(o=>o.why.equals(l))));return Promise.all(r)}constructSparqlUpdateQuery(e,t,n){var a=this.contextWhere(n),s="";if(a.length){if(e.length){s+="DELETE { ";for(let r=0;r<e.length;r++)s+=this.anonymizeNT(e[r])+`
`;s+=` }
`}if(t.length){s+="INSERT { ";for(let r=0;r<t.length;r++)s+=this.anonymizeNT(t[r])+`
`;s+=` }
`}s+=a}else{if(e.length){s+="DELETE DATA { ";for(let r=0;r<e.length;r++)s+=this.anonymizeNT(e[r])+`
`;s+=` } 
`}if(t.length){e.length&&(s+=" ; "),s+="INSERT DATA { ";for(let r=0;r<t.length;r++)s+=this.nTriples(t[r])+`
`;s+=` }
`}}return s}constructN3PatchQuery(e,t,n){var a=`
@prefix solid: <http://www.w3.org/ns/solid/terms#>.
@prefix ex: <http://www.example.org/terms#>.

_:patch
`;return n&&n.length>0&&(a+=`
      solid:where {
        ${n.map(s=>this.anonymizeNT(s)).join(`
        `)}
      };`),e.length>0&&(a+=`
      solid:deletes {
        ${e.map(s=>this.anonymizeNT(s)).join(`
        `)}
      };`),t.length>0&&(a+=`
      solid:inserts {
        ${t.map(s=>this.anonymizeNT(s)).join(`
        `)}
      };`),a+=`   a solid:InsertDeletePatch .
`,a}update(e,t,n,a,s={}){if(!n){var r=this;return new Promise(function(N,j){r.update(e,t,function($,G,F){G?N():j(new Error(F))},a,s)})}try{var l=this.store,o=e?di(e)?e.statements:e instanceof Array?e:[e]:[],u=t?di(t)?t.statements:t instanceof Array?t:[t]:[];if(!(o instanceof Array))throw new Error("Type Error "+typeof o+": "+o);if(!(u instanceof Array))throw new Error("Type Error "+typeof u+": "+u);if(o.length===0&&u.length===0)return n(null,!0);var d=o.length?o[0].graph:u[0].graph;if(!d){let N="Error patching: statement does not specify which document to patch:"+o[0]+", "+u[0];throw new Error(N)}if(d.termType!=="NamedNode"){let N="Error patching: document not a NamedNode:"+o[0]+", "+u[0];throw new Error(N)}var f=this.patchControlFor(d),m=Date.now(),w=["subject","predicate","object","why"],y=["insert","delete"],C={delete:o,insert:u};y.map(function(N){C[N].map(function(j){if(!d.equals(j.graph))throw new Error("update: destination "+d+" inconsistent with delete quad "+j.graph);w.map(function($){if(typeof j[$]>"u")throw new Error("update: undefined "+$+" of statement.")})})});var T=this.editable(d.value,l);if(T===!1)throw new Error("Update: Can't make changes in uneditable "+d);if(T===void 0){if(a)throw new Error("Update: Loaded "+d+"but still can't figure out what editing protocol it supports.");this.store.fetcher.load(d).then(N=>{this.update(e,t,n,!0,s)},N=>{if(N.response.status===404)this.update(e,t,n,!0,s);else throw new Error(`Update: Can't get updatability status ${d} before patching: ${N}`)});return}else if(T.indexOf("SPARQL")>=0||T.indexOf("N3PATCH")>=0){var L=T.indexOf("SPARQL")>=0,R=[];o.length&&(R=this.statementArrayBnodes(o)),u.length&&(R=R.concat(this.statementArrayBnodes(u)));var Z=this.bnodeContext(R,d),Y=L?this.constructSparqlUpdateQuery(o,u,Z):this.constructN3PatchQuery(o,u,Z);s.contentType=L?"application/sparql-update":"text/n3",f.pendingUpstream=f.pendingUpstream?f.pendingUpstream+1:1,"upstreamCount"in f&&(f.upstreamCount+=1),this.fire(d.value,Y,(N,j,$,G)=>{if(G.elapsedTimeMs=Date.now()-m,j){try{l.remove(o)}catch(H){j=!1,$="Remote Ok BUT error deleting "+o.length+" from store!!! "+H}for(let H=0;H<u.length;H++)l.add(u[H].subject,u[H].predicate,u[H].object,d)}if(n(N,j,$,G),f.pendingUpstream-=1,f.pendingUpstream===0&&f.downstreamAction){var F=f.downstreamAction;delete f.downstreamAction,F(d)}},s)}else if(T.indexOf("DAV")>=0)this.updateDav(d,o,u,n,s);else if(T.indexOf("LOCALFILE")>=0)try{this.updateLocalFile(d,o,u,n,s)}catch{n(d.value,!1,"Exception trying to write back file <"+d.value+`>
`)}else throw new Error("Unhandled edit method: '"+T+"' for "+d)}catch(N){n(void 0,!1,"Exception in update: "+N+`
`+Zc(N))}}updateDav(e,t,n,a,s={}){let r=this.store;var l=r.any(e,this.ns.link("request"));if(!l)throw new Error("No record of our HTTP GET request for document: "+e);var o=r.any(l,this.ns.link("response"));if(!o)return null;var u=r.the(o,this.ns.httph("content-type")).value;let d=r.statementsMatching(void 0,void 0,void 0,e).slice();for(let y=0;y<t.length;y++)na(d,t[y]);for(let y=0;y<n.length;y++)d.push(n[y]);const f=this.serialize(e.value,d,u);var m=r.the(o,this.ns.httph("content-location")),w;return m&&(w=Dt(m.value,w)),s.contentType=u,s.noMeta=!0,s.body=f,r.fetcher.webOperation("PUT",w,s).then(y=>{if(!y.ok)throw new Error(y.error);for(let C=0;C<t.length;C++)r.remove(t[C]);for(let C=0;C<n.length;C++)r.add(n[C].subject,n[C].predicate,n[C].object,e);a(e.value,y.ok,y.responseText,y)}).catch(y=>{a(e.value,!1,y.message,y)})}updateLocalFile(e,t,n,a,s={}){const r=this.store;let l=r.statementsMatching(void 0,void 0,void 0,e).slice();for(let f=0;f<t.length;f++)na(l,t[f]);for(let f=0;f<n.length;f++)l.push(n[f]);var o=e.value.lastIndexOf(".");if(o<1)throw new Error("Rewriting file: No filename extension: "+e.value);var u=e.value.slice(o+1);let d=it.CONTENT_TYPE_BY_EXT[u];if(!d)throw new Error("File extension ."+u+" not supported for data write");s.body=this.serialize(e.value,l,d),s.contentType=d,r.fetcher.webOperation("PUT",e.value,s).then(f=>{if(!f.ok)return a(e.value,!1,f.error);for(let m=0;m<t.length;m++)r.remove(t[m]);for(let m=0;m<n.length;m++)r.add(n[m].subject,n[m].predicate,n[m].object,e);a(e.value,!0,"")})}serialize(e,t,n){const a=this.store;let s;if(typeof t=="string")return t;var r=Bl(a);switch(r.suggestNamespaces(a.namespaces),r.setBase(e),n){case"text/xml":case"application/rdf+xml":s=r.statementsToXML(t);break;case"text/n3":case"text/turtle":case"application/x-turtle":case"application/n3":s=r.statementsToN3(t);break;default:throw new Error("Content-type "+n+" not supported for data serialization")}return s}put(e,t,n,a){const s=this.store;let r;return Promise.resolve().then(()=>(r=this.serialize(e.value,t,n),s.fetcher.webOperation("PUT",e.value,{contentType:n,body:r}))).then(l=>{if(!l.ok)return a(e.value,l.ok,l.error,l);delete s.fetcher.nonexistent[e.value],delete s.fetcher.requested[e.value],typeof t!="string"&&t.map(o=>{s.addStatement(o)}),a(e.value,l.ok,"",l)}).catch(l=>{a(e.value,!1,l.message)})}reload(e,t,n){var a=Date.now();const s={force:!0,noMeta:!0,clearPreviousData:!0};e.fetcher.nowOrWhenFetched(t.value,s,function(r,l,o){if(!r)n(!1,"Error reloading data: "+l,o);else if(o.onErrorWasCalled||o.status!==200)n(!1,"Non-HTTP error reloading data: "+l,o);else{var u=Date.now()-a;t.reloadTimeTotal||(t.reloadTimeTotal=0),t.reloadTimeCount||(t.reloadTimeCount=0),t.reloadTimeTotal+=u,t.reloadTimeCount+=1,n(!0)}})}}const ni={...ra,fetcher(i,e){return new it(i,e)},graph(i=void 0,e=void 0){return new dn(i,e||{rdfFactory:ra})},lit(i,e,t){return this.literal(""+i,e||t)},st(i,e,t,n){return this.quad(i,e,t,n)}},eo={};for(const i in ni)typeof ni[i]=="function"&&(eo[i]=ni[i].bind(ni));const{graph:Wh,lit:Ws,namedNode:Zn}=eo;new Ar;Ye.fromValue;Jt.nextId;function to(i){const e=Wh(),t={};i?.fetch&&(t.fetch=i.fetch);const n=new it(e,t);e.updater=new Xh(e);async function a(s){const r=s.replace(/#.*$/,""),l=Zn(r);return await n.load(l),l}return{store:e,fetcher:n,fetchDocument:a}}const si=[];function Be(i){si.push(i)}function no(i,e){const t=[];for(let n=si.length-1;n>=0;n--)try{si[n].canHandle(i,e)&&t.push(si[n])}catch{}return t}const Hn={STATE_CHANGE:"sessionStateChange",EXPIRATION_WARNING:"sessionExpirationWarning",EXPIRATION:"sessionExpiration"};class Qh{constructor(e="solid-oidc",t="session",n=1){this.dbName=e,this.storeName=t,this.dbVersion=n,this.db=null}async init(){return new Promise((e,t)=>{const n=indexedDB.open(this.dbName,this.dbVersion);n.onerror=()=>t(new Error(`Database error: ${n.error}`)),n.onsuccess=()=>{this.db=n.result,e(this)},n.onupgradeneeded=a=>{const s=a.target.result;s.objectStoreNames.contains(this.storeName)||s.createObjectStore(this.storeName)}})}async setItem(e,t){return this.db||await this.init(),new Promise((n,a)=>{const s=this.db.transaction(this.storeName,"readwrite");s.oncomplete=()=>n(),s.onerror=()=>a(new Error(`Transaction error: ${s.error}`)),s.objectStore(this.storeName).put(t,e)})}async getItem(e){return this.db||await this.init(),new Promise((t,n)=>{const a=this.db.transaction(this.storeName,"readonly");a.onerror=()=>n(new Error(`Transaction error: ${a.error}`));const s=a.objectStore(this.storeName).get(e);s.onsuccess=()=>t(s.result||null)})}async deleteItem(e){return this.db||await this.init(),new Promise((t,n)=>{const a=this.db.transaction(this.storeName,"readwrite");a.oncomplete=()=>t(),a.onerror=()=>n(new Error(`Transaction error: ${a.error}`)),a.objectStore(this.storeName).delete(e)})}async clear(){return this.db||await this.init(),new Promise((e,t)=>{const n=this.db.transaction(this.storeName,"readwrite");n.oncomplete=()=>e(),n.onerror=()=>t(new Error(`Transaction error: ${n.error}`)),n.objectStore(this.storeName).clear()})}close(){this.db&&(this.db.close(),this.db=null)}}async function Yh(){const i=crypto.randomUUID()+"-"+crypto.randomUUID(),e=new Uint8Array(await crypto.subtle.digest("SHA-256",new TextEncoder().encode(i))),t=btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"");return{verifier:i,challenge:t}}async function ro(i,e,t,n=null){const a=await Cl(i.publicKey),s={htu:e,htm:t};return n&&(s.ath=n),new Cc(s).setIssuedAt().setJti(crypto.randomUUID()).setProtectedHeader({alg:"ES256",typ:"dpop+jwt",jwk:a}).sign(i.privateKey)}async function Zh(i){const e=new TextEncoder().encode(i),t=await crypto.subtle.digest("SHA-256",e),n=Array.from(new Uint8Array(t));return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Jh(i){const e=new URL(i).origin,t=await fetch(`${e}/.well-known/openid-configuration`);if(!t.ok)throw new Error(`OIDC discovery failed: ${t.status}`);return t.json()}async function Kh(i,e){const t=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({application_type:"web",redirect_uris:e,token_endpoint_auth_method:"none",grant_types:["authorization_code","refresh_token"],response_types:["code"],scope:"openid offline_access webid"})});if(!t.ok)throw new Error(`Client registration failed: ${t.status}`);return t.json()}async function io(i,e,t){const n=await ro(t,i,"POST"),a=await fetch(i,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",DPoP:n},body:new URLSearchParams(e)});if(!a.ok)throw new Error(`Token request failed: ${a.status}`);return a.json()}async function ed(i,e,t,n,a){const s=yc(new URL(e)),{payload:r}=await wc(i,s,{issuer:t,audience:"solid"}),l=await Ec(await Cl(a.publicKey));if(r.cnf?.jkt!==l)throw new Error("DPoP thumbprint mismatch");if(r.client_id!==n)throw new Error("client_id mismatch");return r}async function td(i){await i.init();const[e,t,n,a]=await Promise.all([i.getItem("refresh_token"),i.getItem("token_endpoint"),i.getItem("client_id"),i.getItem("dpop_keypair")]);if(!e||!t||!n||!a)throw new Error("Missing refresh data");const s=await io(t,{grant_type:"refresh_token",refresh_token:e,client_id:n},a);return s.refresh_token&&await i.setItem("refresh_token",s.refresh_token),i.close(),{...s,dpop_key_pair:a}}class nd extends EventTarget{constructor(e={}){super(),this.clientId=e.clientId||null,this.database=e.database||new Qh,this.onStateChange=e.onStateChange||null,this.onExpirationWarning=e.onExpirationWarning||null,this.onExpiration=e.onExpiration||null,this._isActive=!1,this._webId=null,this._exp=null,this._ath=null,this._tokens=null,this._idpDetails=null,this._refreshPromise=null,this.onStateChange&&this.addEventListener(Hn.STATE_CHANGE,this.onStateChange),this.onExpirationWarning&&this.addEventListener(Hn.EXPIRATION_WARNING,this.onExpirationWarning),this.onExpiration&&this.addEventListener(Hn.EXPIRATION,this.onExpiration)}get isActive(){return this._isActive}get webId(){return this._webId}isExpired(){return this._exp?Math.floor(Date.now()/1e3)>=this._exp:!0}getExpiresIn(){return this._exp?this._exp-Math.floor(Date.now()/1e3):-1}async login(e,t){const n=new URL(t),a=n.origin+n.pathname+n.search,s=await Jh(e),r=s.issuer,l=m=>m.endsWith("/")?m.slice(0,-1):m;if(l(e)!==l(r))throw new Error(`Issuer mismatch: ${r} !== ${e}`);sessionStorage.setItem("solid_oidc_idp",r),sessionStorage.setItem("solid_oidc_token_endpoint",s.token_endpoint),sessionStorage.setItem("solid_oidc_jwks_uri",s.jwks_uri);let o=this.clientId;o||(o=(await Kh(s.registration_endpoint,[a])).client_id,sessionStorage.setItem("solid_oidc_client_id",o));const u=await Yh();sessionStorage.setItem("solid_oidc_pkce_verifier",u.verifier);const d=crypto.randomUUID();sessionStorage.setItem("solid_oidc_csrf",d);const f=new URL(s.authorization_endpoint);f.searchParams.set("response_type","code"),f.searchParams.set("redirect_uri",a),f.searchParams.set("scope","openid offline_access webid"),f.searchParams.set("client_id",o),f.searchParams.set("code_challenge_method","S256"),f.searchParams.set("code_challenge",u.challenge),f.searchParams.set("state",d),f.searchParams.set("prompt","consent"),window.location.href=f.toString()}async handleRedirectFromLogin(){const e=new URL(window.location.href),t=e.searchParams.get("code");if(!t)return;const n=sessionStorage.getItem("solid_oidc_idp"),a=e.searchParams.get("iss");if(!n||a!==n)throw new Error(`Issuer mismatch: ${a} !== ${n}`);const s=sessionStorage.getItem("solid_oidc_csrf");if(e.searchParams.get("state")!==s)throw new Error("CSRF token mismatch");e.searchParams.delete("code"),e.searchParams.delete("iss"),e.searchParams.delete("state"),window.history.replaceState({},document.title,e.toString());const r=sessionStorage.getItem("solid_oidc_pkce_verifier"),l=sessionStorage.getItem("solid_oidc_token_endpoint"),o=sessionStorage.getItem("solid_oidc_jwks_uri"),u=this.clientId||sessionStorage.getItem("solid_oidc_client_id");if(!r||!l||!u)throw new Error("Missing session data");const d=await gc("ES256"),f=await io(l,{grant_type:"authorization_code",code:t,code_verifier:r,redirect_uri:e.origin+e.pathname,client_id:u},d);await ed(f.access_token,o,n,u,d),this._idpDetails={idp:n,jwksUri:o,tokenEndpoint:l},await this.database.init(),await Promise.all([this.database.setItem("idp",n),this.database.setItem("jwks_uri",o),this.database.setItem("token_endpoint",l),this.database.setItem("client_id",u),this.database.setItem("dpop_keypair",d),this.database.setItem("refresh_token",f.refresh_token)]),this.database.close(),sessionStorage.removeItem("solid_oidc_idp"),sessionStorage.removeItem("solid_oidc_token_endpoint"),sessionStorage.removeItem("solid_oidc_jwks_uri"),sessionStorage.removeItem("solid_oidc_client_id"),sessionStorage.removeItem("solid_oidc_pkce_verifier"),sessionStorage.removeItem("solid_oidc_csrf"),await this._setTokens({...f,dpop_key_pair:d}),this._dispatchStateChange()}async restore(){return this._refreshPromise?this._refreshPromise:(this._refreshPromise=(async()=>{try{const e=await td(this.database);await this._setTokens(e),this._dispatchStateChange()}catch(e){throw this._isActive&&(this.isExpired()?this._dispatchExpiration():this._dispatchExpirationWarning()),e}finally{this._refreshPromise=null}})(),this._refreshPromise)}async logout(){this._isActive=!1,this._webId=null,this._exp=null,this._ath=null,this._tokens=null,this._idpDetails=null,await this.database.init(),await this.database.clear(),this.database.close(),this._dispatchStateChange()}async authFetch(e,t={}){if(!this._isActive)return fetch(e,t);this.isExpired()&&await this.restore();let n,a,s;e instanceof Request?(n=new URL(e.url),a=t.method||e.method||"GET",s=new Headers(e.headers)):(n=new URL(e.toString()),a=t.method||"GET",s=t.headers?new Headers(t.headers):new Headers);const r=await ro(this._tokens.dpop_key_pair,`${n.origin}${n.pathname}`,a.toUpperCase(),this._ath);return s.set("DPoP",r),s.set("Authorization",`DPoP ${this._tokens.access_token}`),e instanceof Request?fetch(new Request(e,{...t,headers:s})):fetch(n,{...t,headers:s})}async _setTokens(e){this._tokens=e;const t=vc(e.access_token);if(!t.webid)throw new Error("Missing webid claim");if(!t.exp)throw new Error("Missing exp claim");this._ath=await Zh(e.access_token),this._webId=t.webid,this._exp=t.exp,this._isActive=!0}_dispatchStateChange(){this.dispatchEvent(new CustomEvent(Hn.STATE_CHANGE,{detail:{isActive:this._isActive,webId:this._webId}}))}_dispatchExpirationWarning(){this.dispatchEvent(new CustomEvent(Hn.EXPIRATION_WARNING,{detail:{expires_in:this.getExpiresIn()}}))}_dispatchExpiration(){this.dispatchEvent(new CustomEvent(Hn.EXPIRATION))}}const rd={label:"Source",icon:"📄",canHandle(i,e){return!0},render(i,e,t){t.innerHTML="";const n=i.doc(),a=e.match(null,null,null,n),s=e.fetcher,r=id(a,n,e),l=document.createElement("div");l.className="source-header";const o=document.createElement("h2");if(o.textContent="Source",l.appendChild(o),s){const d=document.createElement("button");d.className="source-edit-btn",d.textContent="Edit",d.addEventListener("click",()=>{ao(t,l,r,n,s)}),l.appendChild(d)}if(t.appendChild(l),a.length===0){const d=document.createElement("p");d.textContent="No triples found in this document.",t.appendChild(d);return}const u=document.createElement("pre");u.className="source-view",u.textContent=r,t.appendChild(u)}};function id(i,e,t){if(i.length===0)return"";try{return Tr(e,t,void 0,"text/turtle")??""}catch{return i.map(n=>`<${n.subject.value}> <${n.predicate.value}> ${n.object.termType==="NamedNode"?`<${n.object.value}>`:`"${n.object.value}"`} .`).join(`
`)}}function ao(i,e,t,n,a){for(;e.nextSibling;)e.nextSibling.remove();const s=e.querySelector(".source-edit-btn");s&&s.remove();const r=document.createElement("div");r.className="source-btn-group";const l=document.createElement("button");l.className="source-save-btn",l.textContent="Save";const o=document.createElement("button");o.className="source-cancel-btn",o.textContent="Cancel",r.appendChild(l),r.appendChild(o),e.appendChild(r);const u=document.createElement("textarea");u.className="source-editor",u.value=t,u.spellcheck=!1,i.appendChild(u),u.focus();const d=document.createElement("p");d.className="source-status",i.appendChild(d),o.addEventListener("click",()=>{Qs(i,e,t,n,a)}),l.addEventListener("click",async()=>{l.disabled=!0,o.disabled=!0,d.textContent="Saving...",d.className="source-status";try{const f=await a.webOperation("PUT",n.value,{data:u.value,contentType:"text/turtle"});if(!f.ok)throw new Error(`${f.status} ${f.statusText}`);d.textContent="Saved!",d.className="source-status source-status-ok",setTimeout(()=>{Qs(i,e,u.value,n,a)},800)}catch(f){const m=f instanceof Error?f.message:String(f);d.textContent=`Save failed: ${m}`,d.className="source-status source-status-error",l.disabled=!1,o.disabled=!1}})}function Qs(i,e,t,n,a){for(;e.nextSibling;)e.nextSibling.remove();const s=e.querySelector(".source-btn-group");s&&s.remove();const r=document.createElement("button");if(r.className="source-edit-btn",r.textContent="Edit",r.addEventListener("click",()=>{ao(i,e,t,n,a)}),e.appendChild(r),t){const l=document.createElement("pre");l.className="source-view",l.textContent=t,i.appendChild(l)}else{const l=document.createElement("p");l.textContent="No triples found in this document.",i.appendChild(l)}}Be(rd);const me=xe("http://www.w3.org/1999/02/22-rdf-syntax-ns#"),at=xe("http://www.w3.org/2000/01/rdf-schema#"),nt=xe("http://purl.org/dc/elements/1.1/"),he=xe("http://purl.org/dc/terms/"),be=xe("http://xmlns.com/foaf/0.1/"),tt=xe("http://www.w3.org/ns/ldp#"),Kt=xe("http://www.w3.org/ns/solid/terms#"),Ys=xe("http://www.w3.org/ns/posix/stat#"),we=xe("http://www.w3.org/2006/vcard/ns#"),Jn=xe("http://www.w3.org/ns/pim/space#"),wt=xe("http://www.w3.org/ns/auth/acl#"),yt=xe("http://www.w3.org/ns/ui#"),Lt=xe("http://rdfs.org/sioc/ns#"),Ut=xe("http://www.w3.org/ns/pim/meeting#"),Ct=xe("http://www.w3.org/2005/01/wf/flow#"),vt=xe("http://www.w3.org/ns/pim/transaction#"),oa=xe("http://www.w3.org/ns/pim/tracker#"),Ze=xe("https://www.w3.org/ns/activitystreams#"),Sn=xe("http://www.w3.org/2002/01/bookmark#"),Wi=xe("http://www.w3.org/ns/org#"),pi=xe("http://www.w3.org/ns/pim/pad#"),li=xe("http://rdfs.org/sioc/types#"),Er=xe("http://purl.org/ontology/olo/core#"),ad=xe("http://purl.org/ontology/pbo/core#"),sd=xe("http://purl.org/ontology/mo/"),B=xe("http://schema.org/");function ld(i){const e=i.indexOf("#");return e>=0?i.slice(e+1):""}function fe(i){const e=ld(i);if(e)return decodeURIComponent(e);try{const n=new URL(i).pathname.split("/").filter(Boolean);return n.length>0?decodeURIComponent(n[n.length-1]):i}catch{return i}}const so="mashlib:navigate";function ua(i){window.dispatchEvent(new CustomEvent(so,{detail:{uri:i}}))}function tn(i,e){const t=document.createElement("a");return t.href=`?uri=${encodeURIComponent(i)}`,t.textContent=e,t.addEventListener("click",n=>{n.preventDefault(),ua(i)}),t}function od(i,e){return e.any(i,at("label"),null,null)?.value??e.any(i,be("name"),null,null)?.value??e.any(i,he("title"),null,null)?.value??e.any(i,nt("title"),null,null)?.value??e.any(i,B("name"),null,null)?.value??fe(i.value)}function ud(i,e){return e.match(null,null,null,null),fe(i)}function cd(i,e){const t=e.match(i,null,null,null),n=new Map;for(const s of t){const r=s.predicate.value;n.has(r)||n.set(r,{predicate:r,predicateLabel:ud(r,e),objects:[]}),n.get(r).objects.push({value:s.object.value,termType:s.object.termType,datatype:s.object.datatype?.value,language:s.object.language})}return[...n.values()].sort((s,r)=>s.predicate===me("type").value?-1:r.predicate===me("type").value?1:s.predicateLabel.localeCompare(r.predicateLabel))}function hd(i){const e=document.createElement("span");if(e.className="outline-value",i.termType==="NamedNode"){const t=tn(i.value,fe(i.value));t.className="outline-link",t.title=i.value,e.appendChild(t)}else if(i.termType==="BlankNode")e.textContent=`_:${i.value}`,e.className+=" outline-blank";else{const t=document.createElement("span");if(t.className="outline-literal",t.textContent=i.value,e.appendChild(t),i.language){const n=document.createElement("span");n.className="outline-lang",n.textContent=`@${i.language}`,e.appendChild(n)}else if(i.datatype&&!i.datatype.includes("XMLSchema#string")){const n=document.createElement("span");n.className="outline-datatype",n.textContent=`^^${fe(i.datatype)}`,e.appendChild(n)}}return e}function dd(i,e,t){t.innerHTML="";const n=document.createElement("div");n.className="outline-view";const a=od(i,e),s=document.createElement("h2");s.className="outline-title",s.textContent=a,n.appendChild(s);const r=document.createElement("p");r.className="outline-uri";const l=document.createElement("code");l.textContent=i.value,r.appendChild(l),n.appendChild(r);const o=cd(i,e);if(o.length===0){const L=document.createElement("p");L.className="outline-empty",L.textContent="No triples found for this resource.",n.appendChild(L),t.appendChild(n);return}const u=o.reduce((L,R)=>L+R.objects.length,0),d=document.createElement("p");d.className="outline-count",d.textContent=`${u} triple${u!==1?"s":""} across ${o.length} predicate${o.length!==1?"s":""}`,n.appendChild(d);const f=document.createElement("table");f.className="outline-table";const m=document.createElement("thead"),w=document.createElement("tr"),y=document.createElement("th");y.textContent="Property";const C=document.createElement("th");C.textContent="Value",w.appendChild(y),w.appendChild(C),m.appendChild(w),f.appendChild(m);const T=document.createElement("tbody");for(const L of o)for(let R=0;R<L.objects.length;R++){const Z=document.createElement("tr"),Y=document.createElement("td");if(Y.className="outline-predicate",R===0){const j=document.createElement("a");j.href=L.predicate,j.textContent=L.predicateLabel,j.title=L.predicate,j.target="_blank",j.rel="noopener",Y.appendChild(j),L.objects.length>1&&(Y.rowSpan=L.objects.length),Z.appendChild(Y)}const N=document.createElement("td");N.className="outline-object",N.appendChild(hd(L.objects[R])),Z.appendChild(N),T.appendChild(Z)}f.appendChild(T),n.appendChild(f),t.appendChild(n)}const fd={label:"Outline",icon:"🔍",canHandle(i,e){return e.match(i,null,null,null).length>0},render(i,e,t){dd(i,e,t)}};Be(fd);const pd={label:"Properties",icon:"📋",canHandle(i,e){return!0},render(i,e,t){t.innerHTML="";const n=document.createElement("h2");n.textContent=fe(i.value),t.appendChild(n);const a=document.createElement("p");a.className="subject-uri";const s=document.createElement("a");s.href=i.value,s.textContent=i.value,s.target="_blank",s.rel="noopener",a.appendChild(s),t.appendChild(a);const r=e.match(i,null,null,null);if(r.length===0){const f=document.createElement("p");f.textContent="No properties found for this subject.",t.appendChild(f);return}const l=new Map;for(const f of r){const m=f.predicate.value;l.has(m)||l.set(m,{predicate:f.predicate,objects:[]}),l.get(m).objects.push({value:f.object.value,isUri:f.object.termType==="NamedNode"})}const o=document.createElement("table");o.className="properties-table";const u=document.createElement("thead");u.innerHTML="<tr><th>Property</th><th>Value</th></tr>",o.appendChild(u);const d=document.createElement("tbody");for(const[,{predicate:f,objects:m}]of l)for(const w of m){const y=document.createElement("tr"),C=document.createElement("td");C.className="prop-predicate";const T=document.createElement("a");T.href=f.value,T.textContent=fe(f.value),T.title=f.value,T.target="_blank",T.rel="noopener",C.appendChild(T),y.appendChild(C);const L=document.createElement("td");if(L.className="prop-value",w.isUri){const R=document.createElement("a");R.href=w.value,R.textContent=fe(w.value),R.title=w.value,R.target="_blank",R.rel="noopener",L.appendChild(R)}else L.textContent=w.value;y.appendChild(L),d.appendChild(y)}o.appendChild(d),t.appendChild(o)}};Be(pd);const lo=[{uri:"Read",label:"Read",description:"can view the resource"},{uri:"Append",label:"Append",description:"can add new content"},{uri:"Write",label:"Write",description:"can modify content"},{uri:"Control",label:"Control",description:"can manage sharing"}],md=[{label:"Owners",modes:["Read","Write","Control"],color:"#7b2d8e"},{label:"Editors",modes:["Read","Write"],color:"#dc3545"},{label:"Posters",modes:["Read","Append"],color:"#e67e00"},{label:"Submitters",modes:["Append"],color:"#ccaa00"},{label:"Viewers",modes:["Read"],color:"#28a745"}];function gd(i,e){const n=e.each(i,me("type"),null,null).map(a=>a.value);return n.includes(tt("Container").value)||n.includes(tt("BasicContainer").value)?!0:i.value.endsWith("/")}function dr(i,e){if(i===be("Agent").value)return"Everyone (public)";if(i===wt("AuthenticatedAgent").value)return"Anyone logged in";const t={termType:"NamedNode",value:i},n=e.any(t,be("name"),null,null)?.value??e.any(t,we("fn"),null,null)?.value;return n||fe(i)}function vd(i,e){const t=[],n=e.each(null,wt("accessTo"),i,null);for(const s of n){if(s.termType!=="NamedNode")continue;const r=s,l=e.each(r,me("type"),null,null);if(!l.some(f=>f.value===wt("Authorization").value)&&l.length>0)continue;const d=e.each(r,wt("mode"),null,null).map(f=>fe(f.value));for(const f of e.each(r,wt("agent"),null,null))t.push({agentType:"agent",agentUri:f.value,agentLabel:dr(f.value,e),modes:d});for(const f of e.each(r,wt("agentClass"),null,null))t.push({agentType:"agentClass",agentUri:f.value,agentLabel:dr(f.value,e),modes:d});for(const f of e.each(r,wt("agentGroup"),null,null))t.push({agentType:"agentGroup",agentUri:f.value,agentLabel:dr(f.value,e),modes:d})}const a=e.each(null,wt("default"),i,null);for(const s of a){if(s.termType!=="NamedNode")continue;const r=s,o=e.each(r,wt("mode"),null,null).map(u=>fe(u.value));for(const u of e.each(r,wt("agent"),null,null)){const d=u.value;t.some(f=>f.agentUri===d&&f.modes.join()===o.join())||t.push({agentType:"agent",agentUri:d,agentLabel:dr(d,e),modes:o})}for(const u of e.each(r,wt("agentClass"),null,null)){const d=u.value;t.some(f=>f.agentUri===d&&f.modes.join()===o.join())||t.push({agentType:"agentClass",agentUri:d,agentLabel:dr(d,e),modes:o})}}return t}function yd(i){const e=new Map;for(const t of i){const n=t.modes.sort().join(",");e.has(n)||e.set(n,[]),e.get(n).push(t)}return e}function wd(i){const e=[...i].sort().join(",");for(const t of md)if([...t.modes].sort().join(",")===e)return{label:t.label,color:t.color};return{label:i.join(" + "),color:"#555"}}function Ed(i,e,t){t.innerHTML="";const n=document.createElement("div");n.className="sharing-view";const a=gd(i,e)?"folder":"file",s=document.createElement("h2");s.className="sharing-title",s.textContent=`Sharing for ${a}`,n.appendChild(s);const r=document.createElement("p");r.className="sharing-resource";const l=document.createElement("code");l.textContent=i.value,r.appendChild(l),n.appendChild(r);const o=vd(i,e);if(o.length===0){const f=document.createElement("p");f.className="sharing-no-acl",f.textContent="No specific sharing settings found. This resource may inherit permissions from its parent container.",n.appendChild(f),Zs(n),t.appendChild(n);return}const u=yd(o),d=document.createElement("div");d.className="sharing-permissions";for(const[f,m]of u){const w=f.split(","),{label:y,color:C}=wd(w),T=document.createElement("div");T.className="sharing-level";const L=document.createElement("div");L.className="sharing-level-name",L.style.color=C,L.textContent=y,T.appendChild(L);const R=document.createElement("div");R.className="sharing-agents";for(const N of m){const j=document.createElement("span");j.className=`sharing-agent sharing-agent-${N.agentType}`,j.textContent=N.agentLabel,j.title=N.agentUri,R.appendChild(j)}T.appendChild(R);const Z=document.createElement("div");Z.className="sharing-level-desc",Z.style.color=C;const Y=w.map(N=>{const j=lo.find($=>$.uri===N);return j?j.description:N});Z.textContent=Y.join(", "),T.appendChild(Z),d.appendChild(T)}if(n.appendChild(d),a==="folder"){const f=document.createElement("p");f.className="sharing-default-info",f.textContent="Folder permissions may also apply as defaults for new resources created within.",n.appendChild(f)}Zs(n),t.appendChild(n)}function Zs(i){const e=document.createElement("div");e.className="sharing-legend";const t=document.createElement("h3");t.textContent="Access Modes",e.appendChild(t);const n=document.createElement("table");n.className="sharing-legend-table";for(const a of lo){const s=document.createElement("tr"),r=document.createElement("td");r.className="sharing-legend-mode",r.textContent=a.label;const l=document.createElement("td");l.textContent=a.description,s.appendChild(r),s.appendChild(l),n.appendChild(s)}e.appendChild(n),i.appendChild(e)}function Cd(i,e){const n=e.each(i,me("type"),null,null).map(a=>a.value);return!!(n.includes(tt("Resource").value)||n.includes(tt("Container").value)||n.includes(tt("BasicContainer").value)||i.value.endsWith("/"))}const bd={label:"Sharing",icon:"🔒",canHandle(i,e){return Cd(i,e)},render(i,e,t){Ed(i,e,t)}};Be(bd);function Qi(i){return fe(i)}function Js(i){return i.startsWith("http://")||i.startsWith("https://")?fe(i):i.length>120?i.slice(0,117)+"...":i}function xd(i,e,t){t.innerHTML="";const n=document.createElement("div");n.className="table-view";const a=e.any(i,B("name"),null,null)?.value??e.any(i,he("title"),null,null)?.value??e.any(i,at("label"),null,null)?.value??fe(i.value),s=document.createElement("h2");s.className="table-title",s.textContent=a,n.appendChild(s);let r=[],l="";const o=e.each(i,B("itemListElement"),null,null);if(o.length>0&&(r=o,l="List Items"),r.length===0){const Y=oo(i,e);Y&&(r=Y.items,l=fe(Y.typeUri))}const u=document.createElement("p");if(u.className="table-count",u.textContent=`${r.length} ${l}${r.length!==1?"s":""}`,n.appendChild(u),r.length===0){const Y=document.createElement("p");Y.className="table-empty",Y.textContent="No items to display.",n.appendChild(Y),t.appendChild(n);return}const d=new Set;for(const Y of r){const N=e.match(Y,null,null,null);for(const j of N){const $=j.predicate.value;$!==me("type").value&&d.add($)}}const f=Array.from(d),m=[B("name").value,he("title").value,at("label").value,B("description").value,he("description").value];f.sort((Y,N)=>{const j=m.indexOf(Y),$=m.indexOf(N);return j!==-1&&$!==-1?j-$:j!==-1?-1:$!==-1?1:Qi(Y).localeCompare(Qi(N))});const w=8,y=f.slice(0,w),C=document.createElement("div");C.className="table-scroll";const T=document.createElement("table");T.className="table-data";const L=document.createElement("thead"),R=document.createElement("tr");for(const Y of y){const N=document.createElement("th");N.className="table-header",N.textContent=Qi(Y),N.setAttribute("data-predicate",Y),N.addEventListener("click",()=>{Nd(T,y.indexOf(Y))}),R.appendChild(N)}L.appendChild(R),T.appendChild(L);const Z=document.createElement("tbody");for(const Y of r){const N=document.createElement("tr");N.className="table-row";for(const j of y){const $=document.createElement("td");$.className="table-cell";const G=e.each(Y,Zn(j),null,null);if(G.length>0){const F=G[0].value;if(F.startsWith("http://")||F.startsWith("https://")){const H=document.createElement("a");H.href=F,H.textContent=Js(F),H.className="table-link",$.appendChild(H)}else $.textContent=Js(F)}N.appendChild($)}Z.appendChild(N)}if(T.appendChild(Z),C.appendChild(T),n.appendChild(C),f.length>w){const Y=document.createElement("p");Y.className="table-more",Y.textContent=`+ ${f.length-w} more columns hidden`,n.appendChild(Y)}t.appendChild(n)}function Nd(i,e,t,n,a){const s=i.querySelector("tbody");if(!s)return;const r=Array.from(s.querySelectorAll("tr")),l=i.querySelectorAll("th")[e],u=(l?.getAttribute("data-sort")??"none")==="asc"?"desc":"asc";i.querySelectorAll("th").forEach(d=>d.removeAttribute("data-sort")),l?.setAttribute("data-sort",u),r.sort((d,f)=>{const m=d.children[e]?.textContent??"",w=f.children[e]?.textContent??"",y=m.localeCompare(w,void 0,{numeric:!0});return u==="asc"?y:-y});for(const d of r)s.appendChild(d)}const Td=[B("Dataset").value,B("DataCatalog").value,B("ItemList").value,at("Class").value];function oo(i,e){const t=i.doc(),n=e.match(null,me("type"),null,t),a=new Map;for(const l of n){const o=l.object.value;if(o===at("Resource").value||o===me("Statement").value)continue;const u=a.get(o)??[];u.push(l.subject),a.set(o,u)}let s=null,r=[];for(const[l,o]of a)o.length>=2&&o.length>r.length&&(s=l,r=o);return s&&r.length>=2?{typeUri:s,items:r}:null}function Ad(i,e){const t=e.each(i,me("type"),null,null).map(a=>a.value);for(const a of Td)if(t.includes(a))return!0;if(e.any(i,B("itemListElement"),null,null))return!0;const n=oo(i,e);return!!(n&&n.items.length>=3)}const Dd={label:"Table",icon:"📊",canHandle(i,e){return Ad(i,e)},render(i,e,t){xd(i,e,t)}};Be(Dd);const _d=[".html",".htm",".xhtml"];function kd(i){try{const e=new URL(i).pathname.toLowerCase();return _d.some(t=>e.endsWith(t))}catch{return!1}}const Sd={label:"HTML",icon:"🌐",canHandle(i,e){return kd(i.value)},render(i,e,t){t.innerHTML="";const n=document.createElement("div");n.className="html-view";const a=document.createElement("iframe");a.className="html-frame",a.src=i.value,a.setAttribute("sandbox","allow-same-origin"),a.title="HTML content",a.addEventListener("load",()=>{try{const s=a.contentDocument;if(s){const r=s.documentElement.scrollHeight;a.style.height=`${Math.max(r,200)}px`}}catch{a.style.height="80vh"}}),n.appendChild(a),t.appendChild(n)}};Be(Sd);const Id={".mp3":"audio/mpeg",".wav":"audio/wav",".ogg":"audio/ogg",".oga":"audio/ogg",".flac":"audio/flac",".aac":"audio/aac",".m4a":"audio/mp4",".opus":"audio/opus",".weba":"audio/webm"};function Ks(i){try{const e=new URL(i).pathname.toLowerCase();for(const[t,n]of Object.entries(Id))if(e.endsWith(t))return n}catch{}}function Bd(i,e){const n=e.each(i,me("type"),null,null).map(a=>a.value);return!!(n.includes(B("AudioObject").value)||n.includes(sd("Track").value))}const Fd={label:"Audio",icon:"🎵",canHandle(i,e){return Ks(i.value)!==void 0||Bd(i,e)},render(i,e,t){t.innerHTML="";const n=document.createElement("div");n.className="audio-view";const a=e.any(i,he("title"),null,null)?.value??e.any(i,B("name"),null,null)?.value??fe(i.value),s=document.createElement("h3");s.className="audio-title",s.textContent=a,n.appendChild(s);const r=e.any(i,B("byArtist"),null,null)?.value??e.any(i,he("creator"),null,null)?.value;if(r){const f=document.createElement("p");f.className="audio-artist",f.textContent=r,n.appendChild(f)}const l=document.createElement("audio");l.className="audio-player",l.controls=!0,l.preload="metadata";const o=Ks(i.value);if(o){const f=document.createElement("source");f.src=i.value,f.type=o,l.appendChild(f)}else l.src=i.value;const u=document.createElement("p");u.textContent="Your browser does not support this audio format.",l.appendChild(u),n.appendChild(l);const d=e.any(i,he("description"),null,null)?.value??e.any(i,B("description"),null,null)?.value;if(d){const f=document.createElement("p");f.className="audio-description",f.textContent=d,n.appendChild(f)}t.appendChild(n)}};Be(Fd);const Ld=[".png",".jpg",".jpeg",".gif",".svg",".webp",".bmp",".ico",".avif"];function Rd(i){const e=new URL(i).pathname.toLowerCase();return Ld.some(t=>e.endsWith(t))}function Od(i,e){const n=e.each(i,me("type"),null,null).map(a=>a.value);return!!(n.includes(be("Image").value)||n.includes(B("ImageObject").value))}const $d={label:"Image",icon:"🖼",canHandle(i,e){return Rd(i.value)||Od(i,e)},render(i,e,t){t.innerHTML="";const n=document.createElement("div");n.className="image-view";const a=document.createElement("img");a.className="image-main",a.src=i.value,a.alt=fe(i.value),a.addEventListener("error",()=>{a.style.display="none";const l=document.createElement("p");l.className="error",l.textContent="Failed to load image.",n.appendChild(l)}),n.appendChild(a);const s=e.any(i,he("title"),null,null)?.value??e.any(i,B("name"),null,null)?.value,r=e.any(i,he("description"),null,null)?.value??e.any(i,B("description"),null,null)?.value;if(s||r){const l=document.createElement("div");if(l.className="image-caption",s){const o=document.createElement("h3");o.textContent=s,l.appendChild(o)}if(r){const o=document.createElement("p");o.textContent=r,l.appendChild(o)}n.appendChild(l)}t.appendChild(n)}};Be($d);function Md(i){return i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Ud(i,e,t){t.innerHTML="";const n=document.createElement("div");n.className="code-view";const a=document.createElement("div");a.className="code-header";const r=i.value.split("?")[0].split("#")[0].split("/").pop()??i.value,l=uo(i.value),o=document.createElement("span");if(o.className="code-filename",o.textContent=r,a.appendChild(o),l){const f=document.createElement("span");f.className="code-language",f.textContent=l,a.appendChild(f)}n.appendChild(a);const u=e.any(i,Kt("content"),null,null)?.value??e.any(i,he("content"),null,null)?.value;if(u){el(u,n),t.appendChild(n);return}const d=document.createElement("p");d.className="code-loading",d.textContent="Loading...",n.appendChild(d),t.appendChild(n),fetch(i.value).then(f=>{if(!f.ok)throw new Error(`HTTP ${f.status}`);return f.text()}).then(f=>{d.remove(),el(f,n)}).catch(f=>{d.textContent=`Failed to load: ${f.message}`,d.className="code-error"})}function el(i,e){const t=i.split(`
`);t.length>0&&t[t.length-1]===""&&t.pop();const n=document.createElement("pre");n.className="code-block";const a=document.createElement("table");a.className="code-table",String(t.length).length;for(let r=0;r<t.length;r++){const l=document.createElement("tr");l.className="code-line";const o=document.createElement("td");o.className="code-line-number",o.textContent=String(r+1),o.setAttribute("data-line",String(r+1)),l.appendChild(o);const u=document.createElement("td");u.className="code-line-content",u.innerHTML=Md(t[r])||`
`,l.appendChild(u),a.appendChild(l)}n.appendChild(a);const s=document.createElement("div");s.className="code-footer",s.textContent=`${t.length} line${t.length!==1?"s":""}`,e.appendChild(n),e.appendChild(s)}const Pd={".js":"JavaScript",".mjs":"JavaScript",".cjs":"JavaScript",".jsx":"JSX",".ts":"TypeScript",".tsx":"TSX",".py":"Python",".rb":"Ruby",".rs":"Rust",".go":"Go",".java":"Java",".kt":"Kotlin",".scala":"Scala",".c":"C",".h":"C Header",".cpp":"C++",".cc":"C++",".hpp":"C++ Header",".cs":"C#",".swift":"Swift",".php":"PHP",".pl":"Perl",".lua":"Lua",".r":"R",".sh":"Shell",".bash":"Bash",".zsh":"Zsh",".fish":"Fish",".ps1":"PowerShell",".sql":"SQL",".json":"JSON",".yaml":"YAML",".yml":"YAML",".toml":"TOML",".xml":"XML",".css":"CSS",".scss":"SCSS",".less":"LESS",".sass":"Sass",".graphql":"GraphQL",".gql":"GraphQL",".proto":"Protocol Buffers",".dockerfile":"Dockerfile",".tf":"Terraform",".vim":"Vim Script",".el":"Emacs Lisp",".clj":"Clojure",".ex":"Elixir",".exs":"Elixir",".erl":"Erlang",".hs":"Haskell",".ml":"OCaml",".fs":"F#",".dart":"Dart",".zig":"Zig",".v":"V",".nim":"Nim",".wasm":"WebAssembly",".wat":"WebAssembly Text"};function uo(i){const t=i.split("?")[0].split("#")[0].split("/").pop()??"",n=t.toLowerCase();if(n==="dockerfile")return"Dockerfile";if(n==="makefile"||n==="gnumakefile")return"Makefile";if(n==="rakefile"||n==="gemfile")return"Ruby";if(n==="cmakelists.txt")return"CMake";const a=t.lastIndexOf(".");if(a===-1)return null;const s=t.slice(a).toLowerCase();return Pd[s]??null}function qd(i,e){return!!(uo(i.value)||e.each(i,me("type"),null,null).map(n=>n.value).includes(B("SoftwareSourceCode").value))}const Hd={label:"Code",icon:"💻",canHandle(i,e){return qd(i,e)},render(i,e,t){Ud(i,e,t)}};Be(Hd);function Na(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Un=Na();function co(i){Un=i}var Cr={exec:()=>null};function Ue(i,e=""){let t=typeof i=="string"?i:i.source;const n={replace:(a,s)=>{let r=typeof s=="string"?s:s.source;return r=r.replace(Et.caret,"$1"),t=t.replace(a,r),n},getRegex:()=>new RegExp(t,e)};return n}var Et={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:i=>new RegExp(`^( {0,3}${i})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:i=>new RegExp(`^ {0,${Math.min(3,i-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:i=>new RegExp(`^ {0,${Math.min(3,i-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:i=>new RegExp(`^ {0,${Math.min(3,i-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:i=>new RegExp(`^ {0,${Math.min(3,i-1)}}#`),htmlBeginRegex:i=>new RegExp(`^ {0,${Math.min(3,i-1)}}<(?:[a-z].*>|!--)`,"i")},zd=/^(?:[ \t]*(?:\n|$))+/,jd=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,Vd=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,kr=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Gd=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Ta=/(?:[*+-]|\d{1,9}[.)])/,ho=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,fo=Ue(ho).replace(/bull/g,Ta).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Xd=Ue(ho).replace(/bull/g,Ta).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Aa=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Wd=/^[^\n]+/,Da=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Qd=Ue(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Da).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Yd=Ue(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Ta).getRegex(),wi="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",_a=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Zd=Ue("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",_a).replace("tag",wi).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),po=Ue(Aa).replace("hr",kr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",wi).getRegex(),Jd=Ue(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",po).getRegex(),ka={blockquote:Jd,code:jd,def:Qd,fences:Vd,heading:Gd,hr:kr,html:Zd,lheading:fo,list:Yd,newline:zd,paragraph:po,table:Cr,text:Wd},tl=Ue("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",kr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",wi).getRegex(),Kd={...ka,lheading:Xd,table:tl,paragraph:Ue(Aa).replace("hr",kr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",tl).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",wi).getRegex()},ef={...ka,html:Ue(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",_a).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Cr,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ue(Aa).replace("hr",kr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",fo).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},tf=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,nf=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,mo=/^( {2,}|\\)\n(?!\s*$)/,rf=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Ei=/[\p{P}\p{S}]/u,Sa=/[\s\p{P}\p{S}]/u,go=/[^\s\p{P}\p{S}]/u,af=Ue(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Sa).getRegex(),vo=/(?!~)[\p{P}\p{S}]/u,sf=/(?!~)[\s\p{P}\p{S}]/u,lf=/(?:[^\s\p{P}\p{S}]|~)/u,of=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,yo=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,uf=Ue(yo,"u").replace(/punct/g,Ei).getRegex(),cf=Ue(yo,"u").replace(/punct/g,vo).getRegex(),wo="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",hf=Ue(wo,"gu").replace(/notPunctSpace/g,go).replace(/punctSpace/g,Sa).replace(/punct/g,Ei).getRegex(),df=Ue(wo,"gu").replace(/notPunctSpace/g,lf).replace(/punctSpace/g,sf).replace(/punct/g,vo).getRegex(),ff=Ue("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,go).replace(/punctSpace/g,Sa).replace(/punct/g,Ei).getRegex(),pf=Ue(/\\(punct)/,"gu").replace(/punct/g,Ei).getRegex(),mf=Ue(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),gf=Ue(_a).replace("(?:-->|$)","-->").getRegex(),vf=Ue("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",gf).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),mi=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,yf=Ue(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",mi).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Eo=Ue(/^!?\[(label)\]\[(ref)\]/).replace("label",mi).replace("ref",Da).getRegex(),Co=Ue(/^!?\[(ref)\](?:\[\])?/).replace("ref",Da).getRegex(),wf=Ue("reflink|nolink(?!\\()","g").replace("reflink",Eo).replace("nolink",Co).getRegex(),Ia={_backpedal:Cr,anyPunctuation:pf,autolink:mf,blockSkip:of,br:mo,code:nf,del:Cr,emStrongLDelim:uf,emStrongRDelimAst:hf,emStrongRDelimUnd:ff,escape:tf,link:yf,nolink:Co,punctuation:af,reflink:Eo,reflinkSearch:wf,tag:vf,text:rf,url:Cr},Ef={...Ia,link:Ue(/^!?\[(label)\]\((.*?)\)/).replace("label",mi).getRegex(),reflink:Ue(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",mi).getRegex()},ca={...Ia,emStrongRDelimAst:df,emStrongLDelim:cf,url:Ue(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Cf={...ca,br:Ue(mo).replace("{2,}","*").getRegex(),text:Ue(ca.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},ri={normal:ka,gfm:Kd,pedantic:ef},fr={normal:Ia,gfm:ca,breaks:Cf,pedantic:Ef},bf={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},nl=i=>bf[i];function Qt(i,e){if(e){if(Et.escapeTest.test(i))return i.replace(Et.escapeReplace,nl)}else if(Et.escapeTestNoEncode.test(i))return i.replace(Et.escapeReplaceNoEncode,nl);return i}function rl(i){try{i=encodeURI(i).replace(Et.percentDecode,"%")}catch{return null}return i}function il(i,e){const t=i.replace(Et.findPipe,(s,r,l)=>{let o=!1,u=r;for(;--u>=0&&l[u]==="\\";)o=!o;return o?"|":" |"}),n=t.split(Et.splitPipe);let a=0;if(n[0].trim()||n.shift(),n.length>0&&!n.at(-1)?.trim()&&n.pop(),e)if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;a<n.length;a++)n[a]=n[a].trim().replace(Et.slashPipe,"|");return n}function pr(i,e,t){const n=i.length;if(n===0)return"";let a=0;for(;a<n&&i.charAt(n-a-1)===e;)a++;return i.slice(0,n-a)}function xf(i,e){if(i.indexOf(e[1])===-1)return-1;let t=0;for(let n=0;n<i.length;n++)if(i[n]==="\\")n++;else if(i[n]===e[0])t++;else if(i[n]===e[1]&&(t--,t<0))return n;return t>0?-2:-1}function al(i,e,t,n,a){const s=e.href,r=e.title||null,l=i[1].replace(a.other.outputLinkReplace,"$1");n.state.inLink=!0;const o={type:i[0].charAt(0)==="!"?"image":"link",raw:t,href:s,title:r,text:l,tokens:n.inlineTokens(l)};return n.state.inLink=!1,o}function Nf(i,e,t){const n=i.match(t.other.indentCodeCompensation);if(n===null)return e;const a=n[1];return e.split(`
`).map(s=>{const r=s.match(t.other.beginningSpace);if(r===null)return s;const[l]=r;return l.length>=a.length?s.slice(a.length):s}).join(`
`)}var gi=class{options;rules;lexer;constructor(i){this.options=i||Un}space(i){const e=this.rules.block.newline.exec(i);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(i){const e=this.rules.block.code.exec(i);if(e){const t=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:pr(t,`
`)}}}fences(i){const e=this.rules.block.fences.exec(i);if(e){const t=e[0],n=Nf(t,e[3]||"",this.rules);return{type:"code",raw:t,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:n}}}heading(i){const e=this.rules.block.heading.exec(i);if(e){let t=e[2].trim();if(this.rules.other.endingHash.test(t)){const n=pr(t,"#");(this.options.pedantic||!n||this.rules.other.endingSpaceChar.test(n))&&(t=n.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(i){const e=this.rules.block.hr.exec(i);if(e)return{type:"hr",raw:pr(e[0],`
`)}}blockquote(i){const e=this.rules.block.blockquote.exec(i);if(e){let t=pr(e[0],`
`).split(`
`),n="",a="";const s=[];for(;t.length>0;){let r=!1;const l=[];let o;for(o=0;o<t.length;o++)if(this.rules.other.blockquoteStart.test(t[o]))l.push(t[o]),r=!0;else if(!r)l.push(t[o]);else break;t=t.slice(o);const u=l.join(`
`),d=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");n=n?`${n}
${u}`:u,a=a?`${a}
${d}`:d;const f=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(d,s,!0),this.lexer.state.top=f,t.length===0)break;const m=s.at(-1);if(m?.type==="code")break;if(m?.type==="blockquote"){const w=m,y=w.raw+`
`+t.join(`
`),C=this.blockquote(y);s[s.length-1]=C,n=n.substring(0,n.length-w.raw.length)+C.raw,a=a.substring(0,a.length-w.text.length)+C.text;break}else if(m?.type==="list"){const w=m,y=w.raw+`
`+t.join(`
`),C=this.list(y);s[s.length-1]=C,n=n.substring(0,n.length-m.raw.length)+C.raw,a=a.substring(0,a.length-w.raw.length)+C.raw,t=y.substring(s.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:n,tokens:s,text:a}}}list(i){let e=this.rules.block.list.exec(i);if(e){let t=e[1].trim();const n=t.length>1,a={type:"list",raw:"",ordered:n,start:n?+t.slice(0,-1):"",loose:!1,items:[]};t=n?`\\d{1,9}\\${t.slice(-1)}`:`\\${t}`,this.options.pedantic&&(t=n?t:"[*+-]");const s=this.rules.other.listItemRegex(t);let r=!1;for(;i;){let o=!1,u="",d="";if(!(e=s.exec(i))||this.rules.block.hr.test(i))break;u=e[0],i=i.substring(u.length);let f=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,L=>" ".repeat(3*L.length)),m=i.split(`
`,1)[0],w=!f.trim(),y=0;if(this.options.pedantic?(y=2,d=f.trimStart()):w?y=e[1].length+1:(y=e[2].search(this.rules.other.nonSpaceChar),y=y>4?1:y,d=f.slice(y),y+=e[1].length),w&&this.rules.other.blankLine.test(m)&&(u+=m+`
`,i=i.substring(m.length+1),o=!0),!o){const L=this.rules.other.nextBulletRegex(y),R=this.rules.other.hrRegex(y),Z=this.rules.other.fencesBeginRegex(y),Y=this.rules.other.headingBeginRegex(y),N=this.rules.other.htmlBeginRegex(y);for(;i;){const j=i.split(`
`,1)[0];let $;if(m=j,this.options.pedantic?(m=m.replace(this.rules.other.listReplaceNesting,"  "),$=m):$=m.replace(this.rules.other.tabCharGlobal,"    "),Z.test(m)||Y.test(m)||N.test(m)||L.test(m)||R.test(m))break;if($.search(this.rules.other.nonSpaceChar)>=y||!m.trim())d+=`
`+$.slice(y);else{if(w||f.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||Z.test(f)||Y.test(f)||R.test(f))break;d+=`
`+m}!w&&!m.trim()&&(w=!0),u+=j+`
`,i=i.substring(j.length+1),f=$.slice(y)}}a.loose||(r?a.loose=!0:this.rules.other.doubleBlankLine.test(u)&&(r=!0));let C=null,T;this.options.gfm&&(C=this.rules.other.listIsTask.exec(d),C&&(T=C[0]!=="[ ] ",d=d.replace(this.rules.other.listReplaceTask,""))),a.items.push({type:"list_item",raw:u,task:!!C,checked:T,loose:!1,text:d,tokens:[]}),a.raw+=u}const l=a.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;a.raw=a.raw.trimEnd();for(let o=0;o<a.items.length;o++)if(this.lexer.state.top=!1,a.items[o].tokens=this.lexer.blockTokens(a.items[o].text,[]),!a.loose){const u=a.items[o].tokens.filter(f=>f.type==="space"),d=u.length>0&&u.some(f=>this.rules.other.anyLine.test(f.raw));a.loose=d}if(a.loose)for(let o=0;o<a.items.length;o++)a.items[o].loose=!0;return a}}html(i){const e=this.rules.block.html.exec(i);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(i){const e=this.rules.block.def.exec(i);if(e){const t=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),n=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",a=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:t,raw:e[0],href:n,title:a}}}table(i){const e=this.rules.block.table.exec(i);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;const t=il(e[1]),n=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),a=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],s={type:"table",raw:e[0],header:[],align:[],rows:[]};if(t.length===n.length){for(const r of n)this.rules.other.tableAlignRight.test(r)?s.align.push("right"):this.rules.other.tableAlignCenter.test(r)?s.align.push("center"):this.rules.other.tableAlignLeft.test(r)?s.align.push("left"):s.align.push(null);for(let r=0;r<t.length;r++)s.header.push({text:t[r],tokens:this.lexer.inline(t[r]),header:!0,align:s.align[r]});for(const r of a)s.rows.push(il(r,s.header.length).map((l,o)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:s.align[o]})));return s}}lheading(i){const e=this.rules.block.lheading.exec(i);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(i){const e=this.rules.block.paragraph.exec(i);if(e){const t=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:t,tokens:this.lexer.inline(t)}}}text(i){const e=this.rules.block.text.exec(i);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(i){const e=this.rules.inline.escape.exec(i);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(i){const e=this.rules.inline.tag.exec(i);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(i){const e=this.rules.inline.link.exec(i);if(e){const t=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(t)){if(!this.rules.other.endAngleBracket.test(t))return;const s=pr(t.slice(0,-1),"\\");if((t.length-s.length)%2===0)return}else{const s=xf(e[2],"()");if(s===-2)return;if(s>-1){const l=(e[0].indexOf("!")===0?5:4)+e[1].length+s;e[2]=e[2].substring(0,s),e[0]=e[0].substring(0,l).trim(),e[3]=""}}let n=e[2],a="";if(this.options.pedantic){const s=this.rules.other.pedanticHrefTitle.exec(n);s&&(n=s[1],a=s[3])}else a=e[3]?e[3].slice(1,-1):"";return n=n.trim(),this.rules.other.startAngleBracket.test(n)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(t)?n=n.slice(1):n=n.slice(1,-1)),al(e,{href:n&&n.replace(this.rules.inline.anyPunctuation,"$1"),title:a&&a.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(i,e){let t;if((t=this.rules.inline.reflink.exec(i))||(t=this.rules.inline.nolink.exec(i))){const n=(t[2]||t[1]).replace(this.rules.other.multipleSpaceGlobal," "),a=e[n.toLowerCase()];if(!a){const s=t[0].charAt(0);return{type:"text",raw:s,text:s}}return al(t,a,t[0],this.lexer,this.rules)}}emStrong(i,e,t=""){let n=this.rules.inline.emStrongLDelim.exec(i);if(!n||n[3]&&t.match(this.rules.other.unicodeAlphaNumeric))return;if(!(n[1]||n[2]||"")||!t||this.rules.inline.punctuation.exec(t)){const s=[...n[0]].length-1;let r,l,o=s,u=0;const d=n[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(d.lastIndex=0,e=e.slice(-1*i.length+s);(n=d.exec(e))!=null;){if(r=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!r)continue;if(l=[...r].length,n[3]||n[4]){o+=l;continue}else if((n[5]||n[6])&&s%3&&!((s+l)%3)){u+=l;continue}if(o-=l,o>0)continue;l=Math.min(l,l+o+u);const f=[...n[0]][0].length,m=i.slice(0,s+n.index+f+l);if(Math.min(s,l)%2){const y=m.slice(1,-1);return{type:"em",raw:m,text:y,tokens:this.lexer.inlineTokens(y)}}const w=m.slice(2,-2);return{type:"strong",raw:m,text:w,tokens:this.lexer.inlineTokens(w)}}}}codespan(i){const e=this.rules.inline.code.exec(i);if(e){let t=e[2].replace(this.rules.other.newLineCharGlobal," ");const n=this.rules.other.nonSpaceChar.test(t),a=this.rules.other.startingSpaceChar.test(t)&&this.rules.other.endingSpaceChar.test(t);return n&&a&&(t=t.substring(1,t.length-1)),{type:"codespan",raw:e[0],text:t}}}br(i){const e=this.rules.inline.br.exec(i);if(e)return{type:"br",raw:e[0]}}del(i){const e=this.rules.inline.del.exec(i);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(i){const e=this.rules.inline.autolink.exec(i);if(e){let t,n;return e[2]==="@"?(t=e[1],n="mailto:"+t):(t=e[1],n=t),{type:"link",raw:e[0],text:t,href:n,tokens:[{type:"text",raw:t,text:t}]}}}url(i){let e;if(e=this.rules.inline.url.exec(i)){let t,n;if(e[2]==="@")t=e[0],n="mailto:"+t;else{let a;do a=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??"";while(a!==e[0]);t=e[0],e[1]==="www."?n="http://"+e[0]:n=e[0]}return{type:"link",raw:e[0],text:t,href:n,tokens:[{type:"text",raw:t,text:t}]}}}inlineText(i){const e=this.rules.inline.text.exec(i);if(e){const t=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:t}}}},cn=class ha{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Un,this.options.tokenizer=this.options.tokenizer||new gi,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={other:Et,block:ri.normal,inline:fr.normal};this.options.pedantic?(t.block=ri.pedantic,t.inline=fr.pedantic):this.options.gfm&&(t.block=ri.gfm,this.options.breaks?t.inline=fr.breaks:t.inline=fr.gfm),this.tokenizer.rules=t}static get rules(){return{block:ri,inline:fr}}static lex(e,t){return new ha(t).lex(e)}static lexInline(e,t){return new ha(t).inlineTokens(e)}lex(e){e=e.replace(Et.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const n=this.inlineQueue[t];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],n=!1){for(this.options.pedantic&&(e=e.replace(Et.tabCharGlobal,"    ").replace(Et.spaceLine,""));e;){let a;if(this.options.extensions?.block?.some(r=>(a=r.call({lexer:this},e,t))?(e=e.substring(a.raw.length),t.push(a),!0):!1))continue;if(a=this.tokenizer.space(e)){e=e.substring(a.raw.length);const r=t.at(-1);a.raw.length===1&&r!==void 0?r.raw+=`
`:t.push(a);continue}if(a=this.tokenizer.code(e)){e=e.substring(a.raw.length);const r=t.at(-1);r?.type==="paragraph"||r?.type==="text"?(r.raw+=`
`+a.raw,r.text+=`
`+a.text,this.inlineQueue.at(-1).src=r.text):t.push(a);continue}if(a=this.tokenizer.fences(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.heading(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.hr(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.blockquote(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.list(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.html(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.def(e)){e=e.substring(a.raw.length);const r=t.at(-1);r?.type==="paragraph"||r?.type==="text"?(r.raw+=`
`+a.raw,r.text+=`
`+a.raw,this.inlineQueue.at(-1).src=r.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title});continue}if(a=this.tokenizer.table(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.lheading(e)){e=e.substring(a.raw.length),t.push(a);continue}let s=e;if(this.options.extensions?.startBlock){let r=1/0;const l=e.slice(1);let o;this.options.extensions.startBlock.forEach(u=>{o=u.call({lexer:this},l),typeof o=="number"&&o>=0&&(r=Math.min(r,o))}),r<1/0&&r>=0&&(s=e.substring(0,r+1))}if(this.state.top&&(a=this.tokenizer.paragraph(s))){const r=t.at(-1);n&&r?.type==="paragraph"?(r.raw+=`
`+a.raw,r.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=r.text):t.push(a),n=s.length!==e.length,e=e.substring(a.raw.length);continue}if(a=this.tokenizer.text(e)){e=e.substring(a.raw.length);const r=t.at(-1);r?.type==="text"?(r.raw+=`
`+a.raw,r.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=r.text):t.push(a);continue}if(e){const r="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(r);break}else throw new Error(r)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let n=e,a=null;if(this.tokens.links){const l=Object.keys(this.tokens.links);if(l.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(n))!=null;)l.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(n=n.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(n))!=null;)n=n.slice(0,a.index)+"++"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(a=this.tokenizer.rules.inline.blockSkip.exec(n))!=null;)n=n.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let s=!1,r="";for(;e;){s||(r=""),s=!1;let l;if(this.options.extensions?.inline?.some(u=>(l=u.call({lexer:this},e,t))?(e=e.substring(l.raw.length),t.push(l),!0):!1))continue;if(l=this.tokenizer.escape(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.tag(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.link(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(l.raw.length);const u=t.at(-1);l.type==="text"&&u?.type==="text"?(u.raw+=l.raw,u.text+=l.text):t.push(l);continue}if(l=this.tokenizer.emStrong(e,n,r)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.codespan(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.br(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.del(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.autolink(e)){e=e.substring(l.raw.length),t.push(l);continue}if(!this.state.inLink&&(l=this.tokenizer.url(e))){e=e.substring(l.raw.length),t.push(l);continue}let o=e;if(this.options.extensions?.startInline){let u=1/0;const d=e.slice(1);let f;this.options.extensions.startInline.forEach(m=>{f=m.call({lexer:this},d),typeof f=="number"&&f>=0&&(u=Math.min(u,f))}),u<1/0&&u>=0&&(o=e.substring(0,u+1))}if(l=this.tokenizer.inlineText(o)){e=e.substring(l.raw.length),l.raw.slice(-1)!=="_"&&(r=l.raw.slice(-1)),s=!0;const u=t.at(-1);u?.type==="text"?(u.raw+=l.raw,u.text+=l.text):t.push(l);continue}if(e){const u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return t}},vi=class{options;parser;constructor(i){this.options=i||Un}space(i){return""}code({text:i,lang:e,escaped:t}){const n=(e||"").match(Et.notSpaceStart)?.[0],a=i.replace(Et.endingNewline,"")+`
`;return n?'<pre><code class="language-'+Qt(n)+'">'+(t?a:Qt(a,!0))+`</code></pre>
`:"<pre><code>"+(t?a:Qt(a,!0))+`</code></pre>
`}blockquote({tokens:i}){return`<blockquote>
${this.parser.parse(i)}</blockquote>
`}html({text:i}){return i}heading({tokens:i,depth:e}){return`<h${e}>${this.parser.parseInline(i)}</h${e}>
`}hr(i){return`<hr>
`}list(i){const e=i.ordered,t=i.start;let n="";for(let r=0;r<i.items.length;r++){const l=i.items[r];n+=this.listitem(l)}const a=e?"ol":"ul",s=e&&t!==1?' start="'+t+'"':"";return"<"+a+s+`>
`+n+"</"+a+`>
`}listitem(i){let e="";if(i.task){const t=this.checkbox({checked:!!i.checked});i.loose?i.tokens[0]?.type==="paragraph"?(i.tokens[0].text=t+" "+i.tokens[0].text,i.tokens[0].tokens&&i.tokens[0].tokens.length>0&&i.tokens[0].tokens[0].type==="text"&&(i.tokens[0].tokens[0].text=t+" "+Qt(i.tokens[0].tokens[0].text),i.tokens[0].tokens[0].escaped=!0)):i.tokens.unshift({type:"text",raw:t+" ",text:t+" ",escaped:!0}):e+=t+" "}return e+=this.parser.parse(i.tokens,!!i.loose),`<li>${e}</li>
`}checkbox({checked:i}){return"<input "+(i?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:i}){return`<p>${this.parser.parseInline(i)}</p>
`}table(i){let e="",t="";for(let a=0;a<i.header.length;a++)t+=this.tablecell(i.header[a]);e+=this.tablerow({text:t});let n="";for(let a=0;a<i.rows.length;a++){const s=i.rows[a];t="";for(let r=0;r<s.length;r++)t+=this.tablecell(s[r]);n+=this.tablerow({text:t})}return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+n+`</table>
`}tablerow({text:i}){return`<tr>
${i}</tr>
`}tablecell(i){const e=this.parser.parseInline(i.tokens),t=i.header?"th":"td";return(i.align?`<${t} align="${i.align}">`:`<${t}>`)+e+`</${t}>
`}strong({tokens:i}){return`<strong>${this.parser.parseInline(i)}</strong>`}em({tokens:i}){return`<em>${this.parser.parseInline(i)}</em>`}codespan({text:i}){return`<code>${Qt(i,!0)}</code>`}br(i){return"<br>"}del({tokens:i}){return`<del>${this.parser.parseInline(i)}</del>`}link({href:i,title:e,tokens:t}){const n=this.parser.parseInline(t),a=rl(i);if(a===null)return n;i=a;let s='<a href="'+i+'"';return e&&(s+=' title="'+Qt(e)+'"'),s+=">"+n+"</a>",s}image({href:i,title:e,text:t,tokens:n}){n&&(t=this.parser.parseInline(n,this.parser.textRenderer));const a=rl(i);if(a===null)return Qt(t);i=a;let s=`<img src="${i}" alt="${t}"`;return e&&(s+=` title="${Qt(e)}"`),s+=">",s}text(i){return"tokens"in i&&i.tokens?this.parser.parseInline(i.tokens):"escaped"in i&&i.escaped?i.text:Qt(i.text)}},Ba=class{strong({text:i}){return i}em({text:i}){return i}codespan({text:i}){return i}del({text:i}){return i}html({text:i}){return i}text({text:i}){return i}link({text:i}){return""+i}image({text:i}){return""+i}br(){return""}},hn=class da{options;renderer;textRenderer;constructor(e){this.options=e||Un,this.options.renderer=this.options.renderer||new vi,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Ba}static parse(e,t){return new da(t).parse(e)}static parseInline(e,t){return new da(t).parseInline(e)}parse(e,t=!0){let n="";for(let a=0;a<e.length;a++){const s=e[a];if(this.options.extensions?.renderers?.[s.type]){const l=s,o=this.options.extensions.renderers[l.type].call({parser:this},l);if(o!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(l.type)){n+=o||"";continue}}const r=s;switch(r.type){case"space":{n+=this.renderer.space(r);continue}case"hr":{n+=this.renderer.hr(r);continue}case"heading":{n+=this.renderer.heading(r);continue}case"code":{n+=this.renderer.code(r);continue}case"table":{n+=this.renderer.table(r);continue}case"blockquote":{n+=this.renderer.blockquote(r);continue}case"list":{n+=this.renderer.list(r);continue}case"html":{n+=this.renderer.html(r);continue}case"paragraph":{n+=this.renderer.paragraph(r);continue}case"text":{let l=r,o=this.renderer.text(l);for(;a+1<e.length&&e[a+1].type==="text";)l=e[++a],o+=`
`+this.renderer.text(l);t?n+=this.renderer.paragraph({type:"paragraph",raw:o,text:o,tokens:[{type:"text",raw:o,text:o,escaped:!0}]}):n+=o;continue}default:{const l='Token with "'+r.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return n}parseInline(e,t=this.renderer){let n="";for(let a=0;a<e.length;a++){const s=e[a];if(this.options.extensions?.renderers?.[s.type]){const l=this.options.extensions.renderers[s.type].call({parser:this},s);if(l!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){n+=l||"";continue}}const r=s;switch(r.type){case"escape":{n+=t.text(r);break}case"html":{n+=t.html(r);break}case"link":{n+=t.link(r);break}case"image":{n+=t.image(r);break}case"strong":{n+=t.strong(r);break}case"em":{n+=t.em(r);break}case"codespan":{n+=t.codespan(r);break}case"br":{n+=t.br(r);break}case"del":{n+=t.del(r);break}case"text":{n+=t.text(r);break}default:{const l='Token with "'+r.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return n}},oi=class{options;block;constructor(i){this.options=i||Un}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(i){return i}postprocess(i){return i}processAllTokens(i){return i}provideLexer(){return this.block?cn.lex:cn.lexInline}provideParser(){return this.block?hn.parse:hn.parseInline}},Tf=class{defaults=Na();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=hn;Renderer=vi;TextRenderer=Ba;Lexer=cn;Tokenizer=gi;Hooks=oi;constructor(...i){this.use(...i)}walkTokens(i,e){let t=[];for(const n of i)switch(t=t.concat(e.call(this,n)),n.type){case"table":{const a=n;for(const s of a.header)t=t.concat(this.walkTokens(s.tokens,e));for(const s of a.rows)for(const r of s)t=t.concat(this.walkTokens(r.tokens,e));break}case"list":{const a=n;t=t.concat(this.walkTokens(a.items,e));break}default:{const a=n;this.defaults.extensions?.childTokens?.[a.type]?this.defaults.extensions.childTokens[a.type].forEach(s=>{const r=a[s].flat(1/0);t=t.concat(this.walkTokens(r,e))}):a.tokens&&(t=t.concat(this.walkTokens(a.tokens,e)))}}return t}use(...i){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return i.forEach(t=>{const n={...t};if(n.async=this.defaults.async||n.async||!1,t.extensions&&(t.extensions.forEach(a=>{if(!a.name)throw new Error("extension name required");if("renderer"in a){const s=e.renderers[a.name];s?e.renderers[a.name]=function(...r){let l=a.renderer.apply(this,r);return l===!1&&(l=s.apply(this,r)),l}:e.renderers[a.name]=a.renderer}if("tokenizer"in a){if(!a.level||a.level!=="block"&&a.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const s=e[a.level];s?s.unshift(a.tokenizer):e[a.level]=[a.tokenizer],a.start&&(a.level==="block"?e.startBlock?e.startBlock.push(a.start):e.startBlock=[a.start]:a.level==="inline"&&(e.startInline?e.startInline.push(a.start):e.startInline=[a.start]))}"childTokens"in a&&a.childTokens&&(e.childTokens[a.name]=a.childTokens)}),n.extensions=e),t.renderer){const a=this.defaults.renderer||new vi(this.defaults);for(const s in t.renderer){if(!(s in a))throw new Error(`renderer '${s}' does not exist`);if(["options","parser"].includes(s))continue;const r=s,l=t.renderer[r],o=a[r];a[r]=(...u)=>{let d=l.apply(a,u);return d===!1&&(d=o.apply(a,u)),d||""}}n.renderer=a}if(t.tokenizer){const a=this.defaults.tokenizer||new gi(this.defaults);for(const s in t.tokenizer){if(!(s in a))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;const r=s,l=t.tokenizer[r],o=a[r];a[r]=(...u)=>{let d=l.apply(a,u);return d===!1&&(d=o.apply(a,u)),d}}n.tokenizer=a}if(t.hooks){const a=this.defaults.hooks||new oi;for(const s in t.hooks){if(!(s in a))throw new Error(`hook '${s}' does not exist`);if(["options","block"].includes(s))continue;const r=s,l=t.hooks[r],o=a[r];oi.passThroughHooks.has(s)?a[r]=u=>{if(this.defaults.async)return Promise.resolve(l.call(a,u)).then(f=>o.call(a,f));const d=l.call(a,u);return o.call(a,d)}:a[r]=(...u)=>{let d=l.apply(a,u);return d===!1&&(d=o.apply(a,u)),d}}n.hooks=a}if(t.walkTokens){const a=this.defaults.walkTokens,s=t.walkTokens;n.walkTokens=function(r){let l=[];return l.push(s.call(this,r)),a&&(l=l.concat(a.call(this,r))),l}}this.defaults={...this.defaults,...n}}),this}setOptions(i){return this.defaults={...this.defaults,...i},this}lexer(i,e){return cn.lex(i,e??this.defaults)}parser(i,e){return hn.parse(i,e??this.defaults)}parseMarkdown(i){return(t,n)=>{const a={...n},s={...this.defaults,...a},r=this.onError(!!s.silent,!!s.async);if(this.defaults.async===!0&&a.async===!1)return r(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||t===null)return r(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return r(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));s.hooks&&(s.hooks.options=s,s.hooks.block=i);const l=s.hooks?s.hooks.provideLexer():i?cn.lex:cn.lexInline,o=s.hooks?s.hooks.provideParser():i?hn.parse:hn.parseInline;if(s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(t):t).then(u=>l(u,s)).then(u=>s.hooks?s.hooks.processAllTokens(u):u).then(u=>s.walkTokens?Promise.all(this.walkTokens(u,s.walkTokens)).then(()=>u):u).then(u=>o(u,s)).then(u=>s.hooks?s.hooks.postprocess(u):u).catch(r);try{s.hooks&&(t=s.hooks.preprocess(t));let u=l(t,s);s.hooks&&(u=s.hooks.processAllTokens(u)),s.walkTokens&&this.walkTokens(u,s.walkTokens);let d=o(u,s);return s.hooks&&(d=s.hooks.postprocess(d)),d}catch(u){return r(u)}}}onError(i,e){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,i){const n="<p>An error occurred:</p><pre>"+Qt(t.message+"",!0)+"</pre>";return e?Promise.resolve(n):n}if(e)return Promise.reject(t);throw t}}},On=new Tf;function Me(i,e){return On.parse(i,e)}Me.options=Me.setOptions=function(i){return On.setOptions(i),Me.defaults=On.defaults,co(Me.defaults),Me};Me.getDefaults=Na;Me.defaults=Un;Me.use=function(...i){return On.use(...i),Me.defaults=On.defaults,co(Me.defaults),Me};Me.walkTokens=function(i,e){return On.walkTokens(i,e)};Me.parseInline=On.parseInline;Me.Parser=hn;Me.parser=hn.parse;Me.Renderer=vi;Me.TextRenderer=Ba;Me.Lexer=cn;Me.lexer=cn.lex;Me.Tokenizer=gi;Me.Hooks=oi;Me.parse=Me;Me.options;Me.setOptions;Me.use;Me.walkTokens;Me.parseInline;hn.parse;cn.lex;const Af=[".md",".markdown",".mdown",".mkd",".mkdn"];function Df(i){try{const e=new URL(i).pathname.toLowerCase();return Af.some(t=>e.endsWith(t))}catch{return!1}}function _f(i,e){const t=e.match(null,null,null,i.doc());if(t.length!==0){for(const n of t)if(n.predicate.value==="http://www.w3.org/ns/solid/terms#content"||n.predicate.value==="http://purl.org/dc/terms/content")return n.object.value}}const kf={label:"Markdown",icon:"📝",canHandle(i,e){return Df(i.value)},render(i,e,t){t.innerHTML="";const n=document.createElement("div");n.className="markdown-view";const a=_f(i,e);if(a)n.innerHTML=Me.parse(a);else{const s=document.createElement("p");s.className="loading",s.textContent="Loading markdown...",n.appendChild(s),fetch(i.value).then(r=>{if(!r.ok)throw new Error(`HTTP ${r.status}`);return r.text()}).then(r=>{n.innerHTML=Me.parse(r)}).catch(()=>{n.innerHTML="";const r=document.createElement("p");r.className="error",r.textContent="Failed to load markdown content.",n.appendChild(r)})}t.appendChild(n)}};Be(kf);function Sf(i){try{return new URL(i).pathname.toLowerCase().endsWith(".pdf")}catch{return!1}}const If={label:"PDF",icon:"📄",canHandle(i,e){return Sf(i.value)},render(i,e,t){t.innerHTML="";const n=document.createElement("div");n.className="pdf-view";const a=document.createElement("h3");a.className="pdf-title",a.textContent=fe(i.value),n.appendChild(a);const s=document.createElement("object");s.className="pdf-embed",s.data=i.value,s.type="application/pdf";const r=document.createElement("div");r.className="pdf-fallback";const l=document.createElement("p");l.textContent="Unable to display PDF inline.",r.appendChild(l);const o=document.createElement("a");o.href=i.value,o.textContent="Download PDF",o.target="_blank",o.rel="noopener",r.appendChild(o),s.appendChild(r),n.appendChild(s),t.appendChild(n)}};Be(If);const Bf={".mp4":"video/mp4",".webm":"video/webm",".ogg":"video/ogg",".ogv":"video/ogg",".mov":"video/mp4",".m4v":"video/mp4"};function sl(i){try{const e=new URL(i).pathname.toLowerCase();for(const[t,n]of Object.entries(Bf))if(e.endsWith(t))return n}catch{}}function Ff(i,e){return!!e.each(i,me("type"),null,null).map(a=>a.value).includes(B("VideoObject").value)}const Lf={label:"Video",icon:"🎬",canHandle(i,e){return sl(i.value)!==void 0||Ff(i,e)},render(i,e,t){t.innerHTML="";const n=document.createElement("div");n.className="video-view";const a=document.createElement("video");a.className="video-main",a.controls=!0,a.preload="metadata";const s=sl(i.value);if(s){const u=document.createElement("source");u.src=i.value,u.type=s,a.appendChild(u)}else a.src=i.value;const r=document.createElement("p");r.textContent="Your browser does not support this video format.",a.appendChild(r),n.appendChild(a);const l=e.any(i,he("title"),null,null)?.value??e.any(i,B("name"),null,null)?.value,o=e.any(i,he("description"),null,null)?.value??e.any(i,B("description"),null,null)?.value;if(l||o){const u=document.createElement("div");if(u.className="video-caption",l){const d=document.createElement("h3");d.textContent=l,u.appendChild(d)}if(o){const d=document.createElement("p");d.textContent=o,u.appendChild(d)}n.appendChild(u)}t.appendChild(n)}};Be(Lf);function Rf(i,e,t){t.innerHTML="";const n=document.createElement("div");n.className="gallery-view";const a=e.any(i,B("name"),null,null)?.value??e.any(i,he("title"),null,null)?.value??fe(i.value),s=document.createElement("h2");s.className="gallery-title",s.textContent=a,n.appendChild(s);const r=e.any(i,B("description"),null,null)?.value??e.any(i,he("description"),null,null)?.value;if(r){const d=document.createElement("p");d.className="gallery-description",d.textContent=r,n.appendChild(d)}const l=bo(i,e),o=document.createElement("p");if(o.className="gallery-count",o.textContent=`${l.length} image${l.length!==1?"s":""}`,n.appendChild(o),l.length===0){const d=document.createElement("p");d.className="gallery-empty",d.textContent="No images found.",n.appendChild(d),t.appendChild(n);return}const u=document.createElement("div");u.className="gallery-grid";for(const d of l){const f=document.createElement("div");f.className="gallery-cell";const m=document.createElement("img");m.className="gallery-thumb",m.src=d,m.alt=Of(d),m.loading="lazy",m.addEventListener("click",()=>{$f(d,l,n)}),f.appendChild(m),u.appendChild(f)}n.appendChild(u),t.appendChild(n)}function Of(i){return i.split("?")[0].split("#")[0].split("/").pop()??"image"}function $f(i,e,t){const n=t.querySelector(".gallery-lightbox");n&&n.remove();let a=e.indexOf(i);a===-1&&(a=0);const s=document.createElement("div");s.className="gallery-lightbox";const r=document.createElement("img");if(r.className="gallery-lightbox-img",r.src=e[a],r.alt="Full size image",s.addEventListener("click",o=>{o.target===s&&s.remove()}),e.length>1){const o=document.createElement("button");o.className="gallery-lightbox-prev",o.textContent="❮",o.addEventListener("click",d=>{d.stopPropagation(),a=(a-1+e.length)%e.length,r.src=e[a]}),s.appendChild(o);const u=document.createElement("button");u.className="gallery-lightbox-next",u.textContent="❯",u.addEventListener("click",d=>{d.stopPropagation(),a=(a+1)%e.length,r.src=e[a]}),s.appendChild(u)}const l=document.createElement("button");l.className="gallery-lightbox-close",l.textContent="×",l.addEventListener("click",()=>s.remove()),s.appendChild(r),s.appendChild(l),t.appendChild(s)}const Mf=[B("ImageGallery").value,B("MediaGallery").value,B("CollectionPage").value],Uf=[".png",".jpg",".jpeg",".gif",".svg",".webp",".bmp",".ico",".avif",".tiff"];function bo(i,e){const t=new Set;for(const n of e.each(i,B("image"),null,null))t.add(n.value);for(const n of e.each(i,be("img"),null,null))t.add(n.value);for(const n of e.each(i,B("hasPart"),null,null)){Pf(n.value)&&t.add(n.value);const a=e.each(n,me("type"),null,null).map(s=>s.value);if(a.includes(B("ImageObject").value)||a.includes(be("Image").value)){const s=e.any(n,B("contentUrl"),null,null)?.value??e.any(n,B("url"),null,null)?.value??n.value;t.add(s)}}for(const n of e.each(i,B("associatedMedia"),null,null))if(e.each(n,me("type"),null,null).map(s=>s.value).includes(B("ImageObject").value)){const s=e.any(n,B("contentUrl"),null,null)?.value??n.value;t.add(s)}return Array.from(t)}function Pf(i){const e=i.split("?")[0].split("#")[0].toLowerCase();return Uf.some(t=>e.endsWith(t))}function qf(i,e){const t=e.each(i,me("type"),null,null).map(a=>a.value);for(const a of Mf)if(t.includes(a))return!0;return bo(i,e).length>=2}const Hf={label:"Gallery",icon:"🖼",canHandle(i,e){return qf(i,e)},render(i,e,t){Rf(i,e,t)}};Be(Hf);function zf(i){const e=new Date(i);return isNaN(e.getTime())?i:e.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})}function jf(i,e){return e.any(i,B("name"),null,null)?.value??e.any(i,be("name"),null,null)?.value??fe(i.value)}function Vf(i,e,t){t.innerHTML="";const n=document.createElement("article");n.className="article-view";const a=e.any(i,B("headline"),null,null)?.value??e.any(i,B("name"),null,null)?.value??e.any(i,he("title"),null,null)?.value??fe(i.value),s=document.createElement("h1");s.className="article-title",s.textContent=a,n.appendChild(s);const r=e.any(i,B("author"),null,null),l=e.any(i,B("datePublished"),null,null)?.value,o=e.any(i,he("created"),null,null)?.value,u=l??o;if(r||u){const C=document.createElement("div");if(C.className="article-byline",r){const T=document.createElement("span");T.className="article-author",T.textContent=jf(r,e),C.appendChild(T)}if(u){const T=document.createElement("time");T.className="article-date",T.dateTime=u,T.textContent=zf(u),C.appendChild(T)}n.appendChild(C)}const d=e.any(i,B("image"),null,null)?.value??e.any(i,B("thumbnailUrl"),null,null)?.value;if(d){const C=document.createElement("img");C.className="article-image",C.src=d,C.alt=a,n.appendChild(C)}const f=e.any(i,B("description"),null,null)?.value??e.any(i,B("abstract"),null,null)?.value??e.any(i,he("abstract"),null,null)?.value;if(f){const C=document.createElement("p");C.className="article-description",C.textContent=f,n.appendChild(C)}const m=e.any(i,B("articleBody"),null,null)?.value;if(m){const C=document.createElement("div");C.className="article-body";const T=m.split(/\n\n+/);for(const L of T){const R=L.trim();if(!R)continue;const Z=document.createElement("p");Z.textContent=R,C.appendChild(Z)}n.appendChild(C)}const w=e.any(i,B("publisher"),null,null);if(w){const C=e.any(w,B("name"),null,null)?.value??fe(w.value),T=document.createElement("p");T.className="article-publisher",T.textContent=`Published by ${C}`,n.appendChild(T)}const y=e.each(i,B("keywords"),null,null);if(y.length>0){const C=document.createElement("div");C.className="article-tags";for(const T of y){const L=document.createElement("span");L.className="article-tag",L.textContent=T.value,C.appendChild(L)}n.appendChild(C)}t.appendChild(n)}const Gf=["Article","BlogPosting","NewsArticle","ScholarlyArticle","TechArticle","SocialMediaPosting","Report"];function Xf(i,e){const n=e.each(i,me("type"),null,null).map(a=>a.value);for(const a of Gf)if(n.includes(B(a).value))return!0;return!!(e.any(i,B("articleBody"),null,null)||e.any(i,B("headline"),null,null))}const Wf={label:"Article",icon:"📰",canHandle(i,e){return Xf(i,e)},render(i,e,t){Vf(i,e,t)}};Be(Wf);function Qf(i,e,t){t.innerHTML="";const n=document.createElement("div");n.className="map-view";const a=e.any(i,B("name"),null,null)?.value??e.any(i,he("title"),null,null)?.value??fe(i.value),s=document.createElement("h2");s.className="map-title",s.textContent=a,n.appendChild(s);const r=e.any(i,B("address"),null,null)?.value??void 0;if(r){const u=document.createElement("p");u.className="map-address",u.textContent=r,n.appendChild(u)}const l=e.any(i,B("description"),null,null)?.value??e.any(i,he("description"),null,null)?.value;if(l){const u=document.createElement("p");u.className="map-description",u.textContent=l,n.appendChild(u)}const o=xo(i,e);if(o){const u=document.createElement("div");u.className="map-embed";const d=document.createElement("iframe");d.className="map-frame",d.src=`https://www.openstreetmap.org/export/embed.html?bbox=${o.lng-.01},${o.lat-.005},${o.lng+.01},${o.lat+.005}&layer=mapnik&marker=${o.lat},${o.lng}`,d.setAttribute("sandbox","allow-scripts allow-same-origin"),d.title=`Map showing ${a}`,u.appendChild(d);const f=document.createElement("a");f.className="map-osm-link",f.href=`https://www.openstreetmap.org/?mlat=${o.lat}&mlon=${o.lng}#map=16/${o.lat}/${o.lng}`,f.textContent="View on OpenStreetMap",f.target="_blank",f.rel="noopener",u.appendChild(f),n.appendChild(u)}else{const u=document.createElement("p");u.className="map-no-coords",u.textContent="No coordinates available for this place.",n.appendChild(u)}t.appendChild(n)}function xo(i,e){const t=e.any(i,B("latitude"),null,null)?.value,n=e.any(i,B("longitude"),null,null)?.value;if(t&&n){const r=parseFloat(t),l=parseFloat(n);if(!isNaN(r)&&!isNaN(l))return{lat:r,lng:l}}const a=e.any(i,B("geo"),null,null);if(a){const r=e.any(a,B("latitude"),null,null)?.value,l=e.any(a,B("longitude"),null,null)?.value;if(r&&l){const o=parseFloat(r),u=parseFloat(l);if(!isNaN(o)&&!isNaN(u))return{lat:o,lng:u}}}const s=e.any(i,B("location"),null,null);if(s){const r=e.any(s,B("geo"),null,null);if(r){const u=e.any(r,B("latitude"),null,null)?.value,d=e.any(r,B("longitude"),null,null)?.value;if(u&&d){const f=parseFloat(u),m=parseFloat(d);if(!isNaN(f)&&!isNaN(m))return{lat:f,lng:m}}}const l=e.any(s,B("latitude"),null,null)?.value,o=e.any(s,B("longitude"),null,null)?.value;if(l&&o){const u=parseFloat(l),d=parseFloat(o);if(!isNaN(u)&&!isNaN(d))return{lat:u,lng:d}}}return null}function Yf(i,e){const n=e.each(i,me("type"),null,null).map(a=>a.value);return!!(n.includes(B("Place").value)||n.includes(B("GeoCoordinates").value))}const Zf={label:"Map",icon:"🗺",canHandle(i,e){return!!(xo(i,e)||Yf(i,e))},render(i,e,t){Qf(i,e,t)}};Be(Zf);function ll(i){const e=new Date(i);return isNaN(e.getTime())?i:e.toLocaleString(void 0,{weekday:"short",month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}function ii(i){const e=new Date(i);return isNaN(e.getTime())?i:e.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric",year:"numeric"})}function ol(i,e){const t=e.any(i,B("name"),null,null)?.value;if(t)return t;const n=e.any(i,B("address"),null,null)?.value;return n&&!n.startsWith("http")?n:i.value.startsWith("http")?fe(i.value):i.value}function Jf(i){for(const e of i){if(e.includes("Flight"))return"Flight";if(e.includes("TrainTrip"))return"Train";if(e.includes("BusTrip"))return"Bus";if(e.includes("BoatTrip"))return"Boat"}return"Leg"}function ul(i,e,t){const n=document.createElement("div");n.className="trip-leg";const a=e.each(i,me("type"),null,null).map(C=>C.value),s=Jf(a),r=document.createElement("div");r.className="trip-leg-header";const l=document.createElement("span");l.className="trip-leg-mode",l.textContent=s;const o=e.any(i,B("flightNumber"),null,null)?.value??e.any(i,B("trainNumber"),null,null)?.value??e.any(i,B("busNumber"),null,null)?.value??e.any(i,B("name"),null,null)?.value;o&&(l.textContent+=` ${o}`),r.appendChild(l);const u=e.any(i,B("provider"),null,null)??e.any(i,B("airline"),null,null);if(u){const C=e.any(u,B("name"),null,null)?.value??(u.value.startsWith("http")?null:u.value);if(C){const T=document.createElement("span");T.className="trip-leg-provider",T.textContent=C,r.appendChild(T)}}n.appendChild(r);const d=document.createElement("div");d.className="trip-leg-route";const f=e.any(i,B("departureStation"),null,null)??e.any(i,B("departureAirport"),null,null)??e.any(i,B("departureStop"),null,null)??e.any(i,B("fromLocation"),null,null),m=e.any(i,B("arrivalStation"),null,null)??e.any(i,B("arrivalAirport"),null,null)??e.any(i,B("arrivalStop"),null,null)??e.any(i,B("toLocation"),null,null);if(f||m){const C=f?ol(f,e):"?",T=m?ol(m,e):"?";d.innerHTML=`<span class="trip-from">${C}</span><span class="trip-arrow">→</span><span class="trip-to">${T}</span>`,n.appendChild(d)}const w=e.any(i,B("departureTime"),null,null)?.value,y=e.any(i,B("arrivalTime"),null,null)?.value;if(w||y){const C=document.createElement("div");if(C.className="trip-leg-times",w){const T=document.createElement("span");T.className="trip-leg-time",T.textContent=`Departs: ${ll(w)}`,C.appendChild(T)}if(y){const T=document.createElement("span");T.className="trip-leg-time",T.textContent=`Arrives: ${ll(y)}`,C.appendChild(T)}n.appendChild(C)}t.appendChild(n)}function Kf(i,e,t){t.innerHTML="";const n=document.createElement("div");n.className="trip-view";const a=e.any(i,B("name"),null,null)?.value??e.any(i,he("title"),null,null)?.value??fe(i.value),s=document.createElement("h2");s.className="trip-title",s.textContent=a,n.appendChild(s);const r=e.any(i,B("description"),null,null)?.value??e.any(i,he("description"),null,null)?.value;if(r){const m=document.createElement("p");m.className="trip-description",m.textContent=r,n.appendChild(m)}const l=e.any(i,B("departureTime"),null,null)?.value??e.any(i,B("startDate"),null,null)?.value,o=e.any(i,B("arrivalTime"),null,null)?.value??e.any(i,B("endDate"),null,null)?.value;if(l||o){const m=document.createElement("p");m.className="trip-dates",l&&o?m.textContent=`${ii(l)} — ${ii(o)}`:l?m.textContent=ii(l):o&&(m.textContent=`Until ${ii(o)}`),n.appendChild(m)}e.each(i,me("type"),null,null).map(m=>m.value).some(m=>m.includes("Flight")||m.includes("TrainTrip")||m.includes("BusTrip")||m.includes("BoatTrip"))&&ul(i,e,n);const f=e.each(i,B("itinerary"),null,null);if(f.length>0){const m=document.createElement("div");m.className="trip-itinerary";const w=document.createElement("h3");w.textContent=`Itinerary (${f.length} leg${f.length!==1?"s":""})`,m.appendChild(w);const y=[...f].sort((C,T)=>{const L=e.any(C,B("departureTime"),null,null)?.value??"",R=e.any(T,B("departureTime"),null,null)?.value??"";return L.localeCompare(R)});for(const C of y)ul(C,e,m);n.appendChild(m)}t.appendChild(n)}const ep=["Trip","TouristTrip","Flight","TrainTrip","BusTrip","BoatTrip","TravelAction"];function tp(i,e){const t=e.each(i,me("type"),null,null).map(s=>s.value);for(const s of ep)if(t.includes(B(s).value))return!0;if(e.any(i,B("itinerary"),null,null))return!0;const n=e.any(i,B("departureTime"),null,null),a=e.any(i,B("arrivalTime"),null,null);return!!(n&&a)}const np={label:"Trip",icon:"✈",canHandle(i,e){return tp(i,e)},render(i,e,t){Kf(i,e,t)}};Be(np);function rp(i,e){const t=new Set,n=[],a=[B("event"),B("subEvent")];for(const s of a)for(const r of e.each(i,s,null,null))r.termType==="NamedNode"&&!t.has(r.value)&&(t.add(r.value),n.push(r));return n}function ip(i,e){const t=e.any(i,B("name"),null,null)?.value??e.any(i,at("label"),null,null)?.value??"Untitled Event",n=e.any(i,B("startDate"),null,null)?.value??null,a=e.any(i,B("endDate"),null,null)?.value??null,s=e.any(i,B("location"),null,null);let r="";return s&&(s.termType==="Literal"?r=s.value:s.termType==="NamedNode"&&(r=e.any(s,B("name"),null,null)?.value??e.any(s,at("label"),null,null)?.value??s.value)),{uri:i.value,name:t,startDate:n?new Date(n):null,endDate:a?new Date(a):null,location:r}}function ap(i,e){return new Date(i,e+1,0).getDate()}function sp(i,e){return new Date(i,e,1).getDay()}function lp(i,e){return i.getFullYear()===e.getFullYear()&&i.getMonth()===e.getMonth()&&i.getDate()===e.getDate()}function op(i,e,t,n){const a=new Date(e,t,n);return i.filter(s=>s.startDate?!!(lp(s.startDate,a)||s.endDate&&s.startDate<=a&&s.endDate>=a):!1)}function up(i){return i.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})}const cl=["January","February","March","April","May","June","July","August","September","October","November","December"],cp=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function Yi(i){return i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function hp(i,e,t){const n=e.any(i,B("name"),null,null)?.value??e.any(i,at("label"),null,null)?.value??"Schedule",a=e.any(i,B("description"),null,null)?.value??null,r=rp(i,e).map(N=>ip(N,e)),l=r.filter(N=>N.startDate!==null);l.sort((N,j)=>N.startDate.getTime()-j.startDate.getTime());let o,u;if(l.length>0)o=l[0].startDate.getFullYear(),u=l[0].startDate.getMonth();else{const N=new Date;o=N.getFullYear(),u=N.getMonth()}const d=document.createElement("div");d.className="sched-pane",t.appendChild(d);const f=document.createElement("h2");if(f.className="sched-title",f.textContent=n,d.appendChild(f),a){const N=document.createElement("p");N.className="sched-description",N.textContent=a,d.appendChild(N)}const m=document.createElement("p");m.className="sched-count",m.textContent=`${r.length} event${r.length!==1?"s":""}`,d.appendChild(m);const w=document.createElement("div");w.className="sched-nav",d.appendChild(w);const y=document.createElement("button");y.className="sched-prev",y.textContent="←",y.setAttribute("aria-label","Previous month");const C=document.createElement("span");C.className="sched-month-label";const T=document.createElement("button");T.className="sched-next",T.textContent="→",T.setAttribute("aria-label","Next month"),w.appendChild(y),w.appendChild(C),w.appendChild(T);const L=document.createElement("div");L.className="sched-calendar",d.appendChild(L);const R=document.createElement("div");R.className="sched-detail",d.appendChild(R);function Z(){C.textContent=`${cl[u]} ${o}`,L.innerHTML="";for(const $ of cp){const G=document.createElement("div");G.className="sched-day-header",G.textContent=$,L.appendChild(G)}const N=ap(o,u),j=sp(o,u);for(let $=0;$<j;$++){const G=document.createElement("div");G.className="sched-day sched-day-empty",L.appendChild(G)}for(let $=1;$<=N;$++){const G=document.createElement("div");G.className="sched-day",G.setAttribute("data-day",String($));const F=document.createElement("span");F.className="sched-day-num",F.textContent=String($),G.appendChild(F);const H=op(r,o,u,$);if(H.length>0){G.classList.add("sched-has-events");const P=document.createElement("span");P.className="sched-event-dot",P.textContent=String(H.length),G.appendChild(P),G.addEventListener("click",()=>{Y($,H)})}L.appendChild(G)}R.innerHTML=""}function Y(N,j){R.innerHTML="";const $=document.createElement("h3");$.className="sched-detail-heading",$.textContent=`${cl[u]} ${N}, ${o}`,R.appendChild($);for(const G of j){const F=document.createElement("div");F.className="sched-event-item";let H=`<span class="sched-event-name">${Yi(G.name)}</span>`;G.startDate&&(H+=` <span class="sched-event-time">${Yi(up(G.startDate))}</span>`),G.location&&(H+=` <span class="sched-event-location">${Yi(G.location)}</span>`),F.innerHTML=H,R.appendChild(F)}}y.addEventListener("click",()=>{u--,u<0&&(u=11,o--),Z()}),T.addEventListener("click",()=>{u++,u>11&&(u=0,o++),Z()}),Z()}const dp=[B("Schedule"),B("EventSeries"),B("EventSchedule")];function fp(i,e){const t=new Set,n=[],a=[B("event"),B("subEvent")];for(const s of a)for(const r of e.each(i,s,null,null))r.termType==="NamedNode"&&!t.has(r.value)&&(t.add(r.value),n.push(r));return n}const pp={label:"Schedule",icon:"📅",canHandle(i,e){for(const n of dp)if(e.holds(i,me("type"),n))return!0;return fp(i,e).length>=2},render(i,e,t){hp(i,e,t)}};Be(pp);function hl(i){const e=new Date(i);return isNaN(e.getTime())?i:/^\d{4}-\d{2}-\d{2}$/.test(i)?e.toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"}):e.toLocaleString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function mp(i){const e=new Date(i);return isNaN(e.getTime())?i:e.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})}function gp(i,e){const t=new Date(i),n=new Date(e);return t.getFullYear()===n.getFullYear()&&t.getMonth()===n.getMonth()&&t.getDate()===n.getDate()}function mr(i,e,t,n=!1){if(!t)return;const a=document.createElement("div");a.className="event-detail";const s=document.createElement("span");if(s.className="event-label",s.textContent=e,a.appendChild(s),n&&(t.startsWith("http://")||t.startsWith("https://"))){const r=document.createElement("a");r.href=t,r.textContent=fe(t),r.target="_blank",r.rel="noopener",a.appendChild(r)}else{const r=document.createElement("span");r.className="event-value",r.textContent=t,a.appendChild(r)}i.appendChild(a)}function vp(i,e,t){t.innerHTML="";const n=document.createElement("div");n.className="event-view";const a=e.any(i,B("name"),null,null)?.value??e.any(i,he("title"),null,null)?.value??fe(i.value),s=document.createElement("h2");s.className="event-title",s.textContent=a,n.appendChild(s);const r=e.any(i,B("startDate"),null,null)?.value,l=e.any(i,B("endDate"),null,null)?.value;if(r){let T=hl(r);l&&(gp(r,l)?T+=` – ${mp(l)}`:T+=` – ${hl(l)}`);const L=document.createElement("p");L.className="event-date",L.textContent=T,n.appendChild(L)}const o=document.createElement("div");o.className="event-details";const u=e.any(i,B("location"),null,null);let d;u&&(d=e.any(u,B("name"),null,null)?.value??u.value),mr(o,"Location",d);const f=e.any(i,B("organizer"),null,null);if(f){const T=e.any(f,B("name"),null,null)?.value??e.any(f,be("name"),null,null)?.value??fe(f.value);mr(o,"Organizer",T)}const m=e.any(i,B("url"),null,null)?.value;mr(o,"Link",m,!0);const w=e.any(i,B("eventStatus"),null,null)?.value;w&&mr(o,"Status",fe(w));const y=e.any(i,B("eventAttendanceMode"),null,null)?.value;y&&mr(o,"Format",fe(y)),n.appendChild(o);const C=e.any(i,B("description"),null,null)?.value??e.any(i,he("description"),null,null)?.value;if(C){const T=document.createElement("div");T.className="event-description",T.textContent=C,n.appendChild(T)}t.appendChild(n)}function yp(i,e){const n=e.each(i,me("type"),null,null).map(a=>a.value);return!!(n.includes(B("Event").value)||n.includes(B("SocialEvent").value)||n.includes(B("BusinessEvent").value)||n.includes(B("MusicEvent").value)||n.includes(B("EducationEvent").value)||e.any(i,B("startDate"),null,null)&&e.any(i,B("name"),null,null))}const wp={label:"Event",icon:"📅",canHandle(i,e){return yp(i,e)},render(i,e,t){vp(i,e,t)}};Be(wp);function Ep(i,e){return e.any(i,he("title"),null,null)?.value??e.any(i,B("name"),null,null)?.value??"Bookmarks"}function Cp(i,e){const t=e.each(i,Sn("hasMember"),null,null),n=[];for(const a of t){const s=a,r=e.any(s,he("title"),null,null)?.value??e.any(s,B("name"),null,null)?.value??e.any(s,Sn("title"),null,null)?.value??fe(s.value),l=e.any(s,Sn("recalls"),null,null)?.value??null,o=e.any(s,he("created"),null,null)?.value,u=o?new Date(o):null,d=e.any(s,he("description"),null,null)?.value??e.any(s,B("description"),null,null)?.value??null;n.push({uri:s.value,title:r,recalls:l,created:u,description:d})}return n.sort((a,s)=>a.created&&s.created?s.created.getTime()-a.created.getTime():a.created?-1:s.created?1:a.title.localeCompare(s.title)),n}function bp(i){return i.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}function xp(i,e,t){t.innerHTML="";const n=document.createElement("div");n.className="bookmarks-view";const a=Ep(i,e),s=document.createElement("h2");s.className="bookmarks-title",s.textContent=a,n.appendChild(s);const r=Cp(i,e),l=document.createElement("p");if(l.className="bookmarks-count",l.textContent=`${r.length} bookmark${r.length!==1?"s":""}`,n.appendChild(l),r.length===0){const u=document.createElement("p");u.className="bookmarks-empty",u.textContent="No bookmarks saved.",n.appendChild(u),t.appendChild(n);return}const o=document.createElement("ul");o.className="bookmarks-list";for(const u of r){const d=document.createElement("li");d.className="bookmark-item";const f=document.createElement("a");if(f.className="bookmark-title",f.textContent=u.title,u.recalls?(f.href=u.recalls,f.target="_blank",f.rel="noopener"):(f.href=u.uri,f.target="_blank",f.rel="noopener"),d.appendChild(f),u.recalls){const m=document.createElement("span");m.className="bookmark-url",m.textContent=u.recalls,d.appendChild(m)}if(u.created||u.description){const m=document.createElement("div");if(m.className="bookmark-meta",u.created){const w=document.createElement("span");w.className="bookmark-date",w.textContent=bp(u.created),m.appendChild(w)}if(u.description){const w=document.createElement("span");w.className="bookmark-desc",w.textContent=u.description,m.appendChild(w)}d.appendChild(m)}o.appendChild(d)}n.appendChild(o),t.appendChild(n)}function Np(i,e){const n=e.each(i,me("type"),null,null).map(s=>s.value);if(n.includes(Sn("BookmarkList").value)||n.includes(Sn("Topic").value))return!0;const a=e.each(i,Sn("hasMember"),null,null);if(a.length>0){for(const s of a)if(e.each(s,me("type"),null,null).some(l=>l.value===Sn("Bookmark").value))return!0}return!1}const Tp={label:"Bookmarks",icon:"🔖",canHandle(i,e){return Np(i,e)},render(i,e,t){xp(i,e,t)}};Be(Tp);function dl(i,e){return e.any(i,Ze("name"),null,null)?.value??e.any(i,B("name"),null,null)?.value??e.any(i,be("name"),null,null)?.value??fe(i.value)}function Ap(i,e){const t=e.each(i,me("type"),null,null);for(const n of t)switch(fe(n.value).toLowerCase()){case"create":return"created";case"update":return"updated";case"delete":return"deleted";case"follow":return"followed";case"like":return"liked";case"announce":return"shared";case"add":return"added";case"remove":return"removed";case"accept":return"accepted";case"reject":return"rejected";case"undo":return"undid";case"invite":return"invited";case"join":return"joined";case"leave":return"left";case"offer":return"offered"}return"did something with"}function fl(i,e){const t=e.any(i,Ze("actor"),null,null),n=e.any(i,Ze("object"),null,null),a=e.any(i,Ze("published"),null,null)?.value;return{uri:i.value,actorName:t?dl(t,e):null,actorUri:t?.value??null,verb:Ap(i,e),objectName:n?dl(n,e):null,objectUri:n?.value??null,summary:e.any(i,Ze("summary"),null,null)?.value??null,content:e.any(i,Ze("content"),null,null)?.value??null,published:a?new Date(a):null}}function Dp(i,e){return[...e.each(i,Ze("items"),null,null),...e.each(i,Ze("orderedItems"),null,null)]}function _p(i,e){const t=e.each(i,me("type"),null,null).map(n=>n.value);return["Collection","OrderedCollection","CollectionPage","OrderedCollectionPage"].some(n=>t.includes(Ze(n).value))}function kp(i){return i.toLocaleString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function pl(i){const e=document.createElement("div");e.className="activity-item";const t=document.createElement("div");if(t.className="activity-summary",i.summary)t.textContent=i.summary;else{if(i.actorName){const n=document.createElement("a");n.className="activity-actor",n.textContent=i.actorName,i.actorUri&&(n.href=`?uri=${encodeURIComponent(i.actorUri)}`,n.addEventListener("click",a=>{a.preventDefault(),ua(i.actorUri)})),t.appendChild(n),t.appendChild(document.createTextNode(` ${i.verb} `))}if(i.objectName){const n=document.createElement("a");n.className="activity-object",n.textContent=i.objectName,i.objectUri&&(n.href=`?uri=${encodeURIComponent(i.objectUri)}`,n.addEventListener("click",a=>{a.preventDefault(),ua(i.objectUri)})),t.appendChild(n)}}if(e.appendChild(t),i.content){const n=document.createElement("p");n.className="activity-content",n.textContent=i.content,e.appendChild(n)}if(i.published){const n=document.createElement("time");n.className="activity-time",n.dateTime=i.published.toISOString(),n.textContent=kp(i.published),e.appendChild(n)}return e}function Sp(i,e,t){t.innerHTML="";const n=document.createElement("div");if(n.className="activity-view",_p(i,e)){const a=e.any(i,Ze("name"),null,null)?.value??"Activities",s=document.createElement("h2");s.className="activity-title",s.textContent=a,n.appendChild(s);const r=e.any(i,Ze("totalItems"),null,null)?.value;if(r){const u=document.createElement("p");u.className="activity-count",u.textContent=`${r} item${r!=="1"?"s":""}`,n.appendChild(u)}const l=Dp(i,e),o=document.createElement("div");if(o.className="activity-timeline",l.length===0){const u=document.createElement("p");u.className="activity-empty",u.textContent="No activities.",n.appendChild(u)}else{for(const u of l){const d=fl(u,e);o.appendChild(pl(d))}n.appendChild(o)}}else{const a=fl(i,e),s=document.createElement("div");s.className="activity-timeline",s.appendChild(pl(a)),n.appendChild(s)}t.appendChild(n)}const Ip=["Activity","Create","Update","Delete","Follow","Like","Announce","Add","Remove","Accept","Reject","Undo","Invite","Join","Leave","Offer"],Bp=["Collection","OrderedCollection","CollectionPage","OrderedCollectionPage"];function Fp(i,e){const n=e.each(i,me("type"),null,null).map(a=>a.value);for(const a of Ip)if(n.includes(Ze(a).value))return!0;for(const a of Bp)if(n.includes(Ze(a).value))return!0;return!!(e.any(i,Ze("actor"),null,null)&&e.any(i,Ze("object"),null,null))}const Lp={label:"Activity",icon:"🔔",canHandle(i,e){return Fp(i,e)},render(i,e,t){Sp(i,e,t)}};Be(Lp);function fa(i,e){try{return new Intl.NumberFormat(void 0,{style:"currency",currency:e||"USD"}).format(i)}catch{return`${e?`${e} `:""}${i.toFixed(2)}`}}function Rp(i,e){const t=e.each(i,me("type"),null,null).map(n=>n.value);return!!(t.includes(vt("BankAccount").value)||t.includes(vt("PaymentCard").value)||t.includes(B("BankAccount").value)||e.any(i,vt("transaction"),null,null))}function No(i,e){const t=e.any(i,vt("description"),null,null)?.value??e.any(i,he("title"),null,null)?.value??e.any(i,B("description"),null,null)?.value??e.any(i,B("name"),null,null)?.value??fe(i.value),n=e.any(i,vt("amount"),null,null)?.value??e.any(i,B("price"),null,null)?.value??e.any(i,B("amount"),null,null)?.value,a=n?parseFloat(n):null,s=e.any(i,vt("currency"),null,null)?.value??e.any(i,B("priceCurrency"),null,null)?.value??e.any(i,B("currency"),null,null)?.value??"",r=e.any(i,vt("date"),null,null)?.value??e.any(i,he("date"),null,null)?.value??e.any(i,B("dateCreated"),null,null)?.value??null,l=e.any(i,vt("category"),null,null),o=l?e.any(l,at("label"),null,null)?.value??e.any(l,B("name"),null,null)?.value??fe(l.value):null,u=e.any(i,vt("payee"),null,null)??e.any(i,B("recipient"),null,null),d=u?e.any(u,B("name"),null,null)?.value??(u.value.startsWith("http")?fe(u.value):u.value):null;return{uri:i.value,date:r,description:t,amount:a,currency:s,category:o,payee:d}}function Op(i,e,t){const a=e.each(i,vt("transaction"),null,null).map(m=>No(m,e));a.sort((m,w)=>!m.date&&!w.date?0:m.date?w.date?w.date.localeCompare(m.date):-1:1);const s=document.createElement("p");if(s.className="txn-count",s.textContent=`${a.length} transaction${a.length!==1?"s":""}`,t.appendChild(s),a.length===0){const m=document.createElement("p");m.className="txn-empty",m.textContent="No transactions found.",t.appendChild(m);return}const r=a.reduce((m,w)=>m+(w.amount??0),0),l=a.find(m=>m.currency)?.currency??"";if(r!==0){const m=document.createElement("p");m.className="txn-total",m.textContent=`Balance: ${fa(r,l)}`,t.appendChild(m)}const o=document.createElement("div");o.className="txn-table-wrapper";const u=document.createElement("table");u.className="txn-table";const d=document.createElement("thead");d.innerHTML='<tr><th>Date</th><th>Description</th><th>Category</th><th class="txn-amount-col">Amount</th></tr>',u.appendChild(d);const f=document.createElement("tbody");for(const m of a){const w=document.createElement("tr");w.className="txn-row";const y=document.createElement("td");if(y.className="txn-date",m.date){const R=new Date(m.date);y.textContent=isNaN(R.getTime())?m.date:R.toLocaleDateString(void 0,{month:"short",day:"numeric"})}w.appendChild(y);const C=document.createElement("td");C.className="txn-desc",C.textContent=m.payee?`${m.description} — ${m.payee}`:m.description,w.appendChild(C);const T=document.createElement("td");T.className="txn-category",T.textContent=m.category??"",w.appendChild(T);const L=document.createElement("td");L.className="txn-amount",m.amount!==null&&(L.textContent=fa(m.amount,m.currency),m.amount<0&&L.classList.add("txn-negative"),m.amount>0&&L.classList.add("txn-positive")),w.appendChild(L),f.appendChild(w)}u.appendChild(f),o.appendChild(u),t.appendChild(o)}function $p(i,e,t){const n=No(i,e),a=document.createElement("div");a.className="txn-details";const s=[];if(n.date){const l=new Date(n.date),o=isNaN(l.getTime())?n.date:l.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"});s.push(["Date",o])}n.amount!==null&&s.push(["Amount",fa(n.amount,n.currency)]),n.payee&&s.push(["Payee",n.payee]),n.category&&s.push(["Category",n.category]);for(const[l,o]of s){const u=document.createElement("div");u.className="txn-detail",u.innerHTML=`<span class="txn-label">${l}</span><span class="txn-value">${o}</span>`,a.appendChild(u)}t.appendChild(a);const r=e.any(i,B("description"),null,null)?.value??e.any(i,he("description"),null,null)?.value;if(r&&r!==n.description){const l=document.createElement("p");l.className="txn-body",l.textContent=r,t.appendChild(l)}}function Mp(i,e,t){t.innerHTML="";const n=document.createElement("div");n.className="txn-view";const a=e.any(i,B("name"),null,null)?.value??e.any(i,he("title"),null,null)?.value??e.any(i,vt("description"),null,null)?.value??e.any(i,at("label"),null,null)?.value??fe(i.value),s=document.createElement("h2");s.className="txn-title",s.textContent=a,n.appendChild(s),Rp(i,e)?Op(i,e,n):$p(i,e,n),t.appendChild(n)}const Up=[vt("Transaction").value,vt("BankAccount").value,vt("PaymentCard").value,B("Invoice").value,B("MoneyTransfer").value,B("PayAction").value,B("BankAccount").value];function Pp(i,e){const t=e.each(i,me("type"),null,null).map(n=>n.value);for(const n of Up)if(t.includes(n))return!0;return!!(e.any(i,vt("transaction"),null,null)||e.any(i,B("totalPaymentDue"),null,null)||e.any(i,vt("amount"),null,null))}const qp={label:"Transactions",icon:"💳",canHandle(i,e){return Pp(i,e)},render(i,e,t){Mp(i,e,t)}};Be(qp);function Hp(i,e){const t=e.any(i,B("price"),null,null)?.value;if(t){const a=e.any(i,B("priceCurrency"),null,null)?.value??"";return{price:t,currency:a}}const n=e.any(i,B("offers"),null,null);if(n){const a=e.any(n,B("price"),null,null)?.value;if(a){const s=e.any(n,B("priceCurrency"),null,null)?.value??"";return{price:a,currency:s}}}return null}function zp(i,e){const t=parseFloat(i);if(isNaN(t))return`${e} ${i}`.trim();try{return new Intl.NumberFormat(void 0,{style:"currency",currency:e||"USD"}).format(t)}catch{return`${e} ${i}`.trim()}}function jp(i,e,t){t.innerHTML="";const n=document.createElement("div");n.className="product-view";const a=e.any(i,B("image"),null,null)?.value??e.any(i,B("thumbnailUrl"),null,null)?.value;if(a){const y=document.createElement("img");y.className="product-image",y.src=a,y.alt="Product image",n.appendChild(y)}const s=document.createElement("div");s.className="product-info";const r=e.any(i,B("name"),null,null)?.value??e.any(i,he("title"),null,null)?.value??fe(i.value),l=document.createElement("h2");l.className="product-name",l.textContent=r,s.appendChild(l);const o=e.any(i,B("brand"),null,null);if(o){const y=e.any(o,B("name"),null,null)?.value??o.value;if(y&&!y.startsWith("http")){const C=document.createElement("p");C.className="product-brand",C.textContent=y,s.appendChild(C)}}const u=Hp(i,e);if(u){const y=document.createElement("p");y.className="product-price",y.textContent=zp(u.price,u.currency),s.appendChild(y)}const d=e.any(i,B("aggregateRating"),null,null);if(d){const y=e.any(d,B("ratingValue"),null,null)?.value,C=e.any(d,B("reviewCount"),null,null)?.value,T=e.any(d,B("bestRating"),null,null)?.value??"5";if(y){const L=document.createElement("div");L.className="product-rating";const R=Math.round(parseFloat(y)),Z=parseInt(T),Y="★".repeat(Math.min(R,Z))+"☆".repeat(Math.max(Z-R,0)),N=document.createElement("span");N.className="product-stars",N.textContent=Y,L.appendChild(N);const j=document.createElement("span");j.className="product-score",j.textContent=`${y}/${T}`,C&&(j.textContent+=` (${C} reviews)`),L.appendChild(j),s.appendChild(L)}}const f=e.any(i,B("description"),null,null)?.value??e.any(i,he("description"),null,null)?.value;if(f){const y=document.createElement("p");y.className="product-description",y.textContent=f,s.appendChild(y)}const m=e.any(i,B("sku"),null,null)?.value;if(m){const y=document.createElement("p");y.className="product-sku",y.textContent=`SKU: ${m}`,s.appendChild(y)}const w=e.any(i,B("url"),null,null)?.value;if(w){const y=document.createElement("a");y.className="product-link",y.href=w,y.textContent="View product",y.target="_blank",y.rel="noopener",s.appendChild(y)}n.appendChild(s),t.appendChild(n)}const Vp=["Product","IndividualProduct","SomeProducts","Vehicle","Car","CreativeWork","SoftwareApplication","Book","Movie","MusicAlbum","Game"];function Gp(i,e){const n=e.each(i,me("type"),null,null).map(a=>a.value);for(const a of Vp)if(n.includes(B(a).value))return!0;return!!(e.any(i,B("offers"),null,null)||e.any(i,B("price"),null,null))}const Xp={label:"Product",icon:"📦",canHandle(i,e){return Gp(i,e)},render(i,e,t){jp(i,e,t)}};Be(Xp);function Zi(i){const e=i.match(/^PT?(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?$/i);if(!e)return i;const t=[];return e[1]&&t.push(`${e[1]} hr`),e[2]&&t.push(`${e[2]} min`),e[3]&&t.push(`${e[3]} sec`),t.join(" ")||i}function Wp(i,e,t){t.innerHTML="";const n=document.createElement("div");n.className="recipe-view";const a=e.any(i,B("image"),null,null)?.value??e.any(i,B("thumbnailUrl"),null,null)?.value;if(a){const N=document.createElement("img");N.className="recipe-image",N.src=a,N.alt="Recipe photo",n.appendChild(N)}const s=e.any(i,B("name"),null,null)?.value??e.any(i,he("title"),null,null)?.value??fe(i.value),r=document.createElement("h2");r.className="recipe-name",r.textContent=s,n.appendChild(r);const l=e.any(i,B("description"),null,null)?.value??e.any(i,he("description"),null,null)?.value;if(l){const N=document.createElement("p");N.className="recipe-description",N.textContent=l,n.appendChild(N)}const o=[],u=e.any(i,B("prepTime"),null,null)?.value;u&&o.push({label:"Prep",value:Zi(u)});const d=e.any(i,B("cookTime"),null,null)?.value;d&&o.push({label:"Cook",value:Zi(d)});const f=e.any(i,B("totalTime"),null,null)?.value;f&&o.push({label:"Total",value:Zi(f)});const m=e.any(i,B("recipeYield"),null,null)?.value;m&&o.push({label:"Yield",value:m});const w=e.any(i,B("recipeServings"),null,null)?.value;if(w&&o.push({label:"Servings",value:w}),o.length>0){const N=document.createElement("div");N.className="recipe-meta";for(const j of o){const $=document.createElement("span");$.className="recipe-meta-item",$.innerHTML=`<strong>${j.label}</strong> ${j.value}`,N.appendChild($)}n.appendChild(N)}const y=e.any(i,B("aggregateRating"),null,null);if(y){const N=e.any(y,B("ratingValue"),null,null)?.value,j=e.any(y,B("reviewCount"),null,null)?.value;if(N){const $=document.createElement("div");$.className="recipe-rating";const G=Math.round(parseFloat(N)),F="★".repeat(Math.min(G,5))+"☆".repeat(Math.max(5-G,0)),H=document.createElement("span");H.className="recipe-stars",H.textContent=F,$.appendChild(H);const P=document.createElement("span");P.className="recipe-score",P.textContent=`${N}/5`,j&&(P.textContent+=` (${j} reviews)`),$.appendChild(P),n.appendChild($)}}const C=e.any(i,B("recipeCategory"),null,null)?.value,T=e.any(i,B("recipeCuisine"),null,null)?.value;if(C||T){const N=document.createElement("div");if(N.className="recipe-tags",C){const j=document.createElement("span");j.className="recipe-tag",j.textContent=C,N.appendChild(j)}if(T){const j=document.createElement("span");j.className="recipe-tag",j.textContent=T,N.appendChild(j)}n.appendChild(N)}const L=e.each(i,B("recipeIngredient"),null,null);if(L.length>0){const N=document.createElement("div");N.className="recipe-section";const j=document.createElement("h3");j.textContent="Ingredients",N.appendChild(j);const $=document.createElement("ul");$.className="recipe-ingredients";for(const G of L){const F=document.createElement("li");F.textContent=G.value,$.appendChild(F)}N.appendChild($),n.appendChild(N)}const R=e.each(i,B("recipeInstructions"),null,null);if(R.length>0){const N=document.createElement("div");N.className="recipe-section";const j=document.createElement("h3");j.textContent="Instructions",N.appendChild(j);const $=document.createElement("ol");$.className="recipe-instructions";for(const G of R){const F=e.any(G,B("text"),null,null)?.value??G.value;if(F&&!F.startsWith("http")){const H=document.createElement("li");H.textContent=F,$.appendChild(H)}}N.appendChild($),n.appendChild(N)}const Z=e.any(i,B("nutrition"),null,null);if(Z){const N=[["calories","Calories"],["fatContent","Fat"],["carbohydrateContent","Carbs"],["proteinContent","Protein"],["fiberContent","Fiber"],["sugarContent","Sugar"],["sodiumContent","Sodium"]],j=[];for(const[$,G]of N){const F=e.any(Z,B($),null,null)?.value;F&&j.push({label:G,value:F})}if(j.length>0){const $=document.createElement("div");$.className="recipe-section";const G=document.createElement("h3");G.textContent="Nutrition",$.appendChild(G);const F=document.createElement("div");F.className="recipe-nutrition";for(const H of j){const P=document.createElement("div");P.className="recipe-nutrition-item",P.innerHTML=`<span class="recipe-nutrition-value">${H.value}</span><span class="recipe-nutrition-label">${H.label}</span>`,F.appendChild(P)}$.appendChild(F),n.appendChild($)}}const Y=e.any(i,B("author"),null,null);if(Y){const N=e.any(Y,B("name"),null,null)?.value??Y.value;if(N&&!N.startsWith("http")){const j=document.createElement("p");j.className="recipe-author",j.textContent=`Recipe by ${N}`,n.appendChild(j)}}t.appendChild(n)}const Qp=["Recipe","HowTo"];function Yp(i,e){const n=e.each(i,me("type"),null,null).map(a=>a.value);for(const a of Qp)if(n.includes(B(a).value))return!0;return!!(e.any(i,B("recipeIngredient"),null,null)||e.any(i,B("recipeInstructions"),null,null))}const Zp={label:"Recipe",icon:"🍳",canHandle(i,e){return Yp(i,e)},render(i,e,t){Wp(i,e,t)}};Be(Zp);function Jp(i,e){const t=e.each(i,me("type"),null,null).map(n=>n.value);return!!(t.includes(Ct("Tracker").value)||t.includes(oa("Tracker").value)||e.any(i,Ct("issue"),null,null))}function pa(i){return(i.split("#").pop()??i.split("/").pop()??i).replace(/([a-z])([A-Z])/g,"$1 $2")}function To(i){const e=i.toLowerCase();return e.includes("open")||e.includes("new")?"issue-state-open":e.includes("closed")||e.includes("done")||e.includes("resolved")||e.includes("fixed")?"issue-state-closed":e.includes("progress")||e.includes("active")?"issue-state-active":"issue-state-default"}function Kp(i,e,t){const n=document.createElement("div");n.className="issue-view";const a=e.any(i,he("title"),null,null)?.value??e.any(i,B("name"),null,null)?.value??e.any(i,at("label"),null,null)?.value??fe(i.value),s=document.createElement("h2");s.className="issue-title",s.textContent=a,n.appendChild(s);const r=e.any(i,Ct("state"),null,null);if(r){const m=document.createElement("span");m.className=`issue-state ${To(r.value)}`,m.textContent=pa(r.value),n.appendChild(m)}const l=document.createElement("div");l.className="issue-details";const o=e.any(i,Ct("assignee"),null,null);if(o){const m=e.any(o,B("name"),null,null)?.value??fe(o.value),w=document.createElement("div");w.className="issue-detail",w.innerHTML=`<span class="issue-label">Assignee</span><span class="issue-value">${m}</span>`,l.appendChild(w)}const u=e.any(i,Ct("priority"),null,null)?.value??e.any(i,B("priority"),null,null)?.value;if(u){const m=document.createElement("div");m.className="issue-detail",m.innerHTML=`<span class="issue-label">Priority</span><span class="issue-value">${pa(u)}</span>`,l.appendChild(m)}const d=e.any(i,he("created"),null,null)?.value??e.any(i,B("dateCreated"),null,null)?.value;if(d){const m=document.createElement("div");m.className="issue-detail";const w=new Date(d),y=isNaN(w.getTime())?d:w.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"});m.innerHTML=`<span class="issue-label">Created</span><span class="issue-value">${y}</span>`,l.appendChild(m)}l.children.length>0&&n.appendChild(l);const f=e.any(i,he("description"),null,null)?.value??e.any(i,B("description"),null,null)?.value??e.any(i,at("comment"),null,null)?.value;if(f){const m=document.createElement("div");m.className="issue-description",m.textContent=f,n.appendChild(m)}t.appendChild(n)}function em(i,e,t){const n=document.createElement("div");n.className="tracker-view";const a=e.any(i,he("title"),null,null)?.value??e.any(i,B("name"),null,null)?.value??e.any(i,at("label"),null,null)?.value??fe(i.value),s=document.createElement("h2");s.className="tracker-title",s.textContent=a,n.appendChild(s);const r=e.any(i,he("description"),null,null)?.value??e.any(i,B("description"),null,null)?.value;if(r){const u=document.createElement("p");u.className="tracker-description",u.textContent=r,n.appendChild(u)}const l=e.each(i,Ct("issue"),null,null),o=document.createElement("p");if(o.className="tracker-count",o.textContent=`${l.length} issue${l.length!==1?"s":""}`,n.appendChild(o),l.length===0){const u=document.createElement("p");u.className="tracker-empty",u.textContent="No issues found.",n.appendChild(u)}else{const u=document.createElement("ul");u.className="tracker-issues";for(const d of l){const f=d,m=document.createElement("li");m.className="tracker-issue";const w=e.any(f,Ct("state"),null,null);if(w){const L=document.createElement("span");L.className=`issue-state ${To(w.value)}`,L.textContent=pa(w.value),m.appendChild(L)}const y=e.any(f,he("title"),null,null)?.value??e.any(f,B("name"),null,null)?.value??fe(f.value),C=document.createElement("a");C.className="tracker-issue-title",C.href=f.value,C.textContent=y,m.appendChild(C);const T=e.any(f,Ct("assignee"),null,null);if(T){const L=e.any(T,B("name"),null,null)?.value??fe(T.value),R=document.createElement("span");R.className="tracker-issue-assignee",R.textContent=L,m.appendChild(R)}u.appendChild(m)}n.appendChild(u)}t.appendChild(n)}function tm(i,e,t){t.innerHTML="",Jp(i,e)?em(i,e,t):Kp(i,e,t)}const nm=[Ct("Tracker").value,Ct("Issue").value,oa("Tracker").value,oa("Issue").value];function rm(i,e){const n=e.each(i,me("type"),null,null).map(a=>a.value);for(const a of nm)if(n.includes(a))return!0;return!!(e.any(i,Ct("issue"),null,null)||e.any(i,Ct("state"),null,null))}const im={label:"Issues",icon:"📋",canHandle(i,e){return rm(i,e)},render(i,e,t){tm(i,e,t)}};Be(im);function am(i){const e=new Date(i);return isNaN(e.getTime())?i:e.toLocaleString(void 0,{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function sm(i,e){return e.any(i,B("name"),null,null)?.value??e.any(i,be("name"),null,null)?.value??fe(i.value)}function lm(i,e,t){t.innerHTML="";const n=document.createElement("div");n.className="meeting-view";const a=e.any(i,he("title"),null,null)?.value??e.any(i,B("name"),null,null)?.value??e.any(i,at("label"),null,null)?.value??fe(i.value),s=document.createElement("h2");s.className="meeting-title",s.textContent=a,n.appendChild(s);const r=e.any(i,B("startDate"),null,null)?.value??e.any(i,he("created"),null,null)?.value??e.any(i,he("date"),null,null)?.value;if(r){const w=document.createElement("p");w.className="meeting-date",w.textContent=am(r),n.appendChild(w)}const l=e.any(i,B("location"),null,null)?.value??e.any(i,Ut("location"),null,null)?.value;if(l&&!l.startsWith("http")){const w=document.createElement("p");w.className="meeting-location",w.textContent=l,n.appendChild(w)}const o=e.any(i,he("description"),null,null)?.value??e.any(i,B("description"),null,null)?.value;if(o){const w=document.createElement("p");w.className="meeting-description",w.textContent=o,n.appendChild(w)}const u=e.each(i,Ut("participant"),null,null);if(u.length>0){const w=document.createElement("div");w.className="meeting-section";const y=document.createElement("h3");y.textContent="Participants",w.appendChild(y);const C=document.createElement("ul");C.className="meeting-participants";for(const T of u){const L=T,R=sm(L,e),Z=document.createElement("li"),Y=document.createElement("a");Y.className="meeting-participant",Y.href=L.value,Y.textContent=R,Z.appendChild(Y),C.appendChild(Z)}w.appendChild(C),n.appendChild(w)}const d=e.each(i,Ut("agenda"),null,null);if(d.length>0){const w=document.createElement("div");w.className="meeting-section";const y=document.createElement("h3");y.textContent="Agenda",w.appendChild(y);const C=document.createElement("ol");C.className="meeting-agenda";for(const T of d){const L=document.createElement("li"),R=e.any(T,he("title"),null,null)?.value??e.any(T,B("name"),null,null)?.value??T.value;R&&!R.startsWith("http")?L.textContent=R:L.textContent=fe(R),C.appendChild(L)}w.appendChild(C),n.appendChild(w)}const f=e.each(i,Ut("action"),null,null);if(f.length>0){const w=document.createElement("div");w.className="meeting-section";const y=document.createElement("h3");y.textContent="Action Items",w.appendChild(y);const C=document.createElement("ul");C.className="meeting-actions";for(const T of f){const L=document.createElement("li"),R=e.any(T,he("title"),null,null)?.value??e.any(T,B("name"),null,null)?.value??e.any(T,at("label"),null,null)?.value??T.value;R&&!R.startsWith("http")?L.textContent=R:L.textContent=fe(R),C.appendChild(L)}w.appendChild(C),n.appendChild(w)}const m=e.any(i,Lt("content"),null,null)?.value??e.any(i,B("text"),null,null)?.value;if(m){const w=document.createElement("div");w.className="meeting-section";const y=document.createElement("h3");y.textContent="Notes",w.appendChild(y);const C=document.createElement("div");C.className="meeting-notes",C.textContent=m,w.appendChild(C),n.appendChild(w)}t.appendChild(n)}Ut("Meeting").value,B("Event").value;function om(i,e){return!!(e.each(i,me("type"),null,null).map(a=>a.value).includes(Ut("Meeting").value)||e.any(i,Ut("participant"),null,null)||e.any(i,Ut("agenda"),null,null))}const um={label:"Meeting",icon:"🤝",canHandle(i,e){return om(i,e)},render(i,e,t){lm(i,e,t)}};Be(um);const ml={Create:"created",Update:"updated",Delete:"deleted",Add:"added",Remove:"removed",Like:"liked",Follow:"followed",Announce:"shared",Accept:"accepted",Reject:"rejected",Invite:"invited",Offer:"offered",Undo:"undid",Block:"blocked",Flag:"flagged",Move:"moved",Read:"read",View:"viewed",Listen:"listened to",Join:"joined",Leave:"left"};function cm(i,e){const t=[],n=[...e.each(i,tt("contains"),null,null),...e.each(i,Ze("items"),null,null),...e.each(i,Kt("notification"),null,null)],a=new Set;for(const s of n){if(a.has(s.value))continue;a.add(s.value);const r=s,l=e.each(r,me("type"),null,null).map(R=>R.value);let o="";for(const R of l){const Z=R.split("#").pop()??R.split("/").pop()??"";if(ml[Z]){o=Z;break}}const u=e.any(r,Ze("actor"),null,null);let d="",f=null;u&&(f=u.value,d=e.any(u,B("name"),null,null)?.value??e.any(u,Ze("name"),null,null)?.value??fe(u.value));const m=e.any(r,Ze("object"),null,null);let w="",y=null;m&&(y=m.value,w=e.any(m,B("name"),null,null)?.value??e.any(m,Ze("name"),null,null)?.value??fe(m.value));const C=e.any(r,Ze("content"),null,null)?.value??e.any(r,Ze("summary"),null,null)?.value??e.any(r,he("description"),null,null)?.value??null,T=e.any(r,Ze("published"),null,null)?.value??e.any(r,he("created"),null,null)?.value??e.any(r,he("date"),null,null)?.value??null,L=ml[o]??(o.toLowerCase()||"notified");t.push({uri:r.value,type:o,actor:d,actorUri:f,verb:L,object:w,objectUri:y,content:C,timestamp:T})}return t.sort((s,r)=>!s.timestamp&&!r.timestamp?0:s.timestamp?r.timestamp?new Date(r.timestamp).getTime()-new Date(s.timestamp).getTime():-1:1),t}function hm(i){const e=new Date(i);if(isNaN(e.getTime()))return i;const t=new Date,n=t.getTime()-e.getTime(),a=Math.floor(n/6e4),s=Math.floor(n/36e5),r=Math.floor(n/864e5);return a<1?"just now":a<60?`${a}m ago`:s<24?`${s}h ago`:r<7?`${r}d ago`:e.toLocaleDateString(void 0,{month:"short",day:"numeric",year:e.getFullYear()!==t.getFullYear()?"numeric":void 0})}function dm(i,e,t){t.innerHTML="";const n=document.createElement("div");n.className="notif-view";const a=e.any(i,B("name"),null,null)?.value??e.any(i,he("title"),null,null)?.value??e.any(i,at("label"),null,null)?.value??"Notifications",s=document.createElement("h2");s.className="notif-title",s.textContent=a,n.appendChild(s);const r=cm(i,e),l=document.createElement("p");if(l.className="notif-count",l.textContent=`${r.length} notification${r.length!==1?"s":""}`,n.appendChild(l),r.length===0){const u=document.createElement("p");u.className="notif-empty",u.textContent="No notifications.",n.appendChild(u),t.appendChild(n);return}const o=document.createElement("div");o.className="notif-list";for(const u of r){const d=document.createElement("div");d.className="notif-item";const f=document.createElement("div");if(f.className="notif-summary",u.actor){const m=document.createElement("a");m.className="notif-actor",m.textContent=u.actor,u.actorUri&&(m.href=u.actorUri),f.appendChild(m),f.appendChild(document.createTextNode(` ${u.verb} `))}else f.appendChild(document.createTextNode(`${u.verb} `));if(u.object){const m=document.createElement("a");m.className="notif-object",m.textContent=u.object,u.objectUri&&(m.href=u.objectUri),f.appendChild(m)}if(d.appendChild(f),u.content){const m=document.createElement("p");m.className="notif-content",m.textContent=u.content,d.appendChild(m)}if(u.timestamp){const m=document.createElement("time");m.className="notif-time",m.dateTime=u.timestamp,m.textContent=hm(u.timestamp),d.appendChild(m)}o.appendChild(d)}n.appendChild(o),t.appendChild(n)}function fm(i,e){const t=e.each(i,me("type"),null,null).map(n=>n.value);return!!((t.includes(tt("Container").value)||t.includes(tt("BasicContainer").value))&&(e.match(null,tt("inbox"),i,null).length>0||e.match(null,Kt("inbox"),i,null).length>0)||t.includes(Ze("OrderedCollection").value)||t.includes(Ze("Collection").value)&&(e.any(i,Ze("items"),null,null)||e.any(i,tt("contains"),null,null))||e.any(i,Kt("notification"),null,null))}const pm={label:"Notifications",icon:"🔔",canHandle(i,e){return fm(i,e)},render(i,e,t){dm(i,e,t)}};Be(pm);const mm={SingleLineTextField:{inputType:"text"},TextField:{inputType:"text"},NamedNodeURIField:{inputType:"url"},IntegerField:{inputType:"number",xsdType:"integer"},DecimalField:{inputType:"number",xsdType:"decimal"},FloatField:{inputType:"number",xsdType:"float"},DateField:{inputType:"date",xsdType:"date"},DateTimeField:{inputType:"datetime-local",xsdType:"dateTime"},TimeField:{inputType:"time",xsdType:"time"},ColorField:{inputType:"color"},PhoneField:{inputType:"tel"},EmailField:{inputType:"email"}};function gl(i,e){return e.any(i,at("label"),null,null)?.value??e.any(i,he("title"),null,null)?.value??e.any(i,nt("title"),null,null)?.value??e.any(i,be("name"),null,null)?.value??e.any(i,B("name"),null,null)?.value??fe(i.value)}function gm(i,e){const t=e.each(i,me("type"),null,null);for(const n of t){const a=fe(n.value);if(a!=="type")return a}return"Unknown"}function vm(i,e){const t=[],n=e.each(i,yt("part"),null,null),a=e.any(i,yt("parts"),null,null);a&&a.termType==="NamedNode"&&ym(a,e,t);for(const s of n){if(s.termType!=="NamedNode")continue;const r=s;t.some(l=>l.uri===r.value)||t.push(Ao(r,e))}return t.sort((s,r)=>s.sequence-r.sequence),t}function ym(i,e,t){let n=i;const a=new Set;for(;n&&!a.has(n.value)&&(a.add(n.value),n.value!==me("nil").value);){const s=e.any(n,me("first"),null,null);s&&s.termType==="NamedNode"&&t.push(Ao(s,e));const r=e.any(n,me("rest"),null,null);if(r&&r.termType==="NamedNode")n=r;else break}}function Ao(i,e){const t=gm(i,e),n=e.any(i,yt("property"),null,null)?.value??null,a=e.any(i,yt("label"),null,null)?.value??(n?fe(n):t),s=e.any(i,yt("sequence"),null,null)?.value,r=s?parseInt(s,10):999,l=e.any(i,yt("contents"),null,null)?.value??null;return{uri:i.value,fieldType:t,property:n,label:a,sequence:r,contents:l}}function wm(i,e){const t=e.each(i,me("type"),null,null);if(t.some(n=>n.value===yt("Form").value))return i;for(const n of t){if(n.termType!=="NamedNode")continue;const a=e.any(n,yt("annotationForm"),null,null);if(a&&a.termType==="NamedNode")return a;const s=e.any(n,yt("creationForm"),null,null);if(s&&s.termType==="NamedNode")return s;const r=e.each(n,at("subClassOf"),null,null);for(const l of r){if(l.termType!=="NamedNode")continue;const o=e.any(l,yt("annotationForm"),null,null);if(o&&o.termType==="NamedNode")return o;const u=e.any(l,yt("creationForm"),null,null);if(u&&u.termType==="NamedNode")return u}}return null}function Em(i,e,t){const n=document.createElement("div");if(n.className="form-field",i.fieldType==="Comment"){const u=document.createElement("p");return u.className="form-comment",u.textContent=i.contents??"",u}if(i.fieldType==="Heading"){const u=document.createElement("h3");return u.className="form-heading",u.textContent=i.contents??i.label,u}const a=document.createElement("label");a.className="form-field-label",a.textContent=i.label,i.property&&(a.title=i.property),n.appendChild(a);const s=document.createElement("div");s.className="form-field-value";let r="";if(i.property){const u={termType:"NamedNode",value:i.property},d=t.any(e,u,null,null);d&&(r=d.value)}if(i.fieldType==="BooleanField"||i.fieldType==="TristateField"){const u=document.createElement("span");return u.className="form-boolean",r==="true"||r==="1"?(u.textContent="✓",u.classList.add("form-bool-true")):r==="false"||r==="0"?(u.textContent="✗",u.classList.add("form-bool-false")):(u.textContent=i.fieldType==="TristateField"?"—":"✗",u.classList.add("form-bool-null")),s.appendChild(u),n.appendChild(s),n}if(i.fieldType==="MultiLineTextField"){const u=document.createElement("textarea");return u.className="form-textarea",u.value=r,u.readOnly=!0,u.rows=4,s.appendChild(u),n.appendChild(s),n}if(i.fieldType==="Choice"||i.fieldType==="Classifier"){const u=document.createElement("select");u.className="form-select",u.disabled=!0;const d=document.createElement("option");return d.textContent=r?fe(r):"(none)",d.value=r,u.appendChild(d),s.appendChild(u),n.appendChild(s),n}const l=mm[i.fieldType],o=document.createElement("input");return o.className="form-input",o.type=l?.inputType??"text",o.value=r,o.readOnly=!0,s.appendChild(o),n.appendChild(s),n}function Cm(i,e,t){t.innerHTML="";const n=document.createElement("div");n.className="form-view";const a=wm(i,e);if(!a){const f=document.createElement("p");f.className="form-empty",f.textContent="No form definition found for this resource.",n.appendChild(f),t.appendChild(n);return}const s=e.any(a,he("title"),null,null)?.value??e.any(a,nt("title"),null,null)?.value??gl(a,e),r=document.createElement("h2");if(r.className="form-title",r.textContent=s,n.appendChild(r),!(a.value===i.value)){const f=document.createElement("p");f.className="form-subject",f.textContent=`Editing: ${gl(i,e)}`,n.appendChild(f)}const o=vm(a,e);if(o.length===0){const f=document.createElement("p");f.className="form-no-fields",f.textContent="This form has no fields defined.",n.appendChild(f),t.appendChild(n);return}const u=document.createElement("p");u.className="form-count",u.textContent=`${o.length} field${o.length!==1?"s":""}`,n.appendChild(u);const d=document.createElement("div");d.className="form-fields";for(const f of o)d.appendChild(Em(f,i,e));n.appendChild(d),t.appendChild(n)}function bm(i,e){const t=e.each(i,me("type"),null,null);if(t.map(a=>a.value).includes(yt("Form").value))return!0;for(const a of t){if(a.termType!=="NamedNode")continue;if(e.any(a,yt("creationForm"),null,null)||e.any(a,yt("annotationForm"),null,null))return!0;const s=e.each(a,at("subClassOf"),null,null);for(const r of s)if(r.termType==="NamedNode"&&(e.any(r,yt("creationForm"),null,null)||e.any(r,yt("annotationForm"),null,null)))return!0}return!1}const xm={label:"Form",icon:"📋",canHandle(i,e){return bm(i,e)},render(i,e,t){Cm(i,e,t)}};Be(xm);const Nm=[{uri:"Read",label:"Read"},{uri:"Write",label:"Write"},{uri:"Append",label:"Append"},{uri:"Control",label:"Control"}];function Tm(i,e){return e.any(i,be("name"),null,null)?.value??e.any(i,we("fn"),null,null)?.value??fe(i.value)}function Am(i,e){const t=[],n=e.each(i,wt("trustedApp"),null,null);for(const a of n){const s=e.any(a,wt("origin"),null,null);if(!s)continue;const r=s.value,l=fe(r),u=e.each(a,wt("mode"),null,null).map(d=>fe(d.value));t.push({originUri:r,originLabel:l,modes:u})}return t.sort((a,s)=>a.originUri.localeCompare(s.originUri)),t}function Dm(i,e,t){t.innerHTML="";const n=document.createElement("div");n.className="trusted-apps-view";const a=document.createElement("h2");a.className="trusted-apps-title",a.textContent="Trusted Applications",n.appendChild(a);const s=Tm(i,e),r=document.createElement("p");r.className="trusted-apps-subtitle",r.textContent=`Manage applications trusted by ${s}`,n.appendChild(r);const l=Am(i,e),o=document.createElement("p");if(o.className="trusted-apps-count",o.textContent=`${l.length} trusted application${l.length!==1?"s":""}`,n.appendChild(o),l.length===0){const C=document.createElement("p");C.className="trusted-apps-empty",C.textContent="No trusted applications configured.",n.appendChild(C),vl(n),t.appendChild(n);return}const u=document.createElement("table");u.className="trusted-apps-table";const d=document.createElement("thead"),f=document.createElement("tr"),m=document.createElement("th");m.textContent="Application URL";const w=document.createElement("th");w.textContent="Access Modes",f.appendChild(m),f.appendChild(w),d.appendChild(f),u.appendChild(d);const y=document.createElement("tbody");for(const C of l){const T=document.createElement("tr");T.className="trusted-apps-row";const L=document.createElement("td");L.className="trusted-apps-origin";const R=document.createElement("a");R.href=C.originUri,R.textContent=C.originUri,R.target="_blank",R.rel="noopener",L.appendChild(R),T.appendChild(L);const Z=document.createElement("td");Z.className="trusted-apps-modes";for(const Y of Nm){const N=document.createElement("span"),j=C.modes.includes(Y.uri);N.className=`trusted-apps-mode ${j?"trusted-apps-mode-active":"trusted-apps-mode-inactive"}`,N.textContent=Y.label,Z.appendChild(N)}T.appendChild(Z),y.appendChild(T)}u.appendChild(y),n.appendChild(u),vl(n),t.appendChild(n)}function vl(i){const e=document.createElement("div");e.className="trusted-apps-notes";const t=document.createElement("h3");t.textContent="Notes",e.appendChild(t);const n=document.createElement("ol"),a=["Trusted applications get access to all resources that you have access to.","You can limit which modes they have by default.","They will not gain more access than you have."];for(const s of a){const r=document.createElement("li");r.textContent=s,n.appendChild(r)}e.appendChild(n),i.appendChild(e)}function _m(i,e){return e.each(i,wt("trustedApp"),null,null).length>0}const km={label:"Trusted Apps",icon:"🛡️",canHandle(i,e){return _m(i,e)},render(i,e,t){Dm(i,e,t)}};Be(km);function Sm(i,e){return e.any(i,he("title"),null,null)?.value??e.any(i,nt("title"),null,null)?.value??e.any(i,B("name"),null,null)?.value??"Notepad"}function Do(i,e){return e.any(i,be("name"),null,null)?.value??e.any(i,B("name"),null,null)?.value??fe(i.value)}function Im(i,e){const t=[],n=new Set;let a=e.any(i,pi("next"),null,null);for(;a&&a.termType==="NamedNode"&&!n.has(a.value)&&a.value!==i.value;){n.add(a.value);const s=a,r=e.any(s,Lt("content"),null,null)?.value??e.any(s,nt("description"),null,null)?.value??"",l=e.any(s,nt("author"),null,null)??e.any(s,he("creator"),null,null)??e.any(s,be("maker"),null,null);let o=null,u=null;l&&(u=l.value,l.termType==="NamedNode"?o=Do(l,e):o=l.value),t.push({uri:s.value,content:r,author:o,authorUri:u}),a=e.any(s,pi("next"),null,null)}return t}function Bm(i,e){const t=e.any(i,he("created"),null,null)?.value??e.any(i,nt("date"),null,null)?.value;if(!t)return null;const n=new Date(t);return isNaN(n.getTime())?t:n.toLocaleDateString()}function Fm(i,e,t){t.innerHTML="";const n=document.createElement("div");n.className="pad-view";const a=Sm(i,e),s=document.createElement("h2");s.className="pad-title",s.textContent=a,n.appendChild(s);const r=document.createElement("div");r.className="pad-meta";const l=Bm(i,e);if(l){const y=document.createElement("span");y.className="pad-date",y.textContent=`Created: ${l}`,r.appendChild(y)}const o=e.any(i,nt("author"),null,null)??e.any(i,he("creator"),null,null);if(o&&o.termType==="NamedNode"){const y=Do(o,e),C=document.createElement("span");C.className="pad-author",C.textContent=`Author: ${y}`,r.appendChild(C)}r.children.length>0&&n.appendChild(r);const u=Im(i,e);if(u.length===0){const y=document.createElement("p");y.className="pad-empty",y.textContent="This notepad is empty.",n.appendChild(y),t.appendChild(n);return}const d=document.createElement("div");d.className="pad-content";const m=new Set(u.filter(y=>y.author).map(y=>y.authorUri)).size>1;for(const y of u){const C=document.createElement("div");if(C.className="pad-chunk",m&&y.author){const R=document.createElement("span");R.className="pad-chunk-author",R.textContent=y.author,y.authorUri&&(R.title=y.authorUri),C.appendChild(R)}const T=document.createElement("div");T.className="pad-chunk-text";const L=y.content.split(`
`);for(let R=0;R<L.length;R++)R>0&&T.appendChild(document.createElement("br")),T.appendChild(document.createTextNode(L[R]));C.appendChild(T),d.appendChild(C)}n.appendChild(d);const w=document.createElement("p");w.className="pad-count",w.textContent=`${u.length} chunk${u.length!==1?"s":""}`,n.appendChild(w),t.appendChild(n)}function Lm(i,e){return!!(e.each(i,me("type"),null,null).map(a=>a.value).includes(pi("Notepad").value)||e.any(i,pi("next"),null,null))}const Rm={label:"Notepad",icon:"📝",canHandle(i,e){return Lm(i,e)},render(i,e,t){Fm(i,e,t)}};Be(Rm);function Om(i,e){return e.any(i,he("title"),null,null)?.value??e.any(i,nt("title"),null,null)?.value??e.any(i,B("name"),null,null)?.value??e.any(i,Lt("name"),null,null)?.value??"Microblog"}function $m(i,e){return e.any(i,be("name"),null,null)?.value??e.any(i,B("name"),null,null)?.value??fe(i.value)}function Mm(i,e){return e.each(i,me("type"),null,null).some(n=>n.value===li("MicroblogPost").value)}function _o(i,e){const t=e.any(i,Lt("content"),null,null)?.value??e.any(i,he("description"),null,null)?.value??e.any(i,nt("description"),null,null)?.value??"",n=e.any(i,he("created"),null,null)?.value??e.any(i,nt("date"),null,null)?.value,a=n?new Date(n):null,s=e.any(i,Lt("has_creator"),null,null)??e.any(i,be("maker"),null,null)??e.any(i,he("creator"),null,null);let r=null,l=null;return s&&(l=s.value,s.termType==="NamedNode"?r=$m(s,e):r=s.value),{uri:i.value,content:t,created:a,creator:r,creatorUri:l}}function Um(i,e){const t=e.each(i,Lt("container_of"),null,null),n=[];for(const a of t)a.termType==="NamedNode"&&n.push(_o(a,e));return n.sort((a,s)=>!a.created&&!s.created?0:a.created?s.created?s.created.getTime()-a.created.getTime():-1:1),n}function Pm(i){const e=new Date,t=e.getTime()-i.getTime(),n=Math.floor(t/6e4),a=Math.floor(t/36e5),s=Math.floor(t/864e5);return n<1?"just now":n<60?`${n}m ago`:a<24?`${a}h ago`:s<7?`${s}d ago`:i.toLocaleDateString(void 0,{month:"short",day:"numeric",year:i.getFullYear()!==e.getFullYear()?"numeric":void 0})}function qm(i,e){const t=/(https?:\/\/[^\s<>"]+)/g,n=i.split(t);for(const a of n)if(t.test(a)){t.lastIndex=0;const s=document.createElement("a");s.href=a,s.textContent=a,s.target="_blank",s.rel="noopener",e.appendChild(s)}else a&&e.appendChild(document.createTextNode(a))}function yl(i){const e=document.createElement("div");e.className="microblog-post";const t=document.createElement("div");if(t.className="microblog-post-header",i.creator){const s=document.createElement("span");s.className="microblog-post-author",s.textContent=i.creator,i.creatorUri&&(s.title=i.creatorUri),t.appendChild(s)}if(i.created){const s=document.createElement("time");s.className="microblog-post-time",s.dateTime=i.created.toISOString(),s.textContent=Pm(i.created),t.appendChild(s)}e.appendChild(t);const n=document.createElement("div");n.className="microblog-post-content",qm(i.content,n),e.appendChild(n);const a=i.content.length;if(a>0){const s=document.createElement("span");s.className="microblog-char-count",s.textContent=`${a}`,e.appendChild(s)}return e}function Hm(i,e,t){t.innerHTML="";const n=document.createElement("div");if(n.className="microblog-view",Mm(i,e)){const d=_o(i,e),f=document.createElement("h2");f.className="microblog-title",f.textContent="Microblog Post",n.appendChild(f),n.appendChild(yl(d)),t.appendChild(n);return}const a=Om(i,e),s=document.createElement("h2");s.className="microblog-title",s.textContent=a,n.appendChild(s);const r=e.any(i,he("description"),null,null)?.value??e.any(i,nt("description"),null,null)?.value;if(r){const d=document.createElement("p");d.className="microblog-description",d.textContent=r,n.appendChild(d)}const l=Um(i,e),o=document.createElement("p");if(o.className="microblog-count",o.textContent=`${l.length} post${l.length!==1?"s":""}`,n.appendChild(o),l.length===0){const d=document.createElement("p");d.className="microblog-empty",d.textContent="No posts yet.",n.appendChild(d),t.appendChild(n);return}const u=document.createElement("div");u.className="microblog-feed";for(const d of l)u.appendChild(yl(d));n.appendChild(u),t.appendChild(n)}function zm(i,e){const n=e.each(i,me("type"),null,null).map(s=>s.value);if(n.includes(li("Microblog").value)||n.includes(li("MessageBoard").value)||n.includes(Lt("Forum").value)||n.includes(li("MicroblogPost").value))return!0;const a=e.each(i,Lt("container_of"),null,null);if(a.length>0){for(const s of a)if(s.termType==="NamedNode"&&e.any(s,Lt("content"),null,null))return!0}return!1}const jm={label:"Microblog",icon:"📢",canHandle(i,e){return zm(i,e)},render(i,e,t){Hm(i,e,t)}};Be(jm);function Vm(i,e){const t=e.each(i,Er("slot"),null,null),n=[];for(const a of t){const s=e.any(a,Er("index"),null,null),r=e.any(a,Er("item"),null,null);if(!r)continue;const l=r,o=e.any(l,nt("title"),null,null)?.value??e.any(l,he("title"),null,null)?.value??e.any(l,B("name"),null,null)?.value??l.value,u=e.any(l,B("video"),null,null)?.value??e.any(l,B("contentUrl"),null,null)?.value??void 0;n.push({index:s?Number(s.value):0,title:o,uri:l.value,videoUrl:u})}return n.sort((a,s)=>a.index-s.index),n}function Gm(i){const e=[/(?:youtube\.com\/watch\?v=)([a-zA-Z0-9_-]{11})/,/(?:youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})/,/(?:youtu\.be\/)([a-zA-Z0-9_-]{11})/];for(const t of e){const n=i.match(t);if(n)return n[1]}return null}function Xm(i,e,t){t.innerHTML="";const n=e.any(i,nt("title"),null,null)?.value??e.any(i,he("title"),null,null)?.value??e.any(i,B("name"),null,null)?.value??"Untitled Playlist",a=document.createElement("h2");a.textContent=n,t.appendChild(a);const s=Vm(i,e);if(s.length===0){const l=document.createElement("p");l.textContent="No tracks found in this playlist.",t.appendChild(l);return}const r=document.createElement("ol");r.className="playlist-tracks";for(const l of s){const o=document.createElement("li");o.className="playlist-track",o.dataset.uri=l.uri;const u=document.createElement("span");if(u.className="track-title",u.textContent=l.title,o.appendChild(u),l.videoUrl){const d=document.createElement("div");d.className="track-video";const f=Gm(l.videoUrl);if(f){const m=document.createElement("iframe");m.src=`https://www.youtube-nocookie.com/embed/${f}`,m.width="560",m.height="315",m.allowFullscreen=!0,m.setAttribute("loading","lazy"),m.setAttribute("allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"),d.appendChild(m)}else{const m=document.createElement("video");m.src=l.videoUrl,m.controls=!0,m.width=560,d.appendChild(m)}o.appendChild(d)}r.appendChild(o)}t.appendChild(r)}function Wm(i,e){const n=e.each(i,me("type"),null,null).map(s=>s.value);return n.includes(Er("OrderedList").value)||n.includes(ad("Playlist").value)?!0:e.each(i,Er("slot"),null,null).length>0}const Qm={label:"Playlist",icon:"🎵",canHandle(i,e){return Wm(i,e)},render(i,e,t){Xm(i,e,t)}};Be(Qm);function Ym(i,e){if(e)return"📁";const t=i.split(".").pop()?.toLowerCase()??"";return{jpg:"🖼",jpeg:"🖼",png:"🖼",gif:"🖼",svg:"🖼",webp:"🖼",bmp:"🖼",ico:"🖼",mp3:"🎵",wav:"🎵",ogg:"🎵",flac:"🎵",m4a:"🎵",mp4:"🎬",webm:"🎬",avi:"🎬",mov:"🎬",mkv:"🎬",pdf:"📑",doc:"📝",docx:"📝",ttl:"📊",rdf:"📊",jsonld:"📊",n3:"📊",nq:"📊",json:"📋",xml:"📋",csv:"📋",js:"📜",ts:"📜",py:"📜",html:"📜",css:"📜",txt:"📄",md:"📄",zip:"📦",tar:"📦",gz:"📦"}[t]??"📄"}function Zm(i,e){const t=e.each(i,tt("contains"),null,null),n=[];for(const a of t){const s=a,r=s.value,l=e.each(s,me("type"),null,null).map(C=>C.value),o=l.includes(tt("Container").value)||l.includes(tt("BasicContainer").value)||r.endsWith("/"),u=Fa(r,o),f=(e.any(s,he("modified"),null,null)??e.any(s,Ys("mtime"),null,null))?.value,m=e.any(s,Ys("size"),null,null),w=m?Number(m.value):void 0,y=e.any(s,he("format"),null,null)?.value??void 0;n.push({uri:r,name:u,isContainer:o,modified:f,size:w,contentType:y})}return n.sort((a,s)=>a.isContainer!==s.isContainer?a.isContainer?-1:1:a.name.localeCompare(s.name)),n}function Fa(i,e){const n=(e?i.replace(/\/$/,""):i).split("/");return decodeURIComponent(n[n.length-1]||i)}function Jm(i){return i<1024?`${i} B`:i<1024*1024?`${(i/1024).toFixed(1)} KB`:`${(i/(1024*1024)).toFixed(1)} MB`}function Km(i){const e=Number(i),t=Number.isNaN(e)?new Date(i):new Date(e*1e3);return Number.isNaN(t.getTime())?i:t.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function e0(i){const e=i.replace(/\/$/,""),t=e.lastIndexOf("/");return t<=7?null:e.slice(0,t+1)}function t0(i){const e=[];let t=i;for(;;){const n=Fa(t,!0);e.unshift({label:n||"Root",uri:t});const a=e0(t);if(!a)break;t=a}return e}function n0(i,e,t){t.innerHTML="";const n=document.createElement("div");n.className="folder-view";const a=e.any(i,nt("title"),null,null)?.value??e.any(i,he("title"),null,null)?.value??Fa(i.value,!0),s=document.createElement("h2");s.className="folder-title",s.textContent=a,n.appendChild(s);const r=t0(i.value);if(r.length>1){const T=document.createElement("nav");T.className="folder-breadcrumbs",T.setAttribute("aria-label","Folder path");for(let L=0;L<r.length;L++){if(L>0){const R=document.createElement("span");R.className="folder-breadcrumb-sep",R.textContent=" / ",T.appendChild(R)}if(L<r.length-1){const R=tn(r[L].uri,r[L].label);R.className="folder-breadcrumb",T.appendChild(R)}else{const R=document.createElement("span");R.className="folder-breadcrumb-current",R.textContent=r[L].label,T.appendChild(R)}}n.appendChild(T)}const l=document.createElement("p");l.className="folder-path",l.textContent=i.value,n.appendChild(l);const o=Zm(i,e),u=o.filter(T=>T.isContainer),d=o.filter(T=>!T.isContainer),f=[];u.length>0&&f.push(`${u.length} folder${u.length!==1?"s":""}`),d.length>0&&f.push(`${d.length} file${d.length!==1?"s":""}`);const m=document.createElement("p");if(m.className="folder-count",m.textContent=f.length>0?f.join(", "):"0 items",n.appendChild(m),o.length===0){const T=document.createElement("p");T.className="folder-empty",T.textContent="This folder is empty.",n.appendChild(T),t.appendChild(n);return}const w=document.createElement("table");w.className="folder-listing";const y=document.createElement("thead");y.innerHTML="<tr><th></th><th>Name</th><th>Type</th><th>Size</th><th>Modified</th></tr>",w.appendChild(y);const C=document.createElement("tbody");for(const T of o){const L=document.createElement("tr");L.className=T.isContainer?"folder-row":"file-row";const R=document.createElement("td");R.className="folder-icon",R.textContent=Ym(T.name,T.isContainer),L.appendChild(R);const Z=document.createElement("td");Z.className="folder-name";const Y=tn(T.uri,T.name+(T.isContainer?"/":""));Z.appendChild(Y),L.appendChild(Z);const N=document.createElement("td");N.className="folder-type",T.isContainer?N.textContent="Folder":T.contentType?N.textContent=T.contentType:N.textContent="",L.appendChild(N);const j=document.createElement("td");j.className="folder-size",j.textContent=T.size!=null?Jm(T.size):"",L.appendChild(j);const $=document.createElement("td");$.className="folder-modified",$.textContent=T.modified?Km(T.modified):"",L.appendChild($),C.appendChild(L)}w.appendChild(C),n.appendChild(w),t.appendChild(n)}function r0(i,e){const n=e.each(i,me("type"),null,null).map(a=>a.value);return!!(n.includes(tt("Container").value)||n.includes(tt("BasicContainer").value)||i.value.endsWith("/")&&e.match(i,tt("contains"),null,null).length>0)}const i0={label:"Folder",icon:"📁",canHandle(i,e){return r0(i,e)},render(i,e,t){n0(i,e,t)}};Be(i0);function a0(i,e){const t=e.each(null,Jn("storage"),i,null);for(const a of t){if(a.termType!=="NamedNode")continue;const s=e.any(a,be("name"),null,null)?.value??e.any(a,we("fn"),null,null)?.value;if(s)return s}const n=e.any(i,be("primaryTopic"),null,null);if(n&&n.termType==="NamedNode"){const a=e.any(n,be("name"),null,null)?.value??e.any(n,we("fn"),null,null)?.value;if(a)return a}try{const s=new URL(i.value).hostname.split(".")[0];if(s&&s!=="www")return s}catch{}return null}function s0(i,e){const t=e.each(null,Jn("storage"),i,null);for(const a of t)if(a.termType==="NamedNode")return a.value;const n=e.any(i,be("primaryTopic"),null,null);return n&&n.termType==="NamedNode"?n.value:null}function l0(i,e){const t=[],n=e.each(i,tt("contains"),null,null);for(const a of n){if(a.termType!=="NamedNode")continue;const s=a,l=e.each(s,me("type"),null,null).map(d=>d.value),o=l.includes(tt("Container").value)||l.includes(tt("BasicContainer").value)||s.value.endsWith("/"),u=e.any(s,he("title"),null,null)?.value??e.any(s,nt("title"),null,null)?.value??fe(s.value);t.push({uri:s.value,label:u,type:o?"container":"resource"})}return t.sort((a,s)=>a.type!==s.type?a.type==="container"?-1:1:a.label.localeCompare(s.label)),t}function o0(i,e){const n=e.each(i,me("type"),null,null).map(s=>s.value);let a=null;return n.includes(Kt("Account").value)?a="Solid Account":n.includes(Jn("Storage").value)&&(a="Solid Pod"),{typeLabel:a}}function u0(i,e,t){t.innerHTML="";const n=document.createElement("div");n.className="dashboard-view";const a=a0(i,e),s=s0(i,e),r=document.createElement("h2");r.className="dashboard-title",r.textContent=a?`${a}'s Pod`:"Solid Pod",n.appendChild(r);const l=document.createElement("p");l.className="dashboard-url";const o=document.createElement("code");o.textContent=i.value,l.appendChild(o),n.appendChild(l);const{typeLabel:u}=o0(i,e);if(u){const w=document.createElement("span");w.className="dashboard-badge",w.textContent=u,n.appendChild(w)}if(s){const w=document.createElement("div");w.className="dashboard-section";const y=document.createElement("h3");y.textContent="Profile",w.appendChild(y);const C=tn(s,a?`View ${a}'s profile`:"View profile");C.className="dashboard-link",w.appendChild(C),n.appendChild(w)}const d=l0(i,e),f=document.createElement("div");f.className="dashboard-section";const m=document.createElement("h3");if(m.textContent="Data",f.appendChild(m),d.length===0){const w=document.createElement("p");w.className="dashboard-empty",w.textContent="No visible contents.",f.appendChild(w)}else{const w=document.createElement("p");w.className="dashboard-count";const y=d.filter(R=>R.type==="container").length,C=d.filter(R=>R.type==="resource").length,T=[];y>0&&T.push(`${y} folder${y!==1?"s":""}`),C>0&&T.push(`${C} file${C!==1?"s":""}`),w.textContent=T.join(", "),f.appendChild(w);const L=document.createElement("ul");L.className="dashboard-contents";for(const R of d){const Z=document.createElement("li");Z.className=`dashboard-item dashboard-item-${R.type}`;const Y=document.createElement("span");Y.className="dashboard-item-icon",Y.textContent=R.type==="container"?"📁":"📄",Z.appendChild(Y);const N=tn(R.uri,R.label);N.className="dashboard-item-link",N.title=R.uri,Z.appendChild(N),L.appendChild(Z)}f.appendChild(L)}n.appendChild(f),t.appendChild(n)}function c0(i,e){const n=e.each(i,me("type"),null,null).map(r=>r.value);if(n.includes(Jn("Storage").value)||n.includes(Kt("Account").value))return!0;if(n.includes(tt("Container").value)||n.includes(tt("BasicContainer").value))try{if(new URL(i.value).pathname==="/")return!0}catch{}return e.each(null,Jn("storage"),i,null).length>0}const h0={label:"Dashboard",icon:"🏠",canHandle(i,e){return c0(i,e)},render(i,e,t){u0(i,e,t)}};Be(h0);const d0=/\.(png|jpe?g|gif|webp|svg|bmp|ico)(\?.*)?$/i;function f0(i,e){return e.any(i,he("title"),null,null)?.value??e.any(i,nt("title"),null,null)?.value??e.any(i,B("name"),null,null)?.value??e.any(i,be("name"),null,null)?.value??"Chat"}function ko(i,e){return e.any(i,be("name"),null,null)?.value??e.any(i,B("name"),null,null)?.value??fe(i.value)}function p0(i,e){const t=e.each(i,Ct("message"),null,null),n=[];for(const a of t){const s=a,r=e.any(s,Lt("content"),null,null)?.value??e.any(s,he("content"),null,null)?.value??e.any(s,nt("description"),null,null)?.value??"",l=e.any(s,he("created"),null,null)?.value??e.any(s,nt("date"),null,null)?.value,o=l?new Date(l):null,u=e.any(s,be("maker"),null,null)??e.any(s,nt("creator"),null,null);let d=null,f=null;u&&(f=u.value,u.termType==="NamedNode"?d=ko(u,e):d=u.value),n.push({uri:s.value,content:r,created:o,maker:d,makerUri:f})}return n.sort((a,s)=>!a.created&&!s.created?0:a.created?s.created?a.created.getTime()-s.created.getTime():1:-1),n}function m0(i){return i.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})}function g0(i){return i.toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"})}function v0(i){return i.toISOString().slice(0,10)}function y0(i,e){const t=/(https?:\/\/[^\s<>"]+)/g,n=i.split(t);for(const a of n)if(t.test(a))if(t.lastIndex=0,d0.test(a)){const s=document.createElement("img");s.className="chat-inline-image",s.src=a,s.alt="Shared image",s.loading="lazy",e.appendChild(s)}else{const s=document.createElement("a");s.href=a,s.textContent=a,s.target="_blank",s.rel="noopener",e.appendChild(s)}else a&&e.appendChild(document.createTextNode(a))}function w0(i,e,t){t.innerHTML="";const n=document.createElement("div");n.className="chat-view";const a=f0(i,e),s=document.createElement("h2");s.className="chat-title",s.textContent=a,n.appendChild(s);const r=e.any(i,nt("author"),null,null)??e.any(i,he("creator"),null,null);if(r&&r.termType==="NamedNode"){const f=ko(r,e),m=document.createElement("p");m.className="chat-creator",m.textContent=`Created by ${f}`,n.appendChild(m)}const l=p0(i,e),o=document.createElement("p");if(o.className="chat-count",o.textContent=`${l.length} message${l.length!==1?"s":""}`,n.appendChild(o),l.length===0){const f=document.createElement("p");f.className="chat-empty",f.textContent="No messages yet.",n.appendChild(f),t.appendChild(n);return}const u=document.createElement("div");u.className="chat-messages";let d=null;for(const f of l){if(f.created){const C=v0(f.created);if(C!==d){d=C;const T=document.createElement("div");T.className="chat-date-header",T.textContent=g0(f.created),u.appendChild(T)}}const m=document.createElement("div");m.className="chat-message";const w=document.createElement("div");if(w.className="chat-message-header",f.maker)if(f.makerUri){const C=tn(f.makerUri,f.maker);C.className="chat-author",C.title=f.makerUri,w.appendChild(C)}else{const C=document.createElement("span");C.className="chat-author",C.textContent=f.maker,w.appendChild(C)}if(f.created){const C=document.createElement("time");C.className="chat-time",C.dateTime=f.created.toISOString(),C.textContent=m0(f.created),w.appendChild(C)}m.appendChild(w);const y=document.createElement("div");y.className="chat-content",y0(f.content,y),m.appendChild(y),u.appendChild(m)}n.appendChild(u),t.appendChild(n)}function E0(i,e){const n=e.each(i,me("type"),null,null).map(a=>a.value);return!!(n.includes(Ut("LongChat").value)||n.includes(Ut("ShortChat").value)||n.includes(Ut("Chat").value)||n.includes(Ct("Flow").value)||n.includes(Lt("Thread").value)||e.match(i,Ct("message"),null,null).length>0||e.any(i,Lt("content"),null,null)&&e.any(i,he("created"),null,null))}const C0={label:"Chat",icon:"💬",canHandle(i,e){return E0(i,e)},render(i,e,t){w0(i,e,t)}};Be(C0);function So(i,e){return e.any(i,we("fn"),null,null)?.value??e.any(i,be("name"),null,null)?.value??e.any(i,B("name"),null,null)?.value??fe(i.value)}function b0(i,e){const t=[],n=e.each(i,we("hasEmail"),null,null);for(const a of n){const s=e.any(a,we("value"),null,null)?.value;s?t.push(s):a.value.startsWith("mailto:")&&t.push(a.value)}if(t.length===0){const a=e.any(i,be("mbox"),null,null)?.value;a&&t.push(a)}return t}function x0(i,e){const t=[],n=e.each(i,we("hasTelephone"),null,null);for(const a of n){const s=e.any(a,we("value"),null,null)?.value;s?t.push(s):a.value.startsWith("tel:")&&t.push(a.value)}return t}function N0(i,e){const t=e.any(i,we("hasAddress"),null,null);if(!t)return;const n=t,a=e.any(n,we("street-address"),null,null)?.value,s=e.any(n,we("locality"),null,null)?.value,r=e.any(n,we("region"),null,null)?.value,l=e.any(n,we("postal-code"),null,null)?.value,o=e.any(n,we("country-name"),null,null)?.value,u=[a,s,r,l,o].filter(Boolean);return u.length>0?u.join(", "):void 0}function Io(i,e){const t=e.each(i,we("hasMember"),null,null),n=[];for(const a of t){const s=a;if(e.holds(s,me("type"),we("Group"))){const r=Io(s,e);n.push(...r);continue}n.push({uri:s.value,name:So(s,e),emails:b0(s,e),phones:x0(s,e),title:e.any(s,we("title"),null,null)?.value??void 0,org:e.any(s,we("organization-name"),null,null)?.value??void 0,photo:e.any(s,we("hasPhoto"),null,null)?.value??e.any(s,be("img"),null,null)?.value??void 0,address:N0(s,e),note:e.any(s,we("note"),null,null)?.value??void 0})}return n.sort((a,s)=>a.name.localeCompare(s.name)),n}function T0(i,e){const t=[],n=e.each(i,we("hasMember"),null,null);for(const a of n){const s=a;if(e.holds(s,me("type"),we("Group"))){const r=So(s,e),l=e.each(s,we("hasMember"),null,null).length;t.push({name:r,count:l,uri:s.value})}}return t.sort((a,s)=>a.name.localeCompare(s.name)),t}function A0(i,e){return e.any(i,we("fn"),null,null)?.value??e.any(i,B("name"),null,null)?.value??"Address Book"}function D0(i,e,t){t.innerHTML="";const n=document.createElement("div");n.className="contacts-view";const a=A0(i,e),s=document.createElement("h2");s.className="contacts-title",s.textContent=a,n.appendChild(s);const r=Io(i,e),l=T0(i,e),o=document.createElement("p");if(o.className="contacts-count",o.textContent=`${r.length} contact${r.length!==1?"s":""}`,n.appendChild(o),r.length>5){const d=document.createElement("input");d.className="contacts-search",d.type="search",d.placeholder="Filter contacts...",d.setAttribute("aria-label","Filter contacts"),d.addEventListener("input",()=>{const f=d.value.toLowerCase(),m=n.querySelectorAll(".contact-card");for(const w of m){const y=w,C=y.getAttribute("data-name")??"";y.style.display=C.toLowerCase().includes(f)?"":"none"}}),n.appendChild(d)}if(l.length>0){const d=document.createElement("div");d.className="contacts-groups";const f=document.createElement("h3");f.textContent="Groups",d.appendChild(f);const m=document.createElement("ul");m.className="contacts-group-list";for(const w of l){const y=document.createElement("li");y.className="contacts-group-item";const C=tn(w.uri,`${w.name} (${w.count})`);y.appendChild(C),m.appendChild(y)}d.appendChild(m),n.appendChild(d)}if(r.length===0){const d=document.createElement("p");d.className="contacts-empty",d.textContent="No contacts found.",n.appendChild(d),t.appendChild(n);return}const u=document.createElement("ul");u.className="contacts-list";for(const d of r){const f=document.createElement("li");if(f.className="contact-card",f.setAttribute("data-name",d.name),d.photo){const y=document.createElement("img");y.className="contact-photo",y.src=d.photo,y.alt=d.name,f.appendChild(y)}else{const y=document.createElement("div");y.className="contact-photo-placeholder",y.textContent=d.name.charAt(0).toUpperCase(),f.appendChild(y)}const m=document.createElement("div");m.className="contact-info";const w=tn(d.uri,d.name);if(w.className="contact-name",w.title=d.uri,m.appendChild(w),d.title){const y=document.createElement("span");y.className="contact-title",y.textContent=d.title,m.appendChild(y)}if(d.org){const y=document.createElement("span");y.className="contact-org",y.textContent=d.org,m.appendChild(y)}for(const y of d.emails){const C=document.createElement("a");C.className="contact-email";const T=y.replace("mailto:","");C.href=y.startsWith("mailto:")?y:`mailto:${T}`,C.textContent=T,m.appendChild(C)}for(const y of d.phones){const C=document.createElement("a");C.className="contact-phone";const T=y.replace("tel:","");C.href=y.startsWith("tel:")?y:`tel:${T}`,C.textContent=T,m.appendChild(C)}if(d.address){const y=document.createElement("span");y.className="contact-address",y.textContent=d.address,m.appendChild(y)}if(d.note){const y=document.createElement("p");y.className="contact-note",y.textContent=d.note,m.appendChild(y)}f.appendChild(m),u.appendChild(f)}n.appendChild(u),t.appendChild(n)}function _0(i,e){const n=e.each(i,me("type"),null,null).map(a=>a.value);return!!(n.includes(we("AddressBook").value)||n.includes(we("Group").value)||e.match(i,we("hasMember"),null,null).length>0)}const k0={label:"Contacts",icon:"📇",canHandle(i,e){return _0(i,e)},render(i,e,t){D0(i,e,t)}};Be(k0);function An(i,e,t,n=!1){if(!t)return;const a=document.createElement("div");a.className="org-detail";const s=document.createElement("span");if(s.className="org-label",s.textContent=e,a.appendChild(s),n&&(t.startsWith("http://")||t.startsWith("https://"))){const r=document.createElement("a");r.href=t,r.textContent=fe(t),r.target="_blank",r.rel="noopener",a.appendChild(r)}else if(n&&t.startsWith("mailto:")){const r=document.createElement("a");r.href=t,r.textContent=t.replace("mailto:",""),a.appendChild(r)}else{const r=document.createElement("span");r.className="org-value",r.textContent=t,a.appendChild(r)}i.appendChild(a)}function S0(i,e,t){t.innerHTML="";const n=document.createElement("div");n.className="org-card";const a=e.any(i,B("logo"),null,null)?.value??e.any(i,be("logo"),null,null)?.value??e.any(i,be("img"),null,null)?.value;if(a){const R=document.createElement("img");R.className="org-logo",R.src=a,R.alt="Organization logo",n.appendChild(R)}const s=e.any(i,B("name"),null,null)?.value??e.any(i,be("name"),null,null)?.value??e.any(i,he("title"),null,null)?.value??fe(i.value),r=document.createElement("h2");r.className="org-name",r.textContent=s,n.appendChild(r);const l=e.any(i,B("description"),null,null)?.value??e.any(i,he("description"),null,null)?.value;if(l){const R=document.createElement("p");R.className="org-description",R.textContent=l,n.appendChild(R)}const o=document.createElement("div");o.className="org-details";const u=e.any(i,B("url"),null,null)?.value;An(o,"Website",u,!0);const d=e.any(i,B("email"),null,null)?.value;An(o,"Email",d,!0);const f=e.any(i,B("telephone"),null,null)?.value;An(o,"Phone",f);const m=e.any(i,B("address"),null,null);if(m){const R=e.any(m,B("streetAddress"),null,null)?.value,Z=e.any(m,B("addressLocality"),null,null)?.value,Y=e.any(m,B("addressRegion"),null,null)?.value,N=e.any(m,B("addressCountry"),null,null)?.value;if(R||Z){const j=[R,Z,Y,N].filter(Boolean);An(o,"Address",j.join(", "))}else An(o,"Address",m.value)}const w=e.any(i,B("foundingDate"),null,null)?.value;An(o,"Founded",w);const y=e.any(i,B("numberOfEmployees"),null,null)?.value;An(o,"Employees",y),n.appendChild(o);const C=e.each(i,B("member"),null,null),T=e.each(i,B("employee"),null,null),L=[...C,...T];if(L.length>0){const R=document.createElement("div");R.className="org-people";const Z=document.createElement("h3");Z.textContent=`People (${L.length})`,R.appendChild(Z);const Y=document.createElement("ul");Y.className="org-people-list";for(const N of L){const j=e.any(N,B("name"),null,null)?.value??e.any(N,be("name"),null,null)?.value??fe(N.value),$=document.createElement("li"),G=tn(N.value,j);G.title=N.value,$.appendChild(G),Y.appendChild($)}R.appendChild(Y),n.appendChild(R)}t.appendChild(n)}const I0=[B("Organization"),B("Corporation"),B("GovernmentOrganization"),B("NGO"),B("EducationalOrganization"),B("LocalBusiness"),be("Organization"),be("Group")];function B0(i,e){const n=e.each(i,me("type"),null,null).map(a=>a.value);for(const a of I0)if(n.includes(a.value))return!0;return!1}const F0={label:"Organization",icon:"🏢",canHandle(i,e){return B0(i,e)},render(i,e,t){S0(i,e,t)}};Be(F0);function L0(i,e){return e.any(i,we("fn"),null,null)?.value??e.any(i,be("name"),null,null)?.value??e.any(i,B("name"),null,null)?.value??fe(i.value)}function R0(i,e){return e.any(i,we("hasPhoto"),null,null)?.value??e.any(i,be("img"),null,null)?.value??e.any(i,B("image"),null,null)?.value??e.any(i,be("depiction"),null,null)?.value??void 0}function O0(i,e){const t=e.any(i,Kt("preferredSubjectPronoun"),null,null)?.value;if(!t)return;let n=t;const a=e.any(i,Kt("preferredObjectPronoun"),null,null)?.value;if(a){n+="/"+a;const s=e.any(i,Kt("preferredRelativePronoun"),null,null)?.value;s&&(n+="/"+s)}return n}function $0(i,e){const t=e.any(i,we("hasAddress"),null,null);if(!t)return;const n=t,a=e.any(n,we("locality"),null,null)?.value,s=e.any(n,we("region"),null,null)?.value,r=e.any(n,we("country-name"),null,null)?.value,l=[a,s,r].filter(Boolean);return l.length>0?l.join(", "):void 0}function M0(i,e){const t=[],n=e.each(i,be("account"),null,null);for(const a of n){const s=a,r=e.any(s,be("name"),null,null)?.value??e.any(s,at("label"),null,null)?.value??fe(s.value),l=e.any(s,be("homepage"),null,null)?.value??s.value;t.push({name:r,uri:l})}return t}function U0(i,e){const t=[],n=e.each(i,we("hasTelephone"),null,null);for(const a of n){const s=e.any(a,we("value"),null,null)?.value;s?t.push(s):a.value.startsWith("tel:")&&t.push(a.value)}return t}function P0(i,e){const t=[],n=e.each(i,we("hasEmail"),null,null);for(const a of n){const s=e.any(a,we("value"),null,null)?.value;s?t.push(s):a.value.startsWith("mailto:")&&t.push(a.value)}if(t.length===0){const a=e.any(i,be("mbox"),null,null)?.value;a&&t.push(a)}return t}function q0(i,e){const t=e.each(null,Wi("member"),i,null),n=[],a=[];for(const s of t){const r=s,l=e.any(r,Wi("organization"),null,null),o=l?e.any(l,B("name"),null,null)?.value??e.any(l,be("name"),null,null)?.value??fe(l.value):"",u=e.any(r,Wi("role"),null,null),d=e.any(r,we("role"),null,null)?.value,f=u?e.any(u,B("name"),null,null)?.value:void 0,m=d&&f?`${f} - ${d}`:d||f||"",w=e.any(r,B("startDate"),null,null)?.value,y=e.any(r,B("endDate"),null,null)?.value,C=w?`${w.slice(0,10)} – ${y?y.slice(0,10):"present"}`:"",T={orgName:o,roleText:m,dates:C};e.holds(r,me("type"),Kt("PastRole"))?a.push(T):n.push(T)}return{current:n,past:a}}function zn(i){return i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function un(i,e,t,n=!1){if(!t)return;const a=document.createElement("div");a.className="profile-detail";const s=document.createElement("span");if(s.className="profile-label",s.textContent=e,a.appendChild(s),n&&(t.startsWith("http://")||t.startsWith("https://"))){const r=document.createElement("a");r.href=t,r.textContent=fe(t),r.target="_blank",r.rel="noopener",a.appendChild(r)}else if(n&&t.startsWith("mailto:")){const r=document.createElement("a");r.href=t,r.textContent=t.replace("mailto:",""),a.appendChild(r)}else if(n&&t.startsWith("tel:")){const r=document.createElement("a");r.href=t,r.textContent=t.replace("tel:",""),a.appendChild(r)}else{const r=document.createElement("span");r.className="profile-value",r.textContent=t,a.appendChild(r)}i.appendChild(a)}const wl=[{label:"Name",predicate:we("fn")},{label:"Nickname",predicate:be("nick")},{label:"Photo URL",predicate:we("hasPhoto"),inputType:"url"},{label:"Role",predicate:we("role")},{label:"Organization",predicate:we("organization-name")},{label:"Bio",predicate:we("note")}];function ui(i,e,t){t.innerHTML="";const n=e.updater,a=e.fetcher,s=!!(n&&a),r=document.createElement("div");if(r.className="profile-card",s){const P=document.createElement("div");P.className="profile-edit-row";const q=document.createElement("button");q.className="profile-edit-btn",q.textContent="Edit",q.addEventListener("click",()=>{H0(i,e,t,n)}),P.appendChild(q),r.appendChild(P)}const l=R0(i,e);if(l){const P=document.createElement("img");P.className="profile-photo",P.src=l,P.alt="Profile photo",r.appendChild(P)}const o=L0(i,e),u=document.createElement("h2");u.className="profile-name",u.textContent=o,r.appendChild(u);const d=O0(i,e);if(d){const P=document.createElement("p");P.className="profile-pronouns",P.textContent=d,r.appendChild(P)}const f=e.any(i,be("nick"),null,null)?.value;if(f){const P=document.createElement("p");P.className="profile-nick",P.textContent=`@${f}`,r.appendChild(P)}const m=$0(i,e);if(m){const P=document.createElement("p");P.className="profile-location",P.textContent=m,r.appendChild(P)}const w=document.createElement("p");w.className="profile-webid";const y=document.createElement("a");y.href=i.value,y.textContent=i.value,y.target="_blank",y.rel="noopener",w.appendChild(y),r.appendChild(w);const C=document.createElement("div");C.className="profile-details";const T=e.any(i,we("role"),null,null)?.value,L=e.any(i,we("organization-name"),null,null)?.value;T&&L?un(C,"Role",`${T}, ${L}`):(un(C,"Role",T),un(C,"Organization",L)),un(C,"Birthday",e.any(i,we("bday"),null,null)?.value);const R=e.any(i,we("note"),null,null)?.value??e.any(i,be("bio"),null,null)?.value;un(C,"About",R?.trim());const Z=P0(i,e);for(const P of Z)un(C,"Email",P,!0);const Y=U0(i,e);for(const P of Y)un(C,"Phone",P,!0);const N=e.any(i,be("homepage"),null,null)?.value;un(C,"Homepage",N,!0);const j=e.any(i,Jn("storage"),null,null)?.value;un(C,"Pod",j,!0),r.appendChild(C);const{current:$,past:G}=q0(i,e);if($.length>0||G.length>0){const P=document.createElement("div");P.className="profile-roles";const q=document.createElement("h3");if(q.textContent="Experience",P.appendChild(q),$.length>0){const ee=document.createElement("h4");ee.className="profile-roles-subheader",ee.textContent="Current",P.appendChild(ee);for(const J of $){const _=document.createElement("div");_.className="profile-role-item";let V=`<strong class="profile-role-org">${zn(J.orgName)}</strong>`;J.roleText&&(V+=` <span class="profile-role-title">${zn(J.roleText)}</span>`),J.dates&&(V+=` <span class="profile-role-dates">${zn(J.dates)}</span>`),_.innerHTML=V,P.appendChild(_)}}if(G.length>0){const ee=document.createElement("h4");ee.className="profile-roles-subheader",ee.textContent="Past",P.appendChild(ee);for(const J of G){const _=document.createElement("div");_.className="profile-role-item";let V=`<strong class="profile-role-org">${zn(J.orgName)}</strong>`;J.roleText&&(V+=` <span class="profile-role-title">${zn(J.roleText)}</span>`),J.dates&&(V+=` <span class="profile-role-dates">${zn(J.dates)}</span>`),_.innerHTML=V,P.appendChild(_)}}r.appendChild(P)}const F=M0(i,e);if(F.length>0){const P=document.createElement("div");P.className="profile-social";const q=document.createElement("h3");q.textContent="Social Accounts",P.appendChild(q);const ee=document.createElement("ul");ee.className="profile-social-list";for(const J of F){const _=document.createElement("li"),V=document.createElement("a");V.href=J.uri,V.textContent=J.name,V.target="_blank",V.rel="noopener noreferrer",_.appendChild(V),ee.appendChild(_)}P.appendChild(ee),r.appendChild(P)}const H=e.each(i,be("knows"),null,null);if(H.length>0){const P=document.createElement("div");P.className="profile-friends";const q=document.createElement("h3");q.textContent=`Contacts (${H.length})`,P.appendChild(q);const ee=document.createElement("ul");ee.className="profile-friends-list";for(const J of H){const _=document.createElement("li"),V=tn(J.value,fe(J.value));V.title=J.value,_.appendChild(V),ee.appendChild(_)}P.appendChild(ee),r.appendChild(P)}t.appendChild(r)}function H0(i,e,t,n){t.innerHTML="";const a=document.createElement("div");a.className="profile-edit-form";const s=document.createElement("h2");s.textContent="Edit Profile",a.appendChild(s);const r=new Map;for(const f of wl){const m=e.any(i,f.predicate,null,null)?.value??"",w=document.createElement("div");w.className="profile-field-group";const y=document.createElement("label");y.textContent=f.label,w.appendChild(y);let C;f.label==="Bio"?(C=document.createElement("textarea"),C.rows=3):(C=document.createElement("input"),C.type=f.inputType??"text"),C.className="profile-field-input",C.value=m,w.appendChild(C),r.set(f,C),a.appendChild(w)}const l=document.createElement("div");l.className="profile-edit-actions";const o=document.createElement("button");o.className="profile-save-btn",o.textContent="Save";const u=document.createElement("button");u.className="profile-cancel-btn",u.textContent="Cancel",l.appendChild(o),l.appendChild(u),a.appendChild(l);const d=document.createElement("p");d.className="profile-edit-status",a.appendChild(d),t.appendChild(a),u.addEventListener("click",()=>{ui(i,e,t)}),o.addEventListener("click",async()=>{o.disabled=!0,u.disabled=!0,d.textContent="Saving...",d.className="profile-edit-status";try{const f=[],m=[],w=i.doc();for(const y of wl){const T=r.get(y).value.trim(),L=e.any(i,y.predicate,null,null);if(L&&T&&L.value!==T){const R=e.match(i,y.predicate,L,w);R.length>0&&f.push(R[0]),m.push(new Pt(i,y.predicate,Ws(T),w))}else if(L&&!T){const R=e.match(i,y.predicate,L,w);R.length>0&&f.push(R[0])}else!L&&T&&m.push(new Pt(i,y.predicate,Ws(T),w))}if(f.length===0&&m.length===0){ui(i,e,t);return}await new Promise((y,C)=>{n.update(f,m,(T,L,R)=>{L?y():C(new Error(R??"Update failed"))})}),d.textContent="Saved!",d.className="profile-edit-status profile-edit-status-ok",setTimeout(()=>ui(i,e,t),800)}catch(f){const m=f instanceof Error?f.message:String(f);d.textContent=`Save failed: ${m}`,d.className="profile-edit-status profile-edit-status-error",o.disabled=!1,u.disabled=!1}})}function z0(i,e){const n=e.each(i,me("type"),null,null).map(a=>a.value);return!!(n.includes(be("Person").value)||n.includes(B("Person").value)||n.includes(we("Individual").value)||e.any(i,be("name"),null,null)||e.any(i,we("fn"),null,null))}const j0={label:"Profile",icon:"👤",canHandle(i,e){return z0(i,e)},render(i,e,t){ui(i,e,t)}};Be(j0);const kt=new nd;let Fn=to();function Bo(){const i=kt.isActive?kt.authFetch.bind(kt):void 0;Fn=to(i?{fetch:i}:void 0)}function V0(i,e,t,n){const{store:a}=Fn;n.innerHTML="",i.length<=1?n.hidden=!0:n.hidden=!1;for(let s=0;s<i.length;s++){const r=i[s],l=document.createElement("button");l.className="pane-tab",l.role="tab",l.textContent=`${r.icon} ${r.label}`,l.setAttribute("aria-selected",s===0?"true":"false"),l.addEventListener("click",()=>{for(const o of n.children)o.setAttribute("aria-selected","false");l.setAttribute("aria-selected","true"),t.innerHTML="",r.render(e,a,t)}),n.appendChild(l)}t.innerHTML="",i[0].render(e,a,t)}let ci=null,Qn=null,hi=null;function Fo(i,e,t){Lo();let n;try{n=new URL(i).origin}catch{return}const a=n.replace(/^http/,"ws");Qn=i;try{const s=new WebSocket(a);ci=s,s.addEventListener("open",()=>{s.send(`sub ${i}`)}),s.addEventListener("message",r=>{const l=String(r.data);l.startsWith("pub")&&l.includes(i)&&G0(i,e,t)}),s.addEventListener("close",()=>{Qn===i&&(hi=setTimeout(()=>{Qn===i&&Fo(i,e,t)},5e3))}),s.addEventListener("error",()=>{s.close()})}catch{}}function Lo(){hi&&(clearTimeout(hi),hi=null),ci&&(Qn=null,ci.close(),ci=null)}async function G0(i,e,t){const a=t.querySelector('.pane-tab[aria-selected="true"]')?.textContent??"";try{await Fn.fetcher.load(Zn(i),{force:!0});const s=Zn(Qn?.includes("#")?Qn:i),r=no(s,Fn.store);if(r.length===0)return;const l=r.findIndex(u=>`${u.icon} ${u.label}`===a),o=l>=0?r[l]:r[0];e.innerHTML="",o.render(s,Fn.store,e)}catch{}}async function La(i,e,t){e.innerHTML='<p class="loading">Loading...</p>',t.innerHTML="",t.hidden=!0,Lo();try{await Fn.fetchDocument(i);const n=Zn(i),a=no(n,Fn.store);if(a.length===0){e.innerHTML=`
        <div class="error">
          <p><strong>No pane available</strong> for this resource.</p>
          <p>URI: <code>${El(i)}</code></p>
          <p>The resource was fetched successfully, but no registered pane
          knows how to display it.</p>
        </div>
      `;return}V0(a,n,e,t);const s=i.replace(/#.*$/,"");Fo(s,e,t)}catch(n){const a=n instanceof Error?n.message:String(n);e.innerHTML=`
      <div class="error">
        <p><strong>Failed to load resource</strong></p>
        <p>${El(a)}</p>
      </div>
    `}}async function X0(){try{await kt.handleRedirectFromLogin()}catch{}try{await kt.restore()}catch{}kt.isActive&&Bo()}function W0(){Bo()}function El(i){return i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}const Q0=document.getElementById("url-form"),Kn=document.getElementById("url-input"),Ci=document.getElementById("pane-container"),Ra=document.getElementById("pane-tabs"),ma=document.getElementById("login-btn"),ga=document.getElementById("logout-btn"),gr=document.getElementById("user-info");async function bi(i,e){if(Kn.value=i,e){const t=new URL(window.location.href);t.searchParams.set("uri",i),window.history.pushState({uri:i},"",t.toString())}await La(i,Ci,Ra)}function Ro(){kt.isActive?(ma.hidden=!0,ga.hidden=!1,gr.hidden=!1,gr.textContent=kt.webId?fe(kt.webId):"Logged in",gr.title=kt.webId??""):(ma.hidden=!1,ga.hidden=!0,gr.hidden=!0,gr.textContent="")}kt.addEventListener("sessionStateChange",()=>{W0(),Ro();const i=Kn.value.trim();i&&La(i,Ci,Ra)});ma.addEventListener("click",()=>{const i=prompt("Solid identity provider:","https://solidcommunity.net");i&&kt.login(i,window.location.href)});ga.addEventListener("click",()=>{kt.logout()});Q0.addEventListener("submit",i=>{i.preventDefault();const e=Kn.value.trim();e&&bi(e,!0)});window.addEventListener(so,(i=>{const e=i.detail.uri;e&&bi(e,!0)}));window.addEventListener("popstate",()=>{const e=new URLSearchParams(window.location.search).get("uri");e?bi(e,!1):(Kn.value="",Ci.innerHTML='<p class="placeholder">Enter a URL above to browse a Linked Data resource.</p>')});document.querySelectorAll(".quick-link").forEach(i=>{i.addEventListener("click",e=>{e.preventDefault();const t=i.href,a=new URL(t).searchParams.get("uri");a&&bi(a,!0)})});async function Y0(){await X0(),Ro();const e=new URLSearchParams(window.location.search).get("uri")||Kn.value.trim();e&&(Kn.value=e,window.history.replaceState({uri:e},"",window.location.href),La(e,Ci,Ra))}Y0();export{Gr as c,_l as g};
