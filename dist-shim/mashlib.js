(function(){"use strict";function oh(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in n)){const s=Object.getOwnPropertyDescriptor(r,a);s&&Object.defineProperty(n,a,s.get?s:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}function Vr(n){"@babel/helpers - typeof";return Vr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vr(n)}function uh(n,e){if(Vr(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Vr(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ch(n){var e=uh(n,"string");return Vr(e)=="symbol"?e:e+""}function Re(n,e,t){return(e=ch(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}const an={Literal:1,Collection:3,Graph:4,NamedNode:5,BlankNode:6,Variable:7};let lt=class{constructor(e){Re(this,"termType",void 0),Re(this,"classOrder",void 0),Re(this,"value",void 0),this.value=e}substitute(e){return this}compareTerm(e){return this.classOrder<e.classOrder?-1:this.classOrder>e.classOrder?1:this.value<e.value?-1:this.value>e.value?1:0}equals(e){return e?this.termType===e.termType&&this.value===e.value:!1}hashString(){return this.toCanonical()}sameTerm(e){return this.equals(e)}toCanonical(){return this.toNT()}toNT(){return this.toString()}toNQ(){return this.toNT()}toString(){throw new Error("Node.toString() is abstract - see the subclasses instead")}};Re(lt,"fromValue",void 0),Re(lt,"toJS",void 0);const Xn="NamedNode",Qn="BlankNode",_r="Literal",$n="Variable",Yn="DefaultGraph",qn="Collection",yo="Empty",zr="Graph",wo="text/html",Sa="application/ld+json",vo="text/n3",dh="application/n3",Da="application/nquads",Ia="application/n-quads",fh="application/n-triples",Gr="application/rdf+xml",hh="application/sparql-update",ph="application/sparql-update-single-match",Zn="text/turtle",mh="application/x-turtle",Ra="application/xhtml+xml";let sn=class Hr extends lt{static getId(e){if(e){if(typeof e!="string")throw new Error("Bad id argument to new blank node: "+e);if(e.includes("#")){let t=e.split("#");return t[t.length-1]}return e}return"n"+Hr.nextId++}constructor(e){super(Hr.getId(e)),Re(this,"termType",Qn),Re(this,"classOrder",an.BlankNode),Re(this,"isBlank",1),Re(this,"isVar",1)}get id(){return this.value}set id(e){this.value=e}compareTerm(e){return this.classOrder<e.classOrder?-1:this.classOrder>e.classOrder?1:this.id<e.id?-1:this.id>e.id?1:0}copy(e){var t=new Hr;return e.copyTo(this,t),t}toCanonical(){return Hr.NTAnonymousNodePrefix+this.value}toString(){return Hr.NTAnonymousNodePrefix+this.id}};Re(sn,"nextId",0),Re(sn,"NTAnonymousNodePrefix","_:");function er(n){return typeof n=="string"?n:n.value}function gh(n){return typeof n=="object"&&n!==null&&"subject"in n}function Ci(n){return typeof n=="object"&&n!==null&&"statements"in n}function ka(n){return ln(n)&&n.termType===qn}function yh(n){return n&&Object.prototype.hasOwnProperty.call(n,"termType")&&(n.termType===Xn||n.termType===$n||n.termType===Qn||n.termType===qn||n.termType===_r||n.termType===zr)}function wh(n){return n&&Object.prototype.hasOwnProperty.call(n,"termType")&&(n.termType===Xn||n.termType===$n||n.termType===Qn||n.termType===qn||n.termType===_r||n.termType===zr)}function vh(n){return ln(n)&&(n.termType===Xn||n.termType===Qn||n.termType===$n)}function bh(n){return ln(n)&&n.termType===$n}function ln(n){return typeof n=="object"&&n!==null&&"termType"in n}function bo(n){return n.termType===_r}function Cr(n){return typeof n=="object"&&n!==null&&"subject"in n&&"predicate"in n&&"object"in n}function Eo(n){return ln(n)&&n.termType==="NamedNode"}function Eh(n){return ln(n)&&"termType"in n&&n.termType==="BlankNode"}function xh(n){return ln(n)&&(n.termType===Xn||n.termType===$n||n.termType===Qn||n.termType===Yn)}let St=class Wr extends lt{constructor(e){if(super(er(e)),Re(this,"termType",Xn),Re(this,"classOrder",an.NamedNode),!this.value)throw new Error("Missing IRI for NamedNode");if(!this.value.includes(":"))throw new Error('NamedNode IRI "'+e+'" must be absolute.');if(this.value.includes(" ")){var t='Error: NamedNode IRI "'+e+'" must not contain unencoded spaces.';throw new Error(t)}}dir(){var e=this.value.split("#")[0],t=e.slice(0,-1).lastIndexOf("/"),r=e.indexOf("//");return r>=0&&t<r+2||t<0?null:new Wr(e.slice(0,t+1))}site(){var e=this.value.split("#")[0],t=e.indexOf("//");if(t<0)throw new Error("This URI does not have a web site part (origin)");var r=e.indexOf("/",t+2);return r<0?new Wr(e.slice(0)+"/"):new Wr(e.slice(0,r+1))}doc(){return this.value.indexOf("#")<0?this:new Wr(this.value.split("#")[0])}toString(){return"<"+this.value+">"}id(){return this.value.split("#")[1]}get uri(){return this.value}set uri(e){this.value=e}static fromValue(e){return typeof e>"u"||e===null||ln(e)?e:new Wr(e)}};const Nn={boolean:new St("http://www.w3.org/2001/XMLSchema#boolean"),dateTime:new St("http://www.w3.org/2001/XMLSchema#dateTime"),decimal:new St("http://www.w3.org/2001/XMLSchema#decimal"),double:new St("http://www.w3.org/2001/XMLSchema#double"),integer:new St("http://www.w3.org/2001/XMLSchema#integer"),langString:new St("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),string:new St("http://www.w3.org/2001/XMLSchema#string")};let on=class An extends lt{constructor(e,t,r){super(e),Re(this,"termType",_r),Re(this,"classOrder",an.Literal),Re(this,"datatype",Nn.string),Re(this,"isVar",0),Re(this,"language",""),t?(this.language=t,this.datatype=Nn.langString):r?this.datatype=St.fromValue(r):this.datatype=Nn.string}copy(){return new An(this.value,this.lang,this.datatype)}equals(e){return e?this.termType===e.termType&&this.value===e.value&&this.language===e.language&&(!this.datatype&&!e.datatype||this.datatype&&this.datatype.equals(e.datatype)):!1}get lang(){return this.language}set lang(e){this.language=e||""}toNT(){return An.toNT(this)}static toNT(e){if(typeof e.value=="number")return""+e.value;if(typeof e.value!="string")throw new Error("Value of RDF literal is not string or number: "+e.value);var t=e.value;return t=t.replace(/\\/g,"\\\\"),t=t.replace(/\"/g,'\\"'),t=t.replace(/\n/g,"\\n"),t=t.replace(/\r/g,"\\r"),t='"'+t+'"',e.language?t+="@"+e.language:e.datatype.equals(Nn.string)||(t+="^^"+e.datatype.toCanonical()),t}toString(){return""+this.value}static fromBoolean(e){let t=e?"1":"0";return new An(t,null,Nn.boolean)}static fromDate(e){if(!(e instanceof Date))throw new TypeError("Invalid argument to Literal.fromDate()");let t=function(a){return(""+(100+a)).slice(1,3)},r=""+e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"Z";return new An(r,null,Nn.dateTime)}static fromNumber(e){if(typeof e!="number")throw new TypeError("Invalid argument to Literal.fromNumber()");let t;const r=e.toString();return r.indexOf("e")<0&&Math.abs(e)<=Number.MAX_SAFE_INTEGER?t=Number.isInteger(e)?Nn.integer:Nn.decimal:t=Nn.double,new An(r,null,t)}static fromValue(e){if(bo(e))return e;switch(typeof e){case"object":if(e instanceof Date)return An.fromDate(e);case"boolean":return An.fromBoolean(e);case"number":return An.fromNumber(e);case"string":return new An(e)}throw new Error("Can't make literal from "+e+" of type "+typeof e)}};function xo(n){return typeof n>"u"||n===null||ln(n)?n:Array.isArray(n)?new Qt(n):on.fromValue(n)}class Qt extends lt{constructor(e){super((sn.nextId++).toString()),Re(this,"termType",qn),Re(this,"classOrder",an.Collection),Re(this,"closed",!1),Re(this,"compareTerm",sn.prototype.compareTerm),Re(this,"elements",[]),Re(this,"isVar",0),e&&e.length>0&&e.forEach(t=>{this.elements.push(xo(t))})}get id(){return this.value}set id(e){this.value=e}append(e){return this.elements.push(e)}close(){return this.closed=!0,this.closed}shift(){return this.elements.shift()}substitute(e){const t=this.elements.map(r=>r.substitute(e));return new Qt(t)}toNT(){return Qt.toNT(this)}static toNT(e){return sn.NTAnonymousNodePrefix+e.id}toString(){return"("+this.elements.join(" ")+")"}unshift(e){return this.elements.unshift(e)}}Re(Qt,"termType",qn);const Jr="chrome:theSession";new St(Jr);let La=class extends lt{constructor(){super(""),Re(this,"value",""),Re(this,"termType",Yn),Re(this,"uri",Jr)}toCanonical(){return this.value}toString(){return"DefaultGraph"}};function _o(n){return!!n&&n.termType===Yn}const _h=new La;class Yt{constructor(e,t,r,a){Re(this,"subject",void 0),Re(this,"predicate",void 0),Re(this,"object",void 0),Re(this,"graph",void 0),this.subject=lt.fromValue(e),this.predicate=lt.fromValue(t),this.object=lt.fromValue(r),this.graph=a==null?_h:lt.fromValue(a)}get why(){return this.graph}set why(e){this.graph=e}equals(e){return e.subject.equals(this.subject)&&e.predicate.equals(this.predicate)&&e.object.equals(this.object)&&e.graph.equals(this.graph)}substitute(e){return new Yt(this.subject.substitute(e),this.predicate.substitute(e),this.object.substitute(e),_o(this.graph)?this.graph:this.graph.substitute(e))}toCanonical(){let e=[this.subject.toCanonical(),this.predicate.toCanonical(),this.object.toCanonical()];return this.graph&&this.graph.termType!==Yn&&e.push(this.graph.toCanonical()),e.join(" ")+" ."}toNT(){return[this.subject.toNT(),this.predicate.toNT(),this.object.toNT()].join(" ")+" ."}toNQ(){return[this.subject.toNT(),this.predicate.toNT(),this.object.toNT(),_o(this.graph)?"":this.graph.toNT()].join(" ")+" ."}toString(){return this.toNT()}}var Co=Co||console.log;function tr(n){var e;return e=n.indexOf("#"),e<0?n:n.slice(0,e)}function Ch(n){var e=/[^\/]*\/\/([^\/]*)\//.exec(n);return e?e[1]:""}function Ft(n,e){var t,r,a,s,i,l,o=e.indexOf("#");if(o>0&&(e=e.slice(0,o)),n.length===0)return e;if(n.indexOf("#")===0)return e+n;if(s=n.indexOf(":"),s>=0||(t=e.indexOf(":"),e.length===0))return n;if(t<0)return Co("Invalid base: "+e+" in join with given: "+n),n;if(r=e.slice(0,+t+1||9e9),n.indexOf("//")===0)return r+n;if(e.indexOf("//",t)===t+1){if(a=e.indexOf("/",t+3),a<0)return e.length-t-3>0?e+"/"+n:r+n}else if(a=e.indexOf("/",t+1),a<0)return e.length-t-1>0?e+"/"+n:r+n;if(n.indexOf("/")===0)return e.slice(0,a)+n;if(l=e.slice(a),i=l.lastIndexOf("/"),i<0)return r+n;for(i>=0&&i<l.length-1&&(l=l.slice(0,+i+1||9e9)),l+=n;l.match(/[^\/]*\/\.\.\//);)l=l.replace(/[^\/]*\/\.\.\//,"");return l=l.replace(/\.\//g,""),l=l.replace(/\/\.$/,"/"),e.slice(0,a)+l}function Ao(n){const e=n.indexOf(":");return e<0?null:n.slice(0,e)}function Oa(n,e){var t,r,a,s,i,l,o,u,c,f,d,g,m,v=new RegExp("^[-_a-zA-Z0-9.]+:(//[^/]*)?/[^/]*$");if(!n)return e;if(n===e)return"";for(r=u=0,i=e.length;u<i&&e[r]===n[r];r=++u);if(n.slice(0,r).match(v)&&(a=e.indexOf("//"),a<0&&(a=-2),s=e.indexOf("/",a+2),e[s+1]!=="/"&&n[s+1]!=="/"&&e.slice(0,s)===n.slice(0,s)))return e.slice(s);if(e[r]==="#"&&n.length===r)return e.slice(r);for(;r>0&&e[r-1]!=="/";)r--;if(r<3||n.indexOf("//",r-2)>0||e.indexOf("//",r-2)>0||n.indexOf(":",r)>0)return e;for(o=0,d=n.slice(r),c=0,l=d.length;c<l;c++)t=d[c],t==="/"&&o++;if(o===0&&r<e.length&&e[r]==="#")return"./"+e.slice(r);if(o===0&&r===e.length)return"./";if(m="",o>0)for(f=1,g=o;g>=1?f<=g:f>=g;g>=1?++f:--f)m+="../";return m+e.slice(r)}let nr=class sh extends lt{constructor(e=""){super(e),Re(this,"termType",$n),Re(this,"base","varid:"),Re(this,"classOrder",an.Variable),Re(this,"isVar",1),Re(this,"uri",void 0),this.base="varid:",this.uri=Ft(e,this.base)}equals(e){return e?this.termType===e.termType&&this.value===e.value:!1}hashString(){return this.toString()}substitute(e){var t;return(t=e[this.toNT()])!=null?t:this}toString(){return sh.toString(this)}static toString(e){return e.uri.slice(0,e.base.length)===e.base?`?${e.uri.slice(e.base.length)}`:`?${e.uri}`}},Bt=(function(n){return n.collections="COLLECTIONS",n.defaultGraphType="DEFAULT_GRAPH_TYPE",n.equalsMethod="EQUALS_METHOD",n.id="ID",n.identity="IDENTITY",n.reversibleId="REVERSIBLE_ID",n.variableType="VARIABLE_TYPE",n})({});const No=new La,Zt={supports:{[Bt.collections]:!1,[Bt.defaultGraphType]:!1,[Bt.equalsMethod]:!0,[Bt.identity]:!1,[Bt.id]:!0,[Bt.reversibleId]:!1,[Bt.variableType]:!0},blankNode(n){return new sn(n)},defaultGraph:()=>No,equals(n,e){return n===e||!n||!e?!0:Cr(n)||Cr(e)?Cr(n)&&Cr(e)?this.equals(n.subject,e.subject)&&this.equals(n.predicate,e.predicate)&&this.equals(n.object,e.object)&&this.equals(n.graph,e.graph):!1:ln(n)&&ln(e)?this.id(n)===this.id(e):!1},id(n){if(!n)return"undefined";if(Cr(n))return this.quadToNQ(n);switch(n.termType){case Yn:return"defaultGraph";case $n:return nr.toString(n);default:const e=this.termToNQ(n);if(e)return e;throw new Error(`Can't id term with type '${n.termType}'`)}},isQuad(n){return n instanceof Yt},literal(n,e){if(typeof n!="string"&&!e)return on.fromValue(n);const t=typeof n=="string"?n:""+n;return typeof e=="string"?e.indexOf(":")===-1?new on(t,e):new on(t,null,this.namedNode(e)):new on(t,null,e)},namedNode(n){return new St(n)},quad(n,e,t,r){return new Yt(n,e,t,r||No)},triple(n,e,t,r){return this.quad(n,e,t,r)},quadToNQ(n){return`${this.termToNQ(n.subject)} ${this.termToNQ(n.predicate)} ${this.termToNQ(n.object)} ${this.termToNQ(n.graph)} .`},termToNQ(n){switch(n.termType){case Qn:return"_:"+n.value;case Yn:return"";case yo:return"<http://www.w3.org/1999/02/22-rdf-syntax-ns#nil>";case _r:return on.toNT(n);case zr:case Xn:return"<"+n.value+">";case qn:return"("+n.elements.map(e=>this.termToNQ(e)).join(" ")+")";default:throw new Error(`Can't serialize nonstandard term type (was '${n.termType}')`)}},toNQ(n){return this.isQuad(n)?this.quadToNQ(n):this.termToNQ(n)},variable(n){return new nr(n)}},un={debug(n){},warn(n){},info(n){},error(n){},success(n){},msg(n){}};function We(n,e){const t=e||{namedNode:r=>new St(r)};return function(r){return t.namedNode(n+(r||""))}}var Ar=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fa(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ai={exports:{}},Ah=Ai.exports,To;function Nh(){return To||(To=1,(function(n){(function(e,t){n.exports?n.exports=t():e.ttl2jsonld=t()})(Ah,function(){function e(a,s){function i(){this.constructor=a}i.prototype=s.prototype,a.prototype=new i}function t(a,s,i,l){this.message=a,this.expected=s,this.found=i,this.location=l,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,t)}e(t,Error),t.buildMessage=function(a,s){var i={literal:function(g){return'"'+o(g.text)+'"'},class:function(g){var m="",v;for(v=0;v<g.parts.length;v++)m+=g.parts[v]instanceof Array?u(g.parts[v][0])+"-"+u(g.parts[v][1]):u(g.parts[v]);return"["+(g.inverted?"^":"")+m+"]"},any:function(g){return"any character"},end:function(g){return"end of input"},other:function(g){return g.description}};function l(g){return g.charCodeAt(0).toString(16).toUpperCase()}function o(g){return g.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(m){return"\\x0"+l(m)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(m){return"\\x"+l(m)})}function u(g){return g.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(m){return"\\x0"+l(m)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(m){return"\\x"+l(m)})}function c(g){return i[g.type](g)}function f(g){var m=new Array(g.length),v,b;for(v=0;v<g.length;v++)m[v]=c(g[v]);if(m.sort(),m.length>0){for(v=1,b=1;v<m.length;v++)m[v-1]!==m[v]&&(m[b]=m[v],b++);m.length=b}switch(m.length){case 1:return m[0];case 2:return m[0]+" or "+m[1];default:return m.slice(0,-1).join(", ")+", or "+m[m.length-1]}}function d(g){return g?'"'+o(g)+'"':"end of input"}return"Expected "+f(a)+" but "+d(s)+" found."};function r(a,s){s=s!==void 0?s:{};var i={},l={turtleDoc:Kf},o=Kf,u=function(h){var D=nt.toJSON();return D["@graph"]=[],h.filter(U=>Array.isArray(U)).forEach(U=>{U.forEach(z=>{D["@graph"].push(z)})}),D["@graph"].length===1&&(Object.assign(D,D["@graph"][0]),delete D["@graph"]),D},c="\uFEFF",f=Je("\uFEFF",!1),d=".",g=Je(".",!1),m=function(h){return h},v="#",b=Je("#",!1),_=/^[^\n]/,N=st([`
`],!0,!1),E=`
`,w=Je(`
`,!1),p=function(h){return h.join("")},S="@prefix",F=Je("@prefix",!1),A=function(h,D){return nt.addPrefix(h===""?"0":h,D),{}},k="@base",C=Je("@base",!1),L=function(h){return nt.addBase(h),{}},P=/^[Bb]/,M=st(["B","b"],!1,!1),B=/^[Aa]/,O=st(["A","a"],!1,!1),R=/^[Ss]/,H=st(["S","s"],!1,!1),j=/^[Ee]/,K=st(["E","e"],!1,!1),I=/^[Pp]/,G=st(["P","p"],!1,!1),se=/^[Rr]/,ie=st(["R","r"],!1,!1),ge=/^[Ff]/,ee=st(["F","f"],!1,!1),ae=/^[Ii]/,le=st(["I","i"],!1,!1),te=/^[Xx]/,ce=st(["X","x"],!1,!1),pe=function(h,D){var U={};return typeof h=="string"&&h!=="[]"?U["@id"]=h:typeof h=="object"&&Object.assign(U,h),D&&Object.assign(U,D),[U]},Ne=function(h,D){var U={};return h&&Object.assign(U,h),D&&Object.assign(U,D),[U]},xe=";",J=Je(";",!1),ne=function(h,D,U,z){var X={};return X[U]=z,X},ye=function(h,D,U){return U},_e=function(h,D,U){var z={};return U.unshift(Kb(h,D)),U.forEach(X=>{X&&Object.keys(X).forEach(ue=>{X[ue].forEach(fe=>{ue==="@type"&&fe["@id"]!==void 0&&(fe=fe["@id"]),z[ue]===void 0?z[ue]=fe:Array.isArray(z[ue])?z[ue].push(fe):z[ue]=[z[ue],fe]})})}),z},me=",",Ce=Je(",",!1),de=function(h,D){return D},Ae=function(h,D){return D.unshift(h),D},Se="a",be=Je("a",!1),Ve=function(){return"@type"},ht=function(h){return ho(h,!0)},Ge=function(h){return ho(h,!1)},Et=function(h){return h==="[]"?{}:{"@id":h}},q=function(h){return{"@id":h}},x="[",T=Je("[",!1),Q="]",he=Je("]",!1),Ee="(",Te=Je("(",!1),ze=")",rt=Je(")",!1),Ye=function(h){return{"@list":h}},tt=function(h,D){return{"@value":h,"@language":D}},Xe="^^",wr=Je("^^",!1),vr=function(h,D){if(D==="http://www.w3.org/2001/XMLSchema#boolean"&&h==="true")return!0;if(D==="http://www.w3.org/2001/XMLSchema#boolean"&&h==="false")return!1;if(D==="http://www.w3.org/2001/XMLSchema#integer")return parseInt(h);if(D==="http://www.w3.org/2001/XMLSchema#double")return parseFloat(h);const U=nt.resolve(D,!0);if(U){const z=D.split(":")[0];if(U==="http://www.w3.org/2001/XMLSchema#boolean"&&h==="true")return nt.decrement(z),!0;if(U==="http://www.w3.org/2001/XMLSchema#boolean"&&h==="false")return nt.decrement(z),!1;if(U==="http://www.w3.org/2001/XMLSchema#integer")return nt.decrement(z),parseInt(h);if(U==="http://www.w3.org/2001/XMLSchema#double")return nt.decrement(z),parseFloat(h)}return{"@value":h,"@type":D}},Kn="true",$=Je("true",!1),W=function(){return!0},oe="false",ve=Je("false",!1),ke=function(){return!1},V=function(h){return h+":"},Z="<",De=Je("<",!1),Ie=/^[^\0- <>"{}|\^`\\]/,Be=st([["\0"," "],"<",">",'"',"{","}","|","^","`","\\"],!0,!1),at=">",wt=Je(">",!1),Kt=function(h){const D=h.map(z=>65536<=z.codePointAt(0)&&z.codePointAt(0)<=983039?"a":z.length===1?z:z.length===6?String.fromCharCode("0x"+z.substring(2)):z.length===10?String.fromCodePoint("0x"+z.substring(2)):z).join("");if(D.match(/^[^\u0000-\u0020<>"{}|^`\\]*$/)){var U=h.join("");try{return nt.resolve(U)}catch{io("Invalid IRIREF "+U)}}else io("Invalid IRIREF "+h.join("")+" / "+D)},dt=":",gt=Je(":",!1),nn=function(h){return h=h||"0",nt.hasPrefix(h)===!1&&io("undefined prefix "+h),h},vn=function(h){return h||""},xt=function(h,D){return nt.increment(h),nt.resolve(h+":"+D)},Mn="_:",Xt=Je("_:",!1),ut=/^[0-9]/,ft=st([["0","9"]],!1,!1),Un="@",rn=Je("@",!1),Ef=/^[a-zA-Z]/,xf=st([["a","z"],["A","Z"]],!1,!1),to="-",no=Je("-",!1),ha=/^[a-zA-Z0-9]/,pa=st([["a","z"],["A","Z"],["0","9"]],!1,!1),_f=function(h,D){return"-"+D.join("")},wv=function(h,D){return h.join("")+D.join("")},ma=/^[+\-]/,ga=st(["+","-"],!1,!1),vv=function(h){return h.match(/^[0+][0-9]+$/)?{"@value":h,"@type":"http://www.w3.org/2001/XMLSchema#integer"}:parseInt(h)},bv=function(h){return{"@value":h,"@type":"http://www.w3.org/2001/XMLSchema#decimal"}},Ev=function(h){return{"@value":h,"@type":"http://www.w3.org/2001/XMLSchema#double"}},xv=/^[eE]/,_v=st(["e","E"],!1,!1),ya='"',wa=Je('"',!1),Cf=/^[^"\\\n\r]/,Af=st(['"',"\\",`
`,"\r"],!0,!1),va="'",ba=Je("'",!1),Nf=/^[^'\\\n\r]/,Tf=st(["'","\\",`
`,"\r"],!0,!1),Ea="'''",Sf=Je("'''",!1),bn=/^[^'\\]/,En=st(["'","\\"],!0,!1),xa="''",Df=Je("''",!1),If=function(h,D){return"''"+D.join("")},Rf=function(h,D){return"'"+D.join("")},kf=function(h,D){return h.join("")+D.join("")},_a='"""',Lf=Je('"""',!1),xn=/^[^"\\]/,_n=st(['"',"\\"],!0,!1),Ca='""',Of=Je('""',!1),Ff=function(h,D){return'""'+D.join("")},Bf=function(h,D){return'"'+D.join("")},Pf="\\U",Cv=Je("\\U",!1),Av=function(h){return String.fromCodePoint(parseInt(h.join(""),16))},Mf="\\u",Nv=Je("\\u",!1),Tv=function(h){return String.fromCharCode(parseInt(h.join(""),16))},Uf="\\t",Sv=Je("\\t",!1),Dv=function(){return"	"},$f="\\b",Iv=Je("\\b",!1),Rv=function(){return"\b"},qf="\\n",kv=Je("\\n",!1),Lv=function(){return`
`},jf="\\r",Ov=Je("\\r",!1),Fv=function(){return"\r"},Hf="\\f",Bv=Je("\\f",!1),Pv=function(){return"\f"},Wf='\\"',Mv=Je('\\"',!1),Uv=function(){return'"'},Vf="\\'",$v=Je("\\'",!1),qv=function(){return"'"},zf="\\\\",jv=Je("\\\\",!1),Hv=function(){return"\\"},Wv=/^[ \t\r\n]/,Vv=st([" ","	","\r",`
`],!1,!1),zv=function(){return"[]"},Gv=/^[\uD800-\uDBFF]/,Jv=st([["\uD800","\uDBFF"]],!1,!1),Kv=/^[\uDC00-\uDFFF]/,Xv=st([["\uDC00","\uDFFF"]],!1,!1),Qv=function(h,D){return h+D},Yv=/^[A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Zv=st([["A","Z"],["a","z"],["À","Ö"],["Ø","ö"],["ø","˿"],["Ͱ","ͽ"],["Ϳ","῿"],["‌","‍"],["⁰","↏"],["Ⰰ","⿯"],["、","퟿"],["豈","﷏"],["ﷰ","�"]],!1,!1),eb="_",tb=Je("_",!1),nb="·",rb=Je("·",!1),ib=/^[\u0300-\u036F]/,ab=st([["̀","ͯ"]],!1,!1),sb=/^[\u203F-\u2040]/,lb=st([["‿","⁀"]],!1,!1),Gf=function(h,D,U,z){return U.join("")+z.join("")},ob=function(h,D,U){return h+D.join("")+U.join("")},ub="%",cb=Je("%",!1),db=/^[0-9A-Fa-f]/,fb=st([["0","9"],["A","F"],["a","f"]],!1,!1),hb="\\",pb=Je("\\",!1),mb=/^[_~.!$&'()*+,;=\/?#@%\-]/,gb=st(["_","~",".","!","$","&","'","(",")","*","+",",",";","=","/","?","#","@","%","-"],!1,!1),y=0,Le=0,Aa=[{line:1,column:1}],Cn=0,ro=[],Na;if("startRule"in s){if(!(s.startRule in l))throw new Error(`Can't start parsing from rule "`+s.startRule+'".');o=l[s.startRule]}function io(h,D){throw D=D!==void 0?D:ao(Le,y),wb(h,D)}function Je(h,D){return{type:"literal",text:h,ignoreCase:D}}function st(h,D,U){return{type:"class",parts:h,inverted:D,ignoreCase:U}}function yb(){return{type:"end"}}function Jf(h){var D=Aa[h],U;if(D)return D;for(U=h-1;!Aa[U];)U--;for(D=Aa[U],D={line:D.line,column:D.column};U<h;)a.charCodeAt(U)===10?(D.line++,D.column=1):D.column++,U++;return Aa[h]=D,D}function ao(h,D){var U=Jf(h),z=Jf(D);return{start:{offset:h,line:U.line,column:U.column},end:{offset:D,line:z.line,column:z.column}}}function we(h){y<Cn||(y>Cn&&(Cn=y,ro=[]),ro.push(h))}function wb(h,D){return new t(h,null,null,D)}function vb(h,D,U){return new t(t.buildMessage(h,D),h,D,U)}function Kf(){var h,D,U,z,X;for(h=y,D=[],U=Xf();U!==i;)D.push(U),U=Xf();if(D!==i){for(U=[],z=Qf();z!==i;)U.push(z),z=Qf();if(U!==i){for(z=[],X=Oe();X!==i;)z.push(X),X=Oe();z!==i?(Le=h,D=u(U),h=D):(y=h,h=i)}else y=h,h=i}else y=h,h=i;return h}function Xf(){var h;return a.charCodeAt(y)===65279?(h=c,y++):(h=i,we(f)),h}function Qf(){var h,D,U,z;if(h=Eb(),h===i)if(h=y,D=Nb(),D!==i){for(U=[],z=Oe();z!==i;)U.push(z),z=Oe();U!==i?(a.charCodeAt(y)===46?(z=d,y++):(z=i,we(g)),z!==i?(Le=h,D=m(D),h=D):(y=h,h=i)):(y=h,h=i)}else y=h,h=i;return h}function bb(){var h,D,U,z;if(h=y,a.charCodeAt(y)===35?(D=v,y++):(D=i,we(b)),D!==i){for(U=[],_.test(a.charAt(y))?(z=a.charAt(y),y++):(z=i,we(N));z!==i;)U.push(z),_.test(a.charAt(y))?(z=a.charAt(y),y++):(z=i,we(N));U!==i?(a.charCodeAt(y)===10?(z=E,y++):(z=i,we(w)),z!==i?(Le=h,D=p(U),h=D):(y=h,h=i)):(y=h,h=i)}else y=h,h=i;return h}function Oe(){var h;return h=Wb(),h===i&&(h=bb()),h}function Eb(){var h;return h=xb(),h===i&&(h=_b(),h===i&&(h=Ab(),h===i&&(h=Cb()))),h}function xb(){var h,D,U,z,X,ue,fe,Y,Pe;for(h=y,D=[],U=Oe();U!==i;)D.push(U),U=Oe();if(D!==i)if(a.substr(y,7)===S?(U=S,y+=7):(U=i,we(F)),U!==i){for(z=[],X=Oe();X!==i;)z.push(X),X=Oe();if(z!==i)if(X=nh(),X!==i){for(ue=[],fe=Oe();fe!==i;)ue.push(fe),fe=Oe();if(ue!==i)if(fe=_i(),fe!==i){for(Y=[],Pe=Oe();Pe!==i;)Y.push(Pe),Pe=Oe();Y!==i?(a.charCodeAt(y)===46?(Pe=d,y++):(Pe=i,we(g)),Pe!==i?(Le=h,D=A(X,fe),h=D):(y=h,h=i)):(y=h,h=i)}else y=h,h=i;else y=h,h=i}else y=h,h=i;else y=h,h=i}else y=h,h=i;else y=h,h=i;return h}function _b(){var h,D,U,z,X,ue,fe;for(h=y,D=[],U=Oe();U!==i;)D.push(U),U=Oe();if(D!==i)if(a.substr(y,5)===k?(U=k,y+=5):(U=i,we(C)),U!==i){for(z=[],X=Oe();X!==i;)z.push(X),X=Oe();if(z!==i)if(X=_i(),X!==i){for(ue=[],fe=Oe();fe!==i;)ue.push(fe),fe=Oe();ue!==i?(a.charCodeAt(y)===46?(fe=d,y++):(fe=i,we(g)),fe!==i?(Le=h,D=L(X),h=D):(y=h,h=i)):(y=h,h=i)}else y=h,h=i;else y=h,h=i}else y=h,h=i;else y=h,h=i;return h}function Cb(){var h,D,U,z,X,ue,fe,Y;for(h=y,D=[],U=Oe();U!==i;)D.push(U),U=Oe();if(D!==i)if(P.test(a.charAt(y))?(U=a.charAt(y),y++):(U=i,we(M)),U!==i)if(B.test(a.charAt(y))?(z=a.charAt(y),y++):(z=i,we(O)),z!==i)if(R.test(a.charAt(y))?(X=a.charAt(y),y++):(X=i,we(H)),X!==i)if(j.test(a.charAt(y))?(ue=a.charAt(y),y++):(ue=i,we(K)),ue!==i){for(fe=[],Y=Oe();Y!==i;)fe.push(Y),Y=Oe();fe!==i?(Y=_i(),Y!==i?(Le=h,D=L(Y),h=D):(y=h,h=i)):(y=h,h=i)}else y=h,h=i;else y=h,h=i;else y=h,h=i;else y=h,h=i;else y=h,h=i;return h}function Ab(){var h,D,U,z,X,ue,fe,Y,Pe,it,Er,xr;for(h=y,D=[],U=Oe();U!==i;)D.push(U),U=Oe();if(D!==i)if(I.test(a.charAt(y))?(U=a.charAt(y),y++):(U=i,we(G)),U!==i)if(se.test(a.charAt(y))?(z=a.charAt(y),y++):(z=i,we(ie)),z!==i)if(j.test(a.charAt(y))?(X=a.charAt(y),y++):(X=i,we(K)),X!==i)if(ge.test(a.charAt(y))?(ue=a.charAt(y),y++):(ue=i,we(ee)),ue!==i)if(ae.test(a.charAt(y))?(fe=a.charAt(y),y++):(fe=i,we(le)),fe!==i)if(te.test(a.charAt(y))?(Y=a.charAt(y),y++):(Y=i,we(ce)),Y!==i){for(Pe=[],it=Oe();it!==i;)Pe.push(it),it=Oe();if(Pe!==i)if(it=nh(),it!==i){for(Er=[],xr=Oe();xr!==i;)Er.push(xr),xr=Oe();Er!==i?(xr=_i(),xr!==i?(Le=h,D=A(it,xr),h=D):(y=h,h=i)):(y=h,h=i)}else y=h,h=i;else y=h,h=i}else y=h,h=i;else y=h,h=i;else y=h,h=i;else y=h,h=i;else y=h,h=i;else y=h,h=i;else y=h,h=i;return h}function Nb(){var h,D,U;return h=y,D=Tb(),D!==i?(U=so(),U!==i?(Le=h,D=pe(D,U),h=D):(y=h,h=i)):(y=h,h=i),h===i&&(h=y,D=Yf(),D!==i?(U=so(),U===i&&(U=null),U!==i?(Le=h,D=Ne(D,U),h=D):(y=h,h=i)):(y=h,h=i)),h}function so(){var h,D,U,z,X,ue,fe,Y,Pe,it;if(h=y,D=oo(),D!==i)if(U=lo(),U!==i){for(z=[],X=y,ue=[],fe=Oe();fe!==i;)ue.push(fe),fe=Oe();for(ue!==i?(a.charCodeAt(y)===59?(fe=xe,y++):(fe=i,we(J)),fe!==i?(Y=y,Pe=oo(),Pe!==i?(it=lo(),it!==i?(Le=Y,Pe=ne(D,U,Pe,it),Y=Pe):(y=Y,Y=i)):(y=Y,Y=i),Y===i&&(Y=null),Y!==i?(Le=X,ue=ye(D,U,Y),X=ue):(y=X,X=i)):(y=X,X=i)):(y=X,X=i);X!==i;){for(z.push(X),X=y,ue=[],fe=Oe();fe!==i;)ue.push(fe),fe=Oe();ue!==i?(a.charCodeAt(y)===59?(fe=xe,y++):(fe=i,we(J)),fe!==i?(Y=y,Pe=oo(),Pe!==i?(it=lo(),it!==i?(Le=Y,Pe=ne(D,U,Pe,it),Y=Pe):(y=Y,Y=i)):(y=Y,Y=i),Y===i&&(Y=null),Y!==i?(Le=X,ue=ye(D,U,Y),X=ue):(y=X,X=i)):(y=X,X=i)):(y=X,X=i)}z!==i?(Le=h,D=_e(D,U,z),h=D):(y=h,h=i)}else y=h,h=i;else y=h,h=i;return h}function lo(){var h,D,U,z,X,ue,fe;if(h=y,D=xi(),D!==i){for(U=[],z=y,X=[],ue=Oe();ue!==i;)X.push(ue),ue=Oe();for(X!==i?(a.charCodeAt(y)===44?(ue=me,y++):(ue=i,we(Ce)),ue!==i?(fe=xi(),fe!==i?(Le=z,X=de(D,fe),z=X):(y=z,z=i)):(y=z,z=i)):(y=z,z=i);z!==i;){for(U.push(z),z=y,X=[],ue=Oe();ue!==i;)X.push(ue),ue=Oe();X!==i?(a.charCodeAt(y)===44?(ue=me,y++):(ue=i,we(Ce)),ue!==i?(fe=xi(),fe!==i?(Le=z,X=de(D,fe),z=X):(y=z,z=i)):(y=z,z=i)):(y=z,z=i)}U!==i?(Le=h,D=Ae(D,U),h=D):(y=h,h=i)}else y=h,h=i;return h}function oo(){var h,D,U;if(h=y,D=Sb(),D!==i&&(Le=h,D=m(D)),h=D,h===i){for(h=y,D=[],U=Oe();U!==i;)D.push(U),U=Oe();D!==i?(a.charCodeAt(y)===97?(U=Se,y++):(U=i,we(be)),U!==i?(Le=h,D=Ve(),h=D):(y=h,h=i)):(y=h,h=i)}return h}function Tb(){var h,D;return h=y,D=Zf(),D!==i&&(Le=h,D=ht(D)),h=D,h===i&&(h=eh(),h===i&&(h=Ta())),h}function Sb(){var h,D,U;for(h=y,D=[],U=Oe();U!==i;)D.push(U),U=Oe();return D!==i?(U=Ta(),U!==i?(Le=h,D=m(U),h=D):(y=h,h=i)):(y=h,h=i),h}function xi(){var h,D;return h=Db(),h===i&&(h=y,D=Zf(),D!==i&&(Le=h,D=Ge(D)),h=D,h===i&&(h=y,D=eh(),D!==i&&(Le=h,D=Et(D)),h=D,h===i&&(h=y,D=Yf(),D!==i&&(Le=h,D=m(D)),h=D,h===i&&(h=y,D=Ta(),D!==i&&(Le=h,D=q(D)),h=D)))),h}function Db(){var h;return h=Rb(),h===i&&(h=Ib(),h===i&&(h=kb())),h}function Yf(){var h,D,U,z,X,ue;for(h=y,D=[],U=Oe();U!==i;)D.push(U),U=Oe();if(D!==i)if(a.charCodeAt(y)===91?(U=x,y++):(U=i,we(T)),U!==i)if(z=so(),z!==i){for(X=[],ue=Oe();ue!==i;)X.push(ue),ue=Oe();X!==i?(a.charCodeAt(y)===93?(ue=Q,y++):(ue=i,we(he)),ue!==i?(Le=h,D=m(z),h=D):(y=h,h=i)):(y=h,h=i)}else y=h,h=i;else y=h,h=i;else y=h,h=i;return h}function Zf(){var h,D,U,z,X,ue;for(h=y,D=[],U=Oe();U!==i;)D.push(U),U=Oe();if(D!==i)if(a.charCodeAt(y)===40?(U=Ee,y++):(U=i,we(Te)),U!==i){for(z=[],X=xi();X!==i;)z.push(X),X=xi();if(z!==i){for(X=[],ue=Oe();ue!==i;)X.push(ue),ue=Oe();X!==i?(a.charCodeAt(y)===41?(ue=ze,y++):(ue=i,we(rt)),ue!==i?(Le=h,D=Ye(z),h=D):(y=h,h=i)):(y=h,h=i)}else y=h,h=i}else y=h,h=i;else y=h,h=i;return h}function Ib(){var h,D,U;for(h=y,D=[],U=Oe();U!==i;)D.push(U),U=Oe();return D!==i?(U=Ub(),U===i&&(U=Mb(),U===i&&(U=Pb())),U!==i?(Le=h,D=m(U),h=D):(y=h,h=i)):(y=h,h=i),h}function Rb(){var h,D,U,z,X,ue,fe;for(h=y,D=[],U=Oe();U!==i;)D.push(U),U=Oe();if(D!==i)if(U=uo(),U!==i){for(z=[],X=Oe();X!==i;)z.push(X),X=Oe();z!==i?(X=Bb(),X!==i?(Le=h,D=tt(U,X),h=D):(y=h,h=i)):(y=h,h=i)}else y=h,h=i;else y=h,h=i;if(h===i){for(h=y,D=[],U=Oe();U!==i;)D.push(U),U=Oe();if(D!==i)if(U=uo(),U!==i){for(z=[],X=Oe();X!==i;)z.push(X),X=Oe();if(z!==i)if(a.substr(y,2)===Xe?(X=Xe,y+=2):(X=i,we(wr)),X!==i){for(ue=[],fe=Oe();fe!==i;)ue.push(fe),fe=Oe();ue!==i?(fe=Ta(),fe!==i?(Le=h,D=vr(U,fe),h=D):(y=h,h=i)):(y=h,h=i)}else y=h,h=i;else y=h,h=i}else y=h,h=i;else y=h,h=i;if(h===i){for(h=y,D=[],U=Oe();U!==i;)D.push(U),U=Oe();D!==i?(U=uo(),U!==i?(Le=h,D=m(U),h=D):(y=h,h=i)):(y=h,h=i)}}return h}function kb(){var h,D,U;for(h=y,D=[],U=Oe();U!==i;)D.push(U),U=Oe();if(D!==i?(a.substr(y,4)===Kn?(U=Kn,y+=4):(U=i,we($)),U!==i?(Le=h,D=W(),h=D):(y=h,h=i)):(y=h,h=i),h===i){for(h=y,D=[],U=Oe();U!==i;)D.push(U),U=Oe();D!==i?(a.substr(y,5)===oe?(U=oe,y+=5):(U=i,we(ve)),U!==i?(Le=h,D=ke(),h=D):(y=h,h=i)):(y=h,h=i)}return h}function uo(){var h,D,U;for(h=y,D=[],U=Oe();U!==i;)D.push(U),U=Oe();return D!==i?(U=jb(),U===i&&(U=Hb(),U===i&&(U=qb(),U===i&&(U=$b()))),U!==i?(Le=h,D=m(U),h=D):(y=h,h=i)):(y=h,h=i),h}function Ta(){var h,D,U;for(h=y,D=[],U=Oe();U!==i;)D.push(U),U=Oe();if(D!==i?(U=_i(),U!==i?(Le=h,D=m(U),h=D):(y=h,h=i)):(y=h,h=i),h===i){for(h=y,D=[],U=Oe();U!==i;)D.push(U),U=Oe();D!==i?(U=Lb(),U!==i?(Le=h,D=m(U),h=D):(y=h,h=i)):(y=h,h=i)}return h}function Lb(){var h,D;return h=Ob(),h===i&&(h=y,D=th(),D!==i&&(Le=h,D=V(D)),h=D),h}function eh(){var h,D,U;for(h=y,D=[],U=Oe();U!==i;)D.push(U),U=Oe();if(D!==i?(U=Fb(),U!==i?(Le=h,D=m(U),h=D):(y=h,h=i)):(y=h,h=i),h===i){for(h=y,D=[],U=Oe();U!==i;)D.push(U),U=Oe();D!==i?(U=Vb(),U!==i?(Le=h,D=m(U),h=D):(y=h,h=i)):(y=h,h=i)}return h}function _i(){var h,D,U,z;if(h=y,a.charCodeAt(y)===60?(D=Z,y++):(D=i,we(De)),D!==i){for(U=[],Ie.test(a.charAt(y))?(z=a.charAt(y),y++):(z=i,we(Be)),z===i&&(z=ct());z!==i;)U.push(z),Ie.test(a.charAt(y))?(z=a.charAt(y),y++):(z=i,we(Be)),z===i&&(z=ct());U!==i?(a.charCodeAt(y)===62?(z=at,y++):(z=i,we(wt)),z!==i?(Le=h,D=Kt(U),h=D):(y=h,h=i)):(y=h,h=i)}else y=h,h=i;return h}function th(){var h,D,U;return h=y,D=ih(),D===i&&(D=null),D!==i?(a.charCodeAt(y)===58?(U=dt,y++):(U=i,we(gt)),U!==i?(Le=h,D=nn(D),h=D):(y=h,h=i)):(y=h,h=i),h}function nh(){var h,D,U;return h=y,D=ih(),D===i&&(D=null),D!==i?(a.charCodeAt(y)===58?(U=dt,y++):(U=i,we(gt)),U!==i?(Le=h,D=vn(D),h=D):(y=h,h=i)):(y=h,h=i),h}function Ob(){var h,D,U;return h=y,D=th(),D!==i?(U=zb(),U!==i?(Le=h,D=xt(D,U),h=D):(y=h,h=i)):(y=h,h=i),h}function Fb(){var h,D,U,z,X,ue,fe,Y,Pe,it;if(h=y,D=y,a.substr(y,2)===Mn?(U=Mn,y+=2):(U=i,we(Xt)),U!==i)if(z=fo(),z===i&&(ut.test(a.charAt(y))?(z=a.charAt(y),y++):(z=i,we(ft))),z!==i){for(X=[],ue=Tt();ue!==i;)X.push(ue),ue=Tt();if(X!==i){if(ue=[],fe=y,Y=[],a.charCodeAt(y)===46?(Pe=d,y++):(Pe=i,we(g)),Pe!==i)for(;Pe!==i;)Y.push(Pe),a.charCodeAt(y)===46?(Pe=d,y++):(Pe=i,we(g));else Y=i;if(Y!==i){if(Pe=[],it=Tt(),it!==i)for(;it!==i;)Pe.push(it),it=Tt();else Pe=i;Pe!==i?(Y=[Y,Pe],fe=Y):(y=fe,fe=i)}else y=fe,fe=i;for(;fe!==i;){if(ue.push(fe),fe=y,Y=[],a.charCodeAt(y)===46?(Pe=d,y++):(Pe=i,we(g)),Pe!==i)for(;Pe!==i;)Y.push(Pe),a.charCodeAt(y)===46?(Pe=d,y++):(Pe=i,we(g));else Y=i;if(Y!==i){if(Pe=[],it=Tt(),it!==i)for(;it!==i;)Pe.push(it),it=Tt();else Pe=i;Pe!==i?(Y=[Y,Pe],fe=Y):(y=fe,fe=i)}else y=fe,fe=i}ue!==i?(U=[U,z,X,ue],D=U):(y=D,D=i)}else y=D,D=i}else y=D,D=i;else y=D,D=i;return D!==i?h=a.substring(h,y):h=D,h}function Bb(){var h,D,U,z,X,ue,fe,Y;if(h=y,a.charCodeAt(y)===64?(D=Un,y++):(D=i,we(rn)),D!==i){if(U=[],Ef.test(a.charAt(y))?(z=a.charAt(y),y++):(z=i,we(xf)),z!==i)for(;z!==i;)U.push(z),Ef.test(a.charAt(y))?(z=a.charAt(y),y++):(z=i,we(xf));else U=i;if(U!==i){if(z=[],X=y,a.charCodeAt(y)===45?(ue=to,y++):(ue=i,we(no)),ue!==i){if(fe=[],ha.test(a.charAt(y))?(Y=a.charAt(y),y++):(Y=i,we(pa)),Y!==i)for(;Y!==i;)fe.push(Y),ha.test(a.charAt(y))?(Y=a.charAt(y),y++):(Y=i,we(pa));else fe=i;fe!==i?(Le=X,ue=_f(U,fe),X=ue):(y=X,X=i)}else y=X,X=i;for(;X!==i;)if(z.push(X),X=y,a.charCodeAt(y)===45?(ue=to,y++):(ue=i,we(no)),ue!==i){if(fe=[],ha.test(a.charAt(y))?(Y=a.charAt(y),y++):(Y=i,we(pa)),Y!==i)for(;Y!==i;)fe.push(Y),ha.test(a.charAt(y))?(Y=a.charAt(y),y++):(Y=i,we(pa));else fe=i;fe!==i?(Le=X,ue=_f(U,fe),X=ue):(y=X,X=i)}else y=X,X=i;z!==i?(Le=h,D=wv(U,z),h=D):(y=h,h=i)}else y=h,h=i}else y=h,h=i;return h}function Pb(){var h,D,U,z,X,ue;if(h=y,D=y,U=y,ma.test(a.charAt(y))?(z=a.charAt(y),y++):(z=i,we(ga)),z===i&&(z=null),z!==i){if(X=[],ut.test(a.charAt(y))?(ue=a.charAt(y),y++):(ue=i,we(ft)),ue!==i)for(;ue!==i;)X.push(ue),ut.test(a.charAt(y))?(ue=a.charAt(y),y++):(ue=i,we(ft));else X=i;X!==i?(z=[z,X],U=z):(y=U,U=i)}else y=U,U=i;return U!==i?D=a.substring(D,y):D=U,D!==i&&(Le=h,D=vv(D)),h=D,h}function Mb(){var h,D,U,z,X,ue,fe,Y;if(h=y,D=y,U=y,ma.test(a.charAt(y))?(z=a.charAt(y),y++):(z=i,we(ga)),z===i&&(z=null),z!==i){for(X=[],ut.test(a.charAt(y))?(ue=a.charAt(y),y++):(ue=i,we(ft));ue!==i;)X.push(ue),ut.test(a.charAt(y))?(ue=a.charAt(y),y++):(ue=i,we(ft));if(X!==i)if(a.charCodeAt(y)===46?(ue=d,y++):(ue=i,we(g)),ue!==i){if(fe=[],ut.test(a.charAt(y))?(Y=a.charAt(y),y++):(Y=i,we(ft)),Y!==i)for(;Y!==i;)fe.push(Y),ut.test(a.charAt(y))?(Y=a.charAt(y),y++):(Y=i,we(ft));else fe=i;fe!==i?(z=[z,X,ue,fe],U=z):(y=U,U=i)}else y=U,U=i;else y=U,U=i}else y=U,U=i;return U!==i?D=a.substring(D,y):D=U,D!==i&&(Le=h,D=bv(D)),h=D,h}function Ub(){var h,D,U,z,X,ue,fe,Y,Pe;if(h=y,D=y,U=y,ma.test(a.charAt(y))?(z=a.charAt(y),y++):(z=i,we(ga)),z===i&&(z=null),z!==i){if(X=y,ue=[],ut.test(a.charAt(y))?(fe=a.charAt(y),y++):(fe=i,we(ft)),fe!==i)for(;fe!==i;)ue.push(fe),ut.test(a.charAt(y))?(fe=a.charAt(y),y++):(fe=i,we(ft));else ue=i;if(ue!==i)if(a.charCodeAt(y)===46?(fe=d,y++):(fe=i,we(g)),fe!==i){for(Y=[],ut.test(a.charAt(y))?(Pe=a.charAt(y),y++):(Pe=i,we(ft));Pe!==i;)Y.push(Pe),ut.test(a.charAt(y))?(Pe=a.charAt(y),y++):(Pe=i,we(ft));Y!==i?(Pe=co(),Pe!==i?(ue=[ue,fe,Y,Pe],X=ue):(y=X,X=i)):(y=X,X=i)}else y=X,X=i;else y=X,X=i;if(X===i){if(X=y,a.charCodeAt(y)===46?(ue=d,y++):(ue=i,we(g)),ue!==i){if(fe=[],ut.test(a.charAt(y))?(Y=a.charAt(y),y++):(Y=i,we(ft)),Y!==i)for(;Y!==i;)fe.push(Y),ut.test(a.charAt(y))?(Y=a.charAt(y),y++):(Y=i,we(ft));else fe=i;fe!==i?(Y=co(),Y!==i?(ue=[ue,fe,Y],X=ue):(y=X,X=i)):(y=X,X=i)}else y=X,X=i;if(X===i){if(X=y,ue=[],ut.test(a.charAt(y))?(fe=a.charAt(y),y++):(fe=i,we(ft)),fe!==i)for(;fe!==i;)ue.push(fe),ut.test(a.charAt(y))?(fe=a.charAt(y),y++):(fe=i,we(ft));else ue=i;ue!==i?(fe=co(),fe!==i?(ue=[ue,fe],X=ue):(y=X,X=i)):(y=X,X=i)}}X!==i?(z=[z,X],U=z):(y=U,U=i)}else y=U,U=i;return U!==i?D=a.substring(D,y):D=U,D!==i&&(Le=h,D=Ev(D)),h=D,h}function co(){var h,D,U,z,X,ue;if(h=y,D=y,xv.test(a.charAt(y))?(U=a.charAt(y),y++):(U=i,we(_v)),U!==i)if(ma.test(a.charAt(y))?(z=a.charAt(y),y++):(z=i,we(ga)),z===i&&(z=null),z!==i){if(X=[],ut.test(a.charAt(y))?(ue=a.charAt(y),y++):(ue=i,we(ft)),ue!==i)for(;ue!==i;)X.push(ue),ut.test(a.charAt(y))?(ue=a.charAt(y),y++):(ue=i,we(ft));else X=i;X!==i?(U=[U,z,X],D=U):(y=D,D=i)}else y=D,D=i;else y=D,D=i;return D!==i?h=a.substring(h,y):h=D,h}function $b(){var h,D,U,z;if(h=y,a.charCodeAt(y)===34?(D=ya,y++):(D=i,we(wa)),D!==i){for(U=[],Cf.test(a.charAt(y))?(z=a.charAt(y),y++):(z=i,we(Af)),z===i&&(z=pt(),z===i&&(z=ct()));z!==i;)U.push(z),Cf.test(a.charAt(y))?(z=a.charAt(y),y++):(z=i,we(Af)),z===i&&(z=pt(),z===i&&(z=ct()));U!==i?(a.charCodeAt(y)===34?(z=ya,y++):(z=i,we(wa)),z!==i?(Le=h,D=p(U),h=D):(y=h,h=i)):(y=h,h=i)}else y=h,h=i;return h}function qb(){var h,D,U,z;if(h=y,a.charCodeAt(y)===39?(D=va,y++):(D=i,we(ba)),D!==i){for(U=[],Nf.test(a.charAt(y))?(z=a.charAt(y),y++):(z=i,we(Tf)),z===i&&(z=pt(),z===i&&(z=ct()));z!==i;)U.push(z),Nf.test(a.charAt(y))?(z=a.charAt(y),y++):(z=i,we(Tf)),z===i&&(z=pt(),z===i&&(z=ct()));U!==i?(a.charCodeAt(y)===39?(z=va,y++):(z=i,we(ba)),z!==i?(Le=h,D=p(U),h=D):(y=h,h=i)):(y=h,h=i)}else y=h,h=i;return h}function jb(){var h,D,U,z,X,ue,fe,Y;if(h=y,a.substr(y,3)===Ea?(D=Ea,y+=3):(D=i,we(Sf)),D!==i){for(U=[],bn.test(a.charAt(y))?(z=a.charAt(y),y++):(z=i,we(En)),z===i&&(z=pt(),z===i&&(z=ct()));z!==i;)U.push(z),bn.test(a.charAt(y))?(z=a.charAt(y),y++):(z=i,we(En)),z===i&&(z=pt(),z===i&&(z=ct()));if(U!==i){if(z=[],X=y,a.substr(y,2)===xa?(ue=xa,y+=2):(ue=i,we(Df)),ue!==i){if(fe=[],bn.test(a.charAt(y))?(Y=a.charAt(y),y++):(Y=i,we(En)),Y===i&&(Y=pt(),Y===i&&(Y=ct())),Y!==i)for(;Y!==i;)fe.push(Y),bn.test(a.charAt(y))?(Y=a.charAt(y),y++):(Y=i,we(En)),Y===i&&(Y=pt(),Y===i&&(Y=ct()));else fe=i;fe!==i?(Le=X,ue=If(U,fe),X=ue):(y=X,X=i)}else y=X,X=i;if(X===i)if(X=y,a.charCodeAt(y)===39?(ue=va,y++):(ue=i,we(ba)),ue!==i){if(fe=[],bn.test(a.charAt(y))?(Y=a.charAt(y),y++):(Y=i,we(En)),Y===i&&(Y=pt(),Y===i&&(Y=ct())),Y!==i)for(;Y!==i;)fe.push(Y),bn.test(a.charAt(y))?(Y=a.charAt(y),y++):(Y=i,we(En)),Y===i&&(Y=pt(),Y===i&&(Y=ct()));else fe=i;fe!==i?(Le=X,ue=Rf(U,fe),X=ue):(y=X,X=i)}else y=X,X=i;for(;X!==i;){if(z.push(X),X=y,a.substr(y,2)===xa?(ue=xa,y+=2):(ue=i,we(Df)),ue!==i){if(fe=[],bn.test(a.charAt(y))?(Y=a.charAt(y),y++):(Y=i,we(En)),Y===i&&(Y=pt(),Y===i&&(Y=ct())),Y!==i)for(;Y!==i;)fe.push(Y),bn.test(a.charAt(y))?(Y=a.charAt(y),y++):(Y=i,we(En)),Y===i&&(Y=pt(),Y===i&&(Y=ct()));else fe=i;fe!==i?(Le=X,ue=If(U,fe),X=ue):(y=X,X=i)}else y=X,X=i;if(X===i)if(X=y,a.charCodeAt(y)===39?(ue=va,y++):(ue=i,we(ba)),ue!==i){if(fe=[],bn.test(a.charAt(y))?(Y=a.charAt(y),y++):(Y=i,we(En)),Y===i&&(Y=pt(),Y===i&&(Y=ct())),Y!==i)for(;Y!==i;)fe.push(Y),bn.test(a.charAt(y))?(Y=a.charAt(y),y++):(Y=i,we(En)),Y===i&&(Y=pt(),Y===i&&(Y=ct()));else fe=i;fe!==i?(Le=X,ue=Rf(U,fe),X=ue):(y=X,X=i)}else y=X,X=i}z!==i?(a.substr(y,3)===Ea?(X=Ea,y+=3):(X=i,we(Sf)),X!==i?(Le=h,D=kf(U,z),h=D):(y=h,h=i)):(y=h,h=i)}else y=h,h=i}else y=h,h=i;return h}function Hb(){var h,D,U,z,X,ue,fe,Y;if(h=y,a.substr(y,3)===_a?(D=_a,y+=3):(D=i,we(Lf)),D!==i){for(U=[],xn.test(a.charAt(y))?(z=a.charAt(y),y++):(z=i,we(_n)),z===i&&(z=pt(),z===i&&(z=ct()));z!==i;)U.push(z),xn.test(a.charAt(y))?(z=a.charAt(y),y++):(z=i,we(_n)),z===i&&(z=pt(),z===i&&(z=ct()));if(U!==i){if(z=[],X=y,a.substr(y,2)===Ca?(ue=Ca,y+=2):(ue=i,we(Of)),ue!==i){if(fe=[],xn.test(a.charAt(y))?(Y=a.charAt(y),y++):(Y=i,we(_n)),Y===i&&(Y=pt(),Y===i&&(Y=ct())),Y!==i)for(;Y!==i;)fe.push(Y),xn.test(a.charAt(y))?(Y=a.charAt(y),y++):(Y=i,we(_n)),Y===i&&(Y=pt(),Y===i&&(Y=ct()));else fe=i;fe!==i?(Le=X,ue=Ff(U,fe),X=ue):(y=X,X=i)}else y=X,X=i;if(X===i)if(X=y,a.charCodeAt(y)===34?(ue=ya,y++):(ue=i,we(wa)),ue!==i){if(fe=[],xn.test(a.charAt(y))?(Y=a.charAt(y),y++):(Y=i,we(_n)),Y===i&&(Y=pt(),Y===i&&(Y=ct())),Y!==i)for(;Y!==i;)fe.push(Y),xn.test(a.charAt(y))?(Y=a.charAt(y),y++):(Y=i,we(_n)),Y===i&&(Y=pt(),Y===i&&(Y=ct()));else fe=i;fe!==i?(Le=X,ue=Bf(U,fe),X=ue):(y=X,X=i)}else y=X,X=i;for(;X!==i;){if(z.push(X),X=y,a.substr(y,2)===Ca?(ue=Ca,y+=2):(ue=i,we(Of)),ue!==i){if(fe=[],xn.test(a.charAt(y))?(Y=a.charAt(y),y++):(Y=i,we(_n)),Y===i&&(Y=pt(),Y===i&&(Y=ct())),Y!==i)for(;Y!==i;)fe.push(Y),xn.test(a.charAt(y))?(Y=a.charAt(y),y++):(Y=i,we(_n)),Y===i&&(Y=pt(),Y===i&&(Y=ct()));else fe=i;fe!==i?(Le=X,ue=Ff(U,fe),X=ue):(y=X,X=i)}else y=X,X=i;if(X===i)if(X=y,a.charCodeAt(y)===34?(ue=ya,y++):(ue=i,we(wa)),ue!==i){if(fe=[],xn.test(a.charAt(y))?(Y=a.charAt(y),y++):(Y=i,we(_n)),Y===i&&(Y=pt(),Y===i&&(Y=ct())),Y!==i)for(;Y!==i;)fe.push(Y),xn.test(a.charAt(y))?(Y=a.charAt(y),y++):(Y=i,we(_n)),Y===i&&(Y=pt(),Y===i&&(Y=ct()));else fe=i;fe!==i?(Le=X,ue=Bf(U,fe),X=ue):(y=X,X=i)}else y=X,X=i}z!==i?(a.substr(y,3)===_a?(X=_a,y+=3):(X=i,we(Lf)),X!==i?(Le=h,D=kf(U,z),h=D):(y=h,h=i)):(y=h,h=i)}else y=h,h=i}else y=h,h=i;return h}function ct(){var h,D,U,z,X,ue,fe,Y,Pe,it,Er;return h=y,a.substr(y,2)===Pf?(D=Pf,y+=2):(D=i,we(Cv)),D!==i?(U=y,z=$t(),z!==i?(X=$t(),X!==i?(ue=$t(),ue!==i?(fe=$t(),fe!==i?(Y=$t(),Y!==i?(Pe=$t(),Pe!==i?(it=$t(),it!==i?(Er=$t(),Er!==i?(z=[z,X,ue,fe,Y,Pe,it,Er],U=z):(y=U,U=i)):(y=U,U=i)):(y=U,U=i)):(y=U,U=i)):(y=U,U=i)):(y=U,U=i)):(y=U,U=i)):(y=U,U=i),U!==i?(Le=h,D=Av(U),h=D):(y=h,h=i)):(y=h,h=i),h===i&&(h=y,a.substr(y,2)===Mf?(D=Mf,y+=2):(D=i,we(Nv)),D!==i?(U=y,z=$t(),z!==i?(X=$t(),X!==i?(ue=$t(),ue!==i?(fe=$t(),fe!==i?(z=[z,X,ue,fe],U=z):(y=U,U=i)):(y=U,U=i)):(y=U,U=i)):(y=U,U=i),U!==i?(Le=h,D=Tv(U),h=D):(y=h,h=i)):(y=h,h=i)),h}function pt(){var h,D;return h=y,a.substr(y,2)===Uf?(D=Uf,y+=2):(D=i,we(Sv)),D!==i&&(Le=h,D=Dv()),h=D,h===i&&(h=y,a.substr(y,2)===$f?(D=$f,y+=2):(D=i,we(Iv)),D!==i&&(Le=h,D=Rv()),h=D,h===i&&(h=y,a.substr(y,2)===qf?(D=qf,y+=2):(D=i,we(kv)),D!==i&&(Le=h,D=Lv()),h=D,h===i&&(h=y,a.substr(y,2)===jf?(D=jf,y+=2):(D=i,we(Ov)),D!==i&&(Le=h,D=Fv()),h=D,h===i&&(h=y,a.substr(y,2)===Hf?(D=Hf,y+=2):(D=i,we(Bv)),D!==i&&(Le=h,D=Pv()),h=D,h===i&&(h=y,a.substr(y,2)===Wf?(D=Wf,y+=2):(D=i,we(Mv)),D!==i&&(Le=h,D=Uv()),h=D,h===i&&(h=y,a.substr(y,2)===Vf?(D=Vf,y+=2):(D=i,we($v)),D!==i&&(Le=h,D=qv()),h=D,h===i&&(h=y,a.substr(y,2)===zf?(D=zf,y+=2):(D=i,we(jv)),D!==i&&(Le=h,D=Hv()),h=D))))))),h}function Wb(){var h;return Wv.test(a.charAt(y))?(h=a.charAt(y),y++):(h=i,we(Vv)),h}function Vb(){var h,D,U,z;if(h=y,a.charCodeAt(y)===91?(D=x,y++):(D=i,we(T)),D!==i){for(U=[],z=Oe();z!==i;)U.push(z),z=Oe();U!==i?(a.charCodeAt(y)===93?(z=Q,y++):(z=i,we(he)),z!==i?(Le=h,D=zv(),h=D):(y=h,h=i)):(y=h,h=i)}else y=h,h=i;return h}function rh(){var h,D,U;return h=y,Gv.test(a.charAt(y))?(D=a.charAt(y),y++):(D=i,we(Jv)),D!==i?(Kv.test(a.charAt(y))?(U=a.charAt(y),y++):(U=i,we(Xv)),U!==i?(Le=h,D=Qv(D,U),h=D):(y=h,h=i)):(y=h,h=i),h===i&&(Yv.test(a.charAt(y))?(h=a.charAt(y),y++):(h=i,we(Zv))),h}function fo(){var h;return h=rh(),h===i&&(a.charCodeAt(y)===95?(h=eb,y++):(h=i,we(tb))),h}function Tt(){var h;return h=fo(),h===i&&(a.charCodeAt(y)===45?(h=to,y++):(h=i,we(no)),h===i&&(ut.test(a.charAt(y))?(h=a.charAt(y),y++):(h=i,we(ft)),h===i&&(a.charCodeAt(y)===183?(h=nb,y++):(h=i,we(rb)),h===i&&(ib.test(a.charAt(y))?(h=a.charAt(y),y++):(h=i,we(ab)),h===i&&(sb.test(a.charAt(y))?(h=a.charAt(y),y++):(h=i,we(lb))))))),h}function ih(){var h,D,U,z,X,ue,fe,Y,Pe;if(h=y,D=y,U=rh(),U!==i){for(z=[],X=Tt();X!==i;)z.push(X),X=Tt();if(z!==i){if(X=[],ue=y,fe=[],a.charCodeAt(y)===46?(Y=d,y++):(Y=i,we(g)),Y!==i)for(;Y!==i;)fe.push(Y),a.charCodeAt(y)===46?(Y=d,y++):(Y=i,we(g));else fe=i;if(fe!==i){if(Y=[],Pe=Tt(),Pe!==i)for(;Pe!==i;)Y.push(Pe),Pe=Tt();else Y=i;Y!==i?(fe=[fe,Y],ue=fe):(y=ue,ue=i)}else y=ue,ue=i;for(;ue!==i;){if(X.push(ue),ue=y,fe=[],a.charCodeAt(y)===46?(Y=d,y++):(Y=i,we(g)),Y!==i)for(;Y!==i;)fe.push(Y),a.charCodeAt(y)===46?(Y=d,y++):(Y=i,we(g));else fe=i;if(fe!==i){if(Y=[],Pe=Tt(),Pe!==i)for(;Pe!==i;)Y.push(Pe),Pe=Tt();else Y=i;Y!==i?(fe=[fe,Y],ue=fe):(y=ue,ue=i)}else y=ue,ue=i}X!==i?(U=[U,z,X],D=U):(y=D,D=i)}else y=D,D=i}else y=D,D=i;return D!==i?h=a.substring(h,y):h=D,h}function zb(){var h,D,U,z,X,ue,fe,Y;if(h=y,D=fo(),D===i&&(a.charCodeAt(y)===58?(D=dt,y++):(D=i,we(gt)),D===i&&(ut.test(a.charAt(y))?(D=a.charAt(y),y++):(D=i,we(ft)),D===i&&(D=br()))),D!==i){for(U=[],z=Tt(),z===i&&(a.charCodeAt(y)===58?(z=dt,y++):(z=i,we(gt)),z===i&&(z=br()));z!==i;)U.push(z),z=Tt(),z===i&&(a.charCodeAt(y)===58?(z=dt,y++):(z=i,we(gt)),z===i&&(z=br()));if(U!==i){if(z=[],X=y,ue=[],a.charCodeAt(y)===46?(fe=d,y++):(fe=i,we(g)),fe!==i)for(;fe!==i;)ue.push(fe),a.charCodeAt(y)===46?(fe=d,y++):(fe=i,we(g));else ue=i;if(ue!==i){if(fe=[],Y=Tt(),Y===i&&(a.charCodeAt(y)===58?(Y=dt,y++):(Y=i,we(gt)),Y===i&&(Y=br())),Y!==i)for(;Y!==i;)fe.push(Y),Y=Tt(),Y===i&&(a.charCodeAt(y)===58?(Y=dt,y++):(Y=i,we(gt)),Y===i&&(Y=br()));else fe=i;fe!==i?(Le=X,ue=Gf(D,U,ue,fe),X=ue):(y=X,X=i)}else y=X,X=i;for(;X!==i;){if(z.push(X),X=y,ue=[],a.charCodeAt(y)===46?(fe=d,y++):(fe=i,we(g)),fe!==i)for(;fe!==i;)ue.push(fe),a.charCodeAt(y)===46?(fe=d,y++):(fe=i,we(g));else ue=i;if(ue!==i){if(fe=[],Y=Tt(),Y===i&&(a.charCodeAt(y)===58?(Y=dt,y++):(Y=i,we(gt)),Y===i&&(Y=br())),Y!==i)for(;Y!==i;)fe.push(Y),Y=Tt(),Y===i&&(a.charCodeAt(y)===58?(Y=dt,y++):(Y=i,we(gt)),Y===i&&(Y=br()));else fe=i;fe!==i?(Le=X,ue=Gf(D,U,ue,fe),X=ue):(y=X,X=i)}else y=X,X=i}z!==i?(Le=h,D=ob(D,U,z),h=D):(y=h,h=i)}else y=h,h=i}else y=h,h=i;return h}function br(){var h;return h=Gb(),h===i&&(h=Jb()),h}function Gb(){var h,D,U,z,X;return h=y,D=y,a.charCodeAt(y)===37?(U=ub,y++):(U=i,we(cb)),U!==i?(z=$t(),z!==i?(X=$t(),X!==i?(U=[U,z,X],D=U):(y=D,D=i)):(y=D,D=i)):(y=D,D=i),D!==i?h=a.substring(h,y):h=D,h}function $t(){var h;return db.test(a.charAt(y))?(h=a.charAt(y),y++):(h=i,we(fb)),h}function Jb(){var h,D,U;return h=y,a.charCodeAt(y)===92?(D=hb,y++):(D=i,we(pb)),D!==i?(mb.test(a.charAt(y))?(U=a.charAt(y),y++):(U=i,we(gb)),U!==i?(Le=h,D=m(U),h=D):(y=h,h=i)):(y=h,h=i),h}var ah=function(h){return h.match(/^[a-z](.*?):(.+?)/g)};function Kb(h,D){var U={};return U[h]=D,U}var nt={base:[],data:{},addBase:function(h){if(nt.base.length===0){nt.base.push(h);return}const D=nt.base[nt.base.length-1];D!==h&&nt.base.push(new URL(h,D).toString())},addPrefix:function(h,D){const U=nt.data[h];U===void 0?nt.data[h]=[{uri:D,count:0}]:U[U.length-1].uri!==D&&U.push({uri:D,count:0})},hasPrefix:function(h){return this.data[h]!==void 0},resolve:function(h,D){const U=Object.keys(nt.data).find(X=>h.indexOf(X+":")===0);if(U!==void 0){const X=nt.data[U];if(X.length===1&&D!==!0&&ah(X[0].uri))return h;const ue=X[X.length-1].uri;return h.replace(U+":",ue)}else{var z=nt.base.length===0?s.baseIRI:nt.base[nt.base.length-1];return!z||h.match(/^(http:|https:|urn:|file:)/)?h:h.indexOf("//")===0&&z?z.split("//")[0]+h:new URL(h,z).toString()}},increment:function(h){const D=nt.data[h];D!==void 0&&D[D.length-1].count++},decrement:function(h){const D=nt.data[h];D!==void 0&&D[D.length-1].count--},toJSON:function(){const h={};return nt.base.length>0&&(h["@context"]===void 0&&(h["@context"]={}),h["@context"]["@base"]=nt.base[0]),Object.keys(nt.data).forEach(D=>{const U=nt.data[D][0];U.uri==="http://www.w3.org/2001/XMLSchema#"&&U.count<1||ah(U.uri)&&(h["@context"]===void 0&&(h["@context"]={}),h["@context"][D]=U.uri)}),h}};function ho(h,D){if(h["@list"]===void 0||!D&&!h["@list"].find(X=>X["@list"]!==void 0))return h;if(h["@list"].length===0)return{"@id":"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"};var U={},z=null;return h["@list"].forEach(X=>{z===null?z=U:(z["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"]={},z=z["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"]),z["http://www.w3.org/1999/02/22-rdf-syntax-ns#first"]=ho(X,!0),z["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"]={"@id":"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}),U}if(Na=o(),Na!==i&&y===a.length)return Na;throw Na!==i&&y<a.length&&we(yb()),vb(ro,Cn<a.length?a.charAt(Cn):null,Cn<a.length?ao(Cn,Cn+1):ao(Cn,Cn))}return{SyntaxError:t,parse:r}})})(Ai)),Ai.exports}var Th=Nh(),Ba,So;function Sh(){if(So)return Ba;So=1;const n={acl:"http://www.w3.org/ns/auth/acl#",arg:"http://www.w3.org/ns/pim/arg#",as:"https://www.w3.org/ns/activitystreams#",bookmark:"http://www.w3.org/2002/01/bookmark#",cal:"http://www.w3.org/2002/12/cal/ical#",cco:"http://www.ontologyrepository.com/CommonCoreOntologies/",cert:"http://www.w3.org/ns/auth/cert#",contact:"http://www.w3.org/2000/10/swap/pim/contact#",dc:"http://purl.org/dc/elements/1.1/",dct:"http://purl.org/dc/terms/",doap:"http://usefulinc.com/ns/doap#",foaf:"http://xmlns.com/foaf/0.1/",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",gpx:"http://www.w3.org/ns/pim/gpx#",gr:"http://purl.org/goodrelations/v1#",http:"http://www.w3.org/2007/ont/http#",httph:"http://www.w3.org/2007/ont/httph#",icalTZ:"http://www.w3.org/2002/12/cal/icaltzd#",ldp:"http://www.w3.org/ns/ldp#",link:"http://www.w3.org/2007/ont/link#",log:"http://www.w3.org/2000/10/swap/log#",meeting:"http://www.w3.org/ns/pim/meeting#",mo:"http://purl.org/ontology/mo/",org:"http://www.w3.org/ns/org#",owl:"http://www.w3.org/2002/07/owl#",pad:"http://www.w3.org/ns/pim/pad#",patch:"http://www.w3.org/ns/pim/patch#",prov:"http://www.w3.org/ns/prov#",pto:"http://www.productontology.org/id/",qu:"http://www.w3.org/2000/10/swap/pim/qif#",trip:"http://www.w3.org/ns/pim/trip#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",rss:"http://purl.org/rss/1.0/",sched:"http://www.w3.org/ns/pim/schedule#",schema:"http://schema.org/",sioc:"http://rdfs.org/sioc/ns#",skos:"http://www.w3.org/2004/02/skos/core#",solid:"http://www.w3.org/ns/solid/terms#",space:"http://www.w3.org/ns/pim/space#",stat:"http://www.w3.org/ns/posix/stat#",tab:"http://www.w3.org/2007/ont/link#",tabont:"http://www.w3.org/2007/ont/link#",ui:"http://www.w3.org/ns/ui#",vann:"http://purl.org/vocab/vann/",vcard:"http://www.w3.org/2006/vcard/ns#",wf:"http://www.w3.org/2005/01/wf/flow#",xsd:"http://www.w3.org/2001/XMLSchema#"};function e(t={namedNode:r=>r}){const r={};for(const a in n){const s=n[a];r[a]=function(i=""){return t.namedNode(s+i)}}return r}return Ba=e,Ba}var Dh=Sh();const Do=Fa(Dh);var Kr={},Tn={},rr={},Io;function Ni(){if(Io)return rr;Io=1;function n(s,i,l){if(l===void 0&&(l=Array.prototype),s&&typeof l.find=="function")return l.find.call(s,i);for(var o=0;o<s.length;o++)if(Object.prototype.hasOwnProperty.call(s,o)){var u=s[o];if(i.call(void 0,u,o,s))return u}}function e(s,i){return i===void 0&&(i=Object),i&&typeof i.freeze=="function"?i.freeze(s):s}function t(s,i){if(s===null||typeof s!="object")throw new TypeError("target is not an object");for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(s[l]=i[l]);return s}var r=e({HTML:"text/html",isHTML:function(s){return s===r.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),a=e({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(s){return s===a.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return rr.assign=t,rr.find=n,rr.freeze=e,rr.MIME_TYPE=r,rr.NAMESPACE=a,rr}var Ro;function ko(){if(Ro)return Tn;Ro=1;var n=Ni(),e=n.find,t=n.NAMESPACE;function r($){return $!==""}function a($){return $?$.split(/[\t\n\f\r ]+/).filter(r):[]}function s($,W){return $.hasOwnProperty(W)||($[W]=!0),$}function i($){if(!$)return[];var W=a($);return Object.keys(W.reduce(s,{}))}function l($){return function(W){return $&&$.indexOf(W)!==-1}}function o($,W){for(var oe in $)Object.prototype.hasOwnProperty.call($,oe)&&(W[oe]=$[oe])}function u($,W){var oe=$.prototype;if(!(oe instanceof W)){let ve=function(){};ve.prototype=W.prototype,ve=new ve,o(oe,ve),$.prototype=oe=ve}oe.constructor!=$&&(typeof $!="function"&&console.error("unknown Class:"+$),oe.constructor=$)}var c={},f=c.ELEMENT_NODE=1,d=c.ATTRIBUTE_NODE=2,g=c.TEXT_NODE=3,m=c.CDATA_SECTION_NODE=4,v=c.ENTITY_REFERENCE_NODE=5,b=c.ENTITY_NODE=6,_=c.PROCESSING_INSTRUCTION_NODE=7,N=c.COMMENT_NODE=8,E=c.DOCUMENT_NODE=9,w=c.DOCUMENT_TYPE_NODE=10,p=c.DOCUMENT_FRAGMENT_NODE=11,S=c.NOTATION_NODE=12,F={},A={};F.INDEX_SIZE_ERR=(A[1]="Index size error",1),F.DOMSTRING_SIZE_ERR=(A[2]="DOMString size error",2);var k=F.HIERARCHY_REQUEST_ERR=(A[3]="Hierarchy request error",3);F.WRONG_DOCUMENT_ERR=(A[4]="Wrong document",4),F.INVALID_CHARACTER_ERR=(A[5]="Invalid character",5),F.NO_DATA_ALLOWED_ERR=(A[6]="No data allowed",6),F.NO_MODIFICATION_ALLOWED_ERR=(A[7]="No modification allowed",7);var C=F.NOT_FOUND_ERR=(A[8]="Not found",8);F.NOT_SUPPORTED_ERR=(A[9]="Not supported",9);var L=F.INUSE_ATTRIBUTE_ERR=(A[10]="Attribute in use",10);F.INVALID_STATE_ERR=(A[11]="Invalid state",11),F.SYNTAX_ERR=(A[12]="Syntax error",12),F.INVALID_MODIFICATION_ERR=(A[13]="Invalid modification",13),F.NAMESPACE_ERR=(A[14]="Invalid namespace",14),F.INVALID_ACCESS_ERR=(A[15]="Invalid access",15);function P($,W){if(W instanceof Error)var oe=W;else oe=this,Error.call(this,A[$]),this.message=A[$],Error.captureStackTrace&&Error.captureStackTrace(this,P);return oe.code=$,W&&(this.message=this.message+": "+W),oe}P.prototype=Error.prototype,o(F,P);function M(){}M.prototype={length:0,item:function($){return $>=0&&$<this.length?this[$]:null},toString:function($,W){for(var oe=[],ve=0;ve<this.length;ve++)Xe(this[ve],oe,$,W);return oe.join("")},filter:function($){return Array.prototype.filter.call(this,$)},indexOf:function($){return Array.prototype.indexOf.call(this,$)}};function B($,W){this._node=$,this._refresh=W,O(this)}function O($){var W=$._node._inc||$._node.ownerDocument._inc;if($._inc!==W){var oe=$._refresh($._node);if(Kn($,"length",oe.length),!$.$$length||oe.length<$.$$length)for(var ve=oe.length;ve in $;ve++)Object.prototype.hasOwnProperty.call($,ve)&&delete $[ve];o(oe,$),$._inc=W}}B.prototype.item=function($){return O(this),this[$]||null},u(B,M);function R(){}function H($,W){for(var oe=$.length;oe--;)if($[oe]===W)return oe}function j($,W,oe,ve){if(ve?W[H(W,ve)]=oe:W[W.length++]=oe,$){oe.ownerElement=$;var ke=$.ownerDocument;ke&&(ve&&ae(ke,$,ve),ee(ke,$,oe))}}function K($,W,oe){var ve=H(W,oe);if(ve>=0){for(var ke=W.length-1;ve<ke;)W[ve]=W[++ve];if(W.length=ke,$){var V=$.ownerDocument;V&&(ae(V,$,oe),oe.ownerElement=null)}}else throw new P(C,new Error($.tagName+"@"+oe))}R.prototype={length:0,item:M.prototype.item,getNamedItem:function($){for(var W=this.length;W--;){var oe=this[W];if(oe.nodeName==$)return oe}},setNamedItem:function($){var W=$.ownerElement;if(W&&W!=this._ownerElement)throw new P(L);var oe=this.getNamedItem($.nodeName);return j(this._ownerElement,this,$,oe),oe},setNamedItemNS:function($){var W=$.ownerElement,oe;if(W&&W!=this._ownerElement)throw new P(L);return oe=this.getNamedItemNS($.namespaceURI,$.localName),j(this._ownerElement,this,$,oe),oe},removeNamedItem:function($){var W=this.getNamedItem($);return K(this._ownerElement,this,W),W},removeNamedItemNS:function($,W){var oe=this.getNamedItemNS($,W);return K(this._ownerElement,this,oe),oe},getNamedItemNS:function($,W){for(var oe=this.length;oe--;){var ve=this[oe];if(ve.localName==W&&ve.namespaceURI==$)return ve}return null}};function I(){}I.prototype={hasFeature:function($,W){return!0},createDocument:function($,W,oe){var ve=new ge;if(ve.implementation=this,ve.childNodes=new M,ve.doctype=oe||null,oe&&ve.appendChild(oe),W){var ke=ve.createElementNS($,W);ve.appendChild(ke)}return ve},createDocumentType:function($,W,oe){var ve=new x;return ve.name=$,ve.nodeName=$,ve.publicId=W||"",ve.systemId=oe||"",ve}};function G(){}G.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function($,W){return de(this,$,W)},replaceChild:function($,W){de(this,$,W,Ce),W&&this.removeChild(W)},removeChild:function($){return te(this,$)},appendChild:function($){return this.insertBefore($,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function($){return vr(this.ownerDocument||this,this,$)},normalize:function(){for(var $=this.firstChild;$;){var W=$.nextSibling;W&&W.nodeType==g&&$.nodeType==g?(this.removeChild(W),$.appendData(W.data)):($.normalize(),$=W)}},isSupported:function($,W){return this.ownerDocument.implementation.hasFeature($,W)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function($){for(var W=this;W;){var oe=W._nsMap;if(oe){for(var ve in oe)if(Object.prototype.hasOwnProperty.call(oe,ve)&&oe[ve]===$)return ve}W=W.nodeType==d?W.ownerDocument:W.parentNode}return null},lookupNamespaceURI:function($){for(var W=this;W;){var oe=W._nsMap;if(oe&&Object.prototype.hasOwnProperty.call(oe,$))return oe[$];W=W.nodeType==d?W.ownerDocument:W.parentNode}return null},isDefaultNamespace:function($){var W=this.lookupPrefix($);return W==null}};function se($){return $=="<"&&"&lt;"||$==">"&&"&gt;"||$=="&"&&"&amp;"||$=='"'&&"&quot;"||"&#"+$.charCodeAt()+";"}o(c,G),o(c,G.prototype);function ie($,W){if(W($))return!0;if($=$.firstChild)do if(ie($,W))return!0;while($=$.nextSibling)}function ge(){this.ownerDocument=this}function ee($,W,oe){$&&$._inc++;var ve=oe.namespaceURI;ve===t.XMLNS&&(W._nsMap[oe.prefix?oe.localName:""]=oe.value)}function ae($,W,oe,ve){$&&$._inc++;var ke=oe.namespaceURI;ke===t.XMLNS&&delete W._nsMap[oe.prefix?oe.localName:""]}function le($,W,oe){if($&&$._inc){$._inc++;var ve=W.childNodes;if(oe)ve[ve.length++]=oe;else{for(var ke=W.firstChild,V=0;ke;)ve[V++]=ke,ke=ke.nextSibling;ve.length=V,delete ve[ve.length]}}}function te($,W){var oe=W.previousSibling,ve=W.nextSibling;return oe?oe.nextSibling=ve:$.firstChild=ve,ve?ve.previousSibling=oe:$.lastChild=oe,W.parentNode=null,W.previousSibling=null,W.nextSibling=null,le($.ownerDocument,$),W}function ce($){return $&&($.nodeType===G.DOCUMENT_NODE||$.nodeType===G.DOCUMENT_FRAGMENT_NODE||$.nodeType===G.ELEMENT_NODE)}function pe($){return $&&(xe($)||J($)||Ne($)||$.nodeType===G.DOCUMENT_FRAGMENT_NODE||$.nodeType===G.COMMENT_NODE||$.nodeType===G.PROCESSING_INSTRUCTION_NODE)}function Ne($){return $&&$.nodeType===G.DOCUMENT_TYPE_NODE}function xe($){return $&&$.nodeType===G.ELEMENT_NODE}function J($){return $&&$.nodeType===G.TEXT_NODE}function ne($,W){var oe=$.childNodes||[];if(e(oe,xe)||Ne(W))return!1;var ve=e(oe,Ne);return!(W&&ve&&oe.indexOf(ve)>oe.indexOf(W))}function ye($,W){var oe=$.childNodes||[];function ve(V){return xe(V)&&V!==W}if(e(oe,ve))return!1;var ke=e(oe,Ne);return!(W&&ke&&oe.indexOf(ke)>oe.indexOf(W))}function _e($,W,oe){if(!ce($))throw new P(k,"Unexpected parent node type "+$.nodeType);if(oe&&oe.parentNode!==$)throw new P(C,"child not in parent");if(!pe(W)||Ne(W)&&$.nodeType!==G.DOCUMENT_NODE)throw new P(k,"Unexpected node type "+W.nodeType+" for parent node type "+$.nodeType)}function me($,W,oe){var ve=$.childNodes||[],ke=W.childNodes||[];if(W.nodeType===G.DOCUMENT_FRAGMENT_NODE){var V=ke.filter(xe);if(V.length>1||e(ke,J))throw new P(k,"More than one element or text in fragment");if(V.length===1&&!ne($,oe))throw new P(k,"Element in fragment can not be inserted before doctype")}if(xe(W)&&!ne($,oe))throw new P(k,"Only one element can be added and only after doctype");if(Ne(W)){if(e(ve,Ne))throw new P(k,"Only one doctype is allowed");var Z=e(ve,xe);if(oe&&ve.indexOf(Z)<ve.indexOf(oe))throw new P(k,"Doctype can only be inserted before an element");if(!oe&&Z)throw new P(k,"Doctype can not be appended since element is present")}}function Ce($,W,oe){var ve=$.childNodes||[],ke=W.childNodes||[];if(W.nodeType===G.DOCUMENT_FRAGMENT_NODE){var V=ke.filter(xe);if(V.length>1||e(ke,J))throw new P(k,"More than one element or text in fragment");if(V.length===1&&!ye($,oe))throw new P(k,"Element in fragment can not be inserted before doctype")}if(xe(W)&&!ye($,oe))throw new P(k,"Only one element can be added and only after doctype");if(Ne(W)){if(e(ve,function(Ie){return Ne(Ie)&&Ie!==oe}))throw new P(k,"Only one doctype is allowed");var Z=e(ve,xe);if(oe&&ve.indexOf(Z)<ve.indexOf(oe))throw new P(k,"Doctype can only be inserted before an element")}}function de($,W,oe,ve){_e($,W,oe),$.nodeType===G.DOCUMENT_NODE&&(ve||me)($,W,oe);var ke=W.parentNode;if(ke&&ke.removeChild(W),W.nodeType===p){var V=W.firstChild;if(V==null)return W;var Z=W.lastChild}else V=Z=W;var De=oe?oe.previousSibling:$.lastChild;V.previousSibling=De,Z.nextSibling=oe,De?De.nextSibling=V:$.firstChild=V,oe==null?$.lastChild=Z:oe.previousSibling=Z;do{V.parentNode=$;var Ie=$.ownerDocument||$;Ae(V,Ie)}while(V!==Z&&(V=V.nextSibling));return le($.ownerDocument||$,$),W.nodeType==p&&(W.firstChild=W.lastChild=null),W}function Ae($,W){if($.ownerDocument!==W){if($.ownerDocument=W,$.nodeType===f&&$.attributes)for(var oe=0;oe<$.attributes.length;oe++){var ve=$.attributes.item(oe);ve&&(ve.ownerDocument=W)}for(var ke=$.firstChild;ke;)Ae(ke,W),ke=ke.nextSibling}}function Se($,W){W.parentNode&&W.parentNode.removeChild(W),W.parentNode=$,W.previousSibling=$.lastChild,W.nextSibling=null,W.previousSibling?W.previousSibling.nextSibling=W:$.firstChild=W,$.lastChild=W,le($.ownerDocument,$,W);var oe=$.ownerDocument||$;return Ae(W,oe),W}ge.prototype={nodeName:"#document",nodeType:E,doctype:null,documentElement:null,_inc:1,insertBefore:function($,W){if($.nodeType==p){for(var oe=$.firstChild;oe;){var ve=oe.nextSibling;this.insertBefore(oe,W),oe=ve}return $}return de(this,$,W),Ae($,this),this.documentElement===null&&$.nodeType===f&&(this.documentElement=$),$},removeChild:function($){return this.documentElement==$&&(this.documentElement=null),te(this,$)},replaceChild:function($,W){de(this,$,W,Ce),Ae($,this),W&&this.removeChild(W),xe($)&&(this.documentElement=$)},importNode:function($,W){return wr(this,$,W)},getElementById:function($){var W=null;return ie(this.documentElement,function(oe){if(oe.nodeType==f&&oe.getAttribute("id")==$)return W=oe,!0}),W},getElementsByClassName:function($){var W=i($);return new B(this,function(oe){var ve=[];return W.length>0&&ie(oe.documentElement,function(ke){if(ke!==oe&&ke.nodeType===f){var V=ke.getAttribute("class");if(V){var Z=$===V;if(!Z){var De=i(V);Z=W.every(l(De))}Z&&ve.push(ke)}}}),ve})},createElement:function($){var W=new be;W.ownerDocument=this,W.nodeName=$,W.tagName=$,W.localName=$,W.childNodes=new M;var oe=W.attributes=new R;return oe._ownerElement=W,W},createDocumentFragment:function(){var $=new Ee;return $.ownerDocument=this,$.childNodes=new M,$},createTextNode:function($){var W=new Ge;return W.ownerDocument=this,W.appendData($),W},createComment:function($){var W=new Et;return W.ownerDocument=this,W.appendData($),W},createCDATASection:function($){var W=new q;return W.ownerDocument=this,W.appendData($),W},createProcessingInstruction:function($,W){var oe=new Te;return oe.ownerDocument=this,oe.tagName=oe.nodeName=oe.target=$,oe.nodeValue=oe.data=W,oe},createAttribute:function($){var W=new Ve;return W.ownerDocument=this,W.name=$,W.nodeName=$,W.localName=$,W.specified=!0,W},createEntityReference:function($){var W=new he;return W.ownerDocument=this,W.nodeName=$,W},createElementNS:function($,W){var oe=new be,ve=W.split(":"),ke=oe.attributes=new R;return oe.childNodes=new M,oe.ownerDocument=this,oe.nodeName=W,oe.tagName=W,oe.namespaceURI=$,ve.length==2?(oe.prefix=ve[0],oe.localName=ve[1]):oe.localName=W,ke._ownerElement=oe,oe},createAttributeNS:function($,W){var oe=new Ve,ve=W.split(":");return oe.ownerDocument=this,oe.nodeName=W,oe.name=W,oe.namespaceURI=$,oe.specified=!0,ve.length==2?(oe.prefix=ve[0],oe.localName=ve[1]):oe.localName=W,oe}},u(ge,G);function be(){this._nsMap={}}be.prototype={nodeType:f,hasAttribute:function($){return this.getAttributeNode($)!=null},getAttribute:function($){var W=this.getAttributeNode($);return W&&W.value||""},getAttributeNode:function($){return this.attributes.getNamedItem($)},setAttribute:function($,W){var oe=this.ownerDocument.createAttribute($);oe.value=oe.nodeValue=""+W,this.setAttributeNode(oe)},removeAttribute:function($){var W=this.getAttributeNode($);W&&this.removeAttributeNode(W)},appendChild:function($){return $.nodeType===p?this.insertBefore($,null):Se(this,$)},setAttributeNode:function($){return this.attributes.setNamedItem($)},setAttributeNodeNS:function($){return this.attributes.setNamedItemNS($)},removeAttributeNode:function($){return this.attributes.removeNamedItem($.nodeName)},removeAttributeNS:function($,W){var oe=this.getAttributeNodeNS($,W);oe&&this.removeAttributeNode(oe)},hasAttributeNS:function($,W){return this.getAttributeNodeNS($,W)!=null},getAttributeNS:function($,W){var oe=this.getAttributeNodeNS($,W);return oe&&oe.value||""},setAttributeNS:function($,W,oe){var ve=this.ownerDocument.createAttributeNS($,W);ve.value=ve.nodeValue=""+oe,this.setAttributeNode(ve)},getAttributeNodeNS:function($,W){return this.attributes.getNamedItemNS($,W)},getElementsByTagName:function($){return new B(this,function(W){var oe=[];return ie(W,function(ve){ve!==W&&ve.nodeType==f&&($==="*"||ve.tagName==$)&&oe.push(ve)}),oe})},getElementsByTagNameNS:function($,W){return new B(this,function(oe){var ve=[];return ie(oe,function(ke){ke!==oe&&ke.nodeType===f&&($==="*"||ke.namespaceURI===$)&&(W==="*"||ke.localName==W)&&ve.push(ke)}),ve})}},ge.prototype.getElementsByTagName=be.prototype.getElementsByTagName,ge.prototype.getElementsByTagNameNS=be.prototype.getElementsByTagNameNS,u(be,G);function Ve(){}Ve.prototype.nodeType=d,u(Ve,G);function ht(){}ht.prototype={data:"",substringData:function($,W){return this.data.substring($,$+W)},appendData:function($){$=this.data+$,this.nodeValue=this.data=$,this.length=$.length},insertData:function($,W){this.replaceData($,0,W)},appendChild:function($){throw new Error(A[k])},deleteData:function($,W){this.replaceData($,W,"")},replaceData:function($,W,oe){var ve=this.data.substring(0,$),ke=this.data.substring($+W);oe=ve+oe+ke,this.nodeValue=this.data=oe,this.length=oe.length}},u(ht,G);function Ge(){}Ge.prototype={nodeName:"#text",nodeType:g,splitText:function($){var W=this.data,oe=W.substring($);W=W.substring(0,$),this.data=this.nodeValue=W,this.length=W.length;var ve=this.ownerDocument.createTextNode(oe);return this.parentNode&&this.parentNode.insertBefore(ve,this.nextSibling),ve}},u(Ge,ht);function Et(){}Et.prototype={nodeName:"#comment",nodeType:N},u(Et,ht);function q(){}q.prototype={nodeName:"#cdata-section",nodeType:m},u(q,ht);function x(){}x.prototype.nodeType=w,u(x,G);function T(){}T.prototype.nodeType=S,u(T,G);function Q(){}Q.prototype.nodeType=b,u(Q,G);function he(){}he.prototype.nodeType=v,u(he,G);function Ee(){}Ee.prototype.nodeName="#document-fragment",Ee.prototype.nodeType=p,u(Ee,G);function Te(){}Te.prototype.nodeType=_,u(Te,G);function ze(){}ze.prototype.serializeToString=function($,W,oe){return rt.call($,W,oe)},G.prototype.toString=rt;function rt($,W){var oe=[],ve=this.nodeType==9&&this.documentElement||this,ke=ve.prefix,V=ve.namespaceURI;if(V&&ke==null){var ke=ve.lookupPrefix(V);if(ke==null)var Z=[{namespace:V,prefix:null}]}return Xe(this,oe,$,W,Z),oe.join("")}function Ye($,W,oe){var ve=$.prefix||"",ke=$.namespaceURI;if(!ke||ve==="xml"&&ke===t.XML||ke===t.XMLNS)return!1;for(var V=oe.length;V--;){var Z=oe[V];if(Z.prefix===ve)return Z.namespace!==ke}return!0}function tt($,W,oe){$.push(" ",W,'="',oe.replace(/[<>&"\t\n\r]/g,se),'"')}function Xe($,W,oe,ve,ke){if(ke||(ke=[]),ve)if($=ve($),$){if(typeof $=="string"){W.push($);return}}else return;switch($.nodeType){case f:var V=$.attributes,Z=V.length,xt=$.firstChild,De=$.tagName;oe=t.isHTML($.namespaceURI)||oe;var Ie=De;if(!oe&&!$.prefix&&$.namespaceURI){for(var Be,at=0;at<V.length;at++)if(V.item(at).name==="xmlns"){Be=V.item(at).value;break}if(!Be)for(var wt=ke.length-1;wt>=0;wt--){var Kt=ke[wt];if(Kt.prefix===""&&Kt.namespace===$.namespaceURI){Be=Kt.namespace;break}}if(Be!==$.namespaceURI)for(var wt=ke.length-1;wt>=0;wt--){var Kt=ke[wt];if(Kt.namespace===$.namespaceURI){Kt.prefix&&(Ie=Kt.prefix+":"+De);break}}}W.push("<",Ie);for(var dt=0;dt<Z;dt++){var gt=V.item(dt);gt.prefix=="xmlns"?ke.push({prefix:gt.localName,namespace:gt.value}):gt.nodeName=="xmlns"&&ke.push({prefix:"",namespace:gt.value})}for(var dt=0;dt<Z;dt++){var gt=V.item(dt);if(Ye(gt,oe,ke)){var nn=gt.prefix||"",vn=gt.namespaceURI;tt(W,nn?"xmlns:"+nn:"xmlns",vn),ke.push({prefix:nn,namespace:vn})}Xe(gt,W,oe,ve,ke)}if(De===Ie&&Ye($,oe,ke)){var nn=$.prefix||"",vn=$.namespaceURI;tt(W,nn?"xmlns:"+nn:"xmlns",vn),ke.push({prefix:nn,namespace:vn})}if(xt||oe&&!/^(?:meta|link|img|br|hr|input)$/i.test(De)){if(W.push(">"),oe&&/^script$/i.test(De))for(;xt;)xt.data?W.push(xt.data):Xe(xt,W,oe,ve,ke.slice()),xt=xt.nextSibling;else for(;xt;)Xe(xt,W,oe,ve,ke.slice()),xt=xt.nextSibling;W.push("</",Ie,">")}else W.push("/>");return;case E:case p:for(var xt=$.firstChild;xt;)Xe(xt,W,oe,ve,ke.slice()),xt=xt.nextSibling;return;case d:return tt(W,$.name,$.value);case g:return W.push($.data.replace(/[<&>]/g,se));case m:return W.push("<![CDATA[",$.data,"]]>");case N:return W.push("<!--",$.data,"-->");case w:var Mn=$.publicId,Xt=$.systemId;if(W.push("<!DOCTYPE ",$.name),Mn)W.push(" PUBLIC ",Mn),Xt&&Xt!="."&&W.push(" ",Xt),W.push(">");else if(Xt&&Xt!=".")W.push(" SYSTEM ",Xt,">");else{var ut=$.internalSubset;ut&&W.push(" [",ut,"]"),W.push(">")}return;case _:return W.push("<?",$.target," ",$.data,"?>");case v:return W.push("&",$.nodeName,";");default:W.push("??",$.nodeName)}}function wr($,W,oe){var ve;switch(W.nodeType){case f:ve=W.cloneNode(!1),ve.ownerDocument=$;case p:break;case d:oe=!0;break}if(ve||(ve=W.cloneNode(!1)),ve.ownerDocument=$,ve.parentNode=null,oe)for(var ke=W.firstChild;ke;)ve.appendChild(wr($,ke,oe)),ke=ke.nextSibling;return ve}function vr($,W,oe){var ve=new W.constructor;for(var ke in W)if(Object.prototype.hasOwnProperty.call(W,ke)){var V=W[ke];typeof V!="object"&&V!=ve[ke]&&(ve[ke]=V)}switch(W.childNodes&&(ve.childNodes=new M),ve.ownerDocument=$,ve.nodeType){case f:var Z=W.attributes,De=ve.attributes=new R,Ie=Z.length;De._ownerElement=ve;for(var Be=0;Be<Ie;Be++)ve.setAttributeNode(vr($,Z.item(Be),!0));break;case d:oe=!0}if(oe)for(var at=W.firstChild;at;)ve.appendChild(vr($,at,oe)),at=at.nextSibling;return ve}function Kn($,W,oe){$[W]=oe}try{if(Object.defineProperty){let $=function(W){switch(W.nodeType){case f:case p:var oe=[];for(W=W.firstChild;W;)W.nodeType!==7&&W.nodeType!==8&&oe.push($(W)),W=W.nextSibling;return oe.join("");default:return W.nodeValue}};Object.defineProperty(B.prototype,"length",{get:function(){return O(this),this.$$length}}),Object.defineProperty(G.prototype,"textContent",{get:function(){return $(this)},set:function(W){switch(this.nodeType){case f:case p:for(;this.firstChild;)this.removeChild(this.firstChild);(W||String(W))&&this.appendChild(this.ownerDocument.createTextNode(W));break;default:this.data=W,this.value=W,this.nodeValue=W}}}),Kn=function(W,oe,ve){W["$$"+oe]=ve}}}catch{}return Tn.DocumentType=x,Tn.DOMException=P,Tn.DOMImplementation=I,Tn.Element=be,Tn.Node=G,Tn.NodeList=M,Tn.XMLSerializer=ze,Tn}var Xr={},Pa={},Lo;function Ih(){return Lo||(Lo=1,(function(n){var e=Ni().freeze;n.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),n.HTML_ENTITIES=e({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:`
`,nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),n.entityMap=n.HTML_ENTITIES})(Pa)),Pa}var Ti={},Oo;function Rh(){if(Oo)return Ti;Oo=1;var n=Ni().NAMESPACE,e=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,t=new RegExp("[\\-\\.0-9"+e.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),r=new RegExp("^"+e.source+t.source+"*(?::"+e.source+t.source+"*)?$"),a=0,s=1,i=2,l=3,o=4,u=5,c=6,f=7;function d(k,C){this.message=k,this.locator=C,Error.captureStackTrace&&Error.captureStackTrace(this,d)}d.prototype=new Error,d.prototype.name=d.name;function g(){}g.prototype={parse:function(k,C,L){var P=this.domBuilder;P.startDocument(),w(C,C={}),m(k,C,L,P,this.errorHandler),P.endDocument()}};function m(k,C,L,P,M){function B(Se){if(Se>65535){Se-=65536;var be=55296+(Se>>10),Ve=56320+(Se&1023);return String.fromCharCode(be,Ve)}else return String.fromCharCode(Se)}function O(Se){var be=Se.slice(1,-1);return Object.hasOwnProperty.call(L,be)?L[be]:be.charAt(0)==="#"?B(parseInt(be.substr(1).replace("x","0x"))):(M.error("entity not found:"+Se),Se)}function R(Se){if(Se>ge){var be=k.substring(ge,Se).replace(/&#?\w+;/g,O);G&&H(ge),P.characters(be,0,Se-ge),ge=Se}}function H(Se,be){for(;Se>=K&&(be=I.exec(k));)j=be.index,K=j+be[0].length,G.lineNumber++;G.columnNumber=Se-j+1}for(var j=0,K=0,I=/.*(?:\r\n?|\n)|.*$/g,G=P.locator,se=[{currentNSMap:C}],ie={},ge=0;;){try{var ee=k.indexOf("<",ge);if(ee<0){if(!k.substr(ge).match(/^\s*$/)){var ae=P.doc,le=ae.createTextNode(k.substr(ge));ae.appendChild(le),P.currentElement=le}return}switch(ee>ge&&R(ee),k.charAt(ee+1)){case"/":var _e=k.indexOf(">",ee+3),te=k.substring(ee+2,_e).replace(/[ \t\n\r]+$/g,""),ce=se.pop();_e<0?(te=k.substring(ee+2).replace(/[\s<].*/,""),M.error("end tag name: "+te+" is not complete:"+ce.tagName),_e=ee+1+te.length):te.match(/\s</)&&(te=te.replace(/[\s<].*/,""),M.error("end tag name: "+te+" maybe not complete"),_e=ee+1+te.length);var pe=ce.localNSMap,Ne=ce.tagName==te,xe=Ne||ce.tagName&&ce.tagName.toLowerCase()==te.toLowerCase();if(xe){if(P.endElement(ce.uri,ce.localName,te),pe)for(var J in pe)Object.prototype.hasOwnProperty.call(pe,J)&&P.endPrefixMapping(J);Ne||M.fatalError("end tag name: "+te+" is not match the current start tagName:"+ce.tagName)}else se.push(ce);_e++;break;case"?":G&&H(ee),_e=S(k,ee,P);break;case"!":G&&H(ee),_e=p(k,ee,P,M);break;default:G&&H(ee);var ne=new F,ye=se[se.length-1].currentNSMap,_e=b(k,ee,ne,ye,O,M),me=ne.length;if(!ne.closed&&E(k,_e,ne.tagName,ie)&&(ne.closed=!0,L.nbsp||M.warning("unclosed xml attribute")),G&&me){for(var Ce=v(G,{}),de=0;de<me;de++){var Ae=ne[de];H(Ae.offset),Ae.locator=v(G,{})}P.locator=Ce,_(ne,P,ye)&&se.push(ne),P.locator=G}else _(ne,P,ye)&&se.push(ne);n.isHTML(ne.uri)&&!ne.closed?_e=N(k,_e,ne.tagName,O,P):_e++}}catch(Se){if(Se instanceof d)throw Se;M.error("element parse error: "+Se),_e=-1}_e>ge?ge=_e:R(Math.max(ee,ge)+1)}}function v(k,C){return C.lineNumber=k.lineNumber,C.columnNumber=k.columnNumber,C}function b(k,C,L,P,M,B){function O(G,se,ie){L.attributeNames.hasOwnProperty(G)&&B.fatalError("Attribute "+G+" redefined"),L.addValue(G,se.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,M),ie)}for(var R,H,j=++C,K=a;;){var I=k.charAt(j);switch(I){case"=":if(K===s)R=k.slice(C,j),K=l;else if(K===i)K=l;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(K===l||K===s)if(K===s&&(B.warning('attribute value must after "="'),R=k.slice(C,j)),C=j+1,j=k.indexOf(I,C),j>0)H=k.slice(C,j),O(R,H,C-1),K=u;else throw new Error("attribute value no end '"+I+"' match");else if(K==o)H=k.slice(C,j),O(R,H,C),B.warning('attribute "'+R+'" missed start quot('+I+")!!"),C=j+1,K=u;else throw new Error('attribute value must after "="');break;case"/":switch(K){case a:L.setTagName(k.slice(C,j));case u:case c:case f:K=f,L.closed=!0;case o:case s:break;case i:L.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return B.error("unexpected end of input"),K==a&&L.setTagName(k.slice(C,j)),j;case">":switch(K){case a:L.setTagName(k.slice(C,j));case u:case c:case f:break;case o:case s:H=k.slice(C,j),H.slice(-1)==="/"&&(L.closed=!0,H=H.slice(0,-1));case i:K===i&&(H=R),K==o?(B.warning('attribute "'+H+'" missed quot(")!'),O(R,H,C)):((!n.isHTML(P[""])||!H.match(/^(?:disabled|checked|selected)$/i))&&B.warning('attribute "'+H+'" missed value!! "'+H+'" instead!!'),O(H,H,C));break;case l:throw new Error("attribute value missed!!")}return j;case"":I=" ";default:if(I<=" ")switch(K){case a:L.setTagName(k.slice(C,j)),K=c;break;case s:R=k.slice(C,j),K=i;break;case o:var H=k.slice(C,j);B.warning('attribute "'+H+'" missed quot(")!!'),O(R,H,C);case u:K=c;break}else switch(K){case i:L.tagName,(!n.isHTML(P[""])||!R.match(/^(?:disabled|checked|selected)$/i))&&B.warning('attribute "'+R+'" missed value!! "'+R+'" instead2!!'),O(R,R,C),C=j,K=s;break;case u:B.warning('attribute space is required"'+R+'"!!');case c:K=s,C=j;break;case l:K=o,C=j;break;case f:throw new Error("elements closed character '/' and '>' must be connected to")}}j++}}function _(k,C,L){for(var P=k.tagName,M=null,I=k.length;I--;){var B=k[I],O=B.qName,R=B.value,G=O.indexOf(":");if(G>0)var H=B.prefix=O.slice(0,G),j=O.slice(G+1),K=H==="xmlns"&&j;else j=O,H=null,K=O==="xmlns"&&"";B.localName=j,K!==!1&&(M==null&&(M={},w(L,L={})),L[K]=M[K]=R,B.uri=n.XMLNS,C.startPrefixMapping(K,R))}for(var I=k.length;I--;){B=k[I];var H=B.prefix;H&&(H==="xml"&&(B.uri=n.XML),H!=="xmlns"&&(B.uri=L[H||""]))}var G=P.indexOf(":");G>0?(H=k.prefix=P.slice(0,G),j=k.localName=P.slice(G+1)):(H=null,j=k.localName=P);var se=k.uri=L[H||""];if(C.startElement(se,j,P,k),k.closed){if(C.endElement(se,j,P),M)for(H in M)Object.prototype.hasOwnProperty.call(M,H)&&C.endPrefixMapping(H)}else return k.currentNSMap=L,k.localNSMap=M,!0}function N(k,C,L,P,M){if(/^(?:script|textarea)$/i.test(L)){var B=k.indexOf("</"+L+">",C),O=k.substring(C+1,B);if(/[&<]/.test(O))return/^script$/i.test(L)?(M.characters(O,0,O.length),B):(O=O.replace(/&#?\w+;/g,P),M.characters(O,0,O.length),B)}return C+1}function E(k,C,L,P){var M=P[L];return M==null&&(M=k.lastIndexOf("</"+L+">"),M<C&&(M=k.lastIndexOf("</"+L)),P[L]=M),M<C}function w(k,C){for(var L in k)Object.prototype.hasOwnProperty.call(k,L)&&(C[L]=k[L])}function p(k,C,L,P){var M=k.charAt(C+2);switch(M){case"-":if(k.charAt(C+3)==="-"){var B=k.indexOf("-->",C+4);return B>C?(L.comment(k,C+4,B-C-4),B+3):(P.error("Unclosed comment"),-1)}else return-1;default:if(k.substr(C+3,6)=="CDATA["){var B=k.indexOf("]]>",C+9);return L.startCDATA(),L.characters(k,C+9,B-C-9),L.endCDATA(),B+3}var O=A(k,C),R=O.length;if(R>1&&/!doctype/i.test(O[0][0])){var H=O[1][0],j=!1,K=!1;R>3&&(/^public$/i.test(O[2][0])?(j=O[3][0],K=R>4&&O[4][0]):/^system$/i.test(O[2][0])&&(K=O[3][0]));var I=O[R-1];return L.startDTD(H,j,K),L.endDTD(),I.index+I[0].length}}return-1}function S(k,C,L){var P=k.indexOf("?>",C);if(P){var M=k.substring(C,P).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return M?(M[0].length,L.processingInstruction(M[1],M[2]),P+2):-1}return-1}function F(){this.attributeNames={}}F.prototype={setTagName:function(k){if(!r.test(k))throw new Error("invalid tagName:"+k);this.tagName=k},addValue:function(k,C,L){if(!r.test(k))throw new Error("invalid attribute:"+k);this.attributeNames[k]=this.length,this[this.length++]={qName:k,value:C,offset:L}},length:0,getLocalName:function(k){return this[k].localName},getLocator:function(k){return this[k].locator},getQName:function(k){return this[k].qName},getURI:function(k){return this[k].uri},getValue:function(k){return this[k].value}};function A(k,C){var L,P=[],M=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(M.lastIndex=C,M.exec(k);L=M.exec(k);)if(P.push(L),L[1])return P}return Ti.XMLReader=g,Ti.ParseError=d,Ti}var Fo;function kh(){if(Fo)return Xr;Fo=1;var n=Ni(),e=ko(),t=Ih(),r=Rh(),a=e.DOMImplementation,s=n.NAMESPACE,i=r.ParseError,l=r.XMLReader;function o(b){return b.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function u(b){this.options=b||{locator:{}}}u.prototype.parseFromString=function(b,_){var N=this.options,E=new l,w=N.domBuilder||new f,p=N.errorHandler,S=N.locator,F=N.xmlns||{},A=/\/x?html?$/.test(_),k=A?t.HTML_ENTITIES:t.XML_ENTITIES;S&&w.setDocumentLocator(S),E.errorHandler=c(p,w,S),E.domBuilder=N.domBuilder||w,A&&(F[""]=s.HTML),F.xml=F.xml||s.XML;var C=N.normalizeLineEndings||o;return b&&typeof b=="string"?E.parse(C(b),F,k):E.errorHandler.error("invalid doc source"),w.doc};function c(b,_,N){if(!b){if(_ instanceof f)return _;b=_}var E={},w=b instanceof Function;N=N||{};function p(S){var F=b[S];!F&&w&&(F=b.length==2?function(A){b(S,A)}:b),E[S]=F&&function(A){F("[xmldom "+S+"]	"+A+g(N))}||function(){}}return p("warning"),p("error"),p("fatalError"),E}function f(){this.cdata=!1}function d(b,_){_.lineNumber=b.lineNumber,_.columnNumber=b.columnNumber}f.prototype={startDocument:function(){this.doc=new a().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(b,_,N,E){var w=this.doc,p=w.createElementNS(b,N||_),S=E.length;v(this,p),this.currentElement=p,this.locator&&d(this.locator,p);for(var F=0;F<S;F++){var b=E.getURI(F),A=E.getValue(F),N=E.getQName(F),k=w.createAttributeNS(b,N);this.locator&&d(E.getLocator(F),k),k.value=k.nodeValue=A,p.setAttributeNode(k)}},endElement:function(b,_,N){var E=this.currentElement;E.tagName,this.currentElement=E.parentNode},startPrefixMapping:function(b,_){},endPrefixMapping:function(b){},processingInstruction:function(b,_){var N=this.doc.createProcessingInstruction(b,_);this.locator&&d(this.locator,N),v(this,N)},ignorableWhitespace:function(b,_,N){},characters:function(b,_,N){if(b=m.apply(this,arguments),b){if(this.cdata)var E=this.doc.createCDATASection(b);else var E=this.doc.createTextNode(b);this.currentElement?this.currentElement.appendChild(E):/^\s*$/.test(b)&&this.doc.appendChild(E),this.locator&&d(this.locator,E)}},skippedEntity:function(b){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(b){(this.locator=b)&&(b.lineNumber=0)},comment:function(b,_,N){b=m.apply(this,arguments);var E=this.doc.createComment(b);this.locator&&d(this.locator,E),v(this,E)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(b,_,N){var E=this.doc.implementation;if(E&&E.createDocumentType){var w=E.createDocumentType(b,_,N);this.locator&&d(this.locator,w),v(this,w),this.doc.doctype=w}},warning:function(b){console.warn("[xmldom warning]	"+b,g(this.locator))},error:function(b){console.error("[xmldom error]	"+b,g(this.locator))},fatalError:function(b){throw new i(b,this.locator)}};function g(b){if(b)return`
@`+(b.systemId||"")+"#[line:"+b.lineNumber+",col:"+b.columnNumber+"]"}function m(b,_,N){return typeof b=="string"?b.substr(_,N):b.length>=_+N||_?new java.lang.String(b,_,N)+"":b}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(b){f.prototype[b]=function(){return null}});function v(b,_){b.currentElement?b.currentElement.appendChild(_):b.doc.appendChild(_)}return Xr.__DOMHandler=f,Xr.normalizeLineEndings=o,Xr.DOMParser=u,Xr}var Bo;function Lh(){if(Bo)return Kr;Bo=1;var n=ko();return Kr.DOMImplementation=n.DOMImplementation,Kr.XMLSerializer=n.XMLSerializer,Kr.DOMParser=kh().DOMParser,Kr}var Po=Lh();function Oh(n){return n=n.split(";")[0].trim(),new St("http://www.w3.org/ns/iana/media-types/"+n+"#Resource")}function Fh(n,e){n.callbacks={};for(var t=e.length-1;t>=0;t--)n.callbacks[e[t]]=[];n.addHook=function(r){n.callbacks[r]||(n.callbacks[r]=[])},n.addCallback=function(r,a){n.callbacks[r].push(a)},n.removeCallback=function(r,a){for(var s=0;s<n.callbacks[r].length;s++)if(n.callbacks[r][s].name===a)return n.callbacks[r].splice(s,1),!0;return!1},n.insertCallback=function(r,a){n.callbacks[r].unshift(a)},n.fireCallbacks=function(a,s){var i=[],l=[],o=n.callbacks[a].length,u;let c;for(u=o-1;u>=0;u--)c=n.callbacks[a][u],c&&c.apply(n,s)&&i.push(c);for(u=i.length-1;u>=0;u--)l.push(i[u]);for(u=o;u<n.callbacks[a].length;u++)l.push(n.callbacks[a][u]);n.callbacks[a]=l}}function Bh(n,e){e=e||{};var t=[];e&&e.selfClosing&&e.selfClosing.split(" ").forEach(function(a){t[a]=!0});var r=[];return e&&e.skipAttributes&&e.skipAttributes.split(" ").forEach(function(a){r[a]=!0}),Mo(n,e,t,r)}function Mo(n,e,t,r){var a,s="",i=[!1];if(typeof n.nodeType>"u")return s;if(n.nodeType===1){if(n.hasAttribute("class")&&e&&e.classWithChildText&&n.matches(e.classWithChildText.class))s+=n.querySelector(e.classWithChildText.element).textContent;else if(!(e&&e.skipNodeWithClass&&n.matches("."+e.skipNodeWithClass))){var l=n.nodeName.toLowerCase();s+="<"+l;var o=[];for(a=n.attributes.length-1;a>=0;a--){var u=n.attributes[a];if(!(r&&r.length>0&&r[u.name])&&!/^\d+$/.test(u.name)){if(u.name==="class"&&e&&e.replaceClassItemWith&&u.value.split(" ").indexOf(e.replaceClassItemWith.source)>-1){var c=new RegExp(e.replaceClassItemWith.source,"g");u.value=u.value.replace(c,e.replaceClassItemWith.target).trim()}u.name==="class"&&e&&e.skipClassWithValue&&e.skipClassWithValue===u.value||o.push(u.name+"='"+u.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&quot;")+"'")}}if(o.length>0&&(e&&e.sortAttributes&&o.sort(function(d,g){return d.toLowerCase().localeCompare(g.toLowerCase())}),s+=" "+o.join(" ")),t&&t.ename)s+=" />";else{for(s+=">",s+=l==="html"?`
  `:"",i.push(l==="style"||l==="script"),a=0;a<n.childNodes.length;a++)s+=Mo(n.childNodes[a]);i.pop(),s+=l==="body"?"</"+l+`>
`:"</"+l+">"}}}else if(n.nodeType===8)s+="<!--"+n.nodeValue+"-->";else if(n.nodeType===3||n.nodeType===4){var f=n.nodeValue.replace(/\n+$/,"");s+=i[i.length-1]?f:f.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}else console.log("Warning; Cannot handle serialising nodes of type: "+n.nodeType),console.log(n);return s}function Ma(n,e,t,r){var a=function(l){return l.termType==="BlankNode"?null:l},s=function(l){var o=t.statementsMatching(l).map(function(u){return""+a(u.subject)+" "+a(u.predicate)+" "+a(u.object)}).concat(t.statementsMatching(void 0,void 0,l).map(function(u){return""+a(u.subject)+" "+a(u.predicate)+" "+a(u.object)}));return o.sort(),o.join(`
`)};const i=Object.prototype.hasOwnProperty.call(t,"compareTerms")?t.compareTerms(n,e):n.compareTerm(e);return n.termType==="BlankNode"&&e.termType==="BlankNode"?i===0?0:s(n)>s(e)?1:s(n)<s(e)?-1:i:r&&n.uri&&e.uri?(r[n.uri]||n.uri).localeCompare(r[e.uri]||e.uri):i}function Ph(n,e,t,r){return Ma(n.subject,e.subject,t,r)||Ma(n.predicate,e.predicate,t,r)||Ma(n.object,e.object,t,r)}function Nr(n,e){var t;if(e=e||{},typeof module<"u"&&module&&module.exports){var r=new Po.DOMParser().parseFromString(n,e.contentType||"application/xhtml+xml");return r}else typeof window<"u"&&window.DOMParser?t=new window.DOMParser:t=new Po.DOMParser;return t.parseFromString(n,"application/xml")}function Ua(n,e){for(var t=0;t<n.length;t++)if(n[t].subject.equals(e.subject)&&n[t].predicate.equals(e.predicate)&&n[t].object.equals(e.object)&&n[t].why.equals(e.why)){n.splice(t,1);return}throw new Error("RDFArrayRemove: Array did not contain "+e+" "+e.why)}function Mh(n){var e=""+n+`
`;if(!n.stack)return e+`No stack available.
`;for(var t=n.stack.toString().split(`
`),r=[],a=0;a<t.length;a++){var s=t[a];if(s.indexOf("ecmaunit.js")>-1)break;s.charAt(0)=="("&&(s="function"+s);var i=s.split("@");r.push(i)}for(var a=0;a<r.length;a++)e+="  "+r[a][1]+`
    `+r[a][0];return e}function Uo(n=Zt){return{boolean:n.namedNode("http://www.w3.org/2001/XMLSchema#boolean"),dateTime:n.namedNode("http://www.w3.org/2001/XMLSchema#dateTime"),decimal:n.namedNode("http://www.w3.org/2001/XMLSchema#decimal"),double:n.namedNode("http://www.w3.org/2001/XMLSchema#double"),integer:n.namedNode("http://www.w3.org/2001/XMLSchema#integer"),langString:n.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),string:n.namedNode("http://www.w3.org/2001/XMLSchema#string")}}Uo(Zt);function $o(n){return new $a(n)}class $a{constructor(e){Re(this,"_notQNameChars",`	\r
 !"#$%&'()*,+/;<=>?@[\\]^\`{|}~`),Re(this,"_notNameChars",this._notQNameChars+":"),Re(this,"validPrefix",new RegExp(/^[a-zA-Z][a-zA-Z0-9]*$/)),Re(this,"forbidden1",new RegExp(/[\\"\b\f\r\v\t\n\u0080-\uffff]/gm)),Re(this,"forbidden3",new RegExp(/[\\"\b\f\r\v\u0080-\uffff]/gm)),this.flags="",this.base=null,this.prefixes=[],this.namespaces=[];const t=Object.keys(Do());for(const r in t){const a=Do()[t[r]](""),s=t[r];this.prefixes[a]=s,this.namespaces[s]=a}this.suggestPrefix("rdf","http://www.w3.org/1999/02/22-rdf-syntax-ns#"),this.suggestPrefix("xml","reserved:reservedForFutureUse"),this.namespacesUsed=[],this.keywords=["a"],this.prefixchars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",this.incoming=null,this.formulas=[],this.store=e,this.rdfFactory=e.rdfFactory||Zt,this.xsd=Uo(this.rdfFactory)}setBase(e){return this.base=e,this}setFlags(e){return this.flags=e||"",this}toStr(e){var t=e.toNT();return e.termType==="Graph"&&(this.formulas[t]=e),t}fromStr(e){if(e[0]==="{"){var t=this.formulas[e];return t||console.log("No formula object for "+e),t}return this.store.fromNT(e)}setNamespaces(e){for(var t in e)this.setPrefix(t,e[t]);return this}setPrefix(e,t){if(e.slice(0,7)!=="default"&&e.slice(0,2)!=="ns"&&!(!e||!t)){for(let r in this.prefixes)this.prefixes[r]==e&&delete this.prefixes[r];this.prefixes[t]=e,this.namespaces[e]=t}}suggestPrefix(e,t){e.slice(0,7)!=="default"&&e.slice(0,2)!=="ns"&&(!e||!t||e in this.namespaces||t in this.prefixes||(this.prefixes[t]=e,this.namespaces[e]=t))}suggestNamespaces(e){for(var t in e)this.suggestPrefix(t,e[t]);return this}checkIntegrity(){var e,t;for(e in this.namespaces)if(this.prefixes[this.namespaces[e]]!==e)throw new Error("Serializer integity error 1: "+e+", "+this.namespaces[e]+", "+this.prefixes[this.namespaces[e]]+"!");for(t in this.prefixes)if(this.namespaces[this.prefixes[t]]!==t)throw new Error("Serializer integity error 2: "+t+", "+this.prefixs[t]+", "+this.namespaces[this.prefixes[t]]+"!")}makeUpPrefix(e){var t=e;function r(o){return!this.validPrefix.test(o)||o==="ns"||o in this.namespaces?!1:(this.prefixes[e]=o,this.namespaces[o]=e,o)}var a=r.bind(this);"#/".indexOf(t[t.length-1])>=0&&(t=t.slice(0,-1));var s=t.lastIndexOf("/");s>=0&&(t=t.slice(s+1));for(var i=0;i<t.length&&this.prefixchars.indexOf(t[i])>=0;)i++;if(t=t.slice(0,i),t.length<6&&a(t))return t;if(a(t.slice(0,3)))return t.slice(0,3);if(a(t.slice(0,2)))return t.slice(0,2);if(a(t.slice(0,4)))return t.slice(0,4);if(a(t.slice(0,1)))return t.slice(0,1);if(a(t.slice(0,5)))return t.slice(0,5);this.validPrefix.test(t)||(t="n");for(var l=0;;l++)if(a(t.slice(0,3)+l))return t.slice(0,3)+l}rootSubjects(e){for(var t={},r={},a={},s=0;s<e.length;s++){var i=e[s],l=function(v){t.hasOwnProperty(v)||(t[v]=[]),t[v].push(i.subject)},o=[i.subject,i.predicate,i.object];o.map(function(v){v.termType==="BlankNode"?a[v.toNT()]=!0:v.termType==="Collection"&&v.elements.forEach(function(b){l(b)})}),l(e[s].object);var u=r[this.toStr(i.subject)];u||(u=[]),u.push(i),r[this.toStr(i.subject)]=u}var c=[];for(var f in r)if(r.hasOwnProperty(f)){var d=this.fromStr(f);if(d.termType!=="BlankNode"||!t[d]||t[d].length!==1){c.push(d);continue}}this.incoming=t;for(var g={},m=0;m<c.length;m++)g[c[m].toNT()]=!0;return{roots:c,subjects:r,rootsHash:g,incoming:t}}toN3(e){return this.statementsToN3(e.statements)}isValidPNLocal(e){if(e.length===0)return!0;if(e[e.length-1]===".")return!1;for(var t=0;t<e.length;t++){var r=e[t];if(r!=="."&&this._notNameChars.indexOf(r)>=0)return!1}return!0}explicitURI(e){return this.flags.indexOf("r")<0&&this.base?e=Oa(this.base,e):this.flags.indexOf("u")>=0?e=$h(e):e=Uh(decodeURI(e)),"<"+e+">"}statementsToNTriples(e){var t=e.slice();t.sort();for(var r="",a="http://www.w3.org/1999/02/22-rdf-syntax-ns#",s=this,i=this.store,l=this.rdfFactory,o=function(d){if(d.termType!=="Collection")return s.atomicTermToN3(d);for(var g=d.elements,m=i.sym(a+"nill"),v=g.length-1;v>=0;v--){var b=l.blankNode();r+=o(b)+" "+o(i.sym(a+"first"))+" "+o(g[v])+`.
`,r+=o(b)+" "+o(i.sym(a+"rest"))+" "+o(m)+`.
`,m=b}return s.atomicTermToN3(m)},u=0;u<t.length;u++){var c=t[u],f="";f+=o(c.subject)+" ",f+=o(c.predicate)+" ",f+=o(c.object)+" ",this.flags.indexOf("q")>=0&&(f+=o(c.why)+" "),f+=`.
`,r+=f}return r}statementsToN3(e){var t=4,r=80,a=this.store,s={"http://www.w3.org/1999/02/22-rdf-syntax-ns#type":"aaa:00"},i=function(F,A){return Ph(F,A,a,s)};e.sort(i),this.base&&!this.defaultNamespace&&(this.defaultNamespace=this.base+"#");var l={};this.flags.indexOf("s")<0&&(l["http://www.w3.org/2002/07/owl#sameAs"]="="),this.flags.indexOf("t")<0&&(l["http://www.w3.org/1999/02/22-rdf-syntax-ns#type"]="a"),this.flags.indexOf("i")<0&&(l["http://www.w3.org/2000/10/swap/log#implies"]="=>");var o=function(F){for(var A="",k=0;k<F;k++)A+=" ";return A},u=function(F){for(var A="",k=0;k<F.length;k++){var C=F[k],L=typeof C=="string"?C:u(C);if(k!==0){var P=A.slice(-1)||" ";L===","||L===";"||L==="."&&!"0123456789.:".includes(P)||(A+=" ")}A+=L}return A},c=function(F,A){var k="",C=1e5;A===void 0&&(A=-1);for(var L=0;L<F.length;L++){var P=F[L];if(typeof P!="string"){var M=c(P,A+1);if(M.length<10*(r-t*A)&&M.indexOf('"""')<0){var B=u(P);B.length<r-t*A&&(P=B,M="")}M&&(C=1e4),k+=M}if(typeof P=="string"){if(P.length===1&&k.slice(-1)===`
`&&",.;".indexOf(P)>=0){k=k.slice(0,-1),P=="."&&"0123456789.:".includes(k.charAt(k.length-1))&&(k+=" ",C+=1),k+=P+`
`,C+=1;continue}if(C<t*A+4||C+P.length+1<r&&";.".indexOf(k[k.length-2])<0)k=k.slice(0,-1)+" "+P+`
`,C+=P.length+1;else{let O=o(t*A)+P;k+=O+`
`,C=O.length,A<0&&(k+=`
`,C=1e5)}}}return k};function f(F){for(var A=this.rootSubjects(F),k=A.roots,C=[],L=0;L<k.length;L++){var P=k[L];C.push(g(P,A))}return C}var d=f.bind(this);function g(F,A){return F.termType==="BlankNode"&&!A.incoming[F]?_(F,A,!0).concat(["."]):[E(F,A)].concat([v(F,A)]).concat(["."])}function m(F,A){var k=[],C=null,L=A.subjects[this.toStr(F)]||[];if(typeof L>"u")throw new Error("Cant find statements for "+F);for(var P=[],M=0;M<L.length;M++){var B=L[M];B.predicate.uri===C?P.push(","):(C&&(k=k.concat([P]).concat([";"]),P=[]),k.push(l[B.predicate.uri]?l[B.predicate.uri]:E(B.predicate,A))),C=B.predicate.uri,P.push(_(B.object,A))}return k=k.concat([P]),k}var v=m.bind(this);function b(F,A,k){return F.termType==="BlankNode"&&(k||A.rootsHash[F.toNT()]===void 0)?A.subjects[this.toStr(F)]?["[",v(F,A),"]"]:"[]":E(F,A)}var _=b.bind(this);function N(F,A){var k,C;switch(F.termType){case"Graph":return C=["{"],C=C.concat(d(F.statements)),C.concat(["}"]);case"Collection":for(C=["("],k=0;k<F.elements.length;k++)C.push([_(F.elements[k],A)]);return C.push(")"),C;default:return this.atomicTermToN3(F)}}$a.prototype.termToN3=E;var E=N.bind(this);function w(){var F="";this.flags.indexOf("d")<0&&this.defaultNamespace&&(F+="@prefix : "+this.explicitURI(this.defaultNamespace)+`.
`);for(var A in this.prefixes)this.prefixes.hasOwnProperty(A)&&this.namespacesUsed[A]&&(F+="@prefix "+this.prefixes[A]+": "+this.explicitURI(A)+`.
`);return F+`
`}var p=w.bind(this),S=d(e);return p()+c(S)}atomicTermToN3(e,t){switch(e.termType){case"BlankNode":case"Variable":return e.toNT();case"Literal":var r=e.value;if(typeof r!="string")throw new TypeError("Value of RDF literal node must be a string");if(e.datatype&&this.flags.indexOf("x")<0)switch(e.datatype.uri){case"http://www.w3.org/2001/XMLSchema#integer":return r;case"http://www.w3.org/2001/XMLSchema#decimal":return r.indexOf(".")<0&&(r+=".0"),r;case"http://www.w3.org/2001/XMLSchema#double":{const s=r.toLowerCase().indexOf("e")>0;return r.indexOf(".")<0&&!s&&(r+=".0"),s||(r+="e0"),r}case"http://www.w3.org/2001/XMLSchema#boolean":return e.value==="1"?"true":"false"}var a=this.stringToN3(e.value,this.flags);return e.language?a+="@"+e.language:e.datatype.equals(this.xsd.string)||(a+="^^"+this.atomicTermToN3(e.datatype,t)),a;case"NamedNode":return this.symbolToN3(e);case"DefaultGraph":return"";default:throw new Error("Internal: atomicTermToN3 cannot handle "+e+" of termType: "+e.termType)}}stringToN3(e,t){t||(t="e");var r="",a,s,i,l,o;for(e.length>20&&e.slice(-1)!=='"'&&t.indexOf("n")<0&&(e.indexOf(`
`)>0||e.indexOf('"')>0)?(l='"""',o=this.forbidden3):(l='"',o=this.forbidden1),a=0;a<e.length;){o.lastIndex=0;var u=o.exec(e.slice(a));if(u==null)break;s=a+o.lastIndex-1,r+=e.slice(a,s);var c=e[s];c==='"'&&l==='"""'&&e.slice(s,s+3)!=='"""'?r+=c:(i=`\b\f\r	\v
\\"`.indexOf(c),i>=0?r+="\\"+'bfrtvn\\"'[i]:t.indexOf("e")>=0?r+="\\u"+("000"+c.charCodeAt(0).toString(16).toLowerCase()).slice(-4):r+=c),a=s+1}return l+r+e.slice(a)+l}symbolToN3(e){var t=e.uri,r=t.indexOf("#");if(r<0&&this.flags.indexOf("/")<0&&(r=t.lastIndexOf("/")),r>=0&&this.flags.indexOf("p")<0&&(t.indexOf("http")===0||t.indexOf("ws")===0||t.indexOf("file")===0)){var a=t.slice(r+1),s=t.slice(0,r+1),i=t.indexOf("://")+4,l=this.base?this.base.slice(0,Math.max(this.base.lastIndexOf("/"),this.base.lastIndexOf("#"))+1):null,o=l&&s===l,u=this.flags.indexOf("o")>=0&&a.indexOf(".")>=0,c=!o&&!u&&s.length>i&&this.isValidPNLocal(a);if(c){if(this.defaultNamespace&&this.defaultNamespace===s&&this.flags.indexOf("d")<0)return this.flags.indexOf("k")>=0&&this.keyords.indexOf(a)<0?a:":"+a;var f=this.prefixes[s];if(f||(f=this.makeUpPrefix(s)),f)return this.namespacesUsed[s]=!0,f+":"+a}}return this.explicitURI(t)}writeStore(e){var t=this.store,r=t.fetcher,a=r&&r.appNode,s=this.store.index[3];for(var i in s){var l=t.fromNT(i);a&&l.equals(a)||e(`
`+this.atomicTermToN3(l)+" "+this.atomicTermToN3(t.sym("http://www.w3.org/2000/10/swap/log#semantics"))+" { "+this.statementsToN3(t.statementsMatching(void 0,void 0,void 0,l))+` }.
`)}t.statementsMatching(void 0,t.sym("http://www.w3.org/2007/ont/link#requestedURI")).map(function(c){e(`
<`+c.object.value+`> log:metadata {
`);var f=t.statementsMatching(void 0,void 0,void 0,c.subject);e(this.statementsToN3(this.statementsToN3(f))),e(`}.
`)});var o=[];a&&o.push(a);var u=[];o.map(function(c){u=u.concat(t.statementsMatching(void 0,void 0,void 0,c))}),e(this.statementsToN3(u))}statementsToXML(e){var t=4,r=80,a=[];a["http://www.w3.org/1999/02/22-rdf-syntax-ns#"]=!0;var s="http://www.w3.org/1999/02/22-rdf-syntax-ns#_",i=function(C){for(var L="",P=0;P<C;P++)L+=" ";return L},l=function(C){for(var L="",P=0;P<C.length;P++){var M=C[P],B=typeof M=="string"?M:l(M);L+=B}return L},o=function(C,L){var P="",M,B=1e5;L||(L=0);for(var O=0;O<C.length;O++){var R=C[O];if(typeof R!="string"){var H=o(R,L+1);H.length<10*(r-t*L)&&H.indexOf('"""')<0&&(M=l(R),M.length<r-t*L&&(R="   "+M,H="")),H&&(B=1e4),P+=H}typeof R=="string"&&(B<t*L+4?(P=P.slice(0,-1)+" "+R+`
`,B+=R.length+1):(M=i(t*L)+R,P+=M+`
`,B=M.length))}return P};function u(C){this.suggestPrefix("rdf","http://www.w3.org/1999/02/22-rdf-syntax-ns#");for(var L=this.rootSubjects(C),P=L.roots,M=[],B=0;B<P.length;B++){var O=P[B];M.push(v(O,L))}return M}var c=u.bind(this);function f(C){return typeof C>"u"?"@@@undefined@@@@":C.replace(/[&<"]/g,function(L){switch(L[0]){case"&":return"&amp;";case"<":return"&lt;";case'"':return"&quot;"}})}function d(C){return f(this.base?Oa(this.base,C.uri):C.uri)}var g=d.bind(this);function m(C,L){var P=[],M,B,O,R,H=L.subjects[this.toStr(C)];if(typeof H>"u")return N(C,L);H.sort(function(ie,ge){var ee=ie.predicate.uri,ae=ge.predicate.uri;if(ee.substring(0,s.length)===s||ae.substring(0,s.length)===s)return ee.localeCompare(ae);var le=ee.substring(s.length),te=ae.substring(s.length),ce=parseInt(le,10),pe=parseInt(te,10);return isNaN(ce)||isNaN(pe)||ce!==le||pe!==te?ee.localeCompare(ae):ce-pe});for(var j=0;j<H.length;j++){if(O=H[j],O.predicate.uri==="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"&&!M&&O.object.termType==="NamedNode"){M=O.object;continue}if(R=O.predicate,R.uri.substr(0,s.length)===s){var K=R.uri.substr(s.length),I=parseInt(K,10);K===I.toString()&&(R=this.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#li"))}switch(B=w(R),O.object.termType){case"BlankNode":L.incoming[O.object].length===1?P=P.concat(["<"+B+' rdf:parseType="Resource">',v(O.object,L),"</"+B+">"]):P=P.concat(["<"+B+' rdf:nodeID="'+O.object.toNT().slice(2)+'"/>']);break;case"NamedNode":P=P.concat(["<"+B+' rdf:resource="'+g(O.object)+'"/>']);break;case"Literal":P=P.concat(["<"+B+(O.object.language?' xml:lang="'+O.object.language+'"':O.object.datatype.equals(this.xsd.string)?"":' rdf:datatype="'+f(O.object.datatype.uri)+'"')+">"+f(O.object.value)+"</"+B+">"]);break;case"Collection":P=P.concat(["<"+B+' rdf:parseType="Collection">',b(O.object,L),"</"+B+">"]);break;default:throw new Error("Can't serialize object of type "+O.object.termType+" into XML")}}var G=M?w(M):"rdf:Description",se="";return C.termType==="BlankNode"?(!L.incoming[C]||L.incoming[C].length!==1)&&(se=' rdf:nodeID="'+C.toNT().slice(2)+'"'):se=' rdf:about="'+g(C)+'"',["<"+G+se+">"].concat([P]).concat(["</"+G+">"])}var v=m.bind(this);function b(C,L){for(var P=[],M=0;M<C.elements.length;M++)P.push(v(C.elements[M],L));return P}function _(C,L){var P=[],M=L.subjects[this.toStr(C)];if(!M)return P;M.sort();for(var B=0;B<M.length;B++){var O=M[B];switch(O.object.termType){case"BlankNode":L.rootsHash[O.object.toNT()]?P=P.concat(["<"+w(O.predicate)+' rdf:nodeID="'+O.object.toNT().slice(2)+'">',"</"+w(O.predicate)+">"]):P=P.concat(["<"+w(O.predicate)+' rdf:parseType="Resource">',N(O.object,L),"</"+w(O.predicate)+">"]);break;case"NamedNode":P=P.concat(["<"+w(O.predicate)+' rdf:resource="'+g(O.object)+'"/>']);break;case"Literal":P=P.concat(["<"+w(O.predicate)+(O.object.language?' xml:lang="'+O.object.language+'"':O.object.datatype.equals(this.xsd.string)?"":' rdf:datatype="'+f(O.object.datatype.value)+'"')+">"+f(O.object.value)+"</"+w(O.predicate)+">"]);break;case"Collection":P=P.concat(["<"+w(O.predicate)+' rdf:parseType="Collection">',b(O.object,L),"</"+w(O.predicate)+">"]);break;default:throw new Error("Can't serialize object of type "+O.object.termType+" into XML")}}return P}var N=_.bind(this);function E(C){var L=C.uri,P=L.indexOf("#");if(P<0&&this.flags.indexOf("/")<0&&(P=L.lastIndexOf("/")),P<0)throw new Error("Cannot make qname out of <"+L+">");for(var M=P+1;M<L.length;M++)if(this._notNameChars.indexOf(L[M])>=0)throw new Error('Invalid character "'+L[M]+'" cannot be in XML qname for URI: '+L);var B=L.slice(P+1),O=L.slice(0,P+1);if(this.defaultNamespace&&this.defaultNamespace===O&&this.flags.indexOf("d")<0)return B;var R=this.prefixes[O];return R||(R=this.makeUpPrefix(O)),a[O]=!0,R+":"+B}var w=E.bind(this),p=c(e),S="<rdf:RDF";this.defaultNamespace&&(S+=' xmlns="'+f(this.defaultNamespace)+'"');for(var F in a)if(a.hasOwnProperty(F)){var A=this.base&&this.flags.includes("z")?Oa(this.base,F):F;S+=`
 xmlns:`+this.prefixes[F]+'="'+f(A)+'"'}S+=">";var k=[S,p,"</rdf:RDF>"];return o(k,-1)}statementsToJsonld(e){const t=this.statementsToN3(e),r=Th.parse(t);return JSON.stringify(r,null,2)}}function Uh(n){return encodeURI(n)}function $h(n){for(var e="",t,r=0;r<n.length;r++)t=n.charCodeAt(r),t>65535?e+="\\U"+("00000000"+t.toString(16)).slice(-8):t>126?e+="\\u"+("0000"+t.toString(16)).slice(-4):e+=n[r];return e}function Qr(n,e,t,r,a,s){t=t||n?.value;const i=s||{};r=r||Zn;var l=void 0;try{var o=$o(e);i.flags&&o.setFlags(i.flags);var u=e.statementsMatching(void 0,void 0,void 0,n);switch("namespaces"in e&&o.suggestNamespaces(e.namespaces),i.namespaces&&o.setNamespaces(i.namespaces),o.setBase(t),r){case Gr:return l=o.statementsToXML(u),c(null,l);case vo:case dh:return l=o.statementsToN3(u),c(null,l);case Zn:case mh:return o.setFlags("si"+(i.flags?" "+i.flags:"")),l=o.statementsToN3(u),c(null,l);case fh:return o.setFlags("deinprstux"),l=o.statementsToNTriples(u),c(null,l);case Sa:return o.setFlags("si dr"+(i.flags?" "+i.flags:"")),l=o.statementsToJsonld(u),c(null,l);case Ia:case Da:return o.setFlags("deinprstux q"),l=o.statementsToNTriples(u),c(null,l);default:throw new Error("Serialize: Content-type "+r+" not supported for data write.")}}catch(f){if(a)return a(f,void 0);throw f}function c(f,d){if(a){a(f,d);return}else return d}}const qh=["blankNode","defaultGraph","literal","namedNode","quad","variable","supports"],Si={first:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",rest:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",nil:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"};function qo(n,e,t){const r=[];return t.reduce((a,s,i,l)=>{r.push(n.quad(a,n.namedNode(Si.first),l[i]));let o;return i<l.length-1?(o=n.blankNode(),r.push(n.quad(a,n.namedNode(Si.rest),o))):r.push(n.quad(a,n.namedNode(Si.rest),n.namedNode(Si.nil))),o},e),r}function Ht(n,e,t=0){var r=n.length;for(t<0&&(t=r+t);t<r;t++)if(n[t]===e)return t;return-1}class Yr extends lt{constructor(e=[],t=[],r=[],a=[],s={}){super(""),this.statements=e,this.constraints=t,this.initBindings=r,this.optional=a,Re(this,"termType",zr),Re(this,"classOrder",an.Graph),Re(this,"fetcher",void 0),Re(this,"isVar",0),Re(this,"ns",We),Re(this,"rdfFactory",void 0),this.rdfFactory=s&&s.rdfFactory||Zt;for(const i of qh)this[i]=(...l)=>this.rdfFactory[i](...l)}add(e,t,r,a){return arguments.length===1&&e.forEach(s=>this.add(s.subject,s.predicate,s.object,s.graph)),this.statements.push(this.rdfFactory.quad(e,t,r,a))}addStatement(e){return this.add(e)}bnode(e){return this.rdfFactory.blankNode(e)}addAll(e){e.forEach(t=>{this.add(t.subject,t.predicate,t.object,t.graph)})}any(e,t,r,a){const s=this.anyStatementMatching(e,t,r,a);return s==null?null:e==null?s.subject:t==null?s.predicate:r==null?s.object:null}anyValue(e,t,r,a){const s=this.any(e,t,r,a);return s?s.value:void 0}anyJS(e,t,r,a){const s=this.any(e,t,r,a);return s?lt.toJS(s):void 0}anyStatementMatching(e,t,r,a){let s=this.statementsMatching(e,t,r,a,!0);if(!(!s||s.length===0))return s[0]}id(e){return this.rdfFactory.id(e)}statementsMatching(e,t,r,a,s){const i=this.statements.filter(l=>(!e||e.equals(l.subject))&&(!t||t.equals(l.predicate))&&(!r||r.equals(l.object))&&(!a||a.equals(l.graph)));return s?i.length===0?[]:[i[0]]:i}bottomTypeURIs(e){let t,r,a,s,i,l,o,u;t=[];for(let c in e)if(e.hasOwnProperty(c)){for(u=e[c],o=this.each(void 0,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),this.rdfFactory.namedNode(c)),r=!0,s=0,i=o.length;s<i;s++)if(a=o[s],l=a.uri,l in e){r=!1;break}r&&(t[c]=u)}return t}collection(){return new Qt}each(e,t,r,a){const s=[];let i=this.statementsMatching(e,t,r,a,!1);if(e==null)for(let l=0,o=i.length;l<o;l++)s.push(i[l].subject);else if(t==null)for(let l=0,o=i.length;l<o;l++)s.push(i[l].predicate);else if(r==null)for(let l=0,o=i.length;l<o;l++)s.push(i[l].object);else if(a==null)for(let l=0,o=i.length;l<o;l++)s.push(new St(i[l].graph.value));return s}equals(e){return e?this.hashString()===e.hashString():!1}findMembersNT(e){let t,r,a,s,i,l,o,u,c,f,d,g,m,v;g={},g[e.toNT()]=!0,s={},l=this.transitiveClosure(g,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!0);for(let b in l)if(l.hasOwnProperty(b)){o=this.statementsMatching(void 0,this.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),this.fromNT(b));for(let _=0,N=o.length;_<N;_++)m=o[_],s[m.subject.toNT()]=m;u=this.each(void 0,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#domain"),this.fromNT(b));for(let _=0,N=u.length;_<N;_++)for(i=u[_],c=this.statementsMatching(void 0,i),a=0,t=c.length;a<t;a++)m=c[a],s[m.subject.toNT()]=m;f=this.each(void 0,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#range"),this.fromNT(b));for(let _=0,N=f.length;_<N;_++)for(i=f[_],d=this.statementsMatching(void 0,i),v=0,r=d.length;v<r;v++)m=d[v],s[m.object.toNT()]=m}return s}findMemberURIs(e){return this.NTtoURI(this.findMembersNT(e))}findSubClassesNT(e){let t={};return t[e.toNT()]=!0,this.transitiveClosure(t,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!0)}findSuperClassesNT(e){let t={};return t[e.toNT()]=!0,this.transitiveClosure(t,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!1)}findTypesNT(e){let t,r,a,s,i,l,o,u,c;a="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",c=[],s=this.statementsMatching(e,void 0,void 0);for(let f=0,d=s.length;f<d;f++)if(u=s[f],u.predicate.uri===a)c[u.object.toNT()]=u;else{i=this.each(u.predicate,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#domain"));for(let g=0,m=i.length;g<m;g++)r=i[g],c[r.toNT()]=u}l=this.statementsMatching(void 0,void 0,e);for(let f=0,d=l.length;f<d;f++){u=l[f],o=this.each(u.predicate,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#range"));for(let g=0,m=o.length;g<m;g++)t=o[g],c[t.toNT()]=u}return this.transitiveClosure(c,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!1)}findTypeURIs(e){return this.NTtoURI(this.findTypesNT(e))}connectedStatements(e,t,r){r=r||[];let a=[e],s={},i={},l=[],o=this,u=function(c){let f=function(g){g.termType==="BlankNode"&&!s[g.value]&&(s[g.value]=!0,a.push(g))},d=o.statementsMatching(null,null,c,t).concat(o.statementsMatching(c,null,null,t));d=d.filter(function(g){if(r[g.predicate.value])return!1;let m=g.toNT();return i[m]?!1:(i[m]=!0,!0)}),d.forEach(function(g){f(g.subject),f(g.object)}),l=l.concat(d)};for(;a.length;)u(a.shift());return l}formula(e){return new Yr}fromNT(e){let t,r,a;switch(e[0]){case"<":return this.sym(e.slice(1,-1));case'"':if(a=void 0,t=void 0,r=e.lastIndexOf('"'),r<e.length-1)if(e[r+1]==="@")a=e.slice(r+2);else if(e.slice(r+1,r+3)==="^^")t=this.fromNT(e.slice(r+3));else throw new Error("Can't convert string from NT: "+e);return e=e.slice(1,r),e=e.replace(/\\"/g,'"'),e=e.replace(/\\n/g,`
`),e=e.replace(/\\\\/g,"\\"),this.rdfFactory.literal(e,a||t);case"_":return this.rdfFactory.blankNode(e.slice(2));case"?":return new nr(e.slice(1))}throw new Error("Can't convert from NT: "+e)}holds(e,t,r,a){let s;if(arguments.length===1){if(!e)return!0;if(e instanceof Array){for(s=0;s<e.length;s++)if(!this.holds(e[s]))return!1;return!0}else{if(gh(e))return this.holds(e.subject,e.predicate,e.object,e.graph);if(e.statements)return this.holds(e.statements)}}return this.anyStatementMatching(e,t,r,a)!=null}holdsStatement(e){return this.holds(e.subject,e.predicate,e.object,e.graph)}list(e,t){if(t.rdfFactory.supports.COLLECTIONS){const r=t.rdfFactory.collection();return e.forEach(function(a){r.append(a)}),r}else{const r=t.rdfFactory.blankNode(),a=qo(t.rdfFactory,r,e);return t.addAll(a),r}}NTtoURI(e){let t,r,a={};for(t in e)e.hasOwnProperty(t)&&(r=e[t],t[0]==="<"&&(a[t.slice(1,-1)]=r));return a}serialize(e,t,r,a){return Qr(r,this,e,t,void 0,a)}substitute(e){let t=this.statements.map(function(a){return a.substitute(e)});const r=new Yr;return r.addAll(t),r}sym(e,t){if(t)throw new Error("This feature (kb.sym with 2 args) is removed. Do not assume prefix mappings.");return this.rdfFactory.namedNode(e)}the(e,t,r,a){return this.any(e,t,r,a)}transitiveClosure(e,t,r){let a,s,i,l,o,u,c={};Object.assign(c,e);let f={};for(;;){if(u=(function(){for(let d in c)if(c.hasOwnProperty(d))return d})(),u==null)return f;for(o=r?this.each(void 0,t,this.fromNT(u)):this.each(this.fromNT(u),t),s=0,i=o.length;s<i;s++)a=o[s],l=a.toNT(),!(l in f)&&(l in c||(c[l]=c[u]));f[u]=c[u],delete c[u]}}topTypeURIs(e){let t,r,a,s,i,l,o,u;o=[];for(a in e)if(e.hasOwnProperty(a)){for(u=e[a],i=0,l=this.each(this.rdfFactory.namedNode(a),this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf")),t=0,s=l.length;t<s;t++)if(r=l[t],r.uri!=="http://www.w3.org/2000/01/rdf-schema#Resource"){i++;break}i||(o[a]=u)}return o["http://www.w3.org/2000/01/rdf-schema#Resource"]&&delete o["http://www.w3.org/2000/01/rdf-schema#Resource"],o["http://www.w3.org/2002/07/owl#Thing"]&&delete o["http://www.w3.org/2002/07/owl#Thing"],o}toString(){return"{"+this.statements.join(`
`)+"}"}variable(e){return new nr(e)}whether(e,t,r,a){return this.statementsMatching(e,t,r,a,!1).length}}lt.fromValue=xo;const Tr={xsd:We("http://www.w3.org/2001/XMLSchema#")};lt.toJS=function(n){return ka(n)?n.elements.map(lt.toJS):bo(n)?n.datatype.equals(Tr.xsd("boolean"))?n.value==="1"||n.value==="true":n.datatype.equals(Tr.xsd("dateTime"))||n.datatype.equals(Tr.xsd("date"))?new Date(n.value):n.datatype.equals(Tr.xsd("integer"))||n.datatype.equals(Tr.xsd("float"))||n.datatype.equals(Tr.xsd("decimal"))?Number(n.value):n.value:n};class jh{constructor(e,t){this.pat=new Sn,this.vars=[],this.name=e,this.id=t}}function jo(n,e,t,r){function a(p){var S="",F;for(F in p)p.hasOwnProperty(F)&&(S+="    "+F+" -> "+p[F]);return S}function s(p){var S="Bindings: ",F,A=p.length;for(F=0;F<A;F++)S+=a(p[F][0])+`;
	`;return S}function i(p,S,F,A){var k=F[p];if(k===void 0){if(p.isVar){var C=[];return C[p]=S,[[C,null]]}k=p}if(!k.complexType)return A.redirections[k]&&(k=A.redirections[k]),A.redirections[S]&&(S=A.redirections[S]),k.equals(S)||k.uri&&k.uri===Jr?[[[],null]]:[];if(p instanceof Array)return S instanceof Array?l(p,S,F):[];throw new Error("query.js: oops - code not written yet")}function l(p,S,F,A){var k;if(p.length!==S.length)return[];if(!p.length)return[[[],null]];var C=i(p[0],S[0],F,A);if(C.length===0)return C;var L=[],P,M=C.length,B,O,R,H,j,K;for(P=0;P<M;P++){B=C[P][0],K=[];for(H in B)B.hasOwnProperty(H)&&(K[H]=B[H]);for(H in F)F.hasOwnProperty(H)&&(K[H]=F[H]);for(k=l(p.slice(1),S.slice(1),K,A),R=k.length,O=0;O<R;O++){j=k[O][0];for(H in B)B.hasOwnProperty(H)&&(j[H]=B[H]);L.push([j,null])}}return L}function o(p,S){var F=S[p];return F===void 0?p:F}function u(p,S){var F={},A;for(A in p)p.hasOwnProperty(A)&&(F[A]=p[A]);for(A in S)S.hasOwnProperty(A)&&(F[A]=S[A]);return F}function c(p,S){return this.trunkBindings=S,this.originalCallback=p,this.branches=[],this}c.prototype.checkAllDone=function(){var p;for(p=0;p<this.branches.length;p++)if(!this.branches[p].done)return;this.doCallBacks(this.branches.length-1,this.trunkBindings)},c.prototype.doCallBacks=function(p,S){var F;if(p<0)return this.originalCallback(S);for(F=0;F<this.branches[p].results.length;F++)this.doCallBacks(p-1,u(S,this.branches[p].results[F]))};function f(p,S){return this.count=0,this.success=!1,this.done=!1,this.callback=p,this.onDone=S,this}f.prototype.reportMatch=function(p){this.callback(p),this.success=!0},f.prototype.reportDone=function(){this.done=!0,this.onDone!==void 0&&this.onDone()};var d=function(p){return this.count=0,this.done=!1,this.results=[],this.junction=p,p.branches.push(this),this};d.prototype.reportMatch=function(p){this.results.push(p)},d.prototype.reportDone=function(){un.debug("Optional branch finished - results.length = "+this.results.length),this.results.length===0&&this.results.push({}),this.done=!0,this.junction.checkAllDone()};function g(p,S,F){var A,k,C,L;for(S.nvars=0,S.index=null,A=[S.subject,S.predicate,S.object,S.why],L=[p.subjectIndex,p.predicateIndex,p.objectIndex,p.whyIndex],C=0;C<4;C++){let P=A[C];if(!(P.uri&&P.uri===Jr))if(P.isVar&&F[P]===void 0)S.nvars++;else{if(P=o(A[C],F),p.redirections[p.id(P)]&&(P=p.redirections[p.id(P)]),k=L[C][p.id(P)],!k)return S.index=[],!1;(S.index===null||S.index.length>k.length)&&(S.index=k)}}return S.index===null&&(S.index=p.statements),!0}function m(p,S){return p.nvars!==S.nvars?p.nvars-S.nvars:p.index.length-S.index.length}var v=0,b=function(p,S,F,A,k,C,L){un.debug("Match begins, Branch count now: "+L.count+" for "+L.pattern_debug);var P=S.statements;if(P.length===0){if(un.debug("FOUND MATCH WITH BINDINGS:"+a(F)),S.optional.length===0)L.reportMatch(F);else{un.debug("OPTIONAL: "+S.optional);var M=new c(e,F),B=[],O;for(O=0;O<S.optional.length;O++)B[O]=new d(M),B[O].pattern_debug=S.optional[O];for(O=0;O<S.optional.length;O++)B[O].count=B[O].count+1,b(p,S.optional[O],F,"",k,e,B[O])}L.count--,un.debug("Match ends -- success , Branch count now: "+L.count+" for "+L.pattern_debug);return}var R,H,j=P.length;if(k){var K="match"+v++,I=function(G,se){var ie=G.uri.split("#")[0];k.nowOrWhenFetched(ie,void 0,function(ge,ee,ae){ge||console.log("Error following link to <"+G.uri+"> in query: "+ee),b(p,S,F,A,k,C,L)})};for(H=0;H<j;H++){if(R=P[H],F[R.subject]!==void 0&&F[R.subject].uri&&k&&k.getState(tr(F[R.subject].uri))==="unrequested"){I(F[R.subject],K);return}if(F[R.object]!==void 0&&F[R.object].uri&&k&&k.getState(tr(F[R.object].uri))==="unrequested"){I(F[R.object],K);return}}}N(p,S,F,A,k,C,L)},_=function(p,S){var F=!0,A,k;for(A in p)p.hasOwnProperty(A)&&S[A]&&(k=S[A].test,k&&!k(p[A])&&(F=!1));return F},N=function(p,S,F,A,k,C,L){var P=S.statements,M=P.length,B,O,R,H,j,K,I;for(B=0;B<M;B++)I=P[B],g(p,I,F);P.sort(m),I=P[0];var G=p.formula();G.optional=S.optional,G.constraints=S.constraints,G.statements=P.slice(1),un.debug(A+"match2 searching "+I.index.length+" for "+I+"; bindings so far="+a(F));var se,ie=I.index.length,ge,ee;for(se=0;se<ie;se++)for(ee=I.index[se],ge=l([I.subject,I.predicate,I.object,I.why],[ee.subject,ee.predicate,ee.object,ee.why],F,p),un.info(A+" From first: "+ge.length+": "+s(ge)),R=ge.length,O=0;O<R;O++)if(j=[],K=ge[O][0],!_(K,S.constraints))un.debug("Branch count CS: "+L.count);else{for(H in K)K.hasOwnProperty(H)&&(j[H]=K[H]);for(H in F)F.hasOwnProperty(H)&&(j[H]=F[H]);L.count++,b(p,G,j,A+"  ",k,C,L)}L.count--,un.debug("Match2 ends, Branch count: "+L.count+" for "+L.pattern_debug),L.count===0&&L.reportDone()},E=this;un.debug("Query on "+this.statements.length);var w=new f(e,r);w.count++,n.sync?b(E,n.pat,n.pat.initBindings,"",t,e,w):setTimeout(function(){b(E,n.pat,n.pat.initBindings,"",t,e,w)},0)}const qa="http://www.w3.org/2002/07/owl#";function Hh(n,e,t,r){var a=n.any(e,t,void 0);return a?(n.equate(a,r),!0):!1}function Wh(n,e,t,r){var a=n.any(void 0,t,r);return a?(n.equate(a,e),!0):!1}function Ho(n,e,t,r,a){n.typeCallback&&n.typeCallback(n,r,a);var s=n.classActions[n.id(r)],i=!1;if(s)for(var l=0;l<s.length;l++)i=i||s[l](n,e,t,r,a);return i}class Sn extends Yr{constructor(e,t={}){super(void 0,void 0,void 0,void 0,t),Re(this,"updater",void 0),Re(this,"namespaces",void 0),Re(this,"classActions",void 0),Re(this,"propertyActions",void 0),Re(this,"redirections",void 0),Re(this,"aliases",void 0),Re(this,"HTTPRedirects",void 0),Re(this,"subjectIndex",void 0),Re(this,"predicateIndex",void 0),Re(this,"objectIndex",void 0),Re(this,"whyIndex",void 0),Re(this,"index",void 0),Re(this,"features",void 0),Re(this,"_universalVariables",void 0),Re(this,"_existentialVariables",void 0),Re(this,"rdfArrayRemove",void 0),Re(this,"dataCallbacks",[]),Re(this,"dataRemovalCallbacks",[]),this.propertyActions={},this.classActions={},this.redirections=[],this.aliases=[],this.HTTPRedirects=[],this.subjectIndex=[],this.predicateIndex=[],this.objectIndex=[],this.whyIndex=[],this.index=[this.subjectIndex,this.predicateIndex,this.objectIndex,this.whyIndex],this.namespaces={},this.features=e||[],this.rdfArrayRemove=t.rdfArrayRemove||Ua,t.dataCallback&&(this.dataCallbacks=[t.dataCallback]),t.dataRemovalCallback&&(this.dataRemovalCallbacks=[t.dataRemovalCallback]),this.initPropertyActions(this.features)}static get defaultGraphURI(){return Jr}substitute(e){var t=this.statements.map(function(a){return a.substitute(e)}),r=new Sn;return r.add(t),r}addDataCallback(e){this.dataCallbacks.push(e)}addDataRemovalCallback(e){this.dataRemovalCallbacks.push(e)}applyPatch(e,t,r){var a=this,s,i=null;function l(c){if(e.delete){s=e.delete,i&&(s=s.substitute(i)),s=s.statements;var f=[],d=s.map(function(g){var m=a.statementsMatching(g.subject,g.predicate,g.object,t);return m.length===0?(f.push(g),null):m[0]});if(f.length)return r("Could not find to delete: "+f.join(`
 or `));d.map(function(g){a.remove(g)})}e.insert&&(s=e.insert,i&&(s=s.substitute(i)),s=s.statements,s.map(function(g){g.graph=t,a.add(g.subject,g.predicate,g.object,g.graph)})),c()}if(e.where){var o=new jh("patch");o.pat=e.where,o.pat.statements.map(function(c){c.graph=or(t.value)}),o.sync=!0;var u=[];a.query(o,function(f){u.push(f)},a.fetcher,function(){if(u.length===0)return r("No match found to be patched:"+e.where);if(u.length>1)return r("Patch ambiguous. No patch done.");i=u[0],l(r)})}else l(r)}declareExistential(e){return this._existentialVariables||(this._existentialVariables=[]),this._existentialVariables.push(e),e}initPropertyActions(e){this.propertyActions[this.rdfFactory.id(this.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"))]=[Ho],Ht(e,"sameAs")>=0&&(this.propertyActions[this.rdfFactory.id(this.rdfFactory.namedNode(`${qa}sameAs`))]=[function(t,r,a,s,i){return t.equate(r,s),!0}]),Ht(e,"InverseFunctionalProperty")>=0&&(this.classActions[this.rdfFactory.id(this.rdfFactory.namedNode(`${qa}InverseFunctionalProperty`))]=[function(t,r,a,s,i){return t.newPropertyAction(r,Wh)}]),Ht(e,"FunctionalProperty")>=0&&(this.classActions[this.rdfFactory.id(this.rdfFactory.namedNode(`${qa}FunctionalProperty`))]=[function(t,r,a,s,i){return t.newPropertyAction(r,Hh)}])}addStatement(e){return this.add(e.subject,e.predicate,e.object,e.graph),this.statements.length}add(e,t,r,a){var s;if(arguments.length===1){if(e instanceof Array)for(s=0;s<e.length;s++)this.add(e[s]);else Cr(e)?this.add(e.subject,e.predicate,e.object,e.graph):Ci(e)&&this.add(e.statements);return this}var i,l;a||(a=this.fetcher?this.fetcher.appNode:this.rdfFactory.defaultGraph()),typeof e=="string"&&(e=this.rdfFactory.namedNode(e)),t=lt.fromValue(t);const o=lt.fromValue(r);if(a=lt.fromValue(a),!wh(e))throw new Error("Subject is not a subject type");if(!vh(t))throw new Error(`Predicate ${t} is not a predicate type`);if(!yh(o))throw new Error(`Object ${o} is not an object type`);if(!xh(a))throw new Error("Why is not a graph type");this.predicateCallback&&this.predicateCallback(this,t,a);var u=this.id(this.canon(t));i=this.propertyActions[u];var c=!1;if(i)for(s=0;s<i.length;s++)c=c||i[s](this,e,t,o,a);if(this.holds(e,t,o,a))return null;var f=[this.id(this.canon(e)),u,this.id(this.canon(o)),this.id(this.canon(a))];for(l=this.rdfFactory.quad(e,t,o,a),s=0;s<4;s++){var d=this.index[s],g=f[s];d[g]||(d[g]=[]),d[g].push(l)}this.statements.push(l);for(const m of this.dataCallbacks)m(l);return l}canon(e){if(!e)return e;const t=this.redirections[this.id(e)];if(t)return t;switch(e.termType){case Qn:return new sn(e.value);case qn:return e;case Yn:return new La;case yo:return e;case zr:return e;case _r:return new on(e.value,e.language,e.datatype);case Xn:return new St(e.value);case $n:return new nr(e.value);default:throw new Error(`Term Type not recognized for canonization: ${e.termType}`)}}check(){this.checkStatementList(this.statements);for(var e=0;e<4;e++){var t=this.index[e];for(var r in t)t.hasOwnProperty(r)&&this.checkStatementList(t[r],e)}}checkStatementList(e,t){t===void 0&&(t=0);for(var r=["subject","predicate","object","why"],a=" found in "+r[t]+" index.",s,i=0;i<e.length;i++){s=e[i];for(var l=[s.subject,s.predicate,s.object,s.graph],o=function(d,g){for(var m=0;m<d.length;m++)if(d[m].subject.equals(g.subject)&&d[m].predicate.equals(g.predicate)&&d[m].object.equals(g.object)&&d[m].why.equals(g.graph))return!0},u=0;u<4;u++){var c=this.canon(l[u]),f=this.id(c);this.index[u][f]&&o(this.index[u][f],s)}if(!o(this.statements,s))throw new Error("Statement list does not statement "+s+"@"+s.graph+a)}}close(){return this}compareTerms(e,t){return Object.prototype.hasOwnProperty.call(e,"compareTerm")?e.compareTerm(t):an[e.termType]<an[t.termType]?-1:an[e.termType]>an[t.termType]?1:e.value<t.value?-1:e.value>t.value?1:0}copyTo(e,t,r){r||(r=[]);var a=this.statementsMatching(e);Ht(r,"two-direction")!==-1&&a.concat(this.statementsMatching(void 0,void 0,e));for(var s=0;s<a.length;s++){var i=a[s];switch(i.object.termType){case"NamedNode":this.add(t,i.predicate,i.object);break;case"Literal":case"BlankNode":case"Collection":this.add(t,i.predicate,i.object.copy(this))}Ht(r,"delete")!==-1&&this.remove(i)}}equate(e,t){const r=this.canon(e),a=this.canon(t);var s=this.compareTerms(r,a);return s?s<0?this.replaceWith(a,r):this.replaceWith(r,a):!0}formula(e){return new Sn(e)}get length(){return this.statements.length}match(e,t,r,a){return this.statementsMatching(lt.fromValue(e),lt.fromValue(t),lt.fromValue(r),lt.fromValue(a))}mentionsURI(e){var t="<"+e+">";return!!this.subjectIndex[t]||!!this.objectIndex[t]||!!this.predicateIndex[t]}newExistential(e){if(!e)return this.bnode();var t=this.sym(e);return this.declareExistential(t)}newPropertyAction(e,t){var r=this.id(e);this.propertyActions[r]||(this.propertyActions[r]=[]),this.propertyActions[r].push(t);for(var a=this.statementsMatching(void 0,e,void 0),s=!1,i=0;i<a.length;i++)s=s||t(this,a[i].subject,e,a[i].object);return s}newUniversal(e){var t=this.sym(e);return this._universalVariables||(this._universalVariables=[]),this._universalVariables.push(t),t}variable(e){return new nr(e)}nextSymbol(e){for(var t=0;;t++){var r=e.value+"#n"+t;if(!this.mentionsURI(r))return this.sym(r)}}query(e,t,r,a){return jo.call(this,e,t,r,a)}querySync(e){var t=[];function r(i){t.push(i)}function a(){s=!0}var s=!1;if(e.sync=!0,jo.call(this,e,r,null,a),!s)throw new Error("Sync query should have called done function");return t}remove(e){if(e instanceof Array){for(var t=0;t<e.length;t++)this.remove(e[t]);return this}if(Ci(e))return this.remove(e.statements);var r=this.statementsMatching(e.subject,e.predicate,e.object,e.graph);if(!r.length)throw new Error("Statement to be removed is not on store: "+e);return this.removeStatement(r[0]),this}removeDocument(e){this.removeMetadata(e);for(var t=this.statementsMatching(void 0,void 0,void 0,e).slice(),r=0;r<t.length;r++)this.removeStatement(t[r]);return this.removeMatches(e,null,null),this}removeMetadata(e){const t=this.sym("chrome://TheCurrentSession"),r="http://www.w3.org/2007/ont/link#",a=this.statementsMatching(void 0,this.sym(`${r}requestedURI`),this.rdfFactory.literal(e.value),t).map(l=>l.subject);for(var s=0;s<a.length;s++){const l=a[s];if(l!=null){let o;const u=this.any(l,this.sym(`${r}status`),null,t);if(u!=null){o=this.statementsMatching(u,this.sym(`${r}status`),null,t).slice();for(var i=0;i<o.length;i++)this.removeStatement(o[i])}const c=this.any(l,this.sym(`${r}response`),null,t);if(c!=null){o=this.statementsMatching(c,null,null,t).slice();for(var i=0;i<o.length;i++)this.removeStatement(o[i])}o=this.statementsMatching(l,null,null,t).slice();for(var i=0;i<o.length;i++)this.removeStatement(o[i])}}return this.removeMatches(this.sym(e.value),null,null,t),this}removeMany(e,t,r,a,s){for(var i=this.statementsMatching(e,t,r,a,!1),l=[],o=0;o<i.length;o++)l.push(i[o]);for(s&&(l=l.slice(0,s)),o=0;o<l.length;o++)this.remove(l[o])}removeMatches(e,t,r,a){return this.removeMany(e,t,r,a),this}removeStatement(e){for(var t=[e.subject,e.predicate,e.object,e.graph],r=0;r<4;r++){var a=this.canon(t[r]),s=this.id(a);this.index[r][s]&&this.rdfArrayRemove(this.index[r][s],e)}this.rdfArrayRemove(this.statements,e);for(const i of this.dataRemovalCallbacks)i(e);return this}removeStatements(e){for(var t=0;t<e.length;t++)this.remove(e[t]);return this}replaceWith(e,t){for(var r=this.id(e),a=this.id(t),s=function(l){var o=l[r];if(o){var u=l[a];u?l[a]=o.concat(u):l[a]=o,delete l[r]}},i=0;i<4;i++)s(this.index[i]);if(this.redirections[r]=t,e.value){if(this.aliases[a]||(this.aliases[a]=[]),this.aliases[a].push(e),this.aliases[r])for(i=0;i<this.aliases[r].length;i++)this.redirections[this.id(this.aliases[r][i])]=t,this.aliases[a].push(this.aliases[r][i]);this.add(t,this.sym("http://www.w3.org/2007/ont/link#uri"),e),this.fetcher&&this.fetcher.nowKnownAs(e,t)}return s(this.classActions),s(this.propertyActions),!0}allAliases(e){var t=this.aliases[this.id(this.canon(e))]||[];return t.push(this.canon(e)),t}sameThings(e,t){if(e.equals(t))return!0;var r=this.canon(e);if(!r)return!1;var a=this.canon(t);return a?r.value===a.value:!1}setPrefixForURI(e,t){if(!(e==="tab"&&this.namespaces.tab)&&!(e.slice(0,2)==="ns"||e.slice(0,7)==="default")){for(let r in this.namespaces)this.namespaces[r]==t&&delete this.namespaces[r];this.namespaces[e]=t}}statementsMatching(e,t,r,a,s){var i=[e,t,r,a],l=[],o=[],u=[],c,f;for(c=0;c<4;c++)l[c]=this.canon(lt.fromValue(i[c])),l[c]&&(u.push(c),o[c]=this.id(l[c]));if(u.length===0)return this.statements;if(u.length===1)return c=u[0],f=this.index[c][o[c]],f&&s&&f.length>1&&(f=f.slice(0,1)),f=f||[],f;var d=1e10,g,m;for(m=0;m<u.length;m++){if(c=u[m],f=this.index[c][o[c]],!f)return[];f.length<d&&(d=f.length,g=m)}for(var v=u[g],b=this.index[v][o[v]],_=u.slice(0,g).concat(u.slice(g+1)),N=[],E=["subject","predicate","object","why"],w=0;w<b.length;w++){var p=b[w];for(m=0;m<_.length;m++)if(c=_[m],!this.canon(p[E[c]]).equals(l[c])){p=null;break}if(p!=null&&(N.push(p),s))break}return N}uris(e){var t=this.canon(e),r=this.aliases[this.id(t)];if(!t.value)return[];var a=[t.value];if(r)for(var s=0;s<r.length;s++)a.push(r[s].uri);return a}serialize(e,t,r,a){const s=a?.namespaces?{...this.namespaces,...a.namespaces}:{...this.namespaces};return a={...a||{},namespaces:s},Qr(r,this,e,t,void 0,a)}}Re(Sn,"handleRDFType",void 0),Sn.handleRDFType=Ho;const ir=We("http://www.w3.org/1999/02/22-rdf-syntax-ns#");function Vh(n,e,t,r){for(const a of n.statementsMatching(t,null,null,r)){const s=new Yt(e,a.predicate,a.object,r);n.remove(a),n.add(s)}for(const a of n.statementsMatching(null,t,null,r))n.remove(a),n.add(new Yt(a.subject,e,a.object,r));for(const a of n.statementsMatching(null,null,t,r))n.remove(a),n.add(new Yt(a.subject,a.predicate,e,r))}function zh(n,e){const t=ir("nil");for(const r of n.statementsMatching(t,null,null,e)){n.remove(r);const a=new Qt;n.add(new Yt(a,r.predicate,r.object,e))}for(const r of n.statementsMatching(null,null,t,e))if(!r.predicate.sameTerm(ir("rest"))){n.remove(r);const a=new Qt;n.add(new Yt(r.subject,r.predicate,a,e))}}function Gh(n,e){function t(a,s,i){const l=n.statementsMatching(a,ir("rest"),null,e);if(l.length!==1)throw new Error(`Bad list structure: no rest at ${a}`);const o=n.statementsMatching(a,ir("first"),null,e);if(o.length!==1)throw new Error(`Bad list structure: rest but ${o.length} firsts at ${a}`);const c=[o[0].object].concat(s),f=i.concat(l).concat(o),d=n.statementsMatching(null,ir("rest"),a,e);if(d.length===0){const m=new Qt(c);n.remove(f),Vh(n,m,a,e);return}if(d.length!==1)throw new Error(`Bad list structure: ${d.length} pres at ${a}`);const g=d[0].subject;if(g.termType!=="BlankNode")throw new Error(`Bad list element node ${g} type: ${g.termType} `);t(g,c,f)}zh(n,e),n.statementsMatching(null,ir("rest"),ir("nil"),e).forEach(a=>{if(a.subject.termType!=="BlankNode")throw new Error(`Bad list element node ${a.subject} type: ${a.subject.termType} `);t(a.subject,[],[])})}function Jh(n){return encodeURI(n)}var Kh={encode:function(n){n=n.replace(/\r\n/g,`
`);for(var e="",t=0;t<n.length;t++){var r=n.charCodeAt(t);r<128?e+=String.fromCharCode(r):r>127&&r<2048?(e+=String.fromCharCode(r>>6|192),e+=String.fromCharCode(r&63|128)):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128),e+=String.fromCharCode(r&63|128))}return e},decode:function(n){for(var e="",t=0;t<n.length;){var r=n.charCodeAt(t);r<128?(e+=String.fromCharCode(r),t++):r>191&&r<224?(e+=String.fromCharCode((r&31)<<6|n.charCodeAt(t+1)&63),t+=2):(e+=String.fromCharCode((r&15)<<12|(n.charCodeAt(t+1)&63)<<6|n.charCodeAt(t+2)&63),t+=3)}return e}},ja="http://www.w3.org/2000/10/swap/log#",At=function(n){return n},Nt=function(n){return n},Zr=function(n){if(n.length>0)throw"missing.js: oops nnonempty dict not imp";return[]},Wt=function(n){return n.length},Ha=function(n,e,t){if(typeof n.slice>"u")throw"@@ mising.js: No .slice function for "+n+" of type "+typeof n;return typeof t>"u"||t==null?n.slice(e):n.slice(e,t)},ei=Error("dummy error stop iteration"),Di=function(n){return this.last=0,this.li=n,this.next=function(){if(this.last==this.li.length)throw ei;return this.li[this.last++]},this},Wa=function(n,e){return n.indexOf(e)},ar=function(n,e){if(!n)throw e?"python Assertion failed: "+e:"(python) Assertion failed."},Xh=function(n){return String.fromCharCode(n)};String.prototype.encode=function(n){if(n!="utf-8")throw"UTF8_converter: can only do utf-8";return Kh.encode(this)},String.prototype.decode=function(n){if(n!="utf-8")throw"UTF8_converter: can only do utf-8";return this};var Va=function(n,e){return Ft(e,n)},Qh=null,Yh="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",Wo="http://www.w3.org/1999/02/22-rdf-syntax-ns#nil",Vo="http://www.w3.org/2002/07/owl#sameAs",Zh="#",ep="http://www.w3.org/2001/XMLSchema#integer",tp="http://www.w3.org/2001/XMLSchema#double",np="http://www.w3.org/2001/XMLSchema#decimal",rp="http://www.w3.org/2001/XMLSchema#date",ip="http://www.w3.org/2001/XMLSchema#dateTime",zo=`	\r
 !"#$%&'()*.,+/;<=>?@[\\]^\`{|}~`,Sr=zo+":",za=new RegExp("^([-+]?[0-9]+)(\\.[0-9]+)?([eE][-+]?[0-9]+)?","g"),Go=new RegExp("^[0-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9](T[0-9][0-9]:[0-9][0-9](:[0-9][0-9](\\.[0-9]*)?)?)?Z?"),ap=new RegExp("[\\s#]"),Ga=new RegExp('[\\\\\\r\\n\\"]',"g"),Ja=new RegExp("^[a-zA-Z0-9]+(-[a-zA-Z0-9]+)*","g");function Ii(n,e){var t=n.charAt(e+1);return t===""||ap.test(t)}function Ka(n,e,t,r,a,s,i,l){return new sp(n,e,t,r,a,s,i,l)}class sp{constructor(e,t,r,a,s,i,l,o){typeof t>"u"&&(t=null),typeof r>"u"&&(r=""),typeof a>"u"&&(a=null),typeof s>"u"&&(s=""),typeof l>"u"&&(l=""),typeof o>"u"&&(o=null),this._bindings=new Zr([]),this._flags=l,r!=""&&(ar(r.indexOf(":")>=0,"Document URI not absolute: "+r),this._bindings[""]=r+"#"),this._store=e,s&&e.setGenPrefix(s),this._thisDoc=r,this.source=e.sym(r),this.lines=0,this.statementCount=0,this.hasNil=!1,this.startOfLine=0,this.previousLine=0,this._genPrefix=s,this.keywords=new Nt(["a","this","bind","has","is","of","true","false"]),this.keywordsSet=0,this._anonymousNodes=new Zr([]),this._variables=new Zr([]),this._parentVariables=new Zr([]),this._reason=o,this._reason2=null,a?this._baseURI=a:r?this._baseURI=r:this._baseURI=null,ar(!this._baseURI||this._baseURI.indexOf(":")>=0),this._genPrefix||(this._thisDoc?this._genPrefix=this._thisDoc+"#_g":this._genPrefix=RDFSink_uniqueURI()),t==null?this._thisDoc?this._formula=e.formula(r+"#_formula"):this._formula=e.formula():this._formula=t,this._context=this._formula,this._parentContext=null}here(e){return this._genPrefix+"_L"+this.lines+"C"+(e-this.startOfLine+1)}formula(){return this._formula}loadStream(e){return this.loadBuf(e.read())}loadBuf(e){return this.startDoc(),this.feed(e),this.endDoc()}feed(e){for(var t=e.decode("utf-8"),r=0;r>=0;){var a=this.skipSpace(t,r);if(a<0)return;var r=this.directiveOrStatement(t,a);if(r<0)throw $e(this._thisDoc,this.lines,t,a,"expected directive or statement")}}directiveOrStatement(e,t){var r=this.skipSpace(e,t);if(r<0)return r;var a=this.directive(e,r);if(a>=0)return this.checkDot(e,a);var a=this.statement(e,r);return a>=0?this.checkDot(e,a):a}tok(e,t,r){if(t.slice(r,r+1)=="@")var r=r+1;else if(Ht(this.keywords,e)<0)return-1;var a=r+Wt(e);return t.slice(r,a)==e&&zo.indexOf(t.charAt(a))>=0?a:-1}directive(e,t){var o=this.skipSpace(e,t);if(o<0)return o;var r=new Nt([]),o=this.tok("bind",e,t);if(o>0)throw $e(this._thisDoc,this.lines,e,t,"keyword bind is obsolete: use @prefix");var o=this.tok("keywords",e,t);if(o>0){var t=this.commaSeparatedList(e,o,r,!1);if(t<0)throw $e(this._thisDoc,this.lines,e,t,"'@keywords' needs comma separated list of words");return this.setKeywords(Ha(r,null,null)),t}var o=this.tok("forAll",e,t);if(o>0){var t=this.commaSeparatedList(e,o,r,!0);if(t<0)throw $e(this._thisDoc,this.lines,e,t,"Bad variable list after @forAll");var a=new Di(r);try{for(;;){var s=a.next();(Ht(this._variables,s)<0||Ht(this._parentVariables,s)>=0)&&(this._variables[s]=this._context.newUniversal(s))}}catch(c){if(c!=ei)throw c}return t}var o=this.tok("forSome",e,t);if(o>0){var t=this.commaSeparatedList(e,o,r,this.uri_ref2);if(t<0)throw $e(this._thisDoc,this.lines,e,t,"Bad variable list after @forSome");var a=new Di(r);try{for(;;){var s=a.next();this._context.declareExistential(s)}}catch(f){if(f!=ei)throw f}return t}var o=this.tok("prefix",e,t);if(o>=0){var i=new Nt([]),t=this.qname(e,o,i);if(t<0)throw $e(this._thisDoc,this.lines,e,o,"expected qname after @prefix");var o=this.uri_ref2(e,t,i);if(o<0)throw $e(this._thisDoc,this.lines,e,t,"expected <uriref> after @prefix _qname_");var l=i[1].uri;if(this._baseURI)var l=Va(this._baseURI,l);else ar(l.indexOf(":")>=0,"With no base URI, cannot handle relative URI for NS");return ar(l.indexOf(":")>=0),this._bindings[i[0][0]]=l,this.bind(i[0][0],Jh(l)),o}var o=this.tok("base",e,t);if(o>=0){var i=new Nt([]),t=this.uri_ref2(e,o,i);if(t<0)throw $e(this._thisDoc,this.lines,e,o,"expected <uri> after @base ");var l=i[0].uri;if(this._baseURI)var l=Va(this._baseURI,l);else throw $e(this._thisDoc,this.lines,e,o,"With no previous base URI, cannot use relative URI in @base  <"+l+">");return ar(l.indexOf(":")>=0),this._baseURI=l,t}return-1}bind(e,t){e==""||this._store.setPrefixForURI(e,t)}setKeywords(e){e==null?this.keywordsSet=0:(this.keywords=e,this.keywordsSet=1)}startDoc(){}endDoc(){return this.hasNil&&this._store.rdfFactory.supports.COLLECTIONS&&Gh(this._store,this.source),this._formula}makeStatement(e){e[0].add(e[2],e[1],e[3],this.source),(e[2].uri&&e[2].uri===Wo||e[3].uri&&e[3].uri===Wo)&&(this.hasNil=!0),this.statementCount+=1}statement(e,a){var r=new Nt([]),a=this.object(e,a,r);if(a<0)return a;var s=this.property_list(e,a,r[0]);if(s<0)throw $e(this._thisDoc,this.lines,e,a,"expected propertylist");return s}subject(e,t,r){return this.item(e,t,r)}verb(e,t,r){var s=this.skipSpace(e,t);if(s<0)return s;var a=new Nt([]),s=this.tok("has",e,t);if(s>=0){var t=this.prop(e,s,a);if(t<0)throw $e(this._thisDoc,this.lines,e,s,"expected property after 'has'");return r.push(new At(["->",a[0]])),t}var s=this.tok("is",e,t);if(s>=0){var t=this.prop(e,s,a);if(t<0)throw $e(this._thisDoc,this.lines,e,s,"expected <property> after 'is'");var s=this.skipSpace(e,t);if(s<0)throw $e(this._thisDoc,this.lines,e,t,"End of file found, expected property after 'is'");var t=s,s=this.tok("of",e,t);if(s<0)throw $e(this._thisDoc,this.lines,e,t,"expected 'of' after 'is' <prop>");return r.push(new At(["<-",a[0]])),s}var s=this.tok("a",e,t);if(s>=0)return r.push(new At(["->",this._store.sym(Yh)])),s;if(e.slice(t,t+2)=="<=")return r.push(new At(["<-",this._store.sym(ja+"implies")])),t+2;if(e.slice(t,t+1)=="=")return e.slice(t+1,t+2)==">"?(r.push(new At(["->",this._store.sym(ja+"implies")])),t+2):(r.push(new At(["->",this._store.sym(Vo)])),t+1);if(e.slice(t,t+2)==":=")return r.push(new At(["->",ja+"becomes"])),t+2;var s=this.prop(e,t,a);if(s>=0)return r.push(new At(["->",a[0]])),s;if(e.slice(t,t+2)==">-"||e.slice(t,t+2)=="<-")throw $e(this._thisDoc,this.lines,e,s,">- ... -> syntax is obsolete.");return-1}prop(e,t,r){return this.item(e,t,r)}item(e,t,r){return this.path(e,t,r)}blankNode(e){return this._context.bnode(e,this._reason2)}path(e,t,r){var a=this.nodeOrLiteral(e,t,r);if(a<0)return a;for(;"!^.".indexOf(e.slice(a,a+1))>=0;){var s=e.slice(a,a+1);if(s=="."&&Ii(e,a))break;var i=r.pop(),l=this.blankNode(this.here(a)),a=this.node(e,a+1,r);if(a<0)throw $e(this._thisDoc,this.lines,e,a,"EOF found in middle of path syntax");var o=r.pop();s=="^"?this.makeStatement(new At([this._context,o,l,i])):this.makeStatement(new At([this._context,o,i,l])),r.push(l)}return a}anonymousNode(e){var t=this._anonymousNodes[e];if(t)return t;var t=this._store.bnode(e);return this._anonymousNodes[e]=t,t}node(e,i,r,a){typeof a>"u"&&(a=null);var s=a,p=this.skipSpace(e,i);if(p<0)return p;var i=p,l=e.slice(i,i+1);if(l=="["){var o=this.here(i),p=this.skipSpace(e,i+1);if(p<0)throw $e(this._thisDoc,this.lines,e,i,"EOF after '['");if(e.slice(p,p+1)=="="){var i=p+1,u=new Nt([]),p=this.objectList(e,i,u);if(p>=0){var s=u[0];if(Wt(u)>1){var c=new Di(u);try{for(;;){var f=c.next();this.makeStatement(new At([this._context,this._store.sym(Vo),s,f]))}}catch(P){if(P!=ei)throw P}}var p=this.skipSpace(e,p);if(p<0)throw $e(this._thisDoc,this.lines,e,i,"EOF when objectList expected after [ = ");if(e.slice(p,p+1)==";")var p=p+1}else throw $e(this._thisDoc,this.lines,e,i,"objectList expected after [= ")}if(s==null)var s=this.blankNode(o);var i=this.property_list(e,p,s);if(i<0)throw $e(this._thisDoc,this.lines,e,p,"property_list expected");var p=this.skipSpace(e,i);if(p<0)throw $e(this._thisDoc,this.lines,e,i,"EOF when ']' expected after [ <propertyList>");if(e.slice(p,p+1)==".")return r.push(s),p;if(e.slice(p,p+1)!="]")throw $e(this._thisDoc,this.lines,e,p,"']' expected");return r.push(s),p+1}if(l=="{"){var d=e.slice(i+1,i+2);if(d=="$"){i+=1;for(var p=i+1,g=new Nt([]),m=!0;;){var i=this.skipSpace(e,p);if(i<0)throw $e(this._thisDoc,this.lines,e,i,"needed '$}', found end.");if(e.slice(i,i+2)=="$}"){var p=i+2;break}if(m)var m=!1;else if(e.slice(i,i+1)==",")i+=1;else throw $e(this._thisDoc,this.lines,e,i,"expected: ','");var v=new Nt([]),p=this.item(e,i,v);if(p<0)throw $e(this._thisDoc,this.lines,e,i,"expected item in set or '$}'");g.push(v[0])}return r.push(this._store.newSet(g,this._context)),p}else{var p=i+1,b=this._parentContext;this._parentContext=this._context;var _=this._anonymousNodes,N=this._parentVariables;this._parentVariables=this._variables,this._anonymousNodes=new Zr([]),this._variables=this._variables.slice();var E=this._reason2;if(this._reason2=Qh,s==null)var s=this._store.formula();for(this._context=s;;){var i=this.skipSpace(e,p);if(i<0)throw $e(this._thisDoc,this.lines,e,i,"needed '}', found end.");if(e.slice(i,i+1)=="}"){var p=i+1;break}var p=this.directiveOrStatement(e,i);if(p<0)throw $e(this._thisDoc,this.lines,e,i,"expected statement or '}'")}return this._anonymousNodes=_,this._variables=this._parentVariables,this._parentVariables=N,this._context=this._parentContext,this._reason2=E,this._parentContext=b,r.push(s.close()),p}}if(l=="("){var w=this._store.list,d=e.slice(i+1,i+2);if(d=="$"){var w=this._store.newSet;i+=1}for(var p=i+1,g=new Nt([]);;){var i=this.skipSpace(e,p);if(i<0)throw $e(this._thisDoc,this.lines,e,i,"needed ')', found end.");if(e.slice(i,i+1)==")"){var p=i+1;break}var v=new Nt([]),p=this.item(e,i,v);if(p<0)throw $e(this._thisDoc,this.lines,e,i,"expected item in list or ')'");g.push(v[0])}return r.push(w(g,this._context)),p}var p=this.tok("this",e,i);if(p>=0)throw $e(this._thisDoc,this.lines,e,i,"Keyword 'this' was ancient N3. Now use @forSome and @forAll keywords.");var p=this.tok("true",e,i);if(p>=0)return r.push(!0),p;var p=this.tok("false",e,i);if(p>=0)return r.push(!1),p;if(s==null){var p=this.uri_ref2(e,i,r);if(p>=0)return p}return-1}property_list(e,t,r){for(;;){var d=this.skipSpace(e,t);if(d<0)throw $e(this._thisDoc,this.lines,e,t,"EOF found when expected verb in property list");if(e.slice(d,d+2)==":-"){var t=d+2,a=new Nt([]),d=this.node(e,t,a,r);if(d<0)throw $e(this._thisDoc,this.lines,e,t,"bad {} or () or [] node after :- ");var t=d;continue}var t=d,s=new Nt([]),d=this.verb(e,t,s);if(d<=0)return t;var i=new Nt([]),t=this.objectList(e,d,i);if(t<0)throw $e(this._thisDoc,this.lines,e,d,"objectList expected");var l=new Di(i);try{for(;;){var o=l.next(),u=s[0],c=u[0],f=u[1];c=="->"?this.makeStatement(new At([this._context,f,r,o])):this.makeStatement(new At([this._context,f,o,r]))}}catch(m){if(m!=ei)throw m}var d=this.skipSpace(e,t);if(d<0)throw $e(this._thisDoc,this.lines,e,d,"EOF found in list of objects");if(e.slice(t,t+1)!=";")return t;var t=t+1}}commaSeparatedList(e,t,r,a){var s=this.skipSpace(e,t);if(s<0)throw $e(this._thisDoc,this.lines,e,s,"EOF found expecting comma sep list");if(e.charAt(s)==".")return t;if(a)var s=this.uri_ref2(e,s,r);else var s=this.bareWord(e,s,r);if(s<0)return-1;for(;;){var t=this.skipSpace(e,s);if(t<0)return t;var i=e.slice(t,t+1);if(i!=",")return i!="."?-1:t;if(a)var s=this.uri_ref2(e,t+1,r);else var s=this.bareWord(e,t+1,r);if(s<0)throw $e(this._thisDoc,this.lines,e,s,"bad list content")}}objectList(e,a,r){var a=this.object(e,a,r);if(a<0)return-1;for(;;){var s=this.skipSpace(e,a);if(s<0)throw $e(this._thisDoc,this.lines,e,s,"EOF found after object");if(e.slice(s,s+1)!=",")return s;var a=this.object(e,s+1,r);if(a<0)return a}}checkDot(e,t){var r=this.skipSpace(e,t);if(r<0)return r;if(e.slice(r,r+1)==".")return r+1;if(e.slice(r,r+1)=="}"||e.slice(r,r+1)=="]")return r;throw $e(this._thisDoc,this.lines,e,r,"expected '.' or '}' or ']' at end of statement")}uri_ref2(e,f,r){var a=new Nt([]),s=this.qname(e,f,a);if(s>=0){var i=a[0],l=i[0],o=i[1];if(l==null){ar(0,"not used?");var u=this._baseURI+Zh}else{var u=this._bindings[l];if(!u){if(l=="_")return r.push(this.anonymousNode(o)),s;throw $e(this._thisDoc,this.lines,e,f,"Prefix "+l+" not bound.")}}var c=this._store.sym(u+o);return Ht(this._variables,c)>=0?r.push(this._variables[c]):r.push(c),s}var f=this.skipSpace(e,f);if(f<0)return-1;if(e.charAt(f)=="?"){var d=new Nt([]),s=this.variable(e,f,d);return s>0?(r.push(d[0]),s):-1}else if(e.charAt(f)=="<"){for(var f=f+1,g=f;f<Wt(e);){if(e.charAt(f)==">"){var m=e.slice(g,f);if(this._baseURI)var m=Va(this._baseURI,m);else ar(m.indexOf(":")>=0,"With no base URI, cannot deal with relative URIs");if(e.slice(f-1,f)=="#"&&Ha(m,-1,null)!="#")var m=m+"#";var c=this._store.sym(m);return Ht(this._variables,c)>=0?r.push(this._variables[c]):r.push(c),f+1}var f=f+1}throw $e(this._thisDoc,this.lines,e,s,"unterminated URI reference")}else if(this.keywordsSet){var d=new Nt([]),s=this.bareWord(e,f,d);if(s<0)return-1;if(Ht(this.keywords,d[0])>=0)throw $e(this._thisDoc,this.lines,e,f,'Keyword "'+d[0]+'" not allowed here.');return r.push(this._store.sym(this._bindings[""]+d[0])),s}else return-1}skipSpace(e,t){for(var r=` 
\r	\f\v            ​\u2028\u2029　`,a=t||0;a<e.length;a++){var s=e.charAt(a);if(r.indexOf(s)<0)if(e.charAt(a)==="#")for(;;a++){if(a===e.length)return-1;if(e.charAt(a)===`
`){this.lines=this.lines+1;break}}else return a;else e.charAt(a)===`
`&&(this.lines=this.lines+1)}return-1}variable(e,s,r){var a=this.skipSpace(e,s);if(a<0||e.slice(a,a+1)!="?")return-1;var a=a+1,s=a;if("0123456789-".indexOf(e.charAt(a))>=0)throw $e(this._thisDoc,this.lines,e,a,"Varible name can't start with '"+e.charAt(a)+"s'");for(;s<Wt(e)&&Sr.indexOf(e.charAt(s))<0;)var s=s+1;if(this._parentContext==null)throw $e(this._thisDoc,this.lines,e,a,"Can't use ?xxx syntax for variable in outermost level: "+e.slice(a-1,s));return r.push(this._store.variable(e.slice(a,s))),s}bareWord(e,i,r){var a=this.skipSpace(e,i);if(a<0)return-1;var s=e.charAt(a);if("0123456789-".indexOf(s)>=0||Sr.indexOf(s)>=0)return-1;for(var i=a;i<Wt(e);){var l=e.charAt(i);if(l==="."){if(Ii(e,i))break}else if(Sr.indexOf(l)>=0)break;var i=i+1}return r.push(e.slice(a,i)),i}qname(e,a,r){var a=this.skipSpace(e,a);if(a<0)return-1;var s=e.charAt(a);if("0123456789-+".indexOf(s)>=0)return-1;if(Sr.indexOf(s)<0)for(var i=s,a=a+1;a<Wt(e);){var s=e.charAt(a);if(s==="."){if(Ii(e,a))break}else if(Sr.indexOf(s)>=0)break;var i=i+s,a=a+1}else var i="";if(a<Wt(e)&&e.charAt(a)==":"){for(var l=i,a=a+1,i="";a<Wt(e);){var s=e.charAt(a);if(s==="."){if(Ii(e,a))break}else if(Sr.indexOf(s)>=0)break;var i=i+s,a=a+1}return r.push(new At([l,i])),a}else return i&&this.keywordsSet&&Ht(this.keywords,i)<0?(r.push(new At(["",i])),a):-1}object(e,t,r){var a=this.subject(e,t,r);if(a>=0)return a;{var a=this.skipSpace(e,t);if(a<0)return-1;var t=a,s=null;let u=e.charAt(t);if(u=='"'||u=="'"){e.slice(t,t+3==u+u)?s=u+u+u:s=u;var t=t+Wt(s),i=this.strconst(e,t,s),a=i[0],l=i[1];return r.push(this._store.literal(l)),a}else return-1}}nodeOrLiteral(e,t,r){var a=this.node(e,t,r);if(a>=0)return a;var a=this.skipSpace(e,t);if(a<0)return-1;var t=a,s=e.charAt(t);if("-+0987654321".indexOf(s)>=0){Go.lastIndex=0;var i=Go.exec(e.slice(t));if(i!=null){var l=i[0];a=t+l.length,l.indexOf("T")>=0?r.push(this._store.literal(l,this._store.sym(ip))):r.push(this._store.literal(l,this._store.sym(rp)))}else{za.lastIndex=0;var i=za.exec(e.slice(t));if(i==null)throw $e(this._thisDoc,this.lines,e,t,"Bad number or date syntax");a=t+za.lastIndex;var l=e.slice(t,a);l.indexOf("e")>=0?r.push(this._store.literal(parseFloat(l),this._store.sym(tp))):e.slice(t,a).indexOf(".")>=0?r.push(this._store.literal(parseFloat(l),this._store.sym(np))):r.push(this._store.literal(parseInt(l),this._store.sym(ep)))}return a}if(e.charAt(t)=='"'){if(e.slice(t,t+3)=='"""')var o='"""';else var o='"';var t=t+Wt(o),u=null,c=this.strconst(e,t,o),a=c[0],f=c[1],d=null;if(e.slice(a,a+1)=="@"){Ja.lastIndex=0;var i=Ja.exec(e.slice(a+1));if(i==null)throw $e(this._thisDoc,startline,e,t,"Bad language code syntax on string literal, after @");var t=Ja.lastIndex+a+1,d=e.slice(a+1,t),a=t}if(e.slice(a,a+2)=="^^")var g=new Nt([]),a=this.uri_ref2(e,a+2,g),u=g[0];return r.push(this._store.literal(f,d||u)),a}else return-1}strconst(e,t,r){for(var a=t,s="",i=this.lines;a<Wt(e);){var t=a+Wt(r);if(e.slice(a,t)==r)return new At([t,s]);if(e.charAt(a)=='"'){var s=s+'"',a=a+1;continue}Ga.lastIndex=0;var l=Ga.exec(e.slice(a));if(!l)throw $e(this._thisDoc,i,e,a,"Closing quote missing in string at ^ in "+e.slice(a-20,a)+"^"+e.slice(a,a+20));var t=a+Ga.lastIndex-1,s=s+e.slice(a,t),o=e.charAt(t);if(o=='"'){var a=t;continue}else if(o=="\r"){var a=t+1;continue}else if(o==`
`){if(r=='"')throw $e(this._thisDoc,i,e,t,"newline found in string literal");this.lines=this.lines+1;var s=s+o,a=t+1;this.previousLine=this.startOfLine,this.startOfLine=a}else if(o=="\\"){var a=t+1,o=e.slice(a,a+1);if(!o)throw $e(this._thisDoc,i,e,t,"unterminated string literal (2)");var u=Wa('abfrtvn\\"',o);if(u>=0)var c=`a\b\f\r	\v
\\"`.charAt(u),s=s+c,a=a+1;else if(o=="u")var f=this.uEscape(e,a+1,i),a=f[0],o=f[1],s=s+o;else if(o=="U")var f=this.UEscape(e,a+1,i),a=f[0],o=f[1],s=s+o;else throw $e(this._thisDoc,this.lines,e,t,"bad escape")}}throw $e(this._thisDoc,this.lines,e,t,"unterminated string literal")}uEscape(e,t,r){for(var a=t,s=0,i=0;s<4;){var l=e.slice(a,a+1),o=l.toLowerCase(),a=a+1;if(o=="")throw $e(this._thisDoc,r,e,t,"unterminated string literal(3)");var u=Wa("0123456789abcdef",o);if(u<0)throw $e(this._thisDoc,r,e,t,"bad string literal hex escape");var i=i*16+u,s=s+1}var c=String.fromCharCode(i);return new At([a,c])}UEscape(e,t,r){for(var a=t,s=0,i="\\U";s<8;){var l=e.slice(a,a+1),o=l.toLowerCase(),a=a+1;if(o=="")throw $e(this._thisDoc,r,e,t,"unterminated string literal(3)");var u=Wa("0123456789abcdef",o);if(u<0)throw $e(this._thisDoc,r,e,t,"bad string literal hex escape");var i=i+o,s=s+1}var c=Xh("0x"+Ha(i,2,10)-0);return new At([a,c])}}function $e(n,e,t,r,a){let s=e+1,i="Line "+s+" of <"+n+">: Bad syntax: "+a+`
at: "`+t.slice(r,r+30)+'"',l=new SyntaxError(i,n,s);return l.lineNo=s,l.characterInFile=r,l.syntaxProblem=a,l}const Xa={...Zt,supports:{[Bt.collections]:!0,[Bt.defaultGraphType]:!1,[Bt.equalsMethod]:!0,[Bt.identity]:!1,[Bt.id]:!0,[Bt.reversibleId]:!1,[Bt.variableType]:!0},collection(n){return new Qt(n)},id(n){return ka(n)?`( ${n.elements.map(e=>this.id(e)).join(", ")} )`:bh(n)?nr.toString(n):Zt.id(n)},termToNQ(n){return n.termType===qn?Qt.toNT(n):Zt.termToNQ(n)}};function Qa(n,e){return typeof e=="string"?n.rdfFactory.literal(e):Object.prototype.hasOwnProperty.call(e,"@list")?n.rdfFactory.supports.COLLECTIONS===!0?op(n,e["@list"]):lp(n,e):Object.prototype.hasOwnProperty.call(e,"@id")?Ya(n,e):Object.prototype.hasOwnProperty.call(e,"@language")?n.rdfFactory.literal(e["@value"],e["@language"]):Object.prototype.hasOwnProperty.call(e,"@type")?n.rdfFactory.literal(e["@value"],n.rdfFactory.namedNode(e["@type"])):Object.prototype.hasOwnProperty.call(e,"@value")?n.rdfFactory.literal(e["@value"]):n.rdfFactory.literal(e)}function lp(n,e){const t=e["@id"]?Ya(n,e):n.rdfFactory.blankNode(),r=e["@list"].map(s=>Qa(n,s)),a=qo(n.rdfFactory,t,r);return n.addAll(a),t}function op(n,e){if(!Array.isArray(e))throw new TypeError("Object must be an array");return n.rdfFactory.collection(e.map(t=>Qa(n,t)))}async function Jo(n,e,t){const r=t&&Object.prototype.hasOwnProperty.call(t,"termType")?t.value:t;return(await(await Promise.resolve().then(()=>yv)).default.flatten(JSON.parse(n),null,{base:r})).reduce((i,l)=>Ko(i,t,l),e)}function Ya(n,e){return e["@id"].startsWith("_:")?n.rdfFactory.blankNode(e["@id"].substring(2)):n.rdfFactory.namedNode(e["@id"])}function Ko(n,e,t){const r=t["@id"]?Ya(n,t):n.rdfFactory.blankNode();for(const a of Object.keys(t)){if(a==="@id")continue;if(a=="@graph"){const i=r,l=t[a];for(let o=0;o<l.length;o++)n=Ko(n,i,l[o])}const s=t[a];if(Array.isArray(s))for(let i=0;i<s.length;i++)n.addStatement(Xo(n,r,a,s[i],e));else n.addStatement(Xo(n,r,a,s,e))}return n}function Xo(n,e,t,r,a){let s,i;return t==="@type"?(s=n.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),i=n.rdfFactory.namedNode(r)):(s=n.rdfFactory.namedNode(t),i=Qa(n,r)),n.rdfFactory.quad(e,s,i,n.rdfFactory.namedNode(a))}var Za={},ti={},Qo;function up(){if(Qo)return ti;Qo=1,ti.byteLength=l,ti.toByteArray=u,ti.fromByteArray=d;for(var n=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,s=r.length;a<s;++a)n[a]=r[a],e[r.charCodeAt(a)]=a;e[45]=62,e[95]=63;function i(g){var m=g.length;if(m%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=g.indexOf("=");v===-1&&(v=m);var b=v===m?0:4-v%4;return[v,b]}function l(g){var m=i(g),v=m[0],b=m[1];return(v+b)*3/4-b}function o(g,m,v){return(m+v)*3/4-v}function u(g){var m,v=i(g),b=v[0],_=v[1],N=new t(o(g,b,_)),E=0,w=_>0?b-4:b,p;for(p=0;p<w;p+=4)m=e[g.charCodeAt(p)]<<18|e[g.charCodeAt(p+1)]<<12|e[g.charCodeAt(p+2)]<<6|e[g.charCodeAt(p+3)],N[E++]=m>>16&255,N[E++]=m>>8&255,N[E++]=m&255;return _===2&&(m=e[g.charCodeAt(p)]<<2|e[g.charCodeAt(p+1)]>>4,N[E++]=m&255),_===1&&(m=e[g.charCodeAt(p)]<<10|e[g.charCodeAt(p+1)]<<4|e[g.charCodeAt(p+2)]>>2,N[E++]=m>>8&255,N[E++]=m&255),N}function c(g){return n[g>>18&63]+n[g>>12&63]+n[g>>6&63]+n[g&63]}function f(g,m,v){for(var b,_=[],N=m;N<v;N+=3)b=(g[N]<<16&16711680)+(g[N+1]<<8&65280)+(g[N+2]&255),_.push(c(b));return _.join("")}function d(g){for(var m,v=g.length,b=v%3,_=[],N=16383,E=0,w=v-b;E<w;E+=N)_.push(f(g,E,E+N>w?w:E+N));return b===1?(m=g[v-1],_.push(n[m>>2]+n[m<<4&63]+"==")):b===2&&(m=(g[v-2]<<8)+g[v-1],_.push(n[m>>10]+n[m>>4&63]+n[m<<2&63]+"=")),_.join("")}return ti}var Ri={};var Yo;function cp(){return Yo||(Yo=1,Ri.read=function(n,e,t,r,a){var s,i,l=a*8-r-1,o=(1<<l)-1,u=o>>1,c=-7,f=t?a-1:0,d=t?-1:1,g=n[e+f];for(f+=d,s=g&(1<<-c)-1,g>>=-c,c+=l;c>0;s=s*256+n[e+f],f+=d,c-=8);for(i=s&(1<<-c)-1,s>>=-c,c+=r;c>0;i=i*256+n[e+f],f+=d,c-=8);if(s===0)s=1-u;else{if(s===o)return i?NaN:(g?-1:1)*(1/0);i=i+Math.pow(2,r),s=s-u}return(g?-1:1)*i*Math.pow(2,s-r)},Ri.write=function(n,e,t,r,a,s){var i,l,o,u=s*8-a-1,c=(1<<u)-1,f=c>>1,d=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:s-1,m=r?1:-1,v=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,i=c):(i=Math.floor(Math.log(e)/Math.LN2),e*(o=Math.pow(2,-i))<1&&(i--,o*=2),i+f>=1?e+=d/o:e+=d*Math.pow(2,1-f),e*o>=2&&(i++,o/=2),i+f>=c?(l=0,i=c):i+f>=1?(l=(e*o-1)*Math.pow(2,a),i=i+f):(l=e*Math.pow(2,f-1)*Math.pow(2,a),i=0));a>=8;n[t+g]=l&255,g+=m,l/=256,a-=8);for(i=i<<a|l,u+=a;u>0;n[t+g]=i&255,g+=m,i/=256,u-=8);n[t+g-m]|=v*128}),Ri}var Zo;function Dn(){return Zo||(Zo=1,(function(n){const e=up(),t=cp(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=l,n.SlowBuffer=N,n.INSPECT_MAX_BYTES=50;const a=2147483647;n.kMaxLength=a,l.TYPED_ARRAY_SUPPORT=s(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const q=new Uint8Array(1),x={foo:function(){return 42}};return Object.setPrototypeOf(x,Uint8Array.prototype),Object.setPrototypeOf(q,x),q.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function i(q){if(q>a)throw new RangeError('The value "'+q+'" is invalid for option "size"');const x=new Uint8Array(q);return Object.setPrototypeOf(x,l.prototype),x}function l(q,x,T){if(typeof q=="number"){if(typeof x=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(q)}return o(q,x,T)}l.poolSize=8192;function o(q,x,T){if(typeof q=="string")return d(q,x);if(ArrayBuffer.isView(q))return m(q);if(q==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof q);if(be(q,ArrayBuffer)||q&&be(q.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(be(q,SharedArrayBuffer)||q&&be(q.buffer,SharedArrayBuffer)))return v(q,x,T);if(typeof q=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Q=q.valueOf&&q.valueOf();if(Q!=null&&Q!==q)return l.from(Q,x,T);const he=b(q);if(he)return he;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof q[Symbol.toPrimitive]=="function")return l.from(q[Symbol.toPrimitive]("string"),x,T);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof q)}l.from=function(q,x,T){return o(q,x,T)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function u(q){if(typeof q!="number")throw new TypeError('"size" argument must be of type number');if(q<0)throw new RangeError('The value "'+q+'" is invalid for option "size"')}function c(q,x,T){return u(q),q<=0?i(q):x!==void 0?typeof T=="string"?i(q).fill(x,T):i(q).fill(x):i(q)}l.alloc=function(q,x,T){return c(q,x,T)};function f(q){return u(q),i(q<0?0:_(q)|0)}l.allocUnsafe=function(q){return f(q)},l.allocUnsafeSlow=function(q){return f(q)};function d(q,x){if((typeof x!="string"||x==="")&&(x="utf8"),!l.isEncoding(x))throw new TypeError("Unknown encoding: "+x);const T=E(q,x)|0;let Q=i(T);const he=Q.write(q,x);return he!==T&&(Q=Q.slice(0,he)),Q}function g(q){const x=q.length<0?0:_(q.length)|0,T=i(x);for(let Q=0;Q<x;Q+=1)T[Q]=q[Q]&255;return T}function m(q){if(be(q,Uint8Array)){const x=new Uint8Array(q);return v(x.buffer,x.byteOffset,x.byteLength)}return g(q)}function v(q,x,T){if(x<0||q.byteLength<x)throw new RangeError('"offset" is outside of buffer bounds');if(q.byteLength<x+(T||0))throw new RangeError('"length" is outside of buffer bounds');let Q;return x===void 0&&T===void 0?Q=new Uint8Array(q):T===void 0?Q=new Uint8Array(q,x):Q=new Uint8Array(q,x,T),Object.setPrototypeOf(Q,l.prototype),Q}function b(q){if(l.isBuffer(q)){const x=_(q.length)|0,T=i(x);return T.length===0||q.copy(T,0,0,x),T}if(q.length!==void 0)return typeof q.length!="number"||Ve(q.length)?i(0):g(q);if(q.type==="Buffer"&&Array.isArray(q.data))return g(q.data)}function _(q){if(q>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return q|0}function N(q){return+q!=q&&(q=0),l.alloc(+q)}l.isBuffer=function(x){return x!=null&&x._isBuffer===!0&&x!==l.prototype},l.compare=function(x,T){if(be(x,Uint8Array)&&(x=l.from(x,x.offset,x.byteLength)),be(T,Uint8Array)&&(T=l.from(T,T.offset,T.byteLength)),!l.isBuffer(x)||!l.isBuffer(T))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(x===T)return 0;let Q=x.length,he=T.length;for(let Ee=0,Te=Math.min(Q,he);Ee<Te;++Ee)if(x[Ee]!==T[Ee]){Q=x[Ee],he=T[Ee];break}return Q<he?-1:he<Q?1:0},l.isEncoding=function(x){switch(String(x).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(x,T){if(!Array.isArray(x))throw new TypeError('"list" argument must be an Array of Buffers');if(x.length===0)return l.alloc(0);let Q;if(T===void 0)for(T=0,Q=0;Q<x.length;++Q)T+=x[Q].length;const he=l.allocUnsafe(T);let Ee=0;for(Q=0;Q<x.length;++Q){let Te=x[Q];if(be(Te,Uint8Array))Ee+Te.length>he.length?(l.isBuffer(Te)||(Te=l.from(Te)),Te.copy(he,Ee)):Uint8Array.prototype.set.call(he,Te,Ee);else if(l.isBuffer(Te))Te.copy(he,Ee);else throw new TypeError('"list" argument must be an Array of Buffers');Ee+=Te.length}return he};function E(q,x){if(l.isBuffer(q))return q.length;if(ArrayBuffer.isView(q)||be(q,ArrayBuffer))return q.byteLength;if(typeof q!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof q);const T=q.length,Q=arguments.length>2&&arguments[2]===!0;if(!Q&&T===0)return 0;let he=!1;for(;;)switch(x){case"ascii":case"latin1":case"binary":return T;case"utf8":case"utf-8":return me(q).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T*2;case"hex":return T>>>1;case"base64":return Ae(q).length;default:if(he)return Q?-1:me(q).length;x=(""+x).toLowerCase(),he=!0}}l.byteLength=E;function w(q,x,T){let Q=!1;if((x===void 0||x<0)&&(x=0),x>this.length||((T===void 0||T>this.length)&&(T=this.length),T<=0)||(T>>>=0,x>>>=0,T<=x))return"";for(q||(q="utf8");;)switch(q){case"hex":return K(this,x,T);case"utf8":case"utf-8":return B(this,x,T);case"ascii":return H(this,x,T);case"latin1":case"binary":return j(this,x,T);case"base64":return M(this,x,T);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,x,T);default:if(Q)throw new TypeError("Unknown encoding: "+q);q=(q+"").toLowerCase(),Q=!0}}l.prototype._isBuffer=!0;function p(q,x,T){const Q=q[x];q[x]=q[T],q[T]=Q}l.prototype.swap16=function(){const x=this.length;if(x%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let T=0;T<x;T+=2)p(this,T,T+1);return this},l.prototype.swap32=function(){const x=this.length;if(x%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let T=0;T<x;T+=4)p(this,T,T+3),p(this,T+1,T+2);return this},l.prototype.swap64=function(){const x=this.length;if(x%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let T=0;T<x;T+=8)p(this,T,T+7),p(this,T+1,T+6),p(this,T+2,T+5),p(this,T+3,T+4);return this},l.prototype.toString=function(){const x=this.length;return x===0?"":arguments.length===0?B(this,0,x):w.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(x){if(!l.isBuffer(x))throw new TypeError("Argument must be a Buffer");return this===x?!0:l.compare(this,x)===0},l.prototype.inspect=function(){let x="";const T=n.INSPECT_MAX_BYTES;return x=this.toString("hex",0,T).replace(/(.{2})/g,"$1 ").trim(),this.length>T&&(x+=" ... "),"<Buffer "+x+">"},r&&(l.prototype[r]=l.prototype.inspect),l.prototype.compare=function(x,T,Q,he,Ee){if(be(x,Uint8Array)&&(x=l.from(x,x.offset,x.byteLength)),!l.isBuffer(x))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof x);if(T===void 0&&(T=0),Q===void 0&&(Q=x?x.length:0),he===void 0&&(he=0),Ee===void 0&&(Ee=this.length),T<0||Q>x.length||he<0||Ee>this.length)throw new RangeError("out of range index");if(he>=Ee&&T>=Q)return 0;if(he>=Ee)return-1;if(T>=Q)return 1;if(T>>>=0,Q>>>=0,he>>>=0,Ee>>>=0,this===x)return 0;let Te=Ee-he,ze=Q-T;const rt=Math.min(Te,ze),Ye=this.slice(he,Ee),tt=x.slice(T,Q);for(let Xe=0;Xe<rt;++Xe)if(Ye[Xe]!==tt[Xe]){Te=Ye[Xe],ze=tt[Xe];break}return Te<ze?-1:ze<Te?1:0};function S(q,x,T,Q,he){if(q.length===0)return-1;if(typeof T=="string"?(Q=T,T=0):T>2147483647?T=2147483647:T<-2147483648&&(T=-2147483648),T=+T,Ve(T)&&(T=he?0:q.length-1),T<0&&(T=q.length+T),T>=q.length){if(he)return-1;T=q.length-1}else if(T<0)if(he)T=0;else return-1;if(typeof x=="string"&&(x=l.from(x,Q)),l.isBuffer(x))return x.length===0?-1:F(q,x,T,Q,he);if(typeof x=="number")return x=x&255,typeof Uint8Array.prototype.indexOf=="function"?he?Uint8Array.prototype.indexOf.call(q,x,T):Uint8Array.prototype.lastIndexOf.call(q,x,T):F(q,[x],T,Q,he);throw new TypeError("val must be string, number or Buffer")}function F(q,x,T,Q,he){let Ee=1,Te=q.length,ze=x.length;if(Q!==void 0&&(Q=String(Q).toLowerCase(),Q==="ucs2"||Q==="ucs-2"||Q==="utf16le"||Q==="utf-16le")){if(q.length<2||x.length<2)return-1;Ee=2,Te/=2,ze/=2,T/=2}function rt(tt,Xe){return Ee===1?tt[Xe]:tt.readUInt16BE(Xe*Ee)}let Ye;if(he){let tt=-1;for(Ye=T;Ye<Te;Ye++)if(rt(q,Ye)===rt(x,tt===-1?0:Ye-tt)){if(tt===-1&&(tt=Ye),Ye-tt+1===ze)return tt*Ee}else tt!==-1&&(Ye-=Ye-tt),tt=-1}else for(T+ze>Te&&(T=Te-ze),Ye=T;Ye>=0;Ye--){let tt=!0;for(let Xe=0;Xe<ze;Xe++)if(rt(q,Ye+Xe)!==rt(x,Xe)){tt=!1;break}if(tt)return Ye}return-1}l.prototype.includes=function(x,T,Q){return this.indexOf(x,T,Q)!==-1},l.prototype.indexOf=function(x,T,Q){return S(this,x,T,Q,!0)},l.prototype.lastIndexOf=function(x,T,Q){return S(this,x,T,Q,!1)};function A(q,x,T,Q){T=Number(T)||0;const he=q.length-T;Q?(Q=Number(Q),Q>he&&(Q=he)):Q=he;const Ee=x.length;Q>Ee/2&&(Q=Ee/2);let Te;for(Te=0;Te<Q;++Te){const ze=parseInt(x.substr(Te*2,2),16);if(Ve(ze))return Te;q[T+Te]=ze}return Te}function k(q,x,T,Q){return Se(me(x,q.length-T),q,T,Q)}function C(q,x,T,Q){return Se(Ce(x),q,T,Q)}function L(q,x,T,Q){return Se(Ae(x),q,T,Q)}function P(q,x,T,Q){return Se(de(x,q.length-T),q,T,Q)}l.prototype.write=function(x,T,Q,he){if(T===void 0)he="utf8",Q=this.length,T=0;else if(Q===void 0&&typeof T=="string")he=T,Q=this.length,T=0;else if(isFinite(T))T=T>>>0,isFinite(Q)?(Q=Q>>>0,he===void 0&&(he="utf8")):(he=Q,Q=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Ee=this.length-T;if((Q===void 0||Q>Ee)&&(Q=Ee),x.length>0&&(Q<0||T<0)||T>this.length)throw new RangeError("Attempt to write outside buffer bounds");he||(he="utf8");let Te=!1;for(;;)switch(he){case"hex":return A(this,x,T,Q);case"utf8":case"utf-8":return k(this,x,T,Q);case"ascii":case"latin1":case"binary":return C(this,x,T,Q);case"base64":return L(this,x,T,Q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,x,T,Q);default:if(Te)throw new TypeError("Unknown encoding: "+he);he=(""+he).toLowerCase(),Te=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function M(q,x,T){return x===0&&T===q.length?e.fromByteArray(q):e.fromByteArray(q.slice(x,T))}function B(q,x,T){T=Math.min(q.length,T);const Q=[];let he=x;for(;he<T;){const Ee=q[he];let Te=null,ze=Ee>239?4:Ee>223?3:Ee>191?2:1;if(he+ze<=T){let rt,Ye,tt,Xe;switch(ze){case 1:Ee<128&&(Te=Ee);break;case 2:rt=q[he+1],(rt&192)===128&&(Xe=(Ee&31)<<6|rt&63,Xe>127&&(Te=Xe));break;case 3:rt=q[he+1],Ye=q[he+2],(rt&192)===128&&(Ye&192)===128&&(Xe=(Ee&15)<<12|(rt&63)<<6|Ye&63,Xe>2047&&(Xe<55296||Xe>57343)&&(Te=Xe));break;case 4:rt=q[he+1],Ye=q[he+2],tt=q[he+3],(rt&192)===128&&(Ye&192)===128&&(tt&192)===128&&(Xe=(Ee&15)<<18|(rt&63)<<12|(Ye&63)<<6|tt&63,Xe>65535&&Xe<1114112&&(Te=Xe))}}Te===null?(Te=65533,ze=1):Te>65535&&(Te-=65536,Q.push(Te>>>10&1023|55296),Te=56320|Te&1023),Q.push(Te),he+=ze}return R(Q)}const O=4096;function R(q){const x=q.length;if(x<=O)return String.fromCharCode.apply(String,q);let T="",Q=0;for(;Q<x;)T+=String.fromCharCode.apply(String,q.slice(Q,Q+=O));return T}function H(q,x,T){let Q="";T=Math.min(q.length,T);for(let he=x;he<T;++he)Q+=String.fromCharCode(q[he]&127);return Q}function j(q,x,T){let Q="";T=Math.min(q.length,T);for(let he=x;he<T;++he)Q+=String.fromCharCode(q[he]);return Q}function K(q,x,T){const Q=q.length;(!x||x<0)&&(x=0),(!T||T<0||T>Q)&&(T=Q);let he="";for(let Ee=x;Ee<T;++Ee)he+=ht[q[Ee]];return he}function I(q,x,T){const Q=q.slice(x,T);let he="";for(let Ee=0;Ee<Q.length-1;Ee+=2)he+=String.fromCharCode(Q[Ee]+Q[Ee+1]*256);return he}l.prototype.slice=function(x,T){const Q=this.length;x=~~x,T=T===void 0?Q:~~T,x<0?(x+=Q,x<0&&(x=0)):x>Q&&(x=Q),T<0?(T+=Q,T<0&&(T=0)):T>Q&&(T=Q),T<x&&(T=x);const he=this.subarray(x,T);return Object.setPrototypeOf(he,l.prototype),he};function G(q,x,T){if(q%1!==0||q<0)throw new RangeError("offset is not uint");if(q+x>T)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(x,T,Q){x=x>>>0,T=T>>>0,Q||G(x,T,this.length);let he=this[x],Ee=1,Te=0;for(;++Te<T&&(Ee*=256);)he+=this[x+Te]*Ee;return he},l.prototype.readUintBE=l.prototype.readUIntBE=function(x,T,Q){x=x>>>0,T=T>>>0,Q||G(x,T,this.length);let he=this[x+--T],Ee=1;for(;T>0&&(Ee*=256);)he+=this[x+--T]*Ee;return he},l.prototype.readUint8=l.prototype.readUInt8=function(x,T){return x=x>>>0,T||G(x,1,this.length),this[x]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(x,T){return x=x>>>0,T||G(x,2,this.length),this[x]|this[x+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(x,T){return x=x>>>0,T||G(x,2,this.length),this[x]<<8|this[x+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(x,T){return x=x>>>0,T||G(x,4,this.length),(this[x]|this[x+1]<<8|this[x+2]<<16)+this[x+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(x,T){return x=x>>>0,T||G(x,4,this.length),this[x]*16777216+(this[x+1]<<16|this[x+2]<<8|this[x+3])},l.prototype.readBigUInt64LE=Ge(function(x){x=x>>>0,J(x,"offset");const T=this[x],Q=this[x+7];(T===void 0||Q===void 0)&&ne(x,this.length-8);const he=T+this[++x]*2**8+this[++x]*2**16+this[++x]*2**24,Ee=this[++x]+this[++x]*2**8+this[++x]*2**16+Q*2**24;return BigInt(he)+(BigInt(Ee)<<BigInt(32))}),l.prototype.readBigUInt64BE=Ge(function(x){x=x>>>0,J(x,"offset");const T=this[x],Q=this[x+7];(T===void 0||Q===void 0)&&ne(x,this.length-8);const he=T*2**24+this[++x]*2**16+this[++x]*2**8+this[++x],Ee=this[++x]*2**24+this[++x]*2**16+this[++x]*2**8+Q;return(BigInt(he)<<BigInt(32))+BigInt(Ee)}),l.prototype.readIntLE=function(x,T,Q){x=x>>>0,T=T>>>0,Q||G(x,T,this.length);let he=this[x],Ee=1,Te=0;for(;++Te<T&&(Ee*=256);)he+=this[x+Te]*Ee;return Ee*=128,he>=Ee&&(he-=Math.pow(2,8*T)),he},l.prototype.readIntBE=function(x,T,Q){x=x>>>0,T=T>>>0,Q||G(x,T,this.length);let he=T,Ee=1,Te=this[x+--he];for(;he>0&&(Ee*=256);)Te+=this[x+--he]*Ee;return Ee*=128,Te>=Ee&&(Te-=Math.pow(2,8*T)),Te},l.prototype.readInt8=function(x,T){return x=x>>>0,T||G(x,1,this.length),this[x]&128?(255-this[x]+1)*-1:this[x]},l.prototype.readInt16LE=function(x,T){x=x>>>0,T||G(x,2,this.length);const Q=this[x]|this[x+1]<<8;return Q&32768?Q|4294901760:Q},l.prototype.readInt16BE=function(x,T){x=x>>>0,T||G(x,2,this.length);const Q=this[x+1]|this[x]<<8;return Q&32768?Q|4294901760:Q},l.prototype.readInt32LE=function(x,T){return x=x>>>0,T||G(x,4,this.length),this[x]|this[x+1]<<8|this[x+2]<<16|this[x+3]<<24},l.prototype.readInt32BE=function(x,T){return x=x>>>0,T||G(x,4,this.length),this[x]<<24|this[x+1]<<16|this[x+2]<<8|this[x+3]},l.prototype.readBigInt64LE=Ge(function(x){x=x>>>0,J(x,"offset");const T=this[x],Q=this[x+7];(T===void 0||Q===void 0)&&ne(x,this.length-8);const he=this[x+4]+this[x+5]*2**8+this[x+6]*2**16+(Q<<24);return(BigInt(he)<<BigInt(32))+BigInt(T+this[++x]*2**8+this[++x]*2**16+this[++x]*2**24)}),l.prototype.readBigInt64BE=Ge(function(x){x=x>>>0,J(x,"offset");const T=this[x],Q=this[x+7];(T===void 0||Q===void 0)&&ne(x,this.length-8);const he=(T<<24)+this[++x]*2**16+this[++x]*2**8+this[++x];return(BigInt(he)<<BigInt(32))+BigInt(this[++x]*2**24+this[++x]*2**16+this[++x]*2**8+Q)}),l.prototype.readFloatLE=function(x,T){return x=x>>>0,T||G(x,4,this.length),t.read(this,x,!0,23,4)},l.prototype.readFloatBE=function(x,T){return x=x>>>0,T||G(x,4,this.length),t.read(this,x,!1,23,4)},l.prototype.readDoubleLE=function(x,T){return x=x>>>0,T||G(x,8,this.length),t.read(this,x,!0,52,8)},l.prototype.readDoubleBE=function(x,T){return x=x>>>0,T||G(x,8,this.length),t.read(this,x,!1,52,8)};function se(q,x,T,Q,he,Ee){if(!l.isBuffer(q))throw new TypeError('"buffer" argument must be a Buffer instance');if(x>he||x<Ee)throw new RangeError('"value" argument is out of bounds');if(T+Q>q.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(x,T,Q,he){if(x=+x,T=T>>>0,Q=Q>>>0,!he){const ze=Math.pow(2,8*Q)-1;se(this,x,T,Q,ze,0)}let Ee=1,Te=0;for(this[T]=x&255;++Te<Q&&(Ee*=256);)this[T+Te]=x/Ee&255;return T+Q},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(x,T,Q,he){if(x=+x,T=T>>>0,Q=Q>>>0,!he){const ze=Math.pow(2,8*Q)-1;se(this,x,T,Q,ze,0)}let Ee=Q-1,Te=1;for(this[T+Ee]=x&255;--Ee>=0&&(Te*=256);)this[T+Ee]=x/Te&255;return T+Q},l.prototype.writeUint8=l.prototype.writeUInt8=function(x,T,Q){return x=+x,T=T>>>0,Q||se(this,x,T,1,255,0),this[T]=x&255,T+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(x,T,Q){return x=+x,T=T>>>0,Q||se(this,x,T,2,65535,0),this[T]=x&255,this[T+1]=x>>>8,T+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(x,T,Q){return x=+x,T=T>>>0,Q||se(this,x,T,2,65535,0),this[T]=x>>>8,this[T+1]=x&255,T+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(x,T,Q){return x=+x,T=T>>>0,Q||se(this,x,T,4,4294967295,0),this[T+3]=x>>>24,this[T+2]=x>>>16,this[T+1]=x>>>8,this[T]=x&255,T+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(x,T,Q){return x=+x,T=T>>>0,Q||se(this,x,T,4,4294967295,0),this[T]=x>>>24,this[T+1]=x>>>16,this[T+2]=x>>>8,this[T+3]=x&255,T+4};function ie(q,x,T,Q,he){xe(x,Q,he,q,T,7);let Ee=Number(x&BigInt(4294967295));q[T++]=Ee,Ee=Ee>>8,q[T++]=Ee,Ee=Ee>>8,q[T++]=Ee,Ee=Ee>>8,q[T++]=Ee;let Te=Number(x>>BigInt(32)&BigInt(4294967295));return q[T++]=Te,Te=Te>>8,q[T++]=Te,Te=Te>>8,q[T++]=Te,Te=Te>>8,q[T++]=Te,T}function ge(q,x,T,Q,he){xe(x,Q,he,q,T,7);let Ee=Number(x&BigInt(4294967295));q[T+7]=Ee,Ee=Ee>>8,q[T+6]=Ee,Ee=Ee>>8,q[T+5]=Ee,Ee=Ee>>8,q[T+4]=Ee;let Te=Number(x>>BigInt(32)&BigInt(4294967295));return q[T+3]=Te,Te=Te>>8,q[T+2]=Te,Te=Te>>8,q[T+1]=Te,Te=Te>>8,q[T]=Te,T+8}l.prototype.writeBigUInt64LE=Ge(function(x,T=0){return ie(this,x,T,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=Ge(function(x,T=0){return ge(this,x,T,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(x,T,Q,he){if(x=+x,T=T>>>0,!he){const rt=Math.pow(2,8*Q-1);se(this,x,T,Q,rt-1,-rt)}let Ee=0,Te=1,ze=0;for(this[T]=x&255;++Ee<Q&&(Te*=256);)x<0&&ze===0&&this[T+Ee-1]!==0&&(ze=1),this[T+Ee]=(x/Te>>0)-ze&255;return T+Q},l.prototype.writeIntBE=function(x,T,Q,he){if(x=+x,T=T>>>0,!he){const rt=Math.pow(2,8*Q-1);se(this,x,T,Q,rt-1,-rt)}let Ee=Q-1,Te=1,ze=0;for(this[T+Ee]=x&255;--Ee>=0&&(Te*=256);)x<0&&ze===0&&this[T+Ee+1]!==0&&(ze=1),this[T+Ee]=(x/Te>>0)-ze&255;return T+Q},l.prototype.writeInt8=function(x,T,Q){return x=+x,T=T>>>0,Q||se(this,x,T,1,127,-128),x<0&&(x=255+x+1),this[T]=x&255,T+1},l.prototype.writeInt16LE=function(x,T,Q){return x=+x,T=T>>>0,Q||se(this,x,T,2,32767,-32768),this[T]=x&255,this[T+1]=x>>>8,T+2},l.prototype.writeInt16BE=function(x,T,Q){return x=+x,T=T>>>0,Q||se(this,x,T,2,32767,-32768),this[T]=x>>>8,this[T+1]=x&255,T+2},l.prototype.writeInt32LE=function(x,T,Q){return x=+x,T=T>>>0,Q||se(this,x,T,4,2147483647,-2147483648),this[T]=x&255,this[T+1]=x>>>8,this[T+2]=x>>>16,this[T+3]=x>>>24,T+4},l.prototype.writeInt32BE=function(x,T,Q){return x=+x,T=T>>>0,Q||se(this,x,T,4,2147483647,-2147483648),x<0&&(x=4294967295+x+1),this[T]=x>>>24,this[T+1]=x>>>16,this[T+2]=x>>>8,this[T+3]=x&255,T+4},l.prototype.writeBigInt64LE=Ge(function(x,T=0){return ie(this,x,T,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=Ge(function(x,T=0){return ge(this,x,T,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ee(q,x,T,Q,he,Ee){if(T+Q>q.length)throw new RangeError("Index out of range");if(T<0)throw new RangeError("Index out of range")}function ae(q,x,T,Q,he){return x=+x,T=T>>>0,he||ee(q,x,T,4),t.write(q,x,T,Q,23,4),T+4}l.prototype.writeFloatLE=function(x,T,Q){return ae(this,x,T,!0,Q)},l.prototype.writeFloatBE=function(x,T,Q){return ae(this,x,T,!1,Q)};function le(q,x,T,Q,he){return x=+x,T=T>>>0,he||ee(q,x,T,8),t.write(q,x,T,Q,52,8),T+8}l.prototype.writeDoubleLE=function(x,T,Q){return le(this,x,T,!0,Q)},l.prototype.writeDoubleBE=function(x,T,Q){return le(this,x,T,!1,Q)},l.prototype.copy=function(x,T,Q,he){if(!l.isBuffer(x))throw new TypeError("argument should be a Buffer");if(Q||(Q=0),!he&&he!==0&&(he=this.length),T>=x.length&&(T=x.length),T||(T=0),he>0&&he<Q&&(he=Q),he===Q||x.length===0||this.length===0)return 0;if(T<0)throw new RangeError("targetStart out of bounds");if(Q<0||Q>=this.length)throw new RangeError("Index out of range");if(he<0)throw new RangeError("sourceEnd out of bounds");he>this.length&&(he=this.length),x.length-T<he-Q&&(he=x.length-T+Q);const Ee=he-Q;return this===x&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(T,Q,he):Uint8Array.prototype.set.call(x,this.subarray(Q,he),T),Ee},l.prototype.fill=function(x,T,Q,he){if(typeof x=="string"){if(typeof T=="string"?(he=T,T=0,Q=this.length):typeof Q=="string"&&(he=Q,Q=this.length),he!==void 0&&typeof he!="string")throw new TypeError("encoding must be a string");if(typeof he=="string"&&!l.isEncoding(he))throw new TypeError("Unknown encoding: "+he);if(x.length===1){const Te=x.charCodeAt(0);(he==="utf8"&&Te<128||he==="latin1")&&(x=Te)}}else typeof x=="number"?x=x&255:typeof x=="boolean"&&(x=Number(x));if(T<0||this.length<T||this.length<Q)throw new RangeError("Out of range index");if(Q<=T)return this;T=T>>>0,Q=Q===void 0?this.length:Q>>>0,x||(x=0);let Ee;if(typeof x=="number")for(Ee=T;Ee<Q;++Ee)this[Ee]=x;else{const Te=l.isBuffer(x)?x:l.from(x,he),ze=Te.length;if(ze===0)throw new TypeError('The value "'+x+'" is invalid for argument "value"');for(Ee=0;Ee<Q-T;++Ee)this[Ee+T]=Te[Ee%ze]}return this};const te={};function ce(q,x,T){te[q]=class extends T{constructor(){super(),Object.defineProperty(this,"message",{value:x.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${q}]`,this.stack,delete this.name}get code(){return q}set code(he){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:he,writable:!0})}toString(){return`${this.name} [${q}]: ${this.message}`}}}ce("ERR_BUFFER_OUT_OF_BOUNDS",function(q){return q?`${q} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ce("ERR_INVALID_ARG_TYPE",function(q,x){return`The "${q}" argument must be of type number. Received type ${typeof x}`},TypeError),ce("ERR_OUT_OF_RANGE",function(q,x,T){let Q=`The value of "${q}" is out of range.`,he=T;return Number.isInteger(T)&&Math.abs(T)>2**32?he=pe(String(T)):typeof T=="bigint"&&(he=String(T),(T>BigInt(2)**BigInt(32)||T<-(BigInt(2)**BigInt(32)))&&(he=pe(he)),he+="n"),Q+=` It must be ${x}. Received ${he}`,Q},RangeError);function pe(q){let x="",T=q.length;const Q=q[0]==="-"?1:0;for(;T>=Q+4;T-=3)x=`_${q.slice(T-3,T)}${x}`;return`${q.slice(0,T)}${x}`}function Ne(q,x,T){J(x,"offset"),(q[x]===void 0||q[x+T]===void 0)&&ne(x,q.length-(T+1))}function xe(q,x,T,Q,he,Ee){if(q>T||q<x){const Te=typeof x=="bigint"?"n":"";let ze;throw x===0||x===BigInt(0)?ze=`>= 0${Te} and < 2${Te} ** ${(Ee+1)*8}${Te}`:ze=`>= -(2${Te} ** ${(Ee+1)*8-1}${Te}) and < 2 ** ${(Ee+1)*8-1}${Te}`,new te.ERR_OUT_OF_RANGE("value",ze,q)}Ne(Q,he,Ee)}function J(q,x){if(typeof q!="number")throw new te.ERR_INVALID_ARG_TYPE(x,"number",q)}function ne(q,x,T){throw Math.floor(q)!==q?(J(q,T),new te.ERR_OUT_OF_RANGE("offset","an integer",q)):x<0?new te.ERR_BUFFER_OUT_OF_BOUNDS:new te.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${x}`,q)}const ye=/[^+/0-9A-Za-z-_]/g;function _e(q){if(q=q.split("=")[0],q=q.trim().replace(ye,""),q.length<2)return"";for(;q.length%4!==0;)q=q+"=";return q}function me(q,x){x=x||1/0;let T;const Q=q.length;let he=null;const Ee=[];for(let Te=0;Te<Q;++Te){if(T=q.charCodeAt(Te),T>55295&&T<57344){if(!he){if(T>56319){(x-=3)>-1&&Ee.push(239,191,189);continue}else if(Te+1===Q){(x-=3)>-1&&Ee.push(239,191,189);continue}he=T;continue}if(T<56320){(x-=3)>-1&&Ee.push(239,191,189),he=T;continue}T=(he-55296<<10|T-56320)+65536}else he&&(x-=3)>-1&&Ee.push(239,191,189);if(he=null,T<128){if((x-=1)<0)break;Ee.push(T)}else if(T<2048){if((x-=2)<0)break;Ee.push(T>>6|192,T&63|128)}else if(T<65536){if((x-=3)<0)break;Ee.push(T>>12|224,T>>6&63|128,T&63|128)}else if(T<1114112){if((x-=4)<0)break;Ee.push(T>>18|240,T>>12&63|128,T>>6&63|128,T&63|128)}else throw new Error("Invalid code point")}return Ee}function Ce(q){const x=[];for(let T=0;T<q.length;++T)x.push(q.charCodeAt(T)&255);return x}function de(q,x){let T,Q,he;const Ee=[];for(let Te=0;Te<q.length&&!((x-=2)<0);++Te)T=q.charCodeAt(Te),Q=T>>8,he=T%256,Ee.push(he),Ee.push(Q);return Ee}function Ae(q){return e.toByteArray(_e(q))}function Se(q,x,T,Q){let he;for(he=0;he<Q&&!(he+T>=x.length||he>=q.length);++he)x[he+T]=q[he];return he}function be(q,x){return q instanceof x||q!=null&&q.constructor!=null&&q.constructor.name!=null&&q.constructor.name===x.name}function Ve(q){return q!==q}const ht=(function(){const q="0123456789abcdef",x=new Array(256);for(let T=0;T<16;++T){const Q=T*16;for(let he=0;he<16;++he)x[Q+he]=q[T]+q[he]}return x})();function Ge(q){return typeof BigInt>"u"?Et:q}function Et(){throw new Error("BigInt not supported")}})(Za)),Za}var dp=Dn();const ni="http://www.w3.org/1999/02/22-rdf-syntax-ns#",ri="http://www.w3.org/2001/XMLSchema#",ki="http://www.w3.org/2000/10/swap/",en={xsd:{decimal:`${ri}decimal`,boolean:`${ri}boolean`,double:`${ri}double`,integer:`${ri}integer`,string:`${ri}string`},rdf:{type:`${ni}type`,nil:`${ni}nil`,first:`${ni}first`,rest:`${ni}rest`,langString:`${ni}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${ki}reify#forSome`,forAll:`${ki}reify#forAll`},log:{implies:`${ki}log#implies`,isImpliedBy:`${ki}log#isImpliedBy`}},{xsd:Li}=en,fp=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,eu={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},hp=/[\x00-\x20<>\\"\{\}\|\^\`]/,pp={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},mp=/$0^/;class gp{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,e=e||{},this._isImpliedBy=e.isImpliedBy,this._lineMode=!!e.lineMode){this._n3Mode=!1;for(const t in this)!(t in pp)&&this[t]instanceof RegExp&&(this[t]=mp)}else this._n3Mode=e.n3!==!1;this.comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,t){let r=this._input,a=r.length;for(;;){let l,o;for(;l=this._newline.exec(r);)this.comments&&(o=this._comment.exec(l[0]))&&s("comment",o[1],"",this._line,l[0].length),r=r.substr(l[0].length,r.length),a=r.length,this._line++;if(!l&&(l=this._whitespace.exec(r))&&(r=r.substr(l[0].length,r.length)),this._endOfFile.test(r))return t&&(this.comments&&(o=this._comment.exec(r))&&s("comment",o[1],"",this._line,r.length),r=null,s("eof","","",this._line,0)),this._input=r;const u=this._line,c=r[0];let f="",d="",g="",m=null,v=0,b=!1;switch(c){case"^":if(r.length<3)break;if(r[1]==="^"){if(this._previousMarker="^^",r=r.substr(2),r[0]!=="<"){b=!0;break}}else{this._n3Mode&&(v=1,f="^");break}case"<":if(m=this._unescapedIri.exec(r))f="IRI",d=m[1];else if(m=this._iri.exec(r)){if(d=this._unescape(m[1]),d===null||hp.test(d))return i(this);f="IRI"}else r.length>1&&r[1]==="<"?(f="<<",v=2):this._n3Mode&&r.length>1&&r[1]==="="&&(v=2,this._isImpliedBy?(f="abbreviation",d="<"):(f="inverse",d=">"));break;case">":r.length>1&&r[1]===">"&&(f=">>",v=2);break;case"_":((m=this._blank.exec(r))||t&&(m=this._blank.exec(`${r} `)))&&(f="blank",g="_",d=m[1]);break;case'"':if(m=this._simpleQuotedString.exec(r))d=m[1];else if({value:d,matchLength:v}=this._parseLiteral(r),d===null)return i(this);(m!==null||v!==0)&&(f="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(m=this._simpleApostropheString.exec(r))d=m[1];else if({value:d,matchLength:v}=this._parseLiteral(r),d===null)return i(this);(m!==null||v!==0)&&(f="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(m=this._variable.exec(r))&&(f="var",d=m[0]);break;case"@":this._previousMarker==="literal"&&(m=this._langcode.exec(r))?(f="langcode",d=m[1]):(m=this._keyword.exec(r))&&(f=m[0]);break;case".":if(r.length===1?t:r[1]<"0"||r[1]>"9"){f=".",v=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(m=this._number.exec(r)||t&&(m=this._number.exec(`${r} `)))&&(f="literal",d=m[0],g=typeof m[1]=="string"?Li.double:typeof m[2]=="string"?Li.decimal:Li.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(m=this._sparqlKeyword.exec(r))?f=m[0].toUpperCase():b=!0;break;case"f":case"t":(m=this._boolean.exec(r))?(f="literal",d=m[0],g=Li.boolean):b=!0;break;case"a":(m=this._shortPredicates.exec(r))?(f="abbreviation",d="a"):b=!0;break;case"=":this._n3Mode&&r.length>1&&(f="abbreviation",r[1]!==">"?(v=1,d="="):(v=2,d=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(v=1,f=c);break;case"{":!this._lineMode&&r.length>=2&&(r[1]==="|"?(f="{|",v=2):(f=c,v=1));break;case"|":r.length>=2&&r[1]==="}"&&(f="|}",v=2);break;default:b=!0}if(b&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(m=this._prefix.exec(r))?(f="prefix",d=m[1]||""):((m=this._prefixed.exec(r))||t&&(m=this._prefixed.exec(`${r} `)))&&(f="prefixed",g=m[1]||"",d=this._unescape(m[2]))),this._previousMarker==="^^")switch(f){case"prefixed":f="type";break;case"IRI":f="typeIRI";break;default:f=""}if(!f)return t||!/^'''|^"""/.test(r)&&/\n|\r/.test(r)?i(this):this._input=r;const _=v||m[0].length,N=s(f,d,g,u,_);this.previousToken=N,this._previousMarker=f,r=r.substr(_,r.length)}function s(l,o,u,c,f){const d=r?a-r.length:a,g=d+f,m={type:l,value:o,prefix:u,line:c,start:d,end:g};return e(null,m),m}function i(l){e(l._syntaxError(/^\S*/.exec(r)[0]))}}_unescape(e){let t=!1;const r=e.replace(fp,(a,s,i,l)=>{if(typeof s=="string")return String.fromCharCode(Number.parseInt(s,16));if(typeof i=="string"){let o=Number.parseInt(i,16);return o<=65535?String.fromCharCode(Number.parseInt(i,16)):String.fromCharCode(55296+((o-=65536)>>10),56320+(o&1023))}return l in eu?eu[l]:(t=!0,"")});return t?null:r}_parseLiteral(e){if(e.length>=3){const t=e.match(/^(?:"""|"|'''|'|)/)[0],r=t.length;let a=Math.max(this._literalClosingPos,r);for(;(a=e.indexOf(t,a))>0;){let s=0;for(;e[a-s-1]==="\\";)s++;if(s%2===0){const i=e.substring(r,a),l=i.split(/\r\n|\r|\n/).length-1,o=a+r;if(r===1&&l!==0||r===3&&this._lineMode)break;return this._line+=l,{value:this._unescape(i),matchLength:o}}a++}this._literalClosingPos=e.length-r+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const t=new Error(`Unexpected "${e}" on line ${this._line}.`);return t.context={token:void 0,line:this._line,previousToken:this.previousToken},t}_readStartingBom(e){return e.startsWith("\uFEFF")?e.substr(1):e}tokenize(e,t){if(this._line=1,typeof e=="string")if(this._input=this._readStartingBom(e),typeof t=="function")queueMicrotask(()=>this._tokenizeToEnd(t,!0));else{const r=[];let a;if(this._tokenizeToEnd((s,i)=>s?a=s:r.push(i),!0),a)throw a;return r}else this._pendingBuffer=null,typeof e.setEncoding=="function"&&e.setEncoding("utf8"),e.on("data",r=>{this._input!==null&&r.length!==0&&(this._pendingBuffer&&(r=dp.Buffer.concat([this._pendingBuffer,r]),this._pendingBuffer=null),r[r.length-1]&128?this._pendingBuffer=r:(typeof this._input>"u"?this._input=this._readStartingBom(typeof r=="string"?r:r.toString()):this._input+=r,this._tokenizeToEnd(t,!1)))}),e.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(t,!0)}),e.on("error",t)}}const{rdf:yp,xsd:Dr}=en;let ii,wp=0;const tu={namedNode:iu,blankNode:au,variable:lu,literal:su,defaultGraph:xp,quad:es,triple:es,fromTerm:si,fromQuad:ou};class In{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof In?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class nu extends In{get termType(){return"NamedNode"}}class ai extends In{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let t=e.lastIndexOf('"')+1;return t<e.length&&e[t++]==="@"?e.substr(t).toLowerCase():""}get datatype(){return new nu(this.datatypeString)}get datatypeString(){const e=this.id,t=e.lastIndexOf('"')+1,r=t<e.length?e[t]:"";return r==="^"?e.substr(t+2):r!=="@"?Dr.string:yp.langString}equals(e){return e instanceof ai?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class vp extends In{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class bp extends In{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}class Ep extends In{constructor(){return super(""),ii||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}}ii=new Ep;class ru extends In{constructor(e,t,r,a){super(""),this._subject=e,this._predicate=t,this._object=r,this._graph=a||ii}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function iu(n){return new nu(n)}function au(n){return new vp(n||`n3-${wp++}`)}function su(n,e){if(typeof e=="string")return new ai(`"${n}"@${e.toLowerCase()}`);let t=e?e.value:"";return t===""&&(typeof n=="boolean"?t=Dr.boolean:typeof n=="number"&&(Number.isFinite(n)?t=Number.isInteger(n)?Dr.integer:Dr.double:(t=Dr.double,Number.isNaN(n)||(n=n>0?"INF":"-INF")))),t===""||t===Dr.string?new ai(`"${n}"`):new ai(`"${n}"^^${t}`)}function lu(n){return new bp(n)}function xp(){return ii}function es(n,e,t,r){return new ru(n,e,t,r)}function si(n){if(n instanceof In)return n;switch(n.termType){case"NamedNode":return iu(n.value);case"BlankNode":return au(n.value);case"Variable":return lu(n.value);case"DefaultGraph":return ii;case"Literal":return su(n.value,n.language||n.datatype);case"Quad":return ou(n);default:throw new Error(`Unexpected termType: ${n.termType}`)}}function ou(n){if(n instanceof ru)return n;if(n.termType!=="Quad")throw new Error(`Unexpected termType: ${n.termType}`);return es(si(n.subject),si(n.predicate),si(n.object),si(n.graph))}let uu=0;class cu{constructor(e){this._contextStack=[],this._graph=null,e=e||{},this._setBase(e.baseIRI),e.factory&&du(this,e.factory);const t=typeof e.format=="string"?e.format.match(/\w*$/)[0].toLowerCase():"",r=/turtle/.test(t),a=/trig/.test(t),s=/triple/.test(t),i=/quad/.test(t),l=this._n3Mode=/n3/.test(t),o=s||i;(this._supportsNamedGraphs=!(r||l))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(r||a||s||l),this._isImpliedBy=e.isImpliedBy,this._supportsRDFStar=t===""||/star|\*$/.test(t),o&&(this._resolveRelativeIRI=u=>null),this._blankNodePrefix=typeof e.blankNodePrefix!="string"?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new gp({lineMode:o,n3:l,isImpliedBy:this._isImpliedBy}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){uu=0}_setBase(e){if(!e)this._base="",this._basePath="";else{const t=e.indexOf("#");t>=0&&(e=e.substr(0,t)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}}_saveContext(e,t,r,a,s){const i=this._n3Mode;this._contextStack.push({type:e,subject:r,predicate:a,object:s,graph:t,inverse:i?this._inversePredicate:!1,blankPrefix:i?this._prefixes._:"",quantified:i?this._quantified:null}),i&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,t){const r=this._contextStack.pop();if(!r||r.type!==e)return this._error(`Unexpected ${t.type}`,t);this._subject=r.subject,this._predicate=r.predicate,this._object=r.object,this._graph=r.graph,this._n3Mode&&(this._inversePredicate=r.inverse,this._prefixes._=r.blankPrefix,this._quantified=r.quantified)}_readInTopContext(e){switch(e.type){case"eof":return this._graph!==null?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,t){let r;switch(e.type){case"IRI":case"typeIRI":const a=this._resolveIRI(e.value);if(a===null)return this._error("Invalid IRI",e);r=this._factory.namedNode(a);break;case"type":case"prefixed":const s=this._prefixes[e.prefix];if(s===void 0)return this._error(`Undefined prefix "${e.prefix}:"`,e);r=this._factory.namedNode(s+e.value);break;case"blank":r=this._factory.blankNode(this._prefixes[e.prefix]+e.value);break;case"var":r=this._factory.variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!t&&this._n3Mode&&r.id in this._quantified&&(r=this._quantified[r.id]),r}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._factory.blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._factory.blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier="blankNode",this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier="variable",this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(e.prefix.length===0)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._subject=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const t=e.type;switch(t){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${t}`,e):(this._subject=null,t==="]"?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._factory.blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if((this._predicate=this._readEntity(e))===void 0)return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(e.prefix.length===0)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._factory.blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._object=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return e.type==="{"?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return e.type!=="{"?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return e.type==="]"?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if(e.type!=="]")return this._readBlankNodePunctuation(e);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const t=this._predicate===null;return this._restoreContext("blank",e),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:t?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let t=null,r=null,a=this._readListItem;const s=this._subject,i=this._contextStack,l=i[i.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,r=this._factory.blankNode(),this.RDF_FIRST,this._subject=t=this._factory.blankNode()),a=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,r=this._factory.blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),i.length!==0&&i[i.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(a=this._readPredicate,this._subject===this.RDF_NIL)return a}else if(a=this._getContextEndReader(),this._object===this.RDF_NIL)return a;r=this.RDF_NIL;break;case"literal":e.prefix.length===0?(this._literalValue=e.value,a=this._readListItemDataTypeOrLang):(t=this._factory.literal(e.value,this._factory.namedNode(e.prefix)),a=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if((t=this._readEntity(e))===void 0)return}if(r===null&&(this._subject=r=this._factory.blankNode()),s===null?l.predicate===null?l.subject=r:l.object=r:this._emit(s,this.RDF_REST,r,this._graph),t!==null){if(this._n3Mode&&(e.type==="IRI"||e.type==="prefixed"))return this._saveContext("item",this._graph,r,this.RDF_FIRST,t),this._subject=t,this._predicate=null,this._getPathReader(this._readListItem);this._emit(r,this.RDF_FIRST,t,this._graph)}return a}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let t=this._factory.literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const r=this._readEntity(e);if(r===void 0)return;t=this._factory.literal(this._literalValue,r),e=null;break;case"langcode":t=this._factory.literal(this._literalValue,e.value),e=null;break}return{token:e,literal:t}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,t){const r=this._completeLiteral(e);if(r)return this._object=r.literal,t&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),r.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(r.token))}_readFormulaTail(e){return e.type!=="}"?this._readPunctuation(e):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let t,r=this._graph;const a=this._subject,s=this._inversePredicate;switch(e.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,t=this._contextStack.length?this._readSubject:this._readInTopContext,s&&(this._inversePredicate=!1);break;case";":t=this._readPredicate;break;case",":t=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",e);const i=this._predicate,l=this._object;this._subject=this._factory.quad(a,i,l,this.DEFAULTGRAPH),t=this._readPredicate;break;case"|}":if(this._subject.termType!=="Quad")return this._error("Unexpected asserted triple closing",e);this._subject=null,t=this._readPunctuation;break;default:if(this._supportsQuads&&this._graph===null&&(r=this._readEntity(e))!==void 0){t=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(a!==null){const i=this._predicate,l=this._object;s?this._emit(l,i,a,r):this._emit(a,i,l,r)}return t}_readBlankNodePunctuation(e){let t;switch(e.type){case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),t}_readQuadPunctuation(e){return e.type!=="."?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return e.type!=="prefix"?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if(e.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const t=this._readEntity(e);return this._prefixes[this._prefix]=t.value,this._prefixCallback(this._prefix,t),this._readDeclarationPunctuation}_readBaseIRI(e){const t=e.type==="IRI"&&this._resolveIRI(e.value);return t?(this._setBase(t),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return e.type!=="]"?this._error("Invalid graph label",e):(this._subject=this._factory.blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):e.type!=="."?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let t;switch(e.type){case"IRI":case"prefixed":if((t=this._readEntity(e,!0))!==void 0)break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,t,this.QUANTIFIERS_GRAPH)):this._quantified[t.id]=this._factory[this._quantifier](this._factory.blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return e.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const t=this._contextStack,r=t.length&&t[t.length-1];if(r&&r.type==="item"){const a=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,a,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let t,r;const a=this._factory.blankNode();if((r=this._readEntity(e))!==void 0)return this._predicate===null?(t=this._subject,this._subject=a):(t=this._object,this._object=a),this._emit(t,r,a,this._graph),this._readPath}_readBackwardPath(e){const t=this._factory.blankNode();let r,a;if((r=this._readEntity(e))!==void 0)return this._predicate===null?(a=this._subject,this._subject=t):(a=this._object,this._object=t),this._emit(t,r,a,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return e.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(e))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(e.type!==">>")return this._error(`Expected >> but got ${e.type}`,e);const t=this._factory.quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),this._subject===null?(this._subject=t,this._readPredicate):(this._object=t,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,t,r,a){this._callback(null,this._factory.quad(e,t,r,a||this.DEFAULTGRAPH))}_error(e,t){const r=new Error(`${e} on line ${t.line}.`);r.context={token:t,line:t.line,previousToken:this._lexer.previousToken},this._callback(r),this._callback=Oi}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return(e[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const t=e.length;let r="",a=-1,s=-1,i=0,l="/";for(;a<t;){switch(l){case":":if(s<0&&e[++a]==="/"&&e[++a]==="/")for(;(s=a+1)<t&&e[s]!=="/";)a=s;break;case"?":case"#":a=t;break;case"/":if(e[a+1]===".")switch(l=e[++a+1],l){case"/":r+=e.substring(i,a-1),i=a+1;break;case void 0:case"?":case"#":return r+e.substring(i,a)+e.substr(a+1);case".":if(l=e[++a+1],l===void 0||l==="/"||l==="?"||l==="#"){if(r+=e.substring(i,a-2),(i=r.lastIndexOf("/"))>=s&&(r=r.substr(0,i)),l!=="/")return`${r}/${e.substr(a+1)}`;i=a+1}}}l=e[++a]}return r+e.substring(i)}parse(e,t,r){let a,s,i;if(t&&(t.onQuad||t.onPrefix||t.onComment)?(a=t.onQuad,s=t.onPrefix,i=t.onComment):(a=t,s=r),this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${uu++}_`,this._prefixCallback=s||Oi,this._inversePredicate=!1,this._quantified=Object.create(null),!a){const o=[];let u;if(this._callback=(c,f)=>{c?u=c:f&&o.push(f)},this._lexer.tokenize(e).every(c=>this._readCallback=this._readCallback(c)),u)throw u;return o}let l=(o,u)=>{o!==null?(this._callback(o),this._callback=Oi):this._readCallback&&(this._readCallback=this._readCallback(u))};i&&(this._lexer.comments=!0,l=(o,u)=>{o!==null?(this._callback(o),this._callback=Oi):this._readCallback&&(u.type==="comment"?i(u.value):this._readCallback=this._readCallback(u))}),this._callback=a,this._lexer.tokenize(e,l)}}function Oi(){}function du(n,e){n._factory=e,n.DEFAULTGRAPH=e.defaultGraph(),n.RDF_FIRST=e.namedNode(en.rdf.first),n.RDF_REST=e.namedNode(en.rdf.rest),n.RDF_NIL=e.namedNode(en.rdf.nil),n.N3_FORALL=e.namedNode(en.r.forAll),n.N3_FORSOME=e.namedNode(en.r.forSome),n.ABBREVIATIONS={a:e.namedNode(en.rdf.type),"=":e.namedNode(en.owl.sameAs),">":e.namedNode(en.log.implies),"<":e.namedNode(en.log.isImpliedBy)},n.QUANTIFIERS_GRAPH=e.namedNode("urn:n3:quantifiers")}du(cu.prototype,tu),tu.defaultGraph();var ts={exports:{}},ns={exports:{}},rs,fu;function mt(){if(fu)return rs;fu=1;class n extends Error{constructor(t){if(!Array.isArray(t))throw new TypeError(`Expected input to be an Array, got ${typeof t}`);let r="";for(let a=0;a<t.length;a++)r+=`    ${t[a].stack}
`;super(r),this.name="AggregateError",this.errors=t}}return rs={AggregateError:n,ArrayIsArray(e){return Array.isArray(e)},ArrayPrototypeIncludes(e,t){return e.includes(t)},ArrayPrototypeIndexOf(e,t){return e.indexOf(t)},ArrayPrototypeJoin(e,t){return e.join(t)},ArrayPrototypeMap(e,t){return e.map(t)},ArrayPrototypePop(e,t){return e.pop(t)},ArrayPrototypePush(e,t){return e.push(t)},ArrayPrototypeSlice(e,t,r){return e.slice(t,r)},Error,FunctionPrototypeCall(e,t,...r){return e.call(t,...r)},FunctionPrototypeSymbolHasInstance(e,t){return Function.prototype[Symbol.hasInstance].call(e,t)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(e,t){return Object.defineProperties(e,t)},ObjectDefineProperty(e,t,r){return Object.defineProperty(e,t,r)},ObjectGetOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)},ObjectKeys(e){return Object.keys(e)},ObjectSetPrototypeOf(e,t){return Object.setPrototypeOf(e,t)},Promise,PromisePrototypeCatch(e,t){return e.catch(t)},PromisePrototypeThen(e,t,r){return e.then(t,r)},PromiseReject(e){return Promise.reject(e)},PromiseResolve(e){return Promise.resolve(e)},ReflectApply:Reflect.apply,RegExpPrototypeTest(e,t){return e.test(t)},SafeSet:Set,String,StringPrototypeSlice(e,t,r){return e.slice(t,r)},StringPrototypeToLowerCase(e){return e.toLowerCase()},StringPrototypeToUpperCase(e){return e.toUpperCase()},StringPrototypeTrim(e){return e.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(e,t,r){return e.set(t,r)},Boolean,Uint8Array},rs}var is={exports:{}},as,hu;function pu(){return hu||(hu=1,as={format(n,...e){return n.replace(/%([sdifj])/g,function(...[t,r]){const a=e.shift();return r==="f"?a.toFixed(6):r==="j"?JSON.stringify(a):r==="s"&&typeof a=="object"?`${a.constructor!==Object?a.constructor.name:""} {}`.trim():a.toString()})},inspect(n){switch(typeof n){case"string":if(n.includes("'"))if(n.includes('"')){if(!n.includes("`")&&!n.includes("${"))return`\`${n}\``}else return`"${n}"`;return`'${n}'`;case"number":return isNaN(n)?"NaN":Object.is(n,-0)?String(n):n;case"bigint":return`${String(n)}n`;case"boolean":case"undefined":return String(n);case"object":return"{}"}}}),as}var ss,mu;function Rt(){if(mu)return ss;mu=1;const{format:n,inspect:e}=pu(),{AggregateError:t}=mt(),r=globalThis.AggregateError||t,a=Symbol("kIsNodeError"),s=["string","function","number","object","Function","Object","boolean","bigint","symbol"],i=/^([A-Z][a-z0-9]*)+$/,l="__node_internal_",o={};function u(b,_){if(!b)throw new o.ERR_INTERNAL_ASSERTION(_)}function c(b){let _="",N=b.length;const E=b[0]==="-"?1:0;for(;N>=E+4;N-=3)_=`_${b.slice(N-3,N)}${_}`;return`${b.slice(0,N)}${_}`}function f(b,_,N){if(typeof _=="function")return u(_.length<=N.length,`Code: ${b}; The provided arguments length (${N.length}) does not match the required ones (${_.length}).`),_(...N);const E=(_.match(/%[dfijoOs]/g)||[]).length;return u(E===N.length,`Code: ${b}; The provided arguments length (${N.length}) does not match the required ones (${E}).`),N.length===0?_:n(_,...N)}function d(b,_,N){N||(N=Error);class E extends N{constructor(...p){super(f(b,_,p))}toString(){return`${this.name} [${b}]: ${this.message}`}}Object.defineProperties(E.prototype,{name:{value:N.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${b}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),E.prototype.code=b,E.prototype[a]=!0,o[b]=E}function g(b){const _=l+b.name;return Object.defineProperty(b,"name",{value:_}),b}function m(b,_){if(b&&_&&b!==_){if(Array.isArray(_.errors))return _.errors.push(b),_;const N=new r([_,b],_.message);return N.code=_.code,N}return b||_}class v extends Error{constructor(_="The operation was aborted",N=void 0){if(N!==void 0&&typeof N!="object")throw new o.ERR_INVALID_ARG_TYPE("options","Object",N);super(_,N),this.code="ABORT_ERR",this.name="AbortError"}}return d("ERR_ASSERTION","%s",Error),d("ERR_INVALID_ARG_TYPE",(b,_,N)=>{u(typeof b=="string","'name' must be a string"),Array.isArray(_)||(_=[_]);let E="The ";b.endsWith(" argument")?E+=`${b} `:E+=`"${b}" ${b.includes(".")?"property":"argument"} `,E+="must be ";const w=[],p=[],S=[];for(const A of _)u(typeof A=="string","All expected entries have to be of type string"),s.includes(A)?w.push(A.toLowerCase()):i.test(A)?p.push(A):(u(A!=="object",'The value "object" should be written as "Object"'),S.push(A));if(p.length>0){const A=w.indexOf("object");A!==-1&&(w.splice(w,A,1),p.push("Object"))}if(w.length>0){switch(w.length){case 1:E+=`of type ${w[0]}`;break;case 2:E+=`one of type ${w[0]} or ${w[1]}`;break;default:{const A=w.pop();E+=`one of type ${w.join(", ")}, or ${A}`}}(p.length>0||S.length>0)&&(E+=" or ")}if(p.length>0){switch(p.length){case 1:E+=`an instance of ${p[0]}`;break;case 2:E+=`an instance of ${p[0]} or ${p[1]}`;break;default:{const A=p.pop();E+=`an instance of ${p.join(", ")}, or ${A}`}}S.length>0&&(E+=" or ")}switch(S.length){case 0:break;case 1:S[0].toLowerCase()!==S[0]&&(E+="an "),E+=`${S[0]}`;break;case 2:E+=`one of ${S[0]} or ${S[1]}`;break;default:{const A=S.pop();E+=`one of ${S.join(", ")}, or ${A}`}}if(N==null)E+=`. Received ${N}`;else if(typeof N=="function"&&N.name)E+=`. Received function ${N.name}`;else if(typeof N=="object"){var F;if((F=N.constructor)!==null&&F!==void 0&&F.name)E+=`. Received an instance of ${N.constructor.name}`;else{const A=e(N,{depth:-1});E+=`. Received ${A}`}}else{let A=e(N,{colors:!1});A.length>25&&(A=`${A.slice(0,25)}...`),E+=`. Received type ${typeof N} (${A})`}return E},TypeError),d("ERR_INVALID_ARG_VALUE",(b,_,N="is invalid")=>{let E=e(_);return E.length>128&&(E=E.slice(0,128)+"..."),`The ${b.includes(".")?"property":"argument"} '${b}' ${N}. Received ${E}`},TypeError),d("ERR_INVALID_RETURN_VALUE",(b,_,N)=>{var E;const w=N!=null&&(E=N.constructor)!==null&&E!==void 0&&E.name?`instance of ${N.constructor.name}`:`type ${typeof N}`;return`Expected ${b} to be returned from the "${_}" function but got ${w}.`},TypeError),d("ERR_MISSING_ARGS",(...b)=>{u(b.length>0,"At least one arg needs to be specified");let _;const N=b.length;switch(b=(Array.isArray(b)?b:[b]).map(E=>`"${E}"`).join(" or "),N){case 1:_+=`The ${b[0]} argument`;break;case 2:_+=`The ${b[0]} and ${b[1]} arguments`;break;default:{const E=b.pop();_+=`The ${b.join(", ")}, and ${E} arguments`}break}return`${_} must be specified`},TypeError),d("ERR_OUT_OF_RANGE",(b,_,N)=>{u(_,'Missing "range" argument');let E;if(Number.isInteger(N)&&Math.abs(N)>2**32)E=c(String(N));else if(typeof N=="bigint"){E=String(N);const w=BigInt(2)**BigInt(32);(N>w||N<-w)&&(E=c(E)),E+="n"}else E=e(N);return`The value of "${b}" is out of range. It must be ${_}. Received ${E}`},RangeError),d("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),d("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),d("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),d("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),d("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),d("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),d("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),d("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),d("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),d("ERR_STREAM_WRITE_AFTER_END","write after end",Error),d("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),ss={AbortError:v,aggregateTwoErrors:g(m),hideStackFrames:g,codes:o},ss}var li={exports:{}},gu;function oi(){if(gu)return li.exports;gu=1;const{AbortController:n,AbortSignal:e}=typeof self<"u"?self:typeof window<"u"?window:void 0;return li.exports=n,li.exports.AbortSignal=e,li.exports.default=n,li.exports}var Fi={exports:{}},yu;function Bi(){if(yu)return Fi.exports;yu=1;var n=typeof Reflect=="object"?Reflect:null,e=n&&typeof n.apply=="function"?n.apply:function(p,S,F){return Function.prototype.apply.call(p,S,F)},t;n&&typeof n.ownKeys=="function"?t=n.ownKeys:Object.getOwnPropertySymbols?t=function(p){return Object.getOwnPropertyNames(p).concat(Object.getOwnPropertySymbols(p))}:t=function(p){return Object.getOwnPropertyNames(p)};function r(w){console&&console.warn&&console.warn(w)}var a=Number.isNaN||function(p){return p!==p};function s(){s.init.call(this)}Fi.exports=s,Fi.exports.once=_,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var i=10;function l(w){if(typeof w!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof w)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return i},set:function(w){if(typeof w!="number"||w<0||a(w))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+w+".");i=w}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(p){if(typeof p!="number"||p<0||a(p))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+p+".");return this._maxListeners=p,this};function o(w){return w._maxListeners===void 0?s.defaultMaxListeners:w._maxListeners}s.prototype.getMaxListeners=function(){return o(this)},s.prototype.emit=function(p){for(var S=[],F=1;F<arguments.length;F++)S.push(arguments[F]);var A=p==="error",k=this._events;if(k!==void 0)A=A&&k.error===void 0;else if(!A)return!1;if(A){var C;if(S.length>0&&(C=S[0]),C instanceof Error)throw C;var L=new Error("Unhandled error."+(C?" ("+C.message+")":""));throw L.context=C,L}var P=k[p];if(P===void 0)return!1;if(typeof P=="function")e(P,this,S);else for(var M=P.length,B=m(P,M),F=0;F<M;++F)e(B[F],this,S);return!0};function u(w,p,S,F){var A,k,C;if(l(S),k=w._events,k===void 0?(k=w._events=Object.create(null),w._eventsCount=0):(k.newListener!==void 0&&(w.emit("newListener",p,S.listener?S.listener:S),k=w._events),C=k[p]),C===void 0)C=k[p]=S,++w._eventsCount;else if(typeof C=="function"?C=k[p]=F?[S,C]:[C,S]:F?C.unshift(S):C.push(S),A=o(w),A>0&&C.length>A&&!C.warned){C.warned=!0;var L=new Error("Possible EventEmitter memory leak detected. "+C.length+" "+String(p)+" listeners added. Use emitter.setMaxListeners() to increase limit");L.name="MaxListenersExceededWarning",L.emitter=w,L.type=p,L.count=C.length,r(L)}return w}s.prototype.addListener=function(p,S){return u(this,p,S,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(p,S){return u(this,p,S,!0)};function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(w,p,S){var F={fired:!1,wrapFn:void 0,target:w,type:p,listener:S},A=c.bind(F);return A.listener=S,F.wrapFn=A,A}s.prototype.once=function(p,S){return l(S),this.on(p,f(this,p,S)),this},s.prototype.prependOnceListener=function(p,S){return l(S),this.prependListener(p,f(this,p,S)),this},s.prototype.removeListener=function(p,S){var F,A,k,C,L;if(l(S),A=this._events,A===void 0)return this;if(F=A[p],F===void 0)return this;if(F===S||F.listener===S)--this._eventsCount===0?this._events=Object.create(null):(delete A[p],A.removeListener&&this.emit("removeListener",p,F.listener||S));else if(typeof F!="function"){for(k=-1,C=F.length-1;C>=0;C--)if(F[C]===S||F[C].listener===S){L=F[C].listener,k=C;break}if(k<0)return this;k===0?F.shift():v(F,k),F.length===1&&(A[p]=F[0]),A.removeListener!==void 0&&this.emit("removeListener",p,L||S)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(p){var S,F,A;if(F=this._events,F===void 0)return this;if(F.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):F[p]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete F[p]),this;if(arguments.length===0){var k=Object.keys(F),C;for(A=0;A<k.length;++A)C=k[A],C!=="removeListener"&&this.removeAllListeners(C);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(S=F[p],typeof S=="function")this.removeListener(p,S);else if(S!==void 0)for(A=S.length-1;A>=0;A--)this.removeListener(p,S[A]);return this};function d(w,p,S){var F=w._events;if(F===void 0)return[];var A=F[p];return A===void 0?[]:typeof A=="function"?S?[A.listener||A]:[A]:S?b(A):m(A,A.length)}s.prototype.listeners=function(p){return d(this,p,!0)},s.prototype.rawListeners=function(p){return d(this,p,!1)},s.listenerCount=function(w,p){return typeof w.listenerCount=="function"?w.listenerCount(p):g.call(w,p)},s.prototype.listenerCount=g;function g(w){var p=this._events;if(p!==void 0){var S=p[w];if(typeof S=="function")return 1;if(S!==void 0)return S.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function m(w,p){for(var S=new Array(p),F=0;F<p;++F)S[F]=w[F];return S}function v(w,p){for(;p+1<w.length;p++)w[p]=w[p+1];w.pop()}function b(w){for(var p=new Array(w.length),S=0;S<p.length;++S)p[S]=w[S].listener||w[S];return p}function _(w,p){return new Promise(function(S,F){function A(C){w.removeListener(p,k),F(C)}function k(){typeof w.removeListener=="function"&&w.removeListener("error",A),S([].slice.call(arguments))}E(w,p,k,{once:!0}),p!=="error"&&N(w,A,{once:!0})})}function N(w,p,S){typeof w.on=="function"&&E(w,"error",p,S)}function E(w,p,S,F){if(typeof w.on=="function")F.once?w.once(p,S):w.on(p,S);else if(typeof w.addEventListener=="function")w.addEventListener(p,function A(k){F.once&&w.removeEventListener(p,A),S(k)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof w)}return Fi.exports}var wu;function Pt(){return wu||(wu=1,(function(n){const e=Dn(),{format:t,inspect:r}=pu(),{codes:{ERR_INVALID_ARG_TYPE:a}}=Rt(),{kResistStopPropagation:s,AggregateError:i,SymbolDispose:l}=mt(),o=globalThis.AbortSignal||oi().AbortSignal,u=globalThis.AbortController||oi().AbortController,c=Object.getPrototypeOf(async function(){}).constructor,f=globalThis.Blob||e.Blob,d=typeof f<"u"?function(b){return b instanceof f}:function(b){return!1},g=(v,b)=>{if(v!==void 0&&(v===null||typeof v!="object"||!("aborted"in v)))throw new a(b,"AbortSignal",v)},m=(v,b)=>{if(typeof v!="function")throw new a(b,"Function",v)};n.exports={AggregateError:i,kEmptyObject:Object.freeze({}),once(v){let b=!1;return function(..._){b||(b=!0,v.apply(this,_))}},createDeferredPromise:function(){let v,b;return{promise:new Promise((N,E)=>{v=N,b=E}),resolve:v,reject:b}},promisify(v){return new Promise((b,_)=>{v((N,...E)=>N?_(N):b(...E))})},debuglog(){return function(){}},format:t,inspect:r,types:{isAsyncFunction(v){return v instanceof c},isArrayBufferView(v){return ArrayBuffer.isView(v)}},isBlob:d,deprecate(v,b){return v},addAbortListener:Bi().addAbortListener||function(b,_){if(b===void 0)throw new a("signal","AbortSignal",b);g(b,"signal"),m(_,"listener");let N;return b.aborted?queueMicrotask(()=>_()):(b.addEventListener("abort",_,{__proto__:null,once:!0,[s]:!0}),N=()=>{b.removeEventListener("abort",_)}),{__proto__:null,[l](){var E;(E=N)===null||E===void 0||E()}}},AbortSignalAny:o.any||function(b){if(b.length===1)return b[0];const _=new u,N=()=>_.abort();return b.forEach(E=>{g(E,"signals"),E.addEventListener("abort",N,{once:!0})}),_.signal.addEventListener("abort",()=>{b.forEach(E=>E.removeEventListener("abort",N))},{once:!0}),_.signal}},n.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(is)),is.exports}var Pi={},ls,vu;function ui(){if(vu)return ls;vu=1;const{ArrayIsArray:n,ArrayPrototypeIncludes:e,ArrayPrototypeJoin:t,ArrayPrototypeMap:r,NumberIsInteger:a,NumberIsNaN:s,NumberMAX_SAFE_INTEGER:i,NumberMIN_SAFE_INTEGER:l,NumberParseInt:o,ObjectPrototypeHasOwnProperty:u,RegExpPrototypeExec:c,String:f,StringPrototypeToUpperCase:d,StringPrototypeTrim:g}=mt(),{hideStackFrames:m,codes:{ERR_SOCKET_BAD_PORT:v,ERR_INVALID_ARG_TYPE:b,ERR_INVALID_ARG_VALUE:_,ERR_OUT_OF_RANGE:N,ERR_UNKNOWN_SIGNAL:E}}=Rt(),{normalizeEncoding:w}=Pt(),{isAsyncFunction:p,isArrayBufferView:S}=Pt().types,F={};function A(de){return de===(de|0)}function k(de){return de===de>>>0}const C=/^[0-7]+$/,L="must be a 32-bit unsigned integer or an octal string";function P(de,Ae,Se){if(typeof de>"u"&&(de=Se),typeof de=="string"){if(c(C,de)===null)throw new _(Ae,de,L);de=o(de,8)}return O(de,Ae),de}const M=m((de,Ae,Se=l,be=i)=>{if(typeof de!="number")throw new b(Ae,"number",de);if(!a(de))throw new N(Ae,"an integer",de);if(de<Se||de>be)throw new N(Ae,`>= ${Se} && <= ${be}`,de)}),B=m((de,Ae,Se=-2147483648,be=2147483647)=>{if(typeof de!="number")throw new b(Ae,"number",de);if(!a(de))throw new N(Ae,"an integer",de);if(de<Se||de>be)throw new N(Ae,`>= ${Se} && <= ${be}`,de)}),O=m((de,Ae,Se=!1)=>{if(typeof de!="number")throw new b(Ae,"number",de);if(!a(de))throw new N(Ae,"an integer",de);const be=Se?1:0,Ve=4294967295;if(de<be||de>Ve)throw new N(Ae,`>= ${be} && <= ${Ve}`,de)});function R(de,Ae){if(typeof de!="string")throw new b(Ae,"string",de)}function H(de,Ae,Se=void 0,be){if(typeof de!="number")throw new b(Ae,"number",de);if(Se!=null&&de<Se||be!=null&&de>be||(Se!=null||be!=null)&&s(de))throw new N(Ae,`${Se!=null?`>= ${Se}`:""}${Se!=null&&be!=null?" && ":""}${be!=null?`<= ${be}`:""}`,de)}const j=m((de,Ae,Se)=>{if(!e(Se,de)){const Ve="must be one of: "+t(r(Se,ht=>typeof ht=="string"?`'${ht}'`:f(ht)),", ");throw new _(Ae,de,Ve)}});function K(de,Ae){if(typeof de!="boolean")throw new b(Ae,"boolean",de)}function I(de,Ae,Se){return de==null||!u(de,Ae)?Se:de[Ae]}const G=m((de,Ae,Se=null)=>{const be=I(Se,"allowArray",!1),Ve=I(Se,"allowFunction",!1);if(!I(Se,"nullable",!1)&&de===null||!be&&n(de)||typeof de!="object"&&(!Ve||typeof de!="function"))throw new b(Ae,"Object",de)}),se=m((de,Ae)=>{if(de!=null&&typeof de!="object"&&typeof de!="function")throw new b(Ae,"a dictionary",de)}),ie=m((de,Ae,Se=0)=>{if(!n(de))throw new b(Ae,"Array",de);if(de.length<Se){const be=`must be longer than ${Se}`;throw new _(Ae,de,be)}});function ge(de,Ae){ie(de,Ae);for(let Se=0;Se<de.length;Se++)R(de[Se],`${Ae}[${Se}]`)}function ee(de,Ae){ie(de,Ae);for(let Se=0;Se<de.length;Se++)K(de[Se],`${Ae}[${Se}]`)}function ae(de,Ae){ie(de,Ae);for(let Se=0;Se<de.length;Se++){const be=de[Se],Ve=`${Ae}[${Se}]`;if(be==null)throw new b(Ve,"AbortSignal",be);Ne(be,Ve)}}function le(de,Ae="signal"){if(R(de,Ae),F[de]===void 0)throw F[d(de)]!==void 0?new E(de+" (signals must use all capital letters)"):new E(de)}const te=m((de,Ae="buffer")=>{if(!S(de))throw new b(Ae,["Buffer","TypedArray","DataView"],de)});function ce(de,Ae){const Se=w(Ae),be=de.length;if(Se==="hex"&&be%2!==0)throw new _("encoding",Ae,`is invalid for data of length ${be}`)}function pe(de,Ae="Port",Se=!0){if(typeof de!="number"&&typeof de!="string"||typeof de=="string"&&g(de).length===0||+de!==+de>>>0||de>65535||de===0&&!Se)throw new v(Ae,de,Se);return de|0}const Ne=m((de,Ae)=>{if(de!==void 0&&(de===null||typeof de!="object"||!("aborted"in de)))throw new b(Ae,"AbortSignal",de)}),xe=m((de,Ae)=>{if(typeof de!="function")throw new b(Ae,"Function",de)}),J=m((de,Ae)=>{if(typeof de!="function"||p(de))throw new b(Ae,"Function",de)}),ne=m((de,Ae)=>{if(de!==void 0)throw new b(Ae,"undefined",de)});function ye(de,Ae,Se){if(!e(Se,de))throw new b(Ae,`('${t(Se,"|")}')`,de)}const _e=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function me(de,Ae){if(typeof de>"u"||!c(_e,de))throw new _(Ae,de,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function Ce(de){if(typeof de=="string")return me(de,"hints"),de;if(n(de)){const Ae=de.length;let Se="";if(Ae===0)return Se;for(let be=0;be<Ae;be++){const Ve=de[be];me(Ve,"hints"),Se+=Ve,be!==Ae-1&&(Se+=", ")}return Se}throw new _("hints",de,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return ls={isInt32:A,isUint32:k,parseFileMode:P,validateArray:ie,validateStringArray:ge,validateBooleanArray:ee,validateAbortSignalArray:ae,validateBoolean:K,validateBuffer:te,validateDictionary:se,validateEncoding:ce,validateFunction:xe,validateInt32:B,validateInteger:M,validateNumber:H,validateObject:G,validateOneOf:j,validatePlainFunction:J,validatePort:pe,validateSignalName:le,validateString:R,validateUint32:O,validateUndefined:ne,validateUnion:ye,validateAbortSignal:Ne,validateLinkHeaderValue:Ce},ls}var Mi={exports:{}},os={exports:{}},bu;function sr(){if(bu)return os.exports;bu=1;var n=os.exports={},e,t;function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?e=setTimeout:e=r}catch{e=r}try{typeof clearTimeout=="function"?t=clearTimeout:t=a}catch{t=a}})();function s(v){if(e===setTimeout)return setTimeout(v,0);if((e===r||!e)&&setTimeout)return e=setTimeout,setTimeout(v,0);try{return e(v,0)}catch{try{return e.call(null,v,0)}catch{return e.call(this,v,0)}}}function i(v){if(t===clearTimeout)return clearTimeout(v);if((t===a||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(v);try{return t(v)}catch{try{return t.call(null,v)}catch{return t.call(this,v)}}}var l=[],o=!1,u,c=-1;function f(){!o||!u||(o=!1,u.length?l=u.concat(l):c=-1,l.length&&d())}function d(){if(!o){var v=s(f);o=!0;for(var b=l.length;b;){for(u=l,l=[];++c<b;)u&&u[c].run();c=-1,b=l.length}u=null,o=!1,i(v)}}n.nextTick=function(v){var b=new Array(arguments.length-1);if(arguments.length>1)for(var _=1;_<arguments.length;_++)b[_-1]=arguments[_];l.push(new g(v,b)),l.length===1&&!o&&s(d)};function g(v,b){this.fun=v,this.array=b}g.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={};function m(){}return n.on=m,n.addListener=m,n.once=m,n.off=m,n.removeListener=m,n.removeAllListeners=m,n.emit=m,n.prependListener=m,n.prependOnceListener=m,n.listeners=function(v){return[]},n.binding=function(v){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(v){throw new Error("process.chdir is not supported")},n.umask=function(){return 0},os.exports}var us,Eu;function Rn(){if(Eu)return us;Eu=1;const{SymbolAsyncIterator:n,SymbolIterator:e,SymbolFor:t}=mt(),r=t("nodejs.stream.destroyed"),a=t("nodejs.stream.errored"),s=t("nodejs.stream.readable"),i=t("nodejs.stream.writable"),l=t("nodejs.stream.disturbed"),o=t("nodejs.webstream.isClosedPromise"),u=t("nodejs.webstream.controllerErrorFunction");function c(I,G=!1){var se;return!!(I&&typeof I.pipe=="function"&&typeof I.on=="function"&&(!G||typeof I.pause=="function"&&typeof I.resume=="function")&&(!I._writableState||((se=I._readableState)===null||se===void 0?void 0:se.readable)!==!1)&&(!I._writableState||I._readableState))}function f(I){var G;return!!(I&&typeof I.write=="function"&&typeof I.on=="function"&&(!I._readableState||((G=I._writableState)===null||G===void 0?void 0:G.writable)!==!1))}function d(I){return!!(I&&typeof I.pipe=="function"&&I._readableState&&typeof I.on=="function"&&typeof I.write=="function")}function g(I){return I&&(I._readableState||I._writableState||typeof I.write=="function"&&typeof I.on=="function"||typeof I.pipe=="function"&&typeof I.on=="function")}function m(I){return!!(I&&!g(I)&&typeof I.pipeThrough=="function"&&typeof I.getReader=="function"&&typeof I.cancel=="function")}function v(I){return!!(I&&!g(I)&&typeof I.getWriter=="function"&&typeof I.abort=="function")}function b(I){return!!(I&&!g(I)&&typeof I.readable=="object"&&typeof I.writable=="object")}function _(I){return m(I)||v(I)||b(I)}function N(I,G){return I==null?!1:G===!0?typeof I[n]=="function":G===!1?typeof I[e]=="function":typeof I[n]=="function"||typeof I[e]=="function"}function E(I){if(!g(I))return null;const G=I._writableState,se=I._readableState,ie=G||se;return!!(I.destroyed||I[r]||ie!=null&&ie.destroyed)}function w(I){if(!f(I))return null;if(I.writableEnded===!0)return!0;const G=I._writableState;return G!=null&&G.errored?!1:typeof G?.ended!="boolean"?null:G.ended}function p(I,G){if(!f(I))return null;if(I.writableFinished===!0)return!0;const se=I._writableState;return se!=null&&se.errored?!1:typeof se?.finished!="boolean"?null:!!(se.finished||G===!1&&se.ended===!0&&se.length===0)}function S(I){if(!c(I))return null;if(I.readableEnded===!0)return!0;const G=I._readableState;return!G||G.errored?!1:typeof G?.ended!="boolean"?null:G.ended}function F(I,G){if(!c(I))return null;const se=I._readableState;return se!=null&&se.errored?!1:typeof se?.endEmitted!="boolean"?null:!!(se.endEmitted||G===!1&&se.ended===!0&&se.length===0)}function A(I){return I&&I[s]!=null?I[s]:typeof I?.readable!="boolean"?null:E(I)?!1:c(I)&&I.readable&&!F(I)}function k(I){return I&&I[i]!=null?I[i]:typeof I?.writable!="boolean"?null:E(I)?!1:f(I)&&I.writable&&!w(I)}function C(I,G){return g(I)?E(I)?!0:!(G?.readable!==!1&&A(I)||G?.writable!==!1&&k(I)):null}function L(I){var G,se;return g(I)?I.writableErrored?I.writableErrored:(G=(se=I._writableState)===null||se===void 0?void 0:se.errored)!==null&&G!==void 0?G:null:null}function P(I){var G,se;return g(I)?I.readableErrored?I.readableErrored:(G=(se=I._readableState)===null||se===void 0?void 0:se.errored)!==null&&G!==void 0?G:null:null}function M(I){if(!g(I))return null;if(typeof I.closed=="boolean")return I.closed;const G=I._writableState,se=I._readableState;return typeof G?.closed=="boolean"||typeof se?.closed=="boolean"?G?.closed||se?.closed:typeof I._closed=="boolean"&&B(I)?I._closed:null}function B(I){return typeof I._closed=="boolean"&&typeof I._defaultKeepAlive=="boolean"&&typeof I._removedConnection=="boolean"&&typeof I._removedContLen=="boolean"}function O(I){return typeof I._sent100=="boolean"&&B(I)}function R(I){var G;return typeof I._consuming=="boolean"&&typeof I._dumped=="boolean"&&((G=I.req)===null||G===void 0?void 0:G.upgradeOrConnect)===void 0}function H(I){if(!g(I))return null;const G=I._writableState,se=I._readableState,ie=G||se;return!ie&&O(I)||!!(ie&&ie.autoDestroy&&ie.emitClose&&ie.closed===!1)}function j(I){var G;return!!(I&&((G=I[l])!==null&&G!==void 0?G:I.readableDidRead||I.readableAborted))}function K(I){var G,se,ie,ge,ee,ae,le,te,ce,pe;return!!(I&&((G=(se=(ie=(ge=(ee=(ae=I[a])!==null&&ae!==void 0?ae:I.readableErrored)!==null&&ee!==void 0?ee:I.writableErrored)!==null&&ge!==void 0?ge:(le=I._readableState)===null||le===void 0?void 0:le.errorEmitted)!==null&&ie!==void 0?ie:(te=I._writableState)===null||te===void 0?void 0:te.errorEmitted)!==null&&se!==void 0?se:(ce=I._readableState)===null||ce===void 0?void 0:ce.errored)!==null&&G!==void 0?G:!((pe=I._writableState)===null||pe===void 0)&&pe.errored))}return us={isDestroyed:E,kIsDestroyed:r,isDisturbed:j,kIsDisturbed:l,isErrored:K,kIsErrored:a,isReadable:A,kIsReadable:s,kIsClosedPromise:o,kControllerErrorFunction:u,kIsWritable:i,isClosed:M,isDuplexNodeStream:d,isFinished:C,isIterable:N,isReadableNodeStream:c,isReadableStream:m,isReadableEnded:S,isReadableFinished:F,isReadableErrored:P,isNodeStream:g,isWebStream:_,isWritable:k,isWritableNodeStream:f,isWritableStream:v,isWritableEnded:w,isWritableFinished:p,isWritableErrored:L,isServerRequest:R,isServerResponse:O,willEmitClose:H,isTransformStream:b},us}var xu;function jn(){if(xu)return Mi.exports;xu=1;const n=sr(),{AbortError:e,codes:t}=Rt(),{ERR_INVALID_ARG_TYPE:r,ERR_STREAM_PREMATURE_CLOSE:a}=t,{kEmptyObject:s,once:i}=Pt(),{validateAbortSignal:l,validateFunction:o,validateObject:u,validateBoolean:c}=ui(),{Promise:f,PromisePrototypeThen:d,SymbolDispose:g}=mt(),{isClosed:m,isReadable:v,isReadableNodeStream:b,isReadableStream:_,isReadableFinished:N,isReadableErrored:E,isWritable:w,isWritableNodeStream:p,isWritableStream:S,isWritableFinished:F,isWritableErrored:A,isNodeStream:k,willEmitClose:C,kIsClosedPromise:L}=Rn();let P;function M(j){return j.setHeader&&typeof j.abort=="function"}const B=()=>{};function O(j,K,I){var G,se;if(arguments.length===2?(I=K,K=s):K==null?K=s:u(K,"options"),o(I,"callback"),l(K.signal,"options.signal"),I=i(I),_(j)||S(j))return R(j,K,I);if(!k(j))throw new r("stream",["ReadableStream","WritableStream","Stream"],j);const ie=(G=K.readable)!==null&&G!==void 0?G:b(j),ge=(se=K.writable)!==null&&se!==void 0?se:p(j),ee=j._writableState,ae=j._readableState,le=()=>{j.writable||pe()};let te=C(j)&&b(j)===ie&&p(j)===ge,ce=F(j,!1);const pe=()=>{ce=!0,j.destroyed&&(te=!1),!(te&&(!j.readable||ie))&&(!ie||Ne)&&I.call(j)};let Ne=N(j,!1);const xe=()=>{Ne=!0,j.destroyed&&(te=!1),!(te&&(!j.writable||ge))&&(!ge||ce)&&I.call(j)},J=de=>{I.call(j,de)};let ne=m(j);const ye=()=>{ne=!0;const de=A(j)||E(j);if(de&&typeof de!="boolean")return I.call(j,de);if(ie&&!Ne&&b(j,!0)&&!N(j,!1))return I.call(j,new a);if(ge&&!ce&&!F(j,!1))return I.call(j,new a);I.call(j)},_e=()=>{ne=!0;const de=A(j)||E(j);if(de&&typeof de!="boolean")return I.call(j,de);I.call(j)},me=()=>{j.req.on("finish",pe)};M(j)?(j.on("complete",pe),te||j.on("abort",ye),j.req?me():j.on("request",me)):ge&&!ee&&(j.on("end",le),j.on("close",le)),!te&&typeof j.aborted=="boolean"&&j.on("aborted",ye),j.on("end",xe),j.on("finish",pe),K.error!==!1&&j.on("error",J),j.on("close",ye),ne?n.nextTick(ye):ee!=null&&ee.errorEmitted||ae!=null&&ae.errorEmitted?te||n.nextTick(_e):(!ie&&(!te||v(j))&&(ce||w(j)===!1)||!ge&&(!te||w(j))&&(Ne||v(j)===!1)||ae&&j.req&&j.aborted)&&n.nextTick(_e);const Ce=()=>{I=B,j.removeListener("aborted",ye),j.removeListener("complete",pe),j.removeListener("abort",ye),j.removeListener("request",me),j.req&&j.req.removeListener("finish",pe),j.removeListener("end",le),j.removeListener("close",le),j.removeListener("finish",pe),j.removeListener("end",xe),j.removeListener("error",J),j.removeListener("close",ye)};if(K.signal&&!ne){const de=()=>{const Ae=I;Ce(),Ae.call(j,new e(void 0,{cause:K.signal.reason}))};if(K.signal.aborted)n.nextTick(de);else{P=P||Pt().addAbortListener;const Ae=P(K.signal,de),Se=I;I=i((...be)=>{Ae[g](),Se.apply(j,be)})}}return Ce}function R(j,K,I){let G=!1,se=B;if(K.signal)if(se=()=>{G=!0,I.call(j,new e(void 0,{cause:K.signal.reason}))},K.signal.aborted)n.nextTick(se);else{P=P||Pt().addAbortListener;const ge=P(K.signal,se),ee=I;I=i((...ae)=>{ge[g](),ee.apply(j,ae)})}const ie=(...ge)=>{G||n.nextTick(()=>I.apply(j,ge))};return d(j[L].promise,ie,ie),B}function H(j,K){var I;let G=!1;return K===null&&(K=s),(I=K)!==null&&I!==void 0&&I.cleanup&&(c(K.cleanup,"cleanup"),G=K.cleanup),new f((se,ie)=>{const ge=O(j,K,ee=>{G&&ge(),ee?ie(ee):se()})})}return Mi.exports=O,Mi.exports.finished=H,Mi.exports}var cs,_u;function Ir(){if(_u)return cs;_u=1;const n=sr(),{aggregateTwoErrors:e,codes:{ERR_MULTIPLE_CALLBACK:t},AbortError:r}=Rt(),{Symbol:a}=mt(),{kIsDestroyed:s,isDestroyed:i,isFinished:l,isServerRequest:o}=Rn(),u=a("kDestroy"),c=a("kConstruct");function f(C,L,P){C&&(C.stack,L&&!L.errored&&(L.errored=C),P&&!P.errored&&(P.errored=C))}function d(C,L){const P=this._readableState,M=this._writableState,B=M||P;return M!=null&&M.destroyed||P!=null&&P.destroyed?(typeof L=="function"&&L(),this):(f(C,M,P),M&&(M.destroyed=!0),P&&(P.destroyed=!0),B.constructed?g(this,C,L):this.once(u,function(O){g(this,e(O,C),L)}),this)}function g(C,L,P){let M=!1;function B(O){if(M)return;M=!0;const R=C._readableState,H=C._writableState;f(O,H,R),H&&(H.closed=!0),R&&(R.closed=!0),typeof P=="function"&&P(O),O?n.nextTick(m,C,O):n.nextTick(v,C)}try{C._destroy(L||null,B)}catch(O){B(O)}}function m(C,L){b(C,L),v(C)}function v(C){const L=C._readableState,P=C._writableState;P&&(P.closeEmitted=!0),L&&(L.closeEmitted=!0),(P!=null&&P.emitClose||L!=null&&L.emitClose)&&C.emit("close")}function b(C,L){const P=C._readableState,M=C._writableState;M!=null&&M.errorEmitted||P!=null&&P.errorEmitted||(M&&(M.errorEmitted=!0),P&&(P.errorEmitted=!0),C.emit("error",L))}function _(){const C=this._readableState,L=this._writableState;C&&(C.constructed=!0,C.closed=!1,C.closeEmitted=!1,C.destroyed=!1,C.errored=null,C.errorEmitted=!1,C.reading=!1,C.ended=C.readable===!1,C.endEmitted=C.readable===!1),L&&(L.constructed=!0,L.destroyed=!1,L.closed=!1,L.closeEmitted=!1,L.errored=null,L.errorEmitted=!1,L.finalCalled=!1,L.prefinished=!1,L.ended=L.writable===!1,L.ending=L.writable===!1,L.finished=L.writable===!1)}function N(C,L,P){const M=C._readableState,B=C._writableState;if(B!=null&&B.destroyed||M!=null&&M.destroyed)return this;M!=null&&M.autoDestroy||B!=null&&B.autoDestroy?C.destroy(L):L&&(L.stack,B&&!B.errored&&(B.errored=L),M&&!M.errored&&(M.errored=L),P?n.nextTick(b,C,L):b(C,L))}function E(C,L){if(typeof C._construct!="function")return;const P=C._readableState,M=C._writableState;P&&(P.constructed=!1),M&&(M.constructed=!1),C.once(c,L),!(C.listenerCount(c)>1)&&n.nextTick(w,C)}function w(C){let L=!1;function P(M){if(L){N(C,M??new t);return}L=!0;const B=C._readableState,O=C._writableState,R=O||B;B&&(B.constructed=!0),O&&(O.constructed=!0),R.destroyed?C.emit(u,M):M?N(C,M,!0):n.nextTick(p,C)}try{C._construct(M=>{n.nextTick(P,M)})}catch(M){n.nextTick(P,M)}}function p(C){C.emit(c)}function S(C){return C?.setHeader&&typeof C.abort=="function"}function F(C){C.emit("close")}function A(C,L){C.emit("error",L),n.nextTick(F,C)}function k(C,L){!C||i(C)||(!L&&!l(C)&&(L=new r),o(C)?(C.socket=null,C.destroy(L)):S(C)?C.abort():S(C.req)?C.req.abort():typeof C.destroy=="function"?C.destroy(L):typeof C.close=="function"?C.close():L?n.nextTick(A,C,L):n.nextTick(F,C),C.destroyed||(C[s]=!0))}return cs={construct:E,destroyer:k,destroy:d,undestroy:_,errorOrDestroy:N},cs}var ds,Cu;function fs(){if(Cu)return ds;Cu=1;const{ArrayIsArray:n,ObjectSetPrototypeOf:e}=mt(),{EventEmitter:t}=Bi();function r(s){t.call(this,s)}e(r.prototype,t.prototype),e(r,t),r.prototype.pipe=function(s,i){const l=this;function o(v){s.writable&&s.write(v)===!1&&l.pause&&l.pause()}l.on("data",o);function u(){l.readable&&l.resume&&l.resume()}s.on("drain",u),!s._isStdio&&(!i||i.end!==!1)&&(l.on("end",f),l.on("close",d));let c=!1;function f(){c||(c=!0,s.end())}function d(){c||(c=!0,typeof s.destroy=="function"&&s.destroy())}function g(v){m(),t.listenerCount(this,"error")===0&&this.emit("error",v)}a(l,"error",g),a(s,"error",g);function m(){l.removeListener("data",o),s.removeListener("drain",u),l.removeListener("end",f),l.removeListener("close",d),l.removeListener("error",g),s.removeListener("error",g),l.removeListener("end",m),l.removeListener("close",m),s.removeListener("close",m)}return l.on("end",m),l.on("close",m),s.on("close",m),s.emit("pipe",l),s};function a(s,i,l){if(typeof s.prependListener=="function")return s.prependListener(i,l);!s._events||!s._events[i]?s.on(i,l):n(s._events[i])?s._events[i].unshift(l):s._events[i]=[l,s._events[i]]}return ds={Stream:r,prependListener:a},ds}var hs={exports:{}},Au;function Ui(){return Au||(Au=1,(function(n){const{SymbolDispose:e}=mt(),{AbortError:t,codes:r}=Rt(),{isNodeStream:a,isWebStream:s,kControllerErrorFunction:i}=Rn(),l=jn(),{ERR_INVALID_ARG_TYPE:o}=r;let u;const c=(f,d)=>{if(typeof f!="object"||!("aborted"in f))throw new o(d,"AbortSignal",f)};n.exports.addAbortSignal=function(d,g){if(c(d,"signal"),!a(g)&&!s(g))throw new o("stream",["ReadableStream","WritableStream","Stream"],g);return n.exports.addAbortSignalNoValidate(d,g)},n.exports.addAbortSignalNoValidate=function(f,d){if(typeof f!="object"||!("aborted"in f))return d;const g=a(d)?()=>{d.destroy(new t(void 0,{cause:f.reason}))}:()=>{d[i](new t(void 0,{cause:f.reason}))};if(f.aborted)g();else{u=u||Pt().addAbortListener;const m=u(f,g);l(d,m[e])}return d}})(hs)),hs.exports}var ps,Nu;function _p(){if(Nu)return ps;Nu=1;const{StringPrototypeSlice:n,SymbolIterator:e,TypedArrayPrototypeSet:t,Uint8Array:r}=mt(),{Buffer:a}=Dn(),{inspect:s}=Pt();return ps=class{constructor(){this.head=null,this.tail=null,this.length=0}push(l){const o={data:l,next:null};this.length>0?this.tail.next=o:this.head=o,this.tail=o,++this.length}unshift(l){const o={data:l,next:this.head};this.length===0&&(this.tail=o),this.head=o,++this.length}shift(){if(this.length===0)return;const l=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,l}clear(){this.head=this.tail=null,this.length=0}join(l){if(this.length===0)return"";let o=this.head,u=""+o.data;for(;(o=o.next)!==null;)u+=l+o.data;return u}concat(l){if(this.length===0)return a.alloc(0);const o=a.allocUnsafe(l>>>0);let u=this.head,c=0;for(;u;)t(o,u.data,c),c+=u.data.length,u=u.next;return o}consume(l,o){const u=this.head.data;if(l<u.length){const c=u.slice(0,l);return this.head.data=u.slice(l),c}return l===u.length?this.shift():o?this._getString(l):this._getBuffer(l)}first(){return this.head.data}*[e](){for(let l=this.head;l;l=l.next)yield l.data}_getString(l){let o="",u=this.head,c=0;do{const f=u.data;if(l>f.length)o+=f,l-=f.length;else{l===f.length?(o+=f,++c,u.next?this.head=u.next:this.head=this.tail=null):(o+=n(f,0,l),this.head=u,u.data=n(f,l));break}++c}while((u=u.next)!==null);return this.length-=c,o}_getBuffer(l){const o=a.allocUnsafe(l),u=l;let c=this.head,f=0;do{const d=c.data;if(l>d.length)t(o,d,u-l),l-=d.length;else{l===d.length?(t(o,d,u-l),++f,c.next?this.head=c.next:this.head=this.tail=null):(t(o,new r(d.buffer,d.byteOffset,l),u-l),this.head=c,c.data=d.slice(l));break}++f}while((c=c.next)!==null);return this.length-=f,o}[Symbol.for("nodejs.util.inspect.custom")](l,o){return s(this,{...o,depth:0,customInspect:!1})}},ps}var ms,Tu;function $i(){if(Tu)return ms;Tu=1;const{MathFloor:n,NumberIsInteger:e}=mt(),{validateInteger:t}=ui(),{ERR_INVALID_ARG_VALUE:r}=Rt().codes;let a=16*1024,s=16;function i(c,f,d){return c.highWaterMark!=null?c.highWaterMark:f?c[d]:null}function l(c){return c?s:a}function o(c,f){t(f,"value",0),c?s=f:a=f}function u(c,f,d,g){const m=i(f,g,d);if(m!=null){if(!e(m)||m<0){const v=g?`options.${d}`:"options.highWaterMark";throw new r(v,m)}return n(m)}return l(c.objectMode)}return ms={getHighWaterMark:u,getDefaultHighWaterMark:l,setDefaultHighWaterMark:o},ms}var gs={},qi={exports:{}};var Su;function Cp(){return Su||(Su=1,(function(n,e){var t=Dn(),r=t.Buffer;function a(i,l){for(var o in i)l[o]=i[o]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?n.exports=t:(a(t,e),e.Buffer=s);function s(i,l,o){return r(i,l,o)}s.prototype=Object.create(r.prototype),a(r,s),s.from=function(i,l,o){if(typeof i=="number")throw new TypeError("Argument must not be a number");return r(i,l,o)},s.alloc=function(i,l,o){if(typeof i!="number")throw new TypeError("Argument must be a number");var u=r(i);return l!==void 0?typeof o=="string"?u.fill(l,o):u.fill(l):u.fill(0),u},s.allocUnsafe=function(i){if(typeof i!="number")throw new TypeError("Argument must be a number");return r(i)},s.allocUnsafeSlow=function(i){if(typeof i!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(i)}})(qi,qi.exports)),qi.exports}var Du;function Ap(){if(Du)return gs;Du=1;var n=Cp().Buffer,e=n.isEncoding||function(_){switch(_=""+_,_&&_.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function t(_){if(!_)return"utf8";for(var N;;)switch(_){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return _;default:if(N)return;_=(""+_).toLowerCase(),N=!0}}function r(_){var N=t(_);if(typeof N!="string"&&(n.isEncoding===e||!e(_)))throw new Error("Unknown encoding: "+_);return N||_}gs.StringDecoder=a;function a(_){this.encoding=r(_);var N;switch(this.encoding){case"utf16le":this.text=f,this.end=d,N=4;break;case"utf8":this.fillLast=o,N=4;break;case"base64":this.text=g,this.end=m,N=3;break;default:this.write=v,this.end=b;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(N)}a.prototype.write=function(_){if(_.length===0)return"";var N,E;if(this.lastNeed){if(N=this.fillLast(_),N===void 0)return"";E=this.lastNeed,this.lastNeed=0}else E=0;return E<_.length?N?N+this.text(_,E):this.text(_,E):N||""},a.prototype.end=c,a.prototype.text=u,a.prototype.fillLast=function(_){if(this.lastNeed<=_.length)return _.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);_.copy(this.lastChar,this.lastTotal-this.lastNeed,0,_.length),this.lastNeed-=_.length};function s(_){return _<=127?0:_>>5===6?2:_>>4===14?3:_>>3===30?4:_>>6===2?-1:-2}function i(_,N,E){var w=N.length-1;if(w<E)return 0;var p=s(N[w]);return p>=0?(p>0&&(_.lastNeed=p-1),p):--w<E||p===-2?0:(p=s(N[w]),p>=0?(p>0&&(_.lastNeed=p-2),p):--w<E||p===-2?0:(p=s(N[w]),p>=0?(p>0&&(p===2?p=0:_.lastNeed=p-3),p):0))}function l(_,N,E){if((N[0]&192)!==128)return _.lastNeed=0,"�";if(_.lastNeed>1&&N.length>1){if((N[1]&192)!==128)return _.lastNeed=1,"�";if(_.lastNeed>2&&N.length>2&&(N[2]&192)!==128)return _.lastNeed=2,"�"}}function o(_){var N=this.lastTotal-this.lastNeed,E=l(this,_);if(E!==void 0)return E;if(this.lastNeed<=_.length)return _.copy(this.lastChar,N,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);_.copy(this.lastChar,N,0,_.length),this.lastNeed-=_.length}function u(_,N){var E=i(this,_,N);if(!this.lastNeed)return _.toString("utf8",N);this.lastTotal=E;var w=_.length-(E-this.lastNeed);return _.copy(this.lastChar,0,w),_.toString("utf8",N,w)}function c(_){var N=_&&_.length?this.write(_):"";return this.lastNeed?N+"�":N}function f(_,N){if((_.length-N)%2===0){var E=_.toString("utf16le",N);if(E){var w=E.charCodeAt(E.length-1);if(w>=55296&&w<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=_[_.length-2],this.lastChar[1]=_[_.length-1],E.slice(0,-1)}return E}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=_[_.length-1],_.toString("utf16le",N,_.length-1)}function d(_){var N=_&&_.length?this.write(_):"";if(this.lastNeed){var E=this.lastTotal-this.lastNeed;return N+this.lastChar.toString("utf16le",0,E)}return N}function g(_,N){var E=(_.length-N)%3;return E===0?_.toString("base64",N):(this.lastNeed=3-E,this.lastTotal=3,E===1?this.lastChar[0]=_[_.length-1]:(this.lastChar[0]=_[_.length-2],this.lastChar[1]=_[_.length-1]),_.toString("base64",N,_.length-E))}function m(_){var N=_&&_.length?this.write(_):"";return this.lastNeed?N+this.lastChar.toString("base64",0,3-this.lastNeed):N}function v(_){return _.toString(this.encoding)}function b(_){return _&&_.length?this.write(_):""}return gs}var ys,Iu;function Ru(){if(Iu)return ys;Iu=1;const n=sr(),{PromisePrototypeThen:e,SymbolAsyncIterator:t,SymbolIterator:r}=mt(),{Buffer:a}=Dn(),{ERR_INVALID_ARG_TYPE:s,ERR_STREAM_NULL_VALUES:i}=Rt().codes;function l(o,u,c){let f;if(typeof u=="string"||u instanceof a)return new o({objectMode:!0,...c,read(){this.push(u),this.push(null)}});let d;if(u&&u[t])d=!0,f=u[t]();else if(u&&u[r])d=!1,f=u[r]();else throw new s("iterable",["Iterable"],u);const g=new o({objectMode:!0,highWaterMark:1,...c});let m=!1;g._read=function(){m||(m=!0,b())},g._destroy=function(_,N){e(v(_),()=>n.nextTick(N,_),E=>n.nextTick(N,E||_))};async function v(_){const N=_!=null,E=typeof f.throw=="function";if(N&&E){const{value:w,done:p}=await f.throw(_);if(await w,p)return}if(typeof f.return=="function"){const{value:w}=await f.return();await w}}async function b(){for(;;){try{const{value:_,done:N}=d?await f.next():f.next();if(N)g.push(null);else{const E=_&&typeof _.then=="function"?await _:_;if(E===null)throw m=!1,new i;if(g.push(E))continue;m=!1}}catch(_){g.destroy(_)}break}}return g}return ys=l,ys}var ws,ku;function ji(){if(ku)return ws;ku=1;const n=sr(),{ArrayPrototypeIndexOf:e,NumberIsInteger:t,NumberIsNaN:r,NumberParseInt:a,ObjectDefineProperties:s,ObjectKeys:i,ObjectSetPrototypeOf:l,Promise:o,SafeSet:u,SymbolAsyncDispose:c,SymbolAsyncIterator:f,Symbol:d}=mt();ws=be,be.ReadableState=Se;const{EventEmitter:g}=Bi(),{Stream:m,prependListener:v}=fs(),{Buffer:b}=Dn(),{addAbortSignal:_}=Ui(),N=jn();let E=Pt().debuglog("stream",V=>{E=V});const w=_p(),p=Ir(),{getHighWaterMark:S,getDefaultHighWaterMark:F}=$i(),{aggregateTwoErrors:A,codes:{ERR_INVALID_ARG_TYPE:k,ERR_METHOD_NOT_IMPLEMENTED:C,ERR_OUT_OF_RANGE:L,ERR_STREAM_PUSH_AFTER_EOF:P,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:M},AbortError:B}=Rt(),{validateObject:O}=ui(),R=d("kPaused"),{StringDecoder:H}=Ap(),j=Ru();l(be.prototype,m.prototype),l(be,m);const K=()=>{},{errorOrDestroy:I}=p,G=1,se=2,ie=4,ge=8,ee=16,ae=32,le=64,te=128,ce=256,pe=512,Ne=1024,xe=2048,J=4096,ne=8192,ye=16384,_e=32768,me=65536,Ce=1<<17,de=1<<18;function Ae(V){return{enumerable:!1,get(){return(this.state&V)!==0},set(Z){Z?this.state|=V:this.state&=~V}}}s(Se.prototype,{objectMode:Ae(G),ended:Ae(se),endEmitted:Ae(ie),reading:Ae(ge),constructed:Ae(ee),sync:Ae(ae),needReadable:Ae(le),emittedReadable:Ae(te),readableListening:Ae(ce),resumeScheduled:Ae(pe),errorEmitted:Ae(Ne),emitClose:Ae(xe),autoDestroy:Ae(J),destroyed:Ae(ne),closed:Ae(ye),closeEmitted:Ae(_e),multiAwaitDrain:Ae(me),readingMore:Ae(Ce),dataEmitted:Ae(de)});function Se(V,Z,De){typeof De!="boolean"&&(De=Z instanceof kn()),this.state=xe|J|ee|ae,V&&V.objectMode&&(this.state|=G),De&&V&&V.readableObjectMode&&(this.state|=G),this.highWaterMark=V?S(this,V,"readableHighWaterMark",De):F(!1),this.buffer=new w,this.length=0,this.pipes=[],this.flowing=null,this[R]=null,V&&V.emitClose===!1&&(this.state&=~xe),V&&V.autoDestroy===!1&&(this.state&=~J),this.errored=null,this.defaultEncoding=V&&V.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,V&&V.encoding&&(this.decoder=new H(V.encoding),this.encoding=V.encoding)}function be(V){if(!(this instanceof be))return new be(V);const Z=this instanceof kn();this._readableState=new Se(V,this,Z),V&&(typeof V.read=="function"&&(this._read=V.read),typeof V.destroy=="function"&&(this._destroy=V.destroy),typeof V.construct=="function"&&(this._construct=V.construct),V.signal&&!Z&&_(V.signal,this)),m.call(this,V),p.construct(this,()=>{this._readableState.needReadable&&he(this,this._readableState)})}be.prototype.destroy=p.destroy,be.prototype._undestroy=p.undestroy,be.prototype._destroy=function(V,Z){Z(V)},be.prototype[g.captureRejectionSymbol]=function(V){this.destroy(V)},be.prototype[c]=function(){let V;return this.destroyed||(V=this.readableEnded?null:new B,this.destroy(V)),new o((Z,De)=>N(this,Ie=>Ie&&Ie!==V?De(Ie):Z(null)))},be.prototype.push=function(V,Z){return Ve(this,V,Z,!1)},be.prototype.unshift=function(V,Z){return Ve(this,V,Z,!0)};function Ve(V,Z,De,Ie){E("readableAddChunk",Z);const Be=V._readableState;let at;if((Be.state&G)===0&&(typeof Z=="string"?(De=De||Be.defaultEncoding,Be.encoding!==De&&(Ie&&Be.encoding?Z=b.from(Z,De).toString(Be.encoding):(Z=b.from(Z,De),De=""))):Z instanceof b?De="":m._isUint8Array(Z)?(Z=m._uint8ArrayToBuffer(Z),De=""):Z!=null&&(at=new k("chunk",["string","Buffer","Uint8Array"],Z))),at)I(V,at);else if(Z===null)Be.state&=~ge,x(V,Be);else if((Be.state&G)!==0||Z&&Z.length>0)if(Ie)if((Be.state&ie)!==0)I(V,new M);else{if(Be.destroyed||Be.errored)return!1;ht(V,Be,Z,!0)}else if(Be.ended)I(V,new P);else{if(Be.destroyed||Be.errored)return!1;Be.state&=~ge,Be.decoder&&!De?(Z=Be.decoder.write(Z),Be.objectMode||Z.length!==0?ht(V,Be,Z,!1):he(V,Be)):ht(V,Be,Z,!1)}else Ie||(Be.state&=~ge,he(V,Be));return!Be.ended&&(Be.length<Be.highWaterMark||Be.length===0)}function ht(V,Z,De,Ie){Z.flowing&&Z.length===0&&!Z.sync&&V.listenerCount("data")>0?((Z.state&me)!==0?Z.awaitDrainWriters.clear():Z.awaitDrainWriters=null,Z.dataEmitted=!0,V.emit("data",De)):(Z.length+=Z.objectMode?1:De.length,Ie?Z.buffer.unshift(De):Z.buffer.push(De),(Z.state&le)!==0&&T(V)),he(V,Z)}be.prototype.isPaused=function(){const V=this._readableState;return V[R]===!0||V.flowing===!1},be.prototype.setEncoding=function(V){const Z=new H(V);this._readableState.decoder=Z,this._readableState.encoding=this._readableState.decoder.encoding;const De=this._readableState.buffer;let Ie="";for(const Be of De)Ie+=Z.write(Be);return De.clear(),Ie!==""&&De.push(Ie),this._readableState.length=Ie.length,this};const Ge=1073741824;function Et(V){if(V>Ge)throw new L("size","<= 1GiB",V);return V--,V|=V>>>1,V|=V>>>2,V|=V>>>4,V|=V>>>8,V|=V>>>16,V++,V}function q(V,Z){return V<=0||Z.length===0&&Z.ended?0:(Z.state&G)!==0?1:r(V)?Z.flowing&&Z.length?Z.buffer.first().length:Z.length:V<=Z.length?V:Z.ended?Z.length:0}be.prototype.read=function(V){E("read",V),V===void 0?V=NaN:t(V)||(V=a(V,10));const Z=this._readableState,De=V;if(V>Z.highWaterMark&&(Z.highWaterMark=Et(V)),V!==0&&(Z.state&=~te),V===0&&Z.needReadable&&((Z.highWaterMark!==0?Z.length>=Z.highWaterMark:Z.length>0)||Z.ended))return E("read: emitReadable",Z.length,Z.ended),Z.length===0&&Z.ended?$(this):T(this),null;if(V=q(V,Z),V===0&&Z.ended)return Z.length===0&&$(this),null;let Ie=(Z.state&le)!==0;if(E("need readable",Ie),(Z.length===0||Z.length-V<Z.highWaterMark)&&(Ie=!0,E("length less than watermark",Ie)),Z.ended||Z.reading||Z.destroyed||Z.errored||!Z.constructed)Ie=!1,E("reading, ended or constructing",Ie);else if(Ie){E("do read"),Z.state|=ge|ae,Z.length===0&&(Z.state|=le);try{this._read(Z.highWaterMark)}catch(at){I(this,at)}Z.state&=~ae,Z.reading||(V=q(De,Z))}let Be;return V>0?Be=Kn(V,Z):Be=null,Be===null?(Z.needReadable=Z.length<=Z.highWaterMark,V=0):(Z.length-=V,Z.multiAwaitDrain?Z.awaitDrainWriters.clear():Z.awaitDrainWriters=null),Z.length===0&&(Z.ended||(Z.needReadable=!0),De!==V&&Z.ended&&$(this)),Be!==null&&!Z.errorEmitted&&!Z.closeEmitted&&(Z.dataEmitted=!0,this.emit("data",Be)),Be};function x(V,Z){if(E("onEofChunk"),!Z.ended){if(Z.decoder){const De=Z.decoder.end();De&&De.length&&(Z.buffer.push(De),Z.length+=Z.objectMode?1:De.length)}Z.ended=!0,Z.sync?T(V):(Z.needReadable=!1,Z.emittedReadable=!0,Q(V))}}function T(V){const Z=V._readableState;E("emitReadable",Z.needReadable,Z.emittedReadable),Z.needReadable=!1,Z.emittedReadable||(E("emitReadable",Z.flowing),Z.emittedReadable=!0,n.nextTick(Q,V))}function Q(V){const Z=V._readableState;E("emitReadable_",Z.destroyed,Z.length,Z.ended),!Z.destroyed&&!Z.errored&&(Z.length||Z.ended)&&(V.emit("readable"),Z.emittedReadable=!1),Z.needReadable=!Z.flowing&&!Z.ended&&Z.length<=Z.highWaterMark,Xe(V)}function he(V,Z){!Z.readingMore&&Z.constructed&&(Z.readingMore=!0,n.nextTick(Ee,V,Z))}function Ee(V,Z){for(;!Z.reading&&!Z.ended&&(Z.length<Z.highWaterMark||Z.flowing&&Z.length===0);){const De=Z.length;if(E("maybeReadMore read 0"),V.read(0),De===Z.length)break}Z.readingMore=!1}be.prototype._read=function(V){throw new C("_read()")},be.prototype.pipe=function(V,Z){const De=this,Ie=this._readableState;Ie.pipes.length===1&&(Ie.multiAwaitDrain||(Ie.multiAwaitDrain=!0,Ie.awaitDrainWriters=new u(Ie.awaitDrainWriters?[Ie.awaitDrainWriters]:[]))),Ie.pipes.push(V),E("pipe count=%d opts=%j",Ie.pipes.length,Z);const at=(!Z||Z.end!==!1)&&V!==n.stdout&&V!==n.stderr?Kt:ft;Ie.endEmitted?n.nextTick(at):De.once("end",at),V.on("unpipe",wt);function wt(Un,rn){E("onunpipe"),Un===De&&rn&&rn.hasUnpiped===!1&&(rn.hasUnpiped=!0,nn())}function Kt(){E("onend"),V.end()}let dt,gt=!1;function nn(){E("cleanup"),V.removeListener("close",Xt),V.removeListener("finish",ut),dt&&V.removeListener("drain",dt),V.removeListener("error",Mn),V.removeListener("unpipe",wt),De.removeListener("end",Kt),De.removeListener("end",ft),De.removeListener("data",xt),gt=!0,dt&&Ie.awaitDrainWriters&&(!V._writableState||V._writableState.needDrain)&&dt()}function vn(){gt||(Ie.pipes.length===1&&Ie.pipes[0]===V?(E("false write response, pause",0),Ie.awaitDrainWriters=V,Ie.multiAwaitDrain=!1):Ie.pipes.length>1&&Ie.pipes.includes(V)&&(E("false write response, pause",Ie.awaitDrainWriters.size),Ie.awaitDrainWriters.add(V)),De.pause()),dt||(dt=Te(De,V),V.on("drain",dt))}De.on("data",xt);function xt(Un){E("ondata");const rn=V.write(Un);E("dest.write",rn),rn===!1&&vn()}function Mn(Un){if(E("onerror",Un),ft(),V.removeListener("error",Mn),V.listenerCount("error")===0){const rn=V._writableState||V._readableState;rn&&!rn.errorEmitted?I(V,Un):V.emit("error",Un)}}v(V,"error",Mn);function Xt(){V.removeListener("finish",ut),ft()}V.once("close",Xt);function ut(){E("onfinish"),V.removeListener("close",Xt),ft()}V.once("finish",ut);function ft(){E("unpipe"),De.unpipe(V)}return V.emit("pipe",De),V.writableNeedDrain===!0?vn():Ie.flowing||(E("pipe resume"),De.resume()),V};function Te(V,Z){return function(){const Ie=V._readableState;Ie.awaitDrainWriters===Z?(E("pipeOnDrain",1),Ie.awaitDrainWriters=null):Ie.multiAwaitDrain&&(E("pipeOnDrain",Ie.awaitDrainWriters.size),Ie.awaitDrainWriters.delete(Z)),(!Ie.awaitDrainWriters||Ie.awaitDrainWriters.size===0)&&V.listenerCount("data")&&V.resume()}}be.prototype.unpipe=function(V){const Z=this._readableState,De={hasUnpiped:!1};if(Z.pipes.length===0)return this;if(!V){const Be=Z.pipes;Z.pipes=[],this.pause();for(let at=0;at<Be.length;at++)Be[at].emit("unpipe",this,{hasUnpiped:!1});return this}const Ie=e(Z.pipes,V);return Ie===-1?this:(Z.pipes.splice(Ie,1),Z.pipes.length===0&&this.pause(),V.emit("unpipe",this,De),this)},be.prototype.on=function(V,Z){const De=m.prototype.on.call(this,V,Z),Ie=this._readableState;return V==="data"?(Ie.readableListening=this.listenerCount("readable")>0,Ie.flowing!==!1&&this.resume()):V==="readable"&&!Ie.endEmitted&&!Ie.readableListening&&(Ie.readableListening=Ie.needReadable=!0,Ie.flowing=!1,Ie.emittedReadable=!1,E("on readable",Ie.length,Ie.reading),Ie.length?T(this):Ie.reading||n.nextTick(rt,this)),De},be.prototype.addListener=be.prototype.on,be.prototype.removeListener=function(V,Z){const De=m.prototype.removeListener.call(this,V,Z);return V==="readable"&&n.nextTick(ze,this),De},be.prototype.off=be.prototype.removeListener,be.prototype.removeAllListeners=function(V){const Z=m.prototype.removeAllListeners.apply(this,arguments);return(V==="readable"||V===void 0)&&n.nextTick(ze,this),Z};function ze(V){const Z=V._readableState;Z.readableListening=V.listenerCount("readable")>0,Z.resumeScheduled&&Z[R]===!1?Z.flowing=!0:V.listenerCount("data")>0?V.resume():Z.readableListening||(Z.flowing=null)}function rt(V){E("readable nexttick read 0"),V.read(0)}be.prototype.resume=function(){const V=this._readableState;return V.flowing||(E("resume"),V.flowing=!V.readableListening,Ye(this,V)),V[R]=!1,this};function Ye(V,Z){Z.resumeScheduled||(Z.resumeScheduled=!0,n.nextTick(tt,V,Z))}function tt(V,Z){E("resume",Z.reading),Z.reading||V.read(0),Z.resumeScheduled=!1,V.emit("resume"),Xe(V),Z.flowing&&!Z.reading&&V.read(0)}be.prototype.pause=function(){return E("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(E("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[R]=!0,this};function Xe(V){const Z=V._readableState;for(E("flow",Z.flowing);Z.flowing&&V.read()!==null;);}be.prototype.wrap=function(V){let Z=!1;V.on("data",Ie=>{!this.push(Ie)&&V.pause&&(Z=!0,V.pause())}),V.on("end",()=>{this.push(null)}),V.on("error",Ie=>{I(this,Ie)}),V.on("close",()=>{this.destroy()}),V.on("destroy",()=>{this.destroy()}),this._read=()=>{Z&&V.resume&&(Z=!1,V.resume())};const De=i(V);for(let Ie=1;Ie<De.length;Ie++){const Be=De[Ie];this[Be]===void 0&&typeof V[Be]=="function"&&(this[Be]=V[Be].bind(V))}return this},be.prototype[f]=function(){return wr(this)},be.prototype.iterator=function(V){return V!==void 0&&O(V,"options"),wr(this,V)};function wr(V,Z){typeof V.read!="function"&&(V=be.wrap(V,{objectMode:!0}));const De=vr(V,Z);return De.stream=V,De}async function*vr(V,Z){let De=K;function Ie(wt){this===V?(De(),De=K):De=wt}V.on("readable",Ie);let Be;const at=N(V,{writable:!1},wt=>{Be=wt?A(Be,wt):null,De(),De=K});try{for(;;){const wt=V.destroyed?null:V.read();if(wt!==null)yield wt;else{if(Be)throw Be;if(Be===null)return;await new o(Ie)}}}catch(wt){throw Be=A(Be,wt),Be}finally{(Be||Z?.destroyOnReturn!==!1)&&(Be===void 0||V._readableState.autoDestroy)?p.destroyer(V,null):(V.off("readable",Ie),at())}}s(be.prototype,{readable:{__proto__:null,get(){const V=this._readableState;return!!V&&V.readable!==!1&&!V.destroyed&&!V.errorEmitted&&!V.endEmitted},set(V){this._readableState&&(this._readableState.readable=!!V)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(V){this._readableState&&(this._readableState.flowing=V)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(V){this._readableState&&(this._readableState.destroyed=V)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),s(Se.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[R]!==!1},set(V){this[R]=!!V}}}),be._fromList=Kn;function Kn(V,Z){if(Z.length===0)return null;let De;return Z.objectMode?De=Z.buffer.shift():!V||V>=Z.length?(Z.decoder?De=Z.buffer.join(""):Z.buffer.length===1?De=Z.buffer.first():De=Z.buffer.concat(Z.length),Z.buffer.clear()):De=Z.buffer.consume(V,Z.decoder),De}function $(V){const Z=V._readableState;E("endReadable",Z.endEmitted),Z.endEmitted||(Z.ended=!0,n.nextTick(W,Z,V))}function W(V,Z){if(E("endReadableNT",V.endEmitted,V.length),!V.errored&&!V.closeEmitted&&!V.endEmitted&&V.length===0){if(V.endEmitted=!0,Z.emit("end"),Z.writable&&Z.allowHalfOpen===!1)n.nextTick(oe,Z);else if(V.autoDestroy){const De=Z._writableState;(!De||De.autoDestroy&&(De.finished||De.writable===!1))&&Z.destroy()}}}function oe(V){V.writable&&!V.writableEnded&&!V.destroyed&&V.end()}be.from=function(V,Z){return j(be,V,Z)};let ve;function ke(){return ve===void 0&&(ve={}),ve}return be.fromWeb=function(V,Z){return ke().newStreamReadableFromReadableStream(V,Z)},be.toWeb=function(V,Z){return ke().newReadableStreamFromStreamReadable(V,Z)},be.wrap=function(V,Z){var De,Ie;return new be({objectMode:(De=(Ie=V.readableObjectMode)!==null&&Ie!==void 0?Ie:V.objectMode)!==null&&De!==void 0?De:!0,...Z,destroy(Be,at){p.destroyer(V,Be),at(Be)}}).wrap(V)},ws}var vs,Lu;function bs(){if(Lu)return vs;Lu=1;const n=sr(),{ArrayPrototypeSlice:e,Error:t,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:a,ObjectDefineProperties:s,ObjectSetPrototypeOf:i,StringPrototypeToLowerCase:l,Symbol:o,SymbolHasInstance:u}=mt();vs=O,O.WritableState=M;const{EventEmitter:c}=Bi(),f=fs().Stream,{Buffer:d}=Dn(),g=Ir(),{addAbortSignal:m}=Ui(),{getHighWaterMark:v,getDefaultHighWaterMark:b}=$i(),{ERR_INVALID_ARG_TYPE:_,ERR_METHOD_NOT_IMPLEMENTED:N,ERR_MULTIPLE_CALLBACK:E,ERR_STREAM_CANNOT_PIPE:w,ERR_STREAM_DESTROYED:p,ERR_STREAM_ALREADY_FINISHED:S,ERR_STREAM_NULL_VALUES:F,ERR_STREAM_WRITE_AFTER_END:A,ERR_UNKNOWN_ENCODING:k}=Rt().codes,{errorOrDestroy:C}=g;i(O.prototype,f.prototype),i(O,f);function L(){}const P=o("kOnFinished");function M(J,ne,ye){typeof ye!="boolean"&&(ye=ne instanceof kn()),this.objectMode=!!(J&&J.objectMode),ye&&(this.objectMode=this.objectMode||!!(J&&J.writableObjectMode)),this.highWaterMark=J?v(this,J,"writableHighWaterMark",ye):b(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const _e=!!(J&&J.decodeStrings===!1);this.decodeStrings=!_e,this.defaultEncoding=J&&J.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=I.bind(void 0,ne),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,B(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!J||J.emitClose!==!1,this.autoDestroy=!J||J.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[P]=[]}function B(J){J.buffered=[],J.bufferedIndex=0,J.allBuffers=!0,J.allNoop=!0}M.prototype.getBuffer=function(){return e(this.buffered,this.bufferedIndex)},a(M.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function O(J){const ne=this instanceof kn();if(!ne&&!r(O,this))return new O(J);this._writableState=new M(J,this,ne),J&&(typeof J.write=="function"&&(this._write=J.write),typeof J.writev=="function"&&(this._writev=J.writev),typeof J.destroy=="function"&&(this._destroy=J.destroy),typeof J.final=="function"&&(this._final=J.final),typeof J.construct=="function"&&(this._construct=J.construct),J.signal&&m(J.signal,this)),f.call(this,J),g.construct(this,()=>{const ye=this._writableState;ye.writing||ge(this,ye),te(this,ye)})}a(O,u,{__proto__:null,value:function(J){return r(this,J)?!0:this!==O?!1:J&&J._writableState instanceof M}}),O.prototype.pipe=function(){C(this,new w)};function R(J,ne,ye,_e){const me=J._writableState;if(typeof ye=="function")_e=ye,ye=me.defaultEncoding;else{if(!ye)ye=me.defaultEncoding;else if(ye!=="buffer"&&!d.isEncoding(ye))throw new k(ye);typeof _e!="function"&&(_e=L)}if(ne===null)throw new F;if(!me.objectMode)if(typeof ne=="string")me.decodeStrings!==!1&&(ne=d.from(ne,ye),ye="buffer");else if(ne instanceof d)ye="buffer";else if(f._isUint8Array(ne))ne=f._uint8ArrayToBuffer(ne),ye="buffer";else throw new _("chunk",["string","Buffer","Uint8Array"],ne);let Ce;return me.ending?Ce=new A:me.destroyed&&(Ce=new p("write")),Ce?(n.nextTick(_e,Ce),C(J,Ce,!0),Ce):(me.pendingcb++,H(J,me,ne,ye,_e))}O.prototype.write=function(J,ne,ye){return R(this,J,ne,ye)===!0},O.prototype.cork=function(){this._writableState.corked++},O.prototype.uncork=function(){const J=this._writableState;J.corked&&(J.corked--,J.writing||ge(this,J))},O.prototype.setDefaultEncoding=function(ne){if(typeof ne=="string"&&(ne=l(ne)),!d.isEncoding(ne))throw new k(ne);return this._writableState.defaultEncoding=ne,this};function H(J,ne,ye,_e,me){const Ce=ne.objectMode?1:ye.length;ne.length+=Ce;const de=ne.length<ne.highWaterMark;return de||(ne.needDrain=!0),ne.writing||ne.corked||ne.errored||!ne.constructed?(ne.buffered.push({chunk:ye,encoding:_e,callback:me}),ne.allBuffers&&_e!=="buffer"&&(ne.allBuffers=!1),ne.allNoop&&me!==L&&(ne.allNoop=!1)):(ne.writelen=Ce,ne.writecb=me,ne.writing=!0,ne.sync=!0,J._write(ye,_e,ne.onwrite),ne.sync=!1),de&&!ne.errored&&!ne.destroyed}function j(J,ne,ye,_e,me,Ce,de){ne.writelen=_e,ne.writecb=de,ne.writing=!0,ne.sync=!0,ne.destroyed?ne.onwrite(new p("write")):ye?J._writev(me,ne.onwrite):J._write(me,Ce,ne.onwrite),ne.sync=!1}function K(J,ne,ye,_e){--ne.pendingcb,_e(ye),ie(ne),C(J,ye)}function I(J,ne){const ye=J._writableState,_e=ye.sync,me=ye.writecb;if(typeof me!="function"){C(J,new E);return}ye.writing=!1,ye.writecb=null,ye.length-=ye.writelen,ye.writelen=0,ne?(ne.stack,ye.errored||(ye.errored=ne),J._readableState&&!J._readableState.errored&&(J._readableState.errored=ne),_e?n.nextTick(K,J,ye,ne,me):K(J,ye,ne,me)):(ye.buffered.length>ye.bufferedIndex&&ge(J,ye),_e?ye.afterWriteTickInfo!==null&&ye.afterWriteTickInfo.cb===me?ye.afterWriteTickInfo.count++:(ye.afterWriteTickInfo={count:1,cb:me,stream:J,state:ye},n.nextTick(G,ye.afterWriteTickInfo)):se(J,ye,1,me))}function G({stream:J,state:ne,count:ye,cb:_e}){return ne.afterWriteTickInfo=null,se(J,ne,ye,_e)}function se(J,ne,ye,_e){for(!ne.ending&&!J.destroyed&&ne.length===0&&ne.needDrain&&(ne.needDrain=!1,J.emit("drain"));ye-- >0;)ne.pendingcb--,_e();ne.destroyed&&ie(ne),te(J,ne)}function ie(J){if(J.writing)return;for(let me=J.bufferedIndex;me<J.buffered.length;++me){var ne;const{chunk:Ce,callback:de}=J.buffered[me],Ae=J.objectMode?1:Ce.length;J.length-=Ae,de((ne=J.errored)!==null&&ne!==void 0?ne:new p("write"))}const ye=J[P].splice(0);for(let me=0;me<ye.length;me++){var _e;ye[me]((_e=J.errored)!==null&&_e!==void 0?_e:new p("end"))}B(J)}function ge(J,ne){if(ne.corked||ne.bufferProcessing||ne.destroyed||!ne.constructed)return;const{buffered:ye,bufferedIndex:_e,objectMode:me}=ne,Ce=ye.length-_e;if(!Ce)return;let de=_e;if(ne.bufferProcessing=!0,Ce>1&&J._writev){ne.pendingcb-=Ce-1;const Ae=ne.allNoop?L:be=>{for(let Ve=de;Ve<ye.length;++Ve)ye[Ve].callback(be)},Se=ne.allNoop&&de===0?ye:e(ye,de);Se.allBuffers=ne.allBuffers,j(J,ne,!0,ne.length,Se,"",Ae),B(ne)}else{do{const{chunk:Ae,encoding:Se,callback:be}=ye[de];ye[de++]=null;const Ve=me?1:Ae.length;j(J,ne,!1,Ve,Ae,Se,be)}while(de<ye.length&&!ne.writing);de===ye.length?B(ne):de>256?(ye.splice(0,de),ne.bufferedIndex=0):ne.bufferedIndex=de}ne.bufferProcessing=!1}O.prototype._write=function(J,ne,ye){if(this._writev)this._writev([{chunk:J,encoding:ne}],ye);else throw new N("_write()")},O.prototype._writev=null,O.prototype.end=function(J,ne,ye){const _e=this._writableState;typeof J=="function"?(ye=J,J=null,ne=null):typeof ne=="function"&&(ye=ne,ne=null);let me;if(J!=null){const Ce=R(this,J,ne);Ce instanceof t&&(me=Ce)}return _e.corked&&(_e.corked=1,this.uncork()),me||(!_e.errored&&!_e.ending?(_e.ending=!0,te(this,_e,!0),_e.ended=!0):_e.finished?me=new S("end"):_e.destroyed&&(me=new p("end"))),typeof ye=="function"&&(me||_e.finished?n.nextTick(ye,me):_e[P].push(ye)),this};function ee(J){return J.ending&&!J.destroyed&&J.constructed&&J.length===0&&!J.errored&&J.buffered.length===0&&!J.finished&&!J.writing&&!J.errorEmitted&&!J.closeEmitted}function ae(J,ne){let ye=!1;function _e(me){if(ye){C(J,me??E());return}if(ye=!0,ne.pendingcb--,me){const Ce=ne[P].splice(0);for(let de=0;de<Ce.length;de++)Ce[de](me);C(J,me,ne.sync)}else ee(ne)&&(ne.prefinished=!0,J.emit("prefinish"),ne.pendingcb++,n.nextTick(ce,J,ne))}ne.sync=!0,ne.pendingcb++;try{J._final(_e)}catch(me){_e(me)}ne.sync=!1}function le(J,ne){!ne.prefinished&&!ne.finalCalled&&(typeof J._final=="function"&&!ne.destroyed?(ne.finalCalled=!0,ae(J,ne)):(ne.prefinished=!0,J.emit("prefinish")))}function te(J,ne,ye){ee(ne)&&(le(J,ne),ne.pendingcb===0&&(ye?(ne.pendingcb++,n.nextTick((_e,me)=>{ee(me)?ce(_e,me):me.pendingcb--},J,ne)):ee(ne)&&(ne.pendingcb++,ce(J,ne))))}function ce(J,ne){ne.pendingcb--,ne.finished=!0;const ye=ne[P].splice(0);for(let _e=0;_e<ye.length;_e++)ye[_e]();if(J.emit("finish"),ne.autoDestroy){const _e=J._readableState;(!_e||_e.autoDestroy&&(_e.endEmitted||_e.readable===!1))&&J.destroy()}}s(O.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(J){this._writableState&&(this._writableState.destroyed=J)}},writable:{__proto__:null,get(){const J=this._writableState;return!!J&&J.writable!==!1&&!J.destroyed&&!J.errored&&!J.ending&&!J.ended},set(J){this._writableState&&(this._writableState.writable=!!J)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const J=this._writableState;return J?!J.destroyed&&!J.ending&&J.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const pe=g.destroy;O.prototype.destroy=function(J,ne){const ye=this._writableState;return!ye.destroyed&&(ye.bufferedIndex<ye.buffered.length||ye[P].length)&&n.nextTick(ie,ye),pe.call(this,J,ne),this},O.prototype._undestroy=g.undestroy,O.prototype._destroy=function(J,ne){ne(J)},O.prototype[c.captureRejectionSymbol]=function(J){this.destroy(J)};let Ne;function xe(){return Ne===void 0&&(Ne={}),Ne}return O.fromWeb=function(J,ne){return xe().newStreamWritableFromWritableStream(J,ne)},O.toWeb=function(J){return xe().newWritableStreamFromStreamWritable(J)},vs}var Es,Ou;function Np(){if(Ou)return Es;Ou=1;const n=sr(),e=Dn(),{isReadable:t,isWritable:r,isIterable:a,isNodeStream:s,isReadableNodeStream:i,isWritableNodeStream:l,isDuplexNodeStream:o,isReadableStream:u,isWritableStream:c}=Rn(),f=jn(),{AbortError:d,codes:{ERR_INVALID_ARG_TYPE:g,ERR_INVALID_RETURN_VALUE:m}}=Rt(),{destroyer:v}=Ir(),b=kn(),_=ji(),N=bs(),{createDeferredPromise:E}=Pt(),w=Ru(),p=globalThis.Blob||e.Blob,S=typeof p<"u"?function(M){return M instanceof p}:function(M){return!1},F=globalThis.AbortController||oi().AbortController,{FunctionPrototypeCall:A}=mt();class k extends b{constructor(M){super(M),M?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),M?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}Es=function P(M,B){if(o(M))return M;if(i(M))return L({readable:M});if(l(M))return L({writable:M});if(s(M))return L({writable:!1,readable:!1});if(u(M))return L({readable:_.fromWeb(M)});if(c(M))return L({writable:N.fromWeb(M)});if(typeof M=="function"){const{value:R,write:H,final:j,destroy:K}=C(M);if(a(R))return w(k,R,{objectMode:!0,write:H,final:j,destroy:K});const I=R?.then;if(typeof I=="function"){let G;const se=A(I,R,ie=>{if(ie!=null)throw new m("nully","body",ie)},ie=>{v(G,ie)});return G=new k({objectMode:!0,readable:!1,write:H,final(ie){j(async()=>{try{await se,n.nextTick(ie,null)}catch(ge){n.nextTick(ie,ge)}})},destroy:K})}throw new m("Iterable, AsyncIterable or AsyncFunction",B,R)}if(S(M))return P(M.arrayBuffer());if(a(M))return w(k,M,{objectMode:!0,writable:!1});if(u(M?.readable)&&c(M?.writable))return k.fromWeb(M);if(typeof M?.writable=="object"||typeof M?.readable=="object"){const R=M!=null&&M.readable?i(M?.readable)?M?.readable:P(M.readable):void 0,H=M!=null&&M.writable?l(M?.writable)?M?.writable:P(M.writable):void 0;return L({readable:R,writable:H})}const O=M?.then;if(typeof O=="function"){let R;return A(O,M,H=>{H!=null&&R.push(H),R.push(null)},H=>{v(R,H)}),R=new k({objectMode:!0,writable:!1,read(){}})}throw new g(B,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],M)};function C(P){let{promise:M,resolve:B}=E();const O=new F,R=O.signal;return{value:P((async function*(){for(;;){const j=M;M=null;const{chunk:K,done:I,cb:G}=await j;if(n.nextTick(G),I)return;if(R.aborted)throw new d(void 0,{cause:R.reason});({promise:M,resolve:B}=E()),yield K}})(),{signal:R}),write(j,K,I){const G=B;B=null,G({chunk:j,done:!1,cb:I})},final(j){const K=B;B=null,K({done:!0,cb:j})},destroy(j,K){O.abort(),K(j)}}}function L(P){const M=P.readable&&typeof P.readable.read!="function"?_.wrap(P.readable):P.readable,B=P.writable;let O=!!t(M),R=!!r(B),H,j,K,I,G;function se(ie){const ge=I;I=null,ge?ge(ie):ie&&G.destroy(ie)}return G=new k({readableObjectMode:!!(M!=null&&M.readableObjectMode),writableObjectMode:!!(B!=null&&B.writableObjectMode),readable:O,writable:R}),R&&(f(B,ie=>{R=!1,ie&&v(M,ie),se(ie)}),G._write=function(ie,ge,ee){B.write(ie,ge)?ee():H=ee},G._final=function(ie){B.end(),j=ie},B.on("drain",function(){if(H){const ie=H;H=null,ie()}}),B.on("finish",function(){if(j){const ie=j;j=null,ie()}})),O&&(f(M,ie=>{O=!1,ie&&v(M,ie),se(ie)}),M.on("readable",function(){if(K){const ie=K;K=null,ie()}}),M.on("end",function(){G.push(null)}),G._read=function(){for(;;){const ie=M.read();if(ie===null){K=G._read;return}if(!G.push(ie))return}}),G._destroy=function(ie,ge){!ie&&I!==null&&(ie=new d),K=null,H=null,j=null,I===null?ge(ie):(I=ge,v(B,ie),v(M,ie))},G}return Es}var xs,Fu;function kn(){if(Fu)return xs;Fu=1;const{ObjectDefineProperties:n,ObjectGetOwnPropertyDescriptor:e,ObjectKeys:t,ObjectSetPrototypeOf:r}=mt();xs=i;const a=ji(),s=bs();r(i.prototype,a.prototype),r(i,a);{const c=t(s.prototype);for(let f=0;f<c.length;f++){const d=c[f];i.prototype[d]||(i.prototype[d]=s.prototype[d])}}function i(c){if(!(this instanceof i))return new i(c);a.call(this,c),s.call(this,c),c?(this.allowHalfOpen=c.allowHalfOpen!==!1,c.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),c.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}n(i.prototype,{writable:{__proto__:null,...e(s.prototype,"writable")},writableHighWaterMark:{__proto__:null,...e(s.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...e(s.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...e(s.prototype,"writableBuffer")},writableLength:{__proto__:null,...e(s.prototype,"writableLength")},writableFinished:{__proto__:null,...e(s.prototype,"writableFinished")},writableCorked:{__proto__:null,...e(s.prototype,"writableCorked")},writableEnded:{__proto__:null,...e(s.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...e(s.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(c){this._readableState&&this._writableState&&(this._readableState.destroyed=c,this._writableState.destroyed=c)}}});let l;function o(){return l===void 0&&(l={}),l}i.fromWeb=function(c,f){return o().newStreamDuplexFromReadableWritablePair(c,f)},i.toWeb=function(c){return o().newReadableWritablePairFromDuplex(c)};let u;return i.from=function(c){return u||(u=Np()),u(c,"body")},xs}var _s,Bu;function Pu(){if(Bu)return _s;Bu=1;const{ObjectSetPrototypeOf:n,Symbol:e}=mt();_s=i;const{ERR_METHOD_NOT_IMPLEMENTED:t}=Rt().codes,r=kn(),{getHighWaterMark:a}=$i();n(i.prototype,r.prototype),n(i,r);const s=e("kCallback");function i(u){if(!(this instanceof i))return new i(u);const c=u?a(this,u,"readableHighWaterMark",!0):null;c===0&&(u={...u,highWaterMark:null,readableHighWaterMark:c,writableHighWaterMark:u.writableHighWaterMark||0}),r.call(this,u),this._readableState.sync=!1,this[s]=null,u&&(typeof u.transform=="function"&&(this._transform=u.transform),typeof u.flush=="function"&&(this._flush=u.flush)),this.on("prefinish",o)}function l(u){typeof this._flush=="function"&&!this.destroyed?this._flush((c,f)=>{if(c){u?u(c):this.destroy(c);return}f!=null&&this.push(f),this.push(null),u&&u()}):(this.push(null),u&&u())}function o(){this._final!==l&&l.call(this)}return i.prototype._final=l,i.prototype._transform=function(u,c,f){throw new t("_transform()")},i.prototype._write=function(u,c,f){const d=this._readableState,g=this._writableState,m=d.length;this._transform(u,c,(v,b)=>{if(v){f(v);return}b!=null&&this.push(b),g.ended||m===d.length||d.length<d.highWaterMark?f():this[s]=f})},i.prototype._read=function(){if(this[s]){const u=this[s];this[s]=null,u()}},_s}var Cs,Mu;function Uu(){if(Mu)return Cs;Mu=1;const{ObjectSetPrototypeOf:n}=mt();Cs=t;const e=Pu();n(t.prototype,e.prototype),n(t,e);function t(r){if(!(this instanceof t))return new t(r);e.call(this,r)}return t.prototype._transform=function(r,a,s){s(null,r)},Cs}var As,$u;function Ns(){if($u)return As;$u=1;const n=sr(),{ArrayIsArray:e,Promise:t,SymbolAsyncIterator:r,SymbolDispose:a}=mt(),s=jn(),{once:i}=Pt(),l=Ir(),o=kn(),{aggregateTwoErrors:u,codes:{ERR_INVALID_ARG_TYPE:c,ERR_INVALID_RETURN_VALUE:f,ERR_MISSING_ARGS:d,ERR_STREAM_DESTROYED:g,ERR_STREAM_PREMATURE_CLOSE:m},AbortError:v}=Rt(),{validateFunction:b,validateAbortSignal:_}=ui(),{isIterable:N,isReadable:E,isReadableNodeStream:w,isNodeStream:p,isTransformStream:S,isWebStream:F,isReadableStream:A,isReadableFinished:k}=Rn(),C=globalThis.AbortController||oi().AbortController;let L,P,M;function B(ie,ge,ee){let ae=!1;ie.on("close",()=>{ae=!0});const le=s(ie,{readable:ge,writable:ee},te=>{ae=!te});return{destroy:te=>{ae||(ae=!0,l.destroyer(ie,te||new g("pipe")))},cleanup:le}}function O(ie){return b(ie[ie.length-1],"streams[stream.length - 1]"),ie.pop()}function R(ie){if(N(ie))return ie;if(w(ie))return H(ie);throw new c("val",["Readable","Iterable","AsyncIterable"],ie)}async function*H(ie){P||(P=ji()),yield*P.prototype[r].call(ie)}async function j(ie,ge,ee,{end:ae}){let le,te=null;const ce=xe=>{if(xe&&(le=xe),te){const J=te;te=null,J()}},pe=()=>new t((xe,J)=>{le?J(le):te=()=>{le?J(le):xe()}});ge.on("drain",ce);const Ne=s(ge,{readable:!1},ce);try{ge.writableNeedDrain&&await pe();for await(const xe of ie)ge.write(xe)||await pe();ae&&(ge.end(),await pe()),ee()}catch(xe){ee(le!==xe?u(le,xe):xe)}finally{Ne(),ge.off("drain",ce)}}async function K(ie,ge,ee,{end:ae}){S(ge)&&(ge=ge.writable);const le=ge.getWriter();try{for await(const te of ie)await le.ready,le.write(te).catch(()=>{});await le.ready,ae&&await le.close(),ee()}catch(te){try{await le.abort(te),ee(te)}catch(ce){ee(ce)}}}function I(...ie){return G(ie,i(O(ie)))}function G(ie,ge,ee){if(ie.length===1&&e(ie[0])&&(ie=ie[0]),ie.length<2)throw new d("streams");const ae=new C,le=ae.signal,te=ee?.signal,ce=[];_(te,"options.signal");function pe(){me(new v)}M=M||Pt().addAbortListener;let Ne;te&&(Ne=M(te,pe));let xe,J;const ne=[];let ye=0;function _e(Se){me(Se,--ye===0)}function me(Se,be){var Ve;if(Se&&(!xe||xe.code==="ERR_STREAM_PREMATURE_CLOSE")&&(xe=Se),!(!xe&&!be)){for(;ne.length;)ne.shift()(xe);(Ve=Ne)===null||Ve===void 0||Ve[a](),ae.abort(),be&&(xe||ce.forEach(ht=>ht()),n.nextTick(ge,xe,J))}}let Ce;for(let Se=0;Se<ie.length;Se++){const be=ie[Se],Ve=Se<ie.length-1,ht=Se>0,Ge=Ve||ee?.end!==!1,Et=Se===ie.length-1;if(p(be)){let q=function(x){x&&x.name!=="AbortError"&&x.code!=="ERR_STREAM_PREMATURE_CLOSE"&&_e(x)};if(Ge){const{destroy:x,cleanup:T}=B(be,Ve,ht);ne.push(x),E(be)&&Et&&ce.push(T)}be.on("error",q),E(be)&&Et&&ce.push(()=>{be.removeListener("error",q)})}if(Se===0)if(typeof be=="function"){if(Ce=be({signal:le}),!N(Ce))throw new f("Iterable, AsyncIterable or Stream","source",Ce)}else N(be)||w(be)||S(be)?Ce=be:Ce=o.from(be);else if(typeof be=="function"){if(S(Ce)){var de;Ce=R((de=Ce)===null||de===void 0?void 0:de.readable)}else Ce=R(Ce);if(Ce=be(Ce,{signal:le}),Ve){if(!N(Ce,!0))throw new f("AsyncIterable",`transform[${Se-1}]`,Ce)}else{var Ae;L||(L=Uu());const q=new L({objectMode:!0}),x=(Ae=Ce)===null||Ae===void 0?void 0:Ae.then;if(typeof x=="function")ye++,x.call(Ce,he=>{J=he,he!=null&&q.write(he),Ge&&q.end(),n.nextTick(_e)},he=>{q.destroy(he),n.nextTick(_e,he)});else if(N(Ce,!0))ye++,j(Ce,q,_e,{end:Ge});else if(A(Ce)||S(Ce)){const he=Ce.readable||Ce;ye++,j(he,q,_e,{end:Ge})}else throw new f("AsyncIterable or Promise","destination",Ce);Ce=q;const{destroy:T,cleanup:Q}=B(Ce,!1,!0);ne.push(T),Et&&ce.push(Q)}}else if(p(be)){if(w(Ce)){ye+=2;const q=se(Ce,be,_e,{end:Ge});E(be)&&Et&&ce.push(q)}else if(S(Ce)||A(Ce)){const q=Ce.readable||Ce;ye++,j(q,be,_e,{end:Ge})}else if(N(Ce))ye++,j(Ce,be,_e,{end:Ge});else throw new c("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],Ce);Ce=be}else if(F(be)){if(w(Ce))ye++,K(R(Ce),be,_e,{end:Ge});else if(A(Ce)||N(Ce))ye++,K(Ce,be,_e,{end:Ge});else if(S(Ce))ye++,K(Ce.readable,be,_e,{end:Ge});else throw new c("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],Ce);Ce=be}else Ce=o.from(be)}return(le!=null&&le.aborted||te!=null&&te.aborted)&&n.nextTick(pe),Ce}function se(ie,ge,ee,{end:ae}){let le=!1;if(ge.on("close",()=>{le||ee(new m)}),ie.pipe(ge,{end:!1}),ae){let te=function(){le=!0,ge.end()};k(ie)?n.nextTick(te):ie.once("end",te)}else ee();return s(ie,{readable:!0,writable:!1},te=>{const ce=ie._readableState;te&&te.code==="ERR_STREAM_PREMATURE_CLOSE"&&ce&&ce.ended&&!ce.errored&&!ce.errorEmitted?ie.once("end",ee).once("error",ee):ee(te)}),s(ge,{readable:!1,writable:!0},ee)}return As={pipelineImpl:G,pipeline:I},As}var Ts,qu;function ju(){if(qu)return Ts;qu=1;const{pipeline:n}=Ns(),e=kn(),{destroyer:t}=Ir(),{isNodeStream:r,isReadable:a,isWritable:s,isWebStream:i,isTransformStream:l,isWritableStream:o,isReadableStream:u}=Rn(),{AbortError:c,codes:{ERR_INVALID_ARG_VALUE:f,ERR_MISSING_ARGS:d}}=Rt(),g=jn();return Ts=function(...v){if(v.length===0)throw new d("streams");if(v.length===1)return e.from(v[0]);const b=[...v];if(typeof v[0]=="function"&&(v[0]=e.from(v[0])),typeof v[v.length-1]=="function"){const L=v.length-1;v[L]=e.from(v[L])}for(let L=0;L<v.length;++L)if(!(!r(v[L])&&!i(v[L]))){if(L<v.length-1&&!(a(v[L])||u(v[L])||l(v[L])))throw new f(`streams[${L}]`,b[L],"must be readable");if(L>0&&!(s(v[L])||o(v[L])||l(v[L])))throw new f(`streams[${L}]`,b[L],"must be writable")}let _,N,E,w,p;function S(L){const P=w;w=null,P?P(L):L?p.destroy(L):!C&&!k&&p.destroy()}const F=v[0],A=n(v,S),k=!!(s(F)||o(F)||l(F)),C=!!(a(A)||u(A)||l(A));if(p=new e({writableObjectMode:!!(F!=null&&F.writableObjectMode),readableObjectMode:!!(A!=null&&A.readableObjectMode),writable:k,readable:C}),k){if(r(F))p._write=function(P,M,B){F.write(P,M)?B():_=B},p._final=function(P){F.end(),N=P},F.on("drain",function(){if(_){const P=_;_=null,P()}});else if(i(F)){const M=(l(F)?F.writable:F).getWriter();p._write=async function(B,O,R){try{await M.ready,M.write(B).catch(()=>{}),R()}catch(H){R(H)}},p._final=async function(B){try{await M.ready,M.close().catch(()=>{}),N=B}catch(O){B(O)}}}const L=l(A)?A.readable:A;g(L,()=>{if(N){const P=N;N=null,P()}})}if(C){if(r(A))A.on("readable",function(){if(E){const L=E;E=null,L()}}),A.on("end",function(){p.push(null)}),p._read=function(){for(;;){const L=A.read();if(L===null){E=p._read;return}if(!p.push(L))return}};else if(i(A)){const P=(l(A)?A.readable:A).getReader();p._read=async function(){for(;;)try{const{value:M,done:B}=await P.read();if(!p.push(M))return;if(B){p.push(null);return}}catch{return}}}}return p._destroy=function(L,P){!L&&w!==null&&(L=new c),E=null,_=null,N=null,w===null?P(L):(w=P,r(A)&&t(A,L))},p},Ts}var Hu;function Tp(){if(Hu)return Pi;Hu=1;const n=globalThis.AbortController||oi().AbortController,{codes:{ERR_INVALID_ARG_VALUE:e,ERR_INVALID_ARG_TYPE:t,ERR_MISSING_ARGS:r,ERR_OUT_OF_RANGE:a},AbortError:s}=Rt(),{validateAbortSignal:i,validateInteger:l,validateObject:o}=ui(),u=mt().Symbol("kWeak"),c=mt().Symbol("kResistStopPropagation"),{finished:f}=jn(),d=ju(),{addAbortSignalNoValidate:g}=Ui(),{isWritable:m,isNodeStream:v}=Rn(),{deprecate:b}=Pt(),{ArrayPrototypePush:_,Boolean:N,MathFloor:E,Number:w,NumberIsNaN:p,Promise:S,PromiseReject:F,PromiseResolve:A,PromisePrototypeThen:k,Symbol:C}=mt(),L=C("kEmpty"),P=C("kEof");function M(te,ce){if(ce!=null&&o(ce,"options"),ce?.signal!=null&&i(ce.signal,"options.signal"),v(te)&&!m(te))throw new e("stream",te,"must be writable");const pe=d(this,te);return ce!=null&&ce.signal&&g(ce.signal,pe),pe}function B(te,ce){if(typeof te!="function")throw new t("fn",["Function","AsyncFunction"],te);ce!=null&&o(ce,"options"),ce?.signal!=null&&i(ce.signal,"options.signal");let pe=1;ce?.concurrency!=null&&(pe=E(ce.concurrency));let Ne=pe-1;return ce?.highWaterMark!=null&&(Ne=E(ce.highWaterMark)),l(pe,"options.concurrency",1),l(Ne,"options.highWaterMark",0),Ne+=pe,(async function*(){const J=Pt().AbortSignalAny([ce?.signal].filter(N)),ne=this,ye=[],_e={signal:J};let me,Ce,de=!1,Ae=0;function Se(){de=!0,be()}function be(){Ae-=1,Ve()}function Ve(){Ce&&!de&&Ae<pe&&ye.length<Ne&&(Ce(),Ce=null)}async function ht(){try{for await(let Ge of ne){if(de)return;if(J.aborted)throw new s;try{if(Ge=te(Ge,_e),Ge===L)continue;Ge=A(Ge)}catch(Et){Ge=F(Et)}Ae+=1,k(Ge,be,Se),ye.push(Ge),me&&(me(),me=null),!de&&(ye.length>=Ne||Ae>=pe)&&await new S(Et=>{Ce=Et})}ye.push(P)}catch(Ge){const Et=F(Ge);k(Et,be,Se),ye.push(Et)}finally{de=!0,me&&(me(),me=null)}}ht();try{for(;;){for(;ye.length>0;){const Ge=await ye[0];if(Ge===P)return;if(J.aborted)throw new s;Ge!==L&&(yield Ge),ye.shift(),Ve()}await new S(Ge=>{me=Ge})}}finally{de=!0,Ce&&(Ce(),Ce=null)}}).call(this)}function O(te=void 0){return te!=null&&o(te,"options"),te?.signal!=null&&i(te.signal,"options.signal"),(async function*(){let pe=0;for await(const xe of this){var Ne;if(te!=null&&(Ne=te.signal)!==null&&Ne!==void 0&&Ne.aborted)throw new s({cause:te.signal.reason});yield[pe++,xe]}}).call(this)}async function R(te,ce=void 0){for await(const pe of I.call(this,te,ce))return!0;return!1}async function H(te,ce=void 0){if(typeof te!="function")throw new t("fn",["Function","AsyncFunction"],te);return!await R.call(this,async(...pe)=>!await te(...pe),ce)}async function j(te,ce){for await(const pe of I.call(this,te,ce))return pe}async function K(te,ce){if(typeof te!="function")throw new t("fn",["Function","AsyncFunction"],te);async function pe(Ne,xe){return await te(Ne,xe),L}for await(const Ne of B.call(this,pe,ce));}function I(te,ce){if(typeof te!="function")throw new t("fn",["Function","AsyncFunction"],te);async function pe(Ne,xe){return await te(Ne,xe)?Ne:L}return B.call(this,pe,ce)}class G extends r{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function se(te,ce,pe){var Ne;if(typeof te!="function")throw new t("reducer",["Function","AsyncFunction"],te);pe!=null&&o(pe,"options"),pe?.signal!=null&&i(pe.signal,"options.signal");let xe=arguments.length>1;if(pe!=null&&(Ne=pe.signal)!==null&&Ne!==void 0&&Ne.aborted){const me=new s(void 0,{cause:pe.signal.reason});throw this.once("error",()=>{}),await f(this.destroy(me)),me}const J=new n,ne=J.signal;if(pe!=null&&pe.signal){const me={once:!0,[u]:this,[c]:!0};pe.signal.addEventListener("abort",()=>J.abort(),me)}let ye=!1;try{for await(const me of this){var _e;if(ye=!0,pe!=null&&(_e=pe.signal)!==null&&_e!==void 0&&_e.aborted)throw new s;xe?ce=await te(ce,me,{signal:ne}):(ce=me,xe=!0)}if(!ye&&!xe)throw new G}finally{J.abort()}return ce}async function ie(te){te!=null&&o(te,"options"),te?.signal!=null&&i(te.signal,"options.signal");const ce=[];for await(const Ne of this){var pe;if(te!=null&&(pe=te.signal)!==null&&pe!==void 0&&pe.aborted)throw new s(void 0,{cause:te.signal.reason});_(ce,Ne)}return ce}function ge(te,ce){const pe=B.call(this,te,ce);return(async function*(){for await(const xe of pe)yield*xe}).call(this)}function ee(te){if(te=w(te),p(te))return 0;if(te<0)throw new a("number",">= 0",te);return te}function ae(te,ce=void 0){return ce!=null&&o(ce,"options"),ce?.signal!=null&&i(ce.signal,"options.signal"),te=ee(te),(async function*(){var Ne;if(ce!=null&&(Ne=ce.signal)!==null&&Ne!==void 0&&Ne.aborted)throw new s;for await(const J of this){var xe;if(ce!=null&&(xe=ce.signal)!==null&&xe!==void 0&&xe.aborted)throw new s;te--<=0&&(yield J)}}).call(this)}function le(te,ce=void 0){return ce!=null&&o(ce,"options"),ce?.signal!=null&&i(ce.signal,"options.signal"),te=ee(te),(async function*(){var Ne;if(ce!=null&&(Ne=ce.signal)!==null&&Ne!==void 0&&Ne.aborted)throw new s;for await(const J of this){var xe;if(ce!=null&&(xe=ce.signal)!==null&&xe!==void 0&&xe.aborted)throw new s;if(te-- >0&&(yield J),te<=0)return}}).call(this)}return Pi.streamReturningOperators={asIndexedPairs:b(O,"readable.asIndexedPairs will be removed in a future version."),drop:ae,filter:I,flatMap:ge,map:B,take:le,compose:M},Pi.promiseReturningOperators={every:H,forEach:K,reduce:se,toArray:ie,some:R,find:j},Pi}var Ss,Wu;function Vu(){if(Wu)return Ss;Wu=1;const{ArrayPrototypePop:n,Promise:e}=mt(),{isIterable:t,isNodeStream:r,isWebStream:a}=Rn(),{pipelineImpl:s}=Ns(),{finished:i}=jn();Gu();function l(...o){return new e((u,c)=>{let f,d;const g=o[o.length-1];if(g&&typeof g=="object"&&!r(g)&&!t(g)&&!a(g)){const m=n(o);f=m.signal,d=m.end}s(o,(m,v)=>{m?c(m):u(v)},{signal:f,end:d})})}return Ss={finished:i,pipeline:l},Ss}var zu;function Gu(){if(zu)return ns.exports;zu=1;const{Buffer:n}=Dn(),{ObjectDefineProperty:e,ObjectKeys:t,ReflectApply:r}=mt(),{promisify:{custom:a}}=Pt(),{streamReturningOperators:s,promiseReturningOperators:i}=Tp(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:l}}=Rt(),o=ju(),{setDefaultHighWaterMark:u,getDefaultHighWaterMark:c}=$i(),{pipeline:f}=Ns(),{destroyer:d}=Ir(),g=jn(),m=Vu(),v=Rn(),b=ns.exports=fs().Stream;b.isDestroyed=v.isDestroyed,b.isDisturbed=v.isDisturbed,b.isErrored=v.isErrored,b.isReadable=v.isReadable,b.isWritable=v.isWritable,b.Readable=ji();for(const N of t(s)){let w=function(...p){if(new.target)throw l();return b.Readable.from(r(E,this,p))};const E=s[N];e(w,"name",{__proto__:null,value:E.name}),e(w,"length",{__proto__:null,value:E.length}),e(b.Readable.prototype,N,{__proto__:null,value:w,enumerable:!1,configurable:!0,writable:!0})}for(const N of t(i)){let w=function(...p){if(new.target)throw l();return r(E,this,p)};const E=i[N];e(w,"name",{__proto__:null,value:E.name}),e(w,"length",{__proto__:null,value:E.length}),e(b.Readable.prototype,N,{__proto__:null,value:w,enumerable:!1,configurable:!0,writable:!0})}b.Writable=bs(),b.Duplex=kn(),b.Transform=Pu(),b.PassThrough=Uu(),b.pipeline=f;const{addAbortSignal:_}=Ui();return b.addAbortSignal=_,b.finished=g,b.destroy=d,b.compose=o,b.setDefaultHighWaterMark=u,b.getDefaultHighWaterMark=c,e(b,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return m}}),e(f,a,{__proto__:null,enumerable:!0,get(){return m.pipeline}}),e(g,a,{__proto__:null,enumerable:!0,get(){return m.finished}}),b.Stream=b,b._isUint8Array=function(E){return E instanceof Uint8Array},b._uint8ArrayToBuffer=function(E){return n.from(E.buffer,E.byteOffset,E.byteLength)},ns.exports}var Ju;function Sp(){return Ju||(Ju=1,(function(n){const e=Gu(),t=Vu(),r=e.Readable.destroy;n.exports=e.Readable,n.exports._uint8ArrayToBuffer=e._uint8ArrayToBuffer,n.exports._isUint8Array=e._isUint8Array,n.exports.isDisturbed=e.isDisturbed,n.exports.isErrored=e.isErrored,n.exports.isReadable=e.isReadable,n.exports.Readable=e.Readable,n.exports.Writable=e.Writable,n.exports.Duplex=e.Duplex,n.exports.Transform=e.Transform,n.exports.PassThrough=e.PassThrough,n.exports.addAbortSignal=e.addAbortSignal,n.exports.finished=e.finished,n.exports.destroy=e.destroy,n.exports.destroy=r,n.exports.pipeline=e.pipeline,n.exports.compose=e.compose,Object.defineProperty(e,"promises",{configurable:!0,enumerable:!0,get(){return t}}),n.exports.Stream=e.Stream,n.exports.default=n.exports})(ts)),ts.exports}if(Sp(),typeof Hn>"u")var Hn={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12};class qe{constructor(e,t){this.options=t||{},this.kb=e,this.target=t.target||{graph:{subjects:{},prefixes:{},terms:{}}},this.blankNodes=[],this.htmlOptions={selfClosing:"br img input area base basefont col colgroup source wbr isindex link meta param hr"},this.theOne="_:"+new Date().getTime(),this.language=null,this.vocabulary=null,this.blankCounter=0,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}],this.inXHTMLMode=!1,this.absURIRE=/[\w\_\-]+:\S+/,this.finishedHandlers=[],this.init()}addTriple(e,t,r,a){var s,i,l,o;typeof t>"u"?s=Zt.namedNode(this.options.base):s=this.toRDFNodeObject(t),l=this.toRDFNodeObject(r),i=this.toRDFNodeObject(a),o=Zt.namedNode(this.options.base),this.kb.add(s,l,i,o)}ancestorPath(e){for(var t="";e&&e.nodeType!==Hn.DOCUMENT_NODE;)t="/"+e.localName+t,e=e.parentNode;return t}copyMappings(e){var t={};for(var r in e)t[r]=e[r];return t}copyProperties(){}deriveDateTimeType(e){for(var t=0;t<qe.dateTimeTypes.length;t++){var r=qe.dateTimeTypes[t].pattern.exec(e);if(r&&r[0].length===e.length)return qe.dateTimeTypes[t].type}return null}init(){}newBlankNode(){return this.blankCounter++,"_:"+this.blankCounter}newSubjectOrigin(e,t){}parseCURIE(e,t,r){var a=e.indexOf(":"),s;if(a>=0){var i=e.substring(0,a);if(i==="")return s=t[""],s?s+e.substring(a+1):null;if(i==="_")return"_:"+e.substring(a+1);if(qe.NCNAME.test(i)&&(s=t[i],s))return s+e.substring(a+1)}return null}parseCURIEOrURI(e,t,r){var a=this.parseCURIE(e,t,r);return a||this.resolveAndNormalize(r,e)}parsePredicate(e,t,r,a,s,i){if(e==="")return null;var l=this.parseTermOrCURIEOrAbsURI(e,t,i?null:r,a,s);return l&&l.indexOf("_:")===0?null:l}parsePrefixMappings(e,t){for(var r=this.tokenize(e),a=null,s=0;s<r.length;s++)r[s][r[s].length-1]===":"?a=r[s].substring(0,r[s].length-1):a&&(t[a]=this.options.base?Ft(r[s],this.options.base):r[s],a=null)}static parseRDFaDOM(e,t,r){var a=new qe(t,{base:r});e.baseURI||(e.baseURI=r),a.process(e,{baseURI:r})}parseSafeCURIEOrCURIEOrURI(e,t,r){return e=this.trim(e),e.charAt(0)==="["&&e.charAt(e.length-1)==="]"?(e=e.substring(1,e.length-1),e=e.trim(e),e.length===0?null:e==="_:"?this.theOne:this.parseCURIE(e,t,r)):this.parseCURIEOrURI(e,t,r)}parseTermOrCURIEOrAbsURI(e,t,r,a,s){e=this.trim(e);var i=this.parseCURIE(e,a,s);if(i)return i;if(r){if(t&&!this.absURIRE.exec(e))return t+e;var l=r[e];if(l)return l;var o=e.toLowerCase();if(l=r[o],l)return l}return this.absURIRE.exec(e)?this.resolveAndNormalize(s,e):null}parseTermOrCURIEOrURI(e,t,r,a,s){e=this.trim(e);var i=this.parseCURIE(e,a,s);if(i)return i;var l=r[e];if(l)return l;var o=e.toLowerCase();return l=r[o],l||(t&&!this.absURIRE.exec(e)?t+e:this.resolveAndNormalize(s,e))}parseURI(e){return e}process(e,t){t=t||{};var r;e.nodeType===Hn.DOCUMENT_NODE?(e.baseURI&&!t.baseURI&&(t.baseURI=e.baseURI),r=e.baseURI,e=e.documentElement,e.baseURI||(e.baseURI=r),this.setContext(e)):e.parentNode.nodeType===Hn.DOCUMENT_NODE&&this.setContext(e);var a=[],s=function(me){if(!me&&t&&t.baseURI)return t.baseURI;var Ce=me.indexOf("#");return Ce>=0&&(me=me.substring(0,Ce)),t&&t.baseURIMap&&(me=t.baseURIMap(me)),me};for(a.push({current:e,context:this.push(null,s(e.baseURI))});a.length>0;){var i=a.shift();if(i.parent){if(i.context.parent&&i.context.parent.listMapping===i.listMapping)continue;for(let me in i.listMapping){var l=i.listMapping[me];if(l.length===0){this.addTriple(i.parent,i.subject,me,{type:qe.objectURI,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"});continue}var o=[];for(let Ce=0;Ce<l.length;Ce++)o.push(this.newBlankNode());for(let Ce=0;Ce<o.length;Ce++)this.addTriple(i.parent,o[Ce],"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",l[Ce]),this.addTriple(i.parent,o[Ce],"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",{type:qe.objectURI,value:Ce+1<o.length?o[Ce+1]:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"});this.addTriple(i.parent,i.subject,me,{type:qe.objectURI,value:o[0]})}continue}var u=i.current,c=i.context,f=!1,d=null,g=null,m=null,v=c.prefixes,b=!1,_=[],N=c.listMapping,E=!c.parent,w=c.language,p=c.vocabulary;r=this.parseURI(s(u.baseURI)),u.item=null;var S=u.getAttributeNode("vocab");if(S){let me=this.trim(S.value);if(me.length>0){p=me;var F=r.spec;this.addTriple(u,F,"http://www.w3.org/ns/rdfa#usesVocabulary",{type:qe.objectURI,value:p})}else p=this.vocabulary}for(var A=0;A<u.attributes.length;A++){var k=u.attributes[A];if(k.nodeName.charAt(0)==="x"&&k.nodeName.indexOf("xmlns:")===0){b||(v=this.copyMappings(v),b=!0);var C=k.nodeName.substring(6),L=qe.trim(k.value);v[C]=this.options.base?Ft(L,this.options.base):L}}var P=u.getAttributeNode("prefix");P&&(b||(v=this.copyMappings(v),b=!0),this.parsePrefixMappings(P.value,v));var M=null;for(let me=0;!M&&me<this.langAttributes.length;me++)M=u.getAttributeNodeNS(this.langAttributes[me].namespaceURI,this.langAttributes[me].localName);if(M){let me=qe.trim(M.value);me.length>0?w=me:w=null}var B=u.getAttributeNode("rel"),O=u.getAttributeNode("rev"),R=u.getAttributeNode("typeof"),H=u.getAttributeNode("property"),j=u.getAttributeNode("datatype"),K=this.inHTMLMode?u.getAttributeNode("datetime"):null,I=u.getAttributeNode("content"),G=u.getAttributeNode("about"),se=u.getAttributeNode("src"),ie=u.getAttributeNode("resource"),ge=u.getAttributeNode("href"),ee=u.getAttributeNode("inlist"),ae=[],le,te;if(B){te=this.tokenize(B.value);for(let me=0;me<te.length;me++)le=this.parsePredicate(te[me],p,c.terms,v,r,this.inHTMLMode&&H!==null),le&&ae.push(le)}var ce=[];if(O){te=this.tokenize(O.value);for(let me=0;me<te.length;me++)le=this.parsePredicate(te[me],p,c.terms,v,r,this.inHTMLMode&&H),le&&ce.push(le)}if(this.inHTMLMode&&(B||O)&&H&&(ae.length===0&&(B=null),ce.length===0&&(O=null)),B||O?(G&&(d=this.parseSafeCURIEOrCURIEOrURI(G.value,v,r)),R&&(m=d),d||(u.parentNode.nodeType===Hn.DOCUMENT_NODE?d=s(u.baseURI):c.parentObject&&(d=s(u.parentNode.baseURI)===c.parentObject?s(u.baseURI):c.parentObject)),ie&&(g=this.parseSafeCURIEOrCURIEOrURI(ie.value,v,r)),g||(ge?g=this.resolveAndNormalize(r,encodeURI(ge.value)):se?g=this.resolveAndNormalize(r,encodeURI(se.value)):R&&!G&&!(this.inXHTMLMode&&(u.localName==="head"||u.localName==="body"))&&(g=this.newBlankNode())),R&&!G&&this.inXHTMLMode&&(u.localName==="head"||u.localName==="body")?m=d:R&&!G&&(m=g)):H&&!I&&!j?(G&&(d=this.parseSafeCURIEOrCURIEOrURI(G.value,v,r),R&&(m=d)),!d&&u.parentNode.nodeType===Hn.DOCUMENT_NODE?(d=s(u.baseURI),R&&(m=d)):!d&&c.parentObject&&(d=s(u.parentNode.baseURI)===c.parentObject?s(u.baseURI):c.parentObject),R&&!m&&(ie&&(m=this.parseSafeCURIEOrCURIEOrURI(ie.value,v,r)),!m&&ge&&(m=this.resolveAndNormalize(r,encodeURI(ge.value))),!m&&se&&(m=this.resolveAndNormalize(r,encodeURI(se.value))),!m&&(this.inXHTMLMode||this.inHTMLMode)&&(u.localName==="head"||u.localName==="body")&&(m=d),m||(m=this.newBlankNode()),g=m)):(G&&(d=this.parseSafeCURIEOrCURIEOrURI(G.value,v,r)),!d&&ie&&(d=this.parseSafeCURIEOrCURIEOrURI(ie.value,v,r)),!d&&ge&&(d=this.resolveAndNormalize(r,encodeURI(ge.value))),!d&&se&&(d=this.resolveAndNormalize(r,encodeURI(se.value))),d||(u.parentNode.nodeType===Hn.DOCUMENT_NODE?d=s(u.baseURI):(this.inXHTMLMode||this.inHTMLMode)&&(u.localName==="head"||u.localName==="body")?d=s(u.parentNode.baseURI)===c.parentObject?s(u.baseURI):c.parentObject:R?d=this.newBlankNode():c.parentObject&&(d=s(u.parentNode.baseURI)===c.parentObject?s(u.baseURI):c.parentObject,H||(f=!0))),R&&(m=d)),d&&(G||ie||m)){var pe=d;R&&!G&&!ie&&g&&(pe=g),this.newSubjectOrigin(u,pe)}if(m){te=this.tokenize(R.value);for(let me=0;me<te.length;me++){var Ne=this.parseTermOrCURIEOrAbsURI(te[me],p,c.terms,v,r);Ne&&this.addTriple(u,m,qe.typeURI,{type:qe.objectURI,value:Ne})}}if(d&&d!==c.parentObject&&(N={},E=!0),g){if(B&&ee)for(let me=0;me<ae.length;me++){let Ce=N[ae[me]];Ce||(Ce=[],N[ae[me]]=Ce),Ce.push({type:qe.objectURI,value:g})}else if(B)for(let me=0;me<ae.length;me++)this.addTriple(u,d,ae[me],{type:qe.objectURI,value:g});if(O)for(let me=0;me<ce.length;me++)this.addTriple(u,g,ce[me],{type:qe.objectURI,value:d})}else{if(d&&!g&&(B||O)&&(g=this.newBlankNode()),B&&ee)for(let me=0;me<ae.length;me++){let Ce=N[ae[me]];Ce||(Ce=[],N[le]=Ce),_.push({predicate:ae[me],list:Ce})}else if(B)for(let me=0;me<ae.length;me++)_.push({predicate:ae[me],forward:!0});if(O)for(let me=0;me<ce.length;me++)_.push({predicate:ce[me],forward:!1})}if(H){var xe=null,J=null;j?(xe=j.value===""?qe.PlainLiteralURI:this.parseTermOrCURIEOrAbsURI(j.value,p,c.terms,v,r),K&&!I?J=K.value:J=xe===qe.XMLLiteralURI||xe===qe.HTMLLiteralURI?null:I?I.value:u.textContent):I?(xe=qe.PlainLiteralURI,J=I.value):K?(J=K.value,xe=qe.deriveDateTimeType(J),xe||(xe=qe.PlainLiteralURI)):!B&&!O&&(ie&&(J=this.parseSafeCURIEOrCURIEOrURI(ie.value,v,r)),!J&&ge?J=this.resolveAndNormalize(r,encodeURI(ge.value)):!J&&se&&(J=this.resolveAndNormalize(r,encodeURI(se.value))),J&&(xe=qe.objectURI)),xe||(R&&!G?(xe=qe.objectURI,J=m):(J=u.textContent,this.inHTMLMode&&u.localName==="time"&&(xe=qe.deriveDateTimeType(J)),xe||(xe=qe.PlainLiteralURI))),te=this.tokenize(H.value);for(let me=0;me<te.length;me++){let Ce=this.parsePredicate(te[me],p,c.terms,v,r);if(Ce)if(ee){let de=N[Ce];de||(de=[],N[Ce]=de),de.push(xe===qe.XMLLiteralURI||xe===qe.HTMLLiteralURI?{type:xe,value:u.childNodes}:{type:xe||qe.PlainLiteralURI,value:J,language:w})}else xe===qe.XMLLiteralURI||xe===qe.HTMLLiteralURI?this.addTriple(u,d,Ce,{type:xe,value:u.childNodes}):this.addTriple(u,d,Ce,{type:xe||qe.PlainLiteralURI,value:J,language:w})}}if(d&&!f)for(let me=0;me<c.incomplete.length;me++)c.incomplete[me].list?c.incomplete[me].list.push({type:qe.objectURI,value:d}):c.incomplete[me].forward?this.addTriple(u,c.subject,c.incomplete[me].predicate,{type:qe.objectURI,value:d}):this.addTriple(u,d,c.incomplete[me].predicate,{type:qe.objectURI,value:c.subject});var ne=null,ye=d;f?(ne=this.push(c,c.subject),ne.parentObject=s(u.parentNode.baseURI)===c.parentObject?s(u.baseURI):c.parentObject,ne.incomplete=c.incomplete,ne.language=w,ne.prefixes=v,ne.vocabulary=p):(ne=this.push(c,d),ne.parentObject=g||d||c.subject,ne.prefixes=v,ne.incomplete=_,g&&(ye=g,N={},E=!0),ne.listMapping=N,ne.language=w,ne.vocabulary=p),E&&a.unshift({parent:u,context:c,subject:ye,listMapping:N});for(var _e=u.lastChild;_e;_e=_e.previousSibling)_e.nodeType===Hn.ELEMENT_NODE&&a.unshift({current:_e,context:ne})}this.inHTMLMode&&this.copyProperties();for(let me=0;me<this.finishedHandlers.length;me++)this.finishedHandlers[me](e)}push(e,t){return{parent:e,subject:t||(e?e.subject:null),parentObject:null,incomplete:[],listMapping:e?e.listMapping:{},language:e?e.language:this.language,prefixes:e?e.prefixes:this.target.graph.prefixes,terms:e?e.terms:this.target.graph.terms,vocabulary:e?e.vocabulary:this.vocabulary}}resolveAndNormalize(e,t){return Ft(t,e)}setContext(e){e.localName==="html"&&e.getAttribute("version")==="XHTML+RDFa 1.1"?this.setXHTMLContext():e.localName==="html"||e.namespaceURI==="http://www.w3.org/1999/xhtml"?typeof document<"u"&&document.doctype?document.doctype.publicId==="-//W3C//DTD XHTML+RDFa 1.0//EN"&&document.doctype.systemId==="http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd"?(console.log("WARNING: RDF 1.0 is not supported.  Defaulting to HTML5 mode."),this.setHTMLContext()):document.doctype.publicId==="-//W3C//DTD XHTML+RDFa 1.1//EN"&&document.doctype.systemId==="http://www.w3.org/MarkUp/DTD/xhtml-rdfa-2.dtd"?this.setXHTMLContext():this.setHTMLContext():this.setHTMLContext():this.setXMLContext()}setHTMLContext(){this.setInitialContext(),this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}],this.inXHTMLMode=!1,this.inHTMLMode=!0}setInitialContext(){this.vocabulary=null,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}]}setXHTMLContext(){this.setInitialContext(),this.inXHTMLMode=!0,this.inHTMLMode=!1,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}],this.target.graph.terms.alternate="http://www.w3.org/1999/xhtml/vocab#alternate",this.target.graph.terms.appendix="http://www.w3.org/1999/xhtml/vocab#appendix",this.target.graph.terms.bookmark="http://www.w3.org/1999/xhtml/vocab#bookmark",this.target.graph.terms.cite="http://www.w3.org/1999/xhtml/vocab#cite",this.target.graph.terms.chapter="http://www.w3.org/1999/xhtml/vocab#chapter",this.target.graph.terms.contents="http://www.w3.org/1999/xhtml/vocab#contents",this.target.graph.terms.copyright="http://www.w3.org/1999/xhtml/vocab#copyright",this.target.graph.terms.first="http://www.w3.org/1999/xhtml/vocab#first",this.target.graph.terms.glossary="http://www.w3.org/1999/xhtml/vocab#glossary",this.target.graph.terms.help="http://www.w3.org/1999/xhtml/vocab#help",this.target.graph.terms.icon="http://www.w3.org/1999/xhtml/vocab#icon",this.target.graph.terms.index="http://www.w3.org/1999/xhtml/vocab#index",this.target.graph.terms.last="http://www.w3.org/1999/xhtml/vocab#last",this.target.graph.terms.license="http://www.w3.org/1999/xhtml/vocab#license",this.target.graph.terms.meta="http://www.w3.org/1999/xhtml/vocab#meta",this.target.graph.terms.next="http://www.w3.org/1999/xhtml/vocab#next",this.target.graph.terms.prev="http://www.w3.org/1999/xhtml/vocab#prev",this.target.graph.terms.previous="http://www.w3.org/1999/xhtml/vocab#previous",this.target.graph.terms.section="http://www.w3.org/1999/xhtml/vocab#section",this.target.graph.terms.stylesheet="http://www.w3.org/1999/xhtml/vocab#stylesheet",this.target.graph.terms.subsection="http://www.w3.org/1999/xhtml/vocab#subsection",this.target.graph.terms.start="http://www.w3.org/1999/xhtml/vocab#start",this.target.graph.terms.top="http://www.w3.org/1999/xhtml/vocab#top",this.target.graph.terms.up="http://www.w3.org/1999/xhtml/vocab#up",this.target.graph.terms.p3pv1="http://www.w3.org/1999/xhtml/vocab#p3pv1",this.target.graph.terms.related="http://www.w3.org/1999/xhtml/vocab#related",this.target.graph.terms.role="http://www.w3.org/1999/xhtml/vocab#role",this.target.graph.terms.transformation="http://www.w3.org/1999/xhtml/vocab#transformation"}setXMLContext(){this.setInitialContext(),this.inXHTMLMode=!1,this.inHTMLMode=!1}tokenize(e){return this.trim(e).split(/\s+/)}static tokenize(e){return this.trim(e).split(/\s+/)}toRDFNodeObject(e){if(!(typeof e>"u")){if(typeof e=="string")return e.substring(0,2)==="_:"?(typeof this.blankNodes[e.substring(2)]>"u"&&(this.blankNodes[e.substring(2)]=new sn(e.substring(2))),this.blankNodes[e.substring(2)]):Zt.namedNode(e);switch(e.type){case qe.objectURI:return e.value.substring(0,2)==="_:"?(typeof this.blankNodes[e.value.substring(2)]>"u"&&(this.blankNodes[e.value.substring(2)]=new sn(e.value.substring(2))),this.blankNodes[e.value.substring(2)]):Zt.namedNode(e.value);case qe.PlainLiteralURI:return new on(e.value,e.language||"");case qe.XMLLiteralURI:case qe.HTMLLiteralURI:var t="";return Object.keys(e.value).forEach(r=>{t+=Bh(e.value[r],this.htmlOptions)}),new on(t,"",new St(e.type));default:return new on(e.value,"",new St(e.type))}}}trim(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}static trim(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}}qe.XMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral",qe.HTMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML",qe.PlainLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral",qe.objectURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#object",qe.typeURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",qe.nameChar="[-A-Z_a-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�က0-F.0-9·̀-ͯ‿-⁀]",qe.nameStartChar="[A-Za-zÀ-ÖØ-öø-ÿĀ-ıĴ-ľŁ-ňŊ-žƀ-ǃǍ-ǰǴ-ǵǺ-ȗɐ-ʨʻ-ˁΆΈ-ΊΌΎ-ΡΣ-ώϐ-ϖϚϜϞϠϢ-ϳЁ-ЌЎ-яё-ќў-ҁҐ-ӄӇ-ӈӋ-ӌӐ-ӫӮ-ӵӸ-ӹԱ-Ֆՙա-ֆא-תװ-ײء-غف-يٱ-ڷں-ھۀ-ێې-ۓەۥ-ۦअ-हऽक़-ॡঅ-ঌএ-ঐও-নপ-রলশ-হড়-ঢ়য়-ৡৰ-ৱਅ-ਊਏ-ਐਓ-ਨਪ-ਰਲ-ਲ਼ਵ-ਸ਼ਸ-ਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઋઍએ-ઑઓ-નપ-રલ-ળવ-હઽૠଅ-ଌଏ-ଐଓ-ନପ-ରଲ-ଳଶ-ହଽଡ଼-ଢ଼ୟ-ୡஅ-ஊஎ-ஐஒ-கங-சஜஞ-டண-தந-பம-வஷ-ஹఅ-ఌఎ-ఐఒ-నప-ళవ-హౠ-ౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹೞೠ-ೡഅ-ഌഎ-ഐഒ-നപ-ഹൠ-ൡก-ฮะา-ำเ-ๅກ-ຂຄງ-ຈຊຍດ-ທນ-ຟມ-ຣລວສ-ຫອ-ຮະາ-ຳຽເ-ໄཀ-ཇཉ-ཀྵႠ-Ⴥა-ჶᄀᄂ-ᄃᄅ-ᄇᄉᄋ-ᄌᄎ-ᄒᄼᄾᅀᅌᅎᅐᅔ-ᅕᅙᅟ-ᅡᅣᅥᅧᅩᅭ-ᅮᅲ-ᅳᅵᆞᆨᆫᆮ-ᆯᆷ-ᆸᆺᆼ-ᇂᇫᇰᇹḀ-ẛẠ-ỹἀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼΩK-Å℮ↀ-ↂぁ-ゔァ-ヺㄅ-ㄬ가-힣一-龥〇〡-〩_]",qe.NCNAME=new RegExp("^"+qe.nameStartChar+qe.nameChar+"*$"),qe.dateTimeTypes=[{pattern:/-?P(?:[0-9]+Y)?(?:[0-9]+M)?(?:[0-9]+D)?(?:T(?:[0-9]+H)?(?:[0-9]+M)?(?:[0-9]+(?:\.[0-9]+)?S)?)?/,type:"http://www.w3.org/2001/XMLSchema#duration"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9]T(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#dateTime"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9](?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#date"},{pattern:/(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#time"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]/,type:"http://www.w3.org/2001/XMLSchema#gYearMonth"},{pattern:/-?[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9]/,type:"http://www.w3.org/2001/XMLSchema#gYear"}];const Hi=qe.parseRDFaDOM;class Ke{constructor(e){this.store=e,this.bnodes={},this.why=null,this.reify=!1}frameFactory(e,t,r){return{NODE:1,ARC:2,parent:t,parser:e,store:e.store,element:r,lastChild:0,base:null,lang:null,node:null,nodeType:null,listIndex:1,rdfid:null,datatype:null,collection:!1,terminateFrame:function(){this.collection&&this.node.close()},addSymbol:function(a,s){s=Ft(s,this.base),this.node=this.store.sym(s),this.nodeType=a},loadTriple:function(){if(this.parent.parent.collection?this.parent.parent.node.append(this.node):this.store.add(this.parent.parent.node,this.parent.node,this.node,this.parser.why),this.parent.rdfid!=null){var a=this.store.sym(Ft("#"+this.parent.rdfid,this.base));this.store.add(a,this.store.sym(Ke.ns.RDF+"type"),this.store.sym(Ke.ns.RDF+"Statement"),this.parser.why),this.store.add(a,this.store.sym(Ke.ns.RDF+"subject"),this.parent.parent.node,this.parser.why),this.store.add(a,this.store.sym(Ke.ns.RDF+"predicate"),this.parent.node,this.parser.why),this.store.add(a,this.store.sym(Ke.ns.RDF+"object"),this.node,this.parser.why)}},isTripleToLoad:function(){return this.parent!=null&&this.parent.parent!=null&&this.nodeType===this.NODE&&this.parent.nodeType===this.ARC&&this.parent.parent.nodeType===this.NODE},addNode:function(a){this.addSymbol(this.NODE,a),this.isTripleToLoad()&&this.loadTriple()},addCollection:function(){this.nodeType=this.NODE,this.node=this.store.collection(),this.collection=!0,this.isTripleToLoad()&&this.loadTriple()},addCollectionArc:function(){this.nodeType=this.ARC},addBNode:function(a){a!=null?this.parser.bnodes[a]!=null?this.node=this.parser.bnodes[a]:this.node=this.parser.bnodes[a]=this.store.bnode():this.node=this.store.bnode(),this.nodeType=this.NODE,this.isTripleToLoad()&&this.loadTriple()},addArc:function(a){a===Ke.ns.RDF+"li"&&(a=Ke.ns.RDF+"_"+this.parent.listIndex,this.parent.listIndex++),this.addSymbol(this.ARC,a)},addLiteral:function(a){this.parent.datatype&&this.parent.datatype!==Ke.ns.RDF+"langString"?this.node=this.store.literal(a,this.store.sym(this.parent.datatype)):this.node=this.store.literal(a,this.lang),this.nodeType=this.NODE,this.isTripleToLoad()&&this.loadTriple()}}}getAttributeNodeNS(e,t,r){var a=null;if(e.getAttributeNodeNS)a=e.getAttributeNodeNS(t,r);else for(var s=e.attributes,i,l,o=0;o<s.length;++o)if(i=s[o],i.namespaceURI===t&&(l=i.prefix?i.prefix+":"+r:r,l===i.nodeName)){a=i;break}return a}parse(e,t,r){var a=e.childNodes;this.cleanParser();var s;if(e.nodeType===Ke.nodeType.DOCUMENT){for(var i=0;i<a.length;i++)if(a[i].nodeType===Ke.nodeType.ELEMENT){s=a[i];break}}else if(e.nodeType===Ke.nodeType.ELEMENT)s=e;else throw new Error("RDFParser: can't find root in "+t+". Halting. ");this.why=r;var l=this.frameFactory(this);return this.base=t,l.base=t,l.lang=null,this.parseDOM(this.buildFrame(l,s)),!0}parseDOM(e){for(var t,r=(function(w){var p="";if(w.namespaceURI==null)throw new Error("RDF/XML syntax error: No namespace for "+w.localName+" in "+this.base);return w.namespaceURI&&(p=p+w.namespaceURI),w.localName?p=p+w.localName:w.nodeName&&(w.nodeName.indexOf(":")>=0?p=p+w.nodeName.split(":")[1]:p=p+w.nodeName),p}).bind(this),a=!0;e.parent;){var s=e.element,i=s.attributes;if(s.nodeType===Ke.nodeType.TEXT||s.nodeType===Ke.nodeType.CDATA_SECTION)e.parent.nodeType===e.NODE&&(e.addArc(Ke.ns.RDF+"value"),e=this.buildFrame(e)),e.addLiteral(s.nodeValue);else if(r(s)!==Ke.ns.RDF+"RDF")if(e.parent&&e.parent.collection&&(e.addCollectionArc(),e=this.buildFrame(e,e.element),e.parent.element=null),!e.parent||!e.parent.nodeType||e.parent.nodeType===e.ARC){var l=this.getAttributeNodeNS(s,Ke.ns.RDF,"about");if(t=this.getAttributeNodeNS(s,Ke.ns.RDF,"ID"),l&&t)throw new Error("RDFParser: "+s.nodeName+" has both rdf:id and rdf:about. Halting. Only one of these properties may be specified on a node.");if(!l&&t)e.addNode("#"+t.nodeValue),s.removeAttributeNode(t);else if(l==null&&t==null){var o=this.getAttributeNodeNS(s,Ke.ns.RDF,"nodeID");o?(e.addBNode(o.nodeValue),s.removeAttributeNode(o)):e.addBNode()}else e.addNode(l.nodeValue),s.removeAttributeNode(l);var u=this.getAttributeNodeNS(s,Ke.ns.RDF,"type");Ke.ns.RDF+"Description"!==r(s)&&(u={nodeValue:r(s)}),u!=null&&(this.store.add(e.node,this.store.sym(Ke.ns.RDF+"type"),this.store.sym(Ft(u.nodeValue,e.base)),this.why),u.nodeName&&s.removeAttributeNode(u));for(var c=i.length-1;c>=0;c--)this.store.add(e.node,this.store.sym(r(i[c])),this.store.literal(i[c].nodeValue,e.lang),this.why)}else{e.addArc(r(s)),this.reify&&(t=this.getAttributeNodeNS(s,Ke.ns.RDF,"ID"),t&&(e.rdfid=t.nodeValue,s.removeAttributeNode(t)));var f=this.getAttributeNodeNS(s,Ke.ns.RDF,"parseType"),d=this.getAttributeNodeNS(s,Ke.ns.RDF,"datatype");if(d&&(e.datatype=d.nodeValue,s.removeAttributeNode(d)),f){var g=f.nodeValue;g==="Literal"?(e.datatype=Ke.ns.RDF+"XMLLiteral",e=this.buildFrame(e),e.addLiteral(s.innerHTML||s.childNodes),a=!1):g==="Resource"?(e=this.buildFrame(e,e.element),e.parent.element=null,e.addBNode()):g==="Collection"&&(e=this.buildFrame(e,e.element),e.parent.element=null,e.addCollection()),s.removeAttributeNode(f)}if(i.length!==0){var m=this.getAttributeNodeNS(s,Ke.ns.RDF,"resource"),v=this.getAttributeNodeNS(s,Ke.ns.RDF,"nodeID");e=this.buildFrame(e),m?(e.addNode(m.nodeValue),s.removeAttributeNode(m)):v?(e.addBNode(v.nodeValue),s.removeAttributeNode(v)):e.addBNode();for(var b=i.length-1;b>=0;b--){var _=this.buildFrame(e);_.addArc(r(i[b])),r(i[b])===Ke.ns.RDF+"type"?this.buildFrame(_).addNode(i[b].nodeValue):this.buildFrame(_).addLiteral(i[b].nodeValue)}}else s.childNodes.length===0&&this.buildFrame(e).addLiteral("")}for(s=e.element;e.parent;){for(var N=e;s==null;)e=e.parent,s=e.element;var E=s.childNodes&&s.childNodes[e.lastChild];if(!E||!a){if(e.terminateFrame(),!(e=e.parent))break;s=e.element,a=!0}else if(E.nodeType!==Ke.nodeType.ELEMENT&&E.nodeType!==Ke.nodeType.TEXT&&E.nodeType!==Ke.nodeType.CDATA_SECTION||(E.nodeType===Ke.nodeType.TEXT||E.nodeType===Ke.nodeType.CDATA_SECTION)&&s.childNodes.length!==1)e.lastChild++;else{e.lastChild++,e=this.buildFrame(N,s.childNodes[e.lastChild-1]);break}}}}cleanParser(){this.bnodes={},this.why=null}buildFrame(e,t){var r=this.frameFactory(this,e,t);if(e&&(r.base=e.base,r.lang=e.lang),!t||t.nodeType===Ke.nodeType.TEXT||t.nodeType===Ke.nodeType.CDATA_SECTION)return r;var a=t.attributes,s=t.getAttributeNode("xml:base");s!=null&&(r.base=s.nodeValue,t.removeAttribute("xml:base"));var i=t.getAttributeNode("xml:lang");i!=null&&(r.lang=i.nodeValue,t.removeAttribute("xml:lang"));for(var l=a.length-1;l>=0;l--)if(a[l].nodeName.substr(0,3)==="xml"){if(a[l].name.slice(0,6)==="xmlns:"){var o=a[l].nodeValue;this.base&&(o=Ft(o,this.base)),this.store.setPrefixForURI(a[l].name.slice(6),o)}t.removeAttributeNode(a[l])}return r}}Re(Ke,"ns",{RDF:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",RDFS:"http://www.w3.org/2000/01/rdf-schema#"}),Re(Ke,"nodeType",{ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12});function Dp(n,e,t){var r,a,s,i=["INSERT","DELETE","WHERE"],l=We("http://www.w3.org/ns/pim/patch#"),o=Ka(e,e,t,t,null,null,"",null),u={},c=function(v,b,_,N,E){return"Line "+(b+1)+" of <"+v+`>: Bad syntax:
   `+E+`
   at: "`+_.slice(N,N+30)+'"'};r=0;var f=e.sym(t+"#query");for(u.query=f;;){if(a=o.skipSpace(n,r),a<0)return u;if(n[a]===";"){if(r=o.skipSpace(n,a+1),r<0)return u;a=r}var d=!1;for(s=0;s<i.length;s++){var g=i[s];if(n.slice(a,a+g.length)===g){if(r=o.skipSpace(n,a+g.length),r<0)throw c(o._thisDoc,o.lines,n,a+g.length,"found EOF, needed {...} after "+g);if((g==="INSERT"||g==="DELETE")&&n.slice(r,r+4)==="DATA"){if(a=o.skipSpace(n,r+4),a<0)throw c(o._thisDoc,o.lines,n,r+4,"needed {...} after INSERT DATA "+g);r=a}var m=[];if(a=o.node(n,r,m),a<0)throw c(o._thisDoc,o.lines,n,r,"bad syntax or EOF in {...} after "+g);u[g.toLowerCase()]=m[0],e.add(f,l(g.toLowerCase()),m[0]),d=!0,r=a}}if(!d&&n.slice(a,a+7)==="@prefix"){if(r=o.directive(n,a),r<0)throw c(o._thisDoc,o.lines,n,r,"bad syntax or EOF after @prefix ");r=o.checkDot(n,r),d=!0}if(!d)throw c(o._thisDoc,o.lines,n,a,"Unknown syntax at start of statememt: '"+n.slice(a).slice(0,20)+"'")}}function Wi(n,e,t,r="text/turtle",a){r=r||Zn,r=r.split(";")[0];try{if(r===vo||r===Zn){var s=Ka(e,e,t,t,null,null,"",null);s.loadBuf(n),o()}else if(r===Gr){var i=new Ke(e);i.parse(Nr(n),t,e.sym(t)),o()}else if(r===Ra)Hi(Nr(n,{contentType:Ra}),e,t),o();else if(r===wo)Hi(Nr(n,{contentType:wo}),e,t),o();else if(r===hh||r===ph)Dp(n,e,t),o();else if(r===Sa)Jo(n,e,t).then(o).catch(u);else if(r===Ia||r===Da){var l=new cu({factory:Xa});c(null,n)}else throw r===void 0?new Error("contentType is undefined"):new Error("Don't know how to parse "+r+" yet")}catch(d){u(d)}Wi.handled={"text/n3":!0,"text/turtle":!0,"application/rdf+xml":!0,"application/xhtml+xml":!0,"text/html":!0,"application/sparql-update":!0,"application/sparql-update-single-match":!0,"application/ld+json":!0,"application/nquads":!0,"application/n-quads":!0};function o(){if(a)a(null,e);else return}function u(d){if(r!==Sa||r!==Ia||r!==Da)if(a)a(d,e);else{let g=new Error(""+d+" while trying to parse <"+t+"> as "+r);throw g.cause=d,g}}function c(d,g){try{l.parse(g,f)}catch(m){a(m,e)}}function f(d,g){g?e.add(g.subject,g.predicate,g.object,g.graph):a(d,e)}}var Vi={exports:{}},Ku;function Ip(){return Ku||(Ku=1,(function(n,e){var t=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Ar<"u"&&Ar,r=(function(){function s(){this.fetch=!1,this.DOMException=t.DOMException}return s.prototype=t,new s})();(function(s){(function(i){var l=typeof s<"u"&&s||typeof self<"u"&&self||typeof Ar<"u"&&Ar||{},o={searchParams:"URLSearchParams"in l,iterable:"Symbol"in l&&"iterator"in Symbol,blob:"FileReader"in l&&"Blob"in l&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in l,arrayBuffer:"ArrayBuffer"in l};function u(O){return O&&DataView.prototype.isPrototypeOf(O)}if(o.arrayBuffer)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(O){return O&&c.indexOf(Object.prototype.toString.call(O))>-1};function d(O){if(typeof O!="string"&&(O=String(O)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(O)||O==="")throw new TypeError('Invalid character in header field name: "'+O+'"');return O.toLowerCase()}function g(O){return typeof O!="string"&&(O=String(O)),O}function m(O){var R={next:function(){var H=O.shift();return{done:H===void 0,value:H}}};return o.iterable&&(R[Symbol.iterator]=function(){return R}),R}function v(O){this.map={},O instanceof v?O.forEach(function(R,H){this.append(H,R)},this):Array.isArray(O)?O.forEach(function(R){if(R.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+R.length);this.append(R[0],R[1])},this):O&&Object.getOwnPropertyNames(O).forEach(function(R){this.append(R,O[R])},this)}v.prototype.append=function(O,R){O=d(O),R=g(R);var H=this.map[O];this.map[O]=H?H+", "+R:R},v.prototype.delete=function(O){delete this.map[d(O)]},v.prototype.get=function(O){return O=d(O),this.has(O)?this.map[O]:null},v.prototype.has=function(O){return this.map.hasOwnProperty(d(O))},v.prototype.set=function(O,R){this.map[d(O)]=g(R)},v.prototype.forEach=function(O,R){for(var H in this.map)this.map.hasOwnProperty(H)&&O.call(R,this.map[H],H,this)},v.prototype.keys=function(){var O=[];return this.forEach(function(R,H){O.push(H)}),m(O)},v.prototype.values=function(){var O=[];return this.forEach(function(R){O.push(R)}),m(O)},v.prototype.entries=function(){var O=[];return this.forEach(function(R,H){O.push([H,R])}),m(O)},o.iterable&&(v.prototype[Symbol.iterator]=v.prototype.entries);function b(O){if(!O._noBody){if(O.bodyUsed)return Promise.reject(new TypeError("Already read"));O.bodyUsed=!0}}function _(O){return new Promise(function(R,H){O.onload=function(){R(O.result)},O.onerror=function(){H(O.error)}})}function N(O){var R=new FileReader,H=_(R);return R.readAsArrayBuffer(O),H}function E(O){var R=new FileReader,H=_(R),j=/charset=([A-Za-z0-9_-]+)/.exec(O.type),K=j?j[1]:"utf-8";return R.readAsText(O,K),H}function w(O){for(var R=new Uint8Array(O),H=new Array(R.length),j=0;j<R.length;j++)H[j]=String.fromCharCode(R[j]);return H.join("")}function p(O){if(O.slice)return O.slice(0);var R=new Uint8Array(O.byteLength);return R.set(new Uint8Array(O)),R.buffer}function S(){return this.bodyUsed=!1,this._initBody=function(O){this.bodyUsed=this.bodyUsed,this._bodyInit=O,O?typeof O=="string"?this._bodyText=O:o.blob&&Blob.prototype.isPrototypeOf(O)?this._bodyBlob=O:o.formData&&FormData.prototype.isPrototypeOf(O)?this._bodyFormData=O:o.searchParams&&URLSearchParams.prototype.isPrototypeOf(O)?this._bodyText=O.toString():o.arrayBuffer&&o.blob&&u(O)?(this._bodyArrayBuffer=p(O.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(O)||f(O))?this._bodyArrayBuffer=p(O):this._bodyText=O=Object.prototype.toString.call(O):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof O=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):o.searchParams&&URLSearchParams.prototype.isPrototypeOf(O)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o.blob&&(this.blob=function(){var O=b(this);if(O)return O;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var O=b(this);return O||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(o.blob)return this.blob().then(N);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var O=b(this);if(O)return O;if(this._bodyBlob)return E(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(w(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o.formData&&(this.formData=function(){return this.text().then(C)}),this.json=function(){return this.text().then(JSON.parse)},this}var F=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function A(O){var R=O.toUpperCase();return F.indexOf(R)>-1?R:O}function k(O,R){if(!(this instanceof k))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');R=R||{};var H=R.body;if(O instanceof k){if(O.bodyUsed)throw new TypeError("Already read");this.url=O.url,this.credentials=O.credentials,R.headers||(this.headers=new v(O.headers)),this.method=O.method,this.mode=O.mode,this.signal=O.signal,!H&&O._bodyInit!=null&&(H=O._bodyInit,O.bodyUsed=!0)}else this.url=String(O);if(this.credentials=R.credentials||this.credentials||"same-origin",(R.headers||!this.headers)&&(this.headers=new v(R.headers)),this.method=A(R.method||this.method||"GET"),this.mode=R.mode||this.mode||null,this.signal=R.signal||this.signal||(function(){if("AbortController"in l){var I=new AbortController;return I.signal}})(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&H)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(H),(this.method==="GET"||this.method==="HEAD")&&(R.cache==="no-store"||R.cache==="no-cache")){var j=/([?&])_=[^&]*/;if(j.test(this.url))this.url=this.url.replace(j,"$1_="+new Date().getTime());else{var K=/\?/;this.url+=(K.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}k.prototype.clone=function(){return new k(this,{body:this._bodyInit})};function C(O){var R=new FormData;return O.trim().split("&").forEach(function(H){if(H){var j=H.split("="),K=j.shift().replace(/\+/g," "),I=j.join("=").replace(/\+/g," ");R.append(decodeURIComponent(K),decodeURIComponent(I))}}),R}function L(O){var R=new v,H=O.replace(/\r?\n[\t ]+/g," ");return H.split("\r").map(function(j){return j.indexOf(`
`)===0?j.substr(1,j.length):j}).forEach(function(j){var K=j.split(":"),I=K.shift().trim();if(I){var G=K.join(":").trim();try{R.append(I,G)}catch(se){console.warn("Response "+se.message)}}}),R}S.call(k.prototype);function P(O,R){if(!(this instanceof P))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(R||(R={}),this.type="default",this.status=R.status===void 0?200:R.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=R.statusText===void 0?"":""+R.statusText,this.headers=new v(R.headers),this.url=R.url||"",this._initBody(O)}S.call(P.prototype),P.prototype.clone=function(){return new P(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new v(this.headers),url:this.url})},P.error=function(){var O=new P(null,{status:200,statusText:""});return O.ok=!1,O.status=0,O.type="error",O};var M=[301,302,303,307,308];P.redirect=function(O,R){if(M.indexOf(R)===-1)throw new RangeError("Invalid status code");return new P(null,{status:R,headers:{location:O}})},i.DOMException=l.DOMException;try{new i.DOMException}catch{i.DOMException=function(R,H){this.message=R,this.name=H;var j=Error(R);this.stack=j.stack},i.DOMException.prototype=Object.create(Error.prototype),i.DOMException.prototype.constructor=i.DOMException}function B(O,R){return new Promise(function(H,j){var K=new k(O,R);if(K.signal&&K.signal.aborted)return j(new i.DOMException("Aborted","AbortError"));var I=new XMLHttpRequest;function G(){I.abort()}I.onload=function(){var ge={statusText:I.statusText,headers:L(I.getAllResponseHeaders()||"")};K.url.indexOf("file://")===0&&(I.status<200||I.status>599)?ge.status=200:ge.status=I.status,ge.url="responseURL"in I?I.responseURL:ge.headers.get("X-Request-URL");var ee="response"in I?I.response:I.responseText;setTimeout(function(){H(new P(ee,ge))},0)},I.onerror=function(){setTimeout(function(){j(new TypeError("Network request failed"))},0)},I.ontimeout=function(){setTimeout(function(){j(new TypeError("Network request timed out"))},0)},I.onabort=function(){setTimeout(function(){j(new i.DOMException("Aborted","AbortError"))},0)};function se(ge){try{return ge===""&&l.location.href?l.location.href:ge}catch{return ge}}if(I.open(K.method,se(K.url),!0),K.credentials==="include"?I.withCredentials=!0:K.credentials==="omit"&&(I.withCredentials=!1),"responseType"in I&&(o.blob?I.responseType="blob":o.arrayBuffer&&(I.responseType="arraybuffer")),R&&typeof R.headers=="object"&&!(R.headers instanceof v||l.Headers&&R.headers instanceof l.Headers)){var ie=[];Object.getOwnPropertyNames(R.headers).forEach(function(ge){ie.push(d(ge)),I.setRequestHeader(ge,g(R.headers[ge]))}),K.headers.forEach(function(ge,ee){ie.indexOf(ee)===-1&&I.setRequestHeader(ee,ge)})}else K.headers.forEach(function(ge,ee){I.setRequestHeader(ee,ge)});K.signal&&(K.signal.addEventListener("abort",G),I.onreadystatechange=function(){I.readyState===4&&K.signal.removeEventListener("abort",G)}),I.send(typeof K._bodyInit>"u"?null:K._bodyInit)})}return B.polyfill=!0,l.fetch||(l.fetch=B,l.Headers=v,l.Request=k,l.Response=P),i.Headers=v,i.Request=k,i.Response=P,i.fetch=B,i})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var a=t.fetch?t:r;e=a.fetch,e.default=a.fetch,e.fetch=a.fetch,e.Headers=a.Headers,e.Request=a.Request,e.Response=a.Response,n.exports=e})(Vi,Vi.exports)),Vi.exports}var Ds=Ip();const Rp=Fa(Ds),kp={"text/n3":!0,"text/turtle":!0,"application/rdf+xml":!0,"application/xhtml+xml":!0,"text/html":!0,"application/ld+json":!0},Xu={rdf:Gr,owl:Gr,n3:"text/n3",ttl:"text/turtle",nt:"text/n3",acl:"text/n3",html:"text/html",xml:"text/xml"},Qu=n=>({link:We("http://www.w3.org/2007/ont/link#",n),http:We("http://www.w3.org/2007/ont/http#",n),httph:We("http://www.w3.org/2007/ont/httph#",n),rdf:We("http://www.w3.org/1999/02/22-rdf-syntax-ns#",n),rdfs:We("http://www.w3.org/2000/01/rdf-schema#",n),dc:We("http://purl.org/dc/elements/1.1/",n),ldp:We("http://www.w3.org/ns/ldp#",n)}),Vt=Qu();class Wn{constructor(e,t){Re(this,"response",void 0),Re(this,"dom",void 0),this.response=e,this.dom=t}}Re(Wn,"pattern",void 0);class Is extends Wn{static toString(){return"RDFXMLHandler"}static register(e){e.mediatypes[Gr]={q:.9}}parse(e,t,r){let a=e.store;this.dom||(this.dom=Nr(t));let s=this.dom.documentElement;if(s&&s.nodeName==="parsererror")return e.failFetch(r,"Badly formed XML in "+r.resource.value,"parse_error");let i=new Ke(a);try{i.parse(this.dom,r.original.value,r.original)}catch(l){return e.failFetch(r,"Syntax error parsing RDF/XML! "+l,"parse_error")}return r.noMeta||a.add(r.original,Vt.rdf("type"),Vt.link("RDFDocument"),e.appNode),e.doneFetch(r,this.response)}}Is.pattern=new RegExp("application/rdf\\+xml");class lr extends Wn{static toString(){return"XHTMLHandler"}static register(e){e.mediatypes[Ra]={q:.8}}parse(e,t,r){let a,s;this.dom||(this.dom=Nr(t));let i=e.store,l=this.dom.getElementsByTagName("title");l.length>0&&i.add(r.resource,Vt.dc("title"),i.rdfFactory.literal(l[0].textContent),r.resource);let o=this.dom.getElementsByTagName("link");for(let c=o.length-1;c>=0;c--)a=o[c].getAttribute("rel"),s=!1,a||(a=o[c].getAttribute("rev"),s=!0),a&&e.linkData(r.original,a,o[c].getAttribute("href"),r.resource,s);let u=this.dom.getElementsByTagName("script");for(let c=0;c<u.length;c++){let f=u[c].getAttribute("type");kp[f]&&(Wi(u[c].textContent,i,r.original.value,f),Wi(u[c].textContent,i,r.original.value,f))}if(r.noMeta||i.add(r.resource,Vt.rdf("type"),Vt.link("WebPage"),e.appNode),!r.noRDFa&&Hi)try{Hi(this.dom,i,r.original.value)}catch(c){let f="Error trying to parse "+r.resource+` as RDFa:
`+c+`:
`+c.stack;return e.failFetch(r,f,"parse_error")}return e.doneFetch(r,this.response)}}lr.pattern=new RegExp("application/xhtml");class Rr extends Wn{static toString(){return"XMLHandler"}static register(e){e.mediatypes["text/xml"]={q:.5},e.mediatypes["application/xml"]={q:.5}}static isElement(e){return e.nodeType===Node.ELEMENT_NODE}parse(e,t,r){let a=Nr(t);for(let i=0;i<a.childNodes.length;i++){const l=a.childNodes[i];if(Rr.isElement(l)){let o=l.namespaceURI;if(o&&o===o.rdf)return e.addStatus(r.req,"Has XML root element in the RDF namespace, so assume RDF/XML."),new Is(this.response,a).parse(e,t,r);break}}if(a.doctype&&a.doctype.name==="html"&&a.doctype.publicId.match(/^-\/\/W3C\/\/DTD XHTML/)&&a.doctype.systemId.match(/http:\/\/www.w3.org\/TR\/xhtml/))return e.addStatus(r.req,`Has XHTML DOCTYPE. Switching to XHTML Handler.
`),new lr(this.response,a).parse(e,t,r);let s=a.getElementsByTagName("html")[0];if(s){let i=s.getAttribute("xmlns");if(i&&i.match(/^http:\/\/www.w3.org\/1999\/xhtml/))return e.addStatus(r.req,`Has a default namespace for XHTML. Switching to XHTMLHandler.
`),new lr(this.response,a).parse(e,t,r)}return e.failFetch(r,`Unsupported dialect of XML: not RDF or XHTML namespace, etc.
`+t.slice(0,80),901)}}Rr.pattern=new RegExp("(text|application)/(.*)xml");class Yu extends Wn{static toString(){return"HTMLHandler"}static register(e){e.mediatypes["text/html"]={q:.8}}parse(e,t,r){let a=e.store;if(nc(t))return e.addStatus(r.req,`Has an XML declaration. We'll assume it's XHTML as the content-type was text/html.
`),new lr(this.response).parse(e,t,r);if(Lp(t))return e.addStatus(r.req,`Has XHTML DOCTYPE. Switching to XHTMLHandler.
`),new lr(this.response).parse(e,t,r);if(Op(t))return e.addStatus(r.req,`Has default namespace for XHTML, so switching to XHTMLHandler.
`),new lr(this.response).parse(e,t,r);let s=new RegExp("<title>([\\s\\S]+?)</title>","im").exec(t);return s&&a.add(r.resource,Vt.dc("title"),a.rdfFactory.literal(s[1]),r.resource),a.add(r.resource,Vt.rdf("type"),Vt.link("WebPage"),e.appNode),e.addStatus(r.req,"non-XML HTML document, not parsed for data."),e.doneFetch(r,this.response)}}Yu.pattern=new RegExp("text/html");class Zu extends Wn{static toString(){return"JsonLdHandler"}static register(e){e.mediatypes["application/ld+json"]={q:.9}}async parse(e,t,r,a){const s=e.store;try{return await Jo(t,s,r.original.value),e.store.add(r.original,Vt.rdf("type"),Vt.link("RDFDocument"),e.appNode),e.doneFetch(r,a)}catch(i){const l="Error trying to parse "+r.resource+` as JSON-LD:
`+i;return e.failFetch(r,l,"parse_error",a)}}}Zu.pattern=/application\/(ld\+json|activity\+json)/;class ec extends Wn{static toString(){return"TextHandler"}static register(e){e.mediatypes["text/plain"]={q:.5}}parse(e,t,r){return nc(t)?(e.addStatus(r.req,"Warning: "+r.resource+` has an XML declaration. We'll assume it's XML but its content-type wasn't XML.
`),new Rr(this.response).parse(e,t,r)):t.slice(0,500).match(/xmlns:/)?(e.addStatus(r.req,`May have an XML namespace. We'll assume it's XML but its content-type wasn't XML.
`),new Rr(this.response).parse(e,t,r)):(e.addStatus(r.req,"Plain text document, no known RDF semantics."),e.doneFetch(r,this.response))}}ec.pattern=new RegExp("text/plain");class tc extends Wn{static toString(){return"N3Handler"}static register(e){e.mediatypes["text/n3"]={},e.mediatypes["text/turtle"]={}}parse(e,t,r,a){let s=e.store,i=Ka(s,s,r.original.value,r.original.value,null,null,"",null);try{i.loadBuf(t)}catch(l){let o="Error trying to parse "+r.resource+` as Notation3:
`+l;return e.failFetch(r,o,"parse_error",a)}return e.addStatus(r.req,"N3 parsed: "+i.statementCount+" triples in "+i.lines+" lines."),e.store.add(r.original,Vt.rdf("type"),Vt.link("RDFDocument"),e.appNode),e.doneFetch(r,this.response)}}tc.pattern=new RegExp("(application|text)/(x-)?(rdf\\+)?(n3|turtle)");const Rs={RDFXMLHandler:Is,XHTMLHandler:lr,XMLHandler:Rr,HTMLHandler:Yu,TextHandler:ec,N3Handler:tc,JsonLdHandler:Zu};function Lp(n){const e=n.indexOf("<!DOCTYPE html"),t=n.indexOf(">");return e===-1||t===-1||e>t?!1:n.substr(e,t-e).indexOf("XHTML")!==-1}function nc(n){return!!n.match(/\s*<\?xml\s+version\s*=[^<>]+\?>/)}function Op(n){return!!n.match(/[^(<html)]*<html\s+[^<]*xmlns=['"]http:\/\/www.w3.org\/1999\/xhtml["'][^<]*>/)}class _t{constructor(e,t={}){Re(this,"store",void 0),Re(this,"timeout",void 0),Re(this,"_fetch",void 0),Re(this,"mediatypes",void 0),Re(this,"appNode",void 0),Re(this,"requested",void 0),Re(this,"timeouts",void 0),Re(this,"redirectedTo",void 0),Re(this,"fetchQueue",void 0),Re(this,"fetchCallbacks",void 0),Re(this,"nonexistent",void 0),Re(this,"lookedUp",void 0),Re(this,"handlers",void 0),Re(this,"ns",void 0),Re(this,"fireCallbacks",void 0),this.store=e||new Sn,this.ns=Qu(this.store.rdfFactory),this.timeout=t.timeout||3e4;let r=t.fetch||typeof global<"u"&&(global.solidFetcher||global.solidFetch)||typeof window<"u"&&(window.solidFetcher||window.solidFetch)||Rp;if(!r)throw new Error("No _fetch function available for Fetcher");typeof window<"u"&&r===window.fetch?this._fetch=r.bind(window):typeof global<"u"&&r===global.fetch?this._fetch=r.bind(global):this._fetch=r,this.appNode=this.store.sym("chrome://TheCurrentSession"),this.store.fetcher=this,this.requested={},this.timeouts={},this.redirectedTo={},this.fetchQueue={},this.fetchCallbacks={},this.nonexistent={},this.lookedUp={},this.handlers=[],this.mediatypes={"image/*":{q:.9},"*/*":{q:.1}},Fh(this,["request","fail","refresh","retract","done"]),Object.keys(t.handlers||Rs).map(a=>this.addHandler(Rs[a]))}static crossSiteProxy(e){if(_t.crossSiteProxyTemplate)return _t.crossSiteProxyTemplate.replace("{uri}",encodeURIComponent(e))}static offlineOverride(e){let t=e;var r;return typeof window<"u"&&window.panes&&(r=window.panes.UI)&&r.preferences&&r.preferences.get("offlineModeUsingLocalhost")&&t.slice(0,7)==="http://"&&t.slice(7,17)!=="localhost/"&&(t="http://localhost/"+t.slice(7)),t}static proxyIfNecessary(e){var t;if(typeof window<"u"&&window.panes&&(t=window.panes.UI)&&t.isExtension)return e;if(typeof $SolidTestEnvironment<"u"&&$SolidTestEnvironment.localSiteMap){let r=e.split("/").slice(2);const a=(i,l)=>{let o=l[i.shift()];return o?typeof o=="string"?o+i.join("/"):i?a(i,o):null:null},s=a(r,$SolidTestEnvironment.localSiteMap);if(s)return s}return _t.crossSiteProxyTemplate&&typeof document<"u"&&document.location&&(""+document.location).slice(0,6)==="https:"&&e.slice(0,5)==="http:"?_t.crossSiteProxyTemplate.replace("{uri}",encodeURIComponent(e)):e}static unsupportedProtocol(e){let t=Ao(e);return t==="tel"||t==="mailto"||t==="urn"}static setCredentials(e,t={}){t.credentials===void 0&&(t.withCredentials!==void 0?t.credentials=t.withCredentials?"include":"omit":t.credentials="include")}load(e,t={}){if(t=Object.assign({},t),e instanceof Array)return Promise.all(e.map(u=>this.load(u,Object.assign({},t))));let a=er(e);a=a.split("#")[0],t=this.initFetchOptions(a,t);const s=this.appNode,i=this.store,l=i.statementsMatching(void 0,this.ns.link("requestedURI"),i.sym(a),s).map(u=>u.subject);for(const u of l){const c=i.any(u,this.ns.link("response"),null,s);if(c!=null){const f=i.statementsMatching(c,this.ns.link("outOfDate"),!0,s);i.remove(f),t.force=!0,t.clearPreviousData=!0}}const o=this.initFetchOptions(a,t);return this.pendingFetchPromise(a,o.baseURI,o)}async pendingFetchPromise(e,t,r){let a;return!r.force&&await this.fetchQueue[t]?a=this.fetchQueue[t]:(a=Promise.race([this.setRequestTimeout(e,r),this.fetchUri(e,r)]),this.fetchQueue[t]=a,this.cleanupFetchRequest(t,void 0,this.timeout)),a.then(s=>(e in this.timeouts&&(this.timeouts[e].forEach(clearTimeout),delete this.timeouts[e]),s))}cleanupFetchRequest(e,t,r){t!==void 0&&console.warn("_options is deprecated"),this.timeouts[e]=(this.timeouts[e]||[]).concat(setTimeout(()=>{this.isPending(e)||delete this.fetchQueue[e]},r))}initFetchOptions(e,t){let r=this.store;!t.method||t.method.toUpperCase()==="GET"||(t.force=!0),t.resource=r.rdfFactory.namedNode(e),t.baseURI=t.baseURI||e,t.original=r.rdfFactory.namedNode(t.baseURI),t.req=r.bnode(),t.headers=t.headers||{},t.contentType&&(t.headers["content-type"]=t.contentType),t.force&&(t.cache="no-cache");let s=this.acceptString();t.headers.accept=s;let i=_t.offlineOverride(e);t.requestedURI=i,_t.setCredentials(i,t);let l=_t.proxyIfNecessary(i);return i!==l&&(t.proxyUsed=!0),t.actualProxyURI=l,t}fetchUri(e,t){if(!e)return Promise.reject(new Error("Cannot fetch an empty uri"));if(_t.unsupportedProtocol(e))return this.failFetch(t,"fetcher: Unsupported protocol","unsupported_protocol");let r=this.getState(e);if(t.force)delete this.nonexistent[e];else{if(r==="fetched")return Promise.resolve(this.doneFetch(t,{status:200,ok:!0,statusText:"Already loaded into quadstore."}));if(r==="failed"&&this.requested[e]===404){let s="Previously failed: "+this.requested[e],i={url:e,status:this.requested[e],statusText:s,responseText:s,headers:new Ds.Headers,ok:!1,body:null,bodyUsed:!1,size:0,timeout:0};return this.failFetch(t,s,this.requested[e],i)}}this.fireCallbacks("request",[e]),this.requested[e]=!0,t.noMeta||this.saveRequestMetadata(e,t);let{actualProxyURI:a}=t;return this._fetch(a,t).then(s=>this.handleResponse(s,e,t),s=>{let i={url:a,status:999,statusText:(s.name||"network failure")+": "+(s.errno||s.code||s.type),responseText:s.message,headers:new Ds.Headers,ok:!1,body:null,bodyUsed:!1,size:0,timeout:0};return this.handleError(i,e,t)})}nowOrWhenFetched(e,t,r,a={}){const s=er(e);typeof t=="function"?r=t:typeof t>"u"||(Eo(t)?a.referringTerm=t:a=t),this.load(s,a).then(i=>{if(r)if(i)if(i.ok)r(!0,"OK",i);else{let l="HTTP error: Status "+i.status+" ("+i.statusText+")";i.responseText&&(l+=" "+i.responseText),r(!1,l,i)}else r(!1,"@@ nowOrWhenFetched:  no response object!")},function(i){var l=i.message||i.statusText;l="Failed to load  <"+s+"> "+l,i.response&&i.response.status&&(l+=" status: "+i.response.status),r(!1,l,i.response)})}addStatus(e,t){let r=new Date;t="["+r.getHours()+":"+r.getMinutes()+":"+r.getSeconds()+"."+r.getMilliseconds()+"] "+t;let a=this.store;const s=a.the(e,this.ns.link("status"));ka(s)&&s.append(a.rdfFactory.literal(t))}failFetch(e,t,r,a){this.addStatus(e.req,t),e.noMeta||this.store.add(e.original,this.ns.link("error"),this.store.rdfFactory.literal(t));let s=(e.method||"GET").toUpperCase();(s==="GET"||s==="HEAD")&&(e.resource.equals(e.original),this.requested[tr(e.original.value)]=r,this.fireCallbacks("fail",[e.original.value,t]));var l=new Error("Fetcher: "+t);return l.status=r,l.statusText=t,l.response=a,Promise.reject(l)}linkData(e,t,r,a,s){if(!r)return;let i=this.store,l,o=i.rdfFactory.namedNode(Ft(r,e.value));if(t==="alternate"||t==="seeAlso"||t==="meta"||t==="describedby"){if(o.value===e.value)return;l=this.ns.rdfs("seeAlso")}else t==="type"?l=i.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"):l=i.rdfFactory.namedNode(Ft(encodeURIComponent(t),"http://www.iana.org/assignments/link-relations/"));s?i.add(o,l,e,a):i.add(e,l,o,a)}parseLinkHeader(e,t,r){if(!e)return;const a=/<[^>]*>\s*(\s*;\s*[^()<>@,;:"/[\]?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*")))*(,|$)/g,s=/[^\(\)<>@,;:"\/\[\]\?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*"))/g,i=e.match(a);if(i!=null)for(let l=0;l<i.length;l++){let o=i[l].split(">"),u=o[0].substring(1),f=o[1].match(s);if(f==null)return;for(let d=0;d<f.length;d++){let v=f[d].split("=")[1].replace(/["']/g,"");this.linkData(t,v,u,r)}}}doneFetch(e,t){return this.addStatus(e.req,"Done."),this.requested[e.original.value]="done",this.fireCallbacks("done",[e.original.value]),t.req=e.req,t}nowKnownAs(e,t){this.lookedUp[e.value]?this.lookedUp[t.value]||this.lookUpThing(t,e):this.lookedUp[t.value]&&(this.lookedUp[e.value]||this.lookUpThing(e,t))}putBack(e,t={}){const r=er(e);let a=new St(r).doc();return t.contentType=t["content-type"]||t["Content-Type"]||t.contentType||Zn,t.contentType==="application/ld+json"?new Promise((s,i)=>{Qr(a,this.store,a.uri,t.contentType,(l,o)=>{l?i(l):(t.data=o,this.webOperation("PUT",e,t).then(u=>s(u)).catch(u=>i(u)))})}):(t.data=Qr(a,this.store,a.value,t.contentType),this.webOperation("PUT",r,t))}webCopy(e,t,r){return this.webOperation("GET",e).then(a=>this.webOperation("PUT",t,{data:a.responseText,contentType:r}))}delete(e,t){return this.webOperation("DELETE",e,t).then(r=>(this.requested[e]=404,this.nonexistent[e]=!0,this.unload(this.store.rdfFactory.namedNode(e)),r))}async createIfNotExists(e,t=Zn,r=""){const a=this;try{var s=await a.load(e)}catch(i){if(i.response.status===404){try{s=await a.webOperation("PUT",e.value,{data:r,contentType:t})}catch(l){throw l}return delete a.requested[e.value],s}else throw i}return s}createContainer(e,t,r){let a={"content-type":Zn,link:this.ns.ldp("BasicContainer")+'; rel="type"'};t&&(a.slug=t);let s={headers:a};return r&&(s.body=r),this.webOperation("POST",e,s)}invalidateCache(e){const t=er(e),r=this;if(r.fetchQueue&&r.fetchQueue[t]){var a=r.fetchQueue[t];a.PromiseStatus,delete r.fetchQueue[t]}if(r.requested[t]&&r.requested[t]!=="done"&&r.requested[t]!=="failed"&&r.requested[t]!==404){let s=`Rdflib: fetcher: Destructive operation on <${r.requested[t]}> file being fetched! `+t;console.error(s)}else delete r.requested[t],delete r.nonexistent[t]}webOperation(e,t,r={}){const a=er(t);r.method=e,r.body=r.data||r.body,r.force=!0;const s=this;if(r.body&&!r.contentType)throw new Error("Web operation sending data must have a defined contentType.");return r.contentType&&(r.headers=r.headers||{},r.headers["content-type"]=r.contentType),_t.setCredentials(a,r),new Promise(function(i,l){s._fetch(a,r).then(o=>{if(o.ok)(e==="PUT"||e==="PATCH"||e==="POST"||e==="DELETE")&&s.invalidateCache(a),o.text?o.text().then(u=>{o.responseText=u,i(o)}):i(o);else{let u="Web error: "+o.status;o.statusText&&(u+=" ("+o.statusText+")"),u+=" on "+e+" of <"+a+">",o.responseText&&(u+=": "+o.responseText);let c=new Error(u);c.response=o,l(c)}},o=>{let u="Fetch error for "+e+" of <"+a+">:"+o;l(new Error(u))})})}lookUpThing(e,t){let r=this.store.uris(e);return r=r.map(a=>tr(a)),r.forEach(a=>{this.lookedUp[a]=!0}),this.load(r,{referringTerm:t})}getHeader(e,t){const r=this.store,a=e.value,s=r.each(void 0,this.ns.link("requestedURI"),r.rdfFactory.literal(a));for(let i=0;i<s.length;i++){let l=s[i];if(l!==void 0){let o=r.any(l,this.ns.link("response"));if(o!==void 0&&r.anyValue(o,this.ns.http("status"))&&r.anyValue(o,this.ns.http("status")).startsWith("2")){let u=r.each(o,this.ns.httph(t.toLowerCase()));return u.length?u.map(c=>c.value):[]}}}}saveRequestMetadata(e,t){let r=t.req,a=this.store,s=t.referringTerm;this.addStatus(t.req,"Accept: "+t.headers.accept),Eo(s)&&a.add(a.rdfFactory.namedNode(e),this.ns.link("requestedBy"),s,this.appNode),t.original&&t.original.value!==e&&a.add(r,this.ns.link("orginalURI"),a.rdfFactory.literal(t.original.value),this.appNode);const i=new Date,l="["+i.getHours()+":"+i.getMinutes()+":"+i.getSeconds()+"] ";a.add(r,this.ns.rdfs("label"),a.rdfFactory.literal(l+" Request for "+e),this.appNode),a.add(r,this.ns.link("requestedURI"),a.rdfFactory.literal(e),this.appNode),a.add(r,this.ns.link("status"),a.collection(),this.appNode)}saveResponseMetadata(e,t){const r=this.store;let a=r.bnode();return r.add(t.req,this.ns.link("response"),a,this.appNode),r.add(a,this.ns.http("status"),r.rdfFactory.literal(e.status),this.appNode),r.add(a,this.ns.http("statusText"),r.rdfFactory.literal(e.statusText),this.appNode),e.headers.forEach((s,i)=>{r.add(a,this.ns.httph(i),this.store.rdfFactory.literal(s),this.appNode),i==="content-type"&&r.add(t.resource,this.ns.rdf("type"),r.rdfFactory.namedNode(Oh(s).value),this.appNode)}),a}objectRefresh(e){let t=this.store.uris(e);if(typeof t<"u")for(let r=0;r<t.length;r++)this.refresh(this.store.rdfFactory.namedNode(tr(t[r])))}refresh(e,t){this.fireCallbacks("refresh",arguments),this.nowOrWhenFetched(e,{force:!0,clearPreviousData:!0},t)}refreshIfExpired(e,t){let r=this.getHeader(e,"Expires");!r||new Date(r[0]).getTime()<=new Date().getTime()?this.refresh(e,t):t(!0,"Not expired",{})}retract(e){this.store.removeMany(void 0,void 0,void 0,e),e.value&&delete this.requested[tr(e.value)],this.fireCallbacks("retract",arguments)}getState(e){return typeof this.requested[e]>"u"?"unrequested":this.requested[e]===!0?"requested":this.requested[e]==="done"?"fetched":this.requested[e]==="redirected"?this.getState(this.redirectedTo[e]):"failed"}isPending(e){return this.requested[e]===!0}unload(e){this.store.removeDocument(e),delete this.requested[e.value]}addHandler(e){this.handlers.push(e),e.register(this)}retryNoCredentials(e,t){t.retriedWithNoCredentials=!0,delete this.requested[e],delete this.fetchQueue[e];let r=Object.assign({},t,{credentials:"omit"});return this.addStatus(t.req,"Abort: Will retry with credentials SUPPRESSED to see if that helps"),this.load(e,r)}isCrossSite(e){if(typeof document>"u"||!document.location)return!1;const t=Ch,r=""+document.location;return(t(r)&&t(e)&&t(r))!==t(e)}handleError(e,t,r){if(this.isCrossSite(t)){if(r.credentials&&r.credentials==="include"&&!r.retriedWithNoCredentials)return this.retryNoCredentials(t,r);let s=_t.crossSiteProxy(t);if(s&&!r.proxyUsed)return this.redirectToProxy(s,r)}var a;return e instanceof Error?a="Fetch error: "+e.message:(a=e.statusText,e.responseText&&(a+=` ${e.responseText}`)),this.failFetch(r,a,e.status||998,e)}addType(e,t,r,a){let s=t;if(a){var i=r.any(s,this.ns.link("requestedURI"));i&&i.value!==a&&r.add(r.rdfFactory.namedNode(a),this.ns.rdf("type"),e,this.appNode)}for(;;){const u=r.any(s,this.ns.link("requestedURI"));if(u&&u.value&&r.add(r.rdfFactory.namedNode(u.value),this.ns.rdf("type"),e,this.appNode),s=r.any(void 0,r.rdfFactory.namedNode("http://www.w3.org/2007/ont/link#redirectedRequest"),s),!s)break;var l=r.any(s,r.rdfFactory.namedNode("http://www.w3.org/2007/ont/link#response"));if(!l)break;var o=r.any(l,r.rdfFactory.namedNode("http://www.w3.org/2007/ont/http#status"));if(!o||o!=="301"&&o!=="302")break}}handleResponse(e,t,r){const a=this.store,s=e.headers,i=r.req,l=this.saveResponseMetadata(e,r),o=this.normalizedContentType(r,s)||"";let u=s.get("content-location");if(e.status===0)return this.handleError(e,t,r);if(e.status>=400)return e.status===404&&(this.nonexistent[r.original.value]=!0,this.nonexistent[t]=!0),this.saveErrorResponse(e,l).then(()=>{let g=r.resource+" "+e.statusText;return this.failFetch(r,g,e.status,e)});var c=null,f=null;if(u&&(f=Ft(u,t),f!==t&&(c=f)),e.status===200){if(this.addType(this.ns.link("Document"),i,a,t),c&&this.addType(this.ns.link("Document"),i,a,c),r.clearPreviousData){const m=a.statementsMatching(void 0,void 0,void 0,r.resource).slice();for(let v=0;v<m.length;v++)a.removeStatement(m[v])}let g=o.includes("image/")||o.includes("application/pdf");o&&g&&(this.addType(a.rdfFactory.namedNode("http://purl.org/dc/terms/Image"),i,a,t),c&&this.addType(a.rdfFactory.namedNode("http://purl.org/dc/terms/Image"),i,a,c))}if(u){if(!r.force&&c&&this.requested[f]==="done")return this.doneFetch(r,e);this.requested[f]=!0}this.parseLinkHeader(s.get("link"),r.original,i);let d=this.handlerForContentType(o,e);return d?e.text().then(g=>(e.responseText=g,d.parse(this,g,r,e))):(this.addStatus(i,"Fetch over. No data handled."),this.doneFetch(r,e))}saveErrorResponse(e,t){let r=this.store;return e.text().then(a=>{a.length>10&&r.add(t,this.ns.http("content"),r.rdfFactory.literal(a),t)})}handlerForContentType(e,t){if(!e)return null;let r=this.handlers.find(a=>e.match(a.pattern));return r?new r(t):null}guessContentType(e){return Xu[e.split(".").pop()]}normalizedContentType(e,t){if(e.forceContentType)return e.forceContentType;let r=t.get("content-type");if(!r||r.includes("application/octet-stream")){let s=this.guessContentType(e.resource.value);if(s)return s}let a=Ao(e.resource.value);return!r&&["file","chrome"].includes(a)?"text/xml":r}redirectToProxy(e,t){this.addStatus(t.req,"BLOCKED -> Cross-site Proxy to <"+e+">"),t.proxyUsed=!0;const r=this.store,a=t.req;t.noMeta||(r.add(a,this.ns.link("redirectedTo"),r.rdfFactory.namedNode(e),a),this.addStatus(a,"redirected to new request")),this.requested[t.resource.value]="redirected",this.redirectedTo[t.resource.value]=e;let s=Object.assign({},t);return s.baseURI=t.resource.value,this.fetchUri(e,s).then(i=>(s.noMeta||r.add(a,this.ns.link("redirectedRequest"),s.req,this.appNode),i))}setRequestTimeout(e,t){return new Promise(r=>{this.timeouts[e]=(this.timeouts[e]||[]).concat(setTimeout(()=>{this.isPending(e)&&!t.retriedWithNoCredentials&&!t.proxyUsed&&r(this.failFetch(t,`Request to ${e} timed out`,"timeout"))},this.timeout))})}addFetchCallback(e,t){this.fetchCallbacks[e]?this.fetchCallbacks[e].push(t):this.fetchCallbacks[e]=[t]}acceptString(){let e="";for(let t in this.mediatypes){e!==""&&(e+=", "),e+=t;for(let r in this.mediatypes[t])e+=";"+r+"="+this.mediatypes[t][r]}return e}}Re(_t,"HANDLERS",void 0),Re(_t,"CONTENT_TYPE_BY_EXT",void 0),Re(_t,"crossSiteProxyTemplate",void 0),_t.HANDLERS=Rs,_t.CONTENT_TYPE_BY_EXT=Xu;class Fp{constructor(e){if(Re(this,"store",void 0),Re(this,"ifps",void 0),Re(this,"fps",void 0),Re(this,"patchControl",void 0),Re(this,"ns",void 0),e=e||new Sn,e.updater)throw new Error("You can't have two UpdateManagers for the same store");e.fetcher||(e.fetcher=new _t(e)),this.store=e,e.updater=this,this.ifps={},this.fps={},this.ns={},this.ns.link=We("http://www.w3.org/2007/ont/link#"),this.ns.http=We("http://www.w3.org/2007/ont/http#"),this.ns.httph=We("http://www.w3.org/2007/ont/httph#"),this.ns.ldp=We("http://www.w3.org/ns/ldp#"),this.ns.rdf=We("http://www.w3.org/1999/02/22-rdf-syntax-ns#"),this.ns.rdfs=We("http://www.w3.org/2000/01/rdf-schema#"),this.ns.rdf=We("http://www.w3.org/1999/02/22-rdf-syntax-ns#"),this.ns.owl=We("http://www.w3.org/2002/07/owl#"),this.patchControl=[]}patchControlFor(e){return this.patchControl[e.value]||(this.patchControl[e.value]=[]),this.patchControl[e.value]}isHttpUri(e){return e.slice(0,4)==="http"}flagAuthorizationMetadata(e){e||(e=this.store);const t=e.fetcher?.appNode,r=e.statementsMatching(void 0,this.ns.link("requestedURI"),void 0,t).map(a=>a.subject);for(const a of r){const s=e.any(a,this.ns.link("response"),null,t);s!=null&&e.add(s,this.ns.link("outOfDate"),!0,t)}}async checkEditable(e,t){if(!e)return!1;t||(t=this.store);const r=this.editable(e,t);return r!==void 0?r:(await t.fetcher?.load(e),this.editable(e,t))}editable(e,t){if(!e)return!1;if(t||(t=this.store),e=er(e),!this.isHttpUri(e)&&t.holds(t.rdfFactory.namedNode(e),t.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),t.rdfFactory.namedNode("http://www.w3.org/2007/ont/link#MachineEditableDocument")))return"LOCALFILE";var r,a=!1;const s=t.fetcher?.appNode;for(var i=t.each(void 0,this.ns.link("requestedURI"),tr(e),s),l,o=0;o<i.length;o++)if(r=i[o],r!==void 0){const v=t.any(r,this.ns.link("response"),null,s);if(v!==void 0){if(t.anyJS(v,this.ns.link("outOfDate"),null,s))continue;var u=t.anyValue(v,this.ns.httph("wac-allow"));if(u)for(var c of u.split(",")){var f=c.split("=");if(f[0].includes("user")&&!f[1].includes("write")&&!f[1].includes("append"))return!1}var d=t.each(v,this.ns.httph("accept-patch"));if(d.length)for(let _=0;_<d.length;_++){if(l=d[_].value.trim(),l.indexOf("application/sparql-update")>=0||l.indexOf("application/sparql-update-single-match")>=0)return"SPARQL";if(l.indexOf("text/n3")>=0)return"N3PATCH"}var g=t.each(v,this.ns.httph("ms-author-via"));if(g.length)for(let _=0;_<g.length;_++){if(l=g[_].value.trim(),l.indexOf("SPARQL")>=0)return"SPARQL";if(l.indexOf("DAV")>=0)return"DAV"}if(!this.isHttpUri(e))return u?"LOCALFILE":!1;var m=t.each(v,this.ns.http("status"));if(m.length)for(let _=0;_<m.length;_++)(m[_]===200||m[_]===404)&&(a=!0)}}if(i.length!==0){if(a)return!1}}anonymize(e){return e.toNT().substr(0,2)==="_:"&&this.mentioned(e)?"?"+e.toNT().substr(2):e.toNT()}anonymizeNT(e){return this.anonymize(e.subject)+" "+this.anonymize(e.predicate)+" "+this.anonymize(e.object)+" ."}nTriples(e){return`${e.subject.toNT()} ${e.predicate.toNT()} ${e.object.toNT()} .`}statementBnodes(e){return[e.subject,e.predicate,e.object].filter(function(t){return Eh(t)})}statementArrayBnodes(e){var t=[];for(let a=0;a<e.length;a++)t=t.concat(this.statementBnodes(e[a]));t.sort();var r=[];for(let a=0;a<t.length;a++)(a===0||!t[a].equals(t[a-1]))&&r.push(t[a]);return r}cacheIfps(){this.ifps={};var e=this.store.each(void 0,this.ns.rdf("type"),this.ns.owl("InverseFunctionalProperty"));for(let t=0;t<e.length;t++)this.ifps[e[t].value]=!0;this.fps={},e=this.store.each(void 0,this.ns.rdf("type"),this.ns.owl("FunctionalProperty"));for(let t=0;t<e.length;t++)this.fps[e[t].value]=!0}bnodeContext2(e,t,r){var a=this.store.statementsMatching(void 0,void 0,e,t),s,i;for(let l=0;l<a.length;l++)if(this.fps[a[l].predicate.value]){if(s=a[l].subject,!s.isBlank)return[a[l]];if(r&&(i=this.bnodeContext2(s,t,r-1),i))return i.concat([a[l]])}a=this.store.statementsMatching(e,void 0,void 0,t);for(let l=0;l<a.length;l++)if(this.ifps[a[l].predicate.value]){if(s=a[l].object,!s.isBlank)return[a[l]];if(r&&(i=this.bnodeContext2(s,t,r-1),i))return i.concat([a[l]])}return null}bnodeContext1(e,t){for(var r=0;r<3;r++){var a=this.bnodeContext2(e,t,r);if(a!==null)return a}return this.store.connectedStatements(e,t)}mentioned(e){return this.store.statementsMatching(e,null,null,null).length!==0||this.store.statementsMatching(null,e).length!==0||this.store.statementsMatching(null,null,e).length!==0}bnodeContext(e,t){var r=[];if(e.length){this.cacheIfps();for(let s=0;s<e.length;s++){var a=e[s];this.mentioned(a)&&(r=r.concat(this.bnodeContext1(a,t)))}}return r}statementContext(e){var t=this.statementBnodes(e);return this.bnodeContext(t,e.graph)}contextWhere(e){var t=this;return!e||e.length===0?"":"WHERE { "+e.map(function(r){return t.anonymizeNT(r)}).join(`
`)+` }
`}fire(e,t,r,a={}){return Promise.resolve().then(()=>{if(!e)throw new Error("No URI given for remote editing operation: "+t);return a.noMeta=!0,a.contentType=a.contentType||"application/sparql-update",a.body=t,this.store.fetcher.webOperation("PATCH",e,a)}).then(s=>{if(!s.ok){let i="UpdateManager: update failed for <"+e+"> status="+s.status+", "+s.statusText+`
   for query: `+t;throw new Error(i)}r(e,s.ok,s.responseText,s)}).catch(s=>{r(e,!1,s.message,s)})}update_statement(e){if(!(e&&!e.graph)){var t=this,r=this.statementContext(e);return{statement:e?[e.subject,e.predicate,e.object,e.graph]:void 0,statementNT:e?this.anonymizeNT(e):void 0,where:t.contextWhere(r),set_object:function(a,s){var i=this.where;i+="DELETE DATA { "+this.statementNT+` } ;
`,i+="INSERT DATA { "+this.anonymize(this.statement[0])+" "+this.anonymize(this.statement[1])+" "+this.anonymize(a)+`  . }
`,t.fire(this.statement[3].value,i,s)}}}}insert_statement(e,t){var r=e instanceof Array?e[0]:e,a=this.contextWhere(this.statementContext(r));if(e instanceof Array){var s="";for(let i=0;i<e.length;i++)s+=e[i]+`
`;a+="INSERT DATA { "+s+` }
`}else a+="INSERT DATA { "+this.anonymize(e.subject)+" "+this.anonymize(e.predicate)+" "+this.anonymize(e.object)+`  . }
`;this.fire(r.graph.value,a,t)}delete_statement(e,t){var r=e instanceof Array?e[0]:e,a=this.contextWhere(this.statementContext(r));if(e instanceof Array){var s="";for(let i=0;i<e.length;i++)s+=e[i]+`
`;a+="DELETE DATA { "+s+` }
`}else a+="DELETE DATA { "+this.anonymize(e.subject)+" "+this.anonymize(e.predicate)+" "+this.anonymize(e.object)+`  . }
`;this.fire(r.graph.value,a,t)}requestDownstreamAction(e,t){var r=this.patchControlFor(e);if(!r.pendingUpstream)t(e);else if(r.downstreamAction){if(""+r.downstreamAction!=""+t)throw new Error("Can't wait for > 1 different downstream actions")}else r.downstreamAction=t}clearUpstreamCount(e){var t=this.patchControlFor(e);t.upstreamCount=0}getUpdatesVia(e){var t=this.store.fetcher.getHeader(e,"updates-via");return!t||!t.length?null:t[0].trim()}addDownstreamChangeListener(e,t){var r=this.patchControlFor(e);r.downstreamChangeListeners||(r.downstreamChangeListeners=[]),r.downstreamChangeListeners.push(t),this.setRefreshHandler(e,a=>{this.reloadAndSync(a)})}reloadAndSync(e){var t=this.patchControlFor(e),r=this;if(t.reloading){t.outOfDate=!0;return}t.reloading=!0;var a=1e3,s=function(){r.reload(r.store,e,function(i,l,o){if(i){if(t.downstreamChangeListeners)for(let u=0;u<t.downstreamChangeListeners.length;u++)t.downstreamChangeListeners[u]();t.reloading=!1,t.outOfDate&&(t.outOfDate=!1,s())}else t.reloading=!1,o&&o.status===0&&(t.reloading=!0,a=a*2,setTimeout(s,a))})};s()}setRefreshHandler(e,t){let r=this.getUpdatesVia(e);var a=t,s=this,i=this,l=1500,o=0;if(!r)return!1;r=Ft(r,e.value);const u=r.replace(/^http:/,"ws:").replace(/^https:/,"wss:");var c=function(){var f;if(typeof WebSocket<"u")f=new WebSocket(u);else if(typeof window<"u"&&window.WebSocket)f=window.WebSocket(u);else return;f.onopen=function(){l=1500,this.send("sub "+e.value),o&&i.requestDownstreamAction(e,a)};var d=s.patchControlFor(e);d.upstreamCount=0,f.onerror=function(m){},f.onclose=function(g){l*=2,o+=1,setTimeout(function(){c()},l)},f.onmessage=function(g){if(g.data&&g.data.slice(0,3)==="pub"){if("upstreamCount"in d&&(d.upstreamCount-=1,d.upstreamCount>=0))return;d.upstreamCount=0,s.requestDownstreamAction(e,a)}}};return c(),!0}updateMany(e,t=[]){const r=e.concat(t).map(l=>l.why),a=this,s=[];r.forEach(l=>{s.find(o=>o.equals(l))||s.push(l)});const i=s.map(l=>a.update(e.filter(o=>o.why.equals(l)),t.filter(o=>o.why.equals(l))));return Promise.all(i)}constructSparqlUpdateQuery(e,t,r){var a=this.contextWhere(r),s="";if(a.length){if(e.length){s+="DELETE { ";for(let i=0;i<e.length;i++)s+=this.anonymizeNT(e[i])+`
`;s+=` }
`}if(t.length){s+="INSERT { ";for(let i=0;i<t.length;i++)s+=this.anonymizeNT(t[i])+`
`;s+=` }
`}s+=a}else{if(e.length){s+="DELETE DATA { ";for(let i=0;i<e.length;i++)s+=this.anonymizeNT(e[i])+`
`;s+=` } 
`}if(t.length){e.length&&(s+=" ; "),s+="INSERT DATA { ";for(let i=0;i<t.length;i++)s+=this.nTriples(t[i])+`
`;s+=` }
`}}return s}constructN3PatchQuery(e,t,r){var a=`
@prefix solid: <http://www.w3.org/ns/solid/terms#>.
@prefix ex: <http://www.example.org/terms#>.

_:patch
`;return r&&r.length>0&&(a+=`
      solid:where {
        ${r.map(s=>this.anonymizeNT(s)).join(`
        `)}
      };`),e.length>0&&(a+=`
      solid:deletes {
        ${e.map(s=>this.anonymizeNT(s)).join(`
        `)}
      };`),t.length>0&&(a+=`
      solid:inserts {
        ${t.map(s=>this.anonymizeNT(s)).join(`
        `)}
      };`),a+=`   a solid:InsertDeletePatch .
`,a}update(e,t,r,a,s={}){if(!r){var i=this;return new Promise(function(p,S){i.update(e,t,function(F,A,k){A?p():S(new Error(k))},a,s)})}try{var l=this.store,o=e?Ci(e)?e.statements:e instanceof Array?e:[e]:[],u=t?Ci(t)?t.statements:t instanceof Array?t:[t]:[];if(!(o instanceof Array))throw new Error("Type Error "+typeof o+": "+o);if(!(u instanceof Array))throw new Error("Type Error "+typeof u+": "+u);if(o.length===0&&u.length===0)return r(null,!0);var c=o.length?o[0].graph:u[0].graph;if(!c){let p="Error patching: statement does not specify which document to patch:"+o[0]+", "+u[0];throw new Error(p)}if(c.termType!=="NamedNode"){let p="Error patching: document not a NamedNode:"+o[0]+", "+u[0];throw new Error(p)}var f=this.patchControlFor(c),d=Date.now(),g=["subject","predicate","object","why"],m=["insert","delete"],v={delete:o,insert:u};m.map(function(p){v[p].map(function(S){if(!c.equals(S.graph))throw new Error("update: destination "+c+" inconsistent with delete quad "+S.graph);g.map(function(F){if(typeof S[F]>"u")throw new Error("update: undefined "+F+" of statement.")})})});var b=this.editable(c.value,l);if(b===!1)throw new Error("Update: Can't make changes in uneditable "+c);if(b===void 0){if(a)throw new Error("Update: Loaded "+c+"but still can't figure out what editing protocol it supports.");this.store.fetcher.load(c).then(p=>{this.update(e,t,r,!0,s)},p=>{if(p.response.status===404)this.update(e,t,r,!0,s);else throw new Error(`Update: Can't get updatability status ${c} before patching: ${p}`)});return}else if(b.indexOf("SPARQL")>=0||b.indexOf("N3PATCH")>=0){var _=b.indexOf("SPARQL")>=0,N=[];o.length&&(N=this.statementArrayBnodes(o)),u.length&&(N=N.concat(this.statementArrayBnodes(u)));var E=this.bnodeContext(N,c),w=_?this.constructSparqlUpdateQuery(o,u,E):this.constructN3PatchQuery(o,u,E);s.contentType=_?"application/sparql-update":"text/n3",f.pendingUpstream=f.pendingUpstream?f.pendingUpstream+1:1,"upstreamCount"in f&&(f.upstreamCount+=1),this.fire(c.value,w,(p,S,F,A)=>{if(A.elapsedTimeMs=Date.now()-d,S){try{l.remove(o)}catch(C){S=!1,F="Remote Ok BUT error deleting "+o.length+" from store!!! "+C}for(let C=0;C<u.length;C++)l.add(u[C].subject,u[C].predicate,u[C].object,c)}if(r(p,S,F,A),f.pendingUpstream-=1,f.pendingUpstream===0&&f.downstreamAction){var k=f.downstreamAction;delete f.downstreamAction,k(c)}},s)}else if(b.indexOf("DAV")>=0)this.updateDav(c,o,u,r,s);else if(b.indexOf("LOCALFILE")>=0)try{this.updateLocalFile(c,o,u,r,s)}catch{r(c.value,!1,"Exception trying to write back file <"+c.value+`>
`)}else throw new Error("Unhandled edit method: '"+b+"' for "+c)}catch(p){r(void 0,!1,"Exception in update: "+p+`
`+Mh(p))}}updateDav(e,t,r,a,s={}){let i=this.store;var l=i.any(e,this.ns.link("request"));if(!l)throw new Error("No record of our HTTP GET request for document: "+e);var o=i.any(l,this.ns.link("response"));if(!o)return null;var u=i.the(o,this.ns.httph("content-type")).value;let c=i.statementsMatching(void 0,void 0,void 0,e).slice();for(let m=0;m<t.length;m++)Ua(c,t[m]);for(let m=0;m<r.length;m++)c.push(r[m]);const f=this.serialize(e.value,c,u);var d=i.the(o,this.ns.httph("content-location")),g;return d&&(g=Ft(d.value,g)),s.contentType=u,s.noMeta=!0,s.body=f,i.fetcher.webOperation("PUT",g,s).then(m=>{if(!m.ok)throw new Error(m.error);for(let v=0;v<t.length;v++)i.remove(t[v]);for(let v=0;v<r.length;v++)i.add(r[v].subject,r[v].predicate,r[v].object,e);a(e.value,m.ok,m.responseText,m)}).catch(m=>{a(e.value,!1,m.message,m)})}updateLocalFile(e,t,r,a,s={}){const i=this.store;let l=i.statementsMatching(void 0,void 0,void 0,e).slice();for(let f=0;f<t.length;f++)Ua(l,t[f]);for(let f=0;f<r.length;f++)l.push(r[f]);var o=e.value.lastIndexOf(".");if(o<1)throw new Error("Rewriting file: No filename extension: "+e.value);var u=e.value.slice(o+1);let c=_t.CONTENT_TYPE_BY_EXT[u];if(!c)throw new Error("File extension ."+u+" not supported for data write");s.body=this.serialize(e.value,l,c),s.contentType=c,i.fetcher.webOperation("PUT",e.value,s).then(f=>{if(!f.ok)return a(e.value,!1,f.error);for(let d=0;d<t.length;d++)i.remove(t[d]);for(let d=0;d<r.length;d++)i.add(r[d].subject,r[d].predicate,r[d].object,e);a(e.value,!0,"")})}serialize(e,t,r){const a=this.store;let s;if(typeof t=="string")return t;var i=$o(a);switch(i.suggestNamespaces(a.namespaces),i.setBase(e),r){case"text/xml":case"application/rdf+xml":s=i.statementsToXML(t);break;case"text/n3":case"text/turtle":case"application/x-turtle":case"application/n3":s=i.statementsToN3(t);break;default:throw new Error("Content-type "+r+" not supported for data serialization")}return s}put(e,t,r,a){const s=this.store;let i;return Promise.resolve().then(()=>(i=this.serialize(e.value,t,r),s.fetcher.webOperation("PUT",e.value,{contentType:r,body:i}))).then(l=>{if(!l.ok)return a(e.value,l.ok,l.error,l);delete s.fetcher.nonexistent[e.value],delete s.fetcher.requested[e.value],typeof t!="string"&&t.map(o=>{s.addStatement(o)}),a(e.value,l.ok,"",l)}).catch(l=>{a(e.value,!1,l.message)})}reload(e,t,r){var a=Date.now();const s={force:!0,noMeta:!0,clearPreviousData:!0};e.fetcher.nowOrWhenFetched(t.value,s,function(i,l,o){if(!i)r(!1,"Error reloading data: "+l,o);else if(o.onErrorWasCalled||o.status!==200)r(!1,"Non-HTTP error reloading data: "+l,o);else{var u=Date.now()-a;t.reloadTimeTotal||(t.reloadTimeTotal=0),t.reloadTimeCount||(t.reloadTimeCount=0),t.reloadTimeTotal+=u,t.reloadTimeCount+=1,r(!0)}})}}const zi={...Xa,fetcher(n,e){return new _t(n,e)},graph(n=void 0,e=void 0){return new Sn(n,e||{rdfFactory:Xa})},lit(n,e,t){return this.literal(""+n,e||t)},st(n,e,t,r){return this.quad(n,e,t,r)}},rc={};for(const n in zi)typeof zi[n]=="function"&&(rc[n]=zi[n].bind(zi));const{graph:Bp,lit:ic,namedNode:or}=rc;new Yr,lt.fromValue,sn.nextId;function ac(n){const e=Bp(),t={};n?.fetch&&(t.fetch=n.fetch);const r=new _t(e,t);e.updater=new Fp(e);async function a(s){const i=s.replace(/#.*$/,""),l=or(i);return await r.load(l),l}return{store:e,fetcher:r,fetchDocument:a}}const Gi=[];function Qe(n){Gi.push(n)}function ks(n,e){const t=[];for(let r=Gi.length-1;r>=0;r--)try{Gi[r].canHandle(n,e)&&t.push(Gi[r])}catch{}return t}const Ji=new TextEncoder,kr=new TextDecoder;function sc(...n){const e=n.reduce((a,{length:s})=>a+s,0),t=new Uint8Array(e);let r=0;for(const a of n)t.set(a,r),r+=a.length;return t}function ur(n){const e=new Uint8Array(n.length);for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);if(r>127)throw new TypeError("non-ASCII string encountered in encode()");e[t]=r}return e}function Pp(n){if(Uint8Array.prototype.toBase64)return n.toBase64();const e=32768,t=[];for(let r=0;r<n.length;r+=e)t.push(String.fromCharCode.apply(null,n.subarray(r,r+e)));return btoa(t.join(""))}function Mp(n){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(n);const e=atob(n),t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}function Lr(n){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(typeof n=="string"?n:kr.decode(n),{alphabet:"base64url"});let e=n;e instanceof Uint8Array&&(e=kr.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/");try{return Mp(e)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}}function ci(n){let e=n;return typeof e=="string"&&(e=Ji.encode(e)),Uint8Array.prototype.toBase64?e.toBase64({alphabet:"base64url",omitPadding:!0}):Pp(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}class Mt extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(e,t){super(e,t),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class cn extends Mt{static code="ERR_JWT_CLAIM_VALIDATION_FAILED";code="ERR_JWT_CLAIM_VALIDATION_FAILED";claim;reason;payload;constructor(e,t,r="unspecified",a="unspecified"){super(e,{cause:{claim:r,reason:a,payload:t}}),this.claim=r,this.reason=a,this.payload=t}}class lc extends Mt{static code="ERR_JWT_EXPIRED";code="ERR_JWT_EXPIRED";claim;reason;payload;constructor(e,t,r="unspecified",a="unspecified"){super(e,{cause:{claim:r,reason:a,payload:t}}),this.claim=r,this.reason=a,this.payload=t}}class Up extends Mt{static code="ERR_JOSE_ALG_NOT_ALLOWED";code="ERR_JOSE_ALG_NOT_ALLOWED"}class Ut extends Mt{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"}class yt extends Mt{static code="ERR_JWS_INVALID";code="ERR_JWS_INVALID"}class dn extends Mt{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}class $p extends Mt{static code="ERR_JWK_INVALID";code="ERR_JWK_INVALID"}class oc extends Mt{static code="ERR_JWKS_INVALID";code="ERR_JWKS_INVALID"}class uc extends Mt{static code="ERR_JWKS_NO_MATCHING_KEY";code="ERR_JWKS_NO_MATCHING_KEY";constructor(e="no applicable key found in the JSON Web Key Set",t){super(e,t)}}class qp extends Mt{[Symbol.asyncIterator];static code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";constructor(e="multiple matching keys found in the JSON Web Key Set",t){super(e,t)}}class jp extends Mt{static code="ERR_JWKS_TIMEOUT";code="ERR_JWKS_TIMEOUT";constructor(e="request timed out",t){super(e,t)}}class Hp extends Mt{static code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";constructor(e="signature verification failed",t){super(e,t)}}const fn=(n,e="algorithm.name")=>new TypeError(`CryptoKey does not support this operation, its ${e} must be ${n}`),Or=(n,e)=>n.name===e;function Ls(n){return parseInt(n.name.slice(4),10)}function Wp(n){switch(n){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function Vp(n,e){if(e&&!n.usages.includes(e))throw new TypeError(`CryptoKey does not support this operation, its usages must include ${e}.`)}function zp(n,e,t){switch(e){case"HS256":case"HS384":case"HS512":{if(!Or(n.algorithm,"HMAC"))throw fn("HMAC");const r=parseInt(e.slice(2),10);if(Ls(n.algorithm.hash)!==r)throw fn(`SHA-${r}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!Or(n.algorithm,"RSASSA-PKCS1-v1_5"))throw fn("RSASSA-PKCS1-v1_5");const r=parseInt(e.slice(2),10);if(Ls(n.algorithm.hash)!==r)throw fn(`SHA-${r}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!Or(n.algorithm,"RSA-PSS"))throw fn("RSA-PSS");const r=parseInt(e.slice(2),10);if(Ls(n.algorithm.hash)!==r)throw fn(`SHA-${r}`,"algorithm.hash");break}case"Ed25519":case"EdDSA":{if(!Or(n.algorithm,"Ed25519"))throw fn("Ed25519");break}case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":{if(!Or(n.algorithm,e))throw fn(e);break}case"ES256":case"ES384":case"ES512":{if(!Or(n.algorithm,"ECDSA"))throw fn("ECDSA");const r=Wp(e);if(n.algorithm.namedCurve!==r)throw fn(r,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}Vp(n,t)}function cc(n,e,...t){if(t=t.filter(Boolean),t.length>2){const r=t.pop();n+=`one of type ${t.join(", ")}, or ${r}.`}else t.length===2?n+=`one of type ${t[0]} or ${t[1]}.`:n+=`of type ${t[0]}.`;return e==null?n+=` Received ${e}`:typeof e=="function"&&e.name?n+=` Received function ${e.name}`:typeof e=="object"&&e!=null&&e.constructor?.name&&(n+=` Received an instance of ${e.constructor.name}`),n}const Os=(n,...e)=>cc("Key must be ",n,...e),dc=(n,e,...t)=>cc(`Key for the ${n} algorithm must be `,e,...t),Fs=n=>{if(n?.[Symbol.toStringTag]==="CryptoKey")return!0;try{return n instanceof CryptoKey}catch{return!1}},Bs=n=>n?.[Symbol.toStringTag]==="KeyObject",Ps=n=>Fs(n)||Bs(n);function fc(...n){const e=n.filter(Boolean);if(e.length===0||e.length===1)return!0;let t;for(const r of e){const a=Object.keys(r);if(!t||t.size===0){t=new Set(a);continue}for(const s of a){if(t.has(s))return!1;t.add(s)}}return!0}const Gp=n=>typeof n=="object"&&n!==null;function hn(n){if(!Gp(n)||Object.prototype.toString.call(n)!=="[object Object]")return!1;if(Object.getPrototypeOf(n)===null)return!0;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e}async function Jp(n,e){const t=`SHA-${n.slice(-3)}`;return new Uint8Array(await crypto.subtle.digest(t,e))}function hc(n,e){if(n.startsWith("RS")||n.startsWith("PS")){const{modulusLength:t}=e.algorithm;if(typeof t!="number"||t<2048)throw new TypeError(`${n} requires key modulusLength to be 2048 bits or larger`)}}function Kp(n){let e,t;switch(n.kty){case"AKP":{switch(n.alg){case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":e={name:n.alg},t=n.priv?["sign"]:["verify"];break;default:throw new Ut('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"RSA":{switch(n.alg){case"PS256":case"PS384":case"PS512":e={name:"RSA-PSS",hash:`SHA-${n.alg.slice(-3)}`},t=n.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":e={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${n.alg.slice(-3)}`},t=n.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":e={name:"RSA-OAEP",hash:`SHA-${parseInt(n.alg.slice(-3),10)||1}`},t=n.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new Ut('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(n.alg){case"ES256":e={name:"ECDSA",namedCurve:"P-256"},t=n.d?["sign"]:["verify"];break;case"ES384":e={name:"ECDSA",namedCurve:"P-384"},t=n.d?["sign"]:["verify"];break;case"ES512":e={name:"ECDSA",namedCurve:"P-521"},t=n.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:"ECDH",namedCurve:n.crv},t=n.d?["deriveBits"]:[];break;default:throw new Ut('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(n.alg){case"Ed25519":case"EdDSA":e={name:"Ed25519"},t=n.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:n.crv},t=n.d?["deriveBits"]:[];break;default:throw new Ut('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new Ut('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:e,keyUsages:t}}async function Ki(n){if(!n.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm:e,keyUsages:t}=Kp(n),r={...n};return r.kty!=="AKP"&&delete r.alg,delete r.use,crypto.subtle.importKey("jwk",r,e,n.ext??!(n.d||n.priv),n.key_ops??t)}async function Xp(n,e,t){if(!hn(n))throw new TypeError("JWK must be an object");let r;switch(e??=n.alg,r??=n.ext,n.kty){case"oct":if(typeof n.k!="string"||!n.k)throw new TypeError('missing "k" (Key Value) Parameter value');return Lr(n.k);case"RSA":if("oth"in n&&n.oth!==void 0)throw new Ut('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');return Ki({...n,alg:e,ext:r});case"AKP":{if(typeof n.alg!="string"||!n.alg)throw new TypeError('missing "alg" (Algorithm) Parameter value');if(e!==void 0&&e!==n.alg)throw new TypeError("JWK alg and alg option value mismatch");return Ki({...n,ext:r})}case"EC":case"OKP":return Ki({...n,alg:e,ext:r});default:throw new Ut('Unsupported "kty" (Key Type) Parameter value')}}function pc(n,e,t,r,a){if(a.crit!==void 0&&r?.crit===void 0)throw new n('"crit" (Critical) Header Parameter MUST be integrity protected');if(!r||r.crit===void 0)return new Set;if(!Array.isArray(r.crit)||r.crit.length===0||r.crit.some(i=>typeof i!="string"||i.length===0))throw new n('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let s;t!==void 0?s=new Map([...Object.entries(t),...e.entries()]):s=e;for(const i of r.crit){if(!s.has(i))throw new Ut(`Extension Header Parameter "${i}" is not recognized`);if(a[i]===void 0)throw new n(`Extension Header Parameter "${i}" is missing`);if(s.get(i)&&r[i]===void 0)throw new n(`Extension Header Parameter "${i}" MUST be integrity protected`)}return new Set(r.crit)}function Qp(n,e){if(e!==void 0&&(!Array.isArray(e)||e.some(t=>typeof t!="string")))throw new TypeError(`"${n}" option must be an array of strings`);if(e)return new Set(e)}const Xi=n=>hn(n)&&typeof n.kty=="string",Yp=n=>n.kty!=="oct"&&(n.kty==="AKP"&&typeof n.priv=="string"||typeof n.d=="string"),Zp=n=>n.kty!=="oct"&&n.d===void 0&&n.priv===void 0,em=n=>n.kty==="oct"&&typeof n.k=="string";let Fr;const mc=async(n,e,t,r=!1)=>{Fr||=new WeakMap;let a=Fr.get(n);if(a?.[t])return a[t];const s=await Ki({...e,alg:t});return r&&Object.freeze(n),a?a[t]=s:Fr.set(n,{[t]:s}),s},tm=(n,e)=>{Fr||=new WeakMap;let t=Fr.get(n);if(t?.[e])return t[e];const r=n.type==="public",a=!!r;let s;if(n.asymmetricKeyType==="x25519"){switch(e){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}s=n.toCryptoKey(n.asymmetricKeyType,a,r?[]:["deriveBits"])}if(n.asymmetricKeyType==="ed25519"){if(e!=="EdDSA"&&e!=="Ed25519")throw new TypeError("given KeyObject instance cannot be used for this algorithm");s=n.toCryptoKey(n.asymmetricKeyType,a,[r?"verify":"sign"])}switch(n.asymmetricKeyType){case"ml-dsa-44":case"ml-dsa-65":case"ml-dsa-87":{if(e!==n.asymmetricKeyType.toUpperCase())throw new TypeError("given KeyObject instance cannot be used for this algorithm");s=n.toCryptoKey(n.asymmetricKeyType,a,[r?"verify":"sign"])}}if(n.asymmetricKeyType==="rsa"){let i;switch(e){case"RSA-OAEP":i="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":i="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":i="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":i="SHA-512";break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}if(e.startsWith("RSA-OAEP"))return n.toCryptoKey({name:"RSA-OAEP",hash:i},a,r?["encrypt"]:["decrypt"]);s=n.toCryptoKey({name:e.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:i},a,[r?"verify":"sign"])}if(n.asymmetricKeyType==="ec"){const l=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get(n.asymmetricKeyDetails?.namedCurve);if(!l)throw new TypeError("given KeyObject instance cannot be used for this algorithm");e==="ES256"&&l==="P-256"&&(s=n.toCryptoKey({name:"ECDSA",namedCurve:l},a,[r?"verify":"sign"])),e==="ES384"&&l==="P-384"&&(s=n.toCryptoKey({name:"ECDSA",namedCurve:l},a,[r?"verify":"sign"])),e==="ES512"&&l==="P-521"&&(s=n.toCryptoKey({name:"ECDSA",namedCurve:l},a,[r?"verify":"sign"])),e.startsWith("ECDH-ES")&&(s=n.toCryptoKey({name:"ECDH",namedCurve:l},a,r?[]:["deriveBits"]))}if(!s)throw new TypeError("given KeyObject instance cannot be used for this algorithm");return t?t[e]=s:Fr.set(n,{[e]:s}),s};async function gc(n,e){if(n instanceof Uint8Array||Fs(n))return n;if(Bs(n)){if(n.type==="secret")return n.export();if("toCryptoKey"in n&&typeof n.toCryptoKey=="function")try{return tm(n,e)}catch(r){if(r instanceof TypeError)throw r}let t=n.export({format:"jwk"});return mc(n,t,e)}if(Xi(n))return n.k?Lr(n.k):mc(n,n,e,!0);throw new Error("unreachable")}const Br=n=>n?.[Symbol.toStringTag],Ms=(n,e,t)=>{if(e.use!==void 0){let r;switch(t){case"sign":case"verify":r="sig";break;case"encrypt":case"decrypt":r="enc";break}if(e.use!==r)throw new TypeError(`Invalid key for this operation, its "use" must be "${r}" when present`)}if(e.alg!==void 0&&e.alg!==n)throw new TypeError(`Invalid key for this operation, its "alg" must be "${n}" when present`);if(Array.isArray(e.key_ops)){let r;switch(!0){case(t==="sign"||t==="verify"):case n==="dir":case n.includes("CBC-HS"):r=t;break;case n.startsWith("PBES2"):r="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(n):!n.includes("GCM")&&n.endsWith("KW")?r=t==="encrypt"?"wrapKey":"unwrapKey":r=t;break;case(t==="encrypt"&&n.startsWith("RSA")):r="wrapKey";break;case t==="decrypt":r=n.startsWith("RSA")?"unwrapKey":"deriveBits";break}if(r&&e.key_ops?.includes?.(r)===!1)throw new TypeError(`Invalid key for this operation, its "key_ops" must include "${r}" when present`)}return!0},nm=(n,e,t)=>{if(!(e instanceof Uint8Array)){if(Xi(e)){if(em(e)&&Ms(n,e,t))return;throw new TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!Ps(e))throw new TypeError(dc(n,e,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if(e.type!=="secret")throw new TypeError(`${Br(e)} instances for symmetric algorithms must be of type "secret"`)}},rm=(n,e,t)=>{if(Xi(e))switch(t){case"decrypt":case"sign":if(Yp(e)&&Ms(n,e,t))return;throw new TypeError("JSON Web Key for this operation must be a private JWK");case"encrypt":case"verify":if(Zp(e)&&Ms(n,e,t))return;throw new TypeError("JSON Web Key for this operation must be a public JWK")}if(!Ps(e))throw new TypeError(dc(n,e,"CryptoKey","KeyObject","JSON Web Key"));if(e.type==="secret")throw new TypeError(`${Br(e)} instances for asymmetric algorithms must not be of type "secret"`);if(e.type==="public")switch(t){case"sign":throw new TypeError(`${Br(e)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw new TypeError(`${Br(e)} instances for asymmetric algorithm decryption must be of type "private"`)}if(e.type==="private")switch(t){case"verify":throw new TypeError(`${Br(e)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw new TypeError(`${Br(e)} instances for asymmetric algorithm encryption must be of type "public"`)}};function yc(n,e,t){switch(n.substring(0,2)){case"A1":case"A2":case"di":case"HS":case"PB":nm(n,e,t);break;default:rm(n,e,t)}}async function im(n){if(Bs(n))if(n.type==="secret")n=n.export();else return n.export({format:"jwk"});if(n instanceof Uint8Array)return{kty:"oct",k:ci(n)};if(!Fs(n))throw new TypeError(Os(n,"CryptoKey","KeyObject","Uint8Array"));if(!n.extractable)throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");const{ext:e,key_ops:t,alg:r,use:a,...s}=await crypto.subtle.exportKey("jwk",n);return s.kty==="AKP"&&(s.alg=r),s}async function Us(n){return im(n)}function wc(n,e){const t=`SHA-${n.slice(-3)}`;switch(n){case"HS256":case"HS384":case"HS512":return{hash:t,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:t,name:"RSA-PSS",saltLength:parseInt(n.slice(-3),10)>>3};case"RS256":case"RS384":case"RS512":return{hash:t,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:t,name:"ECDSA",namedCurve:e.namedCurve};case"Ed25519":case"EdDSA":return{name:"Ed25519"};case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":return{name:n};default:throw new Ut(`alg ${n} is not supported either by JOSE or your javascript runtime`)}}async function vc(n,e,t){if(e instanceof Uint8Array){if(!n.startsWith("HS"))throw new TypeError(Os(e,"CryptoKey","KeyObject","JSON Web Key"));return crypto.subtle.importKey("raw",e,{hash:`SHA-${n.slice(-3)}`,name:"HMAC"},!1,[t])}return zp(e,n,t),e}async function am(n,e,t,r){const a=await vc(n,e,"verify");hc(n,a);const s=wc(n,a.algorithm);try{return await crypto.subtle.verify(s,a,t,r)}catch{return!1}}async function sm(n,e,t){if(!hn(n))throw new yt("Flattened JWS must be an object");if(n.protected===void 0&&n.header===void 0)throw new yt('Flattened JWS must have either of the "protected" or "header" members');if(n.protected!==void 0&&typeof n.protected!="string")throw new yt("JWS Protected Header incorrect type");if(n.payload===void 0)throw new yt("JWS Payload missing");if(typeof n.signature!="string")throw new yt("JWS Signature missing or incorrect type");if(n.header!==void 0&&!hn(n.header))throw new yt("JWS Unprotected Header incorrect type");let r={};if(n.protected)try{const b=Lr(n.protected);r=JSON.parse(kr.decode(b))}catch{throw new yt("JWS Protected Header is invalid")}if(!fc(r,n.header))throw new yt("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const a={...r,...n.header},s=pc(yt,new Map([["b64",!0]]),t?.crit,r,a);let i=!0;if(s.has("b64")&&(i=r.b64,typeof i!="boolean"))throw new yt('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:l}=a;if(typeof l!="string"||!l)throw new yt('JWS "alg" (Algorithm) Header Parameter missing or invalid');const o=t&&Qp("algorithms",t.algorithms);if(o&&!o.has(l))throw new Up('"alg" (Algorithm) Header Parameter value not allowed');if(i){if(typeof n.payload!="string")throw new yt("JWS Payload must be a string")}else if(typeof n.payload!="string"&&!(n.payload instanceof Uint8Array))throw new yt("JWS Payload must be a string or an Uint8Array instance");let u=!1;typeof e=="function"&&(e=await e(r,n),u=!0),yc(l,e,"verify");const c=sc(n.protected!==void 0?ur(n.protected):new Uint8Array,ur("."),typeof n.payload=="string"?i?ur(n.payload):Ji.encode(n.payload):n.payload);let f;try{f=Lr(n.signature)}catch{throw new yt("Failed to base64url decode the signature")}const d=await gc(e,l);if(!await am(l,d,f,c))throw new Hp;let m;if(i)try{m=Lr(n.payload)}catch{throw new yt("Failed to base64url decode the payload")}else typeof n.payload=="string"?m=Ji.encode(n.payload):m=n.payload;const v={payload:m};return n.protected!==void 0&&(v.protectedHeader=r),n.header!==void 0&&(v.unprotectedHeader=n.header),u?{...v,key:d}:v}async function lm(n,e,t){if(n instanceof Uint8Array&&(n=kr.decode(n)),typeof n!="string")throw new yt("Compact JWS must be a string or Uint8Array");const{0:r,1:a,2:s,length:i}=n.split(".");if(i!==3)throw new yt("Invalid Compact JWS");const l=await sm({payload:a,protected:r,signature:s},e,t),o={payload:l.payload,protectedHeader:l.protectedHeader};return typeof e=="function"?{...o,key:l.key}:o}const Vn=n=>Math.floor(n.getTime()/1e3),bc=60,Ec=bc*60,$s=Ec*24,om=$s*7,um=$s*365.25,cm=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i;function di(n){const e=cm.exec(n);if(!e||e[4]&&e[1])throw new TypeError("Invalid time period format");const t=parseFloat(e[2]),r=e[3].toLowerCase();let a;switch(r){case"sec":case"secs":case"second":case"seconds":case"s":a=Math.round(t);break;case"minute":case"minutes":case"min":case"mins":case"m":a=Math.round(t*bc);break;case"hour":case"hours":case"hr":case"hrs":case"h":a=Math.round(t*Ec);break;case"day":case"days":case"d":a=Math.round(t*$s);break;case"week":case"weeks":case"w":a=Math.round(t*om);break;default:a=Math.round(t*um);break}return e[1]==="-"||e[4]==="ago"?-a:a}function cr(n,e){if(!Number.isFinite(e))throw new TypeError(`Invalid ${n} input`);return e}const xc=n=>n.includes("/")?n.toLowerCase():`application/${n.toLowerCase()}`,dm=(n,e)=>typeof n=="string"?e.includes(n):Array.isArray(n)?e.some(Set.prototype.has.bind(new Set(n))):!1;function fm(n,e,t={}){let r;try{r=JSON.parse(kr.decode(e))}catch{}if(!hn(r))throw new dn("JWT Claims Set must be a top-level JSON object");const{typ:a}=t;if(a&&(typeof n.typ!="string"||xc(n.typ)!==xc(a)))throw new cn('unexpected "typ" JWT header value',r,"typ","check_failed");const{requiredClaims:s=[],issuer:i,subject:l,audience:o,maxTokenAge:u}=t,c=[...s];u!==void 0&&c.push("iat"),o!==void 0&&c.push("aud"),l!==void 0&&c.push("sub"),i!==void 0&&c.push("iss");for(const m of new Set(c.reverse()))if(!(m in r))throw new cn(`missing required "${m}" claim`,r,m,"missing");if(i&&!(Array.isArray(i)?i:[i]).includes(r.iss))throw new cn('unexpected "iss" claim value',r,"iss","check_failed");if(l&&r.sub!==l)throw new cn('unexpected "sub" claim value',r,"sub","check_failed");if(o&&!dm(r.aud,typeof o=="string"?[o]:o))throw new cn('unexpected "aud" claim value',r,"aud","check_failed");let f;switch(typeof t.clockTolerance){case"string":f=di(t.clockTolerance);break;case"number":f=t.clockTolerance;break;case"undefined":f=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate:d}=t,g=Vn(d||new Date);if((r.iat!==void 0||u)&&typeof r.iat!="number")throw new cn('"iat" claim must be a number',r,"iat","invalid");if(r.nbf!==void 0){if(typeof r.nbf!="number")throw new cn('"nbf" claim must be a number',r,"nbf","invalid");if(r.nbf>g+f)throw new cn('"nbf" claim timestamp check failed',r,"nbf","check_failed")}if(r.exp!==void 0){if(typeof r.exp!="number")throw new cn('"exp" claim must be a number',r,"exp","invalid");if(r.exp<=g-f)throw new lc('"exp" claim timestamp check failed',r,"exp","check_failed")}if(u){const m=g-r.iat,v=typeof u=="number"?u:di(u);if(m-f>v)throw new lc('"iat" claim timestamp check failed (too far in the past)',r,"iat","check_failed");if(m<0-f)throw new cn('"iat" claim timestamp check failed (it should be in the past)',r,"iat","check_failed")}return r}class hm{#e;constructor(e){if(!hn(e))throw new TypeError("JWT Claims Set MUST be an object");this.#e=structuredClone(e)}data(){return Ji.encode(JSON.stringify(this.#e))}get iss(){return this.#e.iss}set iss(e){this.#e.iss=e}get sub(){return this.#e.sub}set sub(e){this.#e.sub=e}get aud(){return this.#e.aud}set aud(e){this.#e.aud=e}set jti(e){this.#e.jti=e}set nbf(e){typeof e=="number"?this.#e.nbf=cr("setNotBefore",e):e instanceof Date?this.#e.nbf=cr("setNotBefore",Vn(e)):this.#e.nbf=Vn(new Date)+di(e)}set exp(e){typeof e=="number"?this.#e.exp=cr("setExpirationTime",e):e instanceof Date?this.#e.exp=cr("setExpirationTime",Vn(e)):this.#e.exp=Vn(new Date)+di(e)}set iat(e){e===void 0?this.#e.iat=Vn(new Date):e instanceof Date?this.#e.iat=cr("setIssuedAt",Vn(e)):typeof e=="string"?this.#e.iat=cr("setIssuedAt",Vn(new Date)+di(e)):this.#e.iat=cr("setIssuedAt",e)}}async function pm(n,e,t){const r=await lm(n,e,t);if(r.protectedHeader.crit?.includes("b64")&&r.protectedHeader.b64===!1)throw new dn("JWTs MUST NOT use unencoded payload");const s={payload:fm(r.protectedHeader,r.payload,t),protectedHeader:r.protectedHeader};return typeof e=="function"?{...s,key:r.key}:s}async function mm(n,e,t){const r=await vc(n,e,"sign");hc(n,r);const a=await crypto.subtle.sign(wc(n,r.algorithm),r,t);return new Uint8Array(a)}class gm{#e;#t;#n;constructor(e){if(!(e instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this.#e=e}setProtectedHeader(e){if(this.#t)throw new TypeError("setProtectedHeader can only be called once");return this.#t=e,this}setUnprotectedHeader(e){if(this.#n)throw new TypeError("setUnprotectedHeader can only be called once");return this.#n=e,this}async sign(e,t){if(!this.#t&&!this.#n)throw new yt("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!fc(this.#t,this.#n))throw new yt("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const r={...this.#t,...this.#n},a=pc(yt,new Map([["b64",!0]]),t?.crit,this.#t,r);let s=!0;if(a.has("b64")&&(s=this.#t.b64,typeof s!="boolean"))throw new yt('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:i}=r;if(typeof i!="string"||!i)throw new yt('JWS "alg" (Algorithm) Header Parameter missing or invalid');yc(i,e,"sign");let l,o;s?(l=ci(this.#e),o=ur(l)):(o=this.#e,l="");let u,c;this.#t?(u=ci(JSON.stringify(this.#t)),c=ur(u)):(u="",c=new Uint8Array);const f=sc(c,ur("."),o),d=await gc(e,i),g=await mm(i,d,f),m={signature:ci(g),payload:l};return this.#n&&(m.header=this.#n),this.#t&&(m.protected=u),m}}class ym{#e;constructor(e){this.#e=new gm(e)}setProtectedHeader(e){return this.#e.setProtectedHeader(e),this}async sign(e,t){const r=await this.#e.sign(e,t);if(r.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${r.protected}.${r.payload}.${r.signature}`}}class wm{#e;#t;constructor(e={}){this.#t=new hm(e)}setIssuer(e){return this.#t.iss=e,this}setSubject(e){return this.#t.sub=e,this}setAudience(e){return this.#t.aud=e,this}setJti(e){return this.#t.jti=e,this}setNotBefore(e){return this.#t.nbf=e,this}setExpirationTime(e){return this.#t.exp=e,this}setIssuedAt(e){return this.#t.iat=e,this}setProtectedHeader(e){return this.#e=e,this}async sign(e,t){const r=new ym(this.#t.data());if(r.setProtectedHeader(this.#e),Array.isArray(this.#e?.crit)&&this.#e.crit.includes("b64")&&this.#e.b64===!1)throw new dn("JWTs MUST NOT use unencoded payload");return r.sign(e,t)}}const pn=(n,e)=>{if(typeof n!="string"||!n)throw new $p(`${e} missing or invalid`)};async function vm(n,e){let t;if(Xi(n))t=n;else if(Ps(n))t=await Us(n);else throw new TypeError(Os(n,"CryptoKey","KeyObject","JSON Web Key"));if(e??="sha256",e!=="sha256"&&e!=="sha384"&&e!=="sha512")throw new TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');let r;switch(t.kty){case"AKP":pn(t.alg,'"alg" (Algorithm) Parameter'),pn(t.pub,'"pub" (Public key) Parameter'),r={alg:t.alg,kty:t.kty,pub:t.pub};break;case"EC":pn(t.crv,'"crv" (Curve) Parameter'),pn(t.x,'"x" (X Coordinate) Parameter'),pn(t.y,'"y" (Y Coordinate) Parameter'),r={crv:t.crv,kty:t.kty,x:t.x,y:t.y};break;case"OKP":pn(t.crv,'"crv" (Subtype of Key Pair) Parameter'),pn(t.x,'"x" (Public Key) Parameter'),r={crv:t.crv,kty:t.kty,x:t.x};break;case"RSA":pn(t.e,'"e" (Exponent) Parameter'),pn(t.n,'"n" (Modulus) Parameter'),r={e:t.e,kty:t.kty,n:t.n};break;case"oct":pn(t.k,'"k" (Key Value) Parameter'),r={k:t.k,kty:t.kty};break;default:throw new Ut('"kty" (Key Type) Parameter missing or unsupported')}const a=ur(JSON.stringify(r));return ci(await Jp(e,a))}function bm(n){switch(typeof n=="string"&&n.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";case"ML":return"AKP";default:throw new Ut('Unsupported "alg" value for a JSON Web Key Set')}}function Em(n){return n&&typeof n=="object"&&Array.isArray(n.keys)&&n.keys.every(xm)}function xm(n){return hn(n)}class _m{#e;#t=new WeakMap;constructor(e){if(!Em(e))throw new oc("JSON Web Key Set malformed");this.#e=structuredClone(e)}jwks(){return this.#e}async getKey(e,t){const{alg:r,kid:a}={...e,...t?.header},s=bm(r),i=this.#e.keys.filter(u=>{let c=s===u.kty;if(c&&typeof a=="string"&&(c=a===u.kid),c&&(typeof u.alg=="string"||s==="AKP")&&(c=r===u.alg),c&&typeof u.use=="string"&&(c=u.use==="sig"),c&&Array.isArray(u.key_ops)&&(c=u.key_ops.includes("verify")),c)switch(r){case"ES256":c=u.crv==="P-256";break;case"ES384":c=u.crv==="P-384";break;case"ES512":c=u.crv==="P-521";break;case"Ed25519":case"EdDSA":c=u.crv==="Ed25519";break}return c}),{0:l,length:o}=i;if(o===0)throw new uc;if(o!==1){const u=new qp,c=this.#t;throw u[Symbol.asyncIterator]=async function*(){for(const f of i)try{yield await _c(c,f,r)}catch{}},u}return _c(this.#t,l,r)}}async function _c(n,e,t){const r=n.get(e)||n.set(e,{}).get(e);if(r[t]===void 0){const a=await Xp({...e,ext:!0},t);if(a instanceof Uint8Array||a.type!=="public")throw new oc("JSON Web Key Set members must be public keys");r[t]=a}return r[t]}function Cc(n){const e=new _m(n),t=async(r,a)=>e.getKey(r,a);return Object.defineProperties(t,{jwks:{value:()=>structuredClone(e.jwks()),enumerable:!1,configurable:!1,writable:!1}}),t}function Cm(){return typeof WebSocketPair<"u"||typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"||typeof EdgeRuntime<"u"&&EdgeRuntime==="vercel"}let qs;(typeof navigator>"u"||!navigator.userAgent?.startsWith?.("Mozilla/5.0 "))&&(qs="jose/v6.1.3");const Am=Symbol();async function Nm(n,e,t,r=fetch){const a=await r(n,{method:"GET",signal:t,redirect:"manual",headers:e}).catch(s=>{throw s.name==="TimeoutError"?new jp:s});if(a.status!==200)throw new Mt("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await a.json()}catch{throw new Mt("Failed to parse the JSON Web Key Set HTTP response as JSON")}}const js=Symbol();function Tm(n,e){return!(typeof n!="object"||n===null||!("uat"in n)||typeof n.uat!="number"||Date.now()-n.uat>=e||!("jwks"in n)||!hn(n.jwks)||!Array.isArray(n.jwks.keys)||!Array.prototype.every.call(n.jwks.keys,hn))}class Sm{#e;#t;#n;#o;#a;#r;#i;#u;#s;#l;constructor(e,t){if(!(e instanceof URL))throw new TypeError("url must be an instance of URL");this.#e=new URL(e.href),this.#t=typeof t?.timeoutDuration=="number"?t?.timeoutDuration:5e3,this.#n=typeof t?.cooldownDuration=="number"?t?.cooldownDuration:3e4,this.#o=typeof t?.cacheMaxAge=="number"?t?.cacheMaxAge:6e5,this.#i=new Headers(t?.headers),qs&&!this.#i.has("User-Agent")&&this.#i.set("User-Agent",qs),this.#i.has("accept")||(this.#i.set("accept","application/json"),this.#i.append("accept","application/jwk-set+json")),this.#u=t?.[Am],t?.[js]!==void 0&&(this.#l=t?.[js],Tm(t?.[js],this.#o)&&(this.#a=this.#l.uat,this.#s=Cc(this.#l.jwks)))}pendingFetch(){return!!this.#r}coolingDown(){return typeof this.#a=="number"?Date.now()<this.#a+this.#n:!1}fresh(){return typeof this.#a=="number"?Date.now()<this.#a+this.#o:!1}jwks(){return this.#s?.jwks()}async getKey(e,t){(!this.#s||!this.fresh())&&await this.reload();try{return await this.#s(e,t)}catch(r){if(r instanceof uc&&this.coolingDown()===!1)return await this.reload(),this.#s(e,t);throw r}}async reload(){this.#r&&Cm()&&(this.#r=void 0),this.#r||=Nm(this.#e.href,this.#i,AbortSignal.timeout(this.#t),this.#u).then(e=>{this.#s=Cc(e),this.#l&&(this.#l.uat=Date.now(),this.#l.jwks=e),this.#a=Date.now(),this.#r=void 0}).catch(e=>{throw this.#r=void 0,e}),await this.#r}}function Dm(n,e){const t=new Sm(n,e),r=async(a,s)=>t.getKey(a,s);return Object.defineProperties(r,{coolingDown:{get:()=>t.coolingDown(),enumerable:!0,configurable:!1},fresh:{get:()=>t.fresh(),enumerable:!0,configurable:!1},reload:{value:()=>t.reload(),enumerable:!0,configurable:!1,writable:!1},reloading:{get:()=>t.pendingFetch(),enumerable:!0,configurable:!1},jwks:{value:()=>t.jwks(),enumerable:!0,configurable:!1,writable:!1}}),r}function Im(n){if(typeof n!="string")throw new dn("JWTs must use Compact JWS serialization, JWT must be a string");const{1:e,length:t}=n.split(".");if(t===5)throw new dn("Only JWTs using Compact JWS serialization can be decoded");if(t!==3)throw new dn("Invalid JWT");if(!e)throw new dn("JWTs must contain a payload");let r;try{r=Lr(e)}catch{throw new dn("Failed to base64url decode the payload")}let a;try{a=JSON.parse(kr.decode(r))}catch{throw new dn("Failed to parse the decoded payload as JSON")}if(!hn(a))throw new dn("Invalid JWT Claims Set");return a}function Hs(n){const e=n?.modulusLength??2048;if(typeof e!="number"||e<2048)throw new Ut("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return e}async function Rm(n,e){let t,r;switch(n){case"PS256":case"PS384":case"PS512":t={name:"RSA-PSS",hash:`SHA-${n.slice(-3)}`,publicExponent:Uint8Array.of(1,0,1),modulusLength:Hs(e)},r=["sign","verify"];break;case"RS256":case"RS384":case"RS512":t={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${n.slice(-3)}`,publicExponent:Uint8Array.of(1,0,1),modulusLength:Hs(e)},r=["sign","verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":t={name:"RSA-OAEP",hash:`SHA-${parseInt(n.slice(-3),10)||1}`,publicExponent:Uint8Array.of(1,0,1),modulusLength:Hs(e)},r=["decrypt","unwrapKey","encrypt","wrapKey"];break;case"ES256":t={name:"ECDSA",namedCurve:"P-256"},r=["sign","verify"];break;case"ES384":t={name:"ECDSA",namedCurve:"P-384"},r=["sign","verify"];break;case"ES512":t={name:"ECDSA",namedCurve:"P-521"},r=["sign","verify"];break;case"Ed25519":case"EdDSA":{r=["sign","verify"],t={name:"Ed25519"};break}case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":{r=["sign","verify"],t={name:n};break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{r=["deriveBits"];const a="P-256";switch(a){case"P-256":case"P-384":case"P-521":{t={name:"ECDH",namedCurve:a};break}case"X25519":t={name:"X25519"};break;default:throw new Ut("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, and X25519")}break}default:throw new Ut('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return crypto.subtle.generateKey(t,!1,r)}const Pr={STATE_CHANGE:"sessionStateChange",EXPIRATION_WARNING:"sessionExpirationWarning",EXPIRATION:"sessionExpiration"};class km{constructor(e="solid-oidc",t="session",r=1){this.dbName=e,this.storeName=t,this.dbVersion=r,this.db=null}async init(){return new Promise((e,t)=>{const r=indexedDB.open(this.dbName,this.dbVersion);r.onerror=()=>t(new Error(`Database error: ${r.error}`)),r.onsuccess=()=>{this.db=r.result,e(this)},r.onupgradeneeded=a=>{const s=a.target.result;s.objectStoreNames.contains(this.storeName)||s.createObjectStore(this.storeName)}})}async setItem(e,t){return this.db||await this.init(),new Promise((r,a)=>{const s=this.db.transaction(this.storeName,"readwrite");s.oncomplete=()=>r(),s.onerror=()=>a(new Error(`Transaction error: ${s.error}`)),s.objectStore(this.storeName).put(t,e)})}async getItem(e){return this.db||await this.init(),new Promise((t,r)=>{const a=this.db.transaction(this.storeName,"readonly");a.onerror=()=>r(new Error(`Transaction error: ${a.error}`));const s=a.objectStore(this.storeName).get(e);s.onsuccess=()=>t(s.result||null)})}async deleteItem(e){return this.db||await this.init(),new Promise((t,r)=>{const a=this.db.transaction(this.storeName,"readwrite");a.oncomplete=()=>t(),a.onerror=()=>r(new Error(`Transaction error: ${a.error}`)),a.objectStore(this.storeName).delete(e)})}async clear(){return this.db||await this.init(),new Promise((e,t)=>{const r=this.db.transaction(this.storeName,"readwrite");r.oncomplete=()=>e(),r.onerror=()=>t(new Error(`Transaction error: ${r.error}`)),r.objectStore(this.storeName).clear()})}close(){this.db&&(this.db.close(),this.db=null)}}async function Lm(){const n=crypto.randomUUID()+"-"+crypto.randomUUID(),e=new Uint8Array(await crypto.subtle.digest("SHA-256",new TextEncoder().encode(n))),t=btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"");return{verifier:n,challenge:t}}async function Ac(n,e,t,r=null){const a=await Us(n.publicKey),s={htu:e,htm:t};return r&&(s.ath=r),new wm(s).setIssuedAt().setJti(crypto.randomUUID()).setProtectedHeader({alg:"ES256",typ:"dpop+jwt",jwk:a}).sign(n.privateKey)}async function Om(n){const e=new TextEncoder().encode(n),t=await crypto.subtle.digest("SHA-256",e),r=Array.from(new Uint8Array(t));return btoa(String.fromCharCode(...r)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Fm(n){const e=new URL(n).origin,t=await fetch(`${e}/.well-known/openid-configuration`);if(!t.ok)throw new Error(`OIDC discovery failed: ${t.status}`);return t.json()}async function Bm(n,e){const t=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({application_type:"web",redirect_uris:e,token_endpoint_auth_method:"none",grant_types:["authorization_code","refresh_token"],response_types:["code"],scope:"openid offline_access webid"})});if(!t.ok)throw new Error(`Client registration failed: ${t.status}`);return t.json()}async function Nc(n,e,t){const r=await Ac(t,n,"POST"),a=await fetch(n,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",DPoP:r},body:new URLSearchParams(e)});if(!a.ok)throw new Error(`Token request failed: ${a.status}`);return a.json()}async function Pm(n,e,t,r,a){const s=Dm(new URL(e)),{payload:i}=await pm(n,s,{issuer:t,audience:"solid"}),l=await vm(await Us(a.publicKey));if(i.cnf?.jkt!==l)throw new Error("DPoP thumbprint mismatch");if(i.client_id!==r)throw new Error("client_id mismatch");return i}async function Mm(n){await n.init();const[e,t,r,a]=await Promise.all([n.getItem("refresh_token"),n.getItem("token_endpoint"),n.getItem("client_id"),n.getItem("dpop_keypair")]);if(!e||!t||!r||!a)throw new Error("Missing refresh data");const s=await Nc(t,{grant_type:"refresh_token",refresh_token:e,client_id:r},a);return s.refresh_token&&await n.setItem("refresh_token",s.refresh_token),n.close(),{...s,dpop_key_pair:a}}class Um extends EventTarget{constructor(e={}){super(),this.clientId=e.clientId||null,this.database=e.database||new km,this.onStateChange=e.onStateChange||null,this.onExpirationWarning=e.onExpirationWarning||null,this.onExpiration=e.onExpiration||null,this._isActive=!1,this._webId=null,this._exp=null,this._ath=null,this._tokens=null,this._idpDetails=null,this._refreshPromise=null,this.onStateChange&&this.addEventListener(Pr.STATE_CHANGE,this.onStateChange),this.onExpirationWarning&&this.addEventListener(Pr.EXPIRATION_WARNING,this.onExpirationWarning),this.onExpiration&&this.addEventListener(Pr.EXPIRATION,this.onExpiration)}get isActive(){return this._isActive}get webId(){return this._webId}isExpired(){return this._exp?Math.floor(Date.now()/1e3)>=this._exp:!0}getExpiresIn(){return this._exp?this._exp-Math.floor(Date.now()/1e3):-1}async login(e,t){const r=new URL(t),a=r.origin+r.pathname+r.search,s=await Fm(e),i=s.issuer,l=d=>d.endsWith("/")?d.slice(0,-1):d;if(l(e)!==l(i))throw new Error(`Issuer mismatch: ${i} !== ${e}`);sessionStorage.setItem("solid_oidc_idp",i),sessionStorage.setItem("solid_oidc_token_endpoint",s.token_endpoint),sessionStorage.setItem("solid_oidc_jwks_uri",s.jwks_uri);let o=this.clientId;o||(o=(await Bm(s.registration_endpoint,[a])).client_id,sessionStorage.setItem("solid_oidc_client_id",o));const u=await Lm();sessionStorage.setItem("solid_oidc_pkce_verifier",u.verifier);const c=crypto.randomUUID();sessionStorage.setItem("solid_oidc_csrf",c);const f=new URL(s.authorization_endpoint);f.searchParams.set("response_type","code"),f.searchParams.set("redirect_uri",a),f.searchParams.set("scope","openid offline_access webid"),f.searchParams.set("client_id",o),f.searchParams.set("code_challenge_method","S256"),f.searchParams.set("code_challenge",u.challenge),f.searchParams.set("state",c),f.searchParams.set("prompt","consent"),window.location.href=f.toString()}async handleRedirectFromLogin(){const e=new URL(window.location.href),t=e.searchParams.get("code");if(!t)return;const r=sessionStorage.getItem("solid_oidc_idp"),a=e.searchParams.get("iss");if(!r||a!==r)throw new Error(`Issuer mismatch: ${a} !== ${r}`);const s=sessionStorage.getItem("solid_oidc_csrf");if(e.searchParams.get("state")!==s)throw new Error("CSRF token mismatch");e.searchParams.delete("code"),e.searchParams.delete("iss"),e.searchParams.delete("state"),window.history.replaceState({},document.title,e.toString());const i=sessionStorage.getItem("solid_oidc_pkce_verifier"),l=sessionStorage.getItem("solid_oidc_token_endpoint"),o=sessionStorage.getItem("solid_oidc_jwks_uri"),u=this.clientId||sessionStorage.getItem("solid_oidc_client_id");if(!i||!l||!u)throw new Error("Missing session data");const c=await Rm("ES256"),f=await Nc(l,{grant_type:"authorization_code",code:t,code_verifier:i,redirect_uri:e.origin+e.pathname,client_id:u},c);await Pm(f.access_token,o,r,u,c),this._idpDetails={idp:r,jwksUri:o,tokenEndpoint:l},await this.database.init(),await Promise.all([this.database.setItem("idp",r),this.database.setItem("jwks_uri",o),this.database.setItem("token_endpoint",l),this.database.setItem("client_id",u),this.database.setItem("dpop_keypair",c),this.database.setItem("refresh_token",f.refresh_token)]),this.database.close(),sessionStorage.removeItem("solid_oidc_idp"),sessionStorage.removeItem("solid_oidc_token_endpoint"),sessionStorage.removeItem("solid_oidc_jwks_uri"),sessionStorage.removeItem("solid_oidc_client_id"),sessionStorage.removeItem("solid_oidc_pkce_verifier"),sessionStorage.removeItem("solid_oidc_csrf"),await this._setTokens({...f,dpop_key_pair:c}),this._dispatchStateChange()}async restore(){return this._refreshPromise?this._refreshPromise:(this._refreshPromise=(async()=>{try{const e=await Mm(this.database);await this._setTokens(e),this._dispatchStateChange()}catch(e){throw this._isActive&&(this.isExpired()?this._dispatchExpiration():this._dispatchExpirationWarning()),e}finally{this._refreshPromise=null}})(),this._refreshPromise)}async logout(){this._isActive=!1,this._webId=null,this._exp=null,this._ath=null,this._tokens=null,this._idpDetails=null,await this.database.init(),await this.database.clear(),this.database.close(),this._dispatchStateChange()}async authFetch(e,t={}){if(!this._isActive)return fetch(e,t);this.isExpired()&&await this.restore();let r,a,s;e instanceof Request?(r=new URL(e.url),a=t.method||e.method||"GET",s=new Headers(e.headers)):(r=new URL(e.toString()),a=t.method||"GET",s=t.headers?new Headers(t.headers):new Headers);const i=await Ac(this._tokens.dpop_key_pair,`${r.origin}${r.pathname}`,a.toUpperCase(),this._ath);return s.set("DPoP",i),s.set("Authorization",`DPoP ${this._tokens.access_token}`),e instanceof Request?fetch(new Request(e,{...t,headers:s})):fetch(r,{...t,headers:s})}async _setTokens(e){this._tokens=e;const t=Im(e.access_token);if(!t.webid)throw new Error("Missing webid claim");if(!t.exp)throw new Error("Missing exp claim");this._ath=await Om(e.access_token),this._webId=t.webid,this._exp=t.exp,this._isActive=!0}_dispatchStateChange(){this.dispatchEvent(new CustomEvent(Pr.STATE_CHANGE,{detail:{isActive:this._isActive,webId:this._webId}}))}_dispatchExpirationWarning(){this.dispatchEvent(new CustomEvent(Pr.EXPIRATION_WARNING,{detail:{expires_in:this.getExpiresIn()}}))}_dispatchExpiration(){this.dispatchEvent(new CustomEvent(Pr.EXPIRATION))}}const $m={label:"Source",icon:"📄",canHandle(n,e){return!0},render(n,e,t){t.innerHTML="";const r=n.doc(),a=e.match(null,null,null,r),s=e.fetcher,i=qm(a,r,e),l=document.createElement("div");l.className="source-header";const o=document.createElement("h2");if(o.textContent="Source",l.appendChild(o),s){const c=document.createElement("button");c.className="source-edit-btn",c.textContent="Edit",c.addEventListener("click",()=>{Tc(t,l,i,r,s)}),l.appendChild(c)}if(t.appendChild(l),a.length===0){const c=document.createElement("p");c.textContent="No triples found in this document.",t.appendChild(c);return}const u=document.createElement("pre");u.className="source-view",u.textContent=i,t.appendChild(u)}};function qm(n,e,t){if(n.length===0)return"";try{return Qr(e,t,void 0,"text/turtle")??""}catch{return n.map(r=>`<${r.subject.value}> <${r.predicate.value}> ${r.object.termType==="NamedNode"?`<${r.object.value}>`:`"${r.object.value}"`} .`).join(`
`)}}function Tc(n,e,t,r,a){for(;e.nextSibling;)e.nextSibling.remove();const s=e.querySelector(".source-edit-btn");s&&s.remove();const i=document.createElement("div");i.className="source-btn-group";const l=document.createElement("button");l.className="source-save-btn",l.textContent="Save";const o=document.createElement("button");o.className="source-cancel-btn",o.textContent="Cancel",i.appendChild(l),i.appendChild(o),e.appendChild(i);const u=document.createElement("textarea");u.className="source-editor",u.value=t,u.spellcheck=!1,n.appendChild(u),u.focus();const c=document.createElement("p");c.className="source-status",n.appendChild(c),o.addEventListener("click",()=>{Sc(n,e,t,r,a)}),l.addEventListener("click",async()=>{l.disabled=!0,o.disabled=!0,c.textContent="Saving...",c.className="source-status";try{const f=await a.webOperation("PUT",r.value,{data:u.value,contentType:"text/turtle"});if(!f.ok)throw new Error(`${f.status} ${f.statusText}`);c.textContent="Saved!",c.className="source-status source-status-ok",setTimeout(()=>{Sc(n,e,u.value,r,a)},800)}catch(f){const d=f instanceof Error?f.message:String(f);c.textContent=`Save failed: ${d}`,c.className="source-status source-status-error",l.disabled=!1,o.disabled=!1}})}function Sc(n,e,t,r,a){for(;e.nextSibling;)e.nextSibling.remove();const s=e.querySelector(".source-btn-group");s&&s.remove();const i=document.createElement("button");if(i.className="source-edit-btn",i.textContent="Edit",i.addEventListener("click",()=>{Tc(n,e,t,r,a)}),e.appendChild(i),t){const l=document.createElement("pre");l.className="source-view",l.textContent=t,n.appendChild(l)}else{const l=document.createElement("p");l.textContent="No triples found in this document.",n.appendChild(l)}}Qe($m);const Ue=We("http://www.w3.org/1999/02/22-rdf-syntax-ns#"),Ct=We("http://www.w3.org/2000/01/rdf-schema#"),vt=We("http://purl.org/dc/elements/1.1/"),Fe=We("http://purl.org/dc/terms/"),He=We("http://xmlns.com/foaf/0.1/"),bt=We("http://www.w3.org/ns/ldp#"),mn=We("http://www.w3.org/ns/solid/terms#"),Dc=We("http://www.w3.org/ns/posix/stat#"),je=We("http://www.w3.org/2006/vcard/ns#"),Mr=We("http://www.w3.org/ns/pim/space#"),kt=We("http://www.w3.org/ns/auth/acl#"),Dt=We("http://www.w3.org/ns/ui#"),zt=We("http://rdfs.org/sioc/ns#"),tn=We("http://www.w3.org/ns/pim/meeting#"),Lt=We("http://www.w3.org/2005/01/wf/flow#"),It=We("http://www.w3.org/ns/pim/transaction#"),Ws=We("http://www.w3.org/ns/pim/tracker#"),ot=We("https://www.w3.org/ns/activitystreams#"),dr=We("http://www.w3.org/2002/01/bookmark#"),Vs=We("http://www.w3.org/ns/org#"),Qi=We("http://www.w3.org/ns/pim/pad#"),Yi=We("http://rdfs.org/sioc/types#"),fi=We("http://purl.org/ontology/olo/core#"),jm=We("http://purl.org/ontology/pbo/core#"),Hm=We("http://purl.org/ontology/mo/"),re=We("http://schema.org/");function Wm(n){const e=n.indexOf("#");return e>=0?n.slice(e+1):""}function Me(n){const e=Wm(n);if(e)return decodeURIComponent(e);try{const r=new URL(n).pathname.split("/").filter(Boolean);return r.length>0?decodeURIComponent(r[r.length-1]):n}catch{return n}}const Ic="mashlib:navigate";function zs(n){window.dispatchEvent(new CustomEvent(Ic,{detail:{uri:n}}))}function gn(n,e){const t=document.createElement("a");return t.href=`?uri=${encodeURIComponent(n)}`,t.textContent=e,t.addEventListener("click",r=>{r.preventDefault(),zs(n)}),t}function Vm(n,e){return e.any(n,Ct("label"),null,null)?.value??e.any(n,He("name"),null,null)?.value??e.any(n,Fe("title"),null,null)?.value??e.any(n,vt("title"),null,null)?.value??e.any(n,re("name"),null,null)?.value??Me(n.value)}function zm(n,e){return e.match(null,null,null,null),Me(n)}function Gm(n,e){const t=e.match(n,null,null,null),r=new Map;for(const s of t){const i=s.predicate.value;r.has(i)||r.set(i,{predicate:i,predicateLabel:zm(i,e),objects:[]}),r.get(i).objects.push({value:s.object.value,termType:s.object.termType,datatype:s.object.datatype?.value,language:s.object.language})}return[...r.values()].sort((s,i)=>s.predicate===Ue("type").value?-1:i.predicate===Ue("type").value?1:s.predicateLabel.localeCompare(i.predicateLabel))}function Jm(n){const e=document.createElement("span");if(e.className="outline-value",n.termType==="NamedNode"){const t=gn(n.value,Me(n.value));t.className="outline-link",t.title=n.value,e.appendChild(t)}else if(n.termType==="BlankNode")e.textContent=`_:${n.value}`,e.className+=" outline-blank";else{const t=document.createElement("span");if(t.className="outline-literal",t.textContent=n.value,e.appendChild(t),n.language){const r=document.createElement("span");r.className="outline-lang",r.textContent=`@${n.language}`,e.appendChild(r)}else if(n.datatype&&!n.datatype.includes("XMLSchema#string")){const r=document.createElement("span");r.className="outline-datatype",r.textContent=`^^${Me(n.datatype)}`,e.appendChild(r)}}return e}function Km(n,e,t){t.innerHTML="";const r=document.createElement("div");r.className="outline-view";const a=Vm(n,e),s=document.createElement("h2");s.className="outline-title",s.textContent=a,r.appendChild(s);const i=document.createElement("p");i.className="outline-uri";const l=document.createElement("code");l.textContent=n.value,i.appendChild(l),r.appendChild(i);const o=Gm(n,e);if(o.length===0){const _=document.createElement("p");_.className="outline-empty",_.textContent="No triples found for this resource.",r.appendChild(_),t.appendChild(r);return}const u=o.reduce((_,N)=>_+N.objects.length,0),c=document.createElement("p");c.className="outline-count",c.textContent=`${u} triple${u!==1?"s":""} across ${o.length} predicate${o.length!==1?"s":""}`,r.appendChild(c);const f=document.createElement("table");f.className="outline-table";const d=document.createElement("thead"),g=document.createElement("tr"),m=document.createElement("th");m.textContent="Property";const v=document.createElement("th");v.textContent="Value",g.appendChild(m),g.appendChild(v),d.appendChild(g),f.appendChild(d);const b=document.createElement("tbody");for(const _ of o)for(let N=0;N<_.objects.length;N++){const E=document.createElement("tr"),w=document.createElement("td");if(w.className="outline-predicate",N===0){const S=document.createElement("a");S.href=_.predicate,S.textContent=_.predicateLabel,S.title=_.predicate,S.target="_blank",S.rel="noopener",w.appendChild(S),_.objects.length>1&&(w.rowSpan=_.objects.length),E.appendChild(w)}const p=document.createElement("td");p.className="outline-object",p.appendChild(Jm(_.objects[N])),E.appendChild(p),b.appendChild(E)}f.appendChild(b),r.appendChild(f),t.appendChild(r)}Qe({label:"Outline",icon:"🔍",canHandle(n,e){return e.match(n,null,null,null).length>0},render(n,e,t){Km(n,e,t)}}),Qe({label:"Properties",icon:"📋",canHandle(n,e){return!0},render(n,e,t){t.innerHTML="";const r=document.createElement("h2");r.textContent=Me(n.value),t.appendChild(r);const a=document.createElement("p");a.className="subject-uri";const s=document.createElement("a");s.href=n.value,s.textContent=n.value,s.target="_blank",s.rel="noopener",a.appendChild(s),t.appendChild(a);const i=e.match(n,null,null,null);if(i.length===0){const f=document.createElement("p");f.textContent="No properties found for this subject.",t.appendChild(f);return}const l=new Map;for(const f of i){const d=f.predicate.value;l.has(d)||l.set(d,{predicate:f.predicate,objects:[]}),l.get(d).objects.push({value:f.object.value,isUri:f.object.termType==="NamedNode"})}const o=document.createElement("table");o.className="properties-table";const u=document.createElement("thead");u.innerHTML="<tr><th>Property</th><th>Value</th></tr>",o.appendChild(u);const c=document.createElement("tbody");for(const[,{predicate:f,objects:d}]of l)for(const g of d){const m=document.createElement("tr"),v=document.createElement("td");v.className="prop-predicate";const b=document.createElement("a");b.href=f.value,b.textContent=Me(f.value),b.title=f.value,b.target="_blank",b.rel="noopener",v.appendChild(b),m.appendChild(v);const _=document.createElement("td");if(_.className="prop-value",g.isUri){const N=document.createElement("a");N.href=g.value,N.textContent=Me(g.value),N.title=g.value,N.target="_blank",N.rel="noopener",_.appendChild(N)}else _.textContent=g.value;m.appendChild(_),c.appendChild(m)}o.appendChild(c),t.appendChild(o)}});const Rc=[{uri:"Read",label:"Read",description:"can view the resource"},{uri:"Append",label:"Append",description:"can add new content"},{uri:"Write",label:"Write",description:"can modify content"},{uri:"Control",label:"Control",description:"can manage sharing"}],Xm=[{label:"Owners",modes:["Read","Write","Control"],color:"#7b2d8e"},{label:"Editors",modes:["Read","Write"],color:"#dc3545"},{label:"Posters",modes:["Read","Append"],color:"#e67e00"},{label:"Submitters",modes:["Append"],color:"#ccaa00"},{label:"Viewers",modes:["Read"],color:"#28a745"}];function Qm(n,e){const r=e.each(n,Ue("type"),null,null).map(a=>a.value);return r.includes(bt("Container").value)||r.includes(bt("BasicContainer").value)?!0:n.value.endsWith("/")}function hi(n,e){if(n===He("Agent").value)return"Everyone (public)";if(n===kt("AuthenticatedAgent").value)return"Anyone logged in";const t={termType:"NamedNode",value:n},r=e.any(t,He("name"),null,null)?.value??e.any(t,je("fn"),null,null)?.value;return r||Me(n)}function Ym(n,e){const t=[],r=e.each(null,kt("accessTo"),n,null);for(const s of r){if(s.termType!=="NamedNode")continue;const i=s,l=e.each(i,Ue("type"),null,null);if(!l.some(f=>f.value===kt("Authorization").value)&&l.length>0)continue;const c=e.each(i,kt("mode"),null,null).map(f=>Me(f.value));for(const f of e.each(i,kt("agent"),null,null))t.push({agentType:"agent",agentUri:f.value,agentLabel:hi(f.value,e),modes:c});for(const f of e.each(i,kt("agentClass"),null,null))t.push({agentType:"agentClass",agentUri:f.value,agentLabel:hi(f.value,e),modes:c});for(const f of e.each(i,kt("agentGroup"),null,null))t.push({agentType:"agentGroup",agentUri:f.value,agentLabel:hi(f.value,e),modes:c})}const a=e.each(null,kt("default"),n,null);for(const s of a){if(s.termType!=="NamedNode")continue;const i=s,o=e.each(i,kt("mode"),null,null).map(u=>Me(u.value));for(const u of e.each(i,kt("agent"),null,null)){const c=u.value;t.some(f=>f.agentUri===c&&f.modes.join()===o.join())||t.push({agentType:"agent",agentUri:c,agentLabel:hi(c,e),modes:o})}for(const u of e.each(i,kt("agentClass"),null,null)){const c=u.value;t.some(f=>f.agentUri===c&&f.modes.join()===o.join())||t.push({agentType:"agentClass",agentUri:c,agentLabel:hi(c,e),modes:o})}}return t}function Zm(n){const e=new Map;for(const t of n){const r=t.modes.sort().join(",");e.has(r)||e.set(r,[]),e.get(r).push(t)}return e}function eg(n){const e=[...n].sort().join(",");for(const t of Xm)if([...t.modes].sort().join(",")===e)return{label:t.label,color:t.color};return{label:n.join(" + "),color:"#555"}}function tg(n,e,t){t.innerHTML="";const r=document.createElement("div");r.className="sharing-view";const a=Qm(n,e)?"folder":"file",s=document.createElement("h2");s.className="sharing-title",s.textContent=`Sharing for ${a}`,r.appendChild(s);const i=document.createElement("p");i.className="sharing-resource";const l=document.createElement("code");l.textContent=n.value,i.appendChild(l),r.appendChild(i);const o=Ym(n,e);if(o.length===0){const f=document.createElement("p");f.className="sharing-no-acl",f.textContent="No specific sharing settings found. This resource may inherit permissions from its parent container.",r.appendChild(f),kc(r),t.appendChild(r);return}const u=Zm(o),c=document.createElement("div");c.className="sharing-permissions";for(const[f,d]of u){const g=f.split(","),{label:m,color:v}=eg(g),b=document.createElement("div");b.className="sharing-level";const _=document.createElement("div");_.className="sharing-level-name",_.style.color=v,_.textContent=m,b.appendChild(_);const N=document.createElement("div");N.className="sharing-agents";for(const p of d){const S=document.createElement("span");S.className=`sharing-agent sharing-agent-${p.agentType}`,S.textContent=p.agentLabel,S.title=p.agentUri,N.appendChild(S)}b.appendChild(N);const E=document.createElement("div");E.className="sharing-level-desc",E.style.color=v;const w=g.map(p=>{const S=Rc.find(F=>F.uri===p);return S?S.description:p});E.textContent=w.join(", "),b.appendChild(E),c.appendChild(b)}if(r.appendChild(c),a==="folder"){const f=document.createElement("p");f.className="sharing-default-info",f.textContent="Folder permissions may also apply as defaults for new resources created within.",r.appendChild(f)}kc(r),t.appendChild(r)}function kc(n){const e=document.createElement("div");e.className="sharing-legend";const t=document.createElement("h3");t.textContent="Access Modes",e.appendChild(t);const r=document.createElement("table");r.className="sharing-legend-table";for(const a of Rc){const s=document.createElement("tr"),i=document.createElement("td");i.className="sharing-legend-mode",i.textContent=a.label;const l=document.createElement("td");l.textContent=a.description,s.appendChild(i),s.appendChild(l),r.appendChild(s)}e.appendChild(r),n.appendChild(e)}function ng(n,e){const r=e.each(n,Ue("type"),null,null).map(a=>a.value);return!!(r.includes(bt("Resource").value)||r.includes(bt("Container").value)||r.includes(bt("BasicContainer").value)||n.value.endsWith("/"))}Qe({label:"Sharing",icon:"🔒",canHandle(n,e){return ng(n,e)},render(n,e,t){tg(n,e,t)}});function Gs(n){return Me(n)}function Lc(n){return n.startsWith("http://")||n.startsWith("https://")?Me(n):n.length>120?n.slice(0,117)+"...":n}function rg(n,e,t){t.innerHTML="";const r=document.createElement("div");r.className="table-view";const a=e.any(n,re("name"),null,null)?.value??e.any(n,Fe("title"),null,null)?.value??e.any(n,Ct("label"),null,null)?.value??Me(n.value),s=document.createElement("h2");s.className="table-title",s.textContent=a,r.appendChild(s);let i=[],l="";const o=e.each(n,re("itemListElement"),null,null);if(o.length>0&&(i=o,l="List Items"),i.length===0){const w=Oc(n,e);w&&(i=w.items,l=Me(w.typeUri))}const u=document.createElement("p");if(u.className="table-count",u.textContent=`${i.length} ${l}${i.length!==1?"s":""}`,r.appendChild(u),i.length===0){const w=document.createElement("p");w.className="table-empty",w.textContent="No items to display.",r.appendChild(w),t.appendChild(r);return}const c=new Set;for(const w of i){const p=e.match(w,null,null,null);for(const S of p){const F=S.predicate.value;F!==Ue("type").value&&c.add(F)}}const f=Array.from(c),d=[re("name").value,Fe("title").value,Ct("label").value,re("description").value,Fe("description").value];f.sort((w,p)=>{const S=d.indexOf(w),F=d.indexOf(p);return S!==-1&&F!==-1?S-F:S!==-1?-1:F!==-1?1:Gs(w).localeCompare(Gs(p))});const g=8,m=f.slice(0,g),v=document.createElement("div");v.className="table-scroll";const b=document.createElement("table");b.className="table-data";const _=document.createElement("thead"),N=document.createElement("tr");for(const w of m){const p=document.createElement("th");p.className="table-header",p.textContent=Gs(w),p.setAttribute("data-predicate",w),p.addEventListener("click",()=>{ig(b,m.indexOf(w))}),N.appendChild(p)}_.appendChild(N),b.appendChild(_);const E=document.createElement("tbody");for(const w of i){const p=document.createElement("tr");p.className="table-row";for(const S of m){const F=document.createElement("td");F.className="table-cell";const A=e.each(w,or(S),null,null);if(A.length>0){const k=A[0].value;if(k.startsWith("http://")||k.startsWith("https://")){const C=document.createElement("a");C.href=k,C.textContent=Lc(k),C.className="table-link",F.appendChild(C)}else F.textContent=Lc(k)}p.appendChild(F)}E.appendChild(p)}if(b.appendChild(E),v.appendChild(b),r.appendChild(v),f.length>g){const w=document.createElement("p");w.className="table-more",w.textContent=`+ ${f.length-g} more columns hidden`,r.appendChild(w)}t.appendChild(r)}function ig(n,e,t,r,a){const s=n.querySelector("tbody");if(!s)return;const i=Array.from(s.querySelectorAll("tr")),l=n.querySelectorAll("th")[e],u=(l?.getAttribute("data-sort")??"none")==="asc"?"desc":"asc";n.querySelectorAll("th").forEach(c=>c.removeAttribute("data-sort")),l?.setAttribute("data-sort",u),i.sort((c,f)=>{const d=c.children[e]?.textContent??"",g=f.children[e]?.textContent??"",m=d.localeCompare(g,void 0,{numeric:!0});return u==="asc"?m:-m});for(const c of i)s.appendChild(c)}const ag=[re("Dataset").value,re("DataCatalog").value,re("ItemList").value,Ct("Class").value];function Oc(n,e){const t=n.doc(),r=e.match(null,Ue("type"),null,t),a=new Map;for(const l of r){const o=l.object.value;if(o===Ct("Resource").value||o===Ue("Statement").value)continue;const u=a.get(o)??[];u.push(l.subject),a.set(o,u)}let s=null,i=[];for(const[l,o]of a)o.length>=2&&o.length>i.length&&(s=l,i=o);return s&&i.length>=2?{typeUri:s,items:i}:null}function sg(n,e){const t=e.each(n,Ue("type"),null,null).map(a=>a.value);for(const a of ag)if(t.includes(a))return!0;if(e.any(n,re("itemListElement"),null,null))return!0;const r=Oc(n,e);return!!(r&&r.items.length>=3)}Qe({label:"Table",icon:"📊",canHandle(n,e){return sg(n,e)},render(n,e,t){rg(n,e,t)}});const lg=[".html",".htm",".xhtml"];function og(n){try{const e=new URL(n).pathname.toLowerCase();return lg.some(t=>e.endsWith(t))}catch{return!1}}Qe({label:"HTML",icon:"🌐",canHandle(n,e){return og(n.value)},render(n,e,t){t.innerHTML="";const r=document.createElement("div");r.className="html-view";const a=document.createElement("iframe");a.className="html-frame",a.src=n.value,a.setAttribute("sandbox","allow-same-origin"),a.title="HTML content",a.addEventListener("load",()=>{try{const s=a.contentDocument;if(s){const i=s.documentElement.scrollHeight;a.style.height=`${Math.max(i,200)}px`}}catch{a.style.height="80vh"}}),r.appendChild(a),t.appendChild(r)}});const ug={".mp3":"audio/mpeg",".wav":"audio/wav",".ogg":"audio/ogg",".oga":"audio/ogg",".flac":"audio/flac",".aac":"audio/aac",".m4a":"audio/mp4",".opus":"audio/opus",".weba":"audio/webm"};function Fc(n){try{const e=new URL(n).pathname.toLowerCase();for(const[t,r]of Object.entries(ug))if(e.endsWith(t))return r}catch{}}function cg(n,e){const r=e.each(n,Ue("type"),null,null).map(a=>a.value);return!!(r.includes(re("AudioObject").value)||r.includes(Hm("Track").value))}Qe({label:"Audio",icon:"🎵",canHandle(n,e){return Fc(n.value)!==void 0||cg(n,e)},render(n,e,t){t.innerHTML="";const r=document.createElement("div");r.className="audio-view";const a=e.any(n,Fe("title"),null,null)?.value??e.any(n,re("name"),null,null)?.value??Me(n.value),s=document.createElement("h3");s.className="audio-title",s.textContent=a,r.appendChild(s);const i=e.any(n,re("byArtist"),null,null)?.value??e.any(n,Fe("creator"),null,null)?.value;if(i){const f=document.createElement("p");f.className="audio-artist",f.textContent=i,r.appendChild(f)}const l=document.createElement("audio");l.className="audio-player",l.controls=!0,l.preload="metadata";const o=Fc(n.value);if(o){const f=document.createElement("source");f.src=n.value,f.type=o,l.appendChild(f)}else l.src=n.value;const u=document.createElement("p");u.textContent="Your browser does not support this audio format.",l.appendChild(u),r.appendChild(l);const c=e.any(n,Fe("description"),null,null)?.value??e.any(n,re("description"),null,null)?.value;if(c){const f=document.createElement("p");f.className="audio-description",f.textContent=c,r.appendChild(f)}t.appendChild(r)}});const dg=[".png",".jpg",".jpeg",".gif",".svg",".webp",".bmp",".ico",".avif"];function fg(n){const e=new URL(n).pathname.toLowerCase();return dg.some(t=>e.endsWith(t))}function hg(n,e){const r=e.each(n,Ue("type"),null,null).map(a=>a.value);return!!(r.includes(He("Image").value)||r.includes(re("ImageObject").value))}Qe({label:"Image",icon:"🖼",canHandle(n,e){return fg(n.value)||hg(n,e)},render(n,e,t){t.innerHTML="";const r=document.createElement("div");r.className="image-view";const a=document.createElement("img");a.className="image-main",a.src=n.value,a.alt=Me(n.value),a.addEventListener("error",()=>{a.style.display="none";const l=document.createElement("p");l.className="error",l.textContent="Failed to load image.",r.appendChild(l)}),r.appendChild(a);const s=e.any(n,Fe("title"),null,null)?.value??e.any(n,re("name"),null,null)?.value,i=e.any(n,Fe("description"),null,null)?.value??e.any(n,re("description"),null,null)?.value;if(s||i){const l=document.createElement("div");if(l.className="image-caption",s){const o=document.createElement("h3");o.textContent=s,l.appendChild(o)}if(i){const o=document.createElement("p");o.textContent=i,l.appendChild(o)}r.appendChild(l)}t.appendChild(r)}});function pg(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function mg(n,e,t){t.innerHTML="";const r=document.createElement("div");r.className="code-view";const a=document.createElement("div");a.className="code-header";const i=n.value.split("?")[0].split("#")[0].split("/").pop()??n.value,l=Pc(n.value),o=document.createElement("span");if(o.className="code-filename",o.textContent=i,a.appendChild(o),l){const f=document.createElement("span");f.className="code-language",f.textContent=l,a.appendChild(f)}r.appendChild(a);const u=e.any(n,mn("content"),null,null)?.value??e.any(n,Fe("content"),null,null)?.value;if(u){Bc(u,r),t.appendChild(r);return}const c=document.createElement("p");c.className="code-loading",c.textContent="Loading...",r.appendChild(c),t.appendChild(r),fetch(n.value).then(f=>{if(!f.ok)throw new Error(`HTTP ${f.status}`);return f.text()}).then(f=>{c.remove(),Bc(f,r)}).catch(f=>{c.textContent=`Failed to load: ${f.message}`,c.className="code-error"})}function Bc(n,e){const t=n.split(`
`);t.length>0&&t[t.length-1]===""&&t.pop();const r=document.createElement("pre");r.className="code-block";const a=document.createElement("table");a.className="code-table",String(t.length).length;for(let i=0;i<t.length;i++){const l=document.createElement("tr");l.className="code-line";const o=document.createElement("td");o.className="code-line-number",o.textContent=String(i+1),o.setAttribute("data-line",String(i+1)),l.appendChild(o);const u=document.createElement("td");u.className="code-line-content",u.innerHTML=pg(t[i])||`
`,l.appendChild(u),a.appendChild(l)}r.appendChild(a);const s=document.createElement("div");s.className="code-footer",s.textContent=`${t.length} line${t.length!==1?"s":""}`,e.appendChild(r),e.appendChild(s)}const gg={".js":"JavaScript",".mjs":"JavaScript",".cjs":"JavaScript",".jsx":"JSX",".ts":"TypeScript",".tsx":"TSX",".py":"Python",".rb":"Ruby",".rs":"Rust",".go":"Go",".java":"Java",".kt":"Kotlin",".scala":"Scala",".c":"C",".h":"C Header",".cpp":"C++",".cc":"C++",".hpp":"C++ Header",".cs":"C#",".swift":"Swift",".php":"PHP",".pl":"Perl",".lua":"Lua",".r":"R",".sh":"Shell",".bash":"Bash",".zsh":"Zsh",".fish":"Fish",".ps1":"PowerShell",".sql":"SQL",".json":"JSON",".yaml":"YAML",".yml":"YAML",".toml":"TOML",".xml":"XML",".css":"CSS",".scss":"SCSS",".less":"LESS",".sass":"Sass",".graphql":"GraphQL",".gql":"GraphQL",".proto":"Protocol Buffers",".dockerfile":"Dockerfile",".tf":"Terraform",".vim":"Vim Script",".el":"Emacs Lisp",".clj":"Clojure",".ex":"Elixir",".exs":"Elixir",".erl":"Erlang",".hs":"Haskell",".ml":"OCaml",".fs":"F#",".dart":"Dart",".zig":"Zig",".v":"V",".nim":"Nim",".wasm":"WebAssembly",".wat":"WebAssembly Text"};function Pc(n){const t=n.split("?")[0].split("#")[0].split("/").pop()??"",r=t.toLowerCase();if(r==="dockerfile")return"Dockerfile";if(r==="makefile"||r==="gnumakefile")return"Makefile";if(r==="rakefile"||r==="gemfile")return"Ruby";if(r==="cmakelists.txt")return"CMake";const a=t.lastIndexOf(".");if(a===-1)return null;const s=t.slice(a).toLowerCase();return gg[s]??null}function yg(n,e){return!!(Pc(n.value)||e.each(n,Ue("type"),null,null).map(r=>r.value).includes(re("SoftwareSourceCode").value))}Qe({label:"Code",icon:"💻",canHandle(n,e){return yg(n,e)},render(n,e,t){mg(n,e,t)}});function Js(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var fr=Js();function Mc(n){fr=n}var pi={exec:()=>null};function Ze(n,e=""){let t=typeof n=="string"?n:n.source;const r={replace:(a,s)=>{let i=typeof s=="string"?s:s.source;return i=i.replace(Ot.caret,"$1"),t=t.replace(a,i),r},getRegex:()=>new RegExp(t,e)};return r}var Ot={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:n=>new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}#`),htmlBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}<(?:[a-z].*>|!--)`,"i")},wg=/^(?:[ \t]*(?:\n|$))+/,vg=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,bg=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,mi=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Eg=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Ks=/(?:[*+-]|\d{1,9}[.)])/,Uc=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,$c=Ze(Uc).replace(/bull/g,Ks).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),xg=Ze(Uc).replace(/bull/g,Ks).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Xs=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,_g=/^[^\n]+/,Qs=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Cg=Ze(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Qs).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Ag=Ze(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Ks).getRegex(),Zi="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Ys=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Ng=Ze("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Ys).replace("tag",Zi).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),qc=Ze(Xs).replace("hr",mi).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Zi).getRegex(),Tg=Ze(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",qc).getRegex(),Zs={blockquote:Tg,code:vg,def:Cg,fences:bg,heading:Eg,hr:mi,html:Ng,lheading:$c,list:Ag,newline:wg,paragraph:qc,table:pi,text:_g},jc=Ze("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",mi).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Zi).getRegex(),Sg={...Zs,lheading:xg,table:jc,paragraph:Ze(Xs).replace("hr",mi).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",jc).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Zi).getRegex()},Dg={...Zs,html:Ze(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Ys).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:pi,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ze(Xs).replace("hr",mi).replace("heading",` *#{1,6} *[^
]`).replace("lheading",$c).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Ig=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Rg=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Hc=/^( {2,}|\\)\n(?!\s*$)/,kg=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,ea=/[\p{P}\p{S}]/u,el=/[\s\p{P}\p{S}]/u,Wc=/[^\s\p{P}\p{S}]/u,Lg=Ze(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,el).getRegex(),Vc=/(?!~)[\p{P}\p{S}]/u,Og=/(?!~)[\s\p{P}\p{S}]/u,Fg=/(?:[^\s\p{P}\p{S}]|~)/u,Bg=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,zc=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Pg=Ze(zc,"u").replace(/punct/g,ea).getRegex(),Mg=Ze(zc,"u").replace(/punct/g,Vc).getRegex(),Gc="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Ug=Ze(Gc,"gu").replace(/notPunctSpace/g,Wc).replace(/punctSpace/g,el).replace(/punct/g,ea).getRegex(),$g=Ze(Gc,"gu").replace(/notPunctSpace/g,Fg).replace(/punctSpace/g,Og).replace(/punct/g,Vc).getRegex(),qg=Ze("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Wc).replace(/punctSpace/g,el).replace(/punct/g,ea).getRegex(),jg=Ze(/\\(punct)/,"gu").replace(/punct/g,ea).getRegex(),Hg=Ze(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Wg=Ze(Ys).replace("(?:-->|$)","-->").getRegex(),Vg=Ze("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Wg).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),ta=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,zg=Ze(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",ta).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Jc=Ze(/^!?\[(label)\]\[(ref)\]/).replace("label",ta).replace("ref",Qs).getRegex(),Kc=Ze(/^!?\[(ref)\](?:\[\])?/).replace("ref",Qs).getRegex(),Gg=Ze("reflink|nolink(?!\\()","g").replace("reflink",Jc).replace("nolink",Kc).getRegex(),tl={_backpedal:pi,anyPunctuation:jg,autolink:Hg,blockSkip:Bg,br:Hc,code:Rg,del:pi,emStrongLDelim:Pg,emStrongRDelimAst:Ug,emStrongRDelimUnd:qg,escape:Ig,link:zg,nolink:Kc,punctuation:Lg,reflink:Jc,reflinkSearch:Gg,tag:Vg,text:kg,url:pi},Jg={...tl,link:Ze(/^!?\[(label)\]\((.*?)\)/).replace("label",ta).getRegex(),reflink:Ze(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ta).getRegex()},nl={...tl,emStrongRDelimAst:$g,emStrongLDelim:Mg,url:Ze(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Kg={...nl,br:Ze(Hc).replace("{2,}","*").getRegex(),text:Ze(nl.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},na={normal:Zs,gfm:Sg,pedantic:Dg},gi={normal:tl,gfm:nl,breaks:Kg,pedantic:Jg},Xg={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Xc=n=>Xg[n];function yn(n,e){if(e){if(Ot.escapeTest.test(n))return n.replace(Ot.escapeReplace,Xc)}else if(Ot.escapeTestNoEncode.test(n))return n.replace(Ot.escapeReplaceNoEncode,Xc);return n}function Qc(n){try{n=encodeURI(n).replace(Ot.percentDecode,"%")}catch{return null}return n}function Yc(n,e){const t=n.replace(Ot.findPipe,(s,i,l)=>{let o=!1,u=i;for(;--u>=0&&l[u]==="\\";)o=!o;return o?"|":" |"}),r=t.split(Ot.splitPipe);let a=0;if(r[0].trim()||r.shift(),r.length>0&&!r.at(-1)?.trim()&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;a<r.length;a++)r[a]=r[a].trim().replace(Ot.slashPipe,"|");return r}function yi(n,e,t){const r=n.length;if(r===0)return"";let a=0;for(;a<r&&n.charAt(r-a-1)===e;)a++;return n.slice(0,r-a)}function Qg(n,e){if(n.indexOf(e[1])===-1)return-1;let t=0;for(let r=0;r<n.length;r++)if(n[r]==="\\")r++;else if(n[r]===e[0])t++;else if(n[r]===e[1]&&(t--,t<0))return r;return t>0?-2:-1}function Zc(n,e,t,r,a){const s=e.href,i=e.title||null,l=n[1].replace(a.other.outputLinkReplace,"$1");r.state.inLink=!0;const o={type:n[0].charAt(0)==="!"?"image":"link",raw:t,href:s,title:i,text:l,tokens:r.inlineTokens(l)};return r.state.inLink=!1,o}function Yg(n,e,t){const r=n.match(t.other.indentCodeCompensation);if(r===null)return e;const a=r[1];return e.split(`
`).map(s=>{const i=s.match(t.other.beginningSpace);if(i===null)return s;const[l]=i;return l.length>=a.length?s.slice(a.length):s}).join(`
`)}var ra=class{options;rules;lexer;constructor(n){this.options=n||fr}space(n){const e=this.rules.block.newline.exec(n);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(n){const e=this.rules.block.code.exec(n);if(e){const t=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:yi(t,`
`)}}}fences(n){const e=this.rules.block.fences.exec(n);if(e){const t=e[0],r=Yg(t,e[3]||"",this.rules);return{type:"code",raw:t,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:r}}}heading(n){const e=this.rules.block.heading.exec(n);if(e){let t=e[2].trim();if(this.rules.other.endingHash.test(t)){const r=yi(t,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(t=r.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(n){const e=this.rules.block.hr.exec(n);if(e)return{type:"hr",raw:yi(e[0],`
`)}}blockquote(n){const e=this.rules.block.blockquote.exec(n);if(e){let t=yi(e[0],`
`).split(`
`),r="",a="";const s=[];for(;t.length>0;){let i=!1;const l=[];let o;for(o=0;o<t.length;o++)if(this.rules.other.blockquoteStart.test(t[o]))l.push(t[o]),i=!0;else if(!i)l.push(t[o]);else break;t=t.slice(o);const u=l.join(`
`),c=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${u}`:u,a=a?`${a}
${c}`:c;const f=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(c,s,!0),this.lexer.state.top=f,t.length===0)break;const d=s.at(-1);if(d?.type==="code")break;if(d?.type==="blockquote"){const g=d,m=g.raw+`
`+t.join(`
`),v=this.blockquote(m);s[s.length-1]=v,r=r.substring(0,r.length-g.raw.length)+v.raw,a=a.substring(0,a.length-g.text.length)+v.text;break}else if(d?.type==="list"){const g=d,m=g.raw+`
`+t.join(`
`),v=this.list(m);s[s.length-1]=v,r=r.substring(0,r.length-d.raw.length)+v.raw,a=a.substring(0,a.length-g.raw.length)+v.raw,t=m.substring(s.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:s,text:a}}}list(n){let e=this.rules.block.list.exec(n);if(e){let t=e[1].trim();const r=t.length>1,a={type:"list",raw:"",ordered:r,start:r?+t.slice(0,-1):"",loose:!1,items:[]};t=r?`\\d{1,9}\\${t.slice(-1)}`:`\\${t}`,this.options.pedantic&&(t=r?t:"[*+-]");const s=this.rules.other.listItemRegex(t);let i=!1;for(;n;){let o=!1,u="",c="";if(!(e=s.exec(n))||this.rules.block.hr.test(n))break;u=e[0],n=n.substring(u.length);let f=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,_=>" ".repeat(3*_.length)),d=n.split(`
`,1)[0],g=!f.trim(),m=0;if(this.options.pedantic?(m=2,c=f.trimStart()):g?m=e[1].length+1:(m=e[2].search(this.rules.other.nonSpaceChar),m=m>4?1:m,c=f.slice(m),m+=e[1].length),g&&this.rules.other.blankLine.test(d)&&(u+=d+`
`,n=n.substring(d.length+1),o=!0),!o){const _=this.rules.other.nextBulletRegex(m),N=this.rules.other.hrRegex(m),E=this.rules.other.fencesBeginRegex(m),w=this.rules.other.headingBeginRegex(m),p=this.rules.other.htmlBeginRegex(m);for(;n;){const S=n.split(`
`,1)[0];let F;if(d=S,this.options.pedantic?(d=d.replace(this.rules.other.listReplaceNesting,"  "),F=d):F=d.replace(this.rules.other.tabCharGlobal,"    "),E.test(d)||w.test(d)||p.test(d)||_.test(d)||N.test(d))break;if(F.search(this.rules.other.nonSpaceChar)>=m||!d.trim())c+=`
`+F.slice(m);else{if(g||f.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||E.test(f)||w.test(f)||N.test(f))break;c+=`
`+d}!g&&!d.trim()&&(g=!0),u+=S+`
`,n=n.substring(S.length+1),f=F.slice(m)}}a.loose||(i?a.loose=!0:this.rules.other.doubleBlankLine.test(u)&&(i=!0));let v=null,b;this.options.gfm&&(v=this.rules.other.listIsTask.exec(c),v&&(b=v[0]!=="[ ] ",c=c.replace(this.rules.other.listReplaceTask,""))),a.items.push({type:"list_item",raw:u,task:!!v,checked:b,loose:!1,text:c,tokens:[]}),a.raw+=u}const l=a.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;a.raw=a.raw.trimEnd();for(let o=0;o<a.items.length;o++)if(this.lexer.state.top=!1,a.items[o].tokens=this.lexer.blockTokens(a.items[o].text,[]),!a.loose){const u=a.items[o].tokens.filter(f=>f.type==="space"),c=u.length>0&&u.some(f=>this.rules.other.anyLine.test(f.raw));a.loose=c}if(a.loose)for(let o=0;o<a.items.length;o++)a.items[o].loose=!0;return a}}html(n){const e=this.rules.block.html.exec(n);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(n){const e=this.rules.block.def.exec(n);if(e){const t=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",a=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:t,raw:e[0],href:r,title:a}}}table(n){const e=this.rules.block.table.exec(n);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;const t=Yc(e[1]),r=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),a=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],s={type:"table",raw:e[0],header:[],align:[],rows:[]};if(t.length===r.length){for(const i of r)this.rules.other.tableAlignRight.test(i)?s.align.push("right"):this.rules.other.tableAlignCenter.test(i)?s.align.push("center"):this.rules.other.tableAlignLeft.test(i)?s.align.push("left"):s.align.push(null);for(let i=0;i<t.length;i++)s.header.push({text:t[i],tokens:this.lexer.inline(t[i]),header:!0,align:s.align[i]});for(const i of a)s.rows.push(Yc(i,s.header.length).map((l,o)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:s.align[o]})));return s}}lheading(n){const e=this.rules.block.lheading.exec(n);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(n){const e=this.rules.block.paragraph.exec(n);if(e){const t=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:t,tokens:this.lexer.inline(t)}}}text(n){const e=this.rules.block.text.exec(n);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(n){const e=this.rules.inline.escape.exec(n);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(n){const e=this.rules.inline.tag.exec(n);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(n){const e=this.rules.inline.link.exec(n);if(e){const t=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(t)){if(!this.rules.other.endAngleBracket.test(t))return;const s=yi(t.slice(0,-1),"\\");if((t.length-s.length)%2===0)return}else{const s=Qg(e[2],"()");if(s===-2)return;if(s>-1){const l=(e[0].indexOf("!")===0?5:4)+e[1].length+s;e[2]=e[2].substring(0,s),e[0]=e[0].substring(0,l).trim(),e[3]=""}}let r=e[2],a="";if(this.options.pedantic){const s=this.rules.other.pedanticHrefTitle.exec(r);s&&(r=s[1],a=s[3])}else a=e[3]?e[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(t)?r=r.slice(1):r=r.slice(1,-1)),Zc(e,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:a&&a.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(n,e){let t;if((t=this.rules.inline.reflink.exec(n))||(t=this.rules.inline.nolink.exec(n))){const r=(t[2]||t[1]).replace(this.rules.other.multipleSpaceGlobal," "),a=e[r.toLowerCase()];if(!a){const s=t[0].charAt(0);return{type:"text",raw:s,text:s}}return Zc(t,a,t[0],this.lexer,this.rules)}}emStrong(n,e,t=""){let r=this.rules.inline.emStrongLDelim.exec(n);if(!r||r[3]&&t.match(this.rules.other.unicodeAlphaNumeric))return;if(!(r[1]||r[2]||"")||!t||this.rules.inline.punctuation.exec(t)){const s=[...r[0]].length-1;let i,l,o=s,u=0;const c=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(c.lastIndex=0,e=e.slice(-1*n.length+s);(r=c.exec(e))!=null;){if(i=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!i)continue;if(l=[...i].length,r[3]||r[4]){o+=l;continue}else if((r[5]||r[6])&&s%3&&!((s+l)%3)){u+=l;continue}if(o-=l,o>0)continue;l=Math.min(l,l+o+u);const f=[...r[0]][0].length,d=n.slice(0,s+r.index+f+l);if(Math.min(s,l)%2){const m=d.slice(1,-1);return{type:"em",raw:d,text:m,tokens:this.lexer.inlineTokens(m)}}const g=d.slice(2,-2);return{type:"strong",raw:d,text:g,tokens:this.lexer.inlineTokens(g)}}}}codespan(n){const e=this.rules.inline.code.exec(n);if(e){let t=e[2].replace(this.rules.other.newLineCharGlobal," ");const r=this.rules.other.nonSpaceChar.test(t),a=this.rules.other.startingSpaceChar.test(t)&&this.rules.other.endingSpaceChar.test(t);return r&&a&&(t=t.substring(1,t.length-1)),{type:"codespan",raw:e[0],text:t}}}br(n){const e=this.rules.inline.br.exec(n);if(e)return{type:"br",raw:e[0]}}del(n){const e=this.rules.inline.del.exec(n);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(n){const e=this.rules.inline.autolink.exec(n);if(e){let t,r;return e[2]==="@"?(t=e[1],r="mailto:"+t):(t=e[1],r=t),{type:"link",raw:e[0],text:t,href:r,tokens:[{type:"text",raw:t,text:t}]}}}url(n){let e;if(e=this.rules.inline.url.exec(n)){let t,r;if(e[2]==="@")t=e[0],r="mailto:"+t;else{let a;do a=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??"";while(a!==e[0]);t=e[0],e[1]==="www."?r="http://"+e[0]:r=e[0]}return{type:"link",raw:e[0],text:t,href:r,tokens:[{type:"text",raw:t,text:t}]}}}inlineText(n){const e=this.rules.inline.text.exec(n);if(e){const t=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:t}}}},Ln=class po{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||fr,this.options.tokenizer=this.options.tokenizer||new ra,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={other:Ot,block:na.normal,inline:gi.normal};this.options.pedantic?(t.block=na.pedantic,t.inline=gi.pedantic):this.options.gfm&&(t.block=na.gfm,this.options.breaks?t.inline=gi.breaks:t.inline=gi.gfm),this.tokenizer.rules=t}static get rules(){return{block:na,inline:gi}}static lex(e,t){return new po(t).lex(e)}static lexInline(e,t){return new po(t).inlineTokens(e)}lex(e){e=e.replace(Ot.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const r=this.inlineQueue[t];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],r=!1){for(this.options.pedantic&&(e=e.replace(Ot.tabCharGlobal,"    ").replace(Ot.spaceLine,""));e;){let a;if(this.options.extensions?.block?.some(i=>(a=i.call({lexer:this},e,t))?(e=e.substring(a.raw.length),t.push(a),!0):!1))continue;if(a=this.tokenizer.space(e)){e=e.substring(a.raw.length);const i=t.at(-1);a.raw.length===1&&i!==void 0?i.raw+=`
`:t.push(a);continue}if(a=this.tokenizer.code(e)){e=e.substring(a.raw.length);const i=t.at(-1);i?.type==="paragraph"||i?.type==="text"?(i.raw+=`
`+a.raw,i.text+=`
`+a.text,this.inlineQueue.at(-1).src=i.text):t.push(a);continue}if(a=this.tokenizer.fences(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.heading(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.hr(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.blockquote(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.list(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.html(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.def(e)){e=e.substring(a.raw.length);const i=t.at(-1);i?.type==="paragraph"||i?.type==="text"?(i.raw+=`
`+a.raw,i.text+=`
`+a.raw,this.inlineQueue.at(-1).src=i.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title});continue}if(a=this.tokenizer.table(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.lheading(e)){e=e.substring(a.raw.length),t.push(a);continue}let s=e;if(this.options.extensions?.startBlock){let i=1/0;const l=e.slice(1);let o;this.options.extensions.startBlock.forEach(u=>{o=u.call({lexer:this},l),typeof o=="number"&&o>=0&&(i=Math.min(i,o))}),i<1/0&&i>=0&&(s=e.substring(0,i+1))}if(this.state.top&&(a=this.tokenizer.paragraph(s))){const i=t.at(-1);r&&i?.type==="paragraph"?(i.raw+=`
`+a.raw,i.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=i.text):t.push(a),r=s.length!==e.length,e=e.substring(a.raw.length);continue}if(a=this.tokenizer.text(e)){e=e.substring(a.raw.length);const i=t.at(-1);i?.type==="text"?(i.raw+=`
`+a.raw,i.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=i.text):t.push(a);continue}if(e){const i="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(i);break}else throw new Error(i)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let r=e,a=null;if(this.tokens.links){const l=Object.keys(this.tokens.links);if(l.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)l.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,a.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(a=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let s=!1,i="";for(;e;){s||(i=""),s=!1;let l;if(this.options.extensions?.inline?.some(u=>(l=u.call({lexer:this},e,t))?(e=e.substring(l.raw.length),t.push(l),!0):!1))continue;if(l=this.tokenizer.escape(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.tag(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.link(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(l.raw.length);const u=t.at(-1);l.type==="text"&&u?.type==="text"?(u.raw+=l.raw,u.text+=l.text):t.push(l);continue}if(l=this.tokenizer.emStrong(e,r,i)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.codespan(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.br(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.del(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.autolink(e)){e=e.substring(l.raw.length),t.push(l);continue}if(!this.state.inLink&&(l=this.tokenizer.url(e))){e=e.substring(l.raw.length),t.push(l);continue}let o=e;if(this.options.extensions?.startInline){let u=1/0;const c=e.slice(1);let f;this.options.extensions.startInline.forEach(d=>{f=d.call({lexer:this},c),typeof f=="number"&&f>=0&&(u=Math.min(u,f))}),u<1/0&&u>=0&&(o=e.substring(0,u+1))}if(l=this.tokenizer.inlineText(o)){e=e.substring(l.raw.length),l.raw.slice(-1)!=="_"&&(i=l.raw.slice(-1)),s=!0;const u=t.at(-1);u?.type==="text"?(u.raw+=l.raw,u.text+=l.text):t.push(l);continue}if(e){const u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return t}},ia=class{options;parser;constructor(n){this.options=n||fr}space(n){return""}code({text:n,lang:e,escaped:t}){const r=(e||"").match(Ot.notSpaceStart)?.[0],a=n.replace(Ot.endingNewline,"")+`
`;return r?'<pre><code class="language-'+yn(r)+'">'+(t?a:yn(a,!0))+`</code></pre>
`:"<pre><code>"+(t?a:yn(a,!0))+`</code></pre>
`}blockquote({tokens:n}){return`<blockquote>
${this.parser.parse(n)}</blockquote>
`}html({text:n}){return n}heading({tokens:n,depth:e}){return`<h${e}>${this.parser.parseInline(n)}</h${e}>
`}hr(n){return`<hr>
`}list(n){const e=n.ordered,t=n.start;let r="";for(let i=0;i<n.items.length;i++){const l=n.items[i];r+=this.listitem(l)}const a=e?"ol":"ul",s=e&&t!==1?' start="'+t+'"':"";return"<"+a+s+`>
`+r+"</"+a+`>
`}listitem(n){let e="";if(n.task){const t=this.checkbox({checked:!!n.checked});n.loose?n.tokens[0]?.type==="paragraph"?(n.tokens[0].text=t+" "+n.tokens[0].text,n.tokens[0].tokens&&n.tokens[0].tokens.length>0&&n.tokens[0].tokens[0].type==="text"&&(n.tokens[0].tokens[0].text=t+" "+yn(n.tokens[0].tokens[0].text),n.tokens[0].tokens[0].escaped=!0)):n.tokens.unshift({type:"text",raw:t+" ",text:t+" ",escaped:!0}):e+=t+" "}return e+=this.parser.parse(n.tokens,!!n.loose),`<li>${e}</li>
`}checkbox({checked:n}){return"<input "+(n?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:n}){return`<p>${this.parser.parseInline(n)}</p>
`}table(n){let e="",t="";for(let a=0;a<n.header.length;a++)t+=this.tablecell(n.header[a]);e+=this.tablerow({text:t});let r="";for(let a=0;a<n.rows.length;a++){const s=n.rows[a];t="";for(let i=0;i<s.length;i++)t+=this.tablecell(s[i]);r+=this.tablerow({text:t})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+r+`</table>
`}tablerow({text:n}){return`<tr>
${n}</tr>
`}tablecell(n){const e=this.parser.parseInline(n.tokens),t=n.header?"th":"td";return(n.align?`<${t} align="${n.align}">`:`<${t}>`)+e+`</${t}>
`}strong({tokens:n}){return`<strong>${this.parser.parseInline(n)}</strong>`}em({tokens:n}){return`<em>${this.parser.parseInline(n)}</em>`}codespan({text:n}){return`<code>${yn(n,!0)}</code>`}br(n){return"<br>"}del({tokens:n}){return`<del>${this.parser.parseInline(n)}</del>`}link({href:n,title:e,tokens:t}){const r=this.parser.parseInline(t),a=Qc(n);if(a===null)return r;n=a;let s='<a href="'+n+'"';return e&&(s+=' title="'+yn(e)+'"'),s+=">"+r+"</a>",s}image({href:n,title:e,text:t,tokens:r}){r&&(t=this.parser.parseInline(r,this.parser.textRenderer));const a=Qc(n);if(a===null)return yn(t);n=a;let s=`<img src="${n}" alt="${t}"`;return e&&(s+=` title="${yn(e)}"`),s+=">",s}text(n){return"tokens"in n&&n.tokens?this.parser.parseInline(n.tokens):"escaped"in n&&n.escaped?n.text:yn(n.text)}},rl=class{strong({text:n}){return n}em({text:n}){return n}codespan({text:n}){return n}del({text:n}){return n}html({text:n}){return n}text({text:n}){return n}link({text:n}){return""+n}image({text:n}){return""+n}br(){return""}},On=class mo{options;renderer;textRenderer;constructor(e){this.options=e||fr,this.options.renderer=this.options.renderer||new ia,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new rl}static parse(e,t){return new mo(t).parse(e)}static parseInline(e,t){return new mo(t).parseInline(e)}parse(e,t=!0){let r="";for(let a=0;a<e.length;a++){const s=e[a];if(this.options.extensions?.renderers?.[s.type]){const l=s,o=this.options.extensions.renderers[l.type].call({parser:this},l);if(o!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(l.type)){r+=o||"";continue}}const i=s;switch(i.type){case"space":{r+=this.renderer.space(i);continue}case"hr":{r+=this.renderer.hr(i);continue}case"heading":{r+=this.renderer.heading(i);continue}case"code":{r+=this.renderer.code(i);continue}case"table":{r+=this.renderer.table(i);continue}case"blockquote":{r+=this.renderer.blockquote(i);continue}case"list":{r+=this.renderer.list(i);continue}case"html":{r+=this.renderer.html(i);continue}case"paragraph":{r+=this.renderer.paragraph(i);continue}case"text":{let l=i,o=this.renderer.text(l);for(;a+1<e.length&&e[a+1].type==="text";)l=e[++a],o+=`
`+this.renderer.text(l);t?r+=this.renderer.paragraph({type:"paragraph",raw:o,text:o,tokens:[{type:"text",raw:o,text:o,escaped:!0}]}):r+=o;continue}default:{const l='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return r}parseInline(e,t=this.renderer){let r="";for(let a=0;a<e.length;a++){const s=e[a];if(this.options.extensions?.renderers?.[s.type]){const l=this.options.extensions.renderers[s.type].call({parser:this},s);if(l!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){r+=l||"";continue}}const i=s;switch(i.type){case"escape":{r+=t.text(i);break}case"html":{r+=t.html(i);break}case"link":{r+=t.link(i);break}case"image":{r+=t.image(i);break}case"strong":{r+=t.strong(i);break}case"em":{r+=t.em(i);break}case"codespan":{r+=t.codespan(i);break}case"br":{r+=t.br(i);break}case"del":{r+=t.del(i);break}case"text":{r+=t.text(i);break}default:{const l='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return r}},aa=class{options;block;constructor(n){this.options=n||fr}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(n){return n}postprocess(n){return n}processAllTokens(n){return n}provideLexer(){return this.block?Ln.lex:Ln.lexInline}provideParser(){return this.block?On.parse:On.parseInline}},Zg=class{defaults=Js();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=On;Renderer=ia;TextRenderer=rl;Lexer=Ln;Tokenizer=ra;Hooks=aa;constructor(...n){this.use(...n)}walkTokens(n,e){let t=[];for(const r of n)switch(t=t.concat(e.call(this,r)),r.type){case"table":{const a=r;for(const s of a.header)t=t.concat(this.walkTokens(s.tokens,e));for(const s of a.rows)for(const i of s)t=t.concat(this.walkTokens(i.tokens,e));break}case"list":{const a=r;t=t.concat(this.walkTokens(a.items,e));break}default:{const a=r;this.defaults.extensions?.childTokens?.[a.type]?this.defaults.extensions.childTokens[a.type].forEach(s=>{const i=a[s].flat(1/0);t=t.concat(this.walkTokens(i,e))}):a.tokens&&(t=t.concat(this.walkTokens(a.tokens,e)))}}return t}use(...n){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return n.forEach(t=>{const r={...t};if(r.async=this.defaults.async||r.async||!1,t.extensions&&(t.extensions.forEach(a=>{if(!a.name)throw new Error("extension name required");if("renderer"in a){const s=e.renderers[a.name];s?e.renderers[a.name]=function(...i){let l=a.renderer.apply(this,i);return l===!1&&(l=s.apply(this,i)),l}:e.renderers[a.name]=a.renderer}if("tokenizer"in a){if(!a.level||a.level!=="block"&&a.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const s=e[a.level];s?s.unshift(a.tokenizer):e[a.level]=[a.tokenizer],a.start&&(a.level==="block"?e.startBlock?e.startBlock.push(a.start):e.startBlock=[a.start]:a.level==="inline"&&(e.startInline?e.startInline.push(a.start):e.startInline=[a.start]))}"childTokens"in a&&a.childTokens&&(e.childTokens[a.name]=a.childTokens)}),r.extensions=e),t.renderer){const a=this.defaults.renderer||new ia(this.defaults);for(const s in t.renderer){if(!(s in a))throw new Error(`renderer '${s}' does not exist`);if(["options","parser"].includes(s))continue;const i=s,l=t.renderer[i],o=a[i];a[i]=(...u)=>{let c=l.apply(a,u);return c===!1&&(c=o.apply(a,u)),c||""}}r.renderer=a}if(t.tokenizer){const a=this.defaults.tokenizer||new ra(this.defaults);for(const s in t.tokenizer){if(!(s in a))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;const i=s,l=t.tokenizer[i],o=a[i];a[i]=(...u)=>{let c=l.apply(a,u);return c===!1&&(c=o.apply(a,u)),c}}r.tokenizer=a}if(t.hooks){const a=this.defaults.hooks||new aa;for(const s in t.hooks){if(!(s in a))throw new Error(`hook '${s}' does not exist`);if(["options","block"].includes(s))continue;const i=s,l=t.hooks[i],o=a[i];aa.passThroughHooks.has(s)?a[i]=u=>{if(this.defaults.async)return Promise.resolve(l.call(a,u)).then(f=>o.call(a,f));const c=l.call(a,u);return o.call(a,c)}:a[i]=(...u)=>{let c=l.apply(a,u);return c===!1&&(c=o.apply(a,u)),c}}r.hooks=a}if(t.walkTokens){const a=this.defaults.walkTokens,s=t.walkTokens;r.walkTokens=function(i){let l=[];return l.push(s.call(this,i)),a&&(l=l.concat(a.call(this,i))),l}}this.defaults={...this.defaults,...r}}),this}setOptions(n){return this.defaults={...this.defaults,...n},this}lexer(n,e){return Ln.lex(n,e??this.defaults)}parser(n,e){return On.parse(n,e??this.defaults)}parseMarkdown(n){return(t,r)=>{const a={...r},s={...this.defaults,...a},i=this.onError(!!s.silent,!!s.async);if(this.defaults.async===!0&&a.async===!1)return i(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||t===null)return i(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return i(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));s.hooks&&(s.hooks.options=s,s.hooks.block=n);const l=s.hooks?s.hooks.provideLexer():n?Ln.lex:Ln.lexInline,o=s.hooks?s.hooks.provideParser():n?On.parse:On.parseInline;if(s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(t):t).then(u=>l(u,s)).then(u=>s.hooks?s.hooks.processAllTokens(u):u).then(u=>s.walkTokens?Promise.all(this.walkTokens(u,s.walkTokens)).then(()=>u):u).then(u=>o(u,s)).then(u=>s.hooks?s.hooks.postprocess(u):u).catch(i);try{s.hooks&&(t=s.hooks.preprocess(t));let u=l(t,s);s.hooks&&(u=s.hooks.processAllTokens(u)),s.walkTokens&&this.walkTokens(u,s.walkTokens);let c=o(u,s);return s.hooks&&(c=s.hooks.postprocess(c)),c}catch(u){return i(u)}}}onError(n,e){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,n){const r="<p>An error occurred:</p><pre>"+yn(t.message+"",!0)+"</pre>";return e?Promise.resolve(r):r}if(e)return Promise.reject(t);throw t}}},hr=new Zg;function et(n,e){return hr.parse(n,e)}et.options=et.setOptions=function(n){return hr.setOptions(n),et.defaults=hr.defaults,Mc(et.defaults),et},et.getDefaults=Js,et.defaults=fr,et.use=function(...n){return hr.use(...n),et.defaults=hr.defaults,Mc(et.defaults),et},et.walkTokens=function(n,e){return hr.walkTokens(n,e)},et.parseInline=hr.parseInline,et.Parser=On,et.parser=On.parse,et.Renderer=ia,et.TextRenderer=rl,et.Lexer=Ln,et.lexer=Ln.lex,et.Tokenizer=ra,et.Hooks=aa,et.parse=et,et.options,et.setOptions,et.use,et.walkTokens,et.parseInline,On.parse,Ln.lex;const ey=[".md",".markdown",".mdown",".mkd",".mkdn"];function ty(n){try{const e=new URL(n).pathname.toLowerCase();return ey.some(t=>e.endsWith(t))}catch{return!1}}function ny(n,e){const t=e.match(null,null,null,n.doc());if(t.length!==0){for(const r of t)if(r.predicate.value==="http://www.w3.org/ns/solid/terms#content"||r.predicate.value==="http://purl.org/dc/terms/content")return r.object.value}}Qe({label:"Markdown",icon:"📝",canHandle(n,e){return ty(n.value)},render(n,e,t){t.innerHTML="";const r=document.createElement("div");r.className="markdown-view";const a=ny(n,e);if(a)r.innerHTML=et.parse(a);else{const s=document.createElement("p");s.className="loading",s.textContent="Loading markdown...",r.appendChild(s),fetch(n.value).then(i=>{if(!i.ok)throw new Error(`HTTP ${i.status}`);return i.text()}).then(i=>{r.innerHTML=et.parse(i)}).catch(()=>{r.innerHTML="";const i=document.createElement("p");i.className="error",i.textContent="Failed to load markdown content.",r.appendChild(i)})}t.appendChild(r)}});function ry(n){try{return new URL(n).pathname.toLowerCase().endsWith(".pdf")}catch{return!1}}Qe({label:"PDF",icon:"📄",canHandle(n,e){return ry(n.value)},render(n,e,t){t.innerHTML="";const r=document.createElement("div");r.className="pdf-view";const a=document.createElement("h3");a.className="pdf-title",a.textContent=Me(n.value),r.appendChild(a);const s=document.createElement("object");s.className="pdf-embed",s.data=n.value,s.type="application/pdf";const i=document.createElement("div");i.className="pdf-fallback";const l=document.createElement("p");l.textContent="Unable to display PDF inline.",i.appendChild(l);const o=document.createElement("a");o.href=n.value,o.textContent="Download PDF",o.target="_blank",o.rel="noopener",i.appendChild(o),s.appendChild(i),r.appendChild(s),t.appendChild(r)}});const iy={".mp4":"video/mp4",".webm":"video/webm",".ogg":"video/ogg",".ogv":"video/ogg",".mov":"video/mp4",".m4v":"video/mp4"};function ed(n){try{const e=new URL(n).pathname.toLowerCase();for(const[t,r]of Object.entries(iy))if(e.endsWith(t))return r}catch{}}function ay(n,e){return!!e.each(n,Ue("type"),null,null).map(a=>a.value).includes(re("VideoObject").value)}Qe({label:"Video",icon:"🎬",canHandle(n,e){return ed(n.value)!==void 0||ay(n,e)},render(n,e,t){t.innerHTML="";const r=document.createElement("div");r.className="video-view";const a=document.createElement("video");a.className="video-main",a.controls=!0,a.preload="metadata";const s=ed(n.value);if(s){const u=document.createElement("source");u.src=n.value,u.type=s,a.appendChild(u)}else a.src=n.value;const i=document.createElement("p");i.textContent="Your browser does not support this video format.",a.appendChild(i),r.appendChild(a);const l=e.any(n,Fe("title"),null,null)?.value??e.any(n,re("name"),null,null)?.value,o=e.any(n,Fe("description"),null,null)?.value??e.any(n,re("description"),null,null)?.value;if(l||o){const u=document.createElement("div");if(u.className="video-caption",l){const c=document.createElement("h3");c.textContent=l,u.appendChild(c)}if(o){const c=document.createElement("p");c.textContent=o,u.appendChild(c)}r.appendChild(u)}t.appendChild(r)}});function sy(n,e,t){t.innerHTML="";const r=document.createElement("div");r.className="gallery-view";const a=e.any(n,re("name"),null,null)?.value??e.any(n,Fe("title"),null,null)?.value??Me(n.value),s=document.createElement("h2");s.className="gallery-title",s.textContent=a,r.appendChild(s);const i=e.any(n,re("description"),null,null)?.value??e.any(n,Fe("description"),null,null)?.value;if(i){const c=document.createElement("p");c.className="gallery-description",c.textContent=i,r.appendChild(c)}const l=td(n,e),o=document.createElement("p");if(o.className="gallery-count",o.textContent=`${l.length} image${l.length!==1?"s":""}`,r.appendChild(o),l.length===0){const c=document.createElement("p");c.className="gallery-empty",c.textContent="No images found.",r.appendChild(c),t.appendChild(r);return}const u=document.createElement("div");u.className="gallery-grid";for(const c of l){const f=document.createElement("div");f.className="gallery-cell";const d=document.createElement("img");d.className="gallery-thumb",d.src=c,d.alt=ly(c),d.loading="lazy",d.addEventListener("click",()=>{oy(c,l,r)}),f.appendChild(d),u.appendChild(f)}r.appendChild(u),t.appendChild(r)}function ly(n){return n.split("?")[0].split("#")[0].split("/").pop()??"image"}function oy(n,e,t){const r=t.querySelector(".gallery-lightbox");r&&r.remove();let a=e.indexOf(n);a===-1&&(a=0);const s=document.createElement("div");s.className="gallery-lightbox";const i=document.createElement("img");if(i.className="gallery-lightbox-img",i.src=e[a],i.alt="Full size image",s.addEventListener("click",o=>{o.target===s&&s.remove()}),e.length>1){const o=document.createElement("button");o.className="gallery-lightbox-prev",o.textContent="❮",o.addEventListener("click",c=>{c.stopPropagation(),a=(a-1+e.length)%e.length,i.src=e[a]}),s.appendChild(o);const u=document.createElement("button");u.className="gallery-lightbox-next",u.textContent="❯",u.addEventListener("click",c=>{c.stopPropagation(),a=(a+1)%e.length,i.src=e[a]}),s.appendChild(u)}const l=document.createElement("button");l.className="gallery-lightbox-close",l.textContent="×",l.addEventListener("click",()=>s.remove()),s.appendChild(i),s.appendChild(l),t.appendChild(s)}const uy=[re("ImageGallery").value,re("MediaGallery").value,re("CollectionPage").value],cy=[".png",".jpg",".jpeg",".gif",".svg",".webp",".bmp",".ico",".avif",".tiff"];function td(n,e){const t=new Set;for(const r of e.each(n,re("image"),null,null))t.add(r.value);for(const r of e.each(n,He("img"),null,null))t.add(r.value);for(const r of e.each(n,re("hasPart"),null,null)){dy(r.value)&&t.add(r.value);const a=e.each(r,Ue("type"),null,null).map(s=>s.value);if(a.includes(re("ImageObject").value)||a.includes(He("Image").value)){const s=e.any(r,re("contentUrl"),null,null)?.value??e.any(r,re("url"),null,null)?.value??r.value;t.add(s)}}for(const r of e.each(n,re("associatedMedia"),null,null))if(e.each(r,Ue("type"),null,null).map(s=>s.value).includes(re("ImageObject").value)){const s=e.any(r,re("contentUrl"),null,null)?.value??r.value;t.add(s)}return Array.from(t)}function dy(n){const e=n.split("?")[0].split("#")[0].toLowerCase();return cy.some(t=>e.endsWith(t))}function fy(n,e){const t=e.each(n,Ue("type"),null,null).map(a=>a.value);for(const a of uy)if(t.includes(a))return!0;return td(n,e).length>=2}Qe({label:"Gallery",icon:"🖼",canHandle(n,e){return fy(n,e)},render(n,e,t){sy(n,e,t)}});function hy(n){const e=new Date(n);return isNaN(e.getTime())?n:e.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})}function py(n,e){return e.any(n,re("name"),null,null)?.value??e.any(n,He("name"),null,null)?.value??Me(n.value)}function my(n,e,t){t.innerHTML="";const r=document.createElement("article");r.className="article-view";const a=e.any(n,re("headline"),null,null)?.value??e.any(n,re("name"),null,null)?.value??e.any(n,Fe("title"),null,null)?.value??Me(n.value),s=document.createElement("h1");s.className="article-title",s.textContent=a,r.appendChild(s);const i=e.any(n,re("author"),null,null),l=e.any(n,re("datePublished"),null,null)?.value,o=e.any(n,Fe("created"),null,null)?.value,u=l??o;if(i||u){const v=document.createElement("div");if(v.className="article-byline",i){const b=document.createElement("span");b.className="article-author",b.textContent=py(i,e),v.appendChild(b)}if(u){const b=document.createElement("time");b.className="article-date",b.dateTime=u,b.textContent=hy(u),v.appendChild(b)}r.appendChild(v)}const c=e.any(n,re("image"),null,null)?.value??e.any(n,re("thumbnailUrl"),null,null)?.value;if(c){const v=document.createElement("img");v.className="article-image",v.src=c,v.alt=a,r.appendChild(v)}const f=e.any(n,re("description"),null,null)?.value??e.any(n,re("abstract"),null,null)?.value??e.any(n,Fe("abstract"),null,null)?.value;if(f){const v=document.createElement("p");v.className="article-description",v.textContent=f,r.appendChild(v)}const d=e.any(n,re("articleBody"),null,null)?.value;if(d){const v=document.createElement("div");v.className="article-body";const b=d.split(/\n\n+/);for(const _ of b){const N=_.trim();if(!N)continue;const E=document.createElement("p");E.textContent=N,v.appendChild(E)}r.appendChild(v)}const g=e.any(n,re("publisher"),null,null);if(g){const v=e.any(g,re("name"),null,null)?.value??Me(g.value),b=document.createElement("p");b.className="article-publisher",b.textContent=`Published by ${v}`,r.appendChild(b)}const m=e.each(n,re("keywords"),null,null);if(m.length>0){const v=document.createElement("div");v.className="article-tags";for(const b of m){const _=document.createElement("span");_.className="article-tag",_.textContent=b.value,v.appendChild(_)}r.appendChild(v)}t.appendChild(r)}const gy=["Article","BlogPosting","NewsArticle","ScholarlyArticle","TechArticle","SocialMediaPosting","Report"];function yy(n,e){const r=e.each(n,Ue("type"),null,null).map(a=>a.value);for(const a of gy)if(r.includes(re(a).value))return!0;return!!(e.any(n,re("articleBody"),null,null)||e.any(n,re("headline"),null,null))}Qe({label:"Article",icon:"📰",canHandle(n,e){return yy(n,e)},render(n,e,t){my(n,e,t)}});function wy(n,e,t){t.innerHTML="";const r=document.createElement("div");r.className="map-view";const a=e.any(n,re("name"),null,null)?.value??e.any(n,Fe("title"),null,null)?.value??Me(n.value),s=document.createElement("h2");s.className="map-title",s.textContent=a,r.appendChild(s);const i=e.any(n,re("address"),null,null)?.value??void 0;if(i){const u=document.createElement("p");u.className="map-address",u.textContent=i,r.appendChild(u)}const l=e.any(n,re("description"),null,null)?.value??e.any(n,Fe("description"),null,null)?.value;if(l){const u=document.createElement("p");u.className="map-description",u.textContent=l,r.appendChild(u)}const o=nd(n,e);if(o){const u=document.createElement("div");u.className="map-embed";const c=document.createElement("iframe");c.className="map-frame",c.src=`https://www.openstreetmap.org/export/embed.html?bbox=${o.lng-.01},${o.lat-.005},${o.lng+.01},${o.lat+.005}&layer=mapnik&marker=${o.lat},${o.lng}`,c.setAttribute("sandbox","allow-scripts allow-same-origin"),c.title=`Map showing ${a}`,u.appendChild(c);const f=document.createElement("a");f.className="map-osm-link",f.href=`https://www.openstreetmap.org/?mlat=${o.lat}&mlon=${o.lng}#map=16/${o.lat}/${o.lng}`,f.textContent="View on OpenStreetMap",f.target="_blank",f.rel="noopener",u.appendChild(f),r.appendChild(u)}else{const u=document.createElement("p");u.className="map-no-coords",u.textContent="No coordinates available for this place.",r.appendChild(u)}t.appendChild(r)}function nd(n,e){const t=e.any(n,re("latitude"),null,null)?.value,r=e.any(n,re("longitude"),null,null)?.value;if(t&&r){const i=parseFloat(t),l=parseFloat(r);if(!isNaN(i)&&!isNaN(l))return{lat:i,lng:l}}const a=e.any(n,re("geo"),null,null);if(a){const i=e.any(a,re("latitude"),null,null)?.value,l=e.any(a,re("longitude"),null,null)?.value;if(i&&l){const o=parseFloat(i),u=parseFloat(l);if(!isNaN(o)&&!isNaN(u))return{lat:o,lng:u}}}const s=e.any(n,re("location"),null,null);if(s){const i=e.any(s,re("geo"),null,null);if(i){const u=e.any(i,re("latitude"),null,null)?.value,c=e.any(i,re("longitude"),null,null)?.value;if(u&&c){const f=parseFloat(u),d=parseFloat(c);if(!isNaN(f)&&!isNaN(d))return{lat:f,lng:d}}}const l=e.any(s,re("latitude"),null,null)?.value,o=e.any(s,re("longitude"),null,null)?.value;if(l&&o){const u=parseFloat(l),c=parseFloat(o);if(!isNaN(u)&&!isNaN(c))return{lat:u,lng:c}}}return null}function vy(n,e){const r=e.each(n,Ue("type"),null,null).map(a=>a.value);return!!(r.includes(re("Place").value)||r.includes(re("GeoCoordinates").value))}Qe({label:"Map",icon:"🗺",canHandle(n,e){return!!(nd(n,e)||vy(n,e))},render(n,e,t){wy(n,e,t)}});function rd(n){const e=new Date(n);return isNaN(e.getTime())?n:e.toLocaleString(void 0,{weekday:"short",month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}function sa(n){const e=new Date(n);return isNaN(e.getTime())?n:e.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric",year:"numeric"})}function id(n,e){const t=e.any(n,re("name"),null,null)?.value;if(t)return t;const r=e.any(n,re("address"),null,null)?.value;return r&&!r.startsWith("http")?r:n.value.startsWith("http")?Me(n.value):n.value}function by(n){for(const e of n){if(e.includes("Flight"))return"Flight";if(e.includes("TrainTrip"))return"Train";if(e.includes("BusTrip"))return"Bus";if(e.includes("BoatTrip"))return"Boat"}return"Leg"}function ad(n,e,t){const r=document.createElement("div");r.className="trip-leg";const a=e.each(n,Ue("type"),null,null).map(v=>v.value),s=by(a),i=document.createElement("div");i.className="trip-leg-header";const l=document.createElement("span");l.className="trip-leg-mode",l.textContent=s;const o=e.any(n,re("flightNumber"),null,null)?.value??e.any(n,re("trainNumber"),null,null)?.value??e.any(n,re("busNumber"),null,null)?.value??e.any(n,re("name"),null,null)?.value;o&&(l.textContent+=` ${o}`),i.appendChild(l);const u=e.any(n,re("provider"),null,null)??e.any(n,re("airline"),null,null);if(u){const v=e.any(u,re("name"),null,null)?.value??(u.value.startsWith("http")?null:u.value);if(v){const b=document.createElement("span");b.className="trip-leg-provider",b.textContent=v,i.appendChild(b)}}r.appendChild(i);const c=document.createElement("div");c.className="trip-leg-route";const f=e.any(n,re("departureStation"),null,null)??e.any(n,re("departureAirport"),null,null)??e.any(n,re("departureStop"),null,null)??e.any(n,re("fromLocation"),null,null),d=e.any(n,re("arrivalStation"),null,null)??e.any(n,re("arrivalAirport"),null,null)??e.any(n,re("arrivalStop"),null,null)??e.any(n,re("toLocation"),null,null);if(f||d){const v=f?id(f,e):"?",b=d?id(d,e):"?";c.innerHTML=`<span class="trip-from">${v}</span><span class="trip-arrow">→</span><span class="trip-to">${b}</span>`,r.appendChild(c)}const g=e.any(n,re("departureTime"),null,null)?.value,m=e.any(n,re("arrivalTime"),null,null)?.value;if(g||m){const v=document.createElement("div");if(v.className="trip-leg-times",g){const b=document.createElement("span");b.className="trip-leg-time",b.textContent=`Departs: ${rd(g)}`,v.appendChild(b)}if(m){const b=document.createElement("span");b.className="trip-leg-time",b.textContent=`Arrives: ${rd(m)}`,v.appendChild(b)}r.appendChild(v)}t.appendChild(r)}function Ey(n,e,t){t.innerHTML="";const r=document.createElement("div");r.className="trip-view";const a=e.any(n,re("name"),null,null)?.value??e.any(n,Fe("title"),null,null)?.value??Me(n.value),s=document.createElement("h2");s.className="trip-title",s.textContent=a,r.appendChild(s);const i=e.any(n,re("description"),null,null)?.value??e.any(n,Fe("description"),null,null)?.value;if(i){const d=document.createElement("p");d.className="trip-description",d.textContent=i,r.appendChild(d)}const l=e.any(n,re("departureTime"),null,null)?.value??e.any(n,re("startDate"),null,null)?.value,o=e.any(n,re("arrivalTime"),null,null)?.value??e.any(n,re("endDate"),null,null)?.value;if(l||o){const d=document.createElement("p");d.className="trip-dates",l&&o?d.textContent=`${sa(l)} — ${sa(o)}`:l?d.textContent=sa(l):o&&(d.textContent=`Until ${sa(o)}`),r.appendChild(d)}e.each(n,Ue("type"),null,null).map(d=>d.value).some(d=>d.includes("Flight")||d.includes("TrainTrip")||d.includes("BusTrip")||d.includes("BoatTrip"))&&ad(n,e,r);const f=e.each(n,re("itinerary"),null,null);if(f.length>0){const d=document.createElement("div");d.className="trip-itinerary";const g=document.createElement("h3");g.textContent=`Itinerary (${f.length} leg${f.length!==1?"s":""})`,d.appendChild(g);const m=[...f].sort((v,b)=>{const _=e.any(v,re("departureTime"),null,null)?.value??"",N=e.any(b,re("departureTime"),null,null)?.value??"";return _.localeCompare(N)});for(const v of m)ad(v,e,d);r.appendChild(d)}t.appendChild(r)}const xy=["Trip","TouristTrip","Flight","TrainTrip","BusTrip","BoatTrip","TravelAction"];function _y(n,e){const t=e.each(n,Ue("type"),null,null).map(s=>s.value);for(const s of xy)if(t.includes(re(s).value))return!0;if(e.any(n,re("itinerary"),null,null))return!0;const r=e.any(n,re("departureTime"),null,null),a=e.any(n,re("arrivalTime"),null,null);return!!(r&&a)}Qe({label:"Trip",icon:"✈",canHandle(n,e){return _y(n,e)},render(n,e,t){Ey(n,e,t)}});function Cy(n,e){const t=new Set,r=[],a=[re("event"),re("subEvent")];for(const s of a)for(const i of e.each(n,s,null,null))i.termType==="NamedNode"&&!t.has(i.value)&&(t.add(i.value),r.push(i));return r}function Ay(n,e){const t=e.any(n,re("name"),null,null)?.value??e.any(n,Ct("label"),null,null)?.value??"Untitled Event",r=e.any(n,re("startDate"),null,null)?.value??null,a=e.any(n,re("endDate"),null,null)?.value??null,s=e.any(n,re("location"),null,null);let i="";return s&&(s.termType==="Literal"?i=s.value:s.termType==="NamedNode"&&(i=e.any(s,re("name"),null,null)?.value??e.any(s,Ct("label"),null,null)?.value??s.value)),{uri:n.value,name:t,startDate:r?new Date(r):null,endDate:a?new Date(a):null,location:i}}function Ny(n,e){return new Date(n,e+1,0).getDate()}function Ty(n,e){return new Date(n,e,1).getDay()}function Sy(n,e){return n.getFullYear()===e.getFullYear()&&n.getMonth()===e.getMonth()&&n.getDate()===e.getDate()}function Dy(n,e,t,r){const a=new Date(e,t,r);return n.filter(s=>s.startDate?!!(Sy(s.startDate,a)||s.endDate&&s.startDate<=a&&s.endDate>=a):!1)}function Iy(n){return n.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})}const sd=["January","February","March","April","May","June","July","August","September","October","November","December"],Ry=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function il(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function ky(n,e,t){const r=e.any(n,re("name"),null,null)?.value??e.any(n,Ct("label"),null,null)?.value??"Schedule",a=e.any(n,re("description"),null,null)?.value??null,i=Cy(n,e).map(p=>Ay(p,e)),l=i.filter(p=>p.startDate!==null);l.sort((p,S)=>p.startDate.getTime()-S.startDate.getTime());let o,u;if(l.length>0)o=l[0].startDate.getFullYear(),u=l[0].startDate.getMonth();else{const p=new Date;o=p.getFullYear(),u=p.getMonth()}const c=document.createElement("div");c.className="sched-pane",t.appendChild(c);const f=document.createElement("h2");if(f.className="sched-title",f.textContent=r,c.appendChild(f),a){const p=document.createElement("p");p.className="sched-description",p.textContent=a,c.appendChild(p)}const d=document.createElement("p");d.className="sched-count",d.textContent=`${i.length} event${i.length!==1?"s":""}`,c.appendChild(d);const g=document.createElement("div");g.className="sched-nav",c.appendChild(g);const m=document.createElement("button");m.className="sched-prev",m.textContent="←",m.setAttribute("aria-label","Previous month");const v=document.createElement("span");v.className="sched-month-label";const b=document.createElement("button");b.className="sched-next",b.textContent="→",b.setAttribute("aria-label","Next month"),g.appendChild(m),g.appendChild(v),g.appendChild(b);const _=document.createElement("div");_.className="sched-calendar",c.appendChild(_);const N=document.createElement("div");N.className="sched-detail",c.appendChild(N);function E(){v.textContent=`${sd[u]} ${o}`,_.innerHTML="";for(const F of Ry){const A=document.createElement("div");A.className="sched-day-header",A.textContent=F,_.appendChild(A)}const p=Ny(o,u),S=Ty(o,u);for(let F=0;F<S;F++){const A=document.createElement("div");A.className="sched-day sched-day-empty",_.appendChild(A)}for(let F=1;F<=p;F++){const A=document.createElement("div");A.className="sched-day",A.setAttribute("data-day",String(F));const k=document.createElement("span");k.className="sched-day-num",k.textContent=String(F),A.appendChild(k);const C=Dy(i,o,u,F);if(C.length>0){A.classList.add("sched-has-events");const L=document.createElement("span");L.className="sched-event-dot",L.textContent=String(C.length),A.appendChild(L),A.addEventListener("click",()=>{w(F,C)})}_.appendChild(A)}N.innerHTML=""}function w(p,S){N.innerHTML="";const F=document.createElement("h3");F.className="sched-detail-heading",F.textContent=`${sd[u]} ${p}, ${o}`,N.appendChild(F);for(const A of S){const k=document.createElement("div");k.className="sched-event-item";let C=`<span class="sched-event-name">${il(A.name)}</span>`;A.startDate&&(C+=` <span class="sched-event-time">${il(Iy(A.startDate))}</span>`),A.location&&(C+=` <span class="sched-event-location">${il(A.location)}</span>`),k.innerHTML=C,N.appendChild(k)}}m.addEventListener("click",()=>{u--,u<0&&(u=11,o--),E()}),b.addEventListener("click",()=>{u++,u>11&&(u=0,o++),E()}),E()}const Ly=[re("Schedule"),re("EventSeries"),re("EventSchedule")];function Oy(n,e){const t=new Set,r=[],a=[re("event"),re("subEvent")];for(const s of a)for(const i of e.each(n,s,null,null))i.termType==="NamedNode"&&!t.has(i.value)&&(t.add(i.value),r.push(i));return r}Qe({label:"Schedule",icon:"📅",canHandle(n,e){for(const r of Ly)if(e.holds(n,Ue("type"),r))return!0;return Oy(n,e).length>=2},render(n,e,t){ky(n,e,t)}});function ld(n){const e=new Date(n);return isNaN(e.getTime())?n:/^\d{4}-\d{2}-\d{2}$/.test(n)?e.toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"}):e.toLocaleString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function Fy(n){const e=new Date(n);return isNaN(e.getTime())?n:e.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})}function By(n,e){const t=new Date(n),r=new Date(e);return t.getFullYear()===r.getFullYear()&&t.getMonth()===r.getMonth()&&t.getDate()===r.getDate()}function wi(n,e,t,r=!1){if(!t)return;const a=document.createElement("div");a.className="event-detail";const s=document.createElement("span");if(s.className="event-label",s.textContent=e,a.appendChild(s),r&&(t.startsWith("http://")||t.startsWith("https://"))){const i=document.createElement("a");i.href=t,i.textContent=Me(t),i.target="_blank",i.rel="noopener",a.appendChild(i)}else{const i=document.createElement("span");i.className="event-value",i.textContent=t,a.appendChild(i)}n.appendChild(a)}function Py(n,e,t){t.innerHTML="";const r=document.createElement("div");r.className="event-view";const a=e.any(n,re("name"),null,null)?.value??e.any(n,Fe("title"),null,null)?.value??Me(n.value),s=document.createElement("h2");s.className="event-title",s.textContent=a,r.appendChild(s);const i=e.any(n,re("startDate"),null,null)?.value,l=e.any(n,re("endDate"),null,null)?.value;if(i){let b=ld(i);l&&(By(i,l)?b+=` – ${Fy(l)}`:b+=` – ${ld(l)}`);const _=document.createElement("p");_.className="event-date",_.textContent=b,r.appendChild(_)}const o=document.createElement("div");o.className="event-details";const u=e.any(n,re("location"),null,null);let c;u&&(c=e.any(u,re("name"),null,null)?.value??u.value),wi(o,"Location",c);const f=e.any(n,re("organizer"),null,null);if(f){const b=e.any(f,re("name"),null,null)?.value??e.any(f,He("name"),null,null)?.value??Me(f.value);wi(o,"Organizer",b)}const d=e.any(n,re("url"),null,null)?.value;wi(o,"Link",d,!0);const g=e.any(n,re("eventStatus"),null,null)?.value;g&&wi(o,"Status",Me(g));const m=e.any(n,re("eventAttendanceMode"),null,null)?.value;m&&wi(o,"Format",Me(m)),r.appendChild(o);const v=e.any(n,re("description"),null,null)?.value??e.any(n,Fe("description"),null,null)?.value;if(v){const b=document.createElement("div");b.className="event-description",b.textContent=v,r.appendChild(b)}t.appendChild(r)}function My(n,e){const r=e.each(n,Ue("type"),null,null).map(a=>a.value);return!!(r.includes(re("Event").value)||r.includes(re("SocialEvent").value)||r.includes(re("BusinessEvent").value)||r.includes(re("MusicEvent").value)||r.includes(re("EducationEvent").value)||e.any(n,re("startDate"),null,null)&&e.any(n,re("name"),null,null))}Qe({label:"Event",icon:"📅",canHandle(n,e){return My(n,e)},render(n,e,t){Py(n,e,t)}});function Uy(n,e){return e.any(n,Fe("title"),null,null)?.value??e.any(n,re("name"),null,null)?.value??"Bookmarks"}function $y(n,e){const t=e.each(n,dr("hasMember"),null,null),r=[];for(const a of t){const s=a,i=e.any(s,Fe("title"),null,null)?.value??e.any(s,re("name"),null,null)?.value??e.any(s,dr("title"),null,null)?.value??Me(s.value),l=e.any(s,dr("recalls"),null,null)?.value??null,o=e.any(s,Fe("created"),null,null)?.value,u=o?new Date(o):null,c=e.any(s,Fe("description"),null,null)?.value??e.any(s,re("description"),null,null)?.value??null;r.push({uri:s.value,title:i,recalls:l,created:u,description:c})}return r.sort((a,s)=>a.created&&s.created?s.created.getTime()-a.created.getTime():a.created?-1:s.created?1:a.title.localeCompare(s.title)),r}function qy(n){return n.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}function jy(n,e,t){t.innerHTML="";const r=document.createElement("div");r.className="bookmarks-view";const a=Uy(n,e),s=document.createElement("h2");s.className="bookmarks-title",s.textContent=a,r.appendChild(s);const i=$y(n,e),l=document.createElement("p");if(l.className="bookmarks-count",l.textContent=`${i.length} bookmark${i.length!==1?"s":""}`,r.appendChild(l),i.length===0){const u=document.createElement("p");u.className="bookmarks-empty",u.textContent="No bookmarks saved.",r.appendChild(u),t.appendChild(r);return}const o=document.createElement("ul");o.className="bookmarks-list";for(const u of i){const c=document.createElement("li");c.className="bookmark-item";const f=document.createElement("a");if(f.className="bookmark-title",f.textContent=u.title,u.recalls?(f.href=u.recalls,f.target="_blank",f.rel="noopener"):(f.href=u.uri,f.target="_blank",f.rel="noopener"),c.appendChild(f),u.recalls){const d=document.createElement("span");d.className="bookmark-url",d.textContent=u.recalls,c.appendChild(d)}if(u.created||u.description){const d=document.createElement("div");if(d.className="bookmark-meta",u.created){const g=document.createElement("span");g.className="bookmark-date",g.textContent=qy(u.created),d.appendChild(g)}if(u.description){const g=document.createElement("span");g.className="bookmark-desc",g.textContent=u.description,d.appendChild(g)}c.appendChild(d)}o.appendChild(c)}r.appendChild(o),t.appendChild(r)}function Hy(n,e){const r=e.each(n,Ue("type"),null,null).map(s=>s.value);if(r.includes(dr("BookmarkList").value)||r.includes(dr("Topic").value))return!0;const a=e.each(n,dr("hasMember"),null,null);if(a.length>0){for(const s of a)if(e.each(s,Ue("type"),null,null).some(l=>l.value===dr("Bookmark").value))return!0}return!1}Qe({label:"Bookmarks",icon:"🔖",canHandle(n,e){return Hy(n,e)},render(n,e,t){jy(n,e,t)}});function od(n,e){return e.any(n,ot("name"),null,null)?.value??e.any(n,re("name"),null,null)?.value??e.any(n,He("name"),null,null)?.value??Me(n.value)}function Wy(n,e){const t=e.each(n,Ue("type"),null,null);for(const r of t)switch(Me(r.value).toLowerCase()){case"create":return"created";case"update":return"updated";case"delete":return"deleted";case"follow":return"followed";case"like":return"liked";case"announce":return"shared";case"add":return"added";case"remove":return"removed";case"accept":return"accepted";case"reject":return"rejected";case"undo":return"undid";case"invite":return"invited";case"join":return"joined";case"leave":return"left";case"offer":return"offered"}return"did something with"}function ud(n,e){const t=e.any(n,ot("actor"),null,null),r=e.any(n,ot("object"),null,null),a=e.any(n,ot("published"),null,null)?.value;return{uri:n.value,actorName:t?od(t,e):null,actorUri:t?.value??null,verb:Wy(n,e),objectName:r?od(r,e):null,objectUri:r?.value??null,summary:e.any(n,ot("summary"),null,null)?.value??null,content:e.any(n,ot("content"),null,null)?.value??null,published:a?new Date(a):null}}function Vy(n,e){return[...e.each(n,ot("items"),null,null),...e.each(n,ot("orderedItems"),null,null)]}function zy(n,e){const t=e.each(n,Ue("type"),null,null).map(r=>r.value);return["Collection","OrderedCollection","CollectionPage","OrderedCollectionPage"].some(r=>t.includes(ot(r).value))}function Gy(n){return n.toLocaleString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function cd(n){const e=document.createElement("div");e.className="activity-item";const t=document.createElement("div");if(t.className="activity-summary",n.summary)t.textContent=n.summary;else{if(n.actorName){const r=document.createElement("a");r.className="activity-actor",r.textContent=n.actorName,n.actorUri&&(r.href=`?uri=${encodeURIComponent(n.actorUri)}`,r.addEventListener("click",a=>{a.preventDefault(),zs(n.actorUri)})),t.appendChild(r),t.appendChild(document.createTextNode(` ${n.verb} `))}if(n.objectName){const r=document.createElement("a");r.className="activity-object",r.textContent=n.objectName,n.objectUri&&(r.href=`?uri=${encodeURIComponent(n.objectUri)}`,r.addEventListener("click",a=>{a.preventDefault(),zs(n.objectUri)})),t.appendChild(r)}}if(e.appendChild(t),n.content){const r=document.createElement("p");r.className="activity-content",r.textContent=n.content,e.appendChild(r)}if(n.published){const r=document.createElement("time");r.className="activity-time",r.dateTime=n.published.toISOString(),r.textContent=Gy(n.published),e.appendChild(r)}return e}function Jy(n,e,t){t.innerHTML="";const r=document.createElement("div");if(r.className="activity-view",zy(n,e)){const a=e.any(n,ot("name"),null,null)?.value??"Activities",s=document.createElement("h2");s.className="activity-title",s.textContent=a,r.appendChild(s);const i=e.any(n,ot("totalItems"),null,null)?.value;if(i){const u=document.createElement("p");u.className="activity-count",u.textContent=`${i} item${i!=="1"?"s":""}`,r.appendChild(u)}const l=Vy(n,e),o=document.createElement("div");if(o.className="activity-timeline",l.length===0){const u=document.createElement("p");u.className="activity-empty",u.textContent="No activities.",r.appendChild(u)}else{for(const u of l){const c=ud(u,e);o.appendChild(cd(c))}r.appendChild(o)}}else{const a=ud(n,e),s=document.createElement("div");s.className="activity-timeline",s.appendChild(cd(a)),r.appendChild(s)}t.appendChild(r)}const Ky=["Activity","Create","Update","Delete","Follow","Like","Announce","Add","Remove","Accept","Reject","Undo","Invite","Join","Leave","Offer"],Xy=["Collection","OrderedCollection","CollectionPage","OrderedCollectionPage"];function Qy(n,e){const r=e.each(n,Ue("type"),null,null).map(a=>a.value);for(const a of Ky)if(r.includes(ot(a).value))return!0;for(const a of Xy)if(r.includes(ot(a).value))return!0;return!!(e.any(n,ot("actor"),null,null)&&e.any(n,ot("object"),null,null))}Qe({label:"Activity",icon:"🔔",canHandle(n,e){return Qy(n,e)},render(n,e,t){Jy(n,e,t)}});function al(n,e){try{return new Intl.NumberFormat(void 0,{style:"currency",currency:e||"USD"}).format(n)}catch{return`${e?`${e} `:""}${n.toFixed(2)}`}}function Yy(n,e){const t=e.each(n,Ue("type"),null,null).map(r=>r.value);return!!(t.includes(It("BankAccount").value)||t.includes(It("PaymentCard").value)||t.includes(re("BankAccount").value)||e.any(n,It("transaction"),null,null))}function dd(n,e){const t=e.any(n,It("description"),null,null)?.value??e.any(n,Fe("title"),null,null)?.value??e.any(n,re("description"),null,null)?.value??e.any(n,re("name"),null,null)?.value??Me(n.value),r=e.any(n,It("amount"),null,null)?.value??e.any(n,re("price"),null,null)?.value??e.any(n,re("amount"),null,null)?.value,a=r?parseFloat(r):null,s=e.any(n,It("currency"),null,null)?.value??e.any(n,re("priceCurrency"),null,null)?.value??e.any(n,re("currency"),null,null)?.value??"",i=e.any(n,It("date"),null,null)?.value??e.any(n,Fe("date"),null,null)?.value??e.any(n,re("dateCreated"),null,null)?.value??null,l=e.any(n,It("category"),null,null),o=l?e.any(l,Ct("label"),null,null)?.value??e.any(l,re("name"),null,null)?.value??Me(l.value):null,u=e.any(n,It("payee"),null,null)??e.any(n,re("recipient"),null,null),c=u?e.any(u,re("name"),null,null)?.value??(u.value.startsWith("http")?Me(u.value):u.value):null;return{uri:n.value,date:i,description:t,amount:a,currency:s,category:o,payee:c}}function Zy(n,e,t){const a=e.each(n,It("transaction"),null,null).map(d=>dd(d,e));a.sort((d,g)=>!d.date&&!g.date?0:d.date?g.date?g.date.localeCompare(d.date):-1:1);const s=document.createElement("p");if(s.className="txn-count",s.textContent=`${a.length} transaction${a.length!==1?"s":""}`,t.appendChild(s),a.length===0){const d=document.createElement("p");d.className="txn-empty",d.textContent="No transactions found.",t.appendChild(d);return}const i=a.reduce((d,g)=>d+(g.amount??0),0),l=a.find(d=>d.currency)?.currency??"";if(i!==0){const d=document.createElement("p");d.className="txn-total",d.textContent=`Balance: ${al(i,l)}`,t.appendChild(d)}const o=document.createElement("div");o.className="txn-table-wrapper";const u=document.createElement("table");u.className="txn-table";const c=document.createElement("thead");c.innerHTML='<tr><th>Date</th><th>Description</th><th>Category</th><th class="txn-amount-col">Amount</th></tr>',u.appendChild(c);const f=document.createElement("tbody");for(const d of a){const g=document.createElement("tr");g.className="txn-row";const m=document.createElement("td");if(m.className="txn-date",d.date){const N=new Date(d.date);m.textContent=isNaN(N.getTime())?d.date:N.toLocaleDateString(void 0,{month:"short",day:"numeric"})}g.appendChild(m);const v=document.createElement("td");v.className="txn-desc",v.textContent=d.payee?`${d.description} — ${d.payee}`:d.description,g.appendChild(v);const b=document.createElement("td");b.className="txn-category",b.textContent=d.category??"",g.appendChild(b);const _=document.createElement("td");_.className="txn-amount",d.amount!==null&&(_.textContent=al(d.amount,d.currency),d.amount<0&&_.classList.add("txn-negative"),d.amount>0&&_.classList.add("txn-positive")),g.appendChild(_),f.appendChild(g)}u.appendChild(f),o.appendChild(u),t.appendChild(o)}function e0(n,e,t){const r=dd(n,e),a=document.createElement("div");a.className="txn-details";const s=[];if(r.date){const l=new Date(r.date),o=isNaN(l.getTime())?r.date:l.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"});s.push(["Date",o])}r.amount!==null&&s.push(["Amount",al(r.amount,r.currency)]),r.payee&&s.push(["Payee",r.payee]),r.category&&s.push(["Category",r.category]);for(const[l,o]of s){const u=document.createElement("div");u.className="txn-detail",u.innerHTML=`<span class="txn-label">${l}</span><span class="txn-value">${o}</span>`,a.appendChild(u)}t.appendChild(a);const i=e.any(n,re("description"),null,null)?.value??e.any(n,Fe("description"),null,null)?.value;if(i&&i!==r.description){const l=document.createElement("p");l.className="txn-body",l.textContent=i,t.appendChild(l)}}function t0(n,e,t){t.innerHTML="";const r=document.createElement("div");r.className="txn-view";const a=e.any(n,re("name"),null,null)?.value??e.any(n,Fe("title"),null,null)?.value??e.any(n,It("description"),null,null)?.value??e.any(n,Ct("label"),null,null)?.value??Me(n.value),s=document.createElement("h2");s.className="txn-title",s.textContent=a,r.appendChild(s),Yy(n,e)?Zy(n,e,r):e0(n,e,r),t.appendChild(r)}const n0=[It("Transaction").value,It("BankAccount").value,It("PaymentCard").value,re("Invoice").value,re("MoneyTransfer").value,re("PayAction").value,re("BankAccount").value];function r0(n,e){const t=e.each(n,Ue("type"),null,null).map(r=>r.value);for(const r of n0)if(t.includes(r))return!0;return!!(e.any(n,It("transaction"),null,null)||e.any(n,re("totalPaymentDue"),null,null)||e.any(n,It("amount"),null,null))}Qe({label:"Transactions",icon:"💳",canHandle(n,e){return r0(n,e)},render(n,e,t){t0(n,e,t)}});function i0(n,e){const t=e.any(n,re("price"),null,null)?.value;if(t){const a=e.any(n,re("priceCurrency"),null,null)?.value??"";return{price:t,currency:a}}const r=e.any(n,re("offers"),null,null);if(r){const a=e.any(r,re("price"),null,null)?.value;if(a){const s=e.any(r,re("priceCurrency"),null,null)?.value??"";return{price:a,currency:s}}}return null}function a0(n,e){const t=parseFloat(n);if(isNaN(t))return`${e} ${n}`.trim();try{return new Intl.NumberFormat(void 0,{style:"currency",currency:e||"USD"}).format(t)}catch{return`${e} ${n}`.trim()}}function s0(n,e,t){t.innerHTML="";const r=document.createElement("div");r.className="product-view";const a=e.any(n,re("image"),null,null)?.value??e.any(n,re("thumbnailUrl"),null,null)?.value;if(a){const m=document.createElement("img");m.className="product-image",m.src=a,m.alt="Product image",r.appendChild(m)}const s=document.createElement("div");s.className="product-info";const i=e.any(n,re("name"),null,null)?.value??e.any(n,Fe("title"),null,null)?.value??Me(n.value),l=document.createElement("h2");l.className="product-name",l.textContent=i,s.appendChild(l);const o=e.any(n,re("brand"),null,null);if(o){const m=e.any(o,re("name"),null,null)?.value??o.value;if(m&&!m.startsWith("http")){const v=document.createElement("p");v.className="product-brand",v.textContent=m,s.appendChild(v)}}const u=i0(n,e);if(u){const m=document.createElement("p");m.className="product-price",m.textContent=a0(u.price,u.currency),s.appendChild(m)}const c=e.any(n,re("aggregateRating"),null,null);if(c){const m=e.any(c,re("ratingValue"),null,null)?.value,v=e.any(c,re("reviewCount"),null,null)?.value,b=e.any(c,re("bestRating"),null,null)?.value??"5";if(m){const _=document.createElement("div");_.className="product-rating";const N=Math.round(parseFloat(m)),E=parseInt(b),w="★".repeat(Math.min(N,E))+"☆".repeat(Math.max(E-N,0)),p=document.createElement("span");p.className="product-stars",p.textContent=w,_.appendChild(p);const S=document.createElement("span");S.className="product-score",S.textContent=`${m}/${b}`,v&&(S.textContent+=` (${v} reviews)`),_.appendChild(S),s.appendChild(_)}}const f=e.any(n,re("description"),null,null)?.value??e.any(n,Fe("description"),null,null)?.value;if(f){const m=document.createElement("p");m.className="product-description",m.textContent=f,s.appendChild(m)}const d=e.any(n,re("sku"),null,null)?.value;if(d){const m=document.createElement("p");m.className="product-sku",m.textContent=`SKU: ${d}`,s.appendChild(m)}const g=e.any(n,re("url"),null,null)?.value;if(g){const m=document.createElement("a");m.className="product-link",m.href=g,m.textContent="View product",m.target="_blank",m.rel="noopener",s.appendChild(m)}r.appendChild(s),t.appendChild(r)}const l0=["Product","IndividualProduct","SomeProducts","Vehicle","Car","CreativeWork","SoftwareApplication","Book","Movie","MusicAlbum","Game"];function o0(n,e){const r=e.each(n,Ue("type"),null,null).map(a=>a.value);for(const a of l0)if(r.includes(re(a).value))return!0;return!!(e.any(n,re("offers"),null,null)||e.any(n,re("price"),null,null))}Qe({label:"Product",icon:"📦",canHandle(n,e){return o0(n,e)},render(n,e,t){s0(n,e,t)}});function sl(n){const e=n.match(/^PT?(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?$/i);if(!e)return n;const t=[];return e[1]&&t.push(`${e[1]} hr`),e[2]&&t.push(`${e[2]} min`),e[3]&&t.push(`${e[3]} sec`),t.join(" ")||n}function u0(n,e,t){t.innerHTML="";const r=document.createElement("div");r.className="recipe-view";const a=e.any(n,re("image"),null,null)?.value??e.any(n,re("thumbnailUrl"),null,null)?.value;if(a){const p=document.createElement("img");p.className="recipe-image",p.src=a,p.alt="Recipe photo",r.appendChild(p)}const s=e.any(n,re("name"),null,null)?.value??e.any(n,Fe("title"),null,null)?.value??Me(n.value),i=document.createElement("h2");i.className="recipe-name",i.textContent=s,r.appendChild(i);const l=e.any(n,re("description"),null,null)?.value??e.any(n,Fe("description"),null,null)?.value;if(l){const p=document.createElement("p");p.className="recipe-description",p.textContent=l,r.appendChild(p)}const o=[],u=e.any(n,re("prepTime"),null,null)?.value;u&&o.push({label:"Prep",value:sl(u)});const c=e.any(n,re("cookTime"),null,null)?.value;c&&o.push({label:"Cook",value:sl(c)});const f=e.any(n,re("totalTime"),null,null)?.value;f&&o.push({label:"Total",value:sl(f)});const d=e.any(n,re("recipeYield"),null,null)?.value;d&&o.push({label:"Yield",value:d});const g=e.any(n,re("recipeServings"),null,null)?.value;if(g&&o.push({label:"Servings",value:g}),o.length>0){const p=document.createElement("div");p.className="recipe-meta";for(const S of o){const F=document.createElement("span");F.className="recipe-meta-item",F.innerHTML=`<strong>${S.label}</strong> ${S.value}`,p.appendChild(F)}r.appendChild(p)}const m=e.any(n,re("aggregateRating"),null,null);if(m){const p=e.any(m,re("ratingValue"),null,null)?.value,S=e.any(m,re("reviewCount"),null,null)?.value;if(p){const F=document.createElement("div");F.className="recipe-rating";const A=Math.round(parseFloat(p)),k="★".repeat(Math.min(A,5))+"☆".repeat(Math.max(5-A,0)),C=document.createElement("span");C.className="recipe-stars",C.textContent=k,F.appendChild(C);const L=document.createElement("span");L.className="recipe-score",L.textContent=`${p}/5`,S&&(L.textContent+=` (${S} reviews)`),F.appendChild(L),r.appendChild(F)}}const v=e.any(n,re("recipeCategory"),null,null)?.value,b=e.any(n,re("recipeCuisine"),null,null)?.value;if(v||b){const p=document.createElement("div");if(p.className="recipe-tags",v){const S=document.createElement("span");S.className="recipe-tag",S.textContent=v,p.appendChild(S)}if(b){const S=document.createElement("span");S.className="recipe-tag",S.textContent=b,p.appendChild(S)}r.appendChild(p)}const _=e.each(n,re("recipeIngredient"),null,null);if(_.length>0){const p=document.createElement("div");p.className="recipe-section";const S=document.createElement("h3");S.textContent="Ingredients",p.appendChild(S);const F=document.createElement("ul");F.className="recipe-ingredients";for(const A of _){const k=document.createElement("li");k.textContent=A.value,F.appendChild(k)}p.appendChild(F),r.appendChild(p)}const N=e.each(n,re("recipeInstructions"),null,null);if(N.length>0){const p=document.createElement("div");p.className="recipe-section";const S=document.createElement("h3");S.textContent="Instructions",p.appendChild(S);const F=document.createElement("ol");F.className="recipe-instructions";for(const A of N){const k=e.any(A,re("text"),null,null)?.value??A.value;if(k&&!k.startsWith("http")){const C=document.createElement("li");C.textContent=k,F.appendChild(C)}}p.appendChild(F),r.appendChild(p)}const E=e.any(n,re("nutrition"),null,null);if(E){const p=[["calories","Calories"],["fatContent","Fat"],["carbohydrateContent","Carbs"],["proteinContent","Protein"],["fiberContent","Fiber"],["sugarContent","Sugar"],["sodiumContent","Sodium"]],S=[];for(const[F,A]of p){const k=e.any(E,re(F),null,null)?.value;k&&S.push({label:A,value:k})}if(S.length>0){const F=document.createElement("div");F.className="recipe-section";const A=document.createElement("h3");A.textContent="Nutrition",F.appendChild(A);const k=document.createElement("div");k.className="recipe-nutrition";for(const C of S){const L=document.createElement("div");L.className="recipe-nutrition-item",L.innerHTML=`<span class="recipe-nutrition-value">${C.value}</span><span class="recipe-nutrition-label">${C.label}</span>`,k.appendChild(L)}F.appendChild(k),r.appendChild(F)}}const w=e.any(n,re("author"),null,null);if(w){const p=e.any(w,re("name"),null,null)?.value??w.value;if(p&&!p.startsWith("http")){const S=document.createElement("p");S.className="recipe-author",S.textContent=`Recipe by ${p}`,r.appendChild(S)}}t.appendChild(r)}const c0=["Recipe","HowTo"];function d0(n,e){const r=e.each(n,Ue("type"),null,null).map(a=>a.value);for(const a of c0)if(r.includes(re(a).value))return!0;return!!(e.any(n,re("recipeIngredient"),null,null)||e.any(n,re("recipeInstructions"),null,null))}Qe({label:"Recipe",icon:"🍳",canHandle(n,e){return d0(n,e)},render(n,e,t){u0(n,e,t)}});function f0(n,e){const t=e.each(n,Ue("type"),null,null).map(r=>r.value);return!!(t.includes(Lt("Tracker").value)||t.includes(Ws("Tracker").value)||e.any(n,Lt("issue"),null,null))}function ll(n){return(n.split("#").pop()??n.split("/").pop()??n).replace(/([a-z])([A-Z])/g,"$1 $2")}function fd(n){const e=n.toLowerCase();return e.includes("open")||e.includes("new")?"issue-state-open":e.includes("closed")||e.includes("done")||e.includes("resolved")||e.includes("fixed")?"issue-state-closed":e.includes("progress")||e.includes("active")?"issue-state-active":"issue-state-default"}function h0(n,e,t){const r=document.createElement("div");r.className="issue-view";const a=e.any(n,Fe("title"),null,null)?.value??e.any(n,re("name"),null,null)?.value??e.any(n,Ct("label"),null,null)?.value??Me(n.value),s=document.createElement("h2");s.className="issue-title",s.textContent=a,r.appendChild(s);const i=e.any(n,Lt("state"),null,null);if(i){const d=document.createElement("span");d.className=`issue-state ${fd(i.value)}`,d.textContent=ll(i.value),r.appendChild(d)}const l=document.createElement("div");l.className="issue-details";const o=e.any(n,Lt("assignee"),null,null);if(o){const d=e.any(o,re("name"),null,null)?.value??Me(o.value),g=document.createElement("div");g.className="issue-detail",g.innerHTML=`<span class="issue-label">Assignee</span><span class="issue-value">${d}</span>`,l.appendChild(g)}const u=e.any(n,Lt("priority"),null,null)?.value??e.any(n,re("priority"),null,null)?.value;if(u){const d=document.createElement("div");d.className="issue-detail",d.innerHTML=`<span class="issue-label">Priority</span><span class="issue-value">${ll(u)}</span>`,l.appendChild(d)}const c=e.any(n,Fe("created"),null,null)?.value??e.any(n,re("dateCreated"),null,null)?.value;if(c){const d=document.createElement("div");d.className="issue-detail";const g=new Date(c),m=isNaN(g.getTime())?c:g.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"});d.innerHTML=`<span class="issue-label">Created</span><span class="issue-value">${m}</span>`,l.appendChild(d)}l.children.length>0&&r.appendChild(l);const f=e.any(n,Fe("description"),null,null)?.value??e.any(n,re("description"),null,null)?.value??e.any(n,Ct("comment"),null,null)?.value;if(f){const d=document.createElement("div");d.className="issue-description",d.textContent=f,r.appendChild(d)}t.appendChild(r)}function p0(n,e,t){const r=document.createElement("div");r.className="tracker-view";const a=e.any(n,Fe("title"),null,null)?.value??e.any(n,re("name"),null,null)?.value??e.any(n,Ct("label"),null,null)?.value??Me(n.value),s=document.createElement("h2");s.className="tracker-title",s.textContent=a,r.appendChild(s);const i=e.any(n,Fe("description"),null,null)?.value??e.any(n,re("description"),null,null)?.value;if(i){const u=document.createElement("p");u.className="tracker-description",u.textContent=i,r.appendChild(u)}const l=e.each(n,Lt("issue"),null,null),o=document.createElement("p");if(o.className="tracker-count",o.textContent=`${l.length} issue${l.length!==1?"s":""}`,r.appendChild(o),l.length===0){const u=document.createElement("p");u.className="tracker-empty",u.textContent="No issues found.",r.appendChild(u)}else{const u=document.createElement("ul");u.className="tracker-issues";for(const c of l){const f=c,d=document.createElement("li");d.className="tracker-issue";const g=e.any(f,Lt("state"),null,null);if(g){const _=document.createElement("span");_.className=`issue-state ${fd(g.value)}`,_.textContent=ll(g.value),d.appendChild(_)}const m=e.any(f,Fe("title"),null,null)?.value??e.any(f,re("name"),null,null)?.value??Me(f.value),v=document.createElement("a");v.className="tracker-issue-title",v.href=f.value,v.textContent=m,d.appendChild(v);const b=e.any(f,Lt("assignee"),null,null);if(b){const _=e.any(b,re("name"),null,null)?.value??Me(b.value),N=document.createElement("span");N.className="tracker-issue-assignee",N.textContent=_,d.appendChild(N)}u.appendChild(d)}r.appendChild(u)}t.appendChild(r)}function m0(n,e,t){t.innerHTML="",f0(n,e)?p0(n,e,t):h0(n,e,t)}const g0=[Lt("Tracker").value,Lt("Issue").value,Ws("Tracker").value,Ws("Issue").value];function y0(n,e){const r=e.each(n,Ue("type"),null,null).map(a=>a.value);for(const a of g0)if(r.includes(a))return!0;return!!(e.any(n,Lt("issue"),null,null)||e.any(n,Lt("state"),null,null))}Qe({label:"Issues",icon:"📋",canHandle(n,e){return y0(n,e)},render(n,e,t){m0(n,e,t)}});function w0(n){const e=new Date(n);return isNaN(e.getTime())?n:e.toLocaleString(void 0,{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function v0(n,e){return e.any(n,re("name"),null,null)?.value??e.any(n,He("name"),null,null)?.value??Me(n.value)}function b0(n,e,t){t.innerHTML="";const r=document.createElement("div");r.className="meeting-view";const a=e.any(n,Fe("title"),null,null)?.value??e.any(n,re("name"),null,null)?.value??e.any(n,Ct("label"),null,null)?.value??Me(n.value),s=document.createElement("h2");s.className="meeting-title",s.textContent=a,r.appendChild(s);const i=e.any(n,re("startDate"),null,null)?.value??e.any(n,Fe("created"),null,null)?.value??e.any(n,Fe("date"),null,null)?.value;if(i){const g=document.createElement("p");g.className="meeting-date",g.textContent=w0(i),r.appendChild(g)}const l=e.any(n,re("location"),null,null)?.value??e.any(n,tn("location"),null,null)?.value;if(l&&!l.startsWith("http")){const g=document.createElement("p");g.className="meeting-location",g.textContent=l,r.appendChild(g)}const o=e.any(n,Fe("description"),null,null)?.value??e.any(n,re("description"),null,null)?.value;if(o){const g=document.createElement("p");g.className="meeting-description",g.textContent=o,r.appendChild(g)}const u=e.each(n,tn("participant"),null,null);if(u.length>0){const g=document.createElement("div");g.className="meeting-section";const m=document.createElement("h3");m.textContent="Participants",g.appendChild(m);const v=document.createElement("ul");v.className="meeting-participants";for(const b of u){const _=b,N=v0(_,e),E=document.createElement("li"),w=document.createElement("a");w.className="meeting-participant",w.href=_.value,w.textContent=N,E.appendChild(w),v.appendChild(E)}g.appendChild(v),r.appendChild(g)}const c=e.each(n,tn("agenda"),null,null);if(c.length>0){const g=document.createElement("div");g.className="meeting-section";const m=document.createElement("h3");m.textContent="Agenda",g.appendChild(m);const v=document.createElement("ol");v.className="meeting-agenda";for(const b of c){const _=document.createElement("li"),N=e.any(b,Fe("title"),null,null)?.value??e.any(b,re("name"),null,null)?.value??b.value;N&&!N.startsWith("http")?_.textContent=N:_.textContent=Me(N),v.appendChild(_)}g.appendChild(v),r.appendChild(g)}const f=e.each(n,tn("action"),null,null);if(f.length>0){const g=document.createElement("div");g.className="meeting-section";const m=document.createElement("h3");m.textContent="Action Items",g.appendChild(m);const v=document.createElement("ul");v.className="meeting-actions";for(const b of f){const _=document.createElement("li"),N=e.any(b,Fe("title"),null,null)?.value??e.any(b,re("name"),null,null)?.value??e.any(b,Ct("label"),null,null)?.value??b.value;N&&!N.startsWith("http")?_.textContent=N:_.textContent=Me(N),v.appendChild(_)}g.appendChild(v),r.appendChild(g)}const d=e.any(n,zt("content"),null,null)?.value??e.any(n,re("text"),null,null)?.value;if(d){const g=document.createElement("div");g.className="meeting-section";const m=document.createElement("h3");m.textContent="Notes",g.appendChild(m);const v=document.createElement("div");v.className="meeting-notes",v.textContent=d,g.appendChild(v),r.appendChild(g)}t.appendChild(r)}tn("Meeting").value,re("Event").value;function E0(n,e){return!!(e.each(n,Ue("type"),null,null).map(a=>a.value).includes(tn("Meeting").value)||e.any(n,tn("participant"),null,null)||e.any(n,tn("agenda"),null,null))}Qe({label:"Meeting",icon:"🤝",canHandle(n,e){return E0(n,e)},render(n,e,t){b0(n,e,t)}});const hd={Create:"created",Update:"updated",Delete:"deleted",Add:"added",Remove:"removed",Like:"liked",Follow:"followed",Announce:"shared",Accept:"accepted",Reject:"rejected",Invite:"invited",Offer:"offered",Undo:"undid",Block:"blocked",Flag:"flagged",Move:"moved",Read:"read",View:"viewed",Listen:"listened to",Join:"joined",Leave:"left"};function x0(n,e){const t=[],r=[...e.each(n,bt("contains"),null,null),...e.each(n,ot("items"),null,null),...e.each(n,mn("notification"),null,null)],a=new Set;for(const s of r){if(a.has(s.value))continue;a.add(s.value);const i=s,l=e.each(i,Ue("type"),null,null).map(N=>N.value);let o="";for(const N of l){const E=N.split("#").pop()??N.split("/").pop()??"";if(hd[E]){o=E;break}}const u=e.any(i,ot("actor"),null,null);let c="",f=null;u&&(f=u.value,c=e.any(u,re("name"),null,null)?.value??e.any(u,ot("name"),null,null)?.value??Me(u.value));const d=e.any(i,ot("object"),null,null);let g="",m=null;d&&(m=d.value,g=e.any(d,re("name"),null,null)?.value??e.any(d,ot("name"),null,null)?.value??Me(d.value));const v=e.any(i,ot("content"),null,null)?.value??e.any(i,ot("summary"),null,null)?.value??e.any(i,Fe("description"),null,null)?.value??null,b=e.any(i,ot("published"),null,null)?.value??e.any(i,Fe("created"),null,null)?.value??e.any(i,Fe("date"),null,null)?.value??null,_=hd[o]??(o.toLowerCase()||"notified");t.push({uri:i.value,type:o,actor:c,actorUri:f,verb:_,object:g,objectUri:m,content:v,timestamp:b})}return t.sort((s,i)=>!s.timestamp&&!i.timestamp?0:s.timestamp?i.timestamp?new Date(i.timestamp).getTime()-new Date(s.timestamp).getTime():-1:1),t}function _0(n){const e=new Date(n);if(isNaN(e.getTime()))return n;const t=new Date,r=t.getTime()-e.getTime(),a=Math.floor(r/6e4),s=Math.floor(r/36e5),i=Math.floor(r/864e5);return a<1?"just now":a<60?`${a}m ago`:s<24?`${s}h ago`:i<7?`${i}d ago`:e.toLocaleDateString(void 0,{month:"short",day:"numeric",year:e.getFullYear()!==t.getFullYear()?"numeric":void 0})}function C0(n,e,t){t.innerHTML="";const r=document.createElement("div");r.className="notif-view";const a=e.any(n,re("name"),null,null)?.value??e.any(n,Fe("title"),null,null)?.value??e.any(n,Ct("label"),null,null)?.value??"Notifications",s=document.createElement("h2");s.className="notif-title",s.textContent=a,r.appendChild(s);const i=x0(n,e),l=document.createElement("p");if(l.className="notif-count",l.textContent=`${i.length} notification${i.length!==1?"s":""}`,r.appendChild(l),i.length===0){const u=document.createElement("p");u.className="notif-empty",u.textContent="No notifications.",r.appendChild(u),t.appendChild(r);return}const o=document.createElement("div");o.className="notif-list";for(const u of i){const c=document.createElement("div");c.className="notif-item";const f=document.createElement("div");if(f.className="notif-summary",u.actor){const d=document.createElement("a");d.className="notif-actor",d.textContent=u.actor,u.actorUri&&(d.href=u.actorUri),f.appendChild(d),f.appendChild(document.createTextNode(` ${u.verb} `))}else f.appendChild(document.createTextNode(`${u.verb} `));if(u.object){const d=document.createElement("a");d.className="notif-object",d.textContent=u.object,u.objectUri&&(d.href=u.objectUri),f.appendChild(d)}if(c.appendChild(f),u.content){const d=document.createElement("p");d.className="notif-content",d.textContent=u.content,c.appendChild(d)}if(u.timestamp){const d=document.createElement("time");d.className="notif-time",d.dateTime=u.timestamp,d.textContent=_0(u.timestamp),c.appendChild(d)}o.appendChild(c)}r.appendChild(o),t.appendChild(r)}function A0(n,e){const t=e.each(n,Ue("type"),null,null).map(r=>r.value);return!!((t.includes(bt("Container").value)||t.includes(bt("BasicContainer").value))&&(e.match(null,bt("inbox"),n,null).length>0||e.match(null,mn("inbox"),n,null).length>0)||t.includes(ot("OrderedCollection").value)||t.includes(ot("Collection").value)&&(e.any(n,ot("items"),null,null)||e.any(n,bt("contains"),null,null))||e.any(n,mn("notification"),null,null))}Qe({label:"Notifications",icon:"🔔",canHandle(n,e){return A0(n,e)},render(n,e,t){C0(n,e,t)}});const N0={SingleLineTextField:{inputType:"text"},TextField:{inputType:"text"},NamedNodeURIField:{inputType:"url"},IntegerField:{inputType:"number",xsdType:"integer"},DecimalField:{inputType:"number",xsdType:"decimal"},FloatField:{inputType:"number",xsdType:"float"},DateField:{inputType:"date",xsdType:"date"},DateTimeField:{inputType:"datetime-local",xsdType:"dateTime"},TimeField:{inputType:"time",xsdType:"time"},ColorField:{inputType:"color"},PhoneField:{inputType:"tel"},EmailField:{inputType:"email"}};function pd(n,e){return e.any(n,Ct("label"),null,null)?.value??e.any(n,Fe("title"),null,null)?.value??e.any(n,vt("title"),null,null)?.value??e.any(n,He("name"),null,null)?.value??e.any(n,re("name"),null,null)?.value??Me(n.value)}function T0(n,e){const t=e.each(n,Ue("type"),null,null);for(const r of t){const a=Me(r.value);if(a!=="type")return a}return"Unknown"}function S0(n,e){const t=[],r=e.each(n,Dt("part"),null,null),a=e.any(n,Dt("parts"),null,null);a&&a.termType==="NamedNode"&&D0(a,e,t);for(const s of r){if(s.termType!=="NamedNode")continue;const i=s;t.some(l=>l.uri===i.value)||t.push(md(i,e))}return t.sort((s,i)=>s.sequence-i.sequence),t}function D0(n,e,t){let r=n;const a=new Set;for(;r&&!a.has(r.value)&&(a.add(r.value),r.value!==Ue("nil").value);){const s=e.any(r,Ue("first"),null,null);s&&s.termType==="NamedNode"&&t.push(md(s,e));const i=e.any(r,Ue("rest"),null,null);if(i&&i.termType==="NamedNode")r=i;else break}}function md(n,e){const t=T0(n,e),r=e.any(n,Dt("property"),null,null)?.value??null,a=e.any(n,Dt("label"),null,null)?.value??(r?Me(r):t),s=e.any(n,Dt("sequence"),null,null)?.value,i=s?parseInt(s,10):999,l=e.any(n,Dt("contents"),null,null)?.value??null;return{uri:n.value,fieldType:t,property:r,label:a,sequence:i,contents:l}}function I0(n,e){const t=e.each(n,Ue("type"),null,null);if(t.some(r=>r.value===Dt("Form").value))return n;for(const r of t){if(r.termType!=="NamedNode")continue;const a=e.any(r,Dt("annotationForm"),null,null);if(a&&a.termType==="NamedNode")return a;const s=e.any(r,Dt("creationForm"),null,null);if(s&&s.termType==="NamedNode")return s;const i=e.each(r,Ct("subClassOf"),null,null);for(const l of i){if(l.termType!=="NamedNode")continue;const o=e.any(l,Dt("annotationForm"),null,null);if(o&&o.termType==="NamedNode")return o;const u=e.any(l,Dt("creationForm"),null,null);if(u&&u.termType==="NamedNode")return u}}return null}function R0(n,e,t){const r=document.createElement("div");if(r.className="form-field",n.fieldType==="Comment"){const u=document.createElement("p");return u.className="form-comment",u.textContent=n.contents??"",u}if(n.fieldType==="Heading"){const u=document.createElement("h3");return u.className="form-heading",u.textContent=n.contents??n.label,u}const a=document.createElement("label");a.className="form-field-label",a.textContent=n.label,n.property&&(a.title=n.property),r.appendChild(a);const s=document.createElement("div");s.className="form-field-value";let i="";if(n.property){const u={termType:"NamedNode",value:n.property},c=t.any(e,u,null,null);c&&(i=c.value)}if(n.fieldType==="BooleanField"||n.fieldType==="TristateField"){const u=document.createElement("span");return u.className="form-boolean",i==="true"||i==="1"?(u.textContent="✓",u.classList.add("form-bool-true")):i==="false"||i==="0"?(u.textContent="✗",u.classList.add("form-bool-false")):(u.textContent=n.fieldType==="TristateField"?"—":"✗",u.classList.add("form-bool-null")),s.appendChild(u),r.appendChild(s),r}if(n.fieldType==="MultiLineTextField"){const u=document.createElement("textarea");return u.className="form-textarea",u.value=i,u.readOnly=!0,u.rows=4,s.appendChild(u),r.appendChild(s),r}if(n.fieldType==="Choice"||n.fieldType==="Classifier"){const u=document.createElement("select");u.className="form-select",u.disabled=!0;const c=document.createElement("option");return c.textContent=i?Me(i):"(none)",c.value=i,u.appendChild(c),s.appendChild(u),r.appendChild(s),r}const l=N0[n.fieldType],o=document.createElement("input");return o.className="form-input",o.type=l?.inputType??"text",o.value=i,o.readOnly=!0,s.appendChild(o),r.appendChild(s),r}function k0(n,e,t){t.innerHTML="";const r=document.createElement("div");r.className="form-view";const a=I0(n,e);if(!a){const f=document.createElement("p");f.className="form-empty",f.textContent="No form definition found for this resource.",r.appendChild(f),t.appendChild(r);return}const s=e.any(a,Fe("title"),null,null)?.value??e.any(a,vt("title"),null,null)?.value??pd(a,e),i=document.createElement("h2");if(i.className="form-title",i.textContent=s,r.appendChild(i),!(a.value===n.value)){const f=document.createElement("p");f.className="form-subject",f.textContent=`Editing: ${pd(n,e)}`,r.appendChild(f)}const o=S0(a,e);if(o.length===0){const f=document.createElement("p");f.className="form-no-fields",f.textContent="This form has no fields defined.",r.appendChild(f),t.appendChild(r);return}const u=document.createElement("p");u.className="form-count",u.textContent=`${o.length} field${o.length!==1?"s":""}`,r.appendChild(u);const c=document.createElement("div");c.className="form-fields";for(const f of o)c.appendChild(R0(f,n,e));r.appendChild(c),t.appendChild(r)}function L0(n,e){const t=e.each(n,Ue("type"),null,null);if(t.map(a=>a.value).includes(Dt("Form").value))return!0;for(const a of t){if(a.termType!=="NamedNode")continue;if(e.any(a,Dt("creationForm"),null,null)||e.any(a,Dt("annotationForm"),null,null))return!0;const s=e.each(a,Ct("subClassOf"),null,null);for(const i of s)if(i.termType==="NamedNode"&&(e.any(i,Dt("creationForm"),null,null)||e.any(i,Dt("annotationForm"),null,null)))return!0}return!1}Qe({label:"Form",icon:"📋",canHandle(n,e){return L0(n,e)},render(n,e,t){k0(n,e,t)}});const O0=[{uri:"Read",label:"Read"},{uri:"Write",label:"Write"},{uri:"Append",label:"Append"},{uri:"Control",label:"Control"}];function F0(n,e){return e.any(n,He("name"),null,null)?.value??e.any(n,je("fn"),null,null)?.value??Me(n.value)}function B0(n,e){const t=[],r=e.each(n,kt("trustedApp"),null,null);for(const a of r){const s=e.any(a,kt("origin"),null,null);if(!s)continue;const i=s.value,l=Me(i),u=e.each(a,kt("mode"),null,null).map(c=>Me(c.value));t.push({originUri:i,originLabel:l,modes:u})}return t.sort((a,s)=>a.originUri.localeCompare(s.originUri)),t}function P0(n,e,t){t.innerHTML="";const r=document.createElement("div");r.className="trusted-apps-view";const a=document.createElement("h2");a.className="trusted-apps-title",a.textContent="Trusted Applications",r.appendChild(a);const s=F0(n,e),i=document.createElement("p");i.className="trusted-apps-subtitle",i.textContent=`Manage applications trusted by ${s}`,r.appendChild(i);const l=B0(n,e),o=document.createElement("p");if(o.className="trusted-apps-count",o.textContent=`${l.length} trusted application${l.length!==1?"s":""}`,r.appendChild(o),l.length===0){const v=document.createElement("p");v.className="trusted-apps-empty",v.textContent="No trusted applications configured.",r.appendChild(v),gd(r),t.appendChild(r);return}const u=document.createElement("table");u.className="trusted-apps-table";const c=document.createElement("thead"),f=document.createElement("tr"),d=document.createElement("th");d.textContent="Application URL";const g=document.createElement("th");g.textContent="Access Modes",f.appendChild(d),f.appendChild(g),c.appendChild(f),u.appendChild(c);const m=document.createElement("tbody");for(const v of l){const b=document.createElement("tr");b.className="trusted-apps-row";const _=document.createElement("td");_.className="trusted-apps-origin";const N=document.createElement("a");N.href=v.originUri,N.textContent=v.originUri,N.target="_blank",N.rel="noopener",_.appendChild(N),b.appendChild(_);const E=document.createElement("td");E.className="trusted-apps-modes";for(const w of O0){const p=document.createElement("span"),S=v.modes.includes(w.uri);p.className=`trusted-apps-mode ${S?"trusted-apps-mode-active":"trusted-apps-mode-inactive"}`,p.textContent=w.label,E.appendChild(p)}b.appendChild(E),m.appendChild(b)}u.appendChild(m),r.appendChild(u),gd(r),t.appendChild(r)}function gd(n){const e=document.createElement("div");e.className="trusted-apps-notes";const t=document.createElement("h3");t.textContent="Notes",e.appendChild(t);const r=document.createElement("ol"),a=["Trusted applications get access to all resources that you have access to.","You can limit which modes they have by default.","They will not gain more access than you have."];for(const s of a){const i=document.createElement("li");i.textContent=s,r.appendChild(i)}e.appendChild(r),n.appendChild(e)}function M0(n,e){return e.each(n,kt("trustedApp"),null,null).length>0}Qe({label:"Trusted Apps",icon:"🛡️",canHandle(n,e){return M0(n,e)},render(n,e,t){P0(n,e,t)}});function U0(n,e){return e.any(n,Fe("title"),null,null)?.value??e.any(n,vt("title"),null,null)?.value??e.any(n,re("name"),null,null)?.value??"Notepad"}function yd(n,e){return e.any(n,He("name"),null,null)?.value??e.any(n,re("name"),null,null)?.value??Me(n.value)}function $0(n,e){const t=[],r=new Set;let a=e.any(n,Qi("next"),null,null);for(;a&&a.termType==="NamedNode"&&!r.has(a.value)&&a.value!==n.value;){r.add(a.value);const s=a,i=e.any(s,zt("content"),null,null)?.value??e.any(s,vt("description"),null,null)?.value??"",l=e.any(s,vt("author"),null,null)??e.any(s,Fe("creator"),null,null)??e.any(s,He("maker"),null,null);let o=null,u=null;l&&(u=l.value,l.termType==="NamedNode"?o=yd(l,e):o=l.value),t.push({uri:s.value,content:i,author:o,authorUri:u}),a=e.any(s,Qi("next"),null,null)}return t}function q0(n,e){const t=e.any(n,Fe("created"),null,null)?.value??e.any(n,vt("date"),null,null)?.value;if(!t)return null;const r=new Date(t);return isNaN(r.getTime())?t:r.toLocaleDateString()}function j0(n,e,t){t.innerHTML="";const r=document.createElement("div");r.className="pad-view";const a=U0(n,e),s=document.createElement("h2");s.className="pad-title",s.textContent=a,r.appendChild(s);const i=document.createElement("div");i.className="pad-meta";const l=q0(n,e);if(l){const m=document.createElement("span");m.className="pad-date",m.textContent=`Created: ${l}`,i.appendChild(m)}const o=e.any(n,vt("author"),null,null)??e.any(n,Fe("creator"),null,null);if(o&&o.termType==="NamedNode"){const m=yd(o,e),v=document.createElement("span");v.className="pad-author",v.textContent=`Author: ${m}`,i.appendChild(v)}i.children.length>0&&r.appendChild(i);const u=$0(n,e);if(u.length===0){const m=document.createElement("p");m.className="pad-empty",m.textContent="This notepad is empty.",r.appendChild(m),t.appendChild(r);return}const c=document.createElement("div");c.className="pad-content";const d=new Set(u.filter(m=>m.author).map(m=>m.authorUri)).size>1;for(const m of u){const v=document.createElement("div");if(v.className="pad-chunk",d&&m.author){const N=document.createElement("span");N.className="pad-chunk-author",N.textContent=m.author,m.authorUri&&(N.title=m.authorUri),v.appendChild(N)}const b=document.createElement("div");b.className="pad-chunk-text";const _=m.content.split(`
`);for(let N=0;N<_.length;N++)N>0&&b.appendChild(document.createElement("br")),b.appendChild(document.createTextNode(_[N]));v.appendChild(b),c.appendChild(v)}r.appendChild(c);const g=document.createElement("p");g.className="pad-count",g.textContent=`${u.length} chunk${u.length!==1?"s":""}`,r.appendChild(g),t.appendChild(r)}function H0(n,e){return!!(e.each(n,Ue("type"),null,null).map(a=>a.value).includes(Qi("Notepad").value)||e.any(n,Qi("next"),null,null))}Qe({label:"Notepad",icon:"📝",canHandle(n,e){return H0(n,e)},render(n,e,t){j0(n,e,t)}});function W0(n,e){return e.any(n,Fe("title"),null,null)?.value??e.any(n,vt("title"),null,null)?.value??e.any(n,re("name"),null,null)?.value??e.any(n,zt("name"),null,null)?.value??"Microblog"}function V0(n,e){return e.any(n,He("name"),null,null)?.value??e.any(n,re("name"),null,null)?.value??Me(n.value)}function z0(n,e){return e.each(n,Ue("type"),null,null).some(r=>r.value===Yi("MicroblogPost").value)}function wd(n,e){const t=e.any(n,zt("content"),null,null)?.value??e.any(n,Fe("description"),null,null)?.value??e.any(n,vt("description"),null,null)?.value??"",r=e.any(n,Fe("created"),null,null)?.value??e.any(n,vt("date"),null,null)?.value,a=r?new Date(r):null,s=e.any(n,zt("has_creator"),null,null)??e.any(n,He("maker"),null,null)??e.any(n,Fe("creator"),null,null);let i=null,l=null;return s&&(l=s.value,s.termType==="NamedNode"?i=V0(s,e):i=s.value),{uri:n.value,content:t,created:a,creator:i,creatorUri:l}}function G0(n,e){const t=e.each(n,zt("container_of"),null,null),r=[];for(const a of t)a.termType==="NamedNode"&&r.push(wd(a,e));return r.sort((a,s)=>!a.created&&!s.created?0:a.created?s.created?s.created.getTime()-a.created.getTime():-1:1),r}function J0(n){const e=new Date,t=e.getTime()-n.getTime(),r=Math.floor(t/6e4),a=Math.floor(t/36e5),s=Math.floor(t/864e5);return r<1?"just now":r<60?`${r}m ago`:a<24?`${a}h ago`:s<7?`${s}d ago`:n.toLocaleDateString(void 0,{month:"short",day:"numeric",year:n.getFullYear()!==e.getFullYear()?"numeric":void 0})}function K0(n,e){const t=/(https?:\/\/[^\s<>"]+)/g,r=n.split(t);for(const a of r)if(t.test(a)){t.lastIndex=0;const s=document.createElement("a");s.href=a,s.textContent=a,s.target="_blank",s.rel="noopener",e.appendChild(s)}else a&&e.appendChild(document.createTextNode(a))}function vd(n){const e=document.createElement("div");e.className="microblog-post";const t=document.createElement("div");if(t.className="microblog-post-header",n.creator){const s=document.createElement("span");s.className="microblog-post-author",s.textContent=n.creator,n.creatorUri&&(s.title=n.creatorUri),t.appendChild(s)}if(n.created){const s=document.createElement("time");s.className="microblog-post-time",s.dateTime=n.created.toISOString(),s.textContent=J0(n.created),t.appendChild(s)}e.appendChild(t);const r=document.createElement("div");r.className="microblog-post-content",K0(n.content,r),e.appendChild(r);const a=n.content.length;if(a>0){const s=document.createElement("span");s.className="microblog-char-count",s.textContent=`${a}`,e.appendChild(s)}return e}function X0(n,e,t){t.innerHTML="";const r=document.createElement("div");if(r.className="microblog-view",z0(n,e)){const c=wd(n,e),f=document.createElement("h2");f.className="microblog-title",f.textContent="Microblog Post",r.appendChild(f),r.appendChild(vd(c)),t.appendChild(r);return}const a=W0(n,e),s=document.createElement("h2");s.className="microblog-title",s.textContent=a,r.appendChild(s);const i=e.any(n,Fe("description"),null,null)?.value??e.any(n,vt("description"),null,null)?.value;if(i){const c=document.createElement("p");c.className="microblog-description",c.textContent=i,r.appendChild(c)}const l=G0(n,e),o=document.createElement("p");if(o.className="microblog-count",o.textContent=`${l.length} post${l.length!==1?"s":""}`,r.appendChild(o),l.length===0){const c=document.createElement("p");c.className="microblog-empty",c.textContent="No posts yet.",r.appendChild(c),t.appendChild(r);return}const u=document.createElement("div");u.className="microblog-feed";for(const c of l)u.appendChild(vd(c));r.appendChild(u),t.appendChild(r)}function Q0(n,e){const r=e.each(n,Ue("type"),null,null).map(s=>s.value);if(r.includes(Yi("Microblog").value)||r.includes(Yi("MessageBoard").value)||r.includes(zt("Forum").value)||r.includes(Yi("MicroblogPost").value))return!0;const a=e.each(n,zt("container_of"),null,null);if(a.length>0){for(const s of a)if(s.termType==="NamedNode"&&e.any(s,zt("content"),null,null))return!0}return!1}Qe({label:"Microblog",icon:"📢",canHandle(n,e){return Q0(n,e)},render(n,e,t){X0(n,e,t)}});function Y0(n,e){const t=e.each(n,fi("slot"),null,null),r=[];for(const a of t){const s=e.any(a,fi("index"),null,null),i=e.any(a,fi("item"),null,null);if(!i)continue;const l=i,o=e.any(l,vt("title"),null,null)?.value??e.any(l,Fe("title"),null,null)?.value??e.any(l,re("name"),null,null)?.value??l.value,u=e.any(l,re("video"),null,null)?.value??e.any(l,re("contentUrl"),null,null)?.value??void 0;r.push({index:s?Number(s.value):0,title:o,uri:l.value,videoUrl:u})}return r.sort((a,s)=>a.index-s.index),r}function Z0(n){const e=[/(?:youtube\.com\/watch\?v=)([a-zA-Z0-9_-]{11})/,/(?:youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})/,/(?:youtu\.be\/)([a-zA-Z0-9_-]{11})/];for(const t of e){const r=n.match(t);if(r)return r[1]}return null}function ew(n,e,t){t.innerHTML="";const r=e.any(n,vt("title"),null,null)?.value??e.any(n,Fe("title"),null,null)?.value??e.any(n,re("name"),null,null)?.value??"Untitled Playlist",a=document.createElement("h2");a.textContent=r,t.appendChild(a);const s=Y0(n,e);if(s.length===0){const l=document.createElement("p");l.textContent="No tracks found in this playlist.",t.appendChild(l);return}const i=document.createElement("ol");i.className="playlist-tracks";for(const l of s){const o=document.createElement("li");o.className="playlist-track",o.dataset.uri=l.uri;const u=document.createElement("span");if(u.className="track-title",u.textContent=l.title,o.appendChild(u),l.videoUrl){const c=document.createElement("div");c.className="track-video";const f=Z0(l.videoUrl);if(f){const d=document.createElement("iframe");d.src=`https://www.youtube-nocookie.com/embed/${f}`,d.width="560",d.height="315",d.allowFullscreen=!0,d.setAttribute("loading","lazy"),d.setAttribute("allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"),c.appendChild(d)}else{const d=document.createElement("video");d.src=l.videoUrl,d.controls=!0,d.width=560,c.appendChild(d)}o.appendChild(c)}i.appendChild(o)}t.appendChild(i)}function tw(n,e){const r=e.each(n,Ue("type"),null,null).map(s=>s.value);return r.includes(fi("OrderedList").value)||r.includes(jm("Playlist").value)?!0:e.each(n,fi("slot"),null,null).length>0}Qe({label:"Playlist",icon:"🎵",canHandle(n,e){return tw(n,e)},render(n,e,t){ew(n,e,t)}});function nw(n,e){if(e)return"📁";const t=n.split(".").pop()?.toLowerCase()??"";return{jpg:"🖼",jpeg:"🖼",png:"🖼",gif:"🖼",svg:"🖼",webp:"🖼",bmp:"🖼",ico:"🖼",mp3:"🎵",wav:"🎵",ogg:"🎵",flac:"🎵",m4a:"🎵",mp4:"🎬",webm:"🎬",avi:"🎬",mov:"🎬",mkv:"🎬",pdf:"📑",doc:"📝",docx:"📝",ttl:"📊",rdf:"📊",jsonld:"📊",n3:"📊",nq:"📊",json:"📋",xml:"📋",csv:"📋",js:"📜",ts:"📜",py:"📜",html:"📜",css:"📜",txt:"📄",md:"📄",zip:"📦",tar:"📦",gz:"📦"}[t]??"📄"}function rw(n,e){const t=e.each(n,bt("contains"),null,null),r=[];for(const a of t){const s=a,i=s.value,l=e.each(s,Ue("type"),null,null).map(v=>v.value),o=l.includes(bt("Container").value)||l.includes(bt("BasicContainer").value)||i.endsWith("/"),u=ol(i,o),f=(e.any(s,Fe("modified"),null,null)??e.any(s,Dc("mtime"),null,null))?.value,d=e.any(s,Dc("size"),null,null),g=d?Number(d.value):void 0,m=e.any(s,Fe("format"),null,null)?.value??void 0;r.push({uri:i,name:u,isContainer:o,modified:f,size:g,contentType:m})}return r.sort((a,s)=>a.isContainer!==s.isContainer?a.isContainer?-1:1:a.name.localeCompare(s.name)),r}function ol(n,e){const r=(e?n.replace(/\/$/,""):n).split("/");return decodeURIComponent(r[r.length-1]||n)}function iw(n){return n<1024?`${n} B`:n<1024*1024?`${(n/1024).toFixed(1)} KB`:`${(n/(1024*1024)).toFixed(1)} MB`}function aw(n){const e=Number(n),t=Number.isNaN(e)?new Date(n):new Date(e*1e3);return Number.isNaN(t.getTime())?n:t.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function sw(n){const e=n.replace(/\/$/,""),t=e.lastIndexOf("/");return t<=7?null:e.slice(0,t+1)}function lw(n){const e=[];let t=n;for(;;){const r=ol(t,!0);e.unshift({label:r||"Root",uri:t});const a=sw(t);if(!a)break;t=a}return e}function ow(n,e,t,r){const a=document.createElement("div");a.className="folder-toolbar";const s=document.createElement("button");s.className="folder-toolbar-btn",s.textContent="📁 New Folder",a.appendChild(s);const i=document.createElement("button");i.className="folder-toolbar-btn",i.textContent="📄 New File",a.appendChild(i);const l=document.createElement("div");l.className="folder-create-form",l.hidden=!0;const o=document.createElement("span");o.className="folder-create-label",l.appendChild(o);const u=document.createElement("input");u.type="text",u.className="folder-create-input",u.placeholder="Name...",l.appendChild(u);const c=document.createElement("button");c.className="folder-toolbar-btn folder-create-ok",c.textContent="Create",l.appendChild(c);const f=document.createElement("button");f.className="folder-toolbar-btn folder-create-cancel",f.textContent="Cancel",l.appendChild(f);const d=document.createElement("span");d.className="folder-create-status",l.appendChild(d),a.appendChild(l);let g="folder";function m(b){g=b,o.textContent=b==="folder"?"Folder name:":"File name:",u.value="",d.textContent="",l.hidden=!1,s.hidden=!0,i.hidden=!0,u.focus()}function v(){l.hidden=!0,s.hidden=!1,i.hidden=!1,d.textContent=""}return s.addEventListener("click",()=>m("folder")),i.addEventListener("click",()=>m("file")),f.addEventListener("click",v),u.addEventListener("keydown",b=>{b.key==="Enter"&&c.click(),b.key==="Escape"&&v()}),c.addEventListener("click",async()=>{const b=u.value.trim();if(!b){d.textContent="Name cannot be empty.";return}c.disabled=!0,d.textContent="Creating...";try{if(g==="folder"){const _=n.value.endsWith("/")?n.value:n.value+"/";await e.webOperation("POST",_,{data:"",contentType:"text/turtle",headers:{Slug:b,Link:'<http://www.w3.org/ns/ldp#BasicContainer>; rel="type"'}})}else{const N=(n.value.endsWith("/")?n.value:n.value+"/")+encodeURIComponent(b),E=b.split(".").pop()?.toLowerCase()??"",p={ttl:"text/turtle",rdf:"application/rdf+xml",jsonld:"application/ld+json",json:"application/json",html:"text/html",css:"text/css",js:"application/javascript",txt:"text/plain",md:"text/markdown",xml:"application/xml",csv:"text/csv"}[E]??"text/turtle";await e.webOperation("PUT",N,{data:"",contentType:p})}v(),await e.load(n,{force:!0}),bd(n,r,t)}catch(_){const N=_ instanceof Error?_.message:String(_);d.textContent=`Error: ${N}`,c.disabled=!1}}),a}function bd(n,e,t){t.innerHTML="";const r=document.createElement("div");r.className="folder-view";const a=e.any(n,vt("title"),null,null)?.value??e.any(n,Fe("title"),null,null)?.value??ol(n.value,!0),s=document.createElement("h2");s.className="folder-title",s.textContent=a,r.appendChild(s);const i=lw(n.value);if(i.length>1){const _=document.createElement("nav");_.className="folder-breadcrumbs",_.setAttribute("aria-label","Folder path");for(let N=0;N<i.length;N++){if(N>0){const E=document.createElement("span");E.className="folder-breadcrumb-sep",E.textContent=" / ",_.appendChild(E)}if(N<i.length-1){const E=gn(i[N].uri,i[N].label);E.className="folder-breadcrumb",_.appendChild(E)}else{const E=document.createElement("span");E.className="folder-breadcrumb-current",E.textContent=i[N].label,_.appendChild(E)}}r.appendChild(_)}const l=document.createElement("p");l.className="folder-path",l.textContent=n.value,r.appendChild(l);const o=rw(n,e),u=o.filter(_=>_.isContainer),c=o.filter(_=>!_.isContainer),f=[];u.length>0&&f.push(`${u.length} folder${u.length!==1?"s":""}`),c.length>0&&f.push(`${c.length} file${c.length!==1?"s":""}`);const d=document.createElement("p");d.className="folder-count",d.textContent=f.length>0?f.join(", "):"0 items",r.appendChild(d);const g=e.fetcher;if(g){const _=ow(n,g,t,e);r.appendChild(_)}if(o.length===0){const _=document.createElement("p");_.className="folder-empty",_.textContent="This folder is empty.",r.appendChild(_),t.appendChild(r);return}const m=document.createElement("table");m.className="folder-listing";const v=document.createElement("thead");v.innerHTML="<tr><th></th><th>Name</th><th>Type</th><th>Size</th><th>Modified</th></tr>",m.appendChild(v);const b=document.createElement("tbody");for(const _ of o){const N=document.createElement("tr");N.className=_.isContainer?"folder-row":"file-row";const E=document.createElement("td");E.className="folder-icon",E.textContent=nw(_.name,_.isContainer),N.appendChild(E);const w=document.createElement("td");w.className="folder-name";const p=gn(_.uri,_.name+(_.isContainer?"/":""));w.appendChild(p),N.appendChild(w);const S=document.createElement("td");S.className="folder-type",_.isContainer?S.textContent="Folder":_.contentType?S.textContent=_.contentType:S.textContent="",N.appendChild(S);const F=document.createElement("td");F.className="folder-size",F.textContent=_.size!=null?iw(_.size):"",N.appendChild(F);const A=document.createElement("td");A.className="folder-modified",A.textContent=_.modified?aw(_.modified):"",N.appendChild(A),b.appendChild(N)}m.appendChild(b),r.appendChild(m),t.appendChild(r)}function uw(n,e){const r=e.each(n,Ue("type"),null,null).map(a=>a.value);return!!(r.includes(bt("Container").value)||r.includes(bt("BasicContainer").value)||n.value.endsWith("/")&&e.match(n,bt("contains"),null,null).length>0)}Qe({label:"Folder",icon:"📁",canHandle(n,e){return uw(n,e)},render(n,e,t){bd(n,e,t)}});function cw(n,e){const t=e.each(null,Mr("storage"),n,null);for(const a of t){if(a.termType!=="NamedNode")continue;const s=e.any(a,He("name"),null,null)?.value??e.any(a,je("fn"),null,null)?.value;if(s)return s}const r=e.any(n,He("primaryTopic"),null,null);if(r&&r.termType==="NamedNode"){const a=e.any(r,He("name"),null,null)?.value??e.any(r,je("fn"),null,null)?.value;if(a)return a}try{const s=new URL(n.value).hostname.split(".")[0];if(s&&s!=="www")return s}catch{}return null}function dw(n,e){const t=e.each(null,Mr("storage"),n,null);for(const a of t)if(a.termType==="NamedNode")return a.value;const r=e.any(n,He("primaryTopic"),null,null);return r&&r.termType==="NamedNode"?r.value:null}function fw(n,e){const t=[],r=e.each(n,bt("contains"),null,null);for(const a of r){if(a.termType!=="NamedNode")continue;const s=a,l=e.each(s,Ue("type"),null,null).map(c=>c.value),o=l.includes(bt("Container").value)||l.includes(bt("BasicContainer").value)||s.value.endsWith("/"),u=e.any(s,Fe("title"),null,null)?.value??e.any(s,vt("title"),null,null)?.value??Me(s.value);t.push({uri:s.value,label:u,type:o?"container":"resource"})}return t.sort((a,s)=>a.type!==s.type?a.type==="container"?-1:1:a.label.localeCompare(s.label)),t}function hw(n,e){const r=e.each(n,Ue("type"),null,null).map(s=>s.value);let a=null;return r.includes(mn("Account").value)?a="Solid Account":r.includes(Mr("Storage").value)&&(a="Solid Pod"),{typeLabel:a}}function pw(n,e,t){t.innerHTML="";const r=document.createElement("div");r.className="dashboard-view";const a=cw(n,e),s=dw(n,e),i=document.createElement("h2");i.className="dashboard-title",i.textContent=a?`${a}'s Pod`:"Solid Pod",r.appendChild(i);const l=document.createElement("p");l.className="dashboard-url";const o=document.createElement("code");o.textContent=n.value,l.appendChild(o),r.appendChild(l);const{typeLabel:u}=hw(n,e);if(u){const g=document.createElement("span");g.className="dashboard-badge",g.textContent=u,r.appendChild(g)}if(s){const g=document.createElement("div");g.className="dashboard-section";const m=document.createElement("h3");m.textContent="Profile",g.appendChild(m);const v=gn(s,a?`View ${a}'s profile`:"View profile");v.className="dashboard-link",g.appendChild(v),r.appendChild(g)}const c=fw(n,e),f=document.createElement("div");f.className="dashboard-section";const d=document.createElement("h3");if(d.textContent="Data",f.appendChild(d),c.length===0){const g=document.createElement("p");g.className="dashboard-empty",g.textContent="No visible contents.",f.appendChild(g)}else{const g=document.createElement("p");g.className="dashboard-count";const m=c.filter(N=>N.type==="container").length,v=c.filter(N=>N.type==="resource").length,b=[];m>0&&b.push(`${m} folder${m!==1?"s":""}`),v>0&&b.push(`${v} file${v!==1?"s":""}`),g.textContent=b.join(", "),f.appendChild(g);const _=document.createElement("ul");_.className="dashboard-contents";for(const N of c){const E=document.createElement("li");E.className=`dashboard-item dashboard-item-${N.type}`;const w=document.createElement("span");w.className="dashboard-item-icon",w.textContent=N.type==="container"?"📁":"📄",E.appendChild(w);const p=gn(N.uri,N.label);p.className="dashboard-item-link",p.title=N.uri,E.appendChild(p),_.appendChild(E)}f.appendChild(_)}r.appendChild(f),t.appendChild(r)}function mw(n,e){const r=e.each(n,Ue("type"),null,null).map(i=>i.value);if(r.includes(Mr("Storage").value)||r.includes(mn("Account").value))return!0;if(r.includes(bt("Container").value)||r.includes(bt("BasicContainer").value))try{if(new URL(n.value).pathname==="/")return!0}catch{}return e.each(null,Mr("storage"),n,null).length>0}Qe({label:"Dashboard",icon:"🏠",canHandle(n,e){return mw(n,e)},render(n,e,t){pw(n,e,t)}});const gw=/\.(png|jpe?g|gif|webp|svg|bmp|ico)(\?.*)?$/i;function yw(n,e){return e.any(n,Fe("title"),null,null)?.value??e.any(n,vt("title"),null,null)?.value??e.any(n,re("name"),null,null)?.value??e.any(n,He("name"),null,null)?.value??"Chat"}function Ed(n,e){return e.any(n,He("name"),null,null)?.value??e.any(n,re("name"),null,null)?.value??Me(n.value)}function ww(n,e){const t=e.each(n,Lt("message"),null,null),r=[];for(const a of t){const s=a,i=e.any(s,zt("content"),null,null)?.value??e.any(s,Fe("content"),null,null)?.value??e.any(s,vt("description"),null,null)?.value??"",l=e.any(s,Fe("created"),null,null)?.value??e.any(s,vt("date"),null,null)?.value,o=l?new Date(l):null,u=e.any(s,He("maker"),null,null)??e.any(s,vt("creator"),null,null);let c=null,f=null;u&&(f=u.value,u.termType==="NamedNode"?c=Ed(u,e):c=u.value),r.push({uri:s.value,content:i,created:o,maker:c,makerUri:f})}return r.sort((a,s)=>!a.created&&!s.created?0:a.created?s.created?a.created.getTime()-s.created.getTime():1:-1),r}function vw(n){return n.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})}function bw(n){return n.toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"})}function Ew(n){return n.toISOString().slice(0,10)}function xw(n,e){const t=/(https?:\/\/[^\s<>"]+)/g,r=n.split(t);for(const a of r)if(t.test(a))if(t.lastIndex=0,gw.test(a)){const s=document.createElement("img");s.className="chat-inline-image",s.src=a,s.alt="Shared image",s.loading="lazy",e.appendChild(s)}else{const s=document.createElement("a");s.href=a,s.textContent=a,s.target="_blank",s.rel="noopener",e.appendChild(s)}else a&&e.appendChild(document.createTextNode(a))}function _w(n,e,t){t.innerHTML="";const r=document.createElement("div");r.className="chat-view";const a=yw(n,e),s=document.createElement("h2");s.className="chat-title",s.textContent=a,r.appendChild(s);const i=e.any(n,vt("author"),null,null)??e.any(n,Fe("creator"),null,null);if(i&&i.termType==="NamedNode"){const f=Ed(i,e),d=document.createElement("p");d.className="chat-creator",d.textContent=`Created by ${f}`,r.appendChild(d)}const l=ww(n,e),o=document.createElement("p");if(o.className="chat-count",o.textContent=`${l.length} message${l.length!==1?"s":""}`,r.appendChild(o),l.length===0){const f=document.createElement("p");f.className="chat-empty",f.textContent="No messages yet.",r.appendChild(f),t.appendChild(r);return}const u=document.createElement("div");u.className="chat-messages";let c=null;for(const f of l){if(f.created){const v=Ew(f.created);if(v!==c){c=v;const b=document.createElement("div");b.className="chat-date-header",b.textContent=bw(f.created),u.appendChild(b)}}const d=document.createElement("div");d.className="chat-message";const g=document.createElement("div");if(g.className="chat-message-header",f.maker)if(f.makerUri){const v=gn(f.makerUri,f.maker);v.className="chat-author",v.title=f.makerUri,g.appendChild(v)}else{const v=document.createElement("span");v.className="chat-author",v.textContent=f.maker,g.appendChild(v)}if(f.created){const v=document.createElement("time");v.className="chat-time",v.dateTime=f.created.toISOString(),v.textContent=vw(f.created),g.appendChild(v)}d.appendChild(g);const m=document.createElement("div");m.className="chat-content",xw(f.content,m),d.appendChild(m),u.appendChild(d)}r.appendChild(u),t.appendChild(r)}function Cw(n,e){const r=e.each(n,Ue("type"),null,null).map(a=>a.value);return!!(r.includes(tn("LongChat").value)||r.includes(tn("ShortChat").value)||r.includes(tn("Chat").value)||r.includes(Lt("Flow").value)||r.includes(zt("Thread").value)||e.match(n,Lt("message"),null,null).length>0||e.any(n,zt("content"),null,null)&&e.any(n,Fe("created"),null,null))}Qe({label:"Chat",icon:"💬",canHandle(n,e){return Cw(n,e)},render(n,e,t){_w(n,e,t)}});function xd(n,e){return e.any(n,je("fn"),null,null)?.value??e.any(n,He("name"),null,null)?.value??e.any(n,re("name"),null,null)?.value??Me(n.value)}function Aw(n,e){const t=[],r=e.each(n,je("hasEmail"),null,null);for(const a of r){const s=e.any(a,je("value"),null,null)?.value;s?t.push(s):a.value.startsWith("mailto:")&&t.push(a.value)}if(t.length===0){const a=e.any(n,He("mbox"),null,null)?.value;a&&t.push(a)}return t}function Nw(n,e){const t=[],r=e.each(n,je("hasTelephone"),null,null);for(const a of r){const s=e.any(a,je("value"),null,null)?.value;s?t.push(s):a.value.startsWith("tel:")&&t.push(a.value)}return t}function Tw(n,e){const t=e.any(n,je("hasAddress"),null,null);if(!t)return;const r=t,a=e.any(r,je("street-address"),null,null)?.value,s=e.any(r,je("locality"),null,null)?.value,i=e.any(r,je("region"),null,null)?.value,l=e.any(r,je("postal-code"),null,null)?.value,o=e.any(r,je("country-name"),null,null)?.value,u=[a,s,i,l,o].filter(Boolean);return u.length>0?u.join(", "):void 0}function _d(n,e){const t=e.each(n,je("hasMember"),null,null),r=[];for(const a of t){const s=a;if(e.holds(s,Ue("type"),je("Group"))){const i=_d(s,e);r.push(...i);continue}r.push({uri:s.value,name:xd(s,e),emails:Aw(s,e),phones:Nw(s,e),title:e.any(s,je("title"),null,null)?.value??void 0,org:e.any(s,je("organization-name"),null,null)?.value??void 0,photo:e.any(s,je("hasPhoto"),null,null)?.value??e.any(s,He("img"),null,null)?.value??void 0,address:Tw(s,e),note:e.any(s,je("note"),null,null)?.value??void 0})}return r.sort((a,s)=>a.name.localeCompare(s.name)),r}function Sw(n,e){const t=[],r=e.each(n,je("hasMember"),null,null);for(const a of r){const s=a;if(e.holds(s,Ue("type"),je("Group"))){const i=xd(s,e),l=e.each(s,je("hasMember"),null,null).length;t.push({name:i,count:l,uri:s.value})}}return t.sort((a,s)=>a.name.localeCompare(s.name)),t}function Dw(n,e){return e.any(n,je("fn"),null,null)?.value??e.any(n,re("name"),null,null)?.value??"Address Book"}function Iw(n,e,t){t.innerHTML="";const r=document.createElement("div");r.className="contacts-view";const a=Dw(n,e),s=document.createElement("h2");s.className="contacts-title",s.textContent=a,r.appendChild(s);const i=_d(n,e),l=Sw(n,e),o=document.createElement("p");if(o.className="contacts-count",o.textContent=`${i.length} contact${i.length!==1?"s":""}`,r.appendChild(o),i.length>5){const c=document.createElement("input");c.className="contacts-search",c.type="search",c.placeholder="Filter contacts...",c.setAttribute("aria-label","Filter contacts"),c.addEventListener("input",()=>{const f=c.value.toLowerCase(),d=r.querySelectorAll(".contact-card");for(const g of d){const m=g,v=m.getAttribute("data-name")??"";m.style.display=v.toLowerCase().includes(f)?"":"none"}}),r.appendChild(c)}if(l.length>0){const c=document.createElement("div");c.className="contacts-groups";const f=document.createElement("h3");f.textContent="Groups",c.appendChild(f);const d=document.createElement("ul");d.className="contacts-group-list";for(const g of l){const m=document.createElement("li");m.className="contacts-group-item";const v=gn(g.uri,`${g.name} (${g.count})`);m.appendChild(v),d.appendChild(m)}c.appendChild(d),r.appendChild(c)}if(i.length===0){const c=document.createElement("p");c.className="contacts-empty",c.textContent="No contacts found.",r.appendChild(c),t.appendChild(r);return}const u=document.createElement("ul");u.className="contacts-list";for(const c of i){const f=document.createElement("li");if(f.className="contact-card",f.setAttribute("data-name",c.name),c.photo){const m=document.createElement("img");m.className="contact-photo",m.src=c.photo,m.alt=c.name,f.appendChild(m)}else{const m=document.createElement("div");m.className="contact-photo-placeholder",m.textContent=c.name.charAt(0).toUpperCase(),f.appendChild(m)}const d=document.createElement("div");d.className="contact-info";const g=gn(c.uri,c.name);if(g.className="contact-name",g.title=c.uri,d.appendChild(g),c.title){const m=document.createElement("span");m.className="contact-title",m.textContent=c.title,d.appendChild(m)}if(c.org){const m=document.createElement("span");m.className="contact-org",m.textContent=c.org,d.appendChild(m)}for(const m of c.emails){const v=document.createElement("a");v.className="contact-email";const b=m.replace("mailto:","");v.href=m.startsWith("mailto:")?m:`mailto:${b}`,v.textContent=b,d.appendChild(v)}for(const m of c.phones){const v=document.createElement("a");v.className="contact-phone";const b=m.replace("tel:","");v.href=m.startsWith("tel:")?m:`tel:${b}`,v.textContent=b,d.appendChild(v)}if(c.address){const m=document.createElement("span");m.className="contact-address",m.textContent=c.address,d.appendChild(m)}if(c.note){const m=document.createElement("p");m.className="contact-note",m.textContent=c.note,d.appendChild(m)}f.appendChild(d),u.appendChild(f)}r.appendChild(u),t.appendChild(r)}function Rw(n,e){const r=e.each(n,Ue("type"),null,null).map(a=>a.value);return!!(r.includes(je("AddressBook").value)||r.includes(je("Group").value)||e.match(n,je("hasMember"),null,null).length>0)}Qe({label:"Contacts",icon:"📇",canHandle(n,e){return Rw(n,e)},render(n,e,t){Iw(n,e,t)}});function pr(n,e,t,r=!1){if(!t)return;const a=document.createElement("div");a.className="org-detail";const s=document.createElement("span");if(s.className="org-label",s.textContent=e,a.appendChild(s),r&&(t.startsWith("http://")||t.startsWith("https://"))){const i=document.createElement("a");i.href=t,i.textContent=Me(t),i.target="_blank",i.rel="noopener",a.appendChild(i)}else if(r&&t.startsWith("mailto:")){const i=document.createElement("a");i.href=t,i.textContent=t.replace("mailto:",""),a.appendChild(i)}else{const i=document.createElement("span");i.className="org-value",i.textContent=t,a.appendChild(i)}n.appendChild(a)}function kw(n,e,t){t.innerHTML="";const r=document.createElement("div");r.className="org-card";const a=e.any(n,re("logo"),null,null)?.value??e.any(n,He("logo"),null,null)?.value??e.any(n,He("img"),null,null)?.value;if(a){const N=document.createElement("img");N.className="org-logo",N.src=a,N.alt="Organization logo",r.appendChild(N)}const s=e.any(n,re("name"),null,null)?.value??e.any(n,He("name"),null,null)?.value??e.any(n,Fe("title"),null,null)?.value??Me(n.value),i=document.createElement("h2");i.className="org-name",i.textContent=s,r.appendChild(i);const l=e.any(n,re("description"),null,null)?.value??e.any(n,Fe("description"),null,null)?.value;if(l){const N=document.createElement("p");N.className="org-description",N.textContent=l,r.appendChild(N)}const o=document.createElement("div");o.className="org-details";const u=e.any(n,re("url"),null,null)?.value;pr(o,"Website",u,!0);const c=e.any(n,re("email"),null,null)?.value;pr(o,"Email",c,!0);const f=e.any(n,re("telephone"),null,null)?.value;pr(o,"Phone",f);const d=e.any(n,re("address"),null,null);if(d){const N=e.any(d,re("streetAddress"),null,null)?.value,E=e.any(d,re("addressLocality"),null,null)?.value,w=e.any(d,re("addressRegion"),null,null)?.value,p=e.any(d,re("addressCountry"),null,null)?.value;if(N||E){const S=[N,E,w,p].filter(Boolean);pr(o,"Address",S.join(", "))}else pr(o,"Address",d.value)}const g=e.any(n,re("foundingDate"),null,null)?.value;pr(o,"Founded",g);const m=e.any(n,re("numberOfEmployees"),null,null)?.value;pr(o,"Employees",m),r.appendChild(o);const v=e.each(n,re("member"),null,null),b=e.each(n,re("employee"),null,null),_=[...v,...b];if(_.length>0){const N=document.createElement("div");N.className="org-people";const E=document.createElement("h3");E.textContent=`People (${_.length})`,N.appendChild(E);const w=document.createElement("ul");w.className="org-people-list";for(const p of _){const S=e.any(p,re("name"),null,null)?.value??e.any(p,He("name"),null,null)?.value??Me(p.value),F=document.createElement("li"),A=gn(p.value,S);A.title=p.value,F.appendChild(A),w.appendChild(F)}N.appendChild(w),r.appendChild(N)}t.appendChild(r)}const Lw=[re("Organization"),re("Corporation"),re("GovernmentOrganization"),re("NGO"),re("EducationalOrganization"),re("LocalBusiness"),He("Organization"),He("Group")];function Ow(n,e){const r=e.each(n,Ue("type"),null,null).map(a=>a.value);for(const a of Lw)if(r.includes(a.value))return!0;return!1}Qe({label:"Organization",icon:"🏢",canHandle(n,e){return Ow(n,e)},render(n,e,t){kw(n,e,t)}});function Fw(n,e){return e.any(n,je("fn"),null,null)?.value??e.any(n,He("name"),null,null)?.value??e.any(n,re("name"),null,null)?.value??Me(n.value)}function Bw(n,e){return e.any(n,je("hasPhoto"),null,null)?.value??e.any(n,He("img"),null,null)?.value??e.any(n,re("image"),null,null)?.value??e.any(n,He("depiction"),null,null)?.value??void 0}function Pw(n,e){const t=e.any(n,mn("preferredSubjectPronoun"),null,null)?.value;if(!t)return;let r=t;const a=e.any(n,mn("preferredObjectPronoun"),null,null)?.value;if(a){r+="/"+a;const s=e.any(n,mn("preferredRelativePronoun"),null,null)?.value;s&&(r+="/"+s)}return r}function Mw(n,e){const t=e.any(n,je("hasAddress"),null,null);if(!t)return;const r=t,a=e.any(r,je("locality"),null,null)?.value,s=e.any(r,je("region"),null,null)?.value,i=e.any(r,je("country-name"),null,null)?.value,l=[a,s,i].filter(Boolean);return l.length>0?l.join(", "):void 0}function Uw(n,e){const t=[],r=e.each(n,He("account"),null,null);for(const a of r){const s=a,i=e.any(s,He("name"),null,null)?.value??e.any(s,Ct("label"),null,null)?.value??Me(s.value),l=e.any(s,He("homepage"),null,null)?.value??s.value;t.push({name:i,uri:l})}return t}function $w(n,e){const t=[],r=e.each(n,je("hasTelephone"),null,null);for(const a of r){const s=e.any(a,je("value"),null,null)?.value;s?t.push(s):a.value.startsWith("tel:")&&t.push(a.value)}return t}function qw(n,e){const t=[],r=e.each(n,je("hasEmail"),null,null);for(const a of r){const s=e.any(a,je("value"),null,null)?.value;s?t.push(s):a.value.startsWith("mailto:")&&t.push(a.value)}if(t.length===0){const a=e.any(n,He("mbox"),null,null)?.value;a&&t.push(a)}return t}function jw(n,e){const t=e.each(null,Vs("member"),n,null),r=[],a=[];for(const s of t){const i=s,l=e.any(i,Vs("organization"),null,null),o=l?e.any(l,re("name"),null,null)?.value??e.any(l,He("name"),null,null)?.value??Me(l.value):"",u=e.any(i,Vs("role"),null,null),c=e.any(i,je("role"),null,null)?.value,f=u?e.any(u,re("name"),null,null)?.value:void 0,d=c&&f?`${f} - ${c}`:c||f||"",g=e.any(i,re("startDate"),null,null)?.value,m=e.any(i,re("endDate"),null,null)?.value,v=g?`${g.slice(0,10)} – ${m?m.slice(0,10):"present"}`:"",b={orgName:o,roleText:d,dates:v};e.holds(i,Ue("type"),mn("PastRole"))?a.push(b):r.push(b)}return{current:r,past:a}}function Ur(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function Fn(n,e,t,r=!1){if(!t)return;const a=document.createElement("div");a.className="profile-detail";const s=document.createElement("span");if(s.className="profile-label",s.textContent=e,a.appendChild(s),r&&(t.startsWith("http://")||t.startsWith("https://"))){const i=document.createElement("a");i.href=t,i.textContent=Me(t),i.target="_blank",i.rel="noopener",a.appendChild(i)}else if(r&&t.startsWith("mailto:")){const i=document.createElement("a");i.href=t,i.textContent=t.replace("mailto:",""),a.appendChild(i)}else if(r&&t.startsWith("tel:")){const i=document.createElement("a");i.href=t,i.textContent=t.replace("tel:",""),a.appendChild(i)}else{const i=document.createElement("span");i.className="profile-value",i.textContent=t,a.appendChild(i)}n.appendChild(a)}const Cd=[{label:"Name",predicate:je("fn")},{label:"Nickname",predicate:He("nick")},{label:"Photo URL",predicate:je("hasPhoto"),inputType:"url"},{label:"Role",predicate:je("role")},{label:"Organization",predicate:je("organization-name")},{label:"Bio",predicate:je("note")}];function la(n,e,t){t.innerHTML="";const r=e.updater,a=e.fetcher,s=!!(r&&a),i=document.createElement("div");if(i.className="profile-card",s){const L=document.createElement("div");L.className="profile-edit-row";const P=document.createElement("button");P.className="profile-edit-btn",P.textContent="Edit",P.addEventListener("click",()=>{Hw(n,e,t,r)}),L.appendChild(P),i.appendChild(L)}const l=Bw(n,e);if(l){const L=document.createElement("img");L.className="profile-photo",L.src=l,L.alt="Profile photo",i.appendChild(L)}const o=Fw(n,e),u=document.createElement("h2");u.className="profile-name",u.textContent=o,i.appendChild(u);const c=Pw(n,e);if(c){const L=document.createElement("p");L.className="profile-pronouns",L.textContent=c,i.appendChild(L)}const f=e.any(n,He("nick"),null,null)?.value;if(f){const L=document.createElement("p");L.className="profile-nick",L.textContent=`@${f}`,i.appendChild(L)}const d=Mw(n,e);if(d){const L=document.createElement("p");L.className="profile-location",L.textContent=d,i.appendChild(L)}const g=document.createElement("p");g.className="profile-webid";const m=document.createElement("a");m.href=n.value,m.textContent=n.value,m.target="_blank",m.rel="noopener",g.appendChild(m),i.appendChild(g);const v=document.createElement("div");v.className="profile-details";const b=e.any(n,je("role"),null,null)?.value,_=e.any(n,je("organization-name"),null,null)?.value;b&&_?Fn(v,"Role",`${b}, ${_}`):(Fn(v,"Role",b),Fn(v,"Organization",_)),Fn(v,"Birthday",e.any(n,je("bday"),null,null)?.value);const N=e.any(n,je("note"),null,null)?.value??e.any(n,He("bio"),null,null)?.value;Fn(v,"About",N?.trim());const E=qw(n,e);for(const L of E)Fn(v,"Email",L,!0);const w=$w(n,e);for(const L of w)Fn(v,"Phone",L,!0);const p=e.any(n,He("homepage"),null,null)?.value;Fn(v,"Homepage",p,!0);const S=e.any(n,Mr("storage"),null,null)?.value;Fn(v,"Pod",S,!0),i.appendChild(v);const{current:F,past:A}=jw(n,e);if(F.length>0||A.length>0){const L=document.createElement("div");L.className="profile-roles";const P=document.createElement("h3");if(P.textContent="Experience",L.appendChild(P),F.length>0){const M=document.createElement("h4");M.className="profile-roles-subheader",M.textContent="Current",L.appendChild(M);for(const B of F){const O=document.createElement("div");O.className="profile-role-item";let R=`<strong class="profile-role-org">${Ur(B.orgName)}</strong>`;B.roleText&&(R+=` <span class="profile-role-title">${Ur(B.roleText)}</span>`),B.dates&&(R+=` <span class="profile-role-dates">${Ur(B.dates)}</span>`),O.innerHTML=R,L.appendChild(O)}}if(A.length>0){const M=document.createElement("h4");M.className="profile-roles-subheader",M.textContent="Past",L.appendChild(M);for(const B of A){const O=document.createElement("div");O.className="profile-role-item";let R=`<strong class="profile-role-org">${Ur(B.orgName)}</strong>`;B.roleText&&(R+=` <span class="profile-role-title">${Ur(B.roleText)}</span>`),B.dates&&(R+=` <span class="profile-role-dates">${Ur(B.dates)}</span>`),O.innerHTML=R,L.appendChild(O)}}i.appendChild(L)}const k=Uw(n,e);if(k.length>0){const L=document.createElement("div");L.className="profile-social";const P=document.createElement("h3");P.textContent="Social Accounts",L.appendChild(P);const M=document.createElement("ul");M.className="profile-social-list";for(const B of k){const O=document.createElement("li"),R=document.createElement("a");R.href=B.uri,R.textContent=B.name,R.target="_blank",R.rel="noopener noreferrer",O.appendChild(R),M.appendChild(O)}L.appendChild(M),i.appendChild(L)}const C=e.each(n,He("knows"),null,null);if(C.length>0){const L=document.createElement("div");L.className="profile-friends";const P=document.createElement("h3");P.textContent=`Contacts (${C.length})`,L.appendChild(P);const M=document.createElement("ul");M.className="profile-friends-list";for(const B of C){const O=document.createElement("li"),R=gn(B.value,Me(B.value));R.title=B.value,O.appendChild(R),M.appendChild(O)}L.appendChild(M),i.appendChild(L)}t.appendChild(i)}function Hw(n,e,t,r){t.innerHTML="";const a=document.createElement("div");a.className="profile-edit-form";const s=document.createElement("h2");s.textContent="Edit Profile",a.appendChild(s);const i=new Map;for(const f of Cd){const d=e.any(n,f.predicate,null,null)?.value??"",g=document.createElement("div");g.className="profile-field-group";const m=document.createElement("label");m.textContent=f.label,g.appendChild(m);let v;f.label==="Bio"?(v=document.createElement("textarea"),v.rows=3):(v=document.createElement("input"),v.type=f.inputType??"text"),v.className="profile-field-input",v.value=d,g.appendChild(v),i.set(f,v),a.appendChild(g)}const l=document.createElement("div");l.className="profile-edit-actions";const o=document.createElement("button");o.className="profile-save-btn",o.textContent="Save";const u=document.createElement("button");u.className="profile-cancel-btn",u.textContent="Cancel",l.appendChild(o),l.appendChild(u),a.appendChild(l);const c=document.createElement("p");c.className="profile-edit-status",a.appendChild(c),t.appendChild(a),u.addEventListener("click",()=>{la(n,e,t)}),o.addEventListener("click",async()=>{o.disabled=!0,u.disabled=!0,c.textContent="Saving...",c.className="profile-edit-status";try{const f=[],d=[],g=n.doc();for(const m of Cd){const b=i.get(m).value.trim(),_=e.any(n,m.predicate,null,null);if(_&&b&&_.value!==b){const N=e.match(n,m.predicate,_,g);N.length>0&&f.push(N[0]),d.push(new Yt(n,m.predicate,ic(b),g))}else if(_&&!b){const N=e.match(n,m.predicate,_,g);N.length>0&&f.push(N[0])}else!_&&b&&d.push(new Yt(n,m.predicate,ic(b),g))}if(f.length===0&&d.length===0){la(n,e,t);return}await new Promise((m,v)=>{r.update(f,d,(b,_,N)=>{_?m():v(new Error(N??"Update failed"))})}),c.textContent="Saved!",c.className="profile-edit-status profile-edit-status-ok",setTimeout(()=>la(n,e,t),800)}catch(f){const d=f instanceof Error?f.message:String(f);c.textContent=`Save failed: ${d}`,c.className="profile-edit-status profile-edit-status-error",o.disabled=!1,u.disabled=!1}})}function Ww(n,e){const r=e.each(n,Ue("type"),null,null).map(a=>a.value);return!!(r.includes(He("Person").value)||r.includes(re("Person").value)||r.includes(je("Individual").value)||e.any(n,He("name"),null,null)||e.any(n,je("fn"),null,null))}Qe({label:"Profile",icon:"👤",canHandle(n,e){return Ww(n,e)},render(n,e,t){la(n,e,t)}});const qt=new Um;let zn=ac();function Ad(){const n=qt.isActive?qt.authFetch.bind(qt):void 0;zn=ac(n?{fetch:n}:void 0)}function Nd(n,e,t,r){const{store:a}=zn;r.innerHTML="",n.length<=1?r.hidden=!0:r.hidden=!1;for(let s=0;s<n.length;s++){const i=n[s],l=document.createElement("button");l.className="pane-tab",l.role="tab",l.textContent=`${i.icon} ${i.label}`,l.setAttribute("aria-selected",s===0?"true":"false"),l.addEventListener("click",()=>{for(const o of r.children)o.setAttribute("aria-selected","false");l.setAttribute("aria-selected","true"),t.innerHTML="",i.render(e,a,t)}),r.appendChild(l)}t.innerHTML="",n[0].render(e,a,t)}let oa=null,$r=null,ua=null;function Td(n,e,t){Sd();let r;try{r=new URL(n).origin}catch{return}const a=r.replace(/^http/,"ws");$r=n;try{const s=new WebSocket(a);oa=s,s.addEventListener("open",()=>{s.send(`sub ${n}`)}),s.addEventListener("message",i=>{const l=String(i.data);l.startsWith("pub")&&l.includes(n)&&Vw(n,e,t)}),s.addEventListener("close",()=>{$r===n&&(ua=setTimeout(()=>{$r===n&&Td(n,e,t)},5e3))}),s.addEventListener("error",()=>{s.close()})}catch{}}function Sd(){ua&&(clearTimeout(ua),ua=null),oa&&($r=null,oa.close(),oa=null)}async function Vw(n,e,t){const a=t.querySelector('.pane-tab[aria-selected="true"]')?.textContent??"";try{await zn.fetcher.load(or(n),{force:!0});const s=or($r?.includes("#")?$r:n),i=ks(s,zn.store);if(i.length===0)return;const l=i.findIndex(u=>`${u.icon} ${u.label}`===a),o=l>=0?i[l]:i[0];e.innerHTML="",o.render(s,zn.store,e)}catch{}}function zw(n,e,t){return new Promise(r=>{try{Wi(n,e,t,"application/ld+json",()=>r())}catch{r()}})}async function Gw(n,e,t,r){t.innerHTML="",r.innerHTML="",r.hidden=!0;const{store:a}=zn,s=n.replace(/#.*$/,"");await Promise.all(e.map(o=>zw(o,a,s)));const i=or(n),l=ks(i,a);if(l.length===0){t.innerHTML=`
      <div class="error">
        <p><strong>No pane available</strong> for this resource.</p>
        <p>URI: <code>${cl(n)}</code></p>
      </div>
    `;return}Nd(l,i,t,r)}async function ul(n,e,t){e.innerHTML='<p class="loading">Loading...</p>',t.innerHTML="",t.hidden=!0,Sd();try{await zn.fetchDocument(n);const r=or(n),a=ks(r,zn.store);if(a.length===0){e.innerHTML=`
        <div class="error">
          <p><strong>No pane available</strong> for this resource.</p>
          <p>URI: <code>${cl(n)}</code></p>
          <p>The resource was fetched successfully, but no registered pane
          knows how to display it.</p>
        </div>
      `;return}Nd(a,r,e,t);const s=n.replace(/#.*$/,"");Td(s,e,t)}catch(r){const a=r instanceof Error?r.message:String(r);e.innerHTML=`
      <div class="error">
        <p><strong>Failed to load resource</strong></p>
        <p>${cl(a)}</p>
      </div>
    `}}async function Jw(){try{await qt.handleRedirectFromLogin()}catch{}try{await qt.restore()}catch{}qt.isActive&&Ad()}function Kw(){Ad()}function cl(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}const dl=document.getElementById("mashlib")||document.body,ca=document.createElement("header");ca.id="chrome";const da=document.createElement("div");da.id="header-row";const Dd=document.createElement("h1");Dd.textContent="mashlib-next",da.appendChild(Dd);const vi=document.createElement("div");vi.id="auth-controls";const qr=document.createElement("button");qr.id="login-btn",qr.textContent="Login",vi.appendChild(qr);const Gn=document.createElement("span");Gn.id="user-info",Gn.hidden=!0,vi.appendChild(Gn);const mr=document.createElement("button");mr.id="logout-btn",mr.hidden=!0,mr.textContent="Logout",vi.appendChild(mr),da.appendChild(vi),ca.appendChild(da);const jr=document.createElement("form");jr.id="url-form";const fl=document.createElement("label");fl.htmlFor="url-input",fl.textContent="Resource URL:",jr.appendChild(fl);const wn=document.createElement("input");wn.id="url-input",wn.type="url",wn.placeholder="https://example.org/resource",wn.required=!0,jr.appendChild(wn);const hl=document.createElement("button");hl.type="submit",hl.textContent="Go",jr.appendChild(hl),ca.appendChild(jr),dl.appendChild(ca);const Bn=document.createElement("nav");Bn.id="pane-tabs",Bn.setAttribute("role","tablist"),Bn.setAttribute("aria-label","View selector"),Bn.hidden=!0,dl.appendChild(Bn);const gr=document.createElement("main");gr.id="pane-container",dl.appendChild(gr);async function pl(n,e){if(wn.value=n,e){const t=new URL(window.location.href);t.searchParams.set("uri",n),window.history.pushState({uri:n},"",t.toString())}await ul(n,gr,Bn)}function Id(){qt.isActive?(qr.hidden=!0,mr.hidden=!1,Gn.hidden=!1,Gn.textContent=qt.webId?Me(qt.webId):"Logged in",Gn.title=qt.webId??""):(qr.hidden=!1,mr.hidden=!0,Gn.hidden=!0,Gn.textContent="")}qt.addEventListener("sessionStateChange",()=>{Kw(),Id();const n=wn.value.trim();n&&ul(n,gr,Bn)}),qr.addEventListener("click",()=>{const n=prompt("Solid identity provider:","https://solidcommunity.net");n&&qt.login(n,window.location.href)}),mr.addEventListener("click",()=>{qt.logout()}),jr.addEventListener("submit",n=>{n.preventDefault();const e=wn.value.trim();e&&pl(e,!0)}),window.addEventListener(Ic,(n=>{const e=n.detail.uri;e&&pl(e,!0)})),window.addEventListener("popstate",()=>{const e=new URLSearchParams(window.location.search).get("uri");e?pl(e,!1):(wn.value="",gr.innerHTML='<p class="placeholder">Enter a URL above to browse a Linked Data resource.</p>')});async function Xw(){const e=new URLSearchParams(window.location.search).get("uri")||window.location.href;wn.value=e,await Jw(),Id();const t=document.querySelectorAll('script[type="application/ld+json"]');if(t.length>0){const r=Array.from(t).map(a=>a.textContent||"").filter(Boolean);await Gw(e,r,gr,Bn)}else window.history.replaceState({uri:e},"",window.location.href),ul(e,gr,Bn)}Xw();var ml={},gl,Rd;function yl(){return Rd||(Rd=1,gl=class lh{constructor(e,t=new Map,r=0){this.prefix=e,this._existing=t,this.counter=r}clone(){const{prefix:e,_existing:t,counter:r}=this;return new lh(e,new Map(t),r)}getId(e){const t=e&&this._existing.get(e);if(t)return t;const r=this.prefix+this.counter;return this.counter++,e&&this._existing.set(e,r),r}hasId(e){return this._existing.has(e)}getOldIds(){return[...this._existing.keys()]}}),gl}var bi={},wl={},kd;function Qw(){return kd||(kd=1,(function(n,e){if(n.setImmediate)return;var t=1,r={},a=!1,s=n.document,i;function l(N){typeof N!="function"&&(N=new Function(""+N));for(var E=new Array(arguments.length-1),w=0;w<E.length;w++)E[w]=arguments[w+1];var p={callback:N,args:E};return r[t]=p,i(t),t++}function o(N){delete r[N]}function u(N){var E=N.callback,w=N.args;switch(w.length){case 0:E();break;case 1:E(w[0]);break;case 2:E(w[0],w[1]);break;case 3:E(w[0],w[1],w[2]);break;default:E.apply(e,w);break}}function c(N){if(a)setTimeout(c,0,N);else{var E=r[N];if(E){a=!0;try{u(E)}finally{o(N),a=!1}}}}function f(){i=function(N){process.nextTick(function(){c(N)})}}function d(){if(n.postMessage&&!n.importScripts){var N=!0,E=n.onmessage;return n.onmessage=function(){N=!1},n.postMessage("","*"),n.onmessage=E,N}}function g(){var N="setImmediate$"+Math.random()+"$",E=function(w){w.source===n&&typeof w.data=="string"&&w.data.indexOf(N)===0&&c(+w.data.slice(N.length))};n.addEventListener?n.addEventListener("message",E,!1):n.attachEvent("onmessage",E),i=function(w){n.postMessage(N+w,"*")}}function m(){var N=new MessageChannel;N.port1.onmessage=function(E){var w=E.data;c(w)},i=function(E){N.port2.postMessage(E)}}function v(){var N=s.documentElement;i=function(E){var w=s.createElement("script");w.onreadystatechange=function(){c(E),w.onreadystatechange=null,N.removeChild(w),w=null},N.appendChild(w)}}function b(){i=function(N){setTimeout(c,0,N)}}var _=Object.getPrototypeOf&&Object.getPrototypeOf(n);_=_&&_.setTimeout?_:n,{}.toString.call(n.process)==="[object process]"?f():d()?g():n.MessageChannel?m():s&&"onreadystatechange"in s.createElement("script")?v():b(),_.setImmediate=l,_.clearImmediate=o})(typeof self>"u"?typeof Ar>"u"?wl:Ar:self)),wl}var Ld;function Od(){if(Ld)return bi;Ld=1,Qw(),bi.setImmediate=setImmediate,bi.crypto=globalThis.crypto;const n=[];for(let e=0;e<=255;++e)n.push(e.toString(16).padStart(2,"0"));return bi.bufferToHex=function(t){let r="";const a=new Uint8Array(t);for(let s=0;s<a.length;++s)r+=n[a[s]];return r},bi}var vl,Fd;function Bd(){if(Fd)return vl;Fd=1;const{bufferToHex:n,crypto:e}=Od(),t=new Map([["sha256","SHA-256"],["SHA256","SHA-256"],["SHA-256","SHA-256"],["sha384","SHA-384"],["SHA384","SHA-384"],["SHA-384","SHA-384"],["sha512","SHA-512"],["SHA512","SHA-512"],["SHA-512","SHA-512"]]);return vl=class{constructor(a){if(!(e&&e.subtle))throw new Error("crypto.subtle not found.");if(!t.has(a))throw new Error(`Unsupported algorithm "${a}".`);this.algorithm=t.get(a),this._content=""}update(a){this._content+=a}async digest(){const a=new TextEncoder().encode(this._content),s=await e.subtle.digest(this.algorithm,a);return n(s)}},vl}var bl,Pd;function Md(){return Pd||(Pd=1,bl=class{constructor(e){this.current=e.sort(),this.done=!1,this.dir=new Map;for(let t=0;t<e.length;++t)this.dir.set(e[t],!0)}hasNext(){return!this.done}next(){const{current:e,dir:t}=this,r=e.slice();let a=null,s=0;const i=e.length;for(let l=0;l<i;++l){const o=e[l],u=t.get(o);(a===null||o>a)&&(u&&l>0&&o>e[l-1]||!u&&l<i-1&&o>e[l+1])&&(a=o,s=l)}if(a===null)this.done=!0;else{const l=t.get(a)?s-1:s+1;e[s]=e[l],e[l]=a;for(const o of e)o>a&&t.set(o,!t.get(o))}return r}}),bl}var El,Ud;function xl(){if(Ud)return El;Ud=1;const e="http://www.w3.org/1999/02/22-rdf-syntax-ns#"+"langString",t="http://www.w3.org/2001/XMLSchema#string",r="NamedNode",a="BlankNode",s="Literal",i="DefaultGraph",l={};(()=>{const w="A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�"+"_",p=w+"0-9-·̀-ͯ‿-⁀",S="_:((?:["+w+"0-9])(?:(?:["+p+".])*(?:["+p+"]))?)",k='(?:<((?:[^\0- <>"{}|^`\\\\]|'+"\\\\u[0-9A-Fa-f]{4}"+"|"+"\\\\U[0-9A-Fa-f]{8}"+")*)>)",C=S,L='"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"',P="(?:\\^\\^"+k+")",B="(?:"+L+"(?:"+P+"|"+"(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*))"+")?)",O="[ \\t]+",R="[ \\t]*",H="(?:"+k+"|"+C+")"+O,j=k+O,K="(?:"+k+"|"+C+"|"+B+")"+R,I="(?:\\.|(?:(?:"+k+"|"+C+")"+R+"\\.))";l.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,l.empty=new RegExp("^"+R+"$"),l.quad=new RegExp("^"+R+H+j+K+I+R+"$")})(),El=class go{static parse(w){const p=[],S={},F=w.split(l.eoln);let A=0;for(const k of F){if(A++,l.empty.test(k))continue;const C=k.match(l.quad);if(C===null)throw new Error("N-Quads parse error on line "+A+".");const L={subject:null,predicate:null,object:null,graph:null};if(C[1]!==void 0?L.subject={termType:r,value:N(C[1])}:L.subject={termType:a,value:C[2]},L.predicate={termType:r,value:N(C[3])},C[4]!==void 0?L.object={termType:r,value:N(C[4])}:C[5]!==void 0?L.object={termType:a,value:C[5]}:(L.object={termType:s,value:void 0,datatype:{termType:r}},C[7]!==void 0?L.object.datatype.value=N(C[7]):C[8]!==void 0?(L.object.datatype.value=e,L.object.language=C[8]):L.object.datatype.value=t,L.object.value=g(C[6])),C[9]!==void 0?L.graph={termType:r,value:N(C[9])}:C[10]!==void 0?L.graph={termType:a,value:C[10]}:L.graph={termType:i,value:""},!(L.graph.value in S))S[L.graph.value]=[L],p.push(L);else{let P=!0;const M=S[L.graph.value];for(const B of M)if(o(B,L)){P=!1;break}P&&(M.push(L),p.push(L))}}return p}static serialize(w){const p=[];for(const S of w)p.push(go.serializeQuad(S));return p.sort().join("")}static serializeQuadComponents(w,p,S,F){let A="";return w.termType===r?A+=`<${b(w.value)}>`:A+=`_:${w.value}`,p.termType===r?A+=` <${b(p.value)}> `:A+=` _:${p.value} `,S.termType===r?A+=`<${b(S.value)}>`:S.termType===a?A+=`_:${S.value}`:(A+=`"${f(S.value)}"`,S.datatype.value===e?S.language&&(A+=`@${S.language}`):S.datatype.value!==t&&(A+=`^^<${b(S.datatype.value)}>`)),F.termType===r?A+=` <${b(F.value)}>`:F.termType===a&&(A+=` _:${F.value}`),A+=` .
`,A}static serializeQuad(w){return go.serializeQuadComponents(w.subject,w.predicate,w.object,w.graph)}};function o(E,w){return!(E.subject.termType===w.subject.termType&&E.object.termType===w.object.termType)||!(E.subject.value===w.subject.value&&E.predicate.value===w.predicate.value&&E.object.value===w.object.value)?!1:E.object.termType!==s?!0:E.object.datatype.termType===w.object.datatype.termType&&E.object.language===w.object.language&&E.object.datatype.value===w.object.datatype.value}const u=/[\u0000-\u001F\u007F"\\]/g,c=[];for(let E=0;E<=127;++E)u.test(String.fromCharCode(E))&&(c[E]="\\u"+E.toString(16).toUpperCase().padStart(4,"0"),u.lastIndex=0);c["\b".codePointAt(0)]="\\b",c["	".codePointAt(0)]="\\t",c[`
`.codePointAt(0)]="\\n",c["\f".codePointAt(0)]="\\f",c["\r".codePointAt(0)]="\\r",c['"'.codePointAt(0)]='\\"',c["\\".codePointAt(0)]="\\\\";function f(E){return u.test(E)?E.replace(u,function(w){return c[w.codePointAt(0)]}):E}const d=/(?:\\([btnfr"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g;function g(E){return d.test(E)?E.replace(d,function(w,p,S,F){if(p)switch(p){case"b":return"\b";case"t":return"	";case"n":return`
`;case"f":return"\f";case"r":return"\r";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(S)return String.fromCharCode(parseInt(S,16));if(F)return String.fromCodePoint(parseInt(F,16))}):E}const m=/[\u0000-\u0020<>"{}|^`\\]/g,v=[];for(let E=0;E<=127;++E)m.test(String.fromCharCode(E))&&(v[E]="\\u"+E.toString(16).toUpperCase().padStart(4,"0"),m.lastIndex=0);function b(E){return m.test(E)?E.replace(m,function(w){return v[w.codePointAt(0)]}):E}const _=/(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g;function N(E){return _.test(E)?E.replace(_,function(w,p,S){if(p)return String.fromCharCode(parseInt(p,16));if(S)return String.fromCodePoint(parseInt(S,16))}):E}return El}var _l,$d;function Yw(){if($d)return _l;$d=1;const n=yl(),e=Bd(),t=Md(),r=xl(),{setImmediate:a}=Od();_l=class{constructor({createMessageDigest:l=null,messageDigestAlgorithm:o="sha256",canonicalIdMap:u=new Map,maxWorkFactor:c=1,maxDeepIterations:f=-1,signal:d=null}={}){this.name="RDFC-1.0",this.blankNodeInfo=new Map,this.canonicalIssuer=new n("c14n",u),this.createMessageDigest=l||(()=>new e(o)),this.maxWorkFactor=c,this.maxDeepIterations=f,this.remainingDeepIterations=0,this.signal=d,this.quads=null}async main(l){this.quads=l;for(const m of l)this._addBlankNodeQuadInfo({quad:m,component:m.subject}),this._addBlankNodeQuadInfo({quad:m,component:m.object}),this._addBlankNodeQuadInfo({quad:m,component:m.graph});const o=new Map,u=[...this.blankNodeInfo.keys()];let c=0;for(const m of u)++c%100===0&&await this._yield(),await this._hashAndTrackBlankNode({id:m,hashToBlankNodes:o});const f=[...o.keys()].sort(),d=[];for(const m of f){const v=o.get(m);if(v.length>1){d.push(v);continue}const b=v[0];this.canonicalIssuer.getId(b)}if(this.maxDeepIterations<0)if(this.maxWorkFactor===0)this.maxDeepIterations=0;else if(this.maxWorkFactor===1/0)this.maxDeepIterations=1/0;else{const m=d.reduce((v,b)=>v+b.length,0);this.maxDeepIterations=m**this.maxWorkFactor}this.maxDeepIterations>Number.MAX_SAFE_INTEGER&&(this.maxDeepIterations=1/0),this.remainingDeepIterations=this.maxDeepIterations;for(const m of d){const v=[];for(const b of m){if(this.canonicalIssuer.hasId(b))continue;const _=new n("b");_.getId(b);const N=await this.hashNDegreeQuads(b,_);v.push(N)}v.sort(s);for(const b of v){const _=b.issuer.getOldIds();for(const N of _)this.canonicalIssuer.getId(N)}}const g=[];for(const m of this.quads){const v=r.serializeQuadComponents(this._componentWithCanonicalId(m.subject),m.predicate,this._componentWithCanonicalId(m.object),this._componentWithCanonicalId(m.graph));g.push(v)}return g.sort(),g.join("")}async hashFirstDegreeQuads(l){const o=[],u=this.blankNodeInfo.get(l),c=u.quads;for(const d of c)o.push(r.serializeQuadComponents(this.modifyFirstDegreeComponent(l,d.subject,"subject"),d.predicate,this.modifyFirstDegreeComponent(l,d.object,"object"),this.modifyFirstDegreeComponent(l,d.graph,"graph")));o.sort();const f=this.createMessageDigest();for(const d of o)f.update(d);return u.hash=await f.digest(),u.hash}async hashRelatedBlankNode(l,o,u,c){const f=this.createMessageDigest();f.update(c),c!=="g"&&f.update(this.getRelatedPredicate(o));let d;return this.canonicalIssuer.hasId(l)?d="_:"+this.canonicalIssuer.getId(l):u.hasId(l)?d="_:"+u.getId(l):d=this.blankNodeInfo.get(l).hash,f.update(d),f.digest()}async hashNDegreeQuads(l,o){if(this.remainingDeepIterations===0)throw new Error(`Maximum deep iterations exceeded (${this.maxDeepIterations}).`);this.remainingDeepIterations--;const u=this.createMessageDigest(),c=await this.createHashToRelated(l,o),f=[...c.keys()].sort();for(const d of f){u.update(d);let g="",m;const v=new t(c.get(d));let b=0;for(;v.hasNext();){const _=v.next();if(++b%3===0){if(this.signal&&this.signal.aborted)throw new Error(`Abort signal received: "${this.signal.reason}".`);await this._yield()}let N=o.clone(),E="";const w=[];let p=!1;for(const S of _)if(this.canonicalIssuer.hasId(S)?E+="_:"+this.canonicalIssuer.getId(S):(N.hasId(S)||w.push(S),E+="_:"+N.getId(S)),g.length!==0&&E>g){p=!0;break}if(!p){for(const S of w){const F=await this.hashNDegreeQuads(S,N);if(E+="_:"+N.getId(S),E+=`<${F.hash}>`,N=F.issuer,g.length!==0&&E>g){p=!0;break}}p||(g.length===0||E<g)&&(g=E,m=N)}}u.update(g),o=m}return{hash:await u.digest(),issuer:o}}modifyFirstDegreeComponent(l,o){return o.termType!=="BlankNode"?o:{termType:"BlankNode",value:o.value===l?"a":"z"}}getRelatedPredicate(l){return`<${l.predicate.value}>`}async createHashToRelated(l,o){const u=new Map,c=this.blankNodeInfo.get(l).quads;let f=0;for(const d of c)++f%100===0&&await this._yield(),await Promise.all([this._addRelatedBlankNodeHash({quad:d,component:d.subject,position:"s",id:l,issuer:o,hashToRelated:u}),this._addRelatedBlankNodeHash({quad:d,component:d.object,position:"o",id:l,issuer:o,hashToRelated:u}),this._addRelatedBlankNodeHash({quad:d,component:d.graph,position:"g",id:l,issuer:o,hashToRelated:u})]);return u}async _hashAndTrackBlankNode({id:l,hashToBlankNodes:o}){const u=await this.hashFirstDegreeQuads(l),c=o.get(u);c?c.push(l):o.set(u,[l])}_addBlankNodeQuadInfo({quad:l,component:o}){if(o.termType!=="BlankNode")return;const u=o.value,c=this.blankNodeInfo.get(u);c?c.quads.add(l):this.blankNodeInfo.set(u,{quads:new Set([l]),hash:null})}async _addRelatedBlankNodeHash({quad:l,component:o,position:u,id:c,issuer:f,hashToRelated:d}){if(!(o.termType==="BlankNode"&&o.value!==c))return;const g=o.value,m=await this.hashRelatedBlankNode(g,l,f,u),v=d.get(m);v?v.push(g):d.set(m,[g])}_componentWithCanonicalId(l){return l.termType==="BlankNode"&&!l.value.startsWith(this.canonicalIssuer.prefix)?{termType:"BlankNode",value:this.canonicalIssuer.getId(l.value)}:l}async _yield(){return new Promise(l=>a(l))}};function s(i,l){return i.hash<l.hash?-1:i.hash>l.hash?1:0}return _l}var Cl,qd;function Zw(){if(qd)return Cl;qd=1;const n=yl(),e=Bd(),t=Md(),r=xl();Cl=class{constructor({createMessageDigest:i=null,messageDigestAlgorithm:l="sha256",canonicalIdMap:o=new Map,maxWorkFactor:u=1,maxDeepIterations:c=-1,timeout:f=0}={}){this.name="RDFC-1.0",this.blankNodeInfo=new Map,this.canonicalIssuer=new n("c14n",o),this.createMessageDigest=i||(()=>new e(l)),this.maxWorkFactor=u,this.maxDeepIterations=c,this.remainingDeepIterations=0,this.timeout=f,f>0&&(this.startTime=Date.now()),this.quads=null}main(i){this.quads=i;for(const d of i)this._addBlankNodeQuadInfo({quad:d,component:d.subject}),this._addBlankNodeQuadInfo({quad:d,component:d.object}),this._addBlankNodeQuadInfo({quad:d,component:d.graph});const l=new Map,o=[...this.blankNodeInfo.keys()];for(const d of o)this._hashAndTrackBlankNode({id:d,hashToBlankNodes:l});const u=[...l.keys()].sort(),c=[];for(const d of u){const g=l.get(d);if(g.length>1){c.push(g);continue}const m=g[0];this.canonicalIssuer.getId(m)}if(this.maxDeepIterations<0)if(this.maxWorkFactor===0)this.maxDeepIterations=0;else if(this.maxWorkFactor===1/0)this.maxDeepIterations=1/0;else{const d=c.reduce((g,m)=>g+m.length,0);this.maxDeepIterations=d**this.maxWorkFactor}this.maxDeepIterations>Number.MAX_SAFE_INTEGER&&(this.maxDeepIterations=1/0),this.remainingDeepIterations=this.maxDeepIterations;for(const d of c){const g=[];for(const m of d){if(this.canonicalIssuer.hasId(m))continue;const v=new n("b");v.getId(m);const b=this.hashNDegreeQuads(m,v);g.push(b)}g.sort(a);for(const m of g){const v=m.issuer.getOldIds();for(const b of v)this.canonicalIssuer.getId(b)}}const f=[];for(const d of this.quads){const g=r.serializeQuadComponents(this._componentWithCanonicalId(d.subject),d.predicate,this._componentWithCanonicalId(d.object),this._componentWithCanonicalId(d.graph));f.push(g)}return f.sort(),f.join("")}hashFirstDegreeQuads(i){const l=[],o=this.blankNodeInfo.get(i),u=o.quads;for(const f of u)l.push(r.serializeQuadComponents(this.modifyFirstDegreeComponent(i,f.subject,"subject"),f.predicate,this.modifyFirstDegreeComponent(i,f.object,"object"),this.modifyFirstDegreeComponent(i,f.graph,"graph")));l.sort();const c=this.createMessageDigest();for(const f of l)c.update(f);return o.hash=c.digest(),o.hash}hashRelatedBlankNode(i,l,o,u){const c=this.createMessageDigest();c.update(u),u!=="g"&&c.update(this.getRelatedPredicate(l));let f;return this.canonicalIssuer.hasId(i)?f="_:"+this.canonicalIssuer.getId(i):o.hasId(i)?f="_:"+o.getId(i):f=this.blankNodeInfo.get(i).hash,c.update(f),c.digest()}hashNDegreeQuads(i,l){if(this.remainingDeepIterations===0)throw new Error(`Maximum deep iterations exceeded (${this.maxDeepIterations}).`);this.remainingDeepIterations--;const o=this.createMessageDigest(),u=this.createHashToRelated(i,l),c=[...u.keys()].sort();for(const f of c){o.update(f);let d="",g;const m=new t(u.get(f));let v=0;for(;m.hasNext();){const b=m.next();if(++v%3===0&&this.timeout>0&&Date.now()-this.startTime>this.timeout)throw new Error("Canonize timeout.");let _=l.clone(),N="";const E=[];let w=!1;for(const p of b)if(this.canonicalIssuer.hasId(p)?N+="_:"+this.canonicalIssuer.getId(p):(_.hasId(p)||E.push(p),N+="_:"+_.getId(p)),d.length!==0&&N>d){w=!0;break}if(!w){for(const p of E){const S=this.hashNDegreeQuads(p,_);if(N+="_:"+_.getId(p),N+=`<${S.hash}>`,_=S.issuer,d.length!==0&&N>d){w=!0;break}}w||(d.length===0||N<d)&&(d=N,g=_)}}o.update(d),l=g}return{hash:o.digest(),issuer:l}}modifyFirstDegreeComponent(i,l){return l.termType!=="BlankNode"?l:{termType:"BlankNode",value:l.value===i?"a":"z"}}getRelatedPredicate(i){return`<${i.predicate.value}>`}createHashToRelated(i,l){const o=new Map,u=this.blankNodeInfo.get(i).quads;for(const c of u)this._addRelatedBlankNodeHash({quad:c,component:c.subject,position:"s",id:i,issuer:l,hashToRelated:o}),this._addRelatedBlankNodeHash({quad:c,component:c.object,position:"o",id:i,issuer:l,hashToRelated:o}),this._addRelatedBlankNodeHash({quad:c,component:c.graph,position:"g",id:i,issuer:l,hashToRelated:o});return o}_hashAndTrackBlankNode({id:i,hashToBlankNodes:l}){const o=this.hashFirstDegreeQuads(i),u=l.get(o);u?u.push(i):l.set(o,[i])}_addBlankNodeQuadInfo({quad:i,component:l}){if(l.termType!=="BlankNode")return;const o=l.value,u=this.blankNodeInfo.get(o);u?u.quads.add(i):this.blankNodeInfo.set(o,{quads:new Set([i]),hash:null})}_addRelatedBlankNodeHash({quad:i,component:l,position:o,id:u,issuer:c,hashToRelated:f}){if(!(l.termType==="BlankNode"&&l.value!==u))return;const d=l.value,g=this.hashRelatedBlankNode(d,i,c,o),m=f.get(g);m?m.push(d):f.set(g,[d])}_componentWithCanonicalId(i){return i.termType==="BlankNode"&&!i.value.startsWith(this.canonicalIssuer.prefix)?{termType:"BlankNode",value:this.canonicalIssuer.getId(i.value)}:i}};function a(s,i){return s.hash<i.hash?-1:s.hash>i.hash?1:0}return Cl}var jd;function ev(){return jd||(jd=1,(function(n){const e=Yw(),t=Zw();function r(i,l){if(l.inputFormat){if(l.inputFormat==="application/n-quads"){if(typeof i!="string")throw new Error("N-Quads input must be a string.");return n.NQuads.parse(i)}throw new Error(`Unknown canonicalization input format: "${l.inputFormat}".`)}return i}function a(i){if(i.format&&i.format!=="application/n-quads")throw new Error(`Unknown canonicalization output format: "${i.format}".`)}function s(){globalThis.RDF_CANONIZE_TRACE_URDNA2015&&console.trace("[rdf-canonize] URDNA2015 is deprecated, use RDFC-1.0")}n.NQuads=xl(),n.IdentifierIssuer=yl(),n.canonize=async function(i,l={}){const o=r(i,l);if(a(l),!("algorithm"in l))throw new Error("No RDF Dataset Canonicalization algorithm specified.");if(l.algorithm==="RDFC-1.0")return new e(l).main(o);if(l.algorithm==="URDNA2015"&&!l.rejectURDNA2015)return s(),new e(l).main(o);throw new Error("Invalid RDF Dataset Canonicalization algorithm: "+l.algorithm)},n._canonizeSync=function(i,l={}){const o=r(i,l);if(a(l),!("algorithm"in l))throw new Error("No RDF Dataset Canonicalization algorithm specified.");if(l.algorithm==="RDFC-1.0")return new t(l).main(o);if(l.algorithm==="URDNA2015"&&!l.rejectURDNA2015)return s(),new t(l).main(o);throw new Error("Invalid RDF Dataset Canonicalization algorithm: "+l.algorithm)}})(ml)),ml}var Al,Hd;function Nl(){return Hd||(Hd=1,Al=ev()),Al}var Tl,Wd;function jt(){if(Wd)return Tl;Wd=1;const n={};return Tl=n,n.isArray=Array.isArray,n.isBoolean=e=>typeof e=="boolean"||Object.prototype.toString.call(e)==="[object Boolean]",n.isDouble=e=>n.isNumber(e)&&(String(e).indexOf(".")!==-1||Math.abs(e)>=1e21),n.isEmptyObject=e=>n.isObject(e)&&Object.keys(e).length===0,n.isNumber=e=>typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]",n.isNumeric=e=>!isNaN(parseFloat(e))&&isFinite(e),n.isObject=e=>Object.prototype.toString.call(e)==="[object Object]",n.isString=e=>typeof e=="string"||Object.prototype.toString.call(e)==="[object String]",n.isUndefined=e=>typeof e>"u",Tl}var Sl,Vd;function Pn(){if(Vd)return Sl;Vd=1;const n=jt(),e={};return Sl=e,e.isSubject=t=>n.isObject(t)&&!("@value"in t||"@set"in t||"@list"in t)?Object.keys(t).length>1||!("@id"in t):!1,e.isSubjectReference=t=>n.isObject(t)&&Object.keys(t).length===1&&"@id"in t,e.isValue=t=>n.isObject(t)&&"@value"in t,e.isList=t=>n.isObject(t)&&"@list"in t,e.isGraph=t=>n.isObject(t)&&"@graph"in t&&Object.keys(t).filter(r=>r!=="@id"&&r!=="@index").length===1,e.isSimpleGraph=t=>e.isGraph(t)&&!("@id"in t),e.isBlankNode=t=>{if(n.isObject(t)){if("@id"in t){const r=t["@id"];return!n.isString(r)||r.indexOf("_:")===0}return Object.keys(t).length===0||!("@value"in t||"@set"in t||"@list"in t)}return!1},Sl}var Dl,zd;function Gt(){return zd||(zd=1,Dl=class extends Error{constructor(e="An unspecified JSON-LD error occurred.",t="jsonld.Error",r={}){super(e),this.name=t,this.message=e,this.details=r}}),Dl}var Il,Gd;function Jt(){if(Gd)return Il;Gd=1;const n=Pn(),e=jt(),t=Nl().IdentifierIssuer,r=Gt(),a=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,s=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,i=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,l=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,o=/^@[a-zA-Z]+$/,u={headers:{accept:"application/ld+json, application/json"}},c={};Il=c,c.IdentifierIssuer=t,c.REGEX_BCP47=a,c.REGEX_KEYWORD=o,c.clone=function(d){if(d&&typeof d=="object"){let g;if(e.isArray(d)){g=[];for(let m=0;m<d.length;++m)g[m]=c.clone(d[m])}else if(d instanceof Map){g=new Map;for(const[m,v]of d)g.set(m,c.clone(v))}else if(d instanceof Set){g=new Set;for(const m of d)g.add(c.clone(m))}else if(e.isObject(d)){g={};for(const m in d)g[m]=c.clone(d[m])}else g=d.toString();return g}return d},c.asArray=function(d){return Array.isArray(d)?d:[d]},c.buildHeaders=(d={})=>{if(Object.keys(d).some(m=>m.toLowerCase()==="accept"))throw new RangeError('Accept header may not be specified; only "'+u.headers.accept+'" is supported.');return Object.assign({Accept:u.headers.accept},d)},c.parseLinkHeader=d=>{const g={},m=d.match(s);for(let v=0;v<m.length;++v){let b=m[v].match(i);if(!b)continue;const _={target:b[1]},N=b[2];for(;b=l.exec(N);)_[b[1]]=b[2]===void 0?b[3]:b[2];const E=_.rel||"";Array.isArray(g[E])?g[E].push(_):g.hasOwnProperty(E)?g[E]=[g[E],_]:g[E]=_}return g},c.validateTypeValue=(d,g)=>{if(!e.isString(d)&&!(e.isArray(d)&&d.every(m=>e.isString(m)))){if(g&&e.isObject(d))switch(Object.keys(d).length){case 0:return;case 1:if("@default"in d&&c.asArray(d["@default"]).every(m=>e.isString(m)))return}throw new r('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:d})}},c.hasProperty=(d,g)=>{if(d.hasOwnProperty(g)){const m=d[g];return!e.isArray(m)||m.length>0}return!1},c.hasValue=(d,g,m)=>{if(c.hasProperty(d,g)){let v=d[g];const b=n.isList(v);if(e.isArray(v)||b){b&&(v=v["@list"]);for(let _=0;_<v.length;++_)if(c.compareValues(m,v[_]))return!0}else if(!e.isArray(m))return c.compareValues(m,v)}return!1},c.addValue=(d,g,m,v)=>{if(v=v||{},"propertyIsArray"in v||(v.propertyIsArray=!1),"valueIsArray"in v||(v.valueIsArray=!1),"allowDuplicate"in v||(v.allowDuplicate=!0),"prependValue"in v||(v.prependValue=!1),v.valueIsArray)d[g]=m;else if(e.isArray(m)){m.length===0&&v.propertyIsArray&&!d.hasOwnProperty(g)&&(d[g]=[]),v.prependValue&&(m=m.concat(d[g]),d[g]=[]);for(let b=0;b<m.length;++b)c.addValue(d,g,m[b],v)}else if(d.hasOwnProperty(g)){const b=!v.allowDuplicate&&c.hasValue(d,g,m);!e.isArray(d[g])&&(!b||v.propertyIsArray)&&(d[g]=[d[g]]),b||(v.prependValue?d[g].unshift(m):d[g].push(m))}else d[g]=v.propertyIsArray?[m]:m},c.getValues=(d,g)=>[].concat(d[g]||[]),c.removeProperty=(d,g)=>{delete d[g]},c.removeValue=(d,g,m,v)=>{v=v||{},"propertyIsArray"in v||(v.propertyIsArray=!1);const b=c.getValues(d,g).filter(_=>!c.compareValues(_,m));b.length===0?c.removeProperty(d,g):b.length===1&&!v.propertyIsArray?d[g]=b[0]:d[g]=b},c.relabelBlankNodes=(d,g)=>{g=g||{};const m=g.issuer||new t("_:b");return f(m,d)},c.compareValues=(d,g)=>d===g||n.isValue(d)&&n.isValue(g)&&d["@value"]===g["@value"]&&d["@type"]===g["@type"]&&d["@language"]===g["@language"]&&d["@index"]===g["@index"]?!0:e.isObject(d)&&"@id"in d&&e.isObject(g)&&"@id"in g?d["@id"]===g["@id"]:!1,c.compareShortestLeast=(d,g)=>d.length<g.length?-1:g.length<d.length?1:d===g?0:d<g?-1:1;function f(d,g){if(e.isArray(g))for(let m=0;m<g.length;++m)g[m]=f(d,g[m]);else if(n.isList(g))g["@list"]=f(d,g["@list"]);else if(e.isObject(g)){n.isBlankNode(g)&&(g["@id"]=d.getId(g["@id"]));const m=Object.keys(g).sort();for(let v=0;v<m.length;++v){const b=m[v];b!=="@id"&&(g[b]=f(d,g[b]))}}return g}return Il}var Rl,Jd;function kl(){if(Jd)return Rl;Jd=1;const n="http://www.w3.org/1999/02/22-rdf-syntax-ns#",e="http://www.w3.org/2001/XMLSchema#";return Rl={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:n,RDF_LIST:n+"List",RDF_FIRST:n+"first",RDF_REST:n+"rest",RDF_NIL:n+"nil",RDF_TYPE:n+"type",RDF_PLAIN_LITERAL:n+"PlainLiteral",RDF_XML_LITERAL:n+"XMLLiteral",RDF_JSON_LITERAL:n+"JSON",RDF_OBJECT:n+"object",RDF_LANGSTRING:n+"langString",XSD:e,XSD_BOOLEAN:e+"boolean",XSD_DOUBLE:e+"double",XSD_INTEGER:e+"integer",XSD_STRING:e+"string"},Rl}var Ll,Kd;function Xd(){return Kd||(Kd=1,Ll=class{constructor(){this._requests={}}wrapLoader(e){const t=this;return t._loader=e,function(){return t.add.apply(t,arguments)}}async add(e){let t=this._requests[e];if(t)return Promise.resolve(t);t=this._requests[e]=this._loader(e);try{return await t}finally{delete this._requests[e]}}}),Ll}var Ol,Qd;function Jn(){if(Qd)return Ol;Qd=1;const n=jt(),e={};Ol=e,e.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([a-zA-Z][a-zA-Z0-9+-.]*):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},e.parse=(r,a)=>{const s={},i=e.parsers[a||"full"],l=i.regex.exec(r);let o=i.keys.length;for(;o--;)s[i.keys[o]]=l[o]===void 0?null:l[o];return(s.scheme==="https"&&s.port==="443"||s.scheme==="http"&&s.port==="80")&&(s.href=s.href.replace(":"+s.port,""),s.authority=s.authority.replace(":"+s.port,""),s.port=null),s.normalizedPath=e.removeDotSegments(s.path),s},e.prependBase=(r,a)=>{if(r===null||e.isAbsolute(a))return a;(!r||n.isString(r))&&(r=e.parse(r||""));const s=e.parse(a),i={protocol:r.protocol||""};if(s.authority!==null)i.authority=s.authority,i.path=s.path,i.query=s.query;else if(i.authority=r.authority,s.path==="")i.path=r.path,s.query!==null?i.query=s.query:i.query=r.query;else{if(s.path.indexOf("/")===0)i.path=s.path;else{let o=r.path;o=o.substr(0,o.lastIndexOf("/")+1),(o.length>0||r.authority)&&o.substr(-1)!=="/"&&(o+="/"),o+=s.path,i.path=o}i.query=s.query}s.path!==""&&(i.path=e.removeDotSegments(i.path));let l=i.protocol;return i.authority!==null&&(l+="//"+i.authority),l+=i.path,i.query!==null&&(l+="?"+i.query),s.fragment!==null&&(l+="#"+s.fragment),l===""&&(l="./"),l},e.removeBase=(r,a)=>{if(r===null)return a;(!r||n.isString(r))&&(r=e.parse(r||""));let s="";if(r.href!==""?s+=(r.protocol||"")+"//"+(r.authority||""):a.indexOf("//")&&(s+="//"),a.indexOf(s)!==0)return a;const i=e.parse(a.substr(s.length)),l=r.normalizedPath.split("/"),o=i.normalizedPath.split("/"),u=i.fragment||i.query?0:1;for(;l.length>0&&o.length>u&&l[0]===o[0];)l.shift(),o.shift();let c="";if(l.length>0){l.pop();for(let f=0;f<l.length;++f)c+="../"}return c+=o.join("/"),i.query!==null&&(c+="?"+i.query),i.fragment!==null&&(c+="#"+i.fragment),c===""&&(c="./"),c},e.removeDotSegments=r=>{if(r.length===0)return"";const a=r.split("/"),s=[];for(;a.length>0;){const i=a.shift(),l=a.length===0;if(i==="."){l&&s.push("");continue}if(i===".."){s.pop(),l&&s.push("");continue}s.push(i)}return r[0]==="/"&&s.length>0&&s[0]!==""&&s.unshift(""),s.length===1&&s[0]===""?"/":s.join("/")};const t=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;return e.isAbsolute=r=>n.isString(r)&&t.test(r),e.isRelative=r=>n.isString(r),Ol}var Fl,Yd;function tv(){if(Yd)return Fl;Yd=1;const{parseLinkHeader:n,buildHeaders:e}=Jt(),{LINK_HEADER_CONTEXT:t}=kl(),r=Gt(),a=Xd(),{prependBase:s}=Jn(),i=/(^|(\r\n))link:/i;Fl=({secure:o,headers:u={},xhr:c}={headers:{}})=>{return u=e(u),new a().wrapLoader(d);async function d(g){if(g.indexOf("http:")!==0&&g.indexOf("https:")!==0)throw new r('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:g});if(o&&g.indexOf("https")!==0)throw new r(`URL could not be dereferenced; secure mode is enabled and the URL's scheme is not "https".`,"jsonld.InvalidUrl",{code:"loading document failed",url:g});let m;try{m=await l(c,g,u)}catch(E){throw new r("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:g,cause:E})}if(m.status>=400)throw new r("URL could not be dereferenced: "+m.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:g,httpStatusCode:m.status});let v={contextUrl:null,documentUrl:g,document:m.response},b=null;const _=m.getResponseHeader("Content-Type");let N;if(i.test(m.getAllResponseHeaders())&&(N=m.getResponseHeader("Link")),N&&_!=="application/ld+json"){const E=n(N),w=E[t];if(Array.isArray(w))throw new r("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:g});w&&(v.contextUrl=w.target),b=E.alternate,b&&b.type=="application/ld+json"&&!(_||"").match(/^application\/(\w*\+)?json$/)&&(v=await d(s(g,b.target)))}return v}};function l(o,u,c){o=o||XMLHttpRequest;const f=new o;return new Promise((d,g)=>{f.onload=()=>d(f),f.onerror=m=>g(m),f.open("GET",u,!0);for(const m in c)f.setRequestHeader(m,c[m]);f.send()})}return Fl}var Bl,Zd;function nv(){if(Zd)return Bl;Zd=1;const n=tv(),e={};return Bl=e,e.setupDocumentLoaders=function(t){typeof XMLHttpRequest<"u"&&(t.documentLoaders.xhr=n,t.useDocumentLoader("xhr"))},e.setupGlobals=function(t){typeof globalThis.JsonLdProcessor>"u"&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:t.JsonLdProcessor})},Bl}var Pl,ef;function rv(){return ef||(ef=1,Pl=function(n){n.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}),Pl}var Ml,tf;function iv(){if(tf)return Ml;tf=1,Ml=n,n.Node=a,n.create=n;function n(s){var i=this;if(i instanceof n||(i=new n),i.tail=null,i.head=null,i.length=0,s&&typeof s.forEach=="function")s.forEach(function(u){i.push(u)});else if(arguments.length>0)for(var l=0,o=arguments.length;l<o;l++)i.push(arguments[l]);return i}n.prototype.removeNode=function(s){if(s.list!==this)throw new Error("removing node which does not belong to this list");var i=s.next,l=s.prev;return i&&(i.prev=l),l&&(l.next=i),s===this.head&&(this.head=i),s===this.tail&&(this.tail=l),s.list.length--,s.next=null,s.prev=null,s.list=null,i},n.prototype.unshiftNode=function(s){if(s!==this.head){s.list&&s.list.removeNode(s);var i=this.head;s.list=this,s.next=i,i&&(i.prev=s),this.head=s,this.tail||(this.tail=s),this.length++}},n.prototype.pushNode=function(s){if(s!==this.tail){s.list&&s.list.removeNode(s);var i=this.tail;s.list=this,s.prev=i,i&&(i.next=s),this.tail=s,this.head||(this.head=s),this.length++}},n.prototype.push=function(){for(var s=0,i=arguments.length;s<i;s++)t(this,arguments[s]);return this.length},n.prototype.unshift=function(){for(var s=0,i=arguments.length;s<i;s++)r(this,arguments[s]);return this.length},n.prototype.pop=function(){if(this.tail){var s=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,s}},n.prototype.shift=function(){if(this.head){var s=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,s}},n.prototype.forEach=function(s,i){i=i||this;for(var l=this.head,o=0;l!==null;o++)s.call(i,l.value,o,this),l=l.next},n.prototype.forEachReverse=function(s,i){i=i||this;for(var l=this.tail,o=this.length-1;l!==null;o--)s.call(i,l.value,o,this),l=l.prev},n.prototype.get=function(s){for(var i=0,l=this.head;l!==null&&i<s;i++)l=l.next;if(i===s&&l!==null)return l.value},n.prototype.getReverse=function(s){for(var i=0,l=this.tail;l!==null&&i<s;i++)l=l.prev;if(i===s&&l!==null)return l.value},n.prototype.map=function(s,i){i=i||this;for(var l=new n,o=this.head;o!==null;)l.push(s.call(i,o.value,this)),o=o.next;return l},n.prototype.mapReverse=function(s,i){i=i||this;for(var l=new n,o=this.tail;o!==null;)l.push(s.call(i,o.value,this)),o=o.prev;return l},n.prototype.reduce=function(s,i){var l,o=this.head;if(arguments.length>1)l=i;else if(this.head)o=this.head.next,l=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var u=0;o!==null;u++)l=s(l,o.value,u),o=o.next;return l},n.prototype.reduceReverse=function(s,i){var l,o=this.tail;if(arguments.length>1)l=i;else if(this.tail)o=this.tail.prev,l=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var u=this.length-1;o!==null;u--)l=s(l,o.value,u),o=o.prev;return l},n.prototype.toArray=function(){for(var s=new Array(this.length),i=0,l=this.head;l!==null;i++)s[i]=l.value,l=l.next;return s},n.prototype.toArrayReverse=function(){for(var s=new Array(this.length),i=0,l=this.tail;l!==null;i++)s[i]=l.value,l=l.prev;return s},n.prototype.slice=function(s,i){i=i||this.length,i<0&&(i+=this.length),s=s||0,s<0&&(s+=this.length);var l=new n;if(i<s||i<0)return l;s<0&&(s=0),i>this.length&&(i=this.length);for(var o=0,u=this.head;u!==null&&o<s;o++)u=u.next;for(;u!==null&&o<i;o++,u=u.next)l.push(u.value);return l},n.prototype.sliceReverse=function(s,i){i=i||this.length,i<0&&(i+=this.length),s=s||0,s<0&&(s+=this.length);var l=new n;if(i<s||i<0)return l;s<0&&(s=0),i>this.length&&(i=this.length);for(var o=this.length,u=this.tail;u!==null&&o>i;o--)u=u.prev;for(;u!==null&&o>s;o--,u=u.prev)l.push(u.value);return l},n.prototype.splice=function(s,i,...l){s>this.length&&(s=this.length-1),s<0&&(s=this.length+s);for(var o=0,u=this.head;u!==null&&o<s;o++)u=u.next;for(var c=[],o=0;u&&o<i;o++)c.push(u.value),u=this.removeNode(u);u===null&&(u=this.tail),u!==this.head&&u!==this.tail&&(u=u.prev);for(var o=0;o<l.length;o++)u=e(this,u,l[o]);return c},n.prototype.reverse=function(){for(var s=this.head,i=this.tail,l=s;l!==null;l=l.prev){var o=l.prev;l.prev=l.next,l.next=o}return this.head=i,this.tail=s,this};function e(s,i,l){var o=i===s.head?new a(l,null,i,s):new a(l,i,i.next,s);return o.next===null&&(s.tail=o),o.prev===null&&(s.head=o),s.length++,o}function t(s,i){s.tail=new a(i,s.tail,null,s),s.head||(s.head=s.tail),s.length++}function r(s,i){s.head=new a(i,null,s.head,s),s.tail||(s.tail=s.head),s.length++}function a(s,i,l,o){if(!(this instanceof a))return new a(s,i,l,o);this.list=o,this.value=s,i?(i.next=this,this.prev=i):this.prev=null,l?(l.prev=this,this.next=l):this.next=null}try{rv()(n)}catch{}return Ml}var Ul,nf;function rf(){if(nf)return Ul;nf=1;const n=iv(),e=Symbol("max"),t=Symbol("length"),r=Symbol("lengthCalculator"),a=Symbol("allowStale"),s=Symbol("maxAge"),i=Symbol("dispose"),l=Symbol("noDisposeOnSet"),o=Symbol("lruList"),u=Symbol("cache"),c=Symbol("updateAgeOnGet"),f=()=>1;class d{constructor(w){if(typeof w=="number"&&(w={max:w}),w||(w={}),w.max&&(typeof w.max!="number"||w.max<0))throw new TypeError("max must be a non-negative number");this[e]=w.max||1/0;const p=w.length||f;if(this[r]=typeof p!="function"?f:p,this[a]=w.stale||!1,w.maxAge&&typeof w.maxAge!="number")throw new TypeError("maxAge must be a number");this[s]=w.maxAge||0,this[i]=w.dispose,this[l]=w.noDisposeOnSet||!1,this[c]=w.updateAgeOnGet||!1,this.reset()}set max(w){if(typeof w!="number"||w<0)throw new TypeError("max must be a non-negative number");this[e]=w||1/0,v(this)}get max(){return this[e]}set allowStale(w){this[a]=!!w}get allowStale(){return this[a]}set maxAge(w){if(typeof w!="number")throw new TypeError("maxAge must be a non-negative number");this[s]=w,v(this)}get maxAge(){return this[s]}set lengthCalculator(w){typeof w!="function"&&(w=f),w!==this[r]&&(this[r]=w,this[t]=0,this[o].forEach(p=>{p.length=this[r](p.value,p.key),this[t]+=p.length})),v(this)}get lengthCalculator(){return this[r]}get length(){return this[t]}get itemCount(){return this[o].length}rforEach(w,p){p=p||this;for(let S=this[o].tail;S!==null;){const F=S.prev;N(this,w,S,p),S=F}}forEach(w,p){p=p||this;for(let S=this[o].head;S!==null;){const F=S.next;N(this,w,S,p),S=F}}keys(){return this[o].toArray().map(w=>w.key)}values(){return this[o].toArray().map(w=>w.value)}reset(){this[i]&&this[o]&&this[o].length&&this[o].forEach(w=>this[i](w.key,w.value)),this[u]=new Map,this[o]=new n,this[t]=0}dump(){return this[o].map(w=>m(this,w)?!1:{k:w.key,v:w.value,e:w.now+(w.maxAge||0)}).toArray().filter(w=>w)}dumpLru(){return this[o]}set(w,p,S){if(S=S||this[s],S&&typeof S!="number")throw new TypeError("maxAge must be a number");const F=S?Date.now():0,A=this[r](p,w);if(this[u].has(w)){if(A>this[e])return b(this,this[u].get(w)),!1;const L=this[u].get(w).value;return this[i]&&(this[l]||this[i](w,L.value)),L.now=F,L.maxAge=S,L.value=p,this[t]+=A-L.length,L.length=A,this.get(w),v(this),!0}const k=new _(w,p,A,F,S);return k.length>this[e]?(this[i]&&this[i](w,p),!1):(this[t]+=k.length,this[o].unshift(k),this[u].set(w,this[o].head),v(this),!0)}has(w){if(!this[u].has(w))return!1;const p=this[u].get(w).value;return!m(this,p)}get(w){return g(this,w,!0)}peek(w){return g(this,w,!1)}pop(){const w=this[o].tail;return w?(b(this,w),w.value):null}del(w){b(this,this[u].get(w))}load(w){this.reset();const p=Date.now();for(let S=w.length-1;S>=0;S--){const F=w[S],A=F.e||0;if(A===0)this.set(F.k,F.v);else{const k=A-p;k>0&&this.set(F.k,F.v,k)}}}prune(){this[u].forEach((w,p)=>g(this,p,!1))}}const g=(E,w,p)=>{const S=E[u].get(w);if(S){const F=S.value;if(m(E,F)){if(b(E,S),!E[a])return}else p&&(E[c]&&(S.value.now=Date.now()),E[o].unshiftNode(S));return F.value}},m=(E,w)=>{if(!w||!w.maxAge&&!E[s])return!1;const p=Date.now()-w.now;return w.maxAge?p>w.maxAge:E[s]&&p>E[s]},v=E=>{if(E[t]>E[e])for(let w=E[o].tail;E[t]>E[e]&&w!==null;){const p=w.prev;b(E,w),w=p}},b=(E,w)=>{if(w){const p=w.value;E[i]&&E[i](p.key,p.value),E[t]-=p.length,E[u].delete(p.key),E[o].removeNode(w)}};class _{constructor(w,p,S,F,A){this.key=w,this.value=p,this.length=S,this.now=F,this.maxAge=A||0}}const N=(E,w,p,S)=>{let F=p.value;m(E,F)&&(b(E,p),E[a]||(F=void 0)),F&&w.call(S,F.value,F.key,E)};return Ul=d,Ul}var $l,af;function av(){if(af)return $l;af=1;const n=rf(),e=10;return $l=class{constructor({document:r}){this.document=r,this.cache=new n({max:e})}getProcessed(r){return this.cache.get(r)}setProcessed(r,a){this.cache.set(r,a)}},$l}var ql,sf;function sv(){if(sf)return ql;sf=1;const{isArray:n,isObject:e,isString:t}=jt(),{asArray:r}=Jt(),{prependBase:a}=Jn(),s=Gt(),i=av(),l=10;ql=class{constructor({sharedCache:f}){this.perOpCache=new Map,this.sharedCache=f}async resolve({activeCtx:f,context:d,documentLoader:g,base:m,cycles:v=new Set}){d&&e(d)&&d["@context"]&&(d=d["@context"]),d=r(d);const b=[];for(const _ of d){if(t(_)){let w=this._get(_);w||(w=await this._resolveRemoteContext({activeCtx:f,url:_,documentLoader:g,base:m,cycles:v})),n(w)?b.push(...w):b.push(w);continue}if(_===null){b.push(new i({document:null}));continue}e(_)||o(d);const N=JSON.stringify(_);let E=this._get(N);E||(E=new i({document:_}),this._cacheResolvedContext({key:N,resolved:E,tag:"static"})),b.push(E)}return b}_get(f){let d=this.perOpCache.get(f);if(!d){const g=this.sharedCache.get(f);g&&(d=g.get("static"),d&&this.perOpCache.set(f,d))}return d}_cacheResolvedContext({key:f,resolved:d,tag:g}){if(this.perOpCache.set(f,d),g!==void 0){let m=this.sharedCache.get(f);m||(m=new Map,this.sharedCache.set(f,m)),m.set(g,d)}return d}async _resolveRemoteContext({activeCtx:f,url:d,documentLoader:g,base:m,cycles:v}){d=a(m,d);const{context:b,remoteDoc:_}=await this._fetchContext({activeCtx:f,url:d,documentLoader:g,cycles:v});m=_.documentUrl||d,u({context:b,base:m});const N=await this.resolve({activeCtx:f,context:b,documentLoader:g,base:m,cycles:v});return this._cacheResolvedContext({key:d,resolved:N,tag:_.tag}),N}async _fetchContext({activeCtx:f,url:d,documentLoader:g,cycles:m}){if(m.size>l)throw new s("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:f.processingMode==="json-ld-1.0"?"loading remote context failed":"context overflow",max:l});if(m.has(d))throw new s("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:f.processingMode==="json-ld-1.0"?"recursive context inclusion":"context overflow",url:d});m.add(d);let v,b;try{b=await g(d),v=b.document||null,t(v)&&(v=JSON.parse(v))}catch(_){throw new s(`Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context. URL: "${d}".`,"jsonld.InvalidUrl",{code:"loading remote context failed",url:d,cause:_})}if(!e(v))throw new s(`Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object. URL: "${d}".`,"jsonld.InvalidUrl",{code:"invalid remote context",url:d});return"@context"in v?v={"@context":v["@context"]}:v={"@context":{}},b.contextUrl&&(n(v["@context"])||(v["@context"]=[v["@context"]]),v["@context"].push(b.contextUrl)),{context:v,remoteDoc:b}}};function o(c){throw new s("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:c})}function u({context:c,base:f}){if(!c)return;const d=c["@context"];if(t(d)){c["@context"]=a(f,d);return}if(n(d)){for(let g=0;g<d.length;++g){const m=d[g];if(t(m)){d[g]=a(f,m);continue}e(m)&&u({context:{"@context":m},base:f})}return}if(e(d))for(const g in d)u({context:d[g],base:f})}return ql}var jl,lf;function lv(){return lf||(lf=1,jl=Nl().NQuads),jl}var Hl,of;function Ei(){if(of)return Hl;of=1;const n=Gt(),{isArray:e}=jt(),{asArray:t}=Jt(),r={};Hl=r,r.defaultEventHandler=null,r.setupEventHandler=({options:i={}})=>{const l=[].concat(i.safe?r.safeEventHandler:[],i.eventHandler?t(i.eventHandler):[],r.defaultEventHandler?r.defaultEventHandler:[]);return l.length===0?null:l},r.handleEvent=({event:i,options:l})=>{a({event:i,handlers:l.eventHandler})};function a({event:i,handlers:l}){let o=!0;for(let u=0;o&&u<l.length;++u){o=!1;const c=l[u];if(e(c))o=a({event:i,handlers:c});else if(typeof c=="function")c({event:i,next:()=>{o=!0}});else if(typeof c=="object")i.code in c?c[i.code]({event:i,next:()=>{o=!0}}):o=!0;else throw new n("Invalid event handler.","jsonld.InvalidEventHandler",{event:i})}return o}const s=new Set(["empty object","free-floating scalar","invalid @language value","invalid property","null @id value","null @value value","object with only @id","object with only @language","object with only @list","object with only @value","relative @id reference","relative @type reference","relative @vocab reference","reserved @id value","reserved @reverse value","reserved term","blank node predicate","relative graph reference","relative object reference","relative predicate reference","relative subject reference","rdfDirection not set"]);return r.safeEventHandler=function({event:l,next:o}){if(l.level==="warning"&&s.has(l.code))throw new n("Safe mode validation error.","jsonld.ValidationError",{event:l});o()},r.logEventHandler=function({event:l,next:o}){console.log(`EVENT: ${l.message}`,{event:l}),o()},r.logWarningEventHandler=function({event:l,next:o}){l.level==="warning"&&console.warn(`WARNING: ${l.message}`,{event:l}),o()},r.unhandledEventHandler=function({event:l}){throw new n("No handler for event.","jsonld.UnhandledEvent",{event:l})},r.setDefaultEventHandler=function({eventHandler:i}={}){r.defaultEventHandler=i?t(i):null},Hl}var Wl,uf;function yr(){if(uf)return Wl;uf=1;const n=Jt(),e=Gt(),{isArray:t,isObject:r,isString:a,isUndefined:s}=jt(),{isAbsolute:i,isRelative:l,prependBase:o}=Jn(),{handleEvent:u}=Ei(),{REGEX_BCP47:c,REGEX_KEYWORD:f,asArray:d,compareShortestLeast:g}=Jt(),m=new Map,v=1e4,b={};Wl=b,b.process=async({activeCtx:E,localCtx:w,options:p,propagate:S=!0,overrideProtected:F=!1,cycles:A=new Set})=>{if(r(w)&&"@context"in w&&t(w["@context"])&&(w=w["@context"]),d(w).length===0)return E;const C=[],L=[({event:O,next:R})=>{C.push(O),R()}];p.eventHandler&&L.push(p.eventHandler);const P=p;p={...p,eventHandler:L};const M=await p.contextResolver.resolve({activeCtx:E,context:w,documentLoader:p.documentLoader,base:p.base});r(M[0].document)&&typeof M[0].document["@propagate"]=="boolean"&&(S=M[0].document["@propagate"]);let B=E;!S&&!B.previousContext&&(B=B.clone(),B.previousContext=E);for(const O of M){let{document:R}=O;if(E=B,R===null){if(!F&&Object.keys(E.protected).length!==0)throw new e("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});B=E=b.getInitialContext(p).clone();continue}const H=O.getProcessed(E);if(H){if(P.eventHandler)for(const K of H.events)u({event:K,options:P});B=E=H.context;continue}if(r(R)&&"@context"in R&&(R=R["@context"]),!r(R))throw new e("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:R});B=B.clone();const j=new Map;if("@version"in R){if(R["@version"]!==1.1)throw new e("Unsupported JSON-LD version: "+R["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:R});if(E.processingMode&&E.processingMode==="json-ld-1.0")throw new e("@version: "+R["@version"]+" not compatible with "+E.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:R});B.processingMode="json-ld-1.1",B["@version"]=R["@version"],j.set("@version",!0)}if(B.processingMode=B.processingMode||E.processingMode,"@base"in R){let K=R["@base"];if(!(K===null||i(K)))if(l(K))K=o(B["@base"],K);else throw new e('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:R});B["@base"]=K,j.set("@base",!0)}if("@vocab"in R){const K=R["@vocab"];if(K===null)delete B["@vocab"];else if(a(K)){if(!i(K)&&b.processingMode(B,1))throw new e('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:R});{const I=_(B,K,{vocab:!0,base:!0},void 0,void 0,p);i(I)||p.eventHandler&&u({event:{type:["JsonLdEvent"],code:"relative @vocab reference",level:"warning",message:"Relative @vocab reference found.",details:{vocab:I}},options:p}),B["@vocab"]=I}}else throw new e('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:R});j.set("@vocab",!0)}if("@language"in R){const K=R["@language"];if(K===null)delete B["@language"];else if(a(K))K.match(c)||p.eventHandler&&u({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:K}},options:p}),B["@language"]=K.toLowerCase();else throw new e('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:R});j.set("@language",!0)}if("@direction"in R){const K=R["@direction"];if(E.processingMode==="json-ld-1.0")throw new e("Invalid JSON-LD syntax; @direction not compatible with "+E.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:R});if(K===null)delete B["@direction"];else{if(K!=="ltr"&&K!=="rtl")throw new e('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:R});B["@direction"]=K}j.set("@direction",!0)}if("@propagate"in R){const K=R["@propagate"];if(E.processingMode==="json-ld-1.0")throw new e("Invalid JSON-LD syntax; @propagate not compatible with "+E.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:R});if(typeof K!="boolean")throw new e("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:w});j.set("@propagate",!0)}if("@import"in R){const K=R["@import"];if(E.processingMode==="json-ld-1.0")throw new e("Invalid JSON-LD syntax; @import not compatible with "+E.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:R});if(!a(K))throw new e("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:w});const I=await p.contextResolver.resolve({activeCtx:E,context:K,documentLoader:p.documentLoader,base:p.base});if(I.length!==1)throw new e("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:w});const G=I[0].getProcessed(E);if(G)R=G;else{const se=I[0].document;if("@import"in se)throw new e("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:w});for(const ie in se)R.hasOwnProperty(ie)||(R[ie]=se[ie]);I[0].setProcessed(E,R)}j.set("@import",!0)}j.set("@protected",R["@protected"]||!1);for(const K in R)if(b.createTermDefinition({activeCtx:B,localCtx:R,term:K,defined:j,options:p,overrideProtected:F}),r(R[K])&&"@context"in R[K]){const I=R[K]["@context"];let G=!0;if(a(I)){const se=o(p.base,I);A.has(se)?G=!1:A.add(se)}if(G)try{await b.process({activeCtx:B.clone(),localCtx:R[K]["@context"],overrideProtected:!0,options:p,cycles:A})}catch{throw new e("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:R[K]["@context"],term:K})}}O.setProcessed(E,{context:B,events:C})}return B},b.createTermDefinition=({activeCtx:E,localCtx:w,term:p,defined:S,options:F,overrideProtected:A=!1})=>{if(S.has(p)){if(S.get(p))return;throw new e("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:w,term:p})}S.set(p,!1);let k;if(w.hasOwnProperty(p)&&(k=w[p]),p==="@type"&&r(k)&&(k["@container"]||"@set")==="@set"&&b.processingMode(E,1.1)){const R=["@container","@id","@protected"],H=Object.keys(k);if(H.length===0||H.some(j=>!R.includes(j)))throw new e("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:w,term:p})}else{if(b.isKeyword(p))throw new e("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:w,term:p});if(p.match(f)){F.eventHandler&&u({event:{type:["JsonLdEvent"],code:"reserved term",level:"warning",message:'Terms beginning with "@" are reserved for future use and dropped.',details:{term:p}},options:F});return}else if(p==="")throw new e("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:w})}const C=E.mappings.get(p);E.mappings.has(p)&&E.mappings.delete(p);let L=!1;if((a(k)||k===null)&&(L=!0,k={"@id":k}),!r(k))throw new e("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:w});const P={};E.mappings.set(p,P),P.reverse=!1;const M=["@container","@id","@language","@reverse","@type"];b.processingMode(E,1.1)&&M.push("@context","@direction","@index","@nest","@prefix","@protected");for(const R in k)if(!M.includes(R))throw new e("Invalid JSON-LD syntax; a term definition must not contain "+R,"jsonld.SyntaxError",{code:"invalid term definition",context:w});const B=p.indexOf(":");if(P._termHasColon=B>0,"@reverse"in k){if("@id"in k)throw new e("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:w});if("@nest"in k)throw new e("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:w});const R=k["@reverse"];if(!a(R))throw new e("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:w});if(R.match(f)){F.eventHandler&&u({event:{type:["JsonLdEvent"],code:"reserved @reverse value",level:"warning",message:'@reverse values beginning with "@" are reserved for future use and dropped.',details:{reverse:R}},options:F}),C?E.mappings.set(p,C):E.mappings.delete(p);return}const H=_(E,R,{vocab:!0,base:!1},w,S,F);if(!i(H))throw new e("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:w});P["@id"]=H,P.reverse=!0}else if("@id"in k){let R=k["@id"];if(R&&!a(R))throw new e("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:w});if(R===null)P["@id"]=null;else if(!b.isKeyword(R)&&R.match(f)){F.eventHandler&&u({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:'@id values beginning with "@" are reserved for future use and dropped.',details:{id:R}},options:F}),C?E.mappings.set(p,C):E.mappings.delete(p);return}else if(R!==p){if(R=_(E,R,{vocab:!0,base:!1},w,S,F),!i(R)&&!b.isKeyword(R))throw new e("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:w});if(p.match(/(?::[^:])|\//)){const H=new Map(S).set(p,!0);if(_(E,p,{vocab:!0,base:!1},w,H,F)!==R)throw new e("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:w})}P["@id"]=R,P._prefix=L&&!P._termHasColon&&R.match(/[:\/\?#\[\]@]$/)!==null}}if(!("@id"in P))if(P._termHasColon){const R=p.substr(0,B);if(w.hasOwnProperty(R)&&b.createTermDefinition({activeCtx:E,localCtx:w,term:R,defined:S,options:F}),E.mappings.has(R)){const H=p.substr(B+1);P["@id"]=E.mappings.get(R)["@id"]+H}else P["@id"]=p}else if(p==="@type")P["@id"]=p;else{if(!("@vocab"in E))throw new e("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:w,term:p});P["@id"]=E["@vocab"]+p}if((k["@protected"]===!0||S.get("@protected")===!0&&k["@protected"]!==!1)&&(E.protected[p]=!0,P.protected=!0),S.set(p,!0),"@type"in k){let R=k["@type"];if(!a(R))throw new e("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:w});if(R==="@json"||R==="@none"){if(b.processingMode(E,1))throw new e(`Invalid JSON-LD syntax; an @context @type value must not be "${R}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:w})}else if(R!=="@id"&&R!=="@vocab"){if(R=_(E,R,{vocab:!0,base:!1},w,S,F),!i(R))throw new e("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:w});if(R.indexOf("_:")===0)throw new e("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:w})}P["@type"]=R}if("@container"in k){const R=a(k["@container"])?[k["@container"]]:k["@container"]||[],H=["@list","@set","@index","@language"];let j=!0;const K=R.includes("@set");if(b.processingMode(E,1.1)){if(H.push("@graph","@id","@type"),R.includes("@list")){if(R.length!==1)throw new e("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:w})}else if(R.includes("@graph")){if(R.some(I=>I!=="@graph"&&I!=="@id"&&I!=="@index"&&I!=="@set"))throw new e("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:w})}else j&=R.length<=(K?2:1);if(R.includes("@type")&&(P["@type"]=P["@type"]||"@id",!["@id","@vocab"].includes(P["@type"])))throw new e("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:w})}else j&=!t(k["@container"]),j&=R.length<=1;if(j&=R.every(I=>H.includes(I)),j&=!(K&&R.includes("@list")),!j)throw new e("Invalid JSON-LD syntax; @context @container value must be one of the following: "+H.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:w});if(P.reverse&&!R.every(I=>["@index","@set"].includes(I)))throw new e("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:w});P["@container"]=R}if("@index"in k){if(!("@container"in k)||!P["@container"].includes("@index"))throw new e(`Invalid JSON-LD syntax; @index without @index in @container: "${k["@index"]}" on term "${p}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:w});if(!a(k["@index"])||k["@index"].indexOf("@")===0)throw new e(`Invalid JSON-LD syntax; @index must expand to an IRI: "${k["@index"]}" on term "${p}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:w});P["@index"]=k["@index"]}if("@context"in k&&(P["@context"]=k["@context"]),"@language"in k&&!("@type"in k)){let R=k["@language"];if(R!==null&&!a(R))throw new e("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:w});R!==null&&(R=R.toLowerCase()),P["@language"]=R}if("@prefix"in k){if(p.match(/:|\//))throw new e("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:w});if(b.isKeyword(P["@id"]))throw new e("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:w});if(typeof k["@prefix"]=="boolean")P._prefix=k["@prefix"]===!0;else throw new e("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:w})}if("@direction"in k){const R=k["@direction"];if(R!==null&&R!=="ltr"&&R!=="rtl")throw new e('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:w});P["@direction"]=R}if("@nest"in k){const R=k["@nest"];if(!a(R)||R!=="@nest"&&R.indexOf("@")===0)throw new e("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:w});P["@nest"]=R}const O=P["@id"];if(O==="@context"||O==="@preserve")throw new e("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:w});if(C&&C.protected&&!A&&(E.protected[p]=!0,P.protected=!0,!N(C,P)))throw new e("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:w,term:p})},b.expandIri=(E,w,p,S)=>_(E,w,p,void 0,void 0,S);function _(E,w,p,S,F,A){if(w===null||!a(w)||b.isKeyword(w))return w;if(w.match(f))return null;if(S&&S.hasOwnProperty(w)&&F.get(w)!==!0&&b.createTermDefinition({activeCtx:E,localCtx:S,term:w,defined:F,options:A}),p=p||{},p.vocab){const C=E.mappings.get(w);if(C===null)return null;if(r(C)&&"@id"in C)return C["@id"]}const k=w.indexOf(":");if(k>0){const C=w.substr(0,k),L=w.substr(k+1);if(C==="_"||L.indexOf("//")===0)return w;S&&S.hasOwnProperty(C)&&b.createTermDefinition({activeCtx:E,localCtx:S,term:C,defined:F,options:A});const P=E.mappings.get(C);if(P&&P._prefix)return P["@id"]+L;if(i(w))return w}if(p.vocab&&"@vocab"in E)w=E["@vocab"]+w;else if(p.base){let C,L;"@base"in E?E["@base"]?(L=o(A.base,E["@base"]),C=o(L,w)):(L=E["@base"],C=w):(L=A.base,C=o(A.base,w)),w=C}return w}b.getInitialContext=E=>{const w=JSON.stringify({processingMode:E.processingMode}),p=m.get(w);if(p)return p;const S={processingMode:E.processingMode,mappings:new Map,inverse:null,getInverse:F,clone:C,revertToPreviousContext:L,protected:{}};return m.size===v&&m.clear(),m.set(w,S),S;function F(){const P=this;if(P.inverse)return P.inverse;const M=P.inverse={},B=P.fastCurieMap={},O={},R=(P["@language"]||"@none").toLowerCase(),H=P["@direction"],j=P.mappings,K=[...j.keys()].sort(g);for(const I of K){const G=j.get(I);if(G===null)continue;let se=G["@container"]||"@none";if(se=[].concat(se).sort().join(""),G["@id"]===null)continue;const ie=d(G["@id"]);for(const ge of ie){let ee=M[ge];const ae=b.isKeyword(ge);if(ee)!ae&&!G._termHasColon&&O[ge].push(I);else if(M[ge]=ee={},!ae&&!G._termHasColon){O[ge]=[I];const le={iri:ge,terms:O[ge]};ge[0]in B?B[ge[0]].push(le):B[ge[0]]=[le]}if(ee[se]||(ee[se]={"@language":{},"@type":{},"@any":{}}),ee=ee[se],k(I,ee["@any"],"@none"),G.reverse)k(I,ee["@type"],"@reverse");else if(G["@type"]==="@none")k(I,ee["@any"],"@none"),k(I,ee["@language"],"@none"),k(I,ee["@type"],"@none");else if("@type"in G)k(I,ee["@type"],G["@type"]);else if("@language"in G&&"@direction"in G){const le=G["@language"],te=G["@direction"];le&&te?k(I,ee["@language"],`${le}_${te}`.toLowerCase()):le?k(I,ee["@language"],le.toLowerCase()):te?k(I,ee["@language"],`_${te}`):k(I,ee["@language"],"@null")}else"@language"in G?k(I,ee["@language"],(G["@language"]||"@null").toLowerCase()):"@direction"in G?G["@direction"]?k(I,ee["@language"],`_${G["@direction"]}`):k(I,ee["@language"],"@none"):H?(k(I,ee["@language"],`_${H}`),k(I,ee["@language"],"@none"),k(I,ee["@type"],"@none")):(k(I,ee["@language"],R),k(I,ee["@language"],"@none"),k(I,ee["@type"],"@none"))}}for(const I in B)A(B,I,1);return M}function A(P,M,B){const O=P[M],R=P[M]={};let H,j;for(const K of O)H=K.iri,B>=H.length?j="":j=H[B],j in R?R[j].push(K):R[j]=[K];for(const K in R)K!==""&&A(R,K,B+1)}function k(P,M,B){M.hasOwnProperty(B)||(M[B]=P)}function C(){const P={};return P.mappings=n.clone(this.mappings),P.clone=this.clone,P.inverse=null,P.getInverse=this.getInverse,P.protected=n.clone(this.protected),this.previousContext&&(P.previousContext=this.previousContext.clone()),P.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(P["@base"]=this["@base"]),"@language"in this&&(P["@language"]=this["@language"]),"@vocab"in this&&(P["@vocab"]=this["@vocab"]),P}function L(){return this.previousContext?this.previousContext.clone():this}},b.getContextValue=(E,w,p)=>{if(w===null)return p==="@context"?void 0:null;if(E.mappings.has(w)){const S=E.mappings.get(w);if(s(p))return S;if(S.hasOwnProperty(p))return S[p]}if(p==="@language"&&p in E||p==="@direction"&&p in E)return E[p];if(p!=="@context")return null},b.processingMode=(E,w)=>w.toString()>="1.1"?!E.processingMode||E.processingMode>="json-ld-"+w.toString():E.processingMode==="json-ld-1.0",b.isKeyword=E=>{if(!a(E)||E[0]!=="@")return!1;switch(E){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1};function N(E,w){if(!(E&&typeof E=="object")||!(w&&typeof w=="object"))return E===w;const p=Array.isArray(E);if(p!==Array.isArray(w))return!1;if(p){if(E.length!==w.length)return!1;for(let A=0;A<E.length;++A)if(!N(E[A],w[A]))return!1;return!0}const S=Object.keys(E),F=Object.keys(w);if(S.length!==F.length)return!1;for(const A in E){let k=E[A],C=w[A];if(A==="@container"&&Array.isArray(k)&&Array.isArray(C)&&(k=k.slice().sort(),C=C.slice().sort()),!N(k,C))return!1}return!0}return Wl}var Vl,cf;function ov(){if(cf)return Vl;cf=1;const n=Gt(),{isArray:e,isObject:t,isEmptyObject:r,isString:a,isUndefined:s}=jt(),{isList:i,isValue:l,isGraph:o,isSubject:u}=Pn(),{expandIri:c,getContextValue:f,isKeyword:d,process:g,processingMode:m}=yr(),{isAbsolute:v}=Jn(),{REGEX_BCP47:b,REGEX_KEYWORD:_,addValue:N,asArray:E,getValues:w,validateTypeValue:p}=Jt(),{handleEvent:S}=Ei(),F={};Vl=F,F.expand=async({activeCtx:M,activeProperty:B=null,element:O,options:R={},insideList:H=!1,insideIndex:j=!1,typeScopedContext:K=null})=>{if(O==null)return null;if(B==="@default"&&(R=Object.assign({},R,{isFrame:!1})),!e(O)&&!t(O))return!H&&(B===null||c(M,B,{vocab:!0},R)==="@graph")?(R.eventHandler&&S({event:{type:["JsonLdEvent"],code:"free-floating scalar",level:"warning",message:"Dropping free-floating scalar not in a list.",details:{value:O}},options:R}),null):C({activeCtx:M,activeProperty:B,value:O,options:R});if(e(O)){let le=[];const te=f(M,B,"@container")||[];H=H||te.includes("@list");for(let ce=0;ce<O.length;++ce){let pe=await F.expand({activeCtx:M,activeProperty:B,element:O[ce],options:R,insideIndex:j,typeScopedContext:K});H&&e(pe)&&(pe={"@list":pe}),pe!==null&&(e(pe)?le=le.concat(pe):le.push(pe))}return le}const I=c(M,B,{vocab:!0},R),G=f(M,B,"@context");K=K||(M.previousContext?M:null);let se=Object.keys(O).sort(),ie=!j;if(ie&&K&&se.length<=2&&!se.includes("@context"))for(const le of se){const te=c(K,le,{vocab:!0},R);if(te==="@value"){ie=!1,M=K;break}if(te==="@id"&&se.length===1){ie=!1;break}}ie&&(M=M.revertToPreviousContext()),s(G)||(M=await g({activeCtx:M,localCtx:G,propagate:!0,overrideProtected:!0,options:R})),"@context"in O&&(M=await g({activeCtx:M,localCtx:O["@context"],options:R})),K=M;let ge=null;for(const le of se)if(c(M,le,{vocab:!0},R)==="@type"){ge=ge||le;const ce=O[le],pe=Array.isArray(ce)?ce.length>1?ce.slice().sort():ce:[ce];for(const Ne of pe){const xe=f(K,Ne,"@context");s(xe)||(M=await g({activeCtx:M,localCtx:xe,options:R,propagate:!1}))}}let ee={};await k({activeCtx:M,activeProperty:B,expandedActiveProperty:I,element:O,expandedParent:ee,options:R,insideList:H,typeKey:ge,typeScopedContext:K}),se=Object.keys(ee);let ae=se.length;if("@value"in ee){if("@type"in ee&&("@language"in ee||"@direction"in ee))throw new n('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:ee});let le=ae-1;if("@type"in ee&&(le-=1),"@index"in ee&&(le-=1),"@language"in ee&&(le-=1),"@direction"in ee&&(le-=1),le!==0)throw new n('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:ee});const te=ee["@value"]===null?[]:E(ee["@value"]),ce=w(ee,"@type");if(!(m(M,1.1)&&ce.includes("@json")&&ce.length===1))if(te.length===0)R.eventHandler&&S({event:{type:["JsonLdEvent"],code:"null @value value",level:"warning",message:"Dropping null @value value.",details:{value:ee}},options:R}),ee=null;else{if(!te.every(pe=>a(pe)||r(pe))&&"@language"in ee)throw new n("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:ee});if(!ce.every(pe=>v(pe)&&!(a(pe)&&pe.indexOf("_:")===0)||r(pe)))throw new n('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:ee})}}else if("@type"in ee&&!e(ee["@type"]))ee["@type"]=[ee["@type"]];else if("@set"in ee||"@list"in ee){if(ae>1&&!(ae===2&&"@index"in ee))throw new n('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:ee});"@set"in ee&&(ee=ee["@set"],se=Object.keys(ee),ae=se.length)}else ae===1&&"@language"in ee&&(R.eventHandler&&S({event:{type:["JsonLdEvent"],code:"object with only @language",level:"warning",message:"Dropping object with only @language.",details:{value:ee}},options:R}),ee=null);return t(ee)&&!R.keepFreeFloatingNodes&&!H&&(B===null||I==="@graph"||(f(M,B,"@container")||[]).includes("@graph"))&&(ee=A({value:ee,count:ae,options:R})),ee};function A({value:M,count:B,options:O}){if(B===0||"@value"in M||"@list"in M||B===1&&"@id"in M){if(O.eventHandler){let R,H;B===0?(R="empty object",H="Dropping empty object."):"@value"in M?(R="object with only @value",H="Dropping object with only @value."):"@list"in M?(R="object with only @list",H="Dropping object with only @list."):B===1&&"@id"in M&&(R="object with only @id",H="Dropping object with only @id."),S({event:{type:["JsonLdEvent"],code:R,level:"warning",message:H,details:{value:M}},options:O})}return null}return M}async function k({activeCtx:M,activeProperty:B,expandedActiveProperty:O,element:R,expandedParent:H,options:j={},insideList:K,typeKey:I,typeScopedContext:G}){const se=Object.keys(R).sort(),ie=[];let ge;const ee=R[I]&&c(M,e(R[I])?R[I][0]:R[I],{vocab:!0},{...j,typeExpansion:!0})==="@json";for(const ae of se){let le=R[ae],te;if(ae==="@context")continue;const ce=c(M,ae,{vocab:!0},j);if(ce===null||!(v(ce)||d(ce))){j.eventHandler&&S({event:{type:["JsonLdEvent"],code:"invalid property",level:"warning",message:"Dropping property that did not expand into an absolute IRI or keyword.",details:{property:ae,expandedProperty:ce}},options:j});continue}if(d(ce)){if(O==="@reverse")throw new n("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:le});if(ce in H&&ce!=="@included"&&ce!=="@type")throw new n("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:ce})}if(ce==="@id"){if(!a(le)){if(!j.isFrame)throw new n('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:le});if(t(le)){if(!r(le))throw new n('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:le})}else if(e(le)){if(!le.every(J=>a(J)))throw new n('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:le})}else throw new n('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:le})}N(H,"@id",E(le).map(J=>{if(a(J)){const ne=c(M,J,{base:!0},j);return j.eventHandler&&(ne===null?S(J===null?{event:{type:["JsonLdEvent"],code:"null @id value",level:"warning",message:"Null @id found.",details:{id:J}},options:j}:{event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:J}},options:j}):v(ne)||S({event:{type:["JsonLdEvent"],code:"relative @id reference",level:"warning",message:"Relative @id reference found.",details:{id:J,expandedId:ne}},options:j})),ne}return J}),{propertyIsArray:j.isFrame});continue}if(ce==="@type"){t(le)&&(le=Object.fromEntries(Object.entries(le).map(([J,ne])=>[c(G,J,{vocab:!0}),E(ne).map(ye=>c(G,ye,{base:!0,vocab:!0},{...j,typeExpansion:!0}))]))),p(le,j.isFrame),N(H,"@type",E(le).map(J=>{if(a(J)){const ne=c(G,J,{base:!0,vocab:!0},{...j,typeExpansion:!0});return ne!=="@json"&&!v(ne)&&j.eventHandler&&S({event:{type:["JsonLdEvent"],code:"relative @type reference",level:"warning",message:"Relative @type reference found.",details:{type:J}},options:j}),ne}return J}),{propertyIsArray:!!j.isFrame});continue}if(ce==="@included"&&m(M,1.1)){const J=E(await F.expand({activeCtx:M,activeProperty:B,element:le,options:j}));if(!J.every(ne=>u(ne)))throw new n("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:le});N(H,"@included",J,{propertyIsArray:!0});continue}if(ce==="@graph"&&!(t(le)||e(le)))throw new n('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:le});if(ce==="@value"){ge=le,ee&&m(M,1.1)?H["@value"]=le:N(H,"@value",le,{propertyIsArray:j.isFrame});continue}if(ce==="@language"){if(le===null)continue;if(!a(le)&&!j.isFrame)throw new n('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:le});le=E(le).map(J=>a(J)?J.toLowerCase():J);for(const J of le)a(J)&&!J.match(b)&&j.eventHandler&&S({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:J}},options:j});N(H,"@language",le,{propertyIsArray:j.isFrame});continue}if(ce==="@direction"){if(!a(le)&&!j.isFrame)throw new n('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:le});le=E(le);for(const J of le)if(a(J)&&J!=="ltr"&&J!=="rtl")throw new n('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:le});N(H,"@direction",le,{propertyIsArray:j.isFrame});continue}if(ce==="@index"){if(!a(le))throw new n('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:le});N(H,"@index",le);continue}if(ce==="@reverse"){if(!t(le))throw new n('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:le});if(te=await F.expand({activeCtx:M,activeProperty:"@reverse",element:le,options:j}),"@reverse"in te)for(const ne in te["@reverse"])N(H,ne,te["@reverse"][ne],{propertyIsArray:!0});let J=H["@reverse"]||null;for(const ne in te){if(ne==="@reverse")continue;J===null&&(J=H["@reverse"]={}),N(J,ne,[],{propertyIsArray:!0});const ye=te[ne];for(let _e=0;_e<ye.length;++_e){const me=ye[_e];if(l(me)||i(me))throw new n('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:te});N(J,ne,me,{propertyIsArray:!0})}}continue}if(ce==="@nest"){ie.push(ae);continue}let pe=M;const Ne=f(M,ae,"@context");s(Ne)||(pe=await g({activeCtx:M,localCtx:Ne,propagate:!0,overrideProtected:!0,options:j}));const xe=f(M,ae,"@container")||[];if(xe.includes("@language")&&t(le)){const J=f(pe,ae,"@direction");te=L(pe,le,J,j)}else if(xe.includes("@index")&&t(le)){const J=xe.includes("@graph"),ne=f(pe,ae,"@index")||"@index",ye=ne!=="@index"&&c(M,ne,{vocab:!0},j);te=await P({activeCtx:pe,options:j,activeProperty:ae,value:le,asGraph:J,indexKey:ne,propertyIndex:ye})}else if(xe.includes("@id")&&t(le)){const J=xe.includes("@graph");te=await P({activeCtx:pe,options:j,activeProperty:ae,value:le,asGraph:J,indexKey:"@id"})}else if(xe.includes("@type")&&t(le))te=await P({activeCtx:pe.revertToPreviousContext(),options:j,activeProperty:ae,value:le,asGraph:!1,indexKey:"@type"});else{const J=ce==="@list";if(J||ce==="@set"){let ne=B;J&&O==="@graph"&&(ne=null),te=await F.expand({activeCtx:pe,activeProperty:ne,element:le,options:j,insideList:J})}else f(M,ae,"@type")==="@json"?te={"@type":"@json","@value":le}:te=await F.expand({activeCtx:pe,activeProperty:ae,element:le,options:j,insideList:!1})}if(!(te===null&&ce!=="@value")){if(ce!=="@list"&&!i(te)&&xe.includes("@list")&&(te={"@list":E(te)}),xe.includes("@graph")&&!xe.some(J=>J==="@id"||J==="@index")){if(te=E(te),j.isFrame||(te=te.filter(J=>{const ne=Object.keys(J).length;return A({value:J,count:ne,options:j})!==null})),te.length===0)continue;te=te.map(J=>({"@graph":E(J)}))}if(pe.mappings.has(ae)&&pe.mappings.get(ae).reverse){const J=H["@reverse"]=H["@reverse"]||{};te=E(te);for(let ne=0;ne<te.length;++ne){const ye=te[ne];if(l(ye)||i(ye))throw new n('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:te});N(J,ce,ye,{propertyIsArray:!0})}continue}N(H,ce,te,{propertyIsArray:!0})}}if("@value"in H&&!(H["@type"]==="@json"&&m(M,1.1))){if((t(ge)||e(ge))&&!j.isFrame)throw new n('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:ge})}for(const ae of ie){const le=e(R[ae])?R[ae]:[R[ae]];for(const te of le){if(!t(te)||Object.keys(te).some(ce=>c(M,ce,{vocab:!0},j)==="@value"))throw new n("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:te});await k({activeCtx:M,activeProperty:B,expandedActiveProperty:O,element:te,expandedParent:H,options:j,insideList:K,typeScopedContext:G,typeKey:I})}}}function C({activeCtx:M,activeProperty:B,value:O,options:R}){if(O==null)return null;const H=c(M,B,{vocab:!0},R);if(H==="@id")return c(M,O,{base:!0},R);if(H==="@type")return c(M,O,{vocab:!0,base:!0},{...R,typeExpansion:!0});const j=f(M,B,"@type");if((j==="@id"||H==="@graph")&&a(O)){const I=c(M,O,{base:!0},R);return I===null&&O.match(_)&&R.eventHandler&&S({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:B}},options:R}),{"@id":I}}if(j==="@vocab"&&a(O))return{"@id":c(M,O,{vocab:!0,base:!0},R)};if(d(H))return O;const K={};if(j&&!["@id","@vocab","@none"].includes(j))K["@type"]=j;else if(a(O)){const I=f(M,B,"@language");I!==null&&(K["@language"]=I);const G=f(M,B,"@direction");G!==null&&(K["@direction"]=G)}return["boolean","number","string"].includes(typeof O)||(O=O.toString()),K["@value"]=O,K}function L(M,B,O,R){const H=[],j=Object.keys(B).sort();for(const K of j){const I=c(M,K,{vocab:!0},R);let G=B[K];e(G)||(G=[G]);for(const se of G){if(se===null)continue;if(!a(se))throw new n("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:B});const ie={"@value":se};I!=="@none"&&(K.match(b)||R.eventHandler&&S({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:K}},options:R}),ie["@language"]=K.toLowerCase()),O&&(ie["@direction"]=O),H.push(ie)}}return H}async function P({activeCtx:M,options:B,activeProperty:O,value:R,asGraph:H,indexKey:j,propertyIndex:K}){const I=[],G=Object.keys(R).sort(),se=j==="@type";for(let ie of G){if(se){const ae=f(M,ie,"@context");s(ae)||(M=await g({activeCtx:M,localCtx:ae,propagate:!1,options:B}))}let ge=R[ie];e(ge)||(ge=[ge]),ge=await F.expand({activeCtx:M,activeProperty:O,element:ge,options:B,insideList:!1,insideIndex:!0});let ee;K?ie==="@none"?ee="@none":ee=C({activeCtx:M,activeProperty:j,value:ie,options:B}):ee=c(M,ie,{vocab:!0},B),j==="@id"?ie=c(M,ie,{base:!0},B):se&&(ie=ee);for(let ae of ge){if(H&&!o(ae)&&(ae={"@graph":[ae]}),j==="@type")ee==="@none"||(ae["@type"]?ae["@type"]=[ie].concat(ae["@type"]):ae["@type"]=[ie]);else{if(l(ae)&&!["@language","@type","@index"].includes(j))throw new n(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${j}".`,"jsonld.SyntaxError",{code:"invalid value object",value:ae});K?ee!=="@none"&&N(ae,K,ee,{propertyIsArray:!0,prependValue:!0}):ee!=="@none"&&!(j in ae)&&(ae[j]=ie)}I.push(ae)}}return I}return Vl}var zl,df;function fa(){if(df)return zl;df=1;const{isKeyword:n}=yr(),e=Pn(),t=jt(),r=Jt(),a=Gt(),s={};return zl=s,s.createMergedNodeMap=(i,l)=>{l=l||{};const o=l.issuer||new r.IdentifierIssuer("_:b"),u={"@default":{}};return s.createNodeMap(i,u,"@default",o),s.mergeNodeMaps(u)},s.createNodeMap=(i,l,o,u,c,f)=>{if(t.isArray(i)){for(const v of i)s.createNodeMap(v,l,o,u,void 0,f);return}if(!t.isObject(i)){f&&f.push(i);return}if(e.isValue(i)){if("@type"in i){let v=i["@type"];v.indexOf("_:")===0&&(i["@type"]=v=u.getId(v))}f&&f.push(i);return}else if(f&&e.isList(i)){const v=[];s.createNodeMap(i["@list"],l,o,u,c,v),f.push({"@list":v});return}if("@type"in i){const v=i["@type"];for(const b of v)b.indexOf("_:")===0&&u.getId(b)}t.isUndefined(c)&&(c=e.isBlankNode(i)?u.getId(i["@id"]):i["@id"]),f&&f.push({"@id":c});const d=l[o],g=d[c]=d[c]||{};g["@id"]=c;const m=Object.keys(i).sort();for(let v of m){if(v==="@id")continue;if(v==="@reverse"){const _={"@id":c},N=i["@reverse"];for(const E in N){const w=N[E];for(const p of w){let S=p["@id"];e.isBlankNode(p)&&(S=u.getId(S)),s.createNodeMap(p,l,o,u,S),r.addValue(d[S],E,_,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if(v==="@graph"){c in l||(l[c]={}),s.createNodeMap(i[v],l,c,u);continue}if(v==="@included"){s.createNodeMap(i[v],l,o,u);continue}if(v!=="@type"&&n(v)){if(v==="@index"&&v in g&&(i[v]!==g[v]||i[v]["@id"]!==g[v]["@id"]))throw new a("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:g});g[v]=i[v];continue}const b=i[v];if(v.indexOf("_:")===0&&(v=u.getId(v)),b.length===0){r.addValue(g,v,[],{propertyIsArray:!0});continue}for(let _ of b)if(v==="@type"&&(_=_.indexOf("_:")===0?u.getId(_):_),e.isSubject(_)||e.isSubjectReference(_)){if("@id"in _&&!_["@id"])continue;const N=e.isBlankNode(_)?u.getId(_["@id"]):_["@id"];r.addValue(g,v,{"@id":N},{propertyIsArray:!0,allowDuplicate:!1}),s.createNodeMap(_,l,o,u,N)}else if(e.isValue(_))r.addValue(g,v,_,{propertyIsArray:!0,allowDuplicate:!1});else if(e.isList(_)){const N=[];s.createNodeMap(_["@list"],l,o,u,c,N),_={"@list":N},r.addValue(g,v,_,{propertyIsArray:!0,allowDuplicate:!1})}else s.createNodeMap(_,l,o,u,c),r.addValue(g,v,_,{propertyIsArray:!0,allowDuplicate:!1})}},s.mergeNodeMapGraphs=i=>{const l={};for(const o of Object.keys(i).sort())for(const u of Object.keys(i[o]).sort()){const c=i[o][u];u in l||(l[u]={"@id":u});const f=l[u];for(const d of Object.keys(c).sort())if(n(d)&&d!=="@type")f[d]=r.clone(c[d]);else for(const g of c[d])r.addValue(f,d,r.clone(g),{propertyIsArray:!0,allowDuplicate:!1})}return l},s.mergeNodeMaps=i=>{const l=i["@default"],o=Object.keys(i).sort();for(const u of o){if(u==="@default")continue;const c=i[u];let f=l[u];f?"@graph"in f||(f["@graph"]=[]):l[u]=f={"@id":u,"@graph":[]};const d=f["@graph"];for(const g of Object.keys(c).sort()){const m=c[g];e.isSubjectReference(m)||d.push(m)}}return l},zl}var Gl,ff;function uv(){if(ff)return Gl;ff=1;const{isSubjectReference:n}=Pn(),{createMergedNodeMap:e}=fa(),t={};return Gl=t,t.flatten=r=>{const a=e(r),s=[],i=Object.keys(a).sort();for(let l=0;l<i.length;++l){const o=a[i[l]];n(o)||s.push(o)}return s},Gl}var Jl,hf;function cv(){if(hf)return Jl;hf=1;const n=Gt(),e=Pn(),t=jt(),{REGEX_BCP47:r,addValue:a}=Jt(),{handleEvent:s}=Ei(),{RDF_LIST:i,RDF_FIRST:l,RDF_REST:o,RDF_NIL:u,RDF_TYPE:c,RDF_JSON_LITERAL:f,XSD_BOOLEAN:d,XSD_DOUBLE:g,XSD_INTEGER:m,XSD_STRING:v}=kl(),b={};Jl=b,b.fromRDF=async(E,w)=>{const{useRdfType:p=!1,useNativeTypes:S=!1,rdfDirection:F=null}=w,A={},k={"@default":A},C={};if(F){if(F==="compound-literal")throw new n("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:F});if(F!=="i18n-datatype")throw new n("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:F})}for(const M of E){const B=M.graph.termType==="DefaultGraph"?"@default":M.graph.value;B in k||(k[B]={}),B!=="@default"&&!(B in A)&&(A[B]={"@id":B});const O=k[B],R=N(M.subject),H=M.predicate.value,j=M.object;R in O||(O[R]={"@id":R});const K=O[R],I=N(j),G=!!I;if(G&&!(I in O)&&(O[I]={"@id":I}),H===c&&!p&&G){a(K,"@type",I,{propertyIsArray:!0});continue}const se=_(j,S,F,w);if(a(K,H,se,{propertyIsArray:!0}),G)if(I===u){const ie=O[I];"usages"in ie||(ie.usages=[]),ie.usages.push({node:K,property:H,value:se})}else I in C?C[I]=!1:C[I]={node:K,property:H,value:se}}for(const M in k){const B=k[M];if(!(u in B))continue;const O=B[u];if(O.usages){for(let R of O.usages){let H=R.node,j=R.property,K=R.value;const I=[],G=[];let se=Object.keys(H).length;for(;j===o&&t.isObject(C[H["@id"]])&&t.isArray(H[l])&&H[l].length===1&&t.isArray(H[o])&&H[o].length===1&&(se===3||se===4&&t.isArray(H["@type"])&&H["@type"].length===1&&H["@type"][0]===i)&&(I.push(H[l][0]),G.push(H["@id"]),R=C[H["@id"]],H=R.node,j=R.property,K=R.value,se=Object.keys(H).length,!!e.isBlankNode(H)););delete K["@id"],K["@list"]=I.reverse();for(const ie of G)delete B[ie]}delete O.usages}}const L=[],P=Object.keys(A).sort();for(const M of P){const B=A[M];if(M in k){const O=B["@graph"]=[],R=k[M],H=Object.keys(R).sort();for(const j of H){const K=R[j];e.isSubjectReference(K)||O.push(K)}}e.isSubjectReference(B)||L.push(B)}return L};function _(E,w,p,S){const F=N(E);if(F)return{"@id":F};const A={"@value":E.value};if(E.language)E.language.match(r)||S.eventHandler&&s({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:E.language}},options:S}),A["@language"]=E.language;else{let k=E.datatype.value;if(k||(k=v),k===f){k="@json";try{A["@value"]=JSON.parse(A["@value"])}catch(C){throw new n("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:A["@value"],cause:C})}}if(w)if(k===d)A["@value"]==="true"||A["@value"]==="1"?A["@value"]=!0:A["@value"]==="false"||A["@value"]==="0"?A["@value"]=!1:A["@type"]=k;else if(k===m)if(t.isNumeric(A["@value"])){const C=parseInt(A["@value"],10);C.toFixed(0)===A["@value"]&&(A["@value"]=C)}else A["@type"]=k;else k===g&&t.isNumeric(A["@value"])?A["@value"]=parseFloat(A["@value"]):A["@type"]=k;else if(p==="i18n-datatype"&&k.startsWith("https://www.w3.org/ns/i18n#")){const[,C,L]=k.split(/[#_]/);C.length>0&&(A["@language"]=C,C.match(r)||S.eventHandler&&s({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:C}},options:S})),A["@direction"]=L}else k!==v&&(A["@type"]=k)}return A}function N(E){return E.termType==="NamedNode"?E.value:E.termType==="BlankNode"?"_:"+E.value:null}return Jl}var Kl,pf;function dv(){return pf||(pf=1,Kl=function n(e){if(typeof e=="number"&&isNaN(e))throw new Error("NaN is not allowed");if(typeof e=="number"&&!isFinite(e))throw new Error("Infinity is not allowed");return e===null||typeof e!="object"?JSON.stringify(e):e.toJSON instanceof Function?n(e.toJSON()):Array.isArray(e)?`[${e.reduce((a,s,i)=>`${a}${i===0?"":","}${n(s===void 0||typeof s=="symbol"?null:s)}`,"")}]`:`{${Object.keys(e).sort().reduce((r,a)=>{if(e[a]===void 0||typeof e[a]=="symbol")return r;const s=r.length===0?"":",";return`${r}${s}${n(a)}:${n(e[a])}`},"")}}`}),Kl}var Xl,mf;function fv(){if(mf)return Xl;mf=1;const{createNodeMap:n}=fa(),{isKeyword:e}=yr(),t=Pn(),r=dv(),a=Gt(),s=jt(),i=Jt(),{handleEvent:l}=Ei(),{RDF_FIRST:o,RDF_REST:u,RDF_NIL:c,RDF_TYPE:f,RDF_JSON_LITERAL:d,RDF_LANGSTRING:g,XSD_BOOLEAN:m,XSD_DOUBLE:v,XSD_INTEGER:b,XSD_STRING:_}=kl(),{isAbsolute:N}=Jn(),E={};Xl=E,E.toRDF=(A,k)=>{const C=new i.IdentifierIssuer("_:b"),L={"@default":{}};n(A,L,"@default",C);const P=[],M=Object.keys(L).sort();for(const B of M){let O;if(B==="@default")O={termType:"DefaultGraph",value:""};else if(N(B))O=F(B);else{k.eventHandler&&l({event:{type:["JsonLdEvent"],code:"relative graph reference",level:"warning",message:"Relative graph reference found.",details:{graph:B}},options:k});continue}w(P,L[B],O,C,k)}return P};function w(A,k,C,L,P){const M=Object.keys(k).sort();for(const B of M){const O=k[B],R=Object.keys(O).sort();for(let H of R){const j=O[H];if(H==="@type")H=f;else if(e(H))continue;for(const K of j){const I=F(B);if(!N(B)){P.eventHandler&&l({event:{type:["JsonLdEvent"],code:"relative subject reference",level:"warning",message:"Relative subject reference found.",details:{subject:B}},options:P});continue}const G=F(H);if(!N(H)){P.eventHandler&&l({event:{type:["JsonLdEvent"],code:"relative predicate reference",level:"warning",message:"Relative predicate reference found.",details:{predicate:H}},options:P});continue}if(G.termType==="BlankNode"&&!P.produceGeneralizedRdf){P.eventHandler&&l({event:{type:["JsonLdEvent"],code:"blank node predicate",level:"warning",message:"Dropping blank node predicate.",details:{property:L.getOldIds().find(ie=>L.getId(ie)===H)}},options:P});continue}const se=S(K,L,A,C,P.rdfDirection,P);se&&A.push({subject:I,predicate:G,object:se,graph:C})}}}}function p(A,k,C,L,P,M){const B={termType:"NamedNode",value:o},O={termType:"NamedNode",value:u},R={termType:"NamedNode",value:c},H=A.pop(),j=H?{termType:"BlankNode",value:k.getId().slice(2)}:R;let K=j;for(const I of A){const G=S(I,k,C,L,P,M),se={termType:"BlankNode",value:k.getId().slice(2)};C.push({subject:K,predicate:B,object:G,graph:L}),C.push({subject:K,predicate:O,object:se,graph:L}),K=se}if(H){const I=S(H,k,C,L,P,M);C.push({subject:K,predicate:B,object:I,graph:L}),C.push({subject:K,predicate:O,object:R,graph:L})}return j}function S(A,k,C,L,P,M){let B;if(t.isValue(A)){B={termType:"Literal",value:void 0,datatype:{termType:"NamedNode"}};let O=A["@value"];const R=A["@type"]||null;if(R==="@json")B.value=r(O),B.datatype.value=d;else if(s.isBoolean(O))B.value=O.toString(),B.datatype.value=R||m;else if(s.isDouble(O)||R===v)s.isDouble(O)||(O=parseFloat(O)),B.value=O.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),B.datatype.value=R||v;else if(s.isNumber(O))B.value=O.toFixed(0),B.datatype.value=R||b;else if("@direction"in A&&P==="i18n-datatype"){const H=(A["@language"]||"").toLowerCase(),j=A["@direction"],K=`https://www.w3.org/ns/i18n#${H}_${j}`;B.datatype.value=K,B.value=O}else{if("@direction"in A&&P==="compound-literal")throw new a("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:P});if("@direction"in A&&P)throw new a("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:P});"@language"in A?("@direction"in A&&!P&&M.eventHandler&&l({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:B.value}},options:M}),B.value=O,B.datatype.value=R||g,B.language=A["@language"]):("@direction"in A&&!P&&M.eventHandler&&l({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:B.value}},options:M}),B.value=O,B.datatype.value=R||_)}}else if(t.isList(A)){const O=p(A["@list"],k,C,L,P,M);B={termType:O.termType,value:O.value}}else{const O=s.isObject(A)?A["@id"]:A;B=F(O)}return B.termType==="NamedNode"&&!N(B.value)?(M.eventHandler&&l({event:{type:["JsonLdEvent"],code:"relative object reference",level:"warning",message:"Relative object reference found.",details:{object:B.value}},options:M}),null):B}function F(A){return A.startsWith("_:")?{termType:"BlankNode",value:A.slice(2)}:{termType:"NamedNode",value:A}}return Xl}var Ql,gf;function hv(){if(gf)return Ql;gf=1;const{isKeyword:n}=yr(),e=Pn(),t=jt(),r=Jt(),a=Jn(),s=Gt(),{createNodeMap:i,mergeNodeMapGraphs:l}=fa(),o={};Ql=o,o.frameMergedOrDefault=(w,p,S)=>{const F={options:S,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},A=new r.IdentifierIssuer("_:b");i(w,F.graphMap,"@default",A),S.merged&&(F.graphMap["@merged"]=l(F.graphMap),F.graph="@merged"),F.subjects=F.graphMap[F.graph];const k=[];o.frame(F,Object.keys(F.subjects).sort(),p,k),S.pruneBlankNodeIdentifiers&&(S.bnodesToClear=Object.keys(F.bnodeMap).filter(C=>F.bnodeMap[C].length===1));return S.link={},b(k,S)},o.frame=(w,p,S,F,A=null)=>{d(S),S=S[0];const k=w.options,C={embed:f(S,k,"embed"),explicit:f(S,k,"explicit"),requireAll:f(S,k,"requireAll")};w.link.hasOwnProperty(w.graph)||(w.link[w.graph]={});const L=w.link[w.graph],P=g(w,p,S,C),M=Object.keys(P).sort();for(const B of M){const O=P[B];if(A===null?w.uniqueEmbeds={[w.graph]:{}}:w.uniqueEmbeds[w.graph]=w.uniqueEmbeds[w.graph]||{},C.embed==="@link"&&B in L){_(F,A,L[B]);continue}const R={"@id":B};if(B.indexOf("_:")===0&&r.addValue(w.bnodeMap,B,R,{propertyIsArray:!0}),L[B]=R,(C.embed==="@first"||C.embed==="@last")&&w.is11)throw new s("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:S});if(!(!w.embedded&&w.uniqueEmbeds[w.graph].hasOwnProperty(B))){if(w.embedded&&(C.embed==="@never"||c(O,w.graph,w.subjectStack))){_(F,A,R);continue}if(w.embedded&&(C.embed=="@first"||C.embed=="@once")&&w.uniqueEmbeds[w.graph].hasOwnProperty(B)){_(F,A,R);continue}if(C.embed==="@last"&&B in w.uniqueEmbeds[w.graph]&&v(w,B),w.uniqueEmbeds[w.graph][B]={parent:F,property:A},w.subjectStack.push({subject:O,graph:w.graph}),B in w.graphMap){let H=!1,j=null;"@graph"in S?(j=S["@graph"][0],H=!(B==="@merged"||B==="@default"),t.isObject(j)||(j={})):(H=w.graph!=="@merged",j={}),H&&o.frame({...w,graph:B,embedded:!1},Object.keys(w.graphMap[B]).sort(),[j],R,"@graph")}"@included"in S&&o.frame({...w,embedded:!1},p,S["@included"],R,"@included");for(const H of Object.keys(O).sort()){if(n(H)){if(R[H]=r.clone(O[H]),H==="@type")for(const j of O["@type"])j.indexOf("_:")===0&&r.addValue(w.bnodeMap,j,R,{propertyIsArray:!0});continue}if(!(C.explicit&&!(H in S)))for(const j of O[H]){const K=H in S?S[H]:u(C);if(e.isList(j)){const I=S[H]&&S[H][0]&&S[H][0]["@list"]?S[H][0]["@list"]:u(C),G={"@list":[]};_(R,H,G);const se=j["@list"];for(const ie of se)e.isSubjectReference(ie)?o.frame({...w,embedded:!0},[ie["@id"]],I,G,"@list"):_(G,"@list",r.clone(ie))}else e.isSubjectReference(j)?o.frame({...w,embedded:!0},[j["@id"]],K,R,H):E(K[0],j)&&_(R,H,r.clone(j))}}for(const H of Object.keys(S).sort()){if(H==="@type"){if(!t.isObject(S[H][0])||!("@default"in S[H][0]))continue}else if(n(H))continue;const j=S[H][0]||{};if(!f(j,k,"omitDefault")&&!(H in R)){let I="@null";"@default"in j&&(I=r.clone(j["@default"])),t.isArray(I)||(I=[I]),R[H]=[{"@preserve":I}]}}for(const H of Object.keys(S["@reverse"]||{}).sort()){const j=S["@reverse"][H];for(const K of Object.keys(w.subjects))r.getValues(w.subjects[K],H).some(G=>G["@id"]===B)&&(R["@reverse"]=R["@reverse"]||{},r.addValue(R["@reverse"],H,[],{propertyIsArray:!0}),o.frame({...w,embedded:!0},[K],j,R["@reverse"][H],A))}_(F,A,R),w.subjectStack.pop()}}},o.cleanupNull=(w,p)=>{if(t.isArray(w))return w.map(F=>o.cleanupNull(F,p)).filter(F=>F);if(w==="@null")return null;if(t.isObject(w)){if("@id"in w){const S=w["@id"];if(p.link.hasOwnProperty(S)){const F=p.link[S].indexOf(w);if(F!==-1)return p.link[S][F];p.link[S].push(w)}else p.link[S]=[w]}for(const S in w)w[S]=o.cleanupNull(w[S],p)}return w};function u(w){const p={};for(const S in w)w[S]!==void 0&&(p["@"+S]=[w[S]]);return[p]}function c(w,p,S){for(let F=S.length-1;F>=0;--F){const A=S[F];if(A.graph===p&&A.subject["@id"]===w["@id"])return!0}return!1}function f(w,p,S){const F="@"+S;let A=F in w?w[F][0]:p[S];if(S==="embed"){if(A===!0)A="@once";else if(A===!1)A="@never";else if(A!=="@always"&&A!=="@never"&&A!=="@link"&&A!=="@first"&&A!=="@last"&&A!=="@once")throw new s("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:w})}return A}function d(w){if(!t.isArray(w)||w.length!==1||!t.isObject(w[0]))throw new s("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:w});if("@id"in w[0]){for(const p of r.asArray(w[0]["@id"]))if(!(t.isObject(p)||a.isAbsolute(p))||t.isString(p)&&p.indexOf("_:")===0)throw new s("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:w})}if("@type"in w[0]){for(const p of r.asArray(w[0]["@type"]))if(!(t.isObject(p)||a.isAbsolute(p)||p==="@json")||t.isString(p)&&p.indexOf("_:")===0)throw new s("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:w})}}function g(w,p,S,F){const A={};for(const k of p){const C=w.graphMap[w.graph][k];m(w,C,S,F)&&(A[k]=C)}return A}function m(w,p,S,F){let A=!0,k=!1;for(const C in S){let L=!1;const P=r.getValues(p,C),M=r.getValues(S,C).length===0;if(C==="@id"){if(t.isEmptyObject(S["@id"][0]||{})?L=!0:S["@id"].length>=0&&(L=S["@id"].includes(P[0])),!F.requireAll)return L}else if(C==="@type"){if(A=!1,M){if(P.length>0)return!1;L=!0}else if(S["@type"].length===1&&t.isEmptyObject(S["@type"][0]))L=P.length>0;else for(const B of S["@type"])t.isObject(B)&&"@default"in B?L=!0:L=L||P.some(O=>O===B);if(!F.requireAll)return L}else{if(n(C))continue;{const B=r.getValues(S,C)[0];let O=!1;if(B&&(d([B]),O="@default"in B),A=!1,P.length===0&&O)continue;if(P.length>0&&M)return!1;if(B===void 0){if(P.length>0)return!1;L=!0}else if(e.isList(B)){const R=B["@list"][0];if(e.isList(P[0])){const H=P[0]["@list"];e.isValue(R)?L=H.some(j=>E(R,j)):(e.isSubject(R)||e.isSubjectReference(R))&&(L=H.some(j=>N(w,R,j,F)))}}else e.isValue(B)?L=P.some(R=>E(B,R)):e.isSubjectReference(B)?L=P.some(R=>N(w,B,R,F)):t.isObject(B)?L=P.length>0:L=!1}}if(!L&&F.requireAll)return!1;k=k||L}return A||k}function v(w,p){const S=w.uniqueEmbeds[w.graph],F=S[p],A=F.parent,k=F.property,C={"@id":p};if(t.isArray(A)){for(let P=0;P<A.length;++P)if(r.compareValues(A[P],C)){A[P]=C;break}}else{const P=t.isArray(A[k]);r.removeValue(A,k,C,{propertyIsArray:P}),r.addValue(A,k,C,{propertyIsArray:P})}const L=P=>{const M=Object.keys(S);for(const B of M)B in S&&t.isObject(S[B].parent)&&S[B].parent["@id"]===P&&(delete S[B],L(B))};L(p)}function b(w,p){if(t.isArray(w))return w.map(S=>b(S,p));if(t.isObject(w)){if("@preserve"in w)return w["@preserve"][0];if(e.isValue(w))return w;if(e.isList(w))return w["@list"]=b(w["@list"],p),w;if("@id"in w){const S=w["@id"];if(p.link.hasOwnProperty(S)){const F=p.link[S].indexOf(w);if(F!==-1)return p.link[S][F];p.link[S].push(w)}else p.link[S]=[w]}for(const S in w){if(S==="@id"&&p.bnodesToClear.includes(w[S])){delete w["@id"];continue}w[S]=b(w[S],p)}}return w}function _(w,p,S){t.isObject(w)?r.addValue(w,p,S,{propertyIsArray:!0}):w.push(S)}function N(w,p,S,F){if(!("@id"in S))return!1;const A=w.subjects[S["@id"]];return A&&m(w,A,p,F)}function E(w,p){const S=p["@value"],F=p["@type"],A=p["@language"],k=w["@value"]?t.isArray(w["@value"])?w["@value"]:[w["@value"]]:[],C=w["@type"]?t.isArray(w["@type"])?w["@type"]:[w["@type"]]:[],L=w["@language"]?t.isArray(w["@language"])?w["@language"]:[w["@language"]]:[];return k.length===0&&C.length===0&&L.length===0?!0:!(!(k.includes(S)||t.isEmptyObject(k[0]))||!(!F&&C.length===0||C.includes(F)||F&&t.isEmptyObject(C[0]))||!(!A&&L.length===0||L.includes(A)||A&&t.isEmptyObject(L[0])))}return Ql}var Yl,yf;function pv(){if(yf)return Yl;yf=1;const n=Gt(),{isArray:e,isObject:t,isString:r,isUndefined:a}=jt(),{isList:s,isValue:i,isGraph:l,isSimpleGraph:o,isSubjectReference:u}=Pn(),{expandIri:c,getContextValue:f,isKeyword:d,process:g,processingMode:m}=yr(),{removeBase:v,prependBase:b}=Jn(),{REGEX_KEYWORD:_,addValue:N,asArray:E,compareShortestLeast:w}=Jt(),p={};Yl=p,p.compact=async({activeCtx:A,activeProperty:k=null,element:C,options:L={}})=>{if(e(C)){let M=[];for(let B=0;B<C.length;++B){const O=await p.compact({activeCtx:A,activeProperty:k,element:C[B],options:L});O!==null&&M.push(O)}return L.compactArrays&&M.length===1&&(f(A,k,"@container")||[]).length===0&&(M=M[0]),M}const P=f(A,k,"@context");if(a(P)||(A=await g({activeCtx:A,localCtx:P,propagate:!0,overrideProtected:!0,options:L})),t(C)){if(L.link&&"@id"in C&&L.link.hasOwnProperty(C["@id"])){const I=L.link[C["@id"]];for(let G=0;G<I.length;++G)if(I[G].expanded===C)return I[G].compacted}if(i(C)||u(C)){const I=p.compactValue({activeCtx:A,activeProperty:k,value:C,options:L});return L.link&&u(C)&&(L.link.hasOwnProperty(C["@id"])||(L.link[C["@id"]]=[]),L.link[C["@id"]].push({expanded:C,compacted:I})),I}if(s(C)&&(f(A,k,"@container")||[]).includes("@list"))return p.compact({activeCtx:A,activeProperty:k,element:C["@list"],options:L});const M=k==="@reverse",B={},O=A;!i(C)&&!u(C)&&(A=A.revertToPreviousContext());const R=f(O,k,"@context");a(R)||(A=await g({activeCtx:A,localCtx:R,propagate:!0,overrideProtected:!0,options:L})),L.link&&"@id"in C&&(L.link.hasOwnProperty(C["@id"])||(L.link[C["@id"]]=[]),L.link[C["@id"]].push({expanded:C,compacted:B}));let H=C["@type"]||[];H.length>1&&(H=Array.from(H).sort());const j=A;for(const I of H){const G=p.compactIri({activeCtx:j,iri:I,relativeTo:{vocab:!0}}),se=f(O,G,"@context");a(se)||(A=await g({activeCtx:A,localCtx:se,options:L,propagate:!1}))}const K=Object.keys(C).sort();for(const I of K){const G=C[I];if(I==="@id"){let se=E(G).map(ge=>p.compactIri({activeCtx:A,iri:ge,relativeTo:{vocab:!1},base:L.base}));se.length===1&&(se=se[0]);const ie=p.compactIri({activeCtx:A,iri:"@id",relativeTo:{vocab:!0}});B[ie]=se;continue}if(I==="@type"){let se=E(G).map(le=>p.compactIri({activeCtx:O,iri:le,relativeTo:{vocab:!0}}));se.length===1&&(se=se[0]);const ie=p.compactIri({activeCtx:A,iri:"@type",relativeTo:{vocab:!0}}),ae=(f(A,ie,"@container")||[]).includes("@set")&&m(A,1.1)||e(se)&&G.length===0;N(B,ie,se,{propertyIsArray:ae});continue}if(I==="@reverse"){const se=await p.compact({activeCtx:A,activeProperty:"@reverse",element:G,options:L});for(const ie in se)if(A.mappings.has(ie)&&A.mappings.get(ie).reverse){const ge=se[ie],ae=(f(A,ie,"@container")||[]).includes("@set")||!L.compactArrays;N(B,ie,ge,{propertyIsArray:ae}),delete se[ie]}if(Object.keys(se).length>0){const ie=p.compactIri({activeCtx:A,iri:I,relativeTo:{vocab:!0}});N(B,ie,se)}continue}if(I==="@preserve"){const se=await p.compact({activeCtx:A,activeProperty:k,element:G,options:L});e(se)&&se.length===0||N(B,I,se);continue}if(I==="@index"){if((f(A,k,"@container")||[]).includes("@index"))continue;const ie=p.compactIri({activeCtx:A,iri:I,relativeTo:{vocab:!0}});N(B,ie,G);continue}if(I!=="@graph"&&I!=="@list"&&I!=="@included"&&d(I)){const se=p.compactIri({activeCtx:A,iri:I,relativeTo:{vocab:!0}});N(B,se,G);continue}if(!e(G))throw new n("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(G.length===0){const se=p.compactIri({activeCtx:A,iri:I,value:G,relativeTo:{vocab:!0},reverse:M}),ie=A.mappings.has(se)?A.mappings.get(se)["@nest"]:null;let ge=B;ie&&(F(A,ie,L),t(B[ie])||(B[ie]={}),ge=B[ie]),N(ge,se,G,{propertyIsArray:!0})}for(const se of G){const ie=p.compactIri({activeCtx:A,iri:I,value:se,relativeTo:{vocab:!0},reverse:M}),ge=A.mappings.has(ie)?A.mappings.get(ie)["@nest"]:null;let ee=B;ge&&(F(A,ge,L),t(B[ge])||(B[ge]={}),ee=B[ge]);const ae=f(A,ie,"@container")||[],le=l(se),te=s(se);let ce;te?ce=se["@list"]:le&&(ce=se["@graph"]);let pe=await p.compact({activeCtx:A,activeProperty:ie,element:te||le?ce:se,options:L});if(te)if(e(pe)||(pe=[pe]),!ae.includes("@list"))pe={[p.compactIri({activeCtx:A,iri:"@list",relativeTo:{vocab:!0}})]:pe},"@index"in se&&(pe[p.compactIri({activeCtx:A,iri:"@index",relativeTo:{vocab:!0}})]=se["@index"]);else{N(ee,ie,pe,{valueIsArray:!0,allowDuplicate:!0});continue}if(le)if(ae.includes("@graph")&&(ae.includes("@id")||ae.includes("@index")&&o(se))){let Ne;ee.hasOwnProperty(ie)?Ne=ee[ie]:ee[ie]=Ne={};const xe=(ae.includes("@id")?se["@id"]:se["@index"])||p.compactIri({activeCtx:A,iri:"@none",relativeTo:{vocab:!0}});N(Ne,xe,pe,{propertyIsArray:!L.compactArrays||ae.includes("@set")})}else ae.includes("@graph")&&o(se)?(e(pe)&&pe.length>1&&(pe={"@included":pe}),N(ee,ie,pe,{propertyIsArray:!L.compactArrays||ae.includes("@set")})):(e(pe)&&pe.length===1&&L.compactArrays&&(pe=pe[0]),pe={[p.compactIri({activeCtx:A,iri:"@graph",relativeTo:{vocab:!0}})]:pe},"@id"in se&&(pe[p.compactIri({activeCtx:A,iri:"@id",relativeTo:{vocab:!0}})]=se["@id"]),"@index"in se&&(pe[p.compactIri({activeCtx:A,iri:"@index",relativeTo:{vocab:!0}})]=se["@index"]),N(ee,ie,pe,{propertyIsArray:!L.compactArrays||ae.includes("@set")}));else if(ae.includes("@language")||ae.includes("@index")||ae.includes("@id")||ae.includes("@type")){let Ne;ee.hasOwnProperty(ie)?Ne=ee[ie]:ee[ie]=Ne={};let xe;if(ae.includes("@language"))i(pe)&&(pe=pe["@value"]),xe=se["@language"];else if(ae.includes("@index")){const J=f(A,ie,"@index")||"@index",ne=p.compactIri({activeCtx:A,iri:J,relativeTo:{vocab:!0}});if(J==="@index")xe=se["@index"],delete pe[ne];else{let ye;if([xe,...ye]=E(pe[J]||[]),!r(xe))xe=null;else switch(ye.length){case 0:delete pe[J];break;case 1:pe[J]=ye[0];break;default:pe[J]=ye;break}}}else if(ae.includes("@id")){const J=p.compactIri({activeCtx:A,iri:"@id",relativeTo:{vocab:!0}});xe=pe[J],delete pe[J]}else if(ae.includes("@type")){const J=p.compactIri({activeCtx:A,iri:"@type",relativeTo:{vocab:!0}});let ne;switch([xe,...ne]=E(pe[J]||[]),ne.length){case 0:delete pe[J];break;case 1:pe[J]=ne[0];break;default:pe[J]=ne;break}Object.keys(pe).length===1&&"@id"in se&&(pe=await p.compact({activeCtx:A,activeProperty:ie,element:{"@id":se["@id"]},options:L}))}xe||(xe=p.compactIri({activeCtx:A,iri:"@none",relativeTo:{vocab:!0}})),N(Ne,xe,pe,{propertyIsArray:ae.includes("@set")})}else{const Ne=!L.compactArrays||ae.includes("@set")||ae.includes("@list")||e(pe)&&pe.length===0||I==="@list"||I==="@graph";N(ee,ie,pe,{propertyIsArray:Ne})}}}return B}return C},p.compactIri=({activeCtx:A,iri:k,value:C=null,relativeTo:L={vocab:!1},reverse:P=!1,base:M=null})=>{if(k===null)return k;A.isPropertyTermScoped&&A.previousContext&&(A=A.previousContext);const B=A.getInverse();if(d(k)&&k in B&&"@none"in B[k]&&"@type"in B[k]["@none"]&&"@none"in B[k]["@none"]["@type"])return B[k]["@none"]["@type"]["@none"];if(L.vocab&&k in B){const K=A["@language"]||"@none",I=[];t(C)&&"@index"in C&&!("@graph"in C)&&I.push("@index","@index@set"),t(C)&&"@preserve"in C&&(C=C["@preserve"][0]),l(C)?("@index"in C&&I.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in C&&I.push("@graph@id","@graph@id@set"),I.push("@graph","@graph@set","@set"),"@index"in C||I.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in C||I.push("@graph@id","@graph@id@set")):t(C)&&!i(C)&&I.push("@id","@id@set","@type","@set@type");let G="@language",se="@null";if(P)G="@type",se="@reverse",I.push("@set");else if(s(C)){"@index"in C||I.push("@list");const ge=C["@list"];if(ge.length===0)G="@any",se="@none";else{let ee=ge.length===0?K:null,ae=null;for(let le=0;le<ge.length;++le){const te=ge[le];let ce="@none",pe="@none";if(i(te))if("@direction"in te){const Ne=(te["@language"]||"").toLowerCase(),xe=te["@direction"];ce=`${Ne}_${xe}`}else"@language"in te?ce=te["@language"].toLowerCase():"@type"in te?pe=te["@type"]:ce="@null";else pe="@id";if(ee===null?ee=ce:ce!==ee&&i(te)&&(ee="@none"),ae===null?ae=pe:pe!==ae&&(ae="@none"),ee==="@none"&&ae==="@none")break}ee=ee||"@none",ae=ae||"@none",ae!=="@none"?(G="@type",se=ae):se=ee}}else{if(i(C))if("@language"in C&&!("@index"in C)){I.push("@language","@language@set"),se=C["@language"];const ge=C["@direction"];ge&&(se=`${se}_${ge}`)}else"@direction"in C&&!("@index"in C)?se=`_${C["@direction"]}`:"@type"in C&&(G="@type",se=C["@type"]);else G="@type",se="@id";I.push("@set")}I.push("@none"),t(C)&&!("@index"in C)&&I.push("@index","@index@set"),i(C)&&Object.keys(C).length===1&&I.push("@language","@language@set");const ie=S(A,k,C,I,G,se);if(ie!==null)return ie}if(L.vocab&&"@vocab"in A){const K=A["@vocab"];if(k.indexOf(K)===0&&k!==K){const I=k.substr(K.length);if(!A.mappings.has(I))return I}}let O=null;const R=[];let H=A.fastCurieMap;const j=k.length-1;for(let K=0;K<j&&k[K]in H;++K)H=H[k[K]],""in H&&R.push(H[""][0]);for(let K=R.length-1;K>=0;--K){const I=R[K],G=I.terms;for(const se of G){const ie=se+":"+k.substr(I.iri.length);A.mappings.get(se)._prefix&&(!A.mappings.has(ie)||C===null&&A.mappings.get(ie)["@id"]===k)&&(O===null||w(ie,O)<0)&&(O=ie)}}if(O!==null)return O;for(const[K,I]of A.mappings)if(I&&I._prefix&&k.startsWith(K+":"))throw new n(`Absolute IRI "${k}" confused with prefix "${K}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:A});if(!L.vocab)if("@base"in A)if(A["@base"]){const K=v(b(M,A["@base"]),k);return _.test(K)?`./${K}`:K}else return k;else return v(M,k);return k},p.compactValue=({activeCtx:A,activeProperty:k,value:C,options:L})=>{if(i(C)){const O=f(A,k,"@type"),R=f(A,k,"@language"),H=f(A,k,"@direction"),j=f(A,k,"@container")||[],K="@index"in C&&!j.includes("@index");if(!K&&O!=="@none"&&(C["@type"]===O||"@language"in C&&C["@language"]===R&&"@direction"in C&&C["@direction"]===H||"@language"in C&&C["@language"]===R||"@direction"in C&&C["@direction"]===H))return C["@value"];const I=Object.keys(C).length,G=I===1||I===2&&"@index"in C&&!K,se="@language"in A,ie=r(C["@value"]),ge=A.mappings.has(k)&&A.mappings.get(k)["@language"]===null;if(G&&O!=="@none"&&(!se||!ie||ge))return C["@value"];const ee={};return K&&(ee[p.compactIri({activeCtx:A,iri:"@index",relativeTo:{vocab:!0}})]=C["@index"]),"@type"in C?ee[p.compactIri({activeCtx:A,iri:"@type",relativeTo:{vocab:!0}})]=p.compactIri({activeCtx:A,iri:C["@type"],relativeTo:{vocab:!0}}):"@language"in C&&(ee[p.compactIri({activeCtx:A,iri:"@language",relativeTo:{vocab:!0}})]=C["@language"]),"@direction"in C&&(ee[p.compactIri({activeCtx:A,iri:"@direction",relativeTo:{vocab:!0}})]=C["@direction"]),ee[p.compactIri({activeCtx:A,iri:"@value",relativeTo:{vocab:!0}})]=C["@value"],ee}const P=c(A,k,{vocab:!0},L),M=f(A,k,"@type"),B=p.compactIri({activeCtx:A,iri:C["@id"],relativeTo:{vocab:M==="@vocab"},base:L.base});return M==="@id"||M==="@vocab"||P==="@graph"?B:{[p.compactIri({activeCtx:A,iri:"@id",relativeTo:{vocab:!0}})]:B}};function S(A,k,C,L,P,M){M===null&&(M="@null");const B=[];if((M==="@id"||M==="@reverse")&&t(C)&&"@id"in C){M==="@reverse"&&B.push("@reverse");const R=p.compactIri({activeCtx:A,iri:C["@id"],relativeTo:{vocab:!0}});A.mappings.has(R)&&A.mappings.get(R)&&A.mappings.get(R)["@id"]===C["@id"]?B.push.apply(B,["@vocab","@id"]):B.push.apply(B,["@id","@vocab"])}else{B.push(M);const R=B.find(H=>H.includes("_"));R&&B.push(R.replace(/^[^_]+_/,"_"))}B.push("@none");const O=A.inverse[k];for(const R of L){if(!(R in O))continue;const H=O[R][P];for(const j of B)if(j in H)return H[j]}return null}function F(A,k,C){if(c(A,k,{vocab:!0},C)!=="@nest")throw new n("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}return Yl}var Zl,wf;function mv(){return wf||(wf=1,Zl=n=>{class e{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(e,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(e.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:e}),e.compact=function(t,r){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):n.compact(t,r)},e.expand=function(t){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):n.expand(t)},e.flatten=function(t){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):n.flatten(t)},e}),Zl}var eo,vf;function gv(){if(vf)return eo;vf=1;const n=Nl(),e=nv(),t=Jt(),r=sv(),a=t.IdentifierIssuer,s=Gt(),i=rf(),l=lv(),{expand:o}=ov(),{flatten:u}=uv(),{fromRDF:c}=cv(),{toRDF:f}=fv(),{frameMergedOrDefault:d,cleanupNull:g}=hv(),{isArray:m,isObject:v,isString:b}=jt(),{isSubjectReference:_}=Pn(),{expandIri:N,getInitialContext:E,process:w,processingMode:p}=yr(),{compact:S,compactIri:F}=pv(),{createNodeMap:A,createMergedNodeMap:k,mergeNodeMaps:C}=fa(),{logEventHandler:L,logWarningEventHandler:P,safeEventHandler:M,setDefaultEventHandler:B,setupEventHandler:O,strictEventHandler:R,unhandledEventHandler:H}=Ei(),j=function(I){const G={},ie=new i({max:100});I.compact=async function(ee,ae,le){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(ae===null)throw new s("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(ee===null)return null;le=ge(le,{base:b(ee)?ee:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new a("_:b"),contextResolver:new r({sharedCache:ie})}),le.link&&(le.skipExpansion=!0),le.compactToRelative||delete le.base;let te;le.skipExpansion?te=ee:te=await I.expand(ee,le);const ce=await I.processContext(E(le),ae,le);let pe=await S({activeCtx:ce,element:te,options:le});le.compactArrays&&!le.graph&&m(pe)?pe.length===1?pe=pe[0]:pe.length===0&&(pe={}):le.graph&&v(pe)&&(pe=[pe]),v(ae)&&"@context"in ae&&(ae=ae["@context"]),ae=t.clone(ae),m(ae)||(ae=[ae]);const Ne=ae;ae=[];for(let J=0;J<Ne.length;++J)(!v(Ne[J])||Object.keys(Ne[J]).length>0)&&ae.push(Ne[J]);const xe=ae.length>0;if(ae.length===1&&(ae=ae[0]),m(pe)){const J=F({activeCtx:ce,iri:"@graph",relativeTo:{vocab:!0}}),ne=pe;pe={},xe&&(pe["@context"]=ae),pe[J]=ne}else if(v(pe)&&xe){const J=pe;pe={"@context":ae};for(const ne in J)pe[ne]=J[ne]}return pe},I.expand=async function(ee,ae){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");ae=ge(ae,{keepFreeFloatingNodes:!1,contextResolver:new r({sharedCache:ie})});const le={},te=[];if("expandContext"in ae){const xe=t.clone(ae.expandContext);v(xe)&&"@context"in xe?le.expandContext=xe:le.expandContext={"@context":xe},te.push(le.expandContext)}let ce;if(!b(ee))le.input=t.clone(ee);else{const xe=await I.get(ee,ae);ce=xe.documentUrl,le.input=xe.document,xe.contextUrl&&(le.remoteContext={"@context":xe.contextUrl},te.push(le.remoteContext))}"base"in ae||(ae.base=ce||"");let pe=E(ae);for(const xe of te)pe=await w({activeCtx:pe,localCtx:xe,options:ae});let Ne=await o({activeCtx:pe,element:le.input,options:ae});return v(Ne)&&"@graph"in Ne&&Object.keys(Ne).length===1?Ne=Ne["@graph"]:Ne===null&&(Ne=[]),m(Ne)||(Ne=[Ne]),Ne},I.flatten=async function(ee,ae,le){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");typeof ae=="function"?ae=null:ae=ae||null,le=ge(le,{base:b(ee)?ee:"",contextResolver:new r({sharedCache:ie})});const te=await I.expand(ee,le),ce=u(te);return ae===null?ce:(le.graph=!0,le.skipExpansion=!0,await I.compact(ce,ae,le))},I.frame=async function(ee,ae,le){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(le=ge(le,{base:b(ee)?ee:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new r({sharedCache:ie})}),b(ae)){const _e=await I.get(ae,le);if(ae=_e.document,_e.contextUrl){let me=ae["@context"];me?m(me)?me.push(_e.contextUrl):me=[me,_e.contextUrl]:me=_e.contextUrl,ae["@context"]=me}}const te=ae?ae["@context"]||{}:{},ce=await I.processContext(E(le),te,le);le.hasOwnProperty("omitGraph")||(le.omitGraph=p(ce,1.1)),le.hasOwnProperty("pruneBlankNodeIdentifiers")||(le.pruneBlankNodeIdentifiers=p(ce,1.1));const pe=await I.expand(ee,le),Ne={...le};Ne.isFrame=!0,Ne.keepFreeFloatingNodes=!0;const xe=await I.expand(ae,Ne),J=Object.keys(ae).map(_e=>N(ce,_e,{vocab:!0}));Ne.merged=!J.includes("@graph"),Ne.is11=p(ce,1.1);const ne=d(pe,xe,Ne);Ne.graph=!le.omitGraph,Ne.skipExpansion=!0,Ne.link={},Ne.framing=!0;let ye=await I.compact(ne,te,Ne);return Ne.link={},ye=g(ye,Ne),ye},I.link=async function(ee,ae,le){const te={};return ae&&(te["@context"]=ae),te["@embed"]="@link",I.frame(ee,te,le)},I.normalize=I.canonize=async function(ee,ae){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");ae=ge(ae,{skipExpansion:!1,safe:!0,contextResolver:new r({sharedCache:ie})});const le=Object.assign({},{algorithm:"RDFC-1.0"},ae.canonizeOptions||null);if("inputFormat"in ae){if(ae.inputFormat!=="application/n-quads")throw new s("Unknown canonicalization input format.","jsonld.CanonizeError");const pe=l.parse(ee);return n.canonize(pe,le)}const te={...ae};delete te.format,delete te.canonizeOptions,te.produceGeneralizedRdf=!1;const ce=await I.toRDF(ee,te);return n.canonize(ce,le)},I.fromRDF=async function(ee,ae){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");ae=ge(ae,{format:b(ee)?"application/n-quads":void 0});const{format:le}=ae;let{rdfParser:te}=ae;if(le){if(te=te||G[le],!te)throw new s("Unknown input format.","jsonld.UnknownFormat",{format:le})}else te=()=>ee;const ce=await te(ee);return c(ce,ae)},I.toRDF=async function(ee,ae){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");ae=ge(ae,{skipExpansion:!1,contextResolver:new r({sharedCache:ie})});let le;ae.skipExpansion?le=ee:le=await I.expand(ee,ae);const te=f(le,ae);if(ae.format){if(ae.format==="application/n-quads")return l.serialize(te);throw new s("Unknown output format.","jsonld.UnknownFormat",{format:ae.format})}return te},I.createNodeMap=async function(ee,ae){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");ae=ge(ae,{base:b(ee)?ee:"",contextResolver:new r({sharedCache:ie})});const le=await I.expand(ee,ae);return k(le,ae)},I.merge=async function(ee,ae,le){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!m(ee))throw new TypeError('Could not merge, "docs" must be an array.');typeof ae=="function"?ae=null:ae=ae||null,le=ge(le,{contextResolver:new r({sharedCache:ie})});const te=await Promise.all(ee.map(_e=>{const me={...le};return I.expand(_e,me)}));let ce=!0;"mergeNodes"in le&&(ce=le.mergeNodes);const pe=le.issuer||new a("_:b"),Ne={"@default":{}};for(let _e=0;_e<te.length;++_e){const me=t.relabelBlankNodes(te[_e],{issuer:new a("_:b"+_e+"-")}),Ce=ce||_e===0?Ne:{"@default":{}};if(A(me,Ce,"@default",pe),Ce!==Ne)for(const de in Ce){const Ae=Ce[de];if(!(de in Ne)){Ne[de]=Ae;continue}const Se=Ne[de];for(const be in Ae)be in Se||(Se[be]=Ae[be])}}const xe=C(Ne),J=[],ne=Object.keys(xe).sort();for(let _e=0;_e<ne.length;++_e){const me=xe[ne[_e]];_(me)||J.push(me)}return ae===null?J:(le.graph=!0,le.skipExpansion=!0,await I.compact(J,ae,le))},Object.defineProperty(I,"documentLoader",{get:()=>I._documentLoader,set:ee=>I._documentLoader=ee}),I.documentLoader=async ee=>{throw new s("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:ee})},I.get=async function(ee,ae){let le;typeof ae.documentLoader=="function"?le=ae.documentLoader:le=I.documentLoader;const te=await le(ee);try{if(!te.document)throw new s("No remote document found at the given URL.","jsonld.NullRemoteDocument");b(te.document)&&(te.document=JSON.parse(te.document))}catch(ce){throw new s("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:ce,remoteDoc:te})}return te},I.processContext=async function(ee,ae,le){return le=ge(le,{base:"",contextResolver:new r({sharedCache:ie})}),ae===null?E(le):(ae=t.clone(ae),v(ae)&&"@context"in ae||(ae={"@context":ae}),w({activeCtx:ee,localCtx:ae,options:le}))},I.getContextValue=yr().getContextValue,I.documentLoaders={},I.useDocumentLoader=function(ee){if(!(ee in I.documentLoaders))throw new s('Unknown document loader type: "'+ee+'"',"jsonld.UnknownDocumentLoader",{type:ee});I.documentLoader=I.documentLoaders[ee].apply(I,Array.prototype.slice.call(arguments,1))},I.registerRDFParser=function(ee,ae){G[ee]=ae},I.unregisterRDFParser=function(ee){delete G[ee]},I.registerRDFParser("application/n-quads",l.parse),I.url=Jn(),I.logEventHandler=L,I.logWarningEventHandler=P,I.safeEventHandler=M,I.setDefaultEventHandler=B,I.strictEventHandler=R,I.unhandledEventHandler=H,I.util=t,Object.assign(I,t),I.promises=I,I.RequestQueue=Xd(),I.JsonLdProcessor=mv()(I),e.setupGlobals(I),e.setupDocumentLoaders(I);function ge(ee,{documentLoader:ae=I.documentLoader,...le}){if(ee&&"compactionMap"in ee)throw new s('"compactionMap" not supported.',"jsonld.OptionsError");if(ee&&"expansionMap"in ee)throw new s('"expansionMap" not supported.',"jsonld.OptionsError");return Object.assign({},{documentLoader:ae},le,ee,{eventHandler:O({options:ee})})}return I},K=function(){return j(function(){return K()})};return j(K),eo=K,eo}var bf=gv();const yv=oh({__proto__:null,default:Fa(bf)},[bf])})();
